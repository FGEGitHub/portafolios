;/*FB_PKG_DELIM*/

__d("AggregateError",[],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(c,d){var e;d=d!=null?d:g(c);e=a.call(this,d)||this;e.name="AggregateError";e.errors=c;e.message=d;Error.captureStackTrace&&Error.captureStackTrace(babelHelpers.assertThisInitialized(e),b);return e}return b}(babelHelpers.wrapNativeSuper(Error));function g(a){if(a.length===0)return"No errors";return a.length===1?a[0].message:a.map(function(a){return"- "+a.message}).join("\n")}f["default"]=a}),66);
__d("TCompactProtocol",["StringToUtf8","ThriftTypes","Utf8ToString"],(function(a,b,c,d,e,f,g){var h,i=Object.freeze({CT_STOP:0,CT_BOOLEAN_TRUE:1,CT_BOOLEAN_FALSE:2,CT_BYTE:3,CT_I16:4,CT_I32:5,CT_I64:6,CT_DOUBLE:7,CT_BINARY:8,CT_LIST:9,CT_SET:10,CT_MAP:11,CT_STRUCT:12,CT_FLOAT:13}),j=Object.freeze({NONE:-1,CT_BOOLEAN_TRUE:i.CT_BOOLEAN_TRUE,CT_BOOLEAN_FALSE:i.CT_BOOLEAN_FALSE}),k=[i.CT_STOP,0,i.CT_BOOLEAN_TRUE,i.CT_BYTE,i.CT_DOUBLE,0,i.CT_I16,0,i.CT_I32,0,i.CT_I64,i.CT_BINARY,i.CT_STRUCT,i.CT_MAP,i.CT_SET,i.CT_LIST,0,0,0,i.CT_FLOAT],l=Math.pow(2,7)-1,m=-1*Math.pow(2,7),n=Math.pow(2,15)-1,o=-1*Math.pow(2,15),p=Math.pow(2,31)-1,q=-1*Math.pow(2,31),r=Math.pow(2,32)-1,s=BigInt("9223372036854775807"),t=BigInt("-9223372036854775808"),u=BigInt("18446744073709551615"),v=BigInt(63),w=BigInt(1),x=BigInt(7),y=BigInt("0x7f"),z=BigInt("0x80"),A=Math.pow(2,4);a=function(){function a(a){this.$4=null,this.$5=null,this.$1=a,this.$2=[],this.$3=0,this.$6=new DataView(new ArrayBuffer(1))}var b=a.prototype;b.readStructBegin=function(){this.$2.push(this.$3),this.$3=0};b.readStructEnd=function(){this.$3=this.$2.pop();return 0};b.writeStructBegin=function(a){this.$2.push(this.$3);this.$3=0;return 0};b.writeStructEnd=function(){this.$3=this.$2.pop();return 0};b.writeFieldBegin=function(a){if(a.ftype===(h||(h=c("ThriftTypes"))).BOOL){this.$4={fid:a.fid,fname:a.fname,ftype:a.ftype};return 0}else return this.$7(a,j.NONE)};b.writeListBegin=function(a){return this.$8(a)};b.writeListEnd=function(){return 0};b.writeSetBegin=function(a){return this.$8(a)};b.writeSetEnd=function(){return 0};b.writeMapBegin=function(a){var b=0;if(a.size===0)b+=this.$1.writeByte(0);else{b+=this.writeVarint32(a.size);if(a.ktype!=null&&a.vtype!=null)b+=this.$1.writeByte(this.$9(a.ktype)<<4|this.$9(a.vtype));else throw new Error("received invalid map info: "+JSON.stringify(a))}return b};b.writeMapEnd=function(){return 0};b.$7=function(a,b){var c=0;b=b===j.NONE?this.$9(a.ftype):b;a.fid>this.$3&&a.fid-this.$3<=A-1?c+=this.$1.writeByte(a.fid-this.$3<<4|b):(c+=this.$1.writeByte(b),c+=this.writeI16(a.fid));this.$3=a.fid;return c};b.$8=function(a){var b=0,c=this.$9(a.etype);a.size<=A-2?b+=this.$1.writeByte(a.size<<4|c):(b+=this.$1.writeByte(240|c),b+=this.writeVarint32(a.size));return b};b.readFieldBegin=function(){var a=this.$1.readByte(),b=a&15;if(b===(h||(h=c("ThriftTypes"))).STOP)return{ftype:(h||(h=c("ThriftTypes"))).STOP,fid:0};a=(a&240)>>>4;var d;a===0?d=this.readI16():d=this.$3+a;a=this.$10(b);(b===i.CT_BOOLEAN_TRUE||b===i.CT_BOOLEAN_FALSE)&&(this.$5=b===i.CT_BOOLEAN_TRUE);this.$3=d;return{ftype:a,fid:d}};b.readListBegin=function(){return this.$11()};b.readListEnd=function(){return 0};b.readSetBegin=function(){return this.$11()};b.readSetEnd=function(){return 0};b.readMapBegin=function(){var a=this.readVarint32();if(a>0){var b=this.$1.readByte(),c=this.$12(b>>4,"readMapBegin:key");b=this.$12(b&15,"readMapBegin:value");return{ktype:this.$10(c),vtype:this.$10(b),size:a}}return{size:a}};b.readMapEnd=function(){return 0};b.$12=function(a,b){if(a<0||a>13)throw new Error(b+" read invalid compact type: "+a);return a};b.$11=function(){var a=this.$1.readByte(),b=this.$12(a&15,"_readListOrSetBegin");b=this.$10(b);a=a>>4&15;a===15&&(a=this.readVarint32());return{etype:b,size:a}};b.readFieldEnd=function(){return 0};b.readByte=function(){this.$6.setUint8(0,this.$1.readByte());return this.$6.getInt8(0)};b.writeByte=function(a){if(a<m||a>l)throw new Error("byte to write is out of range: "+a);this.$6.setInt8(0,a);return this.$1.writeByte(this.$6.getUint8(0))};b.readFloat=function(){return this.$1.readFloatBE()};b.writeFloat=function(a){return this.$1.writeFloatBE(a)};b.readDouble=function(){return this.$1.readDoubleBE()};b.writeDouble=function(a){return this.$1.writeDoubleBE(a)};b.writeString=function(a){return this.writeBinary(d("StringToUtf8").StringToUtf8(a))};b.skip=function(a){switch(a){case(h||(h=c("ThriftTypes"))).STOP:return;case(h||(h=c("ThriftTypes"))).BOOL:this.readBool();break;case(h||(h=c("ThriftTypes"))).BYTE:this.readByte();break;case(h||(h=c("ThriftTypes"))).DOUBLE:this.readDouble();break;case(h||(h=c("ThriftTypes"))).I16:this.readI16();break;case(h||(h=c("ThriftTypes"))).I32:this.readI32();break;case(h||(h=c("ThriftTypes"))).I64:this.readI64();break;case(h||(h=c("ThriftTypes"))).STRING:this.readString();break;case(h||(h=c("ThriftTypes"))).STRUCT:this.readStructBegin();var b;while(!0){b=this.readFieldBegin();if(b.ftype===(h||(h=c("ThriftTypes"))).STOP)break;this.skip(b.ftype)}this.readStructEnd();break;case(h||(h=c("ThriftTypes"))).MAP:b=this.readMapBegin();if(b.size>0&&b.ktype!=null&&b.vtype!=null){var d=b.ktype,e=b.vtype;for(var f=0;f<b.size;f++)this.skip(d),this.skip(e)}break;case(h||(h=c("ThriftTypes"))).SET:case(h||(h=c("ThriftTypes"))).LIST:f=this.$11();for(d=0;d<f.size;d++)this.skip(f.etype);break;case(h||(h=c("ThriftTypes"))).FLOAT:this.readFloat();break;default:throw new Error("encoutered unknow thrift type: "+a+" in skip")}};b.toByteArray=function(){return this.$1.toByteArray()};b.writeFieldEnd=function(){return 0};b.writeFieldStop=function(){return this.$1.writeByte((h||(h=c("ThriftTypes"))).STOP)};b.writeI16=function(a){if(a<o||a>n)throw new Error("trying to write i16 out of range: "+a);return this.writeVarint32(this.i32ToZigzag(a))};b.readI16=function(){var a=this.zigzagToI32(this.readVarint32());if(a<o||a>n)throw new Error("read invalid i16: "+a);return a};b.writeI32=function(a){if(a<q||a>p)throw new Error("i32 out of range: "+a);return this.writeVarint32(this.i32ToZigzag(a))};b.readI32=function(){return this.zigzagToI32(this.readVarint32())};b.writeI64=function(a){return this.writeVarint64(this.i64ToZigzag(a))};b.readI64=function(){return this.zigzagToI64(this.readVarint64())};b.readBool=function(){var a;this.$5!=null?(a=this.$5,this.$5=null):a=this.$1.readByte()===i.CT_BOOLEAN_TRUE;return a};b.writeBool=function(a){var b=0;this.$4!=null?(b+=this.$7(this.$4,a?j.CT_BOOLEAN_TRUE:j.CT_BOOLEAN_FALSE),this.$4=null):b+=this.$1.writeByte(a?i.CT_BOOLEAN_TRUE:i.CT_BOOLEAN_FALSE);return b};b.readBinary=function(){var a=this.readVarint32();return a===0?new Uint8Array(0):this.$1.readBytes(a)};b.writeBinary=function(a){var b=0;b+=this.writeVarint32(a.length);b+=this.$1.write(a);return b};b.i32ToZigzag=function(a){if(a<q||a>p)throw new Error("number: "+a+" is out of range of i32");return(a<<1^(a<0?4294967295:0))>>>0};b.zigzagToI32=function(a){if(a<0||a>r)throw new Error("number: "+a+" is out of range of uint32");return a>>>1^-1*(a&1)};b.i64ToZigzag=function(a){if(a>s||a<t)throw new Error("i64 out of range: "+a.toString());return a>>v^a<<w};b.zigzagToI64=function(a){if(a<0||a>u)throw new Error("invalid uint64: "+a.toString());return(a&w)===w?~(a>>w):a>>w};b.writeVarint32=function(a){if(a<0||a>r)throw new Error("writeVarint32 received out of range uint32: "+a);a=a;var b=0;while(!0)if(a>>>7===0){this.$1.writeByte(a);b++;break}else this.$1.writeByte(a&127|128),b++,a>>>=7;return b};b.readVarint32=function(){var a=0,b=0,c;while(!0){c=this.$1.readByte();a=(a|(c&127)<<b)>>>0;b+=7;if((c&128)==0){if(b===35&&(c&240)!=0)throw new Error("result exceeded 32 bit limit");break}if(b>28)throw new Error("result exceeded 32 bit limit")}return a};b.writeVarint64=function(a){if(a<0||a>u)throw new Error("invalid uint64: "+a.toString());a=a;var b=0;while(!0)if(a>>x==0){this.$1.writeByte(Number(a));b++;break}else this.$1.writeByte(Number(a&y|z)),b++,a>>=x;return b};b.readVarint64=function(){var a=BigInt(0),b=BigInt(0),c;while(!0){c=BigInt(this.$1.readByte());a|=(c&y)<<b;b+=x;if((c&z)==0){if(b==70&&c!==w)throw new Error("result exceeded 64 bit limit");break}if(b>63)throw new Error("result exceeded 64 bit limit")}return a};b.readString=function(){return d("Utf8ToString").Utf8ToString(this.readBinary())};b.getLastFieldId=function(){return this.$3};b.getLastField=function(){return this.$2};b.getBooleanFieldInfo=function(){return this.$4};b.getBooleanValue=function(){return this.$5};b.$9=function(a){return k[a]};b.$10=function(a){switch(a){case i.CT_STOP:return(h||(h=c("ThriftTypes"))).STOP;case i.CT_BOOLEAN_FALSE:case i.CT_BOOLEAN_TRUE:return(h||(h=c("ThriftTypes"))).BOOL;case i.CT_BYTE:return(h||(h=c("ThriftTypes"))).BYTE;case i.CT_I16:return(h||(h=c("ThriftTypes"))).I16;case i.CT_I32:return(h||(h=c("ThriftTypes"))).I32;case i.CT_I64:return(h||(h=c("ThriftTypes"))).I64;case i.CT_DOUBLE:return(h||(h=c("ThriftTypes"))).DOUBLE;case i.CT_FLOAT:return(h||(h=c("ThriftTypes"))).FLOAT;case i.CT_BINARY:return(h||(h=c("ThriftTypes"))).STRING;case i.CT_LIST:return(h||(h=c("ThriftTypes"))).LIST;case i.CT_SET:return(h||(h=c("ThriftTypes"))).SET;case i.CT_MAP:return(h||(h=c("ThriftTypes"))).MAP;case i.CT_STRUCT:return(h||(h=c("ThriftTypes"))).STRUCT;default:throw new Error("don't know what type")}};return a}();g["default"]=a}),98);
__d("CompactSerializer",["TCompactProtocol","TNoOpWriteBuffer","TReadBuffer","TWriteBuffer"],(function(a,b,c,d,e,f,g){function a(a,b,c){try{return h(a,b)}catch(a){c!=null&&c(a)}return null}function h(a,b){a=new(c("TReadBuffer"))(a);a=new(c("TCompactProtocol"))(a);return b(a)}function b(a,b,c,d){c===void 0&&(c=!1);try{return i(a,b,c)}catch(a){d!=null&&d(a)}return null}function i(a,b,d){d===void 0&&(d=!1);if(d){d=new(c("TNoOpWriteBuffer"))();var e=new(c("TCompactProtocol"))(d);b(a,e);e=new(c("TWriteBuffer"))(d.currentSize())}else e=new(c("TWriteBuffer"))();d=new(c("TCompactProtocol"))(e);b(a,d);return d.toByteArray()}g.deserializeNoThrow=a;g.deserialize=h;g.serializeNoThrow=b;g.serialize=i}),98);
__d("StructuredConfigBase",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.getBool=function(a){return this.$1.getValue(a)>0};b.getInt=function(a){return this.$1.getValue(a)};return a}();f["default"]=a}),66);
__d("Configs",["StructuredConfigBase"],(function(a,b,c,d,e,f){"use strict";c=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$ExampleConfig1=c.getBool(0),c.$ExampleConfig2=c.getBool(2),c.$ExampleConfig3=c.getBool(1724),c.$ExampleConfig4=c.getBool(2044),c.$ExampleConfig5=c.getInt(1),c.$ExampleConfig6=c.getInt(3),c.$ExampleConfig7=c.getInt(2011),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.updateParams=function(){this.$ExampleConfig1=this.getBool(0),this.$ExampleConfig2=this.getBool(2),this.$ExampleConfig3=this.getBool(1724),this.$ExampleConfig4=this.getBool(2044),this.$ExampleConfig5=this.getInt(1),this.$ExampleConfig6=this.getInt(3),this.$ExampleConfig7=this.getInt(2011)};c.isEnabled=function(){return this.$ExampleConfig1};c.isSomeBoolean=function(){return this.$ExampleConfig2};c.isSomeOtherIntegerHasValue=function(){return this.$ExampleConfig3};c.isSomeOtherBoolean=function(){return this.$ExampleConfig4};c.getSomeInteger=function(){return this.$ExampleConfig5};c.getSomeOtherInteger=function(){return this.$ExampleConfig6};c.getSomeDouble=function(){return this.$ExampleConfig7};return b}(a=b("StructuredConfigBase"));d=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$SimulcastOverSignalingConfig1=c.getBool(651),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.updateParams=function(){this.$SimulcastOverSignalingConfig1=this.getBool(651)};c.isSimulcastOverSignalingEnabled=function(){return this.$SimulcastOverSignalingConfig1};return b}(a);f=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$PreferredCaptureConfig1=c.getBool(173),c.$PreferredCaptureConfig2=c.getBool(3919),c.$PreferredCaptureConfig3=c.getBool(4478),c.$PreferredCaptureConfig4=c.getInt(174),c.$PreferredCaptureConfig5=c.getInt(175),c.$PreferredCaptureConfig6=c.getInt(176),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.updateParams=function(){this.$PreferredCaptureConfig1=this.getBool(173),this.$PreferredCaptureConfig2=this.getBool(3919),this.$PreferredCaptureConfig3=this.getBool(4478),this.$PreferredCaptureConfig4=this.getInt(174),this.$PreferredCaptureConfig5=this.getInt(175),this.$PreferredCaptureConfig6=this.getInt(176)};c.isEnabled=function(){return this.$PreferredCaptureConfig1};c.isPreferStableFps=function(){return this.$PreferredCaptureConfig2};c.isEnabledForZenon=function(){return this.$PreferredCaptureConfig3};c.getWidthPx=function(){return this.$PreferredCaptureConfig4};c.getHeightPx=function(){return this.$PreferredCaptureConfig5};c.getFps=function(){return this.$PreferredCaptureConfig6};return b}(a);b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$ZenonSdpTransformConfig1=c.getBool(244),c.$ZenonSdpTransformConfig2=c.getBool(420),c.$ZenonSdpTransformConfig3=c.getBool(421),c.$ZenonSdpTransformConfig4=c.getBool(245),c.$ZenonSdpTransformConfig5=c.getBool(246),c.$ZenonSdpTransformConfig6=c.getBool(248),c.$ZenonSdpTransformConfig7=c.getBool(1448),c.$ZenonSdpTransformConfig8=c.getBool(1444),c.$ZenonSdpTransformConfig9=c.getBool(1445),c.$ZenonSdpTransformConfig10=c.getInt(1446),c.$ZenonSdpTransformConfig11=c.getInt(1447),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.updateParams=function(){this.$ZenonSdpTransformConfig1=this.getBool(244),this.$ZenonSdpTransformConfig2=this.getBool(420),this.$ZenonSdpTransformConfig3=this.getBool(421),this.$ZenonSdpTransformConfig4=this.getBool(245),this.$ZenonSdpTransformConfig5=this.getBool(246),this.$ZenonSdpTransformConfig6=this.getBool(248),this.$ZenonSdpTransformConfig7=this.getBool(1448),this.$ZenonSdpTransformConfig8=this.getBool(1444),this.$ZenonSdpTransformConfig9=this.getBool(1445),this.$ZenonSdpTransformConfig10=this.getInt(1446),this.$ZenonSdpTransformConfig11=this.getInt(1447)};c.isPreserveH264=function(){return this.$ZenonSdpTransformConfig1};c.isPreferH264ForMwCall=function(){return this.$ZenonSdpTransformConfig2};c.isPreferSwH264=function(){return this.$ZenonSdpTransformConfig3};c.isAddAudioNack=function(){return this.$ZenonSdpTransformConfig4};c.isDisableOpusStereo=function(){return this.$ZenonSdpTransformConfig5};c.isPreferIsacForGroupAudio=function(){return this.$ZenonSdpTransformConfig6};c.isEnableOpusFmtpMunging=function(){return this.$ZenonSdpTransformConfig7};c.isSetOpusUsedtx=function(){return this.$ZenonSdpTransformConfig8};c.isSetOpusUseinbandfec=function(){return this.$ZenonSdpTransformConfig9};c.getSetOpusMaxplaybackrate=function(){return this.$ZenonSdpTransformConfig10};c.getSetOpusMaxaveragebitrate=function(){return this.$ZenonSdpTransformConfig11};return b}(a);var g=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.$ZenonPeerConnectionConfig1=c.getBool(302),a)||babelHelpers.assertThisInitialized(c)}var c=a.prototype;c.updateParams=function(){this.$ZenonPeerConnectionConfig1=this.getBool(302)};c.isRtpDataChannels=function(){return this.$ZenonPeerConnectionConfig1};return a}(a),h=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.$ZenonStartCallImmediatelyConfig1=c.getBool(308),a)||babelHelpers.assertThisInitialized(c)}var c=a.prototype;c.updateParams=function(){this.$ZenonStartCallImmediatelyConfig1=this.getBool(308)};c.isEnabled=function(){return this.$ZenonStartCallImmediatelyConfig1};return a}(a),i=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.$ZenonGeneralizedIdentityConfig1=c.getInt(1891),a)||babelHelpers.assertThisInitialized(c)}var c=a.prototype;c.updateParams=function(){this.$ZenonGeneralizedIdentityConfig1=this.getInt(1891)};c.getDuplicatedParticipantsProcessingMode=function(){return this.$ZenonGeneralizedIdentityConfig1};return a}(a),j=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.$ZenonMultiCallSupportConfig1=c.getInt(309),a)||babelHelpers.assertThisInitialized(c)}var c=a.prototype;c.updateParams=function(){this.$ZenonMultiCallSupportConfig1=this.getInt(309)};c.getMaxConnectedCalls=function(){return this.$ZenonMultiCallSupportConfig1};return a}(a),k=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.$ZenonPlatformSupportConfig1=c.getBool(316),c.$ZenonPlatformSupportConfig2=c.getBool(318),c.$ZenonPlatformSupportConfig3=c.getBool(2251),c.$ZenonPlatformSupportConfig4=c.getBool(1900),c.$ZenonPlatformSupportConfig5=c.getInt(317),c.$ZenonPlatformSupportConfig6=c.getInt(319),a)||babelHelpers.assertThisInitialized(c)}var c=a.prototype;c.updateParams=function(){this.$ZenonPlatformSupportConfig1=this.getBool(316),this.$ZenonPlatformSupportConfig2=this.getBool(318),this.$ZenonPlatformSupportConfig3=this.getBool(2251),this.$ZenonPlatformSupportConfig4=this.getBool(1900),this.$ZenonPlatformSupportConfig5=this.getInt(317),this.$ZenonPlatformSupportConfig6=this.getInt(319)};c.isSupportsZenonPlatform=function(){return this.$ZenonPlatformSupportConfig1};c.isStartImmediatelyEnabled=function(){return this.$ZenonPlatformSupportConfig2};c.isUploadSummaryOnCallEnded=function(){return this.$ZenonPlatformSupportConfig3};c.isMultiwayAvEscalationEnabled=function(){return this.$ZenonPlatformSupportConfig4};c.getMaxConnectedCalls=function(){return this.$ZenonPlatformSupportConfig5};c.getParentWindowConnectionTimeoutMs=function(){return this.$ZenonPlatformSupportConfig6};return a}(a),l=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.$ZenonSimulcastConfig1=c.getBool(453),a)||babelHelpers.assertThisInitialized(c)}var c=a.prototype;c.updateParams=function(){this.$ZenonSimulcastConfig1=this.getBool(453)};c.isSimulcastEnabled=function(){return this.$ZenonSimulcastConfig1};return a}(a),m=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.$DynamicRuleConfig1=c.getBool(1342),c.$DynamicRuleConfig2=c.getBool(1597),c.$DynamicRuleConfig3=c.getInt(1359),c.$DynamicRuleConfig4=c.getInt(1510),c.$DynamicRuleConfig5=c.getInt(1612),a)||babelHelpers.assertThisInitialized(c)}var c=a.prototype;c.updateParams=function(){this.$DynamicRuleConfig1=this.getBool(1342),this.$DynamicRuleConfig2=this.getBool(1597),this.$DynamicRuleConfig3=this.getInt(1359),this.$DynamicRuleConfig4=this.getInt(1510),this.$DynamicRuleConfig5=this.getInt(1612)};c.isEnabled=function(){return this.$DynamicRuleConfig1};c.isDebugLoggingEnabled=function(){return this.$DynamicRuleConfig2};c.getProcessIntervalMs=function(){return this.$DynamicRuleConfig3};c.getNetworkProcessIntervalMs=function(){return this.$DynamicRuleConfig4};c.getDebugLoggingIntervalMs=function(){return this.$DynamicRuleConfig5};return a}(a);a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$SignalingPingConfig1=c.getInt(1470),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.updateParams=function(){this.$SignalingPingConfig1=this.getInt(1470)};c.getPingIntervalMs=function(){return this.$SignalingPingConfig1};return b}(a);e.exports={ExampleConfig:c,SimulcastOverSignalingConfig:d,PreferredCaptureConfig:f,ZenonSdpTransformConfig:b,ZenonPeerConnectionConfig:g,ZenonStartCallImmediatelyConfig:h,ZenonGeneralizedIdentityConfig:i,ZenonMultiCallSupportConfig:j,ZenonPlatformSupportConfig:k,ZenonSimulcastConfig:l,DynamicRuleConfig:m,SignalingPingConfig:a}}),null);
__d("MultiwaySharedTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";c=(a=b("$InternalEnum"))({UNKNOWN:0,SFU:1,P2P:2});d=a({UNKNOWN:0,IGVIDEOCALL:9,ROOM:15,CRUCIBLE:20,MBS_WA:21,BOT:22,HORIZON:23,ULLC:24});f=a({OFFER:0,PRANSWER:1,ANSWER:2,PROFFER:3});b=a({LOW:0,MEDIUM:1,HIGH:2,HD:3,NUM_QUALITIES:4});var g=a({E2EE_NOT_MANDATED:0,DEPRECATED_NO_REQUIREMENT:1,E2EE_MANDATED:2}),h=a({NOT_SET:0,CONTROL:1,TEST:2}),i=a({NOT_SET:0,CONTROL:1,TEST:2}),j=a({NotPaused:0,Paused:1}),k=a({AUDIO:0,VIDEO:1,DATA:2}),l=a({UNKNOWN:0,COMPOSITING_SERVICE:1,MEDIA_SERVER:2,CATHODE_AMBISONIC:3,CATHODE_CAPTIONS:4,CATHODE_MEETING_SUMMARIZER:5,CATHODE_REALTIME_SHARED_STATE:6,RP_GENAI_SERVICE:7,SMART_GLASSES_ASSISTANT:8}),m=a({CNAME:0,TRACK:1,DOMINANT_SPEAKER:2}),n=a({UNKNOWN:0,DEFAULT:1,SCREEN_SHARE:2}),o=a({UNSPECIFIED:0,FNA:1,FNA_PREFERRED:2});a=a({IntValue:"intValue",StringValue:"stringValue"});e.exports={ConferenceType:d,E2eeInfraMandatedExpStatus:h,E2eeMode:g,EdgerayType:o,EndpointServiceType:l,MediaPath:c,MediaPauseStatus:j,MediaType:k,P2PSFrameExpStatus:i,QuickExperimentValue$Types:a,RenderedStreamType:n,SdpType:f,SubscriptionType:m,VideoQuality:b}}),null);
__d("WebrtcSignalingCommonTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";c=(a=b("$InternalEnum"))({DEFAULT_AUDIO:0,DEFAULT_VIDEO:1,SCREEN_AUDIO:2,SCREEN_VIDEO:3,CUSTOM_VIDEO:4,CUSTOM_AUDIO:5});d=a({OLD_CLIENT_PLATFORM_STACK:0,RSYS_X:1,IG_OLD_STACK:2,MLITE_OLD_STACK:3,SCOTCH:4,ZENON:5});f=a({NONE:0,AVATAR:1,AUGMENTED_CALLING:2,SCENE_COMPOSITION:3,STEREO_VIDEO:4,SHARED_STATE:5,CODEC_AVATAR_2D:6});b=a({NONE:0,AMBISONIC:1,CONVERSATION_BOT:2,MONOMIX:3});e.exports={ClientStack:d,CustomAudioContentType:b,CustomVideoContentType:f,TrackLabel:c}}),null);
__d("MultiwaySharedSerializers",["MultiwaySharedTypes","ThriftTypes","WebrtcSignalingCommonTypes"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return{cluster:"",nonce:""}}function b(){return{cluster:"",conferenceName:"",nonce:"",userId:"",clientSessionId:""}}function e(){return{userId:"",deviceId:"",appId:"",appVersion:"",appBuildNumber:""}}function f(){return{mode:d("MultiwaySharedTypes").E2eeMode.cast(0),preventSfuMode:!1,infraMandatedExpStatus:d("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.cast(0),p2pSFrameExpStatus:d("MultiwaySharedTypes").P2PSFrameExpStatus.cast(0)}}function i(){return{semantics:"",ssrcs:[]}}function j(){return{type:d("MultiwaySharedTypes").MediaType.cast(0),id:"",ssrcs:[],enabled:!1,customVideoContentType:d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(0),customAudioContentType:d("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(0)}}function k(){return{parameters:{},conditionFbid:"0",exposureHasBeenLogged:!1,canExposureLog:!1,universeShortName:"",userFbid:"0",unitId:""}}function l(){return{experiments:{},userFbid:"0"}}function m(){return{conditionFbid:"0",userFbid:"0",universeName:"",unitId:""}}function n(){return{enabled:!1,customVideoContentType:d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(0),customAudioContentType:d("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(0)}}function o(){return{tracks:{}}}function p(){return{videoQuality:d("MultiwaySharedTypes").VideoQuality.cast(0)}}function q(){return{cname:"",type:d("MultiwaySharedTypes").SubscriptionType.cast(0)}}function r(){return{restrictiveLogging:!0,verboseLogging:!1}}function s(){return{userId:"",streamId:"",streamType:0,renderWidth:0,renderHeight:0}}function t(){return{}}function u(){return{}}function v(){return{}}function w(){return{host:Uint8Array.of(),port:0}}function x(){return{}}function y(a,b){b.writeStructBegin("ServerInfo");b.writeFieldBegin({fname:"cluster",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.cluster!=null)b.writeString(a.cluster);else{var d="";b.writeString(d)}b.writeFieldEnd();a.conferenceName_deprecated!=null&&(b.writeFieldBegin({fname:"conferenceName_deprecated",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.conferenceName_deprecated),b.writeFieldEnd());b.writeFieldBegin({fname:"nonce",ftype:h.STRING,fid:3});if(a.nonce!=null)b.writeString(a.nonce);else{d="";b.writeString(d)}b.writeFieldEnd();a.conferenceId!=null&&(b.writeFieldBegin({fname:"conferenceId",ftype:(h||(h=c("ThriftTypes"))).I64,fid:4}),b.writeI64(BigInt(a.conferenceId)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function z(a,b){b.writeStructBegin("ClientSessionInfo");b.writeFieldBegin({fname:"cluster",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.cluster!=null)b.writeString(a.cluster);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"conferenceName",ftype:h.STRING,fid:2});if(a.conferenceName!=null)b.writeString(a.conferenceName);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"nonce",ftype:h.STRING,fid:3});if(a.nonce!=null)b.writeString(a.nonce);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"userId",ftype:h.STRING,fid:4});if(a.userId!=null)b.writeString(a.userId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"clientSessionId",ftype:h.STRING,fid:5});if(a.clientSessionId!=null)b.writeString(a.clientSessionId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function A(a,b){b.writeStructBegin("Endpoint");b.writeFieldBegin({fname:"userId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.userId!=null)b.writeString(a.userId);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"deviceId",ftype:h.STRING,fid:2});if(a.deviceId!=null)b.writeString(a.deviceId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"appId",ftype:h.STRING,fid:3});if(a.appId!=null)b.writeString(a.appId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"appVersion",ftype:h.STRING,fid:4});if(a.appVersion!=null)b.writeString(a.appVersion);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"appBuildNumber",ftype:h.STRING,fid:5});if(a.appBuildNumber!=null)b.writeString(a.appBuildNumber);else{d="";b.writeString(d)}b.writeFieldEnd();a.clientStackInfo!=null&&(b.writeFieldBegin({fname:"clientStackInfo",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:6}),b.writeString(a.clientStackInfo),b.writeFieldEnd());a.familyDeviceId!=null&&(b.writeFieldBegin({fname:"familyDeviceId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:7}),b.writeString(a.familyDeviceId),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function B(a,b){b.writeStructBegin("E2eeEnforcement");b.writeFieldBegin({fname:"mode",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.mode!=null){var e;b.writeI32((e=a.mode)!=null?e:0)}else{e=d("MultiwaySharedTypes").E2eeMode.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"preventSfuMode",ftype:h.BOOL,fid:2});if(a.preventSfuMode!=null)b.writeBool(a.preventSfuMode);else{e=!1;b.writeBool(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"infraMandatedExpStatus",ftype:h.I32,fid:3});if(a.infraMandatedExpStatus!=null){b.writeI32((e=a.infraMandatedExpStatus)!=null?e:0)}else{e=d("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"p2pSFrameExpStatus",ftype:h.I32,fid:4});if(a.p2pSFrameExpStatus!=null){b.writeI32((e=a.p2pSFrameExpStatus)!=null?e:0)}else{a=d("MultiwaySharedTypes").P2PSFrameExpStatus.cast(0);b.writeI32(a!=null?a:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function C(a,b){b.writeStructBegin("SsrcGroup");b.writeFieldBegin({fname:"semantics",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.semantics!=null)b.writeString(a.semantics);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"ssrcs",ftype:h.LIST,fid:2});if(a.ssrcs!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).I64,size:a.ssrcs.length});for(d of a.ssrcs)b.writeI64(BigInt(d));b.writeListEnd()}else{a=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).I64,size:a.length});for(d of a)b.writeI64(BigInt(d));b.writeListEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function D(a,b){b.writeStructBegin("Media");b.writeFieldBegin({fname:"type",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.type!=null){var e;b.writeI32((e=a.type)!=null?e:0)}else{e=d("MultiwaySharedTypes").MediaType.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"id",ftype:h.STRING,fid:2});if(a.id!=null)b.writeString(a.id);else{e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"ssrcs",ftype:h.LIST,fid:3});if(a.ssrcs!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).I64,size:a.ssrcs.length});for(e of a.ssrcs)b.writeI64(BigInt(e));b.writeListEnd()}else{e=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).I64,size:e.length});for(e of e)b.writeI64(BigInt(e));b.writeListEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"enabled",ftype:h.BOOL,fid:4});if(a.enabled!=null)b.writeBool(a.enabled);else{e=!1;b.writeBool(e)}b.writeFieldEnd();if(a.pausedDownlink!=null){b.writeFieldBegin({fname:"pausedDownlink",ftype:(h||(h=c("ThriftTypes"))).I32,fid:5});b.writeI32((e=a.pausedDownlink)!=null?e:0);b.writeFieldEnd()}if(a.pausedUplink!=null){b.writeFieldBegin({fname:"pausedUplink",ftype:(h||(h=c("ThriftTypes"))).I32,fid:6});b.writeI32((e=a.pausedUplink)!=null?e:0);b.writeFieldEnd()}a.owner!=null&&(b.writeFieldBegin({fname:"owner",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:7}),b.writeString(a.owner),b.writeFieldEnd());if(a.label!=null){b.writeFieldBegin({fname:"label",ftype:(h||(h=c("ThriftTypes"))).I32,fid:8});b.writeI32((e=a.label)!=null?e:0);b.writeFieldEnd()}b.writeFieldBegin({fname:"customVideoContentType",ftype:h.I32,fid:9});if(a.customVideoContentType!=null){b.writeI32((e=a.customVideoContentType)!=null?e:0)}else{e=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();a.name!=null&&(b.writeFieldBegin({fname:"name",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:10}),b.writeString(a.name),b.writeFieldEnd());b.writeFieldBegin({fname:"customAudioContentType",ftype:h.I32,fid:11});if(a.customAudioContentType!=null){b.writeI32((e=a.customAudioContentType)!=null?e:0)}else{a=d("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(0);b.writeI32(a!=null?a:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function E(a,b){b.writeStructBegin("QuickExperiment");b.writeFieldBegin({fname:"parameters",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.parameters!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(a.parameters).length});for(var d of Object.entries(a.parameters)){var e=d[0],f=d[1];b.writeString(e);R(f,b)}b.writeMapEnd()}else{e={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(e).length});for(f of Object.entries(e)){d=f[0];e=f[1];b.writeString(d);R(e,b)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"conditionFbid",ftype:h.I64,fid:2});if(a.conditionFbid!=null)b.writeI64(BigInt(a.conditionFbid));else{d="0";b.writeI64(BigInt(d))}b.writeFieldEnd();b.writeFieldBegin({fname:"exposureHasBeenLogged",ftype:h.BOOL,fid:3});if(a.exposureHasBeenLogged!=null)b.writeBool(a.exposureHasBeenLogged);else{e=!1;b.writeBool(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"canExposureLog",ftype:h.BOOL,fid:4});if(a.canExposureLog!=null)b.writeBool(a.canExposureLog);else{f=!1;b.writeBool(f)}b.writeFieldEnd();b.writeFieldBegin({fname:"universeShortName",ftype:h.STRING,fid:5});if(a.universeShortName!=null)b.writeString(a.universeShortName);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"userFbid",ftype:h.I64,fid:6});if(a.userFbid!=null)b.writeI64(BigInt(a.userFbid));else{e="0";b.writeI64(BigInt(e))}b.writeFieldEnd();b.writeFieldBegin({fname:"unitId",ftype:h.STRING,fid:7});if(a.unitId!=null)b.writeString(a.unitId);else{f="";b.writeString(f)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function F(a,b){b.writeStructBegin("QuickExperimentResult");b.writeFieldBegin({fname:"experiments",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.experiments!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(a.experiments).length});for(var d of Object.entries(a.experiments)){var e=d[0],f=d[1];b.writeString(e);E(f,b)}b.writeMapEnd()}else{e={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(e).length});for(f of Object.entries(e)){d=f[0];e=f[1];b.writeString(d);E(e,b)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"userFbid",ftype:h.I64,fid:2});if(a.userFbid!=null)b.writeI64(BigInt(a.userFbid));else{d="0";b.writeI64(BigInt(d))}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function G(a,b){b.writeStructBegin("QuickExperimentExposureLoggingEvent");b.writeFieldBegin({fname:"conditionFbid",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.conditionFbid!=null)b.writeI64(BigInt(a.conditionFbid));else{var d="0";b.writeI64(BigInt(d))}b.writeFieldEnd();b.writeFieldBegin({fname:"userFbid",ftype:h.I64,fid:2});if(a.userFbid!=null)b.writeI64(BigInt(a.userFbid));else{d="0";b.writeI64(BigInt(d))}b.writeFieldEnd();b.writeFieldBegin({fname:"universeName",ftype:h.STRING,fid:3});if(a.universeName!=null)b.writeString(a.universeName);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"unitId",ftype:h.STRING,fid:4});if(a.unitId!=null)b.writeString(a.unitId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function H(a,b){b.writeStructBegin("ClientTrackInfo");b.writeFieldBegin({fname:"enabled",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:1});if(a.enabled!=null)b.writeBool(a.enabled);else{var e=!1;b.writeBool(e)}b.writeFieldEnd();if(a.pausedUplink!=null){b.writeFieldBegin({fname:"pausedUplink",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2});b.writeI32((e=a.pausedUplink)!=null?e:0);b.writeFieldEnd()}if(a.pausedDownlink!=null){b.writeFieldBegin({fname:"pausedDownlink",ftype:(h||(h=c("ThriftTypes"))).I32,fid:3});b.writeI32((e=a.pausedDownlink)!=null?e:0);b.writeFieldEnd()}a.owner!=null&&(b.writeFieldBegin({fname:"owner",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeString(a.owner),b.writeFieldEnd());if(a.label!=null){b.writeFieldBegin({fname:"label",ftype:(h||(h=c("ThriftTypes"))).I32,fid:5});b.writeI32((e=a.label)!=null?e:0);b.writeFieldEnd()}b.writeFieldBegin({fname:"customVideoContentType",ftype:h.I32,fid:6});if(a.customVideoContentType!=null){b.writeI32((e=a.customVideoContentType)!=null?e:0)}else{e=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();a.name!=null&&(b.writeFieldBegin({fname:"name",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:7}),b.writeString(a.name),b.writeFieldEnd());b.writeFieldBegin({fname:"customAudioContentType",ftype:h.I32,fid:8});if(a.customAudioContentType!=null){b.writeI32((e=a.customAudioContentType)!=null?e:0)}else{e=d("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();a.nodeId!=null&&(b.writeFieldBegin({fname:"nodeId",ftype:(h||(h=c("ThriftTypes"))).I64,fid:9}),b.writeI64(BigInt(a.nodeId)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function I(a,b){b.writeStructBegin("ClientMediaStatus");b.writeFieldBegin({fname:"tracks",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.tracks!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(a.tracks).length});for(a of Object.entries(a.tracks)){var d=a[0],e=a[1];b.writeString(d);H(e,b)}b.writeMapEnd()}else{d={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(d).length});for(e of Object.entries(d)){a=e[0];d=e[1];b.writeString(a);H(d,b)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function J(a,b){b.writeStructBegin("SubscriptionOptions");b.writeFieldBegin({fname:"videoQuality",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.videoQuality!=null){var e;b.writeI32((e=a.videoQuality)!=null?e:0)}else{e=d("MultiwaySharedTypes").VideoQuality.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();a.qualityIndex!=null&&(b.writeFieldBegin({fname:"qualityIndex",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2}),b.writeI32(a.qualityIndex),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function K(a,b){b.writeStructBegin("Subscription");b.writeFieldBegin({fname:"cname",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.cname!=null)b.writeString(a.cname);else{var e="";b.writeString(e)}b.writeFieldEnd();a.options!=null&&(b.writeFieldBegin({fname:"options",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2}),J(a.options,b),b.writeFieldEnd());b.writeFieldBegin({fname:"type",ftype:h.I32,fid:3});if(a.type!=null){b.writeI32((e=a.type)!=null?e:0)}else{e=d("MultiwaySharedTypes").SubscriptionType.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();a.trackId!=null&&(b.writeFieldBegin({fname:"trackId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeString(a.trackId),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function L(a,b){b.writeStructBegin("LoggingOptions");b.writeFieldBegin({fname:"restrictiveLogging",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:1});if(a.restrictiveLogging!=null)b.writeBool(a.restrictiveLogging);else{var d=!0;b.writeBool(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"verboseLogging",ftype:h.BOOL,fid:2});if(a.verboseLogging!=null)b.writeBool(a.verboseLogging);else{d=!1;b.writeBool(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function M(a,b){b.writeStructBegin("ResolutionData");b.writeFieldBegin({fname:"userId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.userId!=null)b.writeString(a.userId);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"streamId",ftype:h.STRING,fid:2});if(a.streamId!=null)b.writeString(a.streamId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"streamType",ftype:h.I32,fid:3});if(a.streamType!=null)b.writeI32(a.streamType);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"renderWidth",ftype:h.I32,fid:4});if(a.renderWidth!=null)b.writeI32(a.renderWidth);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"renderHeight",ftype:h.I32,fid:5});if(a.renderHeight!=null)b.writeI32(a.renderHeight);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function N(a,b){b.writeStructBegin("TurnInfo"),a.ipv4!=null&&(b.writeFieldBegin({fname:"ipv4",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeBinary(a.ipv4),b.writeFieldEnd()),a.ipv6!=null&&(b.writeFieldBegin({fname:"ipv6",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeBinary(a.ipv6),b.writeFieldEnd()),a.udpPort!=null&&(b.writeFieldBegin({fname:"udpPort",ftype:(h||(h=c("ThriftTypes"))).I32,fid:3}),b.writeI32(a.udpPort),b.writeFieldEnd()),a.tcpPort!=null&&(b.writeFieldBegin({fname:"tcpPort",ftype:(h||(h=c("ThriftTypes"))).I32,fid:4}),b.writeI32(a.tcpPort),b.writeFieldEnd()),a.sslTcpPort!=null&&(b.writeFieldBegin({fname:"sslTcpPort",ftype:(h||(h=c("ThriftTypes"))).I32,fid:5}),b.writeI32(a.sslTcpPort),b.writeFieldEnd()),a.portInfoIdx!=null&&(b.writeFieldBegin({fname:"portInfoIdx",ftype:(h||(h=c("ThriftTypes"))).I32,fid:6}),b.writeI32(a.portInfoIdx),b.writeFieldEnd()),a.tlsPort!=null&&(b.writeFieldBegin({fname:"tlsPort",ftype:(h||(h=c("ThriftTypes"))).I32,fid:7}),b.writeI32(a.tlsPort),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function O(a,b){b.writeStructBegin("EdgerayInfo");if(a.edgerayType!=null){var d;b.writeFieldBegin({fname:"edgerayType",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});b.writeI32((d=a.edgerayType)!=null?d:0);b.writeFieldEnd()}a.ipv4!=null&&(b.writeFieldBegin({fname:"ipv4",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeBinary(a.ipv4),b.writeFieldEnd());a.ipv6!=null&&(b.writeFieldBegin({fname:"ipv6",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeBinary(a.ipv6),b.writeFieldEnd());a.token!=null&&(b.writeFieldBegin({fname:"token",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeBinary(a.token),b.writeFieldEnd());a.tokenIdx!=null&&(b.writeFieldBegin({fname:"tokenIdx",ftype:(h||(h=c("ThriftTypes"))).I32,fid:5}),b.writeI32(a.tokenIdx),b.writeFieldEnd());a.secret!=null&&(b.writeFieldBegin({fname:"secret",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:6}),b.writeBinary(a.secret),b.writeFieldEnd());a.secretIdx!=null&&(b.writeFieldBegin({fname:"secretIdx",ftype:(h||(h=c("ThriftTypes"))).I32,fid:7}),b.writeI32(a.secretIdx),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function P(a,b){b.writeStructBegin("RelayInfo");if(a.turns!=null){b.writeFieldBegin({fname:"turns",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:1});b.writeListBegin({etype:h.STRUCT,size:a.turns.length});for(var d of a.turns)N(d,b);b.writeListEnd();b.writeFieldEnd()}if(a.edgerays!=null){b.writeFieldBegin({fname:"edgerays",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:2});b.writeListBegin({etype:h.STRUCT,size:a.edgerays.length});for(d of a.edgerays)O(d,b);b.writeListEnd();b.writeFieldEnd()}a.turnUsername!=null&&(b.writeFieldBegin({fname:"turnUsername",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeString(a.turnUsername),b.writeFieldEnd());a.turnPassword!=null&&(b.writeFieldBegin({fname:"turnPassword",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeString(a.turnPassword),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function Q(a,b){b.writeStructBegin("TSocketAddress");b.writeFieldBegin({fname:"host",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.host!=null)b.writeBinary(a.host);else{var d=Uint8Array.of();b.writeBinary(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"port",ftype:h.I16,fid:2});if(a.port!=null)b.writeI16(a.port);else{d=0;b.writeI16(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function R(a,b){b.writeStructBegin("QuickExperimentValue");if(a.intValue!=null){b.writeFieldBegin({fname:"intValue",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});b.writeI64(BigInt(a.intValue));b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.stringValue!=null){b.writeFieldBegin({fname:"stringValue",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2});b.writeString(a.stringValue);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}b.writeFieldStop();b.writeStructEnd()}function S(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.cluster=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.conferenceName_deprecated=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.nonce=a.readString():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).I64?b.conferenceId=a.readI64().toString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.cluster===void 0&&(b.cluster="");b.nonce===void 0&&(b.nonce="");return b}function T(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.cluster=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.conferenceName=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.nonce=a.readString():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.userId=a.readString():a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).STRING?b.clientSessionId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.cluster===void 0&&(b.cluster="");b.conferenceName===void 0&&(b.conferenceName="");b.nonce===void 0&&(b.nonce="");b.userId===void 0&&(b.userId="");b.clientSessionId===void 0&&(b.clientSessionId="");return b}function U(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.userId=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.deviceId=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.appId=a.readString():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.appVersion=a.readString():a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).STRING?b.appBuildNumber=a.readString():a.skip(e);break;case 6:e===(h||(h=c("ThriftTypes"))).STRING?b.clientStackInfo=a.readString():a.skip(e);break;case 7:e===(h||(h=c("ThriftTypes"))).STRING?b.familyDeviceId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.userId===void 0&&(b.userId="");b.deviceId===void 0&&(b.deviceId="");b.appId===void 0&&(b.appId="");b.appVersion===void 0&&(b.appVersion="");b.appBuildNumber===void 0&&(b.appBuildNumber="");return b}function aa(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.mode=d("MultiwaySharedTypes").E2eeMode.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).BOOL?b.preventSfuMode=a.readBool():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.infraMandatedExpStatus=d("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.cast(a.readI32()):a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).I32?b.p2pSFrameExpStatus=d("MultiwaySharedTypes").P2PSFrameExpStatus.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.mode===void 0&&(b.mode=d("MultiwaySharedTypes").E2eeMode.cast(0));b.preventSfuMode===void 0&&(b.preventSfuMode=!1);b.infraMandatedExpStatus===void 0&&(b.infraMandatedExpStatus=d("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.cast(0));b.p2pSFrameExpStatus===void 0&&(b.p2pSFrameExpStatus=d("MultiwaySharedTypes").P2PSFrameExpStatus.cast(0));return b}function ba(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.semantics=a.readString():a.skip(e);break;case 2:if(e===(h||(h=c("ThriftTypes"))).LIST){b.ssrcs=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=a.readI64().toString();b.ssrcs.push(g)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.semantics===void 0&&(b.semantics="");b.ssrcs===void 0&&(b.ssrcs=[]);return b}function ca(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.type=d("MultiwaySharedTypes").MediaType.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.id=a.readString():a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).LIST){b.ssrcs=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=a.readI64().toString();b.ssrcs.push(i)}}else a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).BOOL?b.enabled=a.readBool():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).I32?b.pausedDownlink=d("MultiwaySharedTypes").MediaPauseStatus.cast(a.readI32()):a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).I32?b.pausedUplink=d("MultiwaySharedTypes").MediaPauseStatus.cast(a.readI32()):a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).STRING?b.owner=a.readString():a.skip(f);break;case 8:f===(h||(h=c("ThriftTypes"))).I32?b.label=d("WebrtcSignalingCommonTypes").TrackLabel.cast(a.readI32()):a.skip(f);break;case 9:f===(h||(h=c("ThriftTypes"))).I32?b.customVideoContentType=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(a.readI32()):a.skip(f);break;case 10:f===(h||(h=c("ThriftTypes"))).STRING?b.name=a.readString():a.skip(f);break;case 11:f===(h||(h=c("ThriftTypes"))).I32?b.customAudioContentType=d("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.type===void 0&&(b.type=d("MultiwaySharedTypes").MediaType.cast(0));b.id===void 0&&(b.id="");b.ssrcs===void 0&&(b.ssrcs=[]);b.enabled===void 0&&(b.enabled=!1);b.customVideoContentType===void 0&&(b.customVideoContentType=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(0));b.customAudioContentType===void 0&&(b.customAudioContentType=d("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(0));return b}function V(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).MAP){b.parameters={};d=a.readMapBegin();for(var f=0;f<d.size;f++){var g=a.readString(),i=$(a);b.parameters[g]=i}}else a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I64?b.conditionFbid=a.readI64().toString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).BOOL?b.exposureHasBeenLogged=a.readBool():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).BOOL?b.canExposureLog=a.readBool():a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).STRING?b.universeShortName=a.readString():a.skip(e);break;case 6:e===(h||(h=c("ThriftTypes"))).I64?b.userFbid=a.readI64().toString():a.skip(e);break;case 7:e===(h||(h=c("ThriftTypes"))).STRING?b.unitId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.parameters===void 0&&(b.parameters={});b.conditionFbid===void 0&&(b.conditionFbid="0");b.exposureHasBeenLogged===void 0&&(b.exposureHasBeenLogged=!1);b.canExposureLog===void 0&&(b.canExposureLog=!1);b.universeShortName===void 0&&(b.universeShortName="");b.userFbid===void 0&&(b.userFbid="0");b.unitId===void 0&&(b.unitId="");return b}function da(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).MAP){b.experiments={};d=a.readMapBegin();for(var f=0;f<d.size;f++){var g=a.readString(),i=V(a);b.experiments[g]=i}}else a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I64?b.userFbid=a.readI64().toString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.experiments===void 0&&(b.experiments={});b.userFbid===void 0&&(b.userFbid="0");return b}function ea(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.conditionFbid=a.readI64().toString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I64?b.userFbid=a.readI64().toString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.universeName=a.readString():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.unitId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.conditionFbid===void 0&&(b.conditionFbid="0");b.userFbid===void 0&&(b.userFbid="0");b.universeName===void 0&&(b.universeName="");b.unitId===void 0&&(b.unitId="");return b}function W(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).BOOL?b.enabled=a.readBool():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.pausedUplink=d("MultiwaySharedTypes").MediaPauseStatus.cast(a.readI32()):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.pausedDownlink=d("MultiwaySharedTypes").MediaPauseStatus.cast(a.readI32()):a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.owner=a.readString():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).I32?b.label=d("WebrtcSignalingCommonTypes").TrackLabel.cast(a.readI32()):a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).I32?b.customVideoContentType=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(a.readI32()):a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).STRING?b.name=a.readString():a.skip(f);break;case 8:f===(h||(h=c("ThriftTypes"))).I32?b.customAudioContentType=d("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(a.readI32()):a.skip(f);break;case 9:f===(h||(h=c("ThriftTypes"))).I64?b.nodeId=a.readI64().toString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.enabled===void 0&&(b.enabled=!1);b.customVideoContentType===void 0&&(b.customVideoContentType=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(0));b.customAudioContentType===void 0&&(b.customAudioContentType=d("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(0));return b}function fa(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).MAP){b.tracks={};d=a.readMapBegin();for(var f=0;f<d.size;f++){var g=a.readString(),i=W(a);b.tracks[g]=i}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.tracks===void 0&&(b.tracks={});return b}function X(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.videoQuality=d("MultiwaySharedTypes").VideoQuality.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.qualityIndex=a.readI32():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.videoQuality===void 0&&(b.videoQuality=d("MultiwaySharedTypes").VideoQuality.cast(0));return b}function ga(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.cname=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRUCT?b.options=X(a):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.type=d("MultiwaySharedTypes").SubscriptionType.cast(a.readI32()):a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.trackId=a.readString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.cname===void 0&&(b.cname="");b.type===void 0&&(b.type=d("MultiwaySharedTypes").SubscriptionType.cast(0));return b}function ha(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).BOOL?b.restrictiveLogging=a.readBool():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).BOOL?b.verboseLogging=a.readBool():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.restrictiveLogging===void 0&&(b.restrictiveLogging=!0);b.verboseLogging===void 0&&(b.verboseLogging=!1);return b}function ia(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.userId=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.streamId=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).I32?b.streamType=a.readI32():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).I32?b.renderWidth=a.readI32():a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).I32?b.renderHeight=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.userId===void 0&&(b.userId="");b.streamId===void 0&&(b.streamId="");b.streamType===void 0&&(b.streamType=0);b.renderWidth===void 0&&(b.renderWidth=0);b.renderHeight===void 0&&(b.renderHeight=0);return b}function Y(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.ipv4=a.readBinary():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.ipv6=a.readBinary():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).I32?b.udpPort=a.readI32():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).I32?b.tcpPort=a.readI32():a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).I32?b.sslTcpPort=a.readI32():a.skip(e);break;case 6:e===(h||(h=c("ThriftTypes"))).I32?b.portInfoIdx=a.readI32():a.skip(e);break;case 7:e===(h||(h=c("ThriftTypes"))).I32?b.tlsPort=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function Z(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.edgerayType=d("MultiwaySharedTypes").EdgerayType.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.ipv4=a.readBinary():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRING?b.ipv6=a.readBinary():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.token=a.readBinary():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).I32?b.tokenIdx=a.readI32():a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).STRING?b.secret=a.readBinary():a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).I32?b.secretIdx=a.readI32():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return b}function ja(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).LIST){b.turns=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=Y(a);b.turns.push(g)}}else a.skip(e);break;case 2:if(e===(h||(h=c("ThriftTypes"))).LIST){b.edgerays=[];g=a.readListBegin();for(f=0;f<g.size;f++){d=Z(a);b.edgerays.push(d)}}else a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.turnUsername=a.readString():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.turnPassword=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function ka(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.host=a.readBinary():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I16?b.port=a.readI16():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.host===void 0&&(b.host=Uint8Array.of());b.port===void 0&&(b.port=0);return b}function $(a){var b,d={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).I64)if(b==null)d.intValue=a.readI64().toString(),b="intValue";else throw new Error("more than one field have been deserialized in union type: QuickExperimentValue; current field: intValue, previous deserialized field: "+b);else a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).STRING)if(b==null)d.stringValue=a.readString(),b="stringValue";else throw new Error("more than one field have been deserialized in union type: QuickExperimentValue; current field: stringValue, previous deserialized field: "+b);else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return d}g.ServerInfo$DefaultConstructor=a;g.ClientSessionInfo$DefaultConstructor=b;g.Endpoint$DefaultConstructor=e;g.E2eeEnforcement$DefaultConstructor=f;g.SsrcGroup$DefaultConstructor=i;g.Media$DefaultConstructor=j;g.QuickExperiment$DefaultConstructor=k;g.QuickExperimentResult$DefaultConstructor=l;g.QuickExperimentExposureLoggingEvent$DefaultConstructor=m;g.ClientTrackInfo$DefaultConstructor=n;g.ClientMediaStatus$DefaultConstructor=o;g.SubscriptionOptions$DefaultConstructor=p;g.Subscription$DefaultConstructor=q;g.LoggingOptions$DefaultConstructor=r;g.ResolutionData$DefaultConstructor=s;g.TurnInfo$DefaultConstructor=t;g.EdgerayInfo$DefaultConstructor=u;g.RelayInfo$DefaultConstructor=v;g.TSocketAddress$DefaultConstructor=w;g.QuickExperimentValue$DefaultConstructor=x;g.serializeServerInfo=y;g.serializeClientSessionInfo=z;g.serializeEndpoint=A;g.serializeE2eeEnforcement=B;g.serializeSsrcGroup=C;g.serializeMedia=D;g.serializeQuickExperiment=E;g.serializeQuickExperimentResult=F;g.serializeQuickExperimentExposureLoggingEvent=G;g.serializeClientTrackInfo=H;g.serializeClientMediaStatus=I;g.serializeSubscriptionOptions=J;g.serializeSubscription=K;g.serializeLoggingOptions=L;g.serializeResolutionData=M;g.serializeTurnInfo=N;g.serializeEdgerayInfo=O;g.serializeRelayInfo=P;g.serializeTSocketAddress=Q;g.serializeQuickExperimentValue=R;g.deserializeServerInfo=S;g.deserializeClientSessionInfo=T;g.deserializeEndpoint=U;g.deserializeE2eeEnforcement=aa;g.deserializeSsrcGroup=ba;g.deserializeMedia=ca;g.deserializeQuickExperiment=V;g.deserializeQuickExperimentResult=da;g.deserializeQuickExperimentExposureLoggingEvent=ea;g.deserializeClientTrackInfo=W;g.deserializeClientMediaStatus=fa;g.deserializeSubscriptionOptions=X;g.deserializeSubscription=ga;g.deserializeLoggingOptions=ha;g.deserializeResolutionData=ia;g.deserializeTurnInfo=Y;g.deserializeEdgerayInfo=Z;g.deserializeRelayInfo=ja;g.deserializeTSocketAddress=ka;g.deserializeQuickExperimentValue=$}),98);
__d("WebrtcSignalingCommonSerializers",["ThriftTypes"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return{topic:"",data:Uint8Array.of()}}function b(a,b){b.writeStructBegin("GenericDataMessage");b.writeFieldBegin({fname:"topic",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.topic!=null)b.writeString(a.topic);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"data",ftype:h.STRING,fid:2});if(a.data!=null)b.writeBinary(a.data);else{d=Uint8Array.of();b.writeBinary(d)}b.writeFieldEnd();a.e2eEncryptedData!=null&&(b.writeFieldBegin({fname:"e2eEncryptedData",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeBinary(a.e2eEncryptedData),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function d(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.topic=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.data=a.readBinary():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.e2eEncryptedData=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.topic===void 0&&(b.topic="");b.data===void 0&&(b.data=Uint8Array.of());return b}g.GenericDataMessage$DefaultConstructor=a;g.serializeGenericDataMessage=b;g.deserializeGenericDataMessage=d}),98);
__d("DataMessageSerializers",["MultiwaySharedSerializers","MultiwaySharedTypes","ThriftTypes","WebrtcSignalingCommonSerializers"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){return{topic_DEPRECATED:""}}function a(){return{userId:""}}function b(){return{userId:"",cname:"",trackIds:[],transactionId:"0"}}function e(){return{cname:"",quality_DEPRECATED:d("MultiwaySharedTypes").VideoQuality.cast(0)}}function f(){return{userId:"",bottleneckBps:0}}function j(){return{bottleneckUplinksByLayer:{}}}function k(){return{duplicationAmount:0,delayMs:0}}function l(){return{}}function m(){return{}}function n(){return{primarySpeakerUserId:"",transactionId:"0"}}function o(){return{}}function p(){return{signalingMessagePayload:Uint8Array.of()}}function q(){return{signalingMessagePayload:Uint8Array.of()}}function r(){return{subscriptionMessagePayload:[]}}function s(){return{}}function t(){return{}}function u(){return{nodeIdToUserIdMap:{},nodeIdToServiceTypeMap:{}}}function v(){return{}}function w(){return{header:i()}}function x(a,b){b.writeStructBegin("DataHeader");a.sender!=null&&(b.writeFieldBegin({fname:"sender",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.sender),b.writeFieldEnd());b.writeFieldBegin({fname:"topic_DEPRECATED",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2});if(a.topic_DEPRECATED!=null)b.writeString(a.topic_DEPRECATED);else{var d="";b.writeString(d)}b.writeFieldEnd();if(a.recipients!=null){b.writeFieldBegin({fname:"recipients",ftype:(h||(h=c("ThriftTypes"))).SET,fid:3});b.writeSetBegin({etype:h.STRING,size:a.recipients.size});for(d of a.recipients)b.writeString(d);b.writeSetEnd();b.writeFieldEnd()}if(a.serviceSender!=null){b.writeFieldBegin({fname:"serviceSender",ftype:(h||(h=c("ThriftTypes"))).I32,fid:4});b.writeI32((d=a.serviceSender)!=null?d:0);b.writeFieldEnd()}if(a.serviceRecipients!=null){b.writeFieldBegin({fname:"serviceRecipients",ftype:(h||(h=c("ThriftTypes"))).SET,fid:5});b.writeSetBegin({etype:h.I32,size:a.serviceRecipients.size});for(d of a.serviceRecipients)b.writeI32(d!=null?d:0);b.writeSetEnd();b.writeFieldEnd()}a.shouldSendToAllUsers!=null&&(b.writeFieldBegin({fname:"shouldSendToAllUsers",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:6}),b.writeBool(a.shouldSendToAllUsers),b.writeFieldEnd());a.senderE2eeId!=null&&(b.writeFieldBegin({fname:"senderE2eeId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:7}),b.writeBinary(a.senderE2eeId),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function y(a,b){b.writeStructBegin("SpeakerDetail");b.writeFieldBegin({fname:"userId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.userId!=null)b.writeString(a.userId);else{a="";b.writeString(a)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function z(a,b){b.writeStructBegin("DominantSpeakerNotification");b.writeFieldBegin({fname:"userId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.userId!=null)b.writeString(a.userId);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"cname",ftype:h.STRING,fid:2});if(a.cname!=null)b.writeString(a.cname);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"trackIds",ftype:h.LIST,fid:4});if(a.trackIds!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:a.trackIds.length});for(d of a.trackIds)b.writeString(d);b.writeListEnd()}else{d=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:d.length});for(d of d)b.writeString(d);b.writeListEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"transactionId",ftype:h.I64,fid:5});if(a.transactionId!=null)b.writeI64(BigInt(a.transactionId));else{d="0";b.writeI64(BigInt(d))}b.writeFieldEnd();if(a.dominantSpeakers!=null){b.writeFieldBegin({fname:"dominantSpeakers",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:6});b.writeListBegin({etype:h.STRUCT,size:a.dominantSpeakers.length});for(d of a.dominantSpeakers)y(d,b);b.writeListEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function A(a,b){b.writeStructBegin("VideoUploadRequest");b.writeFieldBegin({fname:"cname",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.cname!=null)b.writeString(a.cname);else{var e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"quality_DEPRECATED",ftype:h.I32,fid:2});if(a.quality_DEPRECATED!=null){b.writeI32((e=a.quality_DEPRECATED)!=null?e:0)}else{e=d("MultiwaySharedTypes").VideoQuality.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();a.qualityMask!=null&&(b.writeFieldBegin({fname:"qualityMask",ftype:(h||(h=c("ThriftTypes"))).I32,fid:3}),b.writeI32(a.qualityMask),b.writeFieldEnd());if(a.perSsrcTargetBitrateBpsMap!=null){b.writeFieldBegin({fname:"perSsrcTargetBitrateBpsMap",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:4});b.writeMapBegin({ktype:h.I64,vtype:h.I64,size:Object.keys(a.perSsrcTargetBitrateBpsMap).length});for(e of Object.entries(a.perSsrcTargetBitrateBpsMap)){a=e[0];var f=e[1];b.writeI64(BigInt(a));b.writeI64(BigInt(f))}b.writeMapEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function B(a,b){b.writeStructBegin("ReceiverBottleneck");b.writeFieldBegin({fname:"userId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.userId!=null)b.writeString(a.userId);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"bottleneckBps",ftype:h.I32,fid:2});if(a.bottleneckBps!=null)b.writeI32(a.bottleneckBps);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function C(a,b){b.writeStructBegin("BweDebugInfo");b.writeFieldBegin({fname:"bottleneckUplinksByLayer",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.bottleneckUplinksByLayer!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.STRUCT,size:Object.keys(a.bottleneckUplinksByLayer).length});for(a of Object.entries(a.bottleneckUplinksByLayer)){var d=a[0],e=a[1];b.writeI32(Number(d));B(e,b)}b.writeMapEnd()}else{d={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.STRUCT,size:Object.keys(d).length});for(e of Object.entries(d)){a=e[0];d=e[1];b.writeI32(Number(a));B(d,b)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function D(a,b){b.writeStructBegin("AudioDuplicationDebugInfo");b.writeFieldBegin({fname:"duplicationAmount",ftype:(h||(h=c("ThriftTypes"))).I16,fid:1});if(a.duplicationAmount!=null)b.writeI16(a.duplicationAmount);else{var d=0;b.writeI16(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"delayMs",ftype:h.I16,fid:2});if(a.delayMs!=null)b.writeI16(a.delayMs);else{d=0;b.writeI16(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function E(a,b){b.writeStructBegin("ReceiveTrackDebugInfo"),a.trackId!=null&&(b.writeFieldBegin({fname:"trackId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.trackId),b.writeFieldEnd()),a.numSimulcastLayersSupported!=null&&(b.writeFieldBegin({fname:"numSimulcastLayersSupported",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2}),b.writeI32(a.numSimulcastLayersSupported),b.writeFieldEnd()),a.numSimulcastLayersAllocated!=null&&(b.writeFieldBegin({fname:"numSimulcastLayersAllocated",ftype:(h||(h=c("ThriftTypes"))).I32,fid:3}),b.writeI32(a.numSimulcastLayersAllocated),b.writeFieldEnd()),a.spatialLayerIndex!=null&&(b.writeFieldBegin({fname:"spatialLayerIndex",ftype:(h||(h=c("ThriftTypes"))).I32,fid:4}),b.writeI32(a.spatialLayerIndex),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function F(a,b){b.writeStructBegin("DebugInfo");a.audioDuplicationDebugInfo!=null&&(b.writeFieldBegin({fname:"audioDuplicationDebugInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1}),D(a.audioDuplicationDebugInfo,b),b.writeFieldEnd());if(a.receiveTrackDebugInfo!=null){b.writeFieldBegin({fname:"receiveTrackDebugInfo",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:2});b.writeListBegin({etype:h.STRUCT,size:a.receiveTrackDebugInfo.length});for(a of a.receiveTrackDebugInfo)E(a,b);b.writeListEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function G(a,b){b.writeStructBegin("DominantSpeakerInfo");b.writeFieldBegin({fname:"primarySpeakerUserId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.primarySpeakerUserId!=null)b.writeString(a.primarySpeakerUserId);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"transactionId",ftype:h.I64,fid:2});if(a.transactionId!=null)b.writeI64(BigInt(a.transactionId));else{d="0";b.writeI64(BigInt(d))}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function H(a,b){b.writeStructBegin("VideoUploadInfo");a.qualityMask!=null&&(b.writeFieldBegin({fname:"qualityMask",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1}),b.writeI32(a.qualityMask),b.writeFieldEnd());if(a.perSsrcTargetBitrateBpsMap!=null){b.writeFieldBegin({fname:"perSsrcTargetBitrateBpsMap",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:2});b.writeMapBegin({ktype:h.I64,vtype:h.I64,size:Object.keys(a.perSsrcTargetBitrateBpsMap).length});for(a of Object.entries(a.perSsrcTargetBitrateBpsMap)){var d=a[0],e=a[1];b.writeI64(BigInt(d));b.writeI64(BigInt(e))}b.writeMapEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function I(a,b){b.writeStructBegin("SignalingMessageToClient");b.writeFieldBegin({fname:"signalingMessagePayload",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.signalingMessagePayload!=null)b.writeBinary(a.signalingMessagePayload);else{var d=Uint8Array.of();b.writeBinary(d)}b.writeFieldEnd();a.version!=null&&(b.writeFieldBegin({fname:"version",ftype:(h||(h=c("ThriftTypes"))).I64,fid:2}),b.writeI64(BigInt(a.version)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function J(a,b){b.writeStructBegin("SignalingMessageFromClient");b.writeFieldBegin({fname:"signalingMessagePayload",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.signalingMessagePayload!=null)b.writeBinary(a.signalingMessagePayload);else{var d=Uint8Array.of();b.writeBinary(d)}b.writeFieldEnd();a.version!=null&&(b.writeFieldBegin({fname:"version",ftype:(h||(h=c("ThriftTypes"))).I64,fid:2}),b.writeI64(BigInt(a.version)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function K(a,b){b.writeStructBegin("SubscriptionMessageFromClient");b.writeFieldBegin({fname:"subscriptionMessagePayload",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:1});if(a.subscriptionMessagePayload!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.subscriptionMessagePayload.length});for(a of a.subscriptionMessagePayload)d("MultiwaySharedSerializers").serializeSubscription(a,b);b.writeListEnd()}else{a=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.length});for(a of a)d("MultiwaySharedSerializers").serializeSubscription(a,b);b.writeListEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function L(a,b){b.writeStructBegin("RenderResolutionMessageFromClient");if(a.renderResolutionMap!=null){b.writeFieldBegin({fname:"renderResolutionMap",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});b.writeMapBegin({ktype:h.STRING,vtype:h.MAP,size:Object.keys(a.renderResolutionMap).length});for(a of Object.entries(a.renderResolutionMap)){var e=a[0],f=a[1];b.writeString(e);b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.STRUCT,size:Object.keys(f).length});for(e of Object.entries(f)){f=e[0];var g=e[1];b.writeI32((f=Number(f))!=null?f:0);d("MultiwaySharedSerializers").serializeResolutionData(g,b)}b.writeMapEnd()}b.writeMapEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function aa(a,b){b.writeStructBegin("RenderResolutionMessageToClient");if(a.renderResolutionMap!=null){b.writeFieldBegin({fname:"renderResolutionMap",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});b.writeMapBegin({ktype:h.STRING,vtype:h.MAP,size:Object.keys(a.renderResolutionMap).length});for(a of Object.entries(a.renderResolutionMap)){var e=a[0],f=a[1];b.writeString(e);b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.STRUCT,size:Object.keys(f).length});for(e of Object.entries(f)){f=e[0];var g=e[1];b.writeI32((f=Number(f))!=null?f:0);d("MultiwaySharedSerializers").serializeResolutionData(g,b)}b.writeMapEnd()}b.writeMapEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function ba(a,b){b.writeStructBegin("NodeIdNotification");b.writeFieldBegin({fname:"nodeIdToUserIdMap",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.nodeIdToUserIdMap!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I64,vtype:h.I64,size:Object.keys(a.nodeIdToUserIdMap).length});for(var d of Object.entries(a.nodeIdToUserIdMap)){var e=d[0],f=d[1];b.writeI64(BigInt(e));b.writeI64(BigInt(f))}b.writeMapEnd()}else{e={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I64,vtype:h.I64,size:Object.keys(e).length});for(f of Object.entries(e)){d=f[0];e=f[1];b.writeI64(BigInt(d));b.writeI64(BigInt(e))}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"nodeIdToServiceTypeMap",ftype:h.MAP,fid:2});if(a.nodeIdToServiceTypeMap!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I64,vtype:h.I32,size:Object.keys(a.nodeIdToServiceTypeMap).length});for(d of Object.entries(a.nodeIdToServiceTypeMap)){e=d[0];f=d[1];b.writeI64(BigInt(e));b.writeI32(f!=null?f:0)}b.writeMapEnd()}else{a={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I64,vtype:h.I32,size:Object.keys(a).length});for(e of Object.entries(a)){f=e[0];d=e[1];b.writeI64(BigInt(f));b.writeI32(d!=null?d:0)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function M(a,b){b.writeStructBegin("DataMessageBody"),a.genericMessage!=null&&(b.writeFieldBegin({fname:"genericMessage",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1}),d("WebrtcSignalingCommonSerializers").serializeGenericDataMessage(a.genericMessage,b),b.writeFieldEnd()),a.dominantSpeakerNotification!=null&&(b.writeFieldBegin({fname:"dominantSpeakerNotification",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2}),z(a.dominantSpeakerNotification,b),b.writeFieldEnd()),a.videoUploadRequest!=null&&(b.writeFieldBegin({fname:"videoUploadRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:3}),A(a.videoUploadRequest,b),b.writeFieldEnd()),a.dominantSpeakerSignalingInfo!=null&&(b.writeFieldBegin({fname:"dominantSpeakerSignalingInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:4}),G(a.dominantSpeakerSignalingInfo,b),b.writeFieldEnd()),a.bweDebugInfo!=null&&(b.writeFieldBegin({fname:"bweDebugInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:5}),C(a.bweDebugInfo,b),b.writeFieldEnd()),a.debugInfo!=null&&(b.writeFieldBegin({fname:"debugInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6}),F(a.debugInfo,b),b.writeFieldEnd()),a.videoUploadSignalingInfo!=null&&(b.writeFieldBegin({fname:"videoUploadSignalingInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:7}),H(a.videoUploadSignalingInfo,b),b.writeFieldEnd()),a.signalingMessageToClient!=null&&(b.writeFieldBegin({fname:"signalingMessageToClient",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:8}),I(a.signalingMessageToClient,b),b.writeFieldEnd()),a.signalingMessageFromClient!=null&&(b.writeFieldBegin({fname:"signalingMessageFromClient",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:9}),J(a.signalingMessageFromClient,b),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function ca(a,b){b.writeStructBegin("DataMessage");b.writeFieldBegin({fname:"header",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1});if(a.header!=null)x(a.header,b);else{var d=i();x(d,b)}b.writeFieldEnd();a.data_DEPRECATED!=null&&(b.writeFieldBegin({fname:"data_DEPRECATED",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeBinary(a.data_DEPRECATED),b.writeFieldEnd());a.body!=null&&(b.writeFieldBegin({fname:"body",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:3}),M(a.body,b),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function N(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.sender=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.topic_DEPRECATED=a.readString():a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).SET){b.recipients=new Set();e=a.readSetBegin();for(var g=0;g<e.size;g++){var i=a.readString();b.recipients.add(i)}}else a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).I32?b.serviceSender=d("MultiwaySharedTypes").EndpointServiceType.cast(a.readI32()):a.skip(f);break;case 5:if(f===(h||(h=c("ThriftTypes"))).SET){b.serviceRecipients=new Set();i=a.readSetBegin();for(g=0;g<i.size;g++){e=d("MultiwaySharedTypes").EndpointServiceType.cast(a.readI32());b.serviceRecipients.add(e)}}else a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).BOOL?b.shouldSendToAllUsers=a.readBool():a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).STRING?b.senderE2eeId=a.readBinary():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.topic_DEPRECATED===void 0&&(b.topic_DEPRECATED="");return b}function O(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.userId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.userId===void 0&&(b.userId="");return b}function P(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.userId=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.cname=a.readString():a.skip(e);break;case 4:if(e===(h||(h=c("ThriftTypes"))).LIST){b.trackIds=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=a.readString();b.trackIds.push(g)}}else a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).I64?b.transactionId=a.readI64().toString():a.skip(e);break;case 6:if(e===(h||(h=c("ThriftTypes"))).LIST){b.dominantSpeakers=[];g=a.readListBegin();for(f=0;f<g.size;f++){d=O(a);b.dominantSpeakers.push(d)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.userId===void 0&&(b.userId="");b.cname===void 0&&(b.cname="");b.trackIds===void 0&&(b.trackIds=[]);b.transactionId===void 0&&(b.transactionId="0");return b}function Q(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.cname=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.quality_DEPRECATED=d("MultiwaySharedTypes").VideoQuality.cast(a.readI32()):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.qualityMask=a.readI32():a.skip(f);break;case 4:if(f===(h||(h=c("ThriftTypes"))).MAP){b.perSsrcTargetBitrateBpsMap={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readI64().toString(),j=a.readI64().toString();b.perSsrcTargetBitrateBpsMap[i]=j}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.cname===void 0&&(b.cname="");b.quality_DEPRECATED===void 0&&(b.quality_DEPRECATED=d("MultiwaySharedTypes").VideoQuality.cast(0));return b}function R(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.userId=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I32?b.bottleneckBps=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.userId===void 0&&(b.userId="");b.bottleneckBps===void 0&&(b.bottleneckBps=0);return b}function S(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).MAP){b.bottleneckUplinksByLayer={};d=a.readMapBegin();for(var f=0;f<d.size;f++){var g=a.readI32(),i=R(a);b.bottleneckUplinksByLayer[g]=i}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.bottleneckUplinksByLayer===void 0&&(b.bottleneckUplinksByLayer={});return b}function T(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I16?b.duplicationAmount=a.readI16():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I16?b.delayMs=a.readI16():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.duplicationAmount===void 0&&(b.duplicationAmount=0);b.delayMs===void 0&&(b.delayMs=0);return b}function U(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.trackId=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I32?b.numSimulcastLayersSupported=a.readI32():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).I32?b.numSimulcastLayersAllocated=a.readI32():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).I32?b.spatialLayerIndex=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function V(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRUCT?b.audioDuplicationDebugInfo=T(a):a.skip(e);break;case 2:if(e===(h||(h=c("ThriftTypes"))).LIST){b.receiveTrackDebugInfo=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=U(a);b.receiveTrackDebugInfo.push(g)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function W(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.primarySpeakerUserId=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I64?b.transactionId=a.readI64().toString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.primarySpeakerUserId===void 0&&(b.primarySpeakerUserId="");b.transactionId===void 0&&(b.transactionId="0");return b}function X(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I32?b.qualityMask=a.readI32():a.skip(e);break;case 2:if(e===(h||(h=c("ThriftTypes"))).MAP){b.perSsrcTargetBitrateBpsMap={};d=a.readMapBegin();for(var f=0;f<d.size;f++){var g=a.readI64().toString(),i=a.readI64().toString();b.perSsrcTargetBitrateBpsMap[g]=i}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function Y(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.signalingMessagePayload=a.readBinary():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I64?b.version=a.readI64().toString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.signalingMessagePayload===void 0&&(b.signalingMessagePayload=Uint8Array.of());return b}function Z(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.signalingMessagePayload=a.readBinary():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I64?b.version=a.readI64().toString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.signalingMessagePayload===void 0&&(b.signalingMessagePayload=Uint8Array.of());return b}function da(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).LIST){b.subscriptionMessagePayload=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=d("MultiwaySharedSerializers").deserializeSubscription(a);b.subscriptionMessagePayload.push(i)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.subscriptionMessagePayload===void 0&&(b.subscriptionMessagePayload=[]);return b}function ea(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).MAP){b.renderResolutionMap={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readString(),j={},k=a.readMapBegin();for(var l=0;l<k.size;l++){var m=d("MultiwaySharedTypes").RenderedStreamType.cast(a.readI32()),n=d("MultiwaySharedSerializers").deserializeResolutionData(a);m!=null&&(j[m]=n)}b.renderResolutionMap[i]=j}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return b}function fa(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).MAP){b.renderResolutionMap={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readString(),j={},k=a.readMapBegin();for(var l=0;l<k.size;l++){var m=d("MultiwaySharedTypes").RenderedStreamType.cast(a.readI32()),n=d("MultiwaySharedSerializers").deserializeResolutionData(a);m!=null&&(j[m]=n)}b.renderResolutionMap[i]=j}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return b}function ga(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).MAP){b.nodeIdToUserIdMap={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readI64().toString(),j=a.readI64().toString();b.nodeIdToUserIdMap[i]=j}}else a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).MAP){b.nodeIdToServiceTypeMap={};i=a.readMapBegin();for(j=0;j<i.size;j++){g=a.readI64().toString();e=d("MultiwaySharedTypes").EndpointServiceType.cast(a.readI32());b.nodeIdToServiceTypeMap[g]=e}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.nodeIdToUserIdMap===void 0&&(b.nodeIdToUserIdMap={});b.nodeIdToServiceTypeMap===void 0&&(b.nodeIdToServiceTypeMap={});return b}function $(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRUCT?b.genericMessage=d("WebrtcSignalingCommonSerializers").deserializeGenericDataMessage(a):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRUCT?b.dominantSpeakerNotification=P(a):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRUCT?b.videoUploadRequest=Q(a):a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRUCT?b.dominantSpeakerSignalingInfo=W(a):a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRUCT?b.bweDebugInfo=S(a):a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).STRUCT?b.debugInfo=V(a):a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).STRUCT?b.videoUploadSignalingInfo=X(a):a.skip(f);break;case 8:f===(h||(h=c("ThriftTypes"))).STRUCT?b.signalingMessageToClient=Y(a):a.skip(f);break;case 9:f===(h||(h=c("ThriftTypes"))).STRUCT?b.signalingMessageFromClient=Z(a):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return b}function ha(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRUCT?b.header=N(a):a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.data_DEPRECATED=a.readBinary():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRUCT?b.body=$(a):a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.header===void 0&&(b.header=i());return b}g.DataHeader$DefaultConstructor=i;g.SpeakerDetail$DefaultConstructor=a;g.DominantSpeakerNotification$DefaultConstructor=b;g.VideoUploadRequest$DefaultConstructor=e;g.ReceiverBottleneck$DefaultConstructor=f;g.BweDebugInfo$DefaultConstructor=j;g.AudioDuplicationDebugInfo$DefaultConstructor=k;g.ReceiveTrackDebugInfo$DefaultConstructor=l;g.DebugInfo$DefaultConstructor=m;g.DominantSpeakerInfo$DefaultConstructor=n;g.VideoUploadInfo$DefaultConstructor=o;g.SignalingMessageToClient$DefaultConstructor=p;g.SignalingMessageFromClient$DefaultConstructor=q;g.SubscriptionMessageFromClient$DefaultConstructor=r;g.RenderResolutionMessageFromClient$DefaultConstructor=s;g.RenderResolutionMessageToClient$DefaultConstructor=t;g.NodeIdNotification$DefaultConstructor=u;g.DataMessageBody$DefaultConstructor=v;g.DataMessage$DefaultConstructor=w;g.serializeDataHeader=x;g.serializeSpeakerDetail=y;g.serializeDominantSpeakerNotification=z;g.serializeVideoUploadRequest=A;g.serializeReceiverBottleneck=B;g.serializeBweDebugInfo=C;g.serializeAudioDuplicationDebugInfo=D;g.serializeReceiveTrackDebugInfo=E;g.serializeDebugInfo=F;g.serializeDominantSpeakerInfo=G;g.serializeVideoUploadInfo=H;g.serializeSignalingMessageToClient=I;g.serializeSignalingMessageFromClient=J;g.serializeSubscriptionMessageFromClient=K;g.serializeRenderResolutionMessageFromClient=L;g.serializeRenderResolutionMessageToClient=aa;g.serializeNodeIdNotification=ba;g.serializeDataMessageBody=M;g.serializeDataMessage=ca;g.deserializeDataHeader=N;g.deserializeSpeakerDetail=O;g.deserializeDominantSpeakerNotification=P;g.deserializeVideoUploadRequest=Q;g.deserializeReceiverBottleneck=R;g.deserializeBweDebugInfo=S;g.deserializeAudioDuplicationDebugInfo=T;g.deserializeReceiveTrackDebugInfo=U;g.deserializeDebugInfo=V;g.deserializeDominantSpeakerInfo=W;g.deserializeVideoUploadInfo=X;g.deserializeSignalingMessageToClient=Y;g.deserializeSignalingMessageFromClient=Z;g.deserializeSubscriptionMessageFromClient=da;g.deserializeRenderResolutionMessageFromClient=ea;g.deserializeRenderResolutionMessageToClient=fa;g.deserializeNodeIdNotification=ga;g.deserializeDataMessageBody=$;g.deserializeDataMessage=ha}),98);
__d("DataMessageTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({OK:200,NOT_FOUND:404});e.exports={DataMessageStatusCode:a}}),null);
__d("E2eeMetricsSerializers",["ThriftTypes"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){return{}}function j(){return{}}function a(){return{p2p_e2ee:i(),group_e2ee:j()}}function k(a,b){b.writeStructBegin("P2pE2eeMetrics");a.engine_type!=null&&(b.writeFieldBegin({fname:"engine_type",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1}),b.writeI64(BigInt(a.engine_type)),b.writeFieldEnd());a.status!=null&&(b.writeFieldBegin({fname:"status",ftype:(h||(h=c("ThriftTypes"))).I64,fid:2}),b.writeI64(BigInt(a.status)),b.writeFieldEnd());a.version!=null&&(b.writeFieldBegin({fname:"version",ftype:(h||(h=c("ThriftTypes"))).I64,fid:3}),b.writeI64(BigInt(a.version)),b.writeFieldEnd());a.gen_prekey_bundle_time_ms!=null&&(b.writeFieldBegin({fname:"gen_prekey_bundle_time_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:4}),b.writeI64(BigInt(a.gen_prekey_bundle_time_ms)),b.writeFieldEnd());a.encrypted_msg_time_ms!=null&&(b.writeFieldBegin({fname:"encrypted_msg_time_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:5}),b.writeI64(BigInt(a.encrypted_msg_time_ms)),b.writeFieldEnd());a.decrypted_msg_time_ms!=null&&(b.writeFieldBegin({fname:"decrypted_msg_time_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:6}),b.writeI64(BigInt(a.decrypted_msg_time_ms)),b.writeFieldEnd());a.process_sdp_crypto_time_ms!=null&&(b.writeFieldBegin({fname:"process_sdp_crypto_time_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:7}),b.writeI64(BigInt(a.process_sdp_crypto_time_ms)),b.writeFieldEnd());a.create_crypto_offer_time_ms!=null&&(b.writeFieldBegin({fname:"create_crypto_offer_time_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:8}),b.writeI64(BigInt(a.create_crypto_offer_time_ms)),b.writeFieldEnd());a.create_crypto_answer_time_ms!=null&&(b.writeFieldBegin({fname:"create_crypto_answer_time_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:9}),b.writeI64(BigInt(a.create_crypto_answer_time_ms)),b.writeFieldEnd());a.get_ik_time_ms!=null&&(b.writeFieldBegin({fname:"get_ik_time_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:10}),b.writeI64(BigInt(a.get_ik_time_ms)),b.writeFieldEnd());a.peer_id!=null&&(b.writeFieldBegin({fname:"peer_id",ftype:(h||(h=c("ThriftTypes"))).I64,fid:11}),b.writeI64(BigInt(a.peer_id)),b.writeFieldEnd());a.peer_connection_index!=null&&(b.writeFieldBegin({fname:"peer_connection_index",ftype:(h||(h=c("ThriftTypes"))).I64,fid:12}),b.writeI64(BigInt(a.peer_connection_index)),b.writeFieldEnd());a.srtp_crypto_suite!=null&&(b.writeFieldBegin({fname:"srtp_crypto_suite",ftype:(h||(h=c("ThriftTypes"))).I64,fid:13}),b.writeI64(BigInt(a.srtp_crypto_suite)),b.writeFieldEnd());a.engine_error!=null&&(b.writeFieldBegin({fname:"engine_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:14}),b.writeI64(BigInt(a.engine_error)),b.writeFieldEnd());a.libsignal_error!=null&&(b.writeFieldBegin({fname:"libsignal_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:15}),b.writeI64(BigInt(a.libsignal_error)),b.writeFieldEnd());a.identity_key_mode!=null&&(b.writeFieldBegin({fname:"identity_key_mode",ftype:(h||(h=c("ThriftTypes"))).I64,fid:16}),b.writeI64(BigInt(a.identity_key_mode)),b.writeFieldEnd());a.identity_key_num_persistent!=null&&(b.writeFieldBegin({fname:"identity_key_num_persistent",ftype:(h||(h=c("ThriftTypes"))).I64,fid:17}),b.writeI64(BigInt(a.identity_key_num_persistent)),b.writeFieldEnd());a.identity_key_num_validated!=null&&(b.writeFieldBegin({fname:"identity_key_num_validated",ftype:(h||(h=c("ThriftTypes"))).I64,fid:18}),b.writeI64(BigInt(a.identity_key_num_validated)),b.writeFieldEnd());a.identity_key_num_saved!=null&&(b.writeFieldBegin({fname:"identity_key_num_saved",ftype:(h||(h=c("ThriftTypes"))).I64,fid:19}),b.writeI64(BigInt(a.identity_key_num_saved)),b.writeFieldEnd());a.identity_key_num_existing!=null&&(b.writeFieldBegin({fname:"identity_key_num_existing",ftype:(h||(h=c("ThriftTypes"))).I64,fid:20}),b.writeI64(BigInt(a.identity_key_num_existing)),b.writeFieldEnd());a.is_e2ee_mandated!=null&&(b.writeFieldBegin({fname:"is_e2ee_mandated",ftype:(h||(h=c("ThriftTypes"))).I64,fid:21}),b.writeI64(BigInt(a.is_e2ee_mandated)),b.writeFieldEnd());a.local_trace_id!=null&&(b.writeFieldBegin({fname:"local_trace_id",ftype:(h||(h=c("ThriftTypes"))).I64,fid:22}),b.writeI64(BigInt(a.local_trace_id)),b.writeFieldEnd());a.remote_trace_id!=null&&(b.writeFieldBegin({fname:"remote_trace_id",ftype:(h||(h=c("ThriftTypes"))).I64,fid:23}),b.writeI64(BigInt(a.remote_trace_id)),b.writeFieldEnd());a.local_device_id!=null&&(b.writeFieldBegin({fname:"local_device_id",ftype:(h||(h=c("ThriftTypes"))).I64,fid:24}),b.writeI64(BigInt(a.local_device_id)),b.writeFieldEnd());a.remote_device_id!=null&&(b.writeFieldBegin({fname:"remote_device_id",ftype:(h||(h=c("ThriftTypes"))).I64,fid:25}),b.writeI64(BigInt(a.remote_device_id)),b.writeFieldEnd());if(a.events!=null){b.writeFieldBegin({fname:"events",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:26});b.writeListBegin({etype:h.I64,size:a.events.length});for(var d of a.events)b.writeI64(BigInt(d));b.writeListEnd();b.writeFieldEnd()}a.gen_dtls_auth_info_status!=null&&(b.writeFieldBegin({fname:"gen_dtls_auth_info_status",ftype:(h||(h=c("ThriftTypes"))).I64,fid:27}),b.writeI64(BigInt(a.gen_dtls_auth_info_status)),b.writeFieldEnd());a.gen_dtls_auth_info_libsignal_status!=null&&(b.writeFieldBegin({fname:"gen_dtls_auth_info_libsignal_status",ftype:(h||(h=c("ThriftTypes"))).I64,fid:28}),b.writeI64(BigInt(a.gen_dtls_auth_info_libsignal_status)),b.writeFieldEnd());a.gen_dtls_auth_info_time_ms!=null&&(b.writeFieldBegin({fname:"gen_dtls_auth_info_time_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:29}),b.writeI64(BigInt(a.gen_dtls_auth_info_time_ms)),b.writeFieldEnd());a.verify_dtls_auth_info_status!=null&&(b.writeFieldBegin({fname:"verify_dtls_auth_info_status",ftype:(h||(h=c("ThriftTypes"))).I64,fid:30}),b.writeI64(BigInt(a.verify_dtls_auth_info_status)),b.writeFieldEnd());a.verify_dtls_auth_info_libsignal_status!=null&&(b.writeFieldBegin({fname:"verify_dtls_auth_info_libsignal_status",ftype:(h||(h=c("ThriftTypes"))).I64,fid:31}),b.writeI64(BigInt(a.verify_dtls_auth_info_libsignal_status)),b.writeFieldEnd());a.verify_dtls_auth_info_time_ms!=null&&(b.writeFieldBegin({fname:"verify_dtls_auth_info_time_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:32}),b.writeI64(BigInt(a.verify_dtls_auth_info_time_ms)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function l(a,b){b.writeStructBegin("GroupE2eeMetrics");a.received_key_message_counter!=null&&(b.writeFieldBegin({fname:"received_key_message_counter",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1}),b.writeI64(BigInt(a.received_key_message_counter)),b.writeFieldEnd());a.sent_key_message_counter!=null&&(b.writeFieldBegin({fname:"sent_key_message_counter",ftype:(h||(h=c("ThriftTypes"))).I64,fid:2}),b.writeI64(BigInt(a.sent_key_message_counter)),b.writeFieldEnd());a.cached_key_message_counter!=null&&(b.writeFieldBegin({fname:"cached_key_message_counter",ftype:(h||(h=c("ThriftTypes"))).I64,fid:3}),b.writeI64(BigInt(a.cached_key_message_counter)),b.writeFieldEnd());a.used_cached_key_counter!=null&&(b.writeFieldBegin({fname:"used_cached_key_counter",ftype:(h||(h=c("ThriftTypes"))).I64,fid:4}),b.writeI64(BigInt(a.used_cached_key_counter)),b.writeFieldEnd());a.unused_smu_counter!=null&&(b.writeFieldBegin({fname:"unused_smu_counter",ftype:(h||(h=c("ThriftTypes"))).I64,fid:5}),b.writeI64(BigInt(a.unused_smu_counter)),b.writeFieldEnd());a.missing_key_message_counter!=null&&(b.writeFieldBegin({fname:"missing_key_message_counter",ftype:(h||(h=c("ThriftTypes"))).I64,fid:6}),b.writeI64(BigInt(a.missing_key_message_counter)),b.writeFieldEnd());a.negotiate_off_status!=null&&(b.writeFieldBegin({fname:"negotiate_off_status",ftype:(h||(h=c("ThriftTypes"))).I64,fid:7}),b.writeI64(BigInt(a.negotiate_off_status)),b.writeFieldEnd());a.cipher_suite_status!=null&&(b.writeFieldBegin({fname:"cipher_suite_status",ftype:(h||(h=c("ThriftTypes"))).I64,fid:8}),b.writeI64(BigInt(a.cipher_suite_status)),b.writeFieldEnd());a.decrypt_used_cached_session_counter!=null&&(b.writeFieldBegin({fname:"decrypt_used_cached_session_counter",ftype:(h||(h=c("ThriftTypes"))).I64,fid:9}),b.writeI64(BigInt(a.decrypt_used_cached_session_counter)),b.writeFieldEnd());a.encrypt_used_cached_session_counter!=null&&(b.writeFieldBegin({fname:"encrypt_used_cached_session_counter",ftype:(h||(h=c("ThriftTypes"))).I64,fid:10}),b.writeI64(BigInt(a.encrypt_used_cached_session_counter)),b.writeFieldEnd());a.sent_ack_message_counter!=null&&(b.writeFieldBegin({fname:"sent_ack_message_counter",ftype:(h||(h=c("ThriftTypes"))).I64,fid:11}),b.writeI64(BigInt(a.sent_ack_message_counter)),b.writeFieldEnd());a.reuse_ackd_uid_counter!=null&&(b.writeFieldBegin({fname:"reuse_ackd_uid_counter",ftype:(h||(h=c("ThriftTypes"))).I64,fid:12}),b.writeI64(BigInt(a.reuse_ackd_uid_counter)),b.writeFieldEnd());a.total_uids_created_counter!=null&&(b.writeFieldBegin({fname:"total_uids_created_counter",ftype:(h||(h=c("ThriftTypes"))).I64,fid:13}),b.writeI64(BigInt(a.total_uids_created_counter)),b.writeFieldEnd());a.generate_chain_key_failed_error!=null&&(b.writeFieldBegin({fname:"generate_chain_key_failed_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:14}),b.writeI64(BigInt(a.generate_chain_key_failed_error)),b.writeFieldEnd());a.set_chain_key_failed_error!=null&&(b.writeFieldBegin({fname:"set_chain_key_failed_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:15}),b.writeI64(BigInt(a.set_chain_key_failed_error)),b.writeFieldEnd());a.key_provider_not_found_error!=null&&(b.writeFieldBegin({fname:"key_provider_not_found_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:16}),b.writeI64(BigInt(a.key_provider_not_found_error)),b.writeFieldEnd());a.key_message_parse_failed_error!=null&&(b.writeFieldBegin({fname:"key_message_parse_failed_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:17}),b.writeI64(BigInt(a.key_message_parse_failed_error)),b.writeFieldEnd());a.empty_pkb_result_error!=null&&(b.writeFieldBegin({fname:"empty_pkb_result_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:18}),b.writeI64(BigInt(a.empty_pkb_result_error)),b.writeFieldEnd());a.empty_encrypt_result_error!=null&&(b.writeFieldBegin({fname:"empty_encrypt_result_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:19}),b.writeI64(BigInt(a.empty_encrypt_result_error)),b.writeFieldEnd());a.empty_decrypt_result_error!=null&&(b.writeFieldBegin({fname:"empty_decrypt_result_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:20}),b.writeI64(BigInt(a.empty_decrypt_result_error)),b.writeFieldEnd());a.empty_version_error!=null&&(b.writeFieldBegin({fname:"empty_version_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:21}),b.writeI64(BigInt(a.empty_version_error)),b.writeFieldEnd());a.unsupported_version_error!=null&&(b.writeFieldBegin({fname:"unsupported_version_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:22}),b.writeI64(BigInt(a.unsupported_version_error)),b.writeFieldEnd());a.midcall_version_change_error!=null&&(b.writeFieldBegin({fname:"midcall_version_change_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:23}),b.writeI64(BigInt(a.midcall_version_change_error)),b.writeFieldEnd());a.inconsistent_remote_maps_error!=null&&(b.writeFieldBegin({fname:"inconsistent_remote_maps_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:24}),b.writeI64(BigInt(a.inconsistent_remote_maps_error)),b.writeFieldEnd());a.key_message_pkb_mismatch_error!=null&&(b.writeFieldBegin({fname:"key_message_pkb_mismatch_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:25}),b.writeI64(BigInt(a.key_message_pkb_mismatch_error)),b.writeFieldEnd());a.no_key_or_ack_in_e2ee_message_error!=null&&(b.writeFieldBegin({fname:"no_key_or_ack_in_e2ee_message_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:26}),b.writeI64(BigInt(a.no_key_or_ack_in_e2ee_message_error)),b.writeFieldEnd());a.receiver_key_provider_not_found_error!=null&&(b.writeFieldBegin({fname:"receiver_key_provider_not_found_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:27}),b.writeI64(BigInt(a.receiver_key_provider_not_found_error)),b.writeFieldEnd());a.pkb_parse_failed_error!=null&&(b.writeFieldBegin({fname:"pkb_parse_failed_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:28}),b.writeI64(BigInt(a.pkb_parse_failed_error)),b.writeFieldEnd());a.message_deserialized_failed_error!=null&&(b.writeFieldBegin({fname:"message_deserialized_failed_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:29}),b.writeI64(BigInt(a.message_deserialized_failed_error)),b.writeFieldEnd());a.decrypt_no_identity_key_and_cached_session_not_used_error!=null&&(b.writeFieldBegin({fname:"decrypt_no_identity_key_and_cached_session_not_used_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:30}),b.writeI64(BigInt(a.decrypt_no_identity_key_and_cached_session_not_used_error)),b.writeFieldEnd());a.encrypt_no_identity_key_and_cached_session_not_used_error!=null&&(b.writeFieldBegin({fname:"encrypt_no_identity_key_and_cached_session_not_used_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:31}),b.writeI64(BigInt(a.encrypt_no_identity_key_and_cached_session_not_used_error)),b.writeFieldEnd());a.decrypt_ack_wrong_message_error!=null&&(b.writeFieldBegin({fname:"decrypt_ack_wrong_message_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:32}),b.writeI64(BigInt(a.decrypt_ack_wrong_message_error)),b.writeFieldEnd());a.invalid_uid_received_error!=null&&(b.writeFieldBegin({fname:"invalid_uid_received_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:33}),b.writeI64(BigInt(a.invalid_uid_received_error)),b.writeFieldEnd());a.ack_for_absent_user!=null&&(b.writeFieldBegin({fname:"ack_for_absent_user",ftype:(h||(h=c("ThriftTypes"))).I64,fid:34}),b.writeI64(BigInt(a.ack_for_absent_user)),b.writeFieldEnd());a.uid_not_awaiting_ack_error!=null&&(b.writeFieldBegin({fname:"uid_not_awaiting_ack_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:35}),b.writeI64(BigInt(a.uid_not_awaiting_ack_error)),b.writeFieldEnd());a.decrypt_ack_error!=null&&(b.writeFieldBegin({fname:"decrypt_ack_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:36}),b.writeI64(BigInt(a.decrypt_ack_error)),b.writeFieldEnd());a.empty_decrypt_result_ack_error!=null&&(b.writeFieldBegin({fname:"empty_decrypt_result_ack_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:37}),b.writeI64(BigInt(a.empty_decrypt_result_ack_error)),b.writeFieldEnd());a.decrypt_ack_cached_session_not_used_error!=null&&(b.writeFieldBegin({fname:"decrypt_ack_cached_session_not_used_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:38}),b.writeI64(BigInt(a.decrypt_ack_cached_session_not_used_error)),b.writeFieldEnd());a.encrypt_ack_error!=null&&(b.writeFieldBegin({fname:"encrypt_ack_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:39}),b.writeI64(BigInt(a.encrypt_ack_error)),b.writeFieldEnd());a.empty_encrypt_result_ack_error!=null&&(b.writeFieldBegin({fname:"empty_encrypt_result_ack_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:40}),b.writeI64(BigInt(a.empty_encrypt_result_ack_error)),b.writeFieldEnd());a.invalid_message_type_error!=null&&(b.writeFieldBegin({fname:"invalid_message_type_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:41}),b.writeI64(BigInt(a.invalid_message_type_error)),b.writeFieldEnd());a.server_state_deserialized_failed_error!=null&&(b.writeFieldBegin({fname:"server_state_deserialized_failed_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:42}),b.writeI64(BigInt(a.server_state_deserialized_failed_error)),b.writeFieldEnd());a.crypto_engine_failure_error!=null&&(b.writeFieldBegin({fname:"crypto_engine_failure_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:43}),b.writeI64(BigInt(a.crypto_engine_failure_error)),b.writeFieldEnd());a.empty_e2ee_client_state_error!=null&&(b.writeFieldBegin({fname:"empty_e2ee_client_state_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:44}),b.writeI64(BigInt(a.empty_e2ee_client_state_error)),b.writeFieldEnd());a.group_e2ee_negotiated!=null&&(b.writeFieldBegin({fname:"group_e2ee_negotiated",ftype:(h||(h=c("ThriftTypes"))).I64,fid:45}),b.writeI64(BigInt(a.group_e2ee_negotiated)),b.writeFieldEnd());a.negotiation_mode_kn!=null&&(b.writeFieldBegin({fname:"negotiation_mode_kn",ftype:(h||(h=c("ThriftTypes"))).I64,fid:46}),b.writeI64(BigInt(a.negotiation_mode_kn)),b.writeFieldEnd());a.group_e2ee_setup_status!=null&&(b.writeFieldBegin({fname:"group_e2ee_setup_status",ftype:(h||(h=c("ThriftTypes"))).I64,fid:47}),b.writeI64(BigInt(a.group_e2ee_setup_status)),b.writeFieldEnd());a.enable_group_e2ee!=null&&(b.writeFieldBegin({fname:"enable_group_e2ee",ftype:(h||(h=c("ThriftTypes"))).I64,fid:48}),b.writeI64(BigInt(a.enable_group_e2ee)),b.writeFieldEnd());a.identity_key_mode_group!=null&&(b.writeFieldBegin({fname:"identity_key_mode_group",ftype:(h||(h=c("ThriftTypes"))).I64,fid:49}),b.writeI64(BigInt(a.identity_key_mode_group)),b.writeFieldEnd());a.identity_key_num_persistent_group!=null&&(b.writeFieldBegin({fname:"identity_key_num_persistent_group",ftype:(h||(h=c("ThriftTypes"))).I64,fid:50}),b.writeI64(BigInt(a.identity_key_num_persistent_group)),b.writeFieldEnd());a.identity_key_num_validated_group!=null&&(b.writeFieldBegin({fname:"identity_key_num_validated_group",ftype:(h||(h=c("ThriftTypes"))).I64,fid:51}),b.writeI64(BigInt(a.identity_key_num_validated_group)),b.writeFieldEnd());a.identity_key_num_saved_group!=null&&(b.writeFieldBegin({fname:"identity_key_num_saved_group",ftype:(h||(h=c("ThriftTypes"))).I64,fid:52}),b.writeI64(BigInt(a.identity_key_num_saved_group)),b.writeFieldEnd());a.identity_key_num_existing_group!=null&&(b.writeFieldBegin({fname:"identity_key_num_existing_group",ftype:(h||(h=c("ThriftTypes"))).I64,fid:53}),b.writeI64(BigInt(a.identity_key_num_existing_group)),b.writeFieldEnd());a.max_key_message_latency_ms!=null&&(b.writeFieldBegin({fname:"max_key_message_latency_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:54}),b.writeI64(BigInt(a.max_key_message_latency_ms)),b.writeFieldEnd());a.max_key_message_latency_ms_joiner!=null&&(b.writeFieldBegin({fname:"max_key_message_latency_ms_joiner",ftype:(h||(h=c("ThriftTypes"))).I64,fid:55}),b.writeI64(BigInt(a.max_key_message_latency_ms_joiner)),b.writeFieldEnd());a.max_smu_to_key_message_latency_ms!=null&&(b.writeFieldBegin({fname:"max_smu_to_key_message_latency_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:56}),b.writeI64(BigInt(a.max_smu_to_key_message_latency_ms)),b.writeFieldEnd());a.process_smu_time_ms!=null&&(b.writeFieldBegin({fname:"process_smu_time_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:57}),b.writeI64(BigInt(a.process_smu_time_ms)),b.writeFieldEnd());a.decryption_total_frames!=null&&(b.writeFieldBegin({fname:"decryption_total_frames",ftype:(h||(h=c("ThriftTypes"))).I64,fid:58}),b.writeI64(BigInt(a.decryption_total_frames)),b.writeFieldEnd());a.decryption_total_error_frames!=null&&(b.writeFieldBegin({fname:"decryption_total_error_frames",ftype:(h||(h=c("ThriftTypes"))).I64,fid:59}),b.writeI64(BigInt(a.decryption_total_error_frames)),b.writeFieldEnd());a.decryption_error_frames_alloc!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_alloc",ftype:(h||(h=c("ThriftTypes"))).I64,fid:60}),b.writeI64(BigInt(a.decryption_error_frames_alloc)),b.writeFieldEnd());a.decryption_error_frames_invalid_params!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_invalid_params",ftype:(h||(h=c("ThriftTypes"))).I64,fid:61}),b.writeI64(BigInt(a.decryption_error_frames_invalid_params)),b.writeFieldEnd());a.decryption_error_frames_cipher!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_cipher",ftype:(h||(h=c("ThriftTypes"))).I64,fid:62}),b.writeI64(BigInt(a.decryption_error_frames_cipher)),b.writeFieldEnd());a.decryption_error_frames_parse!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_parse",ftype:(h||(h=c("ThriftTypes"))).I64,fid:63}),b.writeI64(BigInt(a.decryption_error_frames_parse)),b.writeFieldEnd());a.decryption_error_frames_invalid_key!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_invalid_key",ftype:(h||(h=c("ThriftTypes"))).I64,fid:64}),b.writeI64(BigInt(a.decryption_error_frames_invalid_key)),b.writeFieldEnd());a.decryption_error_frames_missing_key!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_missing_key",ftype:(h||(h=c("ThriftTypes"))).I64,fid:65}),b.writeI64(BigInt(a.decryption_error_frames_missing_key)),b.writeFieldEnd());a.decryption_error_frames_out_of_ratchet_space!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_out_of_ratchet_space",ftype:(h||(h=c("ThriftTypes"))).I64,fid:66}),b.writeI64(BigInt(a.decryption_error_frames_out_of_ratchet_space)),b.writeFieldEnd());a.decryption_error_frames_cipher_auth!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_cipher_auth",ftype:(h||(h=c("ThriftTypes"))).I64,fid:67}),b.writeI64(BigInt(a.decryption_error_frames_cipher_auth)),b.writeFieldEnd());a.decryption_error_frames_frame_too_old!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_frame_too_old",ftype:(h||(h=c("ThriftTypes"))).I64,fid:68}),b.writeI64(BigInt(a.decryption_error_frames_frame_too_old)),b.writeFieldEnd());a.decryption_error_frames_seen_frame!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_seen_frame",ftype:(h||(h=c("ThriftTypes"))).I64,fid:69}),b.writeI64(BigInt(a.decryption_error_frames_seen_frame)),b.writeFieldEnd());a.decryption_error_frames_invalid_frame!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_invalid_frame",ftype:(h||(h=c("ThriftTypes"))).I64,fid:70}),b.writeI64(BigInt(a.decryption_error_frames_invalid_frame)),b.writeFieldEnd());a.decryption_error_frames_setting_invalid_key!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_setting_invalid_key",ftype:(h||(h=c("ThriftTypes"))).I64,fid:71}),b.writeI64(BigInt(a.decryption_error_frames_setting_invalid_key)),b.writeFieldEnd());a.decryption_error_frames_setting_existing_key!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_setting_existing_key",ftype:(h||(h=c("ThriftTypes"))).I64,fid:72}),b.writeI64(BigInt(a.decryption_error_frames_setting_existing_key)),b.writeFieldEnd());a.decryption_error_frames_escape_data!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_escape_data",ftype:(h||(h=c("ThriftTypes"))).I64,fid:73}),b.writeI64(BigInt(a.decryption_error_frames_escape_data)),b.writeFieldEnd());a.decryption_error_frames_deescape_data!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_deescape_data",ftype:(h||(h=c("ThriftTypes"))).I64,fid:74}),b.writeI64(BigInt(a.decryption_error_frames_deescape_data)),b.writeFieldEnd());a.decryption_error_frames_parse_frame_or_key!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_parse_frame_or_key",ftype:(h||(h=c("ThriftTypes"))).I64,fid:75}),b.writeI64(BigInt(a.decryption_error_frames_parse_frame_or_key)),b.writeFieldEnd());a.decryption_error_frames_unknown!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_unknown",ftype:(h||(h=c("ThriftTypes"))).I64,fid:76}),b.writeI64(BigInt(a.decryption_error_frames_unknown)),b.writeFieldEnd());a.decryption_unencrypted_frames!=null&&(b.writeFieldBegin({fname:"decryption_unencrypted_frames",ftype:(h||(h=c("ThriftTypes"))).I64,fid:77}),b.writeI64(BigInt(a.decryption_unencrypted_frames)),b.writeFieldEnd());a.encryption_total_frames!=null&&(b.writeFieldBegin({fname:"encryption_total_frames",ftype:(h||(h=c("ThriftTypes"))).I64,fid:78}),b.writeI64(BigInt(a.encryption_total_frames)),b.writeFieldEnd());a.encryption_error_frames!=null&&(b.writeFieldBegin({fname:"encryption_error_frames",ftype:(h||(h=c("ThriftTypes"))).I64,fid:79}),b.writeI64(BigInt(a.encryption_error_frames)),b.writeFieldEnd());a.encryption_escape_bytes!=null&&(b.writeFieldBegin({fname:"encryption_escape_bytes",ftype:(h||(h=c("ThriftTypes"))).I64,fid:80}),b.writeI64(BigInt(a.encryption_escape_bytes)),b.writeFieldEnd());a.encryption_total_error_frames!=null&&(b.writeFieldBegin({fname:"encryption_total_error_frames",ftype:(h||(h=c("ThriftTypes"))).I64,fid:81}),b.writeI64(BigInt(a.encryption_total_error_frames)),b.writeFieldEnd());a.encryption_error_frames_alloc!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_alloc",ftype:(h||(h=c("ThriftTypes"))).I64,fid:82}),b.writeI64(BigInt(a.encryption_error_frames_alloc)),b.writeFieldEnd());a.encryption_error_frames_invalid_params!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_invalid_params",ftype:(h||(h=c("ThriftTypes"))).I64,fid:83}),b.writeI64(BigInt(a.encryption_error_frames_invalid_params)),b.writeFieldEnd());a.encryption_error_frames_cipher!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_cipher",ftype:(h||(h=c("ThriftTypes"))).I64,fid:84}),b.writeI64(BigInt(a.encryption_error_frames_cipher)),b.writeFieldEnd());a.encryption_error_frames_parse!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_parse",ftype:(h||(h=c("ThriftTypes"))).I64,fid:85}),b.writeI64(BigInt(a.encryption_error_frames_parse)),b.writeFieldEnd());a.encryption_error_frames_invalid_key!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_invalid_key",ftype:(h||(h=c("ThriftTypes"))).I64,fid:86}),b.writeI64(BigInt(a.encryption_error_frames_invalid_key)),b.writeFieldEnd());a.encryption_error_frames_cipher_auth!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_cipher_auth",ftype:(h||(h=c("ThriftTypes"))).I64,fid:87}),b.writeI64(BigInt(a.encryption_error_frames_cipher_auth)),b.writeFieldEnd());a.encryption_error_frames_escape_data!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_escape_data",ftype:(h||(h=c("ThriftTypes"))).I64,fid:88}),b.writeI64(BigInt(a.encryption_error_frames_escape_data)),b.writeFieldEnd());a.encryption_error_frames_unsupported_codec!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_unsupported_codec",ftype:(h||(h=c("ThriftTypes"))).I64,fid:89}),b.writeI64(BigInt(a.encryption_error_frames_unsupported_codec)),b.writeFieldEnd());a.encryption_error_frames_unknown!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_unknown",ftype:(h||(h=c("ThriftTypes"))).I64,fid:90}),b.writeI64(BigInt(a.encryption_error_frames_unknown)),b.writeFieldEnd());a.decryption_total_frames_data_channel!=null&&(b.writeFieldBegin({fname:"decryption_total_frames_data_channel",ftype:(h||(h=c("ThriftTypes"))).I64,fid:91}),b.writeI64(BigInt(a.decryption_total_frames_data_channel)),b.writeFieldEnd());a.decryption_total_error_frames_data_channel!=null&&(b.writeFieldBegin({fname:"decryption_total_error_frames_data_channel",ftype:(h||(h=c("ThriftTypes"))).I64,fid:92}),b.writeI64(BigInt(a.decryption_total_error_frames_data_channel)),b.writeFieldEnd());a.decryption_error_frames_data_channel_alloc!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_data_channel_alloc",ftype:(h||(h=c("ThriftTypes"))).I64,fid:93}),b.writeI64(BigInt(a.decryption_error_frames_data_channel_alloc)),b.writeFieldEnd());a.decryption_error_frames_data_channel_invalid_params!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_data_channel_invalid_params",ftype:(h||(h=c("ThriftTypes"))).I64,fid:94}),b.writeI64(BigInt(a.decryption_error_frames_data_channel_invalid_params)),b.writeFieldEnd());a.decryption_error_frames_data_channel_cipher!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_data_channel_cipher",ftype:(h||(h=c("ThriftTypes"))).I64,fid:95}),b.writeI64(BigInt(a.decryption_error_frames_data_channel_cipher)),b.writeFieldEnd());a.decryption_error_frames_data_channel_parse!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_data_channel_parse",ftype:(h||(h=c("ThriftTypes"))).I64,fid:96}),b.writeI64(BigInt(a.decryption_error_frames_data_channel_parse)),b.writeFieldEnd());a.decryption_error_frames_data_channel_invalid_key!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_data_channel_invalid_key",ftype:(h||(h=c("ThriftTypes"))).I64,fid:97}),b.writeI64(BigInt(a.decryption_error_frames_data_channel_invalid_key)),b.writeFieldEnd());a.decryption_error_frames_data_channel_missing_key!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_data_channel_missing_key",ftype:(h||(h=c("ThriftTypes"))).I64,fid:98}),b.writeI64(BigInt(a.decryption_error_frames_data_channel_missing_key)),b.writeFieldEnd());a.decryption_error_frames_data_channel_out_of_ratchet_space!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_data_channel_out_of_ratchet_space",ftype:(h||(h=c("ThriftTypes"))).I64,fid:99}),b.writeI64(BigInt(a.decryption_error_frames_data_channel_out_of_ratchet_space)),b.writeFieldEnd());a.decryption_error_frames_data_channel_cipher_auth!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_data_channel_cipher_auth",ftype:(h||(h=c("ThriftTypes"))).I64,fid:100}),b.writeI64(BigInt(a.decryption_error_frames_data_channel_cipher_auth)),b.writeFieldEnd());a.decryption_error_frames_data_channel_frame_too_old!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_data_channel_frame_too_old",ftype:(h||(h=c("ThriftTypes"))).I64,fid:101}),b.writeI64(BigInt(a.decryption_error_frames_data_channel_frame_too_old)),b.writeFieldEnd());a.decryption_error_frames_data_channel_seen_frame!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_data_channel_seen_frame",ftype:(h||(h=c("ThriftTypes"))).I64,fid:102}),b.writeI64(BigInt(a.decryption_error_frames_data_channel_seen_frame)),b.writeFieldEnd());a.decryption_error_frames_data_channel_invalid_frame!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_data_channel_invalid_frame",ftype:(h||(h=c("ThriftTypes"))).I64,fid:103}),b.writeI64(BigInt(a.decryption_error_frames_data_channel_invalid_frame)),b.writeFieldEnd());a.decryption_error_frames_data_channel_setting_invalid_key!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_data_channel_setting_invalid_key",ftype:(h||(h=c("ThriftTypes"))).I64,fid:104}),b.writeI64(BigInt(a.decryption_error_frames_data_channel_setting_invalid_key)),b.writeFieldEnd());a.decryption_error_frames_data_channel_setting_existing_key!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_data_channel_setting_existing_key",ftype:(h||(h=c("ThriftTypes"))).I64,fid:105}),b.writeI64(BigInt(a.decryption_error_frames_data_channel_setting_existing_key)),b.writeFieldEnd());a.decryption_error_frames_data_channel_escape_data!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_data_channel_escape_data",ftype:(h||(h=c("ThriftTypes"))).I64,fid:106}),b.writeI64(BigInt(a.decryption_error_frames_data_channel_escape_data)),b.writeFieldEnd());a.decryption_error_frames_data_channel_deescape_data!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_data_channel_deescape_data",ftype:(h||(h=c("ThriftTypes"))).I64,fid:107}),b.writeI64(BigInt(a.decryption_error_frames_data_channel_deescape_data)),b.writeFieldEnd());a.decryption_error_frames_data_channel_parse_frame_or_key!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_data_channel_parse_frame_or_key",ftype:(h||(h=c("ThriftTypes"))).I64,fid:108}),b.writeI64(BigInt(a.decryption_error_frames_data_channel_parse_frame_or_key)),b.writeFieldEnd());a.decryption_error_frames_data_channel_unknown!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_data_channel_unknown",ftype:(h||(h=c("ThriftTypes"))).I64,fid:109}),b.writeI64(BigInt(a.decryption_error_frames_data_channel_unknown)),b.writeFieldEnd());a.decryption_unencrypted_frames_data_channel!=null&&(b.writeFieldBegin({fname:"decryption_unencrypted_frames_data_channel",ftype:(h||(h=c("ThriftTypes"))).I64,fid:110}),b.writeI64(BigInt(a.decryption_unencrypted_frames_data_channel)),b.writeFieldEnd());a.encryption_total_frames_data_channel!=null&&(b.writeFieldBegin({fname:"encryption_total_frames_data_channel",ftype:(h||(h=c("ThriftTypes"))).I64,fid:111}),b.writeI64(BigInt(a.encryption_total_frames_data_channel)),b.writeFieldEnd());a.encryption_error_frames_data_channel!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_data_channel",ftype:(h||(h=c("ThriftTypes"))).I64,fid:112}),b.writeI64(BigInt(a.encryption_error_frames_data_channel)),b.writeFieldEnd());a.encryption_total_error_frames_data_channel!=null&&(b.writeFieldBegin({fname:"encryption_total_error_frames_data_channel",ftype:(h||(h=c("ThriftTypes"))).I64,fid:113}),b.writeI64(BigInt(a.encryption_total_error_frames_data_channel)),b.writeFieldEnd());a.encryption_error_frames_data_channel_alloc!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_data_channel_alloc",ftype:(h||(h=c("ThriftTypes"))).I64,fid:114}),b.writeI64(BigInt(a.encryption_error_frames_data_channel_alloc)),b.writeFieldEnd());a.encryption_error_frames_data_channel_invalid_params!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_data_channel_invalid_params",ftype:(h||(h=c("ThriftTypes"))).I64,fid:115}),b.writeI64(BigInt(a.encryption_error_frames_data_channel_invalid_params)),b.writeFieldEnd());a.encryption_error_frames_data_channel_cipher!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_data_channel_cipher",ftype:(h||(h=c("ThriftTypes"))).I64,fid:116}),b.writeI64(BigInt(a.encryption_error_frames_data_channel_cipher)),b.writeFieldEnd());a.encryption_error_frames_data_channel_parse!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_data_channel_parse",ftype:(h||(h=c("ThriftTypes"))).I64,fid:117}),b.writeI64(BigInt(a.encryption_error_frames_data_channel_parse)),b.writeFieldEnd());a.encryption_error_frames_data_channel_invalid_key!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_data_channel_invalid_key",ftype:(h||(h=c("ThriftTypes"))).I64,fid:118}),b.writeI64(BigInt(a.encryption_error_frames_data_channel_invalid_key)),b.writeFieldEnd());a.encryption_error_frames_data_channel_cipher_auth!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_data_channel_cipher_auth",ftype:(h||(h=c("ThriftTypes"))).I64,fid:119}),b.writeI64(BigInt(a.encryption_error_frames_data_channel_cipher_auth)),b.writeFieldEnd());a.encryption_error_frames_data_channel_escape_data!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_data_channel_escape_data",ftype:(h||(h=c("ThriftTypes"))).I64,fid:120}),b.writeI64(BigInt(a.encryption_error_frames_data_channel_escape_data)),b.writeFieldEnd());a.encryption_error_frames_data_channel_unsupported_codec!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_data_channel_unsupported_codec",ftype:(h||(h=c("ThriftTypes"))).I64,fid:121}),b.writeI64(BigInt(a.encryption_error_frames_data_channel_unsupported_codec)),b.writeFieldEnd());a.encryption_error_frames_data_channel_unknown!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_data_channel_unknown",ftype:(h||(h=c("ThriftTypes"))).I64,fid:122}),b.writeI64(BigInt(a.encryption_error_frames_data_channel_unknown)),b.writeFieldEnd());a.num_removed_data_decryptors!=null&&(b.writeFieldBegin({fname:"num_removed_data_decryptors",ftype:(h||(h=c("ThriftTypes"))).I64,fid:123}),b.writeI64(BigInt(a.num_removed_data_decryptors)),b.writeFieldEnd());a.num_frame_decryptor_with_unencrypted_data!=null&&(b.writeFieldBegin({fname:"num_frame_decryptor_with_unencrypted_data",ftype:(h||(h=c("ThriftTypes"))).I64,fid:124}),b.writeI64(BigInt(a.num_frame_decryptor_with_unencrypted_data)),b.writeFieldEnd());a.num_removed_decryptors!=null&&(b.writeFieldBegin({fname:"num_removed_decryptors",ftype:(h||(h=c("ThriftTypes"))).I64,fid:125}),b.writeI64(BigInt(a.num_removed_decryptors)),b.writeFieldEnd());a.data_channel_encryption_not_ready_in_mandated_calls_error!=null&&(b.writeFieldBegin({fname:"data_channel_encryption_not_ready_in_mandated_calls_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:126}),b.writeI64(BigInt(a.data_channel_encryption_not_ready_in_mandated_calls_error)),b.writeFieldEnd());a.num_e2ee_message_total_encrypt!=null&&(b.writeFieldBegin({fname:"num_e2ee_message_total_encrypt",ftype:(h||(h=c("ThriftTypes"))).I64,fid:127}),b.writeI64(BigInt(a.num_e2ee_message_total_encrypt)),b.writeFieldEnd());a.num_e2ee_message_error_encrypt!=null&&(b.writeFieldBegin({fname:"num_e2ee_message_error_encrypt",ftype:(h||(h=c("ThriftTypes"))).I64,fid:128}),b.writeI64(BigInt(a.num_e2ee_message_error_encrypt)),b.writeFieldEnd());a.num_e2ee_message_total_decrypt!=null&&(b.writeFieldBegin({fname:"num_e2ee_message_total_decrypt",ftype:(h||(h=c("ThriftTypes"))).I64,fid:129}),b.writeI64(BigInt(a.num_e2ee_message_total_decrypt)),b.writeFieldEnd());a.num_e2ee_message_error_decrypt!=null&&(b.writeFieldBegin({fname:"num_e2ee_message_error_decrypt",ftype:(h||(h=c("ThriftTypes"))).I64,fid:130}),b.writeI64(BigInt(a.num_e2ee_message_error_decrypt)),b.writeFieldEnd());a.negotiate_off_time!=null&&(b.writeFieldBegin({fname:"negotiate_off_time",ftype:(h||(h=c("ThriftTypes"))).I64,fid:131}),b.writeI64(BigInt(a.negotiate_off_time)),b.writeFieldEnd());a.negotiated_version!=null&&(b.writeFieldBegin({fname:"negotiated_version",ftype:(h||(h=c("ThriftTypes"))).I64,fid:132}),b.writeI64(BigInt(a.negotiated_version)),b.writeFieldEnd());a.decryptor_removed_time!=null&&(b.writeFieldBegin({fname:"decryptor_removed_time",ftype:(h||(h=c("ThriftTypes"))).I64,fid:133}),b.writeI64(BigInt(a.decryptor_removed_time)),b.writeFieldEnd());a.is_e2ee_mandated_group!=null&&(b.writeFieldBegin({fname:"is_e2ee_mandated_group",ftype:(h||(h=c("ThriftTypes"))).I64,fid:134}),b.writeI64(BigInt(a.is_e2ee_mandated_group)),b.writeFieldEnd());if(a.events!=null){b.writeFieldBegin({fname:"events",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:135});b.writeListBegin({etype:h.I64,size:a.events.length});for(var d of a.events)b.writeI64(BigInt(d));b.writeListEnd();b.writeFieldEnd()}a.num_e2ee_message_received!=null&&(b.writeFieldBegin({fname:"num_e2ee_message_received",ftype:(h||(h=c("ThriftTypes"))).I64,fid:136}),b.writeI64(BigInt(a.num_e2ee_message_received)),b.writeFieldEnd());a.num_e2ee_message_error_decrypt_non_e2ee_received!=null&&(b.writeFieldBegin({fname:"num_e2ee_message_error_decrypt_non_e2ee_received",ftype:(h||(h=c("ThriftTypes"))).I64,fid:137}),b.writeI64(BigInt(a.num_e2ee_message_error_decrypt_non_e2ee_received)),b.writeFieldEnd());a.num_e2ee_message_error_decrypt_missing_sender!=null&&(b.writeFieldBegin({fname:"num_e2ee_message_error_decrypt_missing_sender",ftype:(h||(h=c("ThriftTypes"))).I64,fid:138}),b.writeI64(BigInt(a.num_e2ee_message_error_decrypt_missing_sender)),b.writeFieldEnd());a.num_e2ee_message_error_decrypt_exceeding_retry!=null&&(b.writeFieldBegin({fname:"num_e2ee_message_error_decrypt_exceeding_retry",ftype:(h||(h=c("ThriftTypes"))).I64,fid:139}),b.writeI64(BigInt(a.num_e2ee_message_error_decrypt_exceeding_retry)),b.writeFieldEnd());a.max_media_channel_key_message_retry_count!=null&&(b.writeFieldBegin({fname:"max_media_channel_key_message_retry_count",ftype:(h||(h=c("ThriftTypes"))).I64,fid:140}),b.writeI64(BigInt(a.max_media_channel_key_message_retry_count)),b.writeFieldEnd());a.g_e2ee_total_count_of_extra_decryptions!=null&&(b.writeFieldBegin({fname:"g_e2ee_total_count_of_extra_decryptions",ftype:(h||(h=c("ThriftTypes"))).I64,fid:141}),b.writeI64(BigInt(a.g_e2ee_total_count_of_extra_decryptions)),b.writeFieldEnd());a.g_e2ee_total_count_of_extra_decryptions_failures!=null&&(b.writeFieldBegin({fname:"g_e2ee_total_count_of_extra_decryptions_failures",ftype:(h||(h=c("ThriftTypes"))).I64,fid:142}),b.writeI64(BigInt(a.g_e2ee_total_count_of_extra_decryptions_failures)),b.writeFieldEnd());a.g_e2ee_total_count_of_extra_decryptions_failures_due_to_missing_key!=null&&(b.writeFieldBegin({fname:"g_e2ee_total_count_of_extra_decryptions_failures_due_to_missing_key",ftype:(h||(h=c("ThriftTypes"))).I64,fid:143}),b.writeI64(BigInt(a.g_e2ee_total_count_of_extra_decryptions_failures_due_to_missing_key)),b.writeFieldEnd());a.g_e2ee_decryption_error_frames_empty_supported_codes!=null&&(b.writeFieldBegin({fname:"g_e2ee_decryption_error_frames_empty_supported_codes",ftype:(h||(h=c("ThriftTypes"))).I64,fid:144}),b.writeI64(BigInt(a.g_e2ee_decryption_error_frames_empty_supported_codes)),b.writeFieldEnd());a.g_e2ee_encryption_error_frames_empty!=null&&(b.writeFieldBegin({fname:"g_e2ee_encryption_error_frames_empty",ftype:(h||(h=c("ThriftTypes"))).I64,fid:146}),b.writeI64(BigInt(a.g_e2ee_encryption_error_frames_empty)),b.writeFieldEnd());a.g_e2ee_encryption_error_frames_empty_nalu_blocks!=null&&(b.writeFieldBegin({fname:"g_e2ee_encryption_error_frames_empty_nalu_blocks",ftype:(h||(h=c("ThriftTypes"))).I64,fid:147}),b.writeI64(BigInt(a.g_e2ee_encryption_error_frames_empty_nalu_blocks)),b.writeFieldEnd());a.g_e2ee_encryption_error_frames_invalid_h264!=null&&(b.writeFieldBegin({fname:"g_e2ee_encryption_error_frames_invalid_h264",ftype:(h||(h=c("ThriftTypes"))).I64,fid:148}),b.writeI64(BigInt(a.g_e2ee_encryption_error_frames_invalid_h264)),b.writeFieldEnd());a.g_e2ee_encryption_error_frames_invalid_h265!=null&&(b.writeFieldBegin({fname:"g_e2ee_encryption_error_frames_invalid_h265",ftype:(h||(h=c("ThriftTypes"))).I64,fid:149}),b.writeI64(BigInt(a.g_e2ee_encryption_error_frames_invalid_h265)),b.writeFieldEnd());a.g_e2ee_encryption_error_frames_invalid_h265_nalu_block!=null&&(b.writeFieldBegin({fname:"g_e2ee_encryption_error_frames_invalid_h265_nalu_block",ftype:(h||(h=c("ThriftTypes"))).I64,fid:150}),b.writeI64(BigInt(a.g_e2ee_encryption_error_frames_invalid_h265_nalu_block)),b.writeFieldEnd());a.g_e2ee_total_count_of_extra_encryptions!=null&&(b.writeFieldBegin({fname:"g_e2ee_total_count_of_extra_encryptions",ftype:(h||(h=c("ThriftTypes"))).I64,fid:151}),b.writeI64(BigInt(a.g_e2ee_total_count_of_extra_encryptions)),b.writeFieldEnd());a.g_e2ee_total_count_of_extra_encryptions_failures!=null&&(b.writeFieldBegin({fname:"g_e2ee_total_count_of_extra_encryptions_failures",ftype:(h||(h=c("ThriftTypes"))).I64,fid:152}),b.writeI64(BigInt(a.g_e2ee_total_count_of_extra_encryptions_failures)),b.writeFieldEnd());a.encryption_error_frames_no_active_key!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_no_active_key",ftype:(h||(h=c("ThriftTypes"))).I64,fid:153}),b.writeI64(BigInt(a.encryption_error_frames_no_active_key)),b.writeFieldEnd());a.key_negotiation_protocol!=null&&(b.writeFieldBegin({fname:"key_negotiation_protocol",ftype:(h||(h=c("ThriftTypes"))).I64,fid:154}),b.writeI64(BigInt(a.key_negotiation_protocol)),b.writeFieldEnd());a.key_messages_received_via_signaling!=null&&(b.writeFieldBegin({fname:"key_messages_received_via_signaling",ftype:(h||(h=c("ThriftTypes"))).I64,fid:155}),b.writeI64(BigInt(a.key_messages_received_via_signaling)),b.writeFieldEnd());a.key_messages_received_via_media!=null&&(b.writeFieldBegin({fname:"key_messages_received_via_media",ftype:(h||(h=c("ThriftTypes"))).I64,fid:156}),b.writeI64(BigInt(a.key_messages_received_via_media)),b.writeFieldEnd());a.key_messages_received_via_signaling_joiner!=null&&(b.writeFieldBegin({fname:"key_messages_received_via_signaling_joiner",ftype:(h||(h=c("ThriftTypes"))).I64,fid:157}),b.writeI64(BigInt(a.key_messages_received_via_signaling_joiner)),b.writeFieldEnd());a.key_messages_received_via_media_joiner!=null&&(b.writeFieldBegin({fname:"key_messages_received_via_media_joiner",ftype:(h||(h=c("ThriftTypes"))).I64,fid:158}),b.writeI64(BigInt(a.key_messages_received_via_media_joiner)),b.writeFieldEnd());a.g_e2ee_participant_hash_verification_failed_error!=null&&(b.writeFieldBegin({fname:"g_e2ee_participant_hash_verification_failed_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:159}),b.writeI64(BigInt(a.g_e2ee_participant_hash_verification_failed_error)),b.writeFieldEnd());a.g_e2ee_invalid_key_distributor_id_error!=null&&(b.writeFieldBegin({fname:"g_e2ee_invalid_key_distributor_id_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:160}),b.writeI64(BigInt(a.g_e2ee_invalid_key_distributor_id_error)),b.writeFieldEnd());a.g_e2ee_key_message_validation_failure_count!=null&&(b.writeFieldBegin({fname:"g_e2ee_key_message_validation_failure_count",ftype:(h||(h=c("ThriftTypes"))).I64,fid:161}),b.writeI64(BigInt(a.g_e2ee_key_message_validation_failure_count)),b.writeFieldEnd());a.g_e2ee_cached_decrypted_key_count!=null&&(b.writeFieldBegin({fname:"g_e2ee_cached_decrypted_key_count",ftype:(h||(h=c("ThriftTypes"))).I64,fid:162}),b.writeI64(BigInt(a.g_e2ee_cached_decrypted_key_count)),b.writeFieldEnd());a.g_e2ee_reapply_cached_decrypted_key_count!=null&&(b.writeFieldBegin({fname:"g_e2ee_reapply_cached_decrypted_key_count",ftype:(h||(h=c("ThriftTypes"))).I64,fid:163}),b.writeI64(BigInt(a.g_e2ee_reapply_cached_decrypted_key_count)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function b(a,b){b.writeStructBegin("E2eeMetrics");b.writeFieldBegin({fname:"p2p_e2ee",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1});if(a.p2p_e2ee!=null)k(a.p2p_e2ee,b);else{var d=i();k(d,b)}b.writeFieldEnd();b.writeFieldBegin({fname:"group_e2ee",ftype:h.STRUCT,fid:2});if(a.group_e2ee!=null)l(a.group_e2ee,b);else{d=j();l(d,b)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function m(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.engine_type=a.readI64().toString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I64?b.status=a.readI64().toString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).I64?b.version=a.readI64().toString():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).I64?b.gen_prekey_bundle_time_ms=a.readI64().toString():a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).I64?b.encrypted_msg_time_ms=a.readI64().toString():a.skip(e);break;case 6:e===(h||(h=c("ThriftTypes"))).I64?b.decrypted_msg_time_ms=a.readI64().toString():a.skip(e);break;case 7:e===(h||(h=c("ThriftTypes"))).I64?b.process_sdp_crypto_time_ms=a.readI64().toString():a.skip(e);break;case 8:e===(h||(h=c("ThriftTypes"))).I64?b.create_crypto_offer_time_ms=a.readI64().toString():a.skip(e);break;case 9:e===(h||(h=c("ThriftTypes"))).I64?b.create_crypto_answer_time_ms=a.readI64().toString():a.skip(e);break;case 10:e===(h||(h=c("ThriftTypes"))).I64?b.get_ik_time_ms=a.readI64().toString():a.skip(e);break;case 11:e===(h||(h=c("ThriftTypes"))).I64?b.peer_id=a.readI64().toString():a.skip(e);break;case 12:e===(h||(h=c("ThriftTypes"))).I64?b.peer_connection_index=a.readI64().toString():a.skip(e);break;case 13:e===(h||(h=c("ThriftTypes"))).I64?b.srtp_crypto_suite=a.readI64().toString():a.skip(e);break;case 14:e===(h||(h=c("ThriftTypes"))).I64?b.engine_error=a.readI64().toString():a.skip(e);break;case 15:e===(h||(h=c("ThriftTypes"))).I64?b.libsignal_error=a.readI64().toString():a.skip(e);break;case 16:e===(h||(h=c("ThriftTypes"))).I64?b.identity_key_mode=a.readI64().toString():a.skip(e);break;case 17:e===(h||(h=c("ThriftTypes"))).I64?b.identity_key_num_persistent=a.readI64().toString():a.skip(e);break;case 18:e===(h||(h=c("ThriftTypes"))).I64?b.identity_key_num_validated=a.readI64().toString():a.skip(e);break;case 19:e===(h||(h=c("ThriftTypes"))).I64?b.identity_key_num_saved=a.readI64().toString():a.skip(e);break;case 20:e===(h||(h=c("ThriftTypes"))).I64?b.identity_key_num_existing=a.readI64().toString():a.skip(e);break;case 21:e===(h||(h=c("ThriftTypes"))).I64?b.is_e2ee_mandated=a.readI64().toString():a.skip(e);break;case 22:e===(h||(h=c("ThriftTypes"))).I64?b.local_trace_id=a.readI64().toString():a.skip(e);break;case 23:e===(h||(h=c("ThriftTypes"))).I64?b.remote_trace_id=a.readI64().toString():a.skip(e);break;case 24:e===(h||(h=c("ThriftTypes"))).I64?b.local_device_id=a.readI64().toString():a.skip(e);break;case 25:e===(h||(h=c("ThriftTypes"))).I64?b.remote_device_id=a.readI64().toString():a.skip(e);break;case 26:if(e===(h||(h=c("ThriftTypes"))).LIST){b.events=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=a.readI64().toString();b.events.push(g)}}else a.skip(e);break;case 27:e===(h||(h=c("ThriftTypes"))).I64?b.gen_dtls_auth_info_status=a.readI64().toString():a.skip(e);break;case 28:e===(h||(h=c("ThriftTypes"))).I64?b.gen_dtls_auth_info_libsignal_status=a.readI64().toString():a.skip(e);break;case 29:e===(h||(h=c("ThriftTypes"))).I64?b.gen_dtls_auth_info_time_ms=a.readI64().toString():a.skip(e);break;case 30:e===(h||(h=c("ThriftTypes"))).I64?b.verify_dtls_auth_info_status=a.readI64().toString():a.skip(e);break;case 31:e===(h||(h=c("ThriftTypes"))).I64?b.verify_dtls_auth_info_libsignal_status=a.readI64().toString():a.skip(e);break;case 32:e===(h||(h=c("ThriftTypes"))).I64?b.verify_dtls_auth_info_time_ms=a.readI64().toString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function n(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.received_key_message_counter=a.readI64().toString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I64?b.sent_key_message_counter=a.readI64().toString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).I64?b.cached_key_message_counter=a.readI64().toString():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).I64?b.used_cached_key_counter=a.readI64().toString():a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).I64?b.unused_smu_counter=a.readI64().toString():a.skip(e);break;case 6:e===(h||(h=c("ThriftTypes"))).I64?b.missing_key_message_counter=a.readI64().toString():a.skip(e);break;case 7:e===(h||(h=c("ThriftTypes"))).I64?b.negotiate_off_status=a.readI64().toString():a.skip(e);break;case 8:e===(h||(h=c("ThriftTypes"))).I64?b.cipher_suite_status=a.readI64().toString():a.skip(e);break;case 9:e===(h||(h=c("ThriftTypes"))).I64?b.decrypt_used_cached_session_counter=a.readI64().toString():a.skip(e);break;case 10:e===(h||(h=c("ThriftTypes"))).I64?b.encrypt_used_cached_session_counter=a.readI64().toString():a.skip(e);break;case 11:e===(h||(h=c("ThriftTypes"))).I64?b.sent_ack_message_counter=a.readI64().toString():a.skip(e);break;case 12:e===(h||(h=c("ThriftTypes"))).I64?b.reuse_ackd_uid_counter=a.readI64().toString():a.skip(e);break;case 13:e===(h||(h=c("ThriftTypes"))).I64?b.total_uids_created_counter=a.readI64().toString():a.skip(e);break;case 14:e===(h||(h=c("ThriftTypes"))).I64?b.generate_chain_key_failed_error=a.readI64().toString():a.skip(e);break;case 15:e===(h||(h=c("ThriftTypes"))).I64?b.set_chain_key_failed_error=a.readI64().toString():a.skip(e);break;case 16:e===(h||(h=c("ThriftTypes"))).I64?b.key_provider_not_found_error=a.readI64().toString():a.skip(e);break;case 17:e===(h||(h=c("ThriftTypes"))).I64?b.key_message_parse_failed_error=a.readI64().toString():a.skip(e);break;case 18:e===(h||(h=c("ThriftTypes"))).I64?b.empty_pkb_result_error=a.readI64().toString():a.skip(e);break;case 19:e===(h||(h=c("ThriftTypes"))).I64?b.empty_encrypt_result_error=a.readI64().toString():a.skip(e);break;case 20:e===(h||(h=c("ThriftTypes"))).I64?b.empty_decrypt_result_error=a.readI64().toString():a.skip(e);break;case 21:e===(h||(h=c("ThriftTypes"))).I64?b.empty_version_error=a.readI64().toString():a.skip(e);break;case 22:e===(h||(h=c("ThriftTypes"))).I64?b.unsupported_version_error=a.readI64().toString():a.skip(e);break;case 23:e===(h||(h=c("ThriftTypes"))).I64?b.midcall_version_change_error=a.readI64().toString():a.skip(e);break;case 24:e===(h||(h=c("ThriftTypes"))).I64?b.inconsistent_remote_maps_error=a.readI64().toString():a.skip(e);break;case 25:e===(h||(h=c("ThriftTypes"))).I64?b.key_message_pkb_mismatch_error=a.readI64().toString():a.skip(e);break;case 26:e===(h||(h=c("ThriftTypes"))).I64?b.no_key_or_ack_in_e2ee_message_error=a.readI64().toString():a.skip(e);break;case 27:e===(h||(h=c("ThriftTypes"))).I64?b.receiver_key_provider_not_found_error=a.readI64().toString():a.skip(e);break;case 28:e===(h||(h=c("ThriftTypes"))).I64?b.pkb_parse_failed_error=a.readI64().toString():a.skip(e);break;case 29:e===(h||(h=c("ThriftTypes"))).I64?b.message_deserialized_failed_error=a.readI64().toString():a.skip(e);break;case 30:e===(h||(h=c("ThriftTypes"))).I64?b.decrypt_no_identity_key_and_cached_session_not_used_error=a.readI64().toString():a.skip(e);break;case 31:e===(h||(h=c("ThriftTypes"))).I64?b.encrypt_no_identity_key_and_cached_session_not_used_error=a.readI64().toString():a.skip(e);break;case 32:e===(h||(h=c("ThriftTypes"))).I64?b.decrypt_ack_wrong_message_error=a.readI64().toString():a.skip(e);break;case 33:e===(h||(h=c("ThriftTypes"))).I64?b.invalid_uid_received_error=a.readI64().toString():a.skip(e);break;case 34:e===(h||(h=c("ThriftTypes"))).I64?b.ack_for_absent_user=a.readI64().toString():a.skip(e);break;case 35:e===(h||(h=c("ThriftTypes"))).I64?b.uid_not_awaiting_ack_error=a.readI64().toString():a.skip(e);break;case 36:e===(h||(h=c("ThriftTypes"))).I64?b.decrypt_ack_error=a.readI64().toString():a.skip(e);break;case 37:e===(h||(h=c("ThriftTypes"))).I64?b.empty_decrypt_result_ack_error=a.readI64().toString():a.skip(e);break;case 38:e===(h||(h=c("ThriftTypes"))).I64?b.decrypt_ack_cached_session_not_used_error=a.readI64().toString():a.skip(e);break;case 39:e===(h||(h=c("ThriftTypes"))).I64?b.encrypt_ack_error=a.readI64().toString():a.skip(e);break;case 40:e===(h||(h=c("ThriftTypes"))).I64?b.empty_encrypt_result_ack_error=a.readI64().toString():a.skip(e);break;case 41:e===(h||(h=c("ThriftTypes"))).I64?b.invalid_message_type_error=a.readI64().toString():a.skip(e);break;case 42:e===(h||(h=c("ThriftTypes"))).I64?b.server_state_deserialized_failed_error=a.readI64().toString():a.skip(e);break;case 43:e===(h||(h=c("ThriftTypes"))).I64?b.crypto_engine_failure_error=a.readI64().toString():a.skip(e);break;case 44:e===(h||(h=c("ThriftTypes"))).I64?b.empty_e2ee_client_state_error=a.readI64().toString():a.skip(e);break;case 45:e===(h||(h=c("ThriftTypes"))).I64?b.group_e2ee_negotiated=a.readI64().toString():a.skip(e);break;case 46:e===(h||(h=c("ThriftTypes"))).I64?b.negotiation_mode_kn=a.readI64().toString():a.skip(e);break;case 47:e===(h||(h=c("ThriftTypes"))).I64?b.group_e2ee_setup_status=a.readI64().toString():a.skip(e);break;case 48:e===(h||(h=c("ThriftTypes"))).I64?b.enable_group_e2ee=a.readI64().toString():a.skip(e);break;case 49:e===(h||(h=c("ThriftTypes"))).I64?b.identity_key_mode_group=a.readI64().toString():a.skip(e);break;case 50:e===(h||(h=c("ThriftTypes"))).I64?b.identity_key_num_persistent_group=a.readI64().toString():a.skip(e);break;case 51:e===(h||(h=c("ThriftTypes"))).I64?b.identity_key_num_validated_group=a.readI64().toString():a.skip(e);break;case 52:e===(h||(h=c("ThriftTypes"))).I64?b.identity_key_num_saved_group=a.readI64().toString():a.skip(e);break;case 53:e===(h||(h=c("ThriftTypes"))).I64?b.identity_key_num_existing_group=a.readI64().toString():a.skip(e);break;case 54:e===(h||(h=c("ThriftTypes"))).I64?b.max_key_message_latency_ms=a.readI64().toString():a.skip(e);break;case 55:e===(h||(h=c("ThriftTypes"))).I64?b.max_key_message_latency_ms_joiner=a.readI64().toString():a.skip(e);break;case 56:e===(h||(h=c("ThriftTypes"))).I64?b.max_smu_to_key_message_latency_ms=a.readI64().toString():a.skip(e);break;case 57:e===(h||(h=c("ThriftTypes"))).I64?b.process_smu_time_ms=a.readI64().toString():a.skip(e);break;case 58:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_total_frames=a.readI64().toString():a.skip(e);break;case 59:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_total_error_frames=a.readI64().toString():a.skip(e);break;case 60:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_alloc=a.readI64().toString():a.skip(e);break;case 61:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_invalid_params=a.readI64().toString():a.skip(e);break;case 62:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_cipher=a.readI64().toString():a.skip(e);break;case 63:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_parse=a.readI64().toString():a.skip(e);break;case 64:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_invalid_key=a.readI64().toString():a.skip(e);break;case 65:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_missing_key=a.readI64().toString():a.skip(e);break;case 66:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_out_of_ratchet_space=a.readI64().toString():a.skip(e);break;case 67:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_cipher_auth=a.readI64().toString():a.skip(e);break;case 68:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_frame_too_old=a.readI64().toString():a.skip(e);break;case 69:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_seen_frame=a.readI64().toString():a.skip(e);break;case 70:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_invalid_frame=a.readI64().toString():a.skip(e);break;case 71:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_setting_invalid_key=a.readI64().toString():a.skip(e);break;case 72:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_setting_existing_key=a.readI64().toString():a.skip(e);break;case 73:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_escape_data=a.readI64().toString():a.skip(e);break;case 74:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_deescape_data=a.readI64().toString():a.skip(e);break;case 75:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_parse_frame_or_key=a.readI64().toString():a.skip(e);break;case 76:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_unknown=a.readI64().toString():a.skip(e);break;case 77:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_unencrypted_frames=a.readI64().toString():a.skip(e);break;case 78:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_total_frames=a.readI64().toString():a.skip(e);break;case 79:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames=a.readI64().toString():a.skip(e);break;case 80:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_escape_bytes=a.readI64().toString():a.skip(e);break;case 81:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_total_error_frames=a.readI64().toString():a.skip(e);break;case 82:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_alloc=a.readI64().toString():a.skip(e);break;case 83:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_invalid_params=a.readI64().toString():a.skip(e);break;case 84:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_cipher=a.readI64().toString():a.skip(e);break;case 85:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_parse=a.readI64().toString():a.skip(e);break;case 86:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_invalid_key=a.readI64().toString():a.skip(e);break;case 87:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_cipher_auth=a.readI64().toString():a.skip(e);break;case 88:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_escape_data=a.readI64().toString():a.skip(e);break;case 89:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_unsupported_codec=a.readI64().toString():a.skip(e);break;case 90:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_unknown=a.readI64().toString():a.skip(e);break;case 91:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_total_frames_data_channel=a.readI64().toString():a.skip(e);break;case 92:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_total_error_frames_data_channel=a.readI64().toString():a.skip(e);break;case 93:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_data_channel_alloc=a.readI64().toString():a.skip(e);break;case 94:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_data_channel_invalid_params=a.readI64().toString():a.skip(e);break;case 95:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_data_channel_cipher=a.readI64().toString():a.skip(e);break;case 96:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_data_channel_parse=a.readI64().toString():a.skip(e);break;case 97:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_data_channel_invalid_key=a.readI64().toString():a.skip(e);break;case 98:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_data_channel_missing_key=a.readI64().toString():a.skip(e);break;case 99:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_data_channel_out_of_ratchet_space=a.readI64().toString():a.skip(e);break;case 100:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_data_channel_cipher_auth=a.readI64().toString():a.skip(e);break;case 101:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_data_channel_frame_too_old=a.readI64().toString():a.skip(e);break;case 102:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_data_channel_seen_frame=a.readI64().toString():a.skip(e);break;case 103:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_data_channel_invalid_frame=a.readI64().toString():a.skip(e);break;case 104:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_data_channel_setting_invalid_key=a.readI64().toString():a.skip(e);break;case 105:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_data_channel_setting_existing_key=a.readI64().toString():a.skip(e);break;case 106:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_data_channel_escape_data=a.readI64().toString():a.skip(e);break;case 107:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_data_channel_deescape_data=a.readI64().toString():a.skip(e);break;case 108:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_data_channel_parse_frame_or_key=a.readI64().toString():a.skip(e);break;case 109:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_data_channel_unknown=a.readI64().toString():a.skip(e);break;case 110:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_unencrypted_frames_data_channel=a.readI64().toString():a.skip(e);break;case 111:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_total_frames_data_channel=a.readI64().toString():a.skip(e);break;case 112:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_data_channel=a.readI64().toString():a.skip(e);break;case 113:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_total_error_frames_data_channel=a.readI64().toString():a.skip(e);break;case 114:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_data_channel_alloc=a.readI64().toString():a.skip(e);break;case 115:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_data_channel_invalid_params=a.readI64().toString():a.skip(e);break;case 116:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_data_channel_cipher=a.readI64().toString():a.skip(e);break;case 117:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_data_channel_parse=a.readI64().toString():a.skip(e);break;case 118:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_data_channel_invalid_key=a.readI64().toString():a.skip(e);break;case 119:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_data_channel_cipher_auth=a.readI64().toString():a.skip(e);break;case 120:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_data_channel_escape_data=a.readI64().toString():a.skip(e);break;case 121:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_data_channel_unsupported_codec=a.readI64().toString():a.skip(e);break;case 122:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_data_channel_unknown=a.readI64().toString():a.skip(e);break;case 123:e===(h||(h=c("ThriftTypes"))).I64?b.num_removed_data_decryptors=a.readI64().toString():a.skip(e);break;case 124:e===(h||(h=c("ThriftTypes"))).I64?b.num_frame_decryptor_with_unencrypted_data=a.readI64().toString():a.skip(e);break;case 125:e===(h||(h=c("ThriftTypes"))).I64?b.num_removed_decryptors=a.readI64().toString():a.skip(e);break;case 126:e===(h||(h=c("ThriftTypes"))).I64?b.data_channel_encryption_not_ready_in_mandated_calls_error=a.readI64().toString():a.skip(e);break;case 127:e===(h||(h=c("ThriftTypes"))).I64?b.num_e2ee_message_total_encrypt=a.readI64().toString():a.skip(e);break;case 128:e===(h||(h=c("ThriftTypes"))).I64?b.num_e2ee_message_error_encrypt=a.readI64().toString():a.skip(e);break;case 129:e===(h||(h=c("ThriftTypes"))).I64?b.num_e2ee_message_total_decrypt=a.readI64().toString():a.skip(e);break;case 130:e===(h||(h=c("ThriftTypes"))).I64?b.num_e2ee_message_error_decrypt=a.readI64().toString():a.skip(e);break;case 131:e===(h||(h=c("ThriftTypes"))).I64?b.negotiate_off_time=a.readI64().toString():a.skip(e);break;case 132:e===(h||(h=c("ThriftTypes"))).I64?b.negotiated_version=a.readI64().toString():a.skip(e);break;case 133:e===(h||(h=c("ThriftTypes"))).I64?b.decryptor_removed_time=a.readI64().toString():a.skip(e);break;case 134:e===(h||(h=c("ThriftTypes"))).I64?b.is_e2ee_mandated_group=a.readI64().toString():a.skip(e);break;case 135:if(e===(h||(h=c("ThriftTypes"))).LIST){b.events=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=a.readI64().toString();b.events.push(g)}}else a.skip(e);break;case 136:e===(h||(h=c("ThriftTypes"))).I64?b.num_e2ee_message_received=a.readI64().toString():a.skip(e);break;case 137:e===(h||(h=c("ThriftTypes"))).I64?b.num_e2ee_message_error_decrypt_non_e2ee_received=a.readI64().toString():a.skip(e);break;case 138:e===(h||(h=c("ThriftTypes"))).I64?b.num_e2ee_message_error_decrypt_missing_sender=a.readI64().toString():a.skip(e);break;case 139:e===(h||(h=c("ThriftTypes"))).I64?b.num_e2ee_message_error_decrypt_exceeding_retry=a.readI64().toString():a.skip(e);break;case 140:e===(h||(h=c("ThriftTypes"))).I64?b.max_media_channel_key_message_retry_count=a.readI64().toString():a.skip(e);break;case 141:e===(h||(h=c("ThriftTypes"))).I64?b.g_e2ee_total_count_of_extra_decryptions=a.readI64().toString():a.skip(e);break;case 142:e===(h||(h=c("ThriftTypes"))).I64?b.g_e2ee_total_count_of_extra_decryptions_failures=a.readI64().toString():a.skip(e);break;case 143:e===(h||(h=c("ThriftTypes"))).I64?b.g_e2ee_total_count_of_extra_decryptions_failures_due_to_missing_key=a.readI64().toString():a.skip(e);break;case 144:e===(h||(h=c("ThriftTypes"))).I64?b.g_e2ee_decryption_error_frames_empty_supported_codes=a.readI64().toString():a.skip(e);break;case 146:e===(h||(h=c("ThriftTypes"))).I64?b.g_e2ee_encryption_error_frames_empty=a.readI64().toString():a.skip(e);break;case 147:e===(h||(h=c("ThriftTypes"))).I64?b.g_e2ee_encryption_error_frames_empty_nalu_blocks=a.readI64().toString():a.skip(e);break;case 148:e===(h||(h=c("ThriftTypes"))).I64?b.g_e2ee_encryption_error_frames_invalid_h264=a.readI64().toString():a.skip(e);break;case 149:e===(h||(h=c("ThriftTypes"))).I64?b.g_e2ee_encryption_error_frames_invalid_h265=a.readI64().toString():a.skip(e);break;case 150:e===(h||(h=c("ThriftTypes"))).I64?b.g_e2ee_encryption_error_frames_invalid_h265_nalu_block=a.readI64().toString():a.skip(e);break;case 151:e===(h||(h=c("ThriftTypes"))).I64?b.g_e2ee_total_count_of_extra_encryptions=a.readI64().toString():a.skip(e);break;case 152:e===(h||(h=c("ThriftTypes"))).I64?b.g_e2ee_total_count_of_extra_encryptions_failures=a.readI64().toString():a.skip(e);break;case 153:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_no_active_key=a.readI64().toString():a.skip(e);break;case 154:e===(h||(h=c("ThriftTypes"))).I64?b.key_negotiation_protocol=a.readI64().toString():a.skip(e);break;case 155:e===(h||(h=c("ThriftTypes"))).I64?b.key_messages_received_via_signaling=a.readI64().toString():a.skip(e);break;case 156:e===(h||(h=c("ThriftTypes"))).I64?b.key_messages_received_via_media=a.readI64().toString():a.skip(e);break;case 157:e===(h||(h=c("ThriftTypes"))).I64?b.key_messages_received_via_signaling_joiner=a.readI64().toString():a.skip(e);break;case 158:e===(h||(h=c("ThriftTypes"))).I64?b.key_messages_received_via_media_joiner=a.readI64().toString():a.skip(e);break;case 159:e===(h||(h=c("ThriftTypes"))).I64?b.g_e2ee_participant_hash_verification_failed_error=a.readI64().toString():a.skip(e);break;case 160:e===(h||(h=c("ThriftTypes"))).I64?b.g_e2ee_invalid_key_distributor_id_error=a.readI64().toString():a.skip(e);break;case 161:e===(h||(h=c("ThriftTypes"))).I64?b.g_e2ee_key_message_validation_failure_count=a.readI64().toString():a.skip(e);break;case 162:e===(h||(h=c("ThriftTypes"))).I64?b.g_e2ee_cached_decrypted_key_count=a.readI64().toString():a.skip(e);break;case 163:e===(h||(h=c("ThriftTypes"))).I64?b.g_e2ee_reapply_cached_decrypted_key_count=a.readI64().toString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function d(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRUCT?b.p2p_e2ee=m(a):a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRUCT?b.group_e2ee=n(a):a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.p2p_e2ee===void 0&&(b.p2p_e2ee=i());b.group_e2ee===void 0&&(b.group_e2ee=j());return b}g.P2pE2eeMetrics$DefaultConstructor=i;g.GroupE2eeMetrics$DefaultConstructor=j;g.E2eeMetrics$DefaultConstructor=a;g.serializeP2pE2eeMetrics=k;g.serializeGroupE2eeMetrics=l;g.serializeE2eeMetrics=b;g.deserializeP2pE2eeMetrics=m;g.deserializeGroupE2eeMetrics=n;g.deserializeE2eeMetrics=d}),98);
__d("HorizonWebMqttChannel",["CurrentUser","MqttChannel","MqttEnv","MqttEnvInitializer","MqttWebConfig"],(function(a,b,c,d,e,f,g){"use strict";c("MqttEnvInitializer").initialize();function h(){var a;d("MqttEnv").setIsUserLoggedInNow(c("CurrentUser").isLoggedIn);return new(c("MqttChannel"))({appId:(a=c("MqttWebConfig")).appID,capabilities:a.capabilities,chatVisibility:!0,clientCapabilities:a.clientCapabilities,endpoint:a.endpoint,initialSubscribedTopics:a.subscribedTopics,pageId:null,phpOverride:a.hostNameOverride,pollingEndpoint:a.pollingEndpoint,userFbid:a.fbid})}var i=null;function a(){i==null&&(i=h());return i}function b(){i!=null&&(i.shutdown(),i=null)}g.getHorizonWebMqttChannelInstance=a;g.shutdownAndClear=b}),98);
__d("RequestStreamBodyUtils",[],(function(a,b,c,d,e,f){"use strict";a=function(a){return g(atob(a))};b=function(a){return btoa(h(a))};c=function(a){a=btoa(a);var b=a.indexOf("=");return b===-1?a:a.substring(0,b)};var g=function(a){a=a;var b=a.length,c=new Uint8Array(b);for(var d=0;d<b;d++)c[d]=a.charCodeAt(d);return c},h=function(a){var b="",c=a.byteLength;for(var d=0;d<c;d++)b+=String.fromCharCode(a[d]);return b};f.base64ToUint8Array=a;f.uint8ArrayToBase64=b;f.stringToBase64WithoutPadding=c;f.stringToUint8Array=g;f.uint8ArrayToString=h}),66);
__d("MultiwayCommonTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";c=(a=b("$InternalEnum"))({STRING:0,THRIFT:1,BOTH:2});d=a({OK:200,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,METHOD_NOT_ALLOWED:406,CONFLICT:409,CONDITIONAL_REQUEST_FAILED:412,SERVER_INTERNAL_ERROR:500,SERVICE_UNAVAILABLE:503});f=a({UNKNOWN:1e3,EXCEEDED_MAX_ALLOWED_PARTICIPANTS:1001,MEMBERSHIP_CHECK_FAIL:1002,CONFERENCE_THROTTLED:1003,ENDPOINT_THROTTLED:1004,MWS_MESSAGE_SENT_TO_INCORRECT_REGION:1005,UNSUPPORTED_REQUEST_TYPE:2e3,CLIENT_REQUEST_UNACCEPTABLE:2001,CLIENT_RESPONSE_UNACCEPTABLE:2002,RING_RESPONSE_BODY_NOT_SET:2004,SERVER_MEDIA_UPDATE_RESPONSE_BODY_NOT_SET:2005,INVALID_SDP:2006,INVALID_CONFERENCE_NAME:2007,SERVER_INFO_CONFERENCE_NAME_MISMATCH:2008,INVALID_USER_ID:2009,INCORRECT_VERSION_RANGE:2010,SENDER_ID_MISMATCH:2011,RECIPIENT_NOT_SPECIFIED:2012,FIELD_NOT_ALLOWED:2013,USERS_NOT_SPECIFIED:2015,REQUEST_UNACCEPTABLE_FOR_ENDPOINT_STATE:2016,INVALID_CALL_ID:2017,SESSION_DESCRIPTION_ID_MISMATCH:2018,EMPTY_CLIENT_MEDIA_UPDATES:2019,INVALID_SERVER_INFO_DATA:2020,INCORRECT_STATE_VERSION:2021,MISMATCHED_STATE_FOR_VERSION:2022,INVALID_STATE_VERSION:2023,NO_RESOLVER_FOUND:2024,MISSING_APPROVERLIST:2025,FULL_SDP_REQUIRED_IN_APPROVED_STATE:2026,INVALID_BROADCAST_ID:2027,INVALID_ENDPOINT_CONFIG:2028,INVALID_E2EE_STATE:2029,SFU_MODE_PREVENTED:2030,INVALID_CONFERENCE_STATE:2031,JOIN_REQUEST_DENIED:2032,EMPTY_USER_IDS:2033,MISSING_SDP_CONNECT_REQUEST:2034,CALLER_HAS_APPEALABLE_CALLING_RESTRICTION:2035,MISSING_BODY_ENDPOINT:2101,MISSING_BODY_HEADER:2102,MISSING_BODY_BODY:2103,MISSING_BODY_PARAMS:2104,MISSING_BODY_REMOVE_PARTICIPANTS_REQUEST:2105,MISSING_BODY_DATA_MESSAGE_REQUEST:2106,MISSING_BODY_CLIENT_MEDIA_UPDATE_REQUEST:2107,MISSING_BODY_ADD_PARTICIPANTS_REQUEST:2108,MISSING_BODY_SUBSCRIPTION_REQUEST:2110,MISSING_BODY_JOIN_REQUEST:2111,MISSING_BODY_HANGUP_REQUEST:2112,MISSING_BODY_ICE_CANDIDATE_REQUEST:2113,MISSING_BODY_P2P_MESSAGE_REQUEST:2114,MISSING_BODY_UPDATE_REQUEST:2115,MISSING_BODY_CLIENT_EVENT_REQUEST:2116,MISSING_BODY_CONNECT_REQUEST:2117,MISSING_BODY_UNSUBSCRIBE_REQUEST:2118,MISSING_BODY_APPROVAL_REQUEST:2119,MISSING_ENDPOINT_USER_ID:2120,EMPTY_ENDPOINT_USER_ID:2121,MISSING_BODY_TRANSFER_REQUEST:2122,MISSING_BODY_GENERIC:2199,REQUESTOR_NOT_MEMBER_CONFERENCE:3002,NOT_BROADCAST_OWNER:3003,GUEST_NOT_INVITED:3004,GUEST_DISCONNECTED:3005,GUEST_INVITATION_EXPIRED:3006,PARTICIPANT_IN_PENDING_APPROVAL_STATE:3008,INVALID_MULTIWAY_PARAMS:3009,BROADCAST_ALREADY_STOPPED:4002,FAILED_TO_GENERATE_SDP_ANSWER:4003,FAILED_GENERATE_SESSION_DESCRIPTION:4004,SDP_SESSION_ID_MISMATCH:4005,MEDIA_ENDPOINT_GONE:4007,MEDIA_ENDPOINT_ALREADY_EXISTS:4008,MEDIA_ENDPOINT_EXISTS_DIFFERENT_SESSION_ID:4009,LEGACY_MESSENGER_SENDER_UNSET:4010,FAILED_TO_SET_TRANSPORT_INFO:4011,NON_PRIMARY_MULTIWAY_SERVER:4012,FAILED_TO_GET_REMOTE_DESCRIPTION:4013,LOCAL_DESCRIPTION_NOT_SET:4014,INVALID_SDP_TYPE:4015,CLIENT_MEDIA_UPDATE_WITHOUT_REMOTE_SDP_INFO:4016,SDP_UNSET_ON_P2P_ANSWER:4017,MISSING_ICE_CANDIDATE_PAYLOAD:4018,P2P_PROTOCOL_UNSET:4019,CREATE_ACK_FOR_INVALID_MESSAGE_TYPE:4020,LEGACY_CLIENT_CANNOT_JOIN_SFU_MODE:4021,CONNECT_UNSUPPORTED_IN_SFU_MODE:4022,CONNECT_UNSUPPORTED_FOR_JOINED_ENDPOINTS:4023,RESOLVE_STATE_API_ERROR:4024,EXTERNAL_RESOLUTION_ERROR:4025,INTERNAL_RESOLUTION_ERROR:4026,RESOLUTION_DISABLED:4027,BROADCAST_ID_MISSING:4028,SDP_UNSET_ON_P2P_OFFER:4029,LEGACY_OFFER_MISSING_REQUIRED_VALUE:4031,MEDIA_SERVER_STATE_SYNC_DESERIALIZATION_ERROR:4032,CONNECT_UNSUPPORTED_FOR_PRECONNECTED_USERS:4033,OTHER_USER_ANSWERED_THE_CALL:4034,MEDIA_SERVER_DESERIALIZATION_ERROR:4035,REMOTE_SDP_TRACKID_MISMATCH:4036,SIGNALING_MESSAGE_TO_CLIENT_DROPPED:4037,DATA_CHANNEL_ENDPOINT_GONE:4038,DATA_CHANNEL_ENDPOINT_ALREADY_EXISTS:4039,CONNECT_UNSUPPORTED_DURING_P2P_TO_SFU_ESCALATION:4040,P2P_CONNECT_UNSUPPORTED_AFTER_SFU_ESCALATION:4041,CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_CONFERENCE:4042,CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_USER:4043,REQUEST_TIMEOUT:4044,TOO_MANY_MEDIA_TRACKS_IN_SDP:4045,CONFERENCE_NOT_FOUND:5001,CONFERENCE_IS_TERMINATING:5002,CONFERENCE_IS_TERMINATED:5003,CONFERENCE_NAME_EMPTY:5004,NONCE_EMPTY:5005,NONCE_MISMATCH:5006,CONFERENCE_HAS_GONE:5007,PARTICIPANT_HAS_GONE:5008,MEDIA_SERVER_NOT_FOUND:5009,CLIENT_TERMINATED:5010,MEDIA_CODECS_UNSUPPORTED_BY_CONFERENCE:6001,CONFERENCE_INCAPABLE_RENEGOTIATION:6002,REJECTING_CMU_WHEN_SMU_PENDING:6003,PARTICIPANT_NOT_SUBSCRIBED_TO_TOPIC:6004,PARTICIPANT_ALREADY_IN_WAITING_ROOM:6005,PARTICIPANT_NOT_IN_PENDING_APPROVAL:6006,USER_NOT_APPROVER_FOR_TARGET_USER:6007,UNSUPPORTED_CAPABILITIES:6008,PRODUCT_SERVER_DEFINED_END_REASON:6009,WWW_KILLSWITCHED_REQUEST:6010,CONFLICTING_MEDIA_PATH:6011,CONFLICTING_MEDIA_STATUS:6012,CONFLICTING_SESSION_DESCRIPTION:6013,OK:9e3});b=a({NONE:0,INFO:1,ERROR:2});var g=a({SUCCESS:0,ERROR:1,SESSION_NOT_FOUND:10,SESSION_MISMATCH:11,SESSION_TERMINATING:12,CONNECTION_ALREADY_EXIST:20,CONNECTION_OLD_EXIST:21,CONNECTION_NOT_FOUND:23,CONNECTION_MISMATCH:24,SDP_INVALID:30,SDP_NEGOTIATION_FAILED:31,EXCEEDED_MAX_PARTICIPANT_COUNT:40,UNAUTHORIZED:50}),h=a({JOIN:0,SERVER_MEDIA_UPDATE:1,HANGUP:2,ICE_CANDIDATE:3,RING:4,DISMISS:5,CONFERENCE_STATE:6,ADD_PARTICIPANTS:7,SUBSCRIPTION:8,CLIENT_MEDIA_UPDATE:9,DATA_MESSAGE:10,REMOVE_PARTICIPANTS:11,PING:18,UPDATE:20,NOTIFY:21,CONNECT:22,CLIENT_EVENT:23,UNSUBSCRIBE:25,APPROVAL:26,TRANSFER:27,WAKEUP:28}),i=a({IGNORE_CALL:0,HANGUP_CALL:1,NO_ANSWER_TIMEOUT:2,CLIENT_ERROR:3,IN_ANOTHER_CALL:4,CLIENT_INTERRUPTED:5,SESSION_MIGRATED:6,E2EE_MANDATED_BUT_OFFER_DID_NOT_CONTAIN_E2EE:7,E2EE_MANDATED_BUT_ANSWER_DID_NOT_NEGOTIATE_E2EE:8,WEBRTC_ERROR:9,CONNECTION_DROPPED:10}),j=a({CALL_ENDED:0,ANSWERED_ON_ANOTHER_DEVICE:1,IN_ANOTHER_CALL:2,CONNECTION_DROPPED:3,REJECTED_ON_ANOTHER_DEVICE:4,REMOVED_BY_PARTICIPANT:5,REJECTED_BY_CALLEE:6,INTERNAL_ERROR:7,CALL_ENDED_BY_PRODUCT:9,JOIN_APPROVAL_DENIED:10,JOIN_APPROVAL_TIMEDOUT:11,UNSUPPORTED_VERSION:12,LIVE_NOT_ACKED:13,TX_ACK_TIMEDOUT:14,ANSWERED_BY_OTHER_USER:15,PARTICIPANT_SELF_TERMINATION:16,PARTICIPANT_REJOIN:17,LONG_LASTING_AUDIO_ISSUE:18,PRIMARY_ENDPOINT_HANGUP:19,RECONNECT_FAILED:20,E2EE_HARDENING_ERROR:21,CALL_ENDED_BY_EXTENSION:22,CALL_ENDED_BY_OVER_CAPACITY:23}),k=a({SUPPORT_AUDIO_DEPRECATED:0,SUPPORT_VIDEO_DEPRECATED:1,SUPPORT_EXPERIMENTS_IN_JOIN_RESPONSE:2,SUPPORT_NEW_PARTICIPANT_STATES:3,SUPPORT_SDP_RENEGOTIATION:4,SUPPORT_MWPP:5,REQUIRE_FULL_SDP_IN_SMU:6,SUPPORT_PRECONNECT:7,SUPPORT_MWPP_DEESCALATION:8,SUPPORT_PARTICIPANT_STATE_UNCALLABLE:9,SUPPORT_MULTIPLE_VIDEO_STREAMS:10,REQUIRE_FULL_SDP_IN_SMU_OPTIMIZED:11,SUPPORT_MULTISTREAM_FEC:12,SUPPORT_DELTA_SMU:13,REQUIRE_DEFAULT_CHANNEL_SCREENSHARE:14,SUPPORT_SCREENSHARE_FLAG_IN_JOIN_RESPONSE_AND_SMU:15,SUPPORT_TEMPORAL_LAYER_JBE:16,REQUIRES_P2P_RELAY_INFO_VIA_SIGNALING:17,SUPPORT_NUMERIC_TOPICS:18,SUPPORT_PSEUDO_QUIC_CONNECTION:19,SUPPORT_SDP_SENDRECV:20}),l=a({GROUP_AUDIO_CALL:0,PEER_VIDEO_CALL:1,PEER_AUDIO_CALL:2,GROUP_VIDEO_CALL:3,LIVE_STREAM:4,PEER_ESCALATED_VIDEO_CALL:5,PEER_ESCALATED_AUDIO_CALL:6,LIVE_AUDIO_ROOM:7,LIVE_WITH_ROOM:8}),m=a({OK:0,NOT_SUPPORTED:1,IN_ANOTHER_CALL:10}),n=a({ACTIVE:0,TERMINATED:1}),o=a({UNKNOWN:0,ACTIVE:1,TERMINATED:2}),p=a({DENIED:0,APPROVED:1}),q=a({UNKNOWN:0,SIGNALING_DATA_MESSAGE:1,STATE_SYNC_UPDATE:2,STATE_SYNC_SNAPSHOT:3}),r=a({UNKNOWN:0,DISCONNECTED:1,NO_ANSWER:2,REJECTED:3,UNREACHABLE:4,CONNECTION_DROPPED:5,CONTACTING:6,RINGING:7,CONNECTING:8,CONNECTED:9,PARTICIPANT_LIMIT_REACHED:10,IN_ANOTHER_CALL:11,RING_TYPE_UNSUPPORTED:12,PENDING_APPROVAL:13,APPROVED:14,FAILED_APPROVAL:15,HANGUP_IN_WAITING_ROOM:16,UNCALLABLE:17,UNCALLABLE_DELAYED:18}),s=a({PRANSWER:1001,INITIAL_ANSWER_TO_P2P_CALLER:1002,DEESCALATE_OFFER_TO_P2P_CALLEE:1003,DEESCALATE_ANSWER_TO_P2P_CALLER:1004,REQUEST_DEESCALATE_TO_P2P_CALLER:1005,REQUEST_ESCALATE:1006,REQUEST_CLIENT_FULL_RENEGOTIATION_TO_ADMIT_FROM_WAITINGROOM:1007,REQUEST_CLIENT_FULL_RENEGOTIATION_AGAINST_MWS:1008,PARTICIPANT_ADDED:1009,PARTICIPANT_REMOVED:1010,FIRST_REMOTE_ALERTED_FOR_INITIATOR:2001,FIRST_REMOTE_ANSWERED_FOR_INITIATOR:2002,CONTAIN_PENDING_APPROVAL_PARTICIPANTS:2003,KEEP_ALIVE_PING:3001,IS_INITIATOR:4001,PREGEN_SDP:4002}),t=a({PRIMARY:0,SECONDARY:1}),u=a({UNKNOWN:0,MEDIA_CONNECTED:1});a=a({JoinRequest:"joinRequest",JoinResponse:"joinResponse",ServerMediaUpdateRequest:"serverMediaUpdateRequest",ServerMediaUpdateResponse:"serverMediaUpdateResponse",HangupRequest:"hangupRequest",IceCandidateRequest:"iceCandidateRequest",RingRequest:"ringRequest",RingResponse:"ringResponse",DismissRequest:"dismissRequest",ConferenceStateRequest:"conferenceStateRequest",ConferenceStateResponse:"conferenceStateResponse",AddParticipantsRequest:"addParticipantsRequest",SubscriptionRequest:"subscriptionRequest",ClientMediaUpdateRequest:"clientMediaUpdateRequest",ClientMediaUpdateResponse:"clientMediaUpdateResponse",DataMessageRequest:"dataMessageRequest",RemoveParticipantsRequest:"removeParticipantsRequest",DataMessageResponse:"dataMessageResponse",UpdateRequest:"updateRequest",UpdateResponse:"updateResponse",NotifyRequest:"notifyRequest",NotifyResponse:"notifyResponse",ConnectRequest:"connectRequest",ConnectResponse:"connectResponse",ClientEventRequest:"clientEventRequest",ClientEventResponse:"clientEventResponse",UnsubscribeRequest:"unsubscribeRequest",UnsubscribeResponse:"unsubscribeResponse",ApprovalRequest:"approvalRequest",TransferRequest:"transferRequest"});e.exports={ApprovalStatus:p,Capability:k,ClientEventType:u,DeviceStatus:m,DismissReason:j,E2eeDataMessageType:q,ExtensionSessionStatus:o,HangupReason:i,JoinMode:t,MediaConnectionStatus:n,MessageTag:s,MessageType:h,ParticipantCallState:r,RingType:l,RtcApiStatusCode:g,RtcLogSeverity:b,RtcMessageBodyVariant$Types:a,RtcResponseStatusCode:d,RtcResponseSubCode:f,SdpPayloadType:c}}),null);
__d("ZenonIceStatsParser",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=[];a=a.split("\r\n");a.forEach(function(a){g(a)&&b.push({gen:h(a),type:i(a)})});return b}function g(a){return a.indexOf("candidate:")>-1}function h(a){var b=0;a=a.match(/generation (\d+)/);a&&(b=parseInt(a[1],10));return b}function i(a){a=a.match(/typ (host|relay|srflx|prflx)/);if(a)return a[1];else return"unknown"}f.extractIceInfo=a}),66);
__d("ZenonMWThriftMessageMap",["MultiwayCommonTypes"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a==null)return"UNKNOWN";switch(a){case d("MultiwayCommonTypes").MessageType.JOIN:return"JOIN";case d("MultiwayCommonTypes").MessageType.SERVER_MEDIA_UPDATE:return"SERVER_MEDIA_UPDATE";case d("MultiwayCommonTypes").MessageType.ICE_CANDIDATE:return"ICE_CANDIDATE";case d("MultiwayCommonTypes").MessageType.HANGUP:return"HANGUP";case d("MultiwayCommonTypes").MessageType.RING:return"RING";case d("MultiwayCommonTypes").MessageType.DISMISS:return"DISMISS";case d("MultiwayCommonTypes").MessageType.CONFERENCE_STATE:return"CONFERENCE_STATE";case d("MultiwayCommonTypes").MessageType.ADD_PARTICIPANTS:return"ADD_PARTICIPANTS";case d("MultiwayCommonTypes").MessageType.SUBSCRIPTION:return"SUBSCRIPTION";case d("MultiwayCommonTypes").MessageType.CLIENT_MEDIA_UPDATE:return"CLIENT_MEDIA_UPDATE";case d("MultiwayCommonTypes").MessageType.DATA_MESSAGE:return"DATA_MESSAGE";case d("MultiwayCommonTypes").MessageType.REMOVE_PARTICIPANTS:return"REMOVE_PARTICIPANTS";case d("MultiwayCommonTypes").MessageType.PING:return"PING";case d("MultiwayCommonTypes").MessageType.NOTIFY:return"NOTIFY";case d("MultiwayCommonTypes").MessageType.CONNECT:return"CONNECT";case d("MultiwayCommonTypes").MessageType.CLIENT_EVENT:return"CLIENT_EVENT";case d("MultiwayCommonTypes").MessageType.UNSUBSCRIBE:return"UNSUBSCRIBE";case d("MultiwayCommonTypes").MessageType.UPDATE:return"UPDATE";case d("MultiwayCommonTypes").MessageType.APPROVAL:return"APPROVAL";case d("MultiwayCommonTypes").MessageType.WAKEUP:return"WAKEUP";default:return"UNKNOWN"}}function b(a){switch(a.toLowerCase()){case"join":return d("MultiwayCommonTypes").MessageType.JOIN;case"server_media_update":return d("MultiwayCommonTypes").MessageType.SERVER_MEDIA_UPDATE;case"ice_candidate":return d("MultiwayCommonTypes").MessageType.ICE_CANDIDATE;case"hangup":return d("MultiwayCommonTypes").MessageType.HANGUP;case"ring":return d("MultiwayCommonTypes").MessageType.RING;case"dismiss":return d("MultiwayCommonTypes").MessageType.DISMISS;case"conference_state":return d("MultiwayCommonTypes").MessageType.CONFERENCE_STATE;case"add_participants":return d("MultiwayCommonTypes").MessageType.ADD_PARTICIPANTS;case"subscription":return d("MultiwayCommonTypes").MessageType.SUBSCRIPTION;case"client_media_update":return d("MultiwayCommonTypes").MessageType.CLIENT_MEDIA_UPDATE;case"data_message":return d("MultiwayCommonTypes").MessageType.DATA_MESSAGE;case"remove_participants":return d("MultiwayCommonTypes").MessageType.REMOVE_PARTICIPANTS;case"ping":return d("MultiwayCommonTypes").MessageType.PING;case"notify":return d("MultiwayCommonTypes").MessageType.NOTIFY;case"connect":return d("MultiwayCommonTypes").MessageType.CONNECT;case"client_event":return d("MultiwayCommonTypes").MessageType.CLIENT_EVENT;case"unsubscribe":return d("MultiwayCommonTypes").MessageType.UNSUBSCRIBE;case"update":return d("MultiwayCommonTypes").MessageType.UPDATE;case"approval":return d("MultiwayCommonTypes").MessageType.APPROVAL;case"wakeup":return d("MultiwayCommonTypes").MessageType.WAKEUP;default:return null}}g.messageTypeToString=a;g.messageTypeFromString=b}),98);
__d("OverlayConfigConstants",[],(function(a,b,c,d,e,f){"use strict";a={OverlayConfigNumParameters:4798,OverlayConfigNotPresentFlagValue:-1};b=a;f["default"]=b}),66);
__d("OverlayConfigLayerSource",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({UNKNOWN:0,DEFAULT:1,MOBILECONFIG:2,APP_CRUCIBLE:3,APP_JNI:4,UNITTEST_CONFIG:5,SERVER:6,PLACEHOLDER:7,LS_MOBILECONFIG:8,APP_LS:9,APP_JS:10,BROWSER:11,APP_OVRRTC:12,APP_IG:13,MLITE4A_LEGACY_QE:14,APP_MLITE4A:15,APP_PORTAL:16,IG_LAUNCHER:17,APP_ARCHON:18,APP_WS:19,APP_NOX:20,APP_WEARABLE_MSNGR:21,APP_WEARABLE_IG:22,APP_ORCA_RSYS:23,APP_WILDE:24,APP_MKIOS:25,APP_MK4A:26,DYNAMIC:27,SDK_DEFAULT:28,APP_FB4A:29,APP_RSYS_SDK_SAMPLE:30,APP_BIZAPP:31,APP_WORKCHAT:32,APP_ARCHON_LOCAL_OVERRIDES:33,APP_CATHODE:34,APP_WR4I:35,APP_WR4A:36,APP_METACAM:37,HORIZON_EMERGENCY:38,APP_SOCIALPLATFORM:39,APP_TWILIGHT:40,APP_AR_CALLING_LOCAL_OVERRIDES:41,APP_TWILIGHT_CASTING:42,TWILIGHT_EMERGENCY:43,METACAM_EMERGENCY:44,CALL_SCOPED:45,APP_CASE50:46});b=a;f["default"]=b}),66);
__d("OverlayConfigServerLayer",["OverlayConfigConstants","OverlayConfigLayerSource"],(function(a,b,c,d,e,f,g){"use strict";a=function(){a.createFromHeader=function(b){try{b=b==null?void 0:(b=b.extensions)==null?void 0:b.oc1_json;if(b==null)return null;b=JSON.parse(b);b=b==null?void 0:b.values;return b==null?null:new a(b)}catch(a){return null}};function a(a){this.$1=a}var b=a.prototype;b.getLayerSource=function(){return c("OverlayConfigLayerSource").SERVER};b.getValue=function(a){a=this.$1[String(a)];return a!=null?a:c("OverlayConfigConstants").OverlayConfigNotPresentFlagValue};b.logExposure=function(a){};return a}();g["default"]=a}),98);
__d("ZenonEndCallReason",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({BREAKOUT_SESSION_SWITCH_ROOM:"BreakoutSessionSwitchRoom",CALL_END_ACCEPT_AFTER_HANG_UP:"CallEndAcceptAfterHangUp",CALLER_HAS_APPEALABLE_CALLING_RESTRICTION:"CallerHasAppealableCallingRestriction",CALLER_NOT_VISIBLE:"CallerNotVisible",CAMERA_PERMISSION_DENIED:"CameraPermissionDenied",CARRIER_BLOCKED:"CarrierBlocked",CLIENT_ENCRYPTION_ERROR:"ClientEncryptionError",CLIENT_ERROR:"ClientError",CLIENT_INTERRUPTED:"ClientInterrupted",CONNECTION_DROPPED:"ConnectionDropped",END_TO_END_ENCRYPTION_INVARIANT_VIOLATED:"EndToEndEncryptionInvariantViolated",HANGUP_CALL:"HangupCall",IGNORE_CALL:"IgnoreCall",IN_ANOTHER_CALL:"InAnotherCall",INACTIVE_TIMEOUT:"InactiveTimeout",INCOMING_TIMEOUT:"IncomingTimeout",MAX_ALLOWED_PARTICIPANTS_REACHED:"MaxAllowedParticipantsReached",MICROPHONE_PERMISSION_DENIED:"MicrophonePermissionDenied",NO_ANSWER_TIMEOUT:"NoAnswerTimeout",NO_PERMISSION:"NoPermission",NO_UI_SHOWN:"NoUIShown",OTHER_CARRIER_BLOCKED:"OtherCarrierBlocked",OTHER_INSTANCE_HANDLED:"OtherInstanceHandled",OTHER_NOT_CAPABLE:"OtherNotCapable",PRODUCT_SERVER_DEFINED_END_REASON:"ProductServerDefinedEndReason",REMOVED_BY_PARTICIPANT:"RemovedByParticipant",RING_MUTED:"RingMuted",SESSION_MIGRATED:"SessionMigrated",SIGNALING_MESSAGE_FAILED:"SignalingMessageFailed",TX_ACK_TIMEOUT:"TxAckTimeout",UNEXPECTED_END_OF_CALL:"UnexpectedEndOfCall",UNKNOWN:"Unknown",VERSION_UNSUPPORTED:"VersionUnsupported",WEBRTC_ERROR:"WebRTCError"});c=a;f["default"]=c}),66);
__d("ZenonIncomingRingSDKTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["Hangup","OtherDismiss"]);f.ZenonCancelReason=a}),66);
__d("fbwebrtc_ClientStack",[],(function(a,b,c,d,e,f){a=Object.freeze({OLD_CLIENT_PLATFORM_STACK:0,RSYS_X:1,IG_OLD_STACK:2,MLITE_OLD_STACK:3,SCOTCH:4,ZENON:5});f["default"]=a}),66);
__d("multiway_ApprovalStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({DENIED:0,APPROVED:1});f["default"]=a}),66);
__d("multiway_Capability",[],(function(a,b,c,d,e,f){a=Object.freeze({SUPPORT_AUDIO_DEPRECATED:0,SUPPORT_VIDEO_DEPRECATED:1,SUPPORT_EXPERIMENTS_IN_JOIN_RESPONSE:2,SUPPORT_NEW_PARTICIPANT_STATES:3,SUPPORT_SDP_RENEGOTIATION:4,SUPPORT_MWPP:5,REQUIRE_FULL_SDP_IN_SMU:6,SUPPORT_PRECONNECT:7,SUPPORT_MWPP_DEESCALATION:8,SUPPORT_PARTICIPANT_STATE_UNCALLABLE:9,SUPPORT_MULTIPLE_VIDEO_STREAMS:10,REQUIRE_FULL_SDP_IN_SMU_OPTIMIZED:11,SUPPORT_MULTISTREAM_FEC:12,SUPPORT_DELTA_SMU:13,REQUIRE_DEFAULT_CHANNEL_SCREENSHARE:14,SUPPORT_SCREENSHARE_FLAG_IN_JOIN_RESPONSE_AND_SMU:15,SUPPORT_TEMPORAL_LAYER_JBE:16,REQUIRES_P2P_RELAY_INFO_VIA_SIGNALING:17,SUPPORT_NUMERIC_TOPICS:18,SUPPORT_PSEUDO_QUIC_CONNECTION:19,SUPPORT_SDP_SENDRECV:20});f["default"]=a}),66);
__d("multiway_ClientEventType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,MEDIA_CONNECTED:1});f["default"]=a}),66);
__d("multiway_ConferenceType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,IGVIDEOCALL:9,ROOM:15,CRUCIBLE:20,MBS_WA:21,BOT:22,HORIZON:23,ULLC:24});f["default"]=a}),66);
__d("multiway_DeviceStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({OK:0,NOT_SUPPORTED:1,IN_ANOTHER_CALL:10});f["default"]=a}),66);
__d("multiway_DismissReason",[],(function(a,b,c,d,e,f){a=Object.freeze({CALL_ENDED:0,ANSWERED_ON_ANOTHER_DEVICE:1,IN_ANOTHER_CALL:2,CONNECTION_DROPPED:3,REJECTED_ON_ANOTHER_DEVICE:4,REMOVED_BY_PARTICIPANT:5,REJECTED_BY_CALLEE:6,INTERNAL_ERROR:7,CALL_ENDED_BY_PRODUCT:9,JOIN_APPROVAL_DENIED:10,JOIN_APPROVAL_TIMEDOUT:11,UNSUPPORTED_VERSION:12,LIVE_NOT_ACKED:13,TX_ACK_TIMEDOUT:14,ANSWERED_BY_OTHER_USER:15,PARTICIPANT_SELF_TERMINATION:16,PARTICIPANT_REJOIN:17,LONG_LASTING_AUDIO_ISSUE:18,PRIMARY_ENDPOINT_HANGUP:19,RECONNECT_FAILED:20,E2EE_HARDENING_ERROR:21,CALL_ENDED_BY_EXTENSION:22,CALL_ENDED_BY_OVER_CAPACITY:23});f["default"]=a}),66);
__d("multiway_E2eeMode",[],(function(a,b,c,d,e,f){a=Object.freeze({E2EE_NOT_MANDATED:0,DEPRECATED_NO_REQUIREMENT:1,E2EE_MANDATED:2});f["default"]=a}),66);
__d("multiway_EndpointServiceType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,COMPOSITING_SERVICE:1,MEDIA_SERVER:2,CATHODE_AMBISONIC:3,CATHODE_CAPTIONS:4,CATHODE_MEETING_SUMMARIZER:5,CATHODE_REALTIME_SHARED_STATE:6,RP_GENAI_SERVICE:7,SMART_GLASSES_ASSISTANT:8});f["default"]=a}),66);
__d("multiway_HangupReason",[],(function(a,b,c,d,e,f){a=Object.freeze({IGNORE_CALL:0,HANGUP_CALL:1,NO_ANSWER_TIMEOUT:2,CLIENT_ERROR:3,IN_ANOTHER_CALL:4,CLIENT_INTERRUPTED:5,SESSION_MIGRATED:6,E2EE_MANDATED_BUT_OFFER_DID_NOT_CONTAIN_E2EE:7,E2EE_MANDATED_BUT_ANSWER_DID_NOT_NEGOTIATE_E2EE:8,WEBRTC_ERROR:9,CONNECTION_DROPPED:10});f["default"]=a}),66);
__d("multiway_JoinMode",[],(function(a,b,c,d,e,f){a=Object.freeze({PRIMARY:0,SECONDARY:1});f["default"]=a}),66);
__d("multiway_MediaPath",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,SFU:1,P2P:2});f["default"]=a}),66);
__d("multiway_MediaPauseStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({NotPaused:0,Paused:1});f["default"]=a}),66);
__d("multiway_MessageTag",[],(function(a,b,c,d,e,f){a=Object.freeze({PRANSWER:1001,INITIAL_ANSWER_TO_P2P_CALLER:1002,DEESCALATE_OFFER_TO_P2P_CALLEE:1003,DEESCALATE_ANSWER_TO_P2P_CALLER:1004,REQUEST_DEESCALATE_TO_P2P_CALLER:1005,REQUEST_ESCALATE:1006,REQUEST_CLIENT_FULL_RENEGOTIATION_TO_ADMIT_FROM_WAITINGROOM:1007,REQUEST_CLIENT_FULL_RENEGOTIATION_AGAINST_MWS:1008,PARTICIPANT_ADDED:1009,PARTICIPANT_REMOVED:1010,FIRST_REMOTE_ALERTED_FOR_INITIATOR:2001,FIRST_REMOTE_ANSWERED_FOR_INITIATOR:2002,CONTAIN_PENDING_APPROVAL_PARTICIPANTS:2003,KEEP_ALIVE_PING:3001,IS_INITIATOR:4001,PREGEN_SDP:4002});f["default"]=a}),66);
__d("multiway_MessageType",[],(function(a,b,c,d,e,f){a=Object.freeze({JOIN:0,SERVER_MEDIA_UPDATE:1,HANGUP:2,ICE_CANDIDATE:3,RING:4,DISMISS:5,CONFERENCE_STATE:6,ADD_PARTICIPANTS:7,SUBSCRIPTION:8,CLIENT_MEDIA_UPDATE:9,DATA_MESSAGE:10,REMOVE_PARTICIPANTS:11,PING:18,UPDATE:20,NOTIFY:21,CONNECT:22,CLIENT_EVENT:23,UNSUBSCRIBE:25,APPROVAL:26,TRANSFER:27,WAKEUP:28});f["default"]=a}),66);
__d("multiway_ParticipantCallState",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,DISCONNECTED:1,NO_ANSWER:2,REJECTED:3,UNREACHABLE:4,CONNECTION_DROPPED:5,CONTACTING:6,RINGING:7,CONNECTING:8,CONNECTED:9,PARTICIPANT_LIMIT_REACHED:10,IN_ANOTHER_CALL:11,RING_TYPE_UNSUPPORTED:12,PENDING_APPROVAL:13,APPROVED:14,FAILED_APPROVAL:15,HANGUP_IN_WAITING_ROOM:16,UNCALLABLE:17,UNCALLABLE_DELAYED:18});f["default"]=a}),66);
__d("multiway_RingType",[],(function(a,b,c,d,e,f){a=Object.freeze({GROUP_AUDIO_CALL:0,PEER_VIDEO_CALL:1,PEER_AUDIO_CALL:2,GROUP_VIDEO_CALL:3,LIVE_STREAM:4,PEER_ESCALATED_VIDEO_CALL:5,PEER_ESCALATED_AUDIO_CALL:6,LIVE_AUDIO_ROOM:7,LIVE_WITH_ROOM:8});f["default"]=a}),66);
__d("multiway_RtcResponseStatusCode",[],(function(a,b,c,d,e,f){a=Object.freeze({OK:200,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,METHOD_NOT_ALLOWED:406,CONFLICT:409,CONDITIONAL_REQUEST_FAILED:412,SERVER_INTERNAL_ERROR:500,SERVICE_UNAVAILABLE:503});f["default"]=a}),66);
__d("multiway_RtcResponseSubCode",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:1e3,EXCEEDED_MAX_ALLOWED_PARTICIPANTS:1001,MEMBERSHIP_CHECK_FAIL:1002,CONFERENCE_THROTTLED:1003,ENDPOINT_THROTTLED:1004,MWS_MESSAGE_SENT_TO_INCORRECT_REGION:1005,UNSUPPORTED_REQUEST_TYPE:2e3,CLIENT_REQUEST_UNACCEPTABLE:2001,CLIENT_RESPONSE_UNACCEPTABLE:2002,RING_RESPONSE_BODY_NOT_SET:2004,SERVER_MEDIA_UPDATE_RESPONSE_BODY_NOT_SET:2005,INVALID_SDP:2006,INVALID_CONFERENCE_NAME:2007,SERVER_INFO_CONFERENCE_NAME_MISMATCH:2008,INVALID_USER_ID:2009,INCORRECT_VERSION_RANGE:2010,SENDER_ID_MISMATCH:2011,RECIPIENT_NOT_SPECIFIED:2012,FIELD_NOT_ALLOWED:2013,USERS_NOT_SPECIFIED:2015,REQUEST_UNACCEPTABLE_FOR_ENDPOINT_STATE:2016,INVALID_CALL_ID:2017,SESSION_DESCRIPTION_ID_MISMATCH:2018,EMPTY_CLIENT_MEDIA_UPDATES:2019,INVALID_SERVER_INFO_DATA:2020,INCORRECT_STATE_VERSION:2021,MISMATCHED_STATE_FOR_VERSION:2022,INVALID_STATE_VERSION:2023,NO_RESOLVER_FOUND:2024,MISSING_APPROVERLIST:2025,FULL_SDP_REQUIRED_IN_APPROVED_STATE:2026,INVALID_BROADCAST_ID:2027,INVALID_ENDPOINT_CONFIG:2028,INVALID_E2EE_STATE:2029,SFU_MODE_PREVENTED:2030,INVALID_CONFERENCE_STATE:2031,JOIN_REQUEST_DENIED:2032,EMPTY_USER_IDS:2033,MISSING_SDP_CONNECT_REQUEST:2034,CALLER_HAS_APPEALABLE_CALLING_RESTRICTION:2035,MISSING_BODY_ENDPOINT:2101,MISSING_BODY_HEADER:2102,MISSING_BODY_BODY:2103,MISSING_BODY_PARAMS:2104,MISSING_BODY_REMOVE_PARTICIPANTS_REQUEST:2105,MISSING_BODY_DATA_MESSAGE_REQUEST:2106,MISSING_BODY_CLIENT_MEDIA_UPDATE_REQUEST:2107,MISSING_BODY_ADD_PARTICIPANTS_REQUEST:2108,MISSING_BODY_SUBSCRIPTION_REQUEST:2110,MISSING_BODY_JOIN_REQUEST:2111,MISSING_BODY_HANGUP_REQUEST:2112,MISSING_BODY_ICE_CANDIDATE_REQUEST:2113,MISSING_BODY_P2P_MESSAGE_REQUEST:2114,MISSING_BODY_UPDATE_REQUEST:2115,MISSING_BODY_CLIENT_EVENT_REQUEST:2116,MISSING_BODY_CONNECT_REQUEST:2117,MISSING_BODY_UNSUBSCRIBE_REQUEST:2118,MISSING_BODY_APPROVAL_REQUEST:2119,MISSING_ENDPOINT_USER_ID:2120,EMPTY_ENDPOINT_USER_ID:2121,MISSING_BODY_TRANSFER_REQUEST:2122,MISSING_BODY_GENERIC:2199,REQUESTOR_NOT_MEMBER_CONFERENCE:3002,NOT_BROADCAST_OWNER:3003,GUEST_NOT_INVITED:3004,GUEST_DISCONNECTED:3005,GUEST_INVITATION_EXPIRED:3006,PARTICIPANT_IN_PENDING_APPROVAL_STATE:3008,INVALID_MULTIWAY_PARAMS:3009,BROADCAST_ALREADY_STOPPED:4002,FAILED_TO_GENERATE_SDP_ANSWER:4003,FAILED_GENERATE_SESSION_DESCRIPTION:4004,SDP_SESSION_ID_MISMATCH:4005,MEDIA_ENDPOINT_GONE:4007,MEDIA_ENDPOINT_ALREADY_EXISTS:4008,MEDIA_ENDPOINT_EXISTS_DIFFERENT_SESSION_ID:4009,LEGACY_MESSENGER_SENDER_UNSET:4010,FAILED_TO_SET_TRANSPORT_INFO:4011,NON_PRIMARY_MULTIWAY_SERVER:4012,FAILED_TO_GET_REMOTE_DESCRIPTION:4013,LOCAL_DESCRIPTION_NOT_SET:4014,INVALID_SDP_TYPE:4015,CLIENT_MEDIA_UPDATE_WITHOUT_REMOTE_SDP_INFO:4016,SDP_UNSET_ON_P2P_ANSWER:4017,MISSING_ICE_CANDIDATE_PAYLOAD:4018,P2P_PROTOCOL_UNSET:4019,CREATE_ACK_FOR_INVALID_MESSAGE_TYPE:4020,LEGACY_CLIENT_CANNOT_JOIN_SFU_MODE:4021,CONNECT_UNSUPPORTED_IN_SFU_MODE:4022,CONNECT_UNSUPPORTED_FOR_JOINED_ENDPOINTS:4023,RESOLVE_STATE_API_ERROR:4024,EXTERNAL_RESOLUTION_ERROR:4025,INTERNAL_RESOLUTION_ERROR:4026,RESOLUTION_DISABLED:4027,BROADCAST_ID_MISSING:4028,SDP_UNSET_ON_P2P_OFFER:4029,LEGACY_OFFER_MISSING_REQUIRED_VALUE:4031,MEDIA_SERVER_STATE_SYNC_DESERIALIZATION_ERROR:4032,CONNECT_UNSUPPORTED_FOR_PRECONNECTED_USERS:4033,OTHER_USER_ANSWERED_THE_CALL:4034,MEDIA_SERVER_DESERIALIZATION_ERROR:4035,REMOTE_SDP_TRACKID_MISMATCH:4036,SIGNALING_MESSAGE_TO_CLIENT_DROPPED:4037,DATA_CHANNEL_ENDPOINT_GONE:4038,DATA_CHANNEL_ENDPOINT_ALREADY_EXISTS:4039,CONNECT_UNSUPPORTED_DURING_P2P_TO_SFU_ESCALATION:4040,P2P_CONNECT_UNSUPPORTED_AFTER_SFU_ESCALATION:4041,CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_CONFERENCE:4042,CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_USER:4043,REQUEST_TIMEOUT:4044,TOO_MANY_MEDIA_TRACKS_IN_SDP:4045,CONFERENCE_NOT_FOUND:5001,CONFERENCE_IS_TERMINATING:5002,CONFERENCE_IS_TERMINATED:5003,CONFERENCE_NAME_EMPTY:5004,NONCE_EMPTY:5005,NONCE_MISMATCH:5006,CONFERENCE_HAS_GONE:5007,PARTICIPANT_HAS_GONE:5008,MEDIA_SERVER_NOT_FOUND:5009,CLIENT_TERMINATED:5010,JOIN_SESSION_RESULT_MISSING:5012,LOGGING_POLICY_RESULT_MISSING:5013,INVITE_USERS_RESULT_MISSING:5014,STATE_SYNC_RESULT_MISSING:5015,ENDPOINT_INFO_RESULT_MISSING:5016,MEDIA_CODECS_UNSUPPORTED_BY_CONFERENCE:6001,CONFERENCE_INCAPABLE_RENEGOTIATION:6002,REJECTING_CMU_WHEN_SMU_PENDING:6003,PARTICIPANT_NOT_SUBSCRIBED_TO_TOPIC:6004,PARTICIPANT_ALREADY_IN_WAITING_ROOM:6005,PARTICIPANT_NOT_IN_PENDING_APPROVAL:6006,USER_NOT_APPROVER_FOR_TARGET_USER:6007,UNSUPPORTED_CAPABILITIES:6008,PRODUCT_SERVER_DEFINED_END_REASON:6009,WWW_KILLSWITCHED_REQUEST:6010,CONFLICTING_MEDIA_PATH:6011,CONFLICTING_MEDIA_STATUS:6012,CONFLICTING_SESSION_DESCRIPTION:6013,OK:9e3});f["default"]=a}),66);
__d("multiway_SubscriptionType",[],(function(a,b,c,d,e,f){a=Object.freeze({CNAME:0,TRACK:1,DOMINANT_SPEAKER:2});f["default"]=a}),66);
__d("multiway_VideoQuality",[],(function(a,b,c,d,e,f){a=Object.freeze({LOW:0,MEDIUM:1,HIGH:2,HD:3,NUM_QUALITIES:4});f["default"]=a}),66);
__d("ZenonMWMessageTypes",["$InternalEnum","fbwebrtc_ClientStack","multiway_ApprovalStatus","multiway_Capability","multiway_ClientEventType","multiway_ConferenceType","multiway_DeviceStatus","multiway_DismissReason","multiway_E2eeMode","multiway_EndpointServiceType","multiway_HangupReason","multiway_JoinMode","multiway_MediaPath","multiway_MediaPauseStatus","multiway_MessageTag","multiway_MessageType","multiway_ParticipantCallState","multiway_RingType","multiway_RtcResponseStatusCode","multiway_RtcResponseSubCode","multiway_SubscriptionType","multiway_VideoQuality"],(function(a,b,c,d,e,f,g){"use strict";a=b("$InternalEnum")({DEFAULT_AUDIO:0,DEFAULT_VIDEO:1,SCREEN_AUDIO:2,SCREEN_VIDEO:3});g.ZenonMWClientStack=c("fbwebrtc_ClientStack");g.ZenonMWApprovalStatus=c("multiway_ApprovalStatus");g.ZenonMWCapability=c("multiway_Capability");g.ZenonMWClientEventType=c("multiway_ClientEventType");g.ZenonMWConferenceType=c("multiway_ConferenceType");g.ZenonMWDeviceStatus=c("multiway_DeviceStatus");g.ZenonMWDismissReason=c("multiway_DismissReason");g.ZenonMWE2eeMode=c("multiway_E2eeMode");g.ZenonMWEndpointServiceType=c("multiway_EndpointServiceType");g.ZenonMWHangupReason=c("multiway_HangupReason");g.ZenonMWMediaPath=c("multiway_MediaPath");g.ZenonMWJoinMode=c("multiway_JoinMode");g.ZenonMWMediaPauseStatus=c("multiway_MediaPauseStatus");g.ZenonMWMessageTag=c("multiway_MessageTag");g.ZenonMWSignalingPayloadType=c("multiway_MessageType");g.ZenonMWParticipantCallState=c("multiway_ParticipantCallState");g.ZenonMWRingType=c("multiway_RingType");g.ZenonMWResponseStatusCode=c("multiway_RtcResponseStatusCode");g.ZenonMWResponseSubCode=c("multiway_RtcResponseSubCode");g.ZenonMWSubscriptionType=c("multiway_SubscriptionType");g.ZenonMWVideoQuality=c("multiway_VideoQuality");g.ZenonMWTrackLabel=a}),98);
__d("ZenonMediaError",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["ConnectionClosed","IceDisconnected","IceFailure","SetLocalSdpFailed","SetRemoteSdpFailed","RollbackSdpFailed","UnknownError"]);f.ZenonMediaError=a}),66);
__d("ZenonDismissReason",["$InternalEnum","FBLogger","ZenonIncomingRingSDKTypes","ZenonMWMessageTypes","ZenonMediaError"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("$InternalEnum")({IgnoreCall:0,HangupCall:1,InAnotherCall:2,AcceptAfterHangUp:3,NoAnswerTimeout:4,IncomingTimeout:5,OtherInstanceHandled:6,SignalingMessageFailed:7,ConnectionDropped:8,ClientInterrupted:9,WebRTCError:10,ClientError:11,NoPermission:12,OtherNotCapable:13,NoUIShown:14,VersionUnsupported:15,CallerNotVisible:16,CarrierBlocked:17,OtherCarrierBlocked:18,ClientEncryptionError:19,MicrophonePermissionDenied:20,CameraPermissionDenied:21,SessionMigrated:22,RingMuted:23,JoinApprovalDenied:24,RejectedByCallee:25,CallEndedByProduct:26,CallEnded:27,AnsweredOnAnotherDevice:28,RejectedOnAnotherDevice:29,CallCollision:30,MaxAllowedParticipantsReached:31,UnexpectedEndOfCall:32,TxAckTimeout:33,EndToEndEncryptionInvariantViolated:34,ProductServerDefinedEndReason:35,RemovedByParticipant:39,AnsweredByOtherUser:40,CallerHasAppealableCallingRestriction:41});function a(a){switch(a){case"BreakoutSessionSwitchRoom":return i.HangupCall;case"CallEndAcceptAfterHangUp":return i.AcceptAfterHangUp;case"CallerNotVisible":return i.CallerNotVisible;case"CarrierBlocked":return i.CarrierBlocked;case"ClientEncryptionError":return i.ClientEncryptionError;case"ClientError":return i.ClientError;case"ClientInterrupted":return i.ClientInterrupted;case"ConnectionDropped":return i.ConnectionDropped;case"HangupCall":return i.HangupCall;case"IgnoreCall":return i.IgnoreCall;case"InAnotherCall":return i.InAnotherCall;case"EndToEndEncryptionInvariantViolated":return i.EndToEndEncryptionInvariantViolated;case"InactiveTimeout":return i.CallEnded;case"IncomingTimeout":return i.IncomingTimeout;case"MaxAllowedParticipantsReached":return i.MaxAllowedParticipantsReached;case"NoAnswerTimeout":return i.NoAnswerTimeout;case"NoPermission":return i.NoPermission;case"NoUIShown":return i.NoUIShown;case"OtherCarrierBlocked":return i.OtherCarrierBlocked;case"OtherInstanceHandled":return i.OtherInstanceHandled;case"OtherNotCapable":return i.OtherNotCapable;case"SignalingMessageFailed":return i.SignalingMessageFailed;case"UnexpectedEndOfCall":return i.UnexpectedEndOfCall;case"Unknown":return i.CallEnded;case"VersionUnsupported":return i.VersionUnsupported;case"WebRTCError":return i.WebRTCError;case"MicrophonePermissionDenied":return i.MicrophonePermissionDenied;case"CameraPermissionDenied":return i.CameraPermissionDenied;case"SessionMigrated":return i.SessionMigrated;case"RingMuted":return i.RingMuted;case"TxAckTimeout":return i.TxAckTimeout;case"ProductServerDefinedEndReason":return i.ProductServerDefinedEndReason;case"RemovedByParticipant":return i.RemovedByParticipant;case"CallerHasAppealableCallingRestriction":return i.CallerHasAppealableCallingRestriction}}function e(a){switch(a){case i.CallEnded:case i.CallEndedByProduct:case i.HangupCall:return"HangupCall";case i.IgnoreCall:case i.JoinApprovalDenied:case i.RejectedByCallee:return"IgnoreCall";case i.InAnotherCall:return"InAnotherCall";case i.AcceptAfterHangUp:return"CallEndAcceptAfterHangUp";case i.NoAnswerTimeout:return"NoAnswerTimeout";case i.IncomingTimeout:return"IncomingTimeout";case i.AnsweredOnAnotherDevice:case i.CallCollision:case i.RejectedOnAnotherDevice:case i.OtherInstanceHandled:case i.AnsweredByOtherUser:return"OtherInstanceHandled";case i.SignalingMessageFailed:return"SignalingMessageFailed";case i.ConnectionDropped:return"ConnectionDropped";case i.ClientInterrupted:return"ClientInterrupted";case i.WebRTCError:return"WebRTCError";case i.ClientError:return"ClientError";case i.NoPermission:return"NoPermission";case i.OtherNotCapable:return"OtherNotCapable";case i.NoUIShown:return"NoUIShown";case i.VersionUnsupported:return"VersionUnsupported";case i.CallerNotVisible:return"CallerNotVisible";case i.CarrierBlocked:return"CarrierBlocked";case i.OtherCarrierBlocked:return"OtherCarrierBlocked";case i.ClientEncryptionError:return"ClientEncryptionError";case i.UnexpectedEndOfCall:return"UnexpectedEndOfCall";case i.MaxAllowedParticipantsReached:return"MaxAllowedParticipantsReached";case i.MicrophonePermissionDenied:return"MicrophonePermissionDenied";case i.CameraPermissionDenied:return"CameraPermissionDenied";case i.SessionMigrated:return"SessionMigrated";case i.RingMuted:return"RingMuted";case i.TxAckTimeout:return"TxAckTimeout";case i.EndToEndEncryptionInvariantViolated:return"EndToEndEncryptionInvariantViolated";case i.ProductServerDefinedEndReason:return"ProductServerDefinedEndReason";case i.RemovedByParticipant:return"RemovedByParticipant";case i.CallerHasAppealableCallingRestriction:return"CallerHasAppealableCallingRestriction"}c("FBLogger")("rtc_www").mustfix("Unknown dismiss reason: %s",a);return"Unknown"}function f(a){switch(a){case i.OtherInstanceHandled:case i.AnsweredOnAnotherDevice:case i.AnsweredByOtherUser:case i.RejectedOnAnotherDevice:return d("ZenonIncomingRingSDKTypes").ZenonCancelReason.OtherDismiss;default:return d("ZenonIncomingRingSDKTypes").ZenonCancelReason.Hangup}}function j(a){switch(a){case d("ZenonMediaError").ZenonMediaError.IceDisconnected:return i.ConnectionDropped;case d("ZenonMediaError").ZenonMediaError.ConnectionClosed:return i.HangupCall;case d("ZenonMediaError").ZenonMediaError.IceFailure:case d("ZenonMediaError").ZenonMediaError.SetLocalSdpFailed:case d("ZenonMediaError").ZenonMediaError.SetRemoteSdpFailed:case d("ZenonMediaError").ZenonMediaError.RollbackSdpFailed:return i.WebRTCError;case d("ZenonMediaError").ZenonMediaError.UnknownError:return i.UnexpectedEndOfCall}}function k(a){return l[a]}var l=Object.freeze((b={},b[(h=d("ZenonMWMessageTypes")).ZenonMWDismissReason.CALL_ENDED]=i.CallEnded,b[h.ZenonMWDismissReason.ANSWERED_ON_ANOTHER_DEVICE]=i.AnsweredOnAnotherDevice,b[h.ZenonMWDismissReason.ANSWERED_BY_OTHER_USER]=i.AnsweredByOtherUser,b[h.ZenonMWDismissReason.IN_ANOTHER_CALL]=i.InAnotherCall,b[h.ZenonMWDismissReason.CONNECTION_DROPPED]=i.ConnectionDropped,b[h.ZenonMWDismissReason.REJECTED_ON_ANOTHER_DEVICE]=i.RejectedOnAnotherDevice,b[h.ZenonMWDismissReason.REJECTED_BY_CALLEE]=i.RejectedByCallee,b[h.ZenonMWDismissReason.CALL_ENDED_BY_PRODUCT]=i.CallEndedByProduct,b[h.ZenonMWDismissReason.INTERNAL_ERROR]=i.SignalingMessageFailed,b[h.ZenonMWDismissReason.REMOVED_BY_PARTICIPANT]=i.RemovedByParticipant,b[h.ZenonMWDismissReason.TX_ACK_TIMEDOUT]=i.TxAckTimeout,b));g.ZenonDismissReason=i;g.endCallToDismissReason=a;g.dismissToEndCallReason=e;g.dismissReasonToCancelReason=f;g.mediaErrorToDismissReason=j;g.mwDismissToDmissReason=k}),98);
__d("ZenonMWThriftMessageTagUtils",["MultiwayCommonTypes"],(function(a,b,c,d,e,f,g){"use strict";function h(a){switch(a){case d("MultiwayCommonTypes").MessageTag.PRANSWER:return 1001;case d("MultiwayCommonTypes").MessageTag.INITIAL_ANSWER_TO_P2P_CALLER:return 1002;case d("MultiwayCommonTypes").MessageTag.DEESCALATE_OFFER_TO_P2P_CALLEE:return 1003;case d("MultiwayCommonTypes").MessageTag.DEESCALATE_ANSWER_TO_P2P_CALLER:return 1004;case d("MultiwayCommonTypes").MessageTag.REQUEST_DEESCALATE_TO_P2P_CALLER:return 1005;case d("MultiwayCommonTypes").MessageTag.REQUEST_ESCALATE:return 1006;case d("MultiwayCommonTypes").MessageTag.REQUEST_CLIENT_FULL_RENEGOTIATION_TO_ADMIT_FROM_WAITINGROOM:return 1007;case d("MultiwayCommonTypes").MessageTag.REQUEST_CLIENT_FULL_RENEGOTIATION_AGAINST_MWS:return 1008;case d("MultiwayCommonTypes").MessageTag.PARTICIPANT_ADDED:return 1009;case d("MultiwayCommonTypes").MessageTag.PARTICIPANT_REMOVED:return 1010;case d("MultiwayCommonTypes").MessageTag.FIRST_REMOTE_ALERTED_FOR_INITIATOR:return 2001;case d("MultiwayCommonTypes").MessageTag.FIRST_REMOTE_ANSWERED_FOR_INITIATOR:return 2002;case d("MultiwayCommonTypes").MessageTag.CONTAIN_PENDING_APPROVAL_PARTICIPANTS:return 2003;case d("MultiwayCommonTypes").MessageTag.KEEP_ALIVE_PING:return 3001;case d("MultiwayCommonTypes").MessageTag.IS_INITIATOR:return 4001;case d("MultiwayCommonTypes").MessageTag.PREGEN_SDP:return 4002}}function a(a){switch(a){case 1001:return d("MultiwayCommonTypes").MessageTag.PRANSWER;case 1002:return d("MultiwayCommonTypes").MessageTag.INITIAL_ANSWER_TO_P2P_CALLER;case 1003:return d("MultiwayCommonTypes").MessageTag.DEESCALATE_OFFER_TO_P2P_CALLEE;case 1004:return d("MultiwayCommonTypes").MessageTag.DEESCALATE_ANSWER_TO_P2P_CALLER;case 1005:return d("MultiwayCommonTypes").MessageTag.REQUEST_DEESCALATE_TO_P2P_CALLER;case 1006:return d("MultiwayCommonTypes").MessageTag.REQUEST_ESCALATE;case 1007:return d("MultiwayCommonTypes").MessageTag.REQUEST_CLIENT_FULL_RENEGOTIATION_TO_ADMIT_FROM_WAITINGROOM;case 1008:return d("MultiwayCommonTypes").MessageTag.REQUEST_CLIENT_FULL_RENEGOTIATION_AGAINST_MWS;case 1009:return d("MultiwayCommonTypes").MessageTag.PARTICIPANT_ADDED;case 1010:return d("MultiwayCommonTypes").MessageTag.PARTICIPANT_REMOVED;case 2001:return d("MultiwayCommonTypes").MessageTag.FIRST_REMOTE_ALERTED_FOR_INITIATOR;case 2002:return d("MultiwayCommonTypes").MessageTag.FIRST_REMOTE_ANSWERED_FOR_INITIATOR;case 2003:return d("MultiwayCommonTypes").MessageTag.CONTAIN_PENDING_APPROVAL_PARTICIPANTS;case 3001:return d("MultiwayCommonTypes").MessageTag.KEEP_ALIVE_PING;case 4001:return d("MultiwayCommonTypes").MessageTag.IS_INITIATOR;case 4002:return d("MultiwayCommonTypes").MessageTag.PREGEN_SDP}}function b(a){var b=[];a==null?void 0:a.forEach(function(a){a&&b.push(h(a))});return b}g.toThriftMessageTag=a;g.fromThriftMessageTags=b}),98);
__d("ZenonCallsModelTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";c=(a=b("$InternalEnum")).Mirrored(["Disconnected","Precontacting","Contacting","Ringing","PendingApproval","Approved","FailedApproval","Connecting","Connected","Reconnecting","ProvisionalRinging"]);d=a.Mirrored(["Facebook","Instagram","Messenger","Guest","WhatsApp","Workplace"]);e=a.Mirrored(["New","Connecting","PendingApproval","Connected","Terminating","Terminated"]);b=a.Mirrored(["Unknown","CallsBlocked","PageAdminPressedDecline"]);a=a.Mirrored(["None","PendingPeerFeedback","Declined","RemoteDeclined","LocalDeclined","Cancelled","TimedOut","Accepted","InitiatedFromPeer"]);f.ZenonCallParticipantState=c;f.ZenonCallParticipantType=d;f.ZenonCallState=e;f.ZenonEndCallSubreason=b;f.ZenonVideoEscalationStatus=a}),66);
__d("ZenonParticipantState",["$InternalEnum","ZenonCallsModelTypes"],(function(a,b,c,d,e,f,g){"use strict";var h=b("$InternalEnum")({UNKNOWN:0,ADDING:1,CONTACTING:2,RINGING:3,ACCEPTING:4,PRECONNECTING:5,CONNECTING:6,CONNECTED:7,REMOVING:8,DISCONNECTED:9,NO_ANSWER:10,REJECTED:11,UNREACHABLE:12,CONNECTION_DROPPED:13,PARTICIPANT_LIMIT_REACHED:14,IN_ANOTHER_CALL:15,RING_TYPE_UNSUPPORTED:16,PENDING_APPROVAL:17,APPROVING:18,DENYING:19,APPROVED:20,FAILED_APPROVAL:21,HANGUP_IN_WAITING_ROOM:22,RECONNECTING:23});function a(a){if(a==null)return d("ZenonCallsModelTypes").ZenonCallParticipantState.Disconnected;switch(a){case h.CONTACTING:case h.PRECONNECTING:return d("ZenonCallsModelTypes").ZenonCallParticipantState.Contacting;case h.RINGING:return d("ZenonCallsModelTypes").ZenonCallParticipantState.Ringing;case h.CONNECTING:case h.RECONNECTING:return d("ZenonCallsModelTypes").ZenonCallParticipantState.Connecting;case h.CONNECTED:return d("ZenonCallsModelTypes").ZenonCallParticipantState.Connected;case h.PENDING_APPROVAL:case h.APPROVING:case h.DENYING:case h.ACCEPTING:case h.ADDING:case h.REMOVING:return d("ZenonCallsModelTypes").ZenonCallParticipantState.PendingApproval;case h.APPROVED:return d("ZenonCallsModelTypes").ZenonCallParticipantState.Approved;case h.FAILED_APPROVAL:return d("ZenonCallsModelTypes").ZenonCallParticipantState.FailedApproval;case h.HANGUP_IN_WAITING_ROOM:case h.UNKNOWN:case h.DISCONNECTED:case h.NO_ANSWER:case h.REJECTED:case h.UNREACHABLE:case h.CONNECTION_DROPPED:case h.PARTICIPANT_LIMIT_REACHED:case h.IN_ANOTHER_CALL:case h.RING_TYPE_UNSUPPORTED:return d("ZenonCallsModelTypes").ZenonCallParticipantState.Disconnected}return d("ZenonCallsModelTypes").ZenonCallParticipantState.Disconnected}g.ZenonParticipantState=h;g.toCallParticipantState=a}),98);
__d("ZenonScreenShare",["UserAgent","ZenonAppProvider","justknobx"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a.length===1&&((a=a[0])==null?void 0:a.contentType)==="screen"}function h(){return!c("UserAgent").isBrowser("Safari")}function i(){return d("ZenonAppProvider").isOculusCastingSite()&&c("justknobx")._("1977")?!1:!0}function b(){return!h()||!i()}g.isScreenSharingTrack=a;g.screenShareWithReplaceTrack=b}),98);
__d("ZenonSignalingTypes",[],(function(a,b,c,d,e,f){"use strict";a={OK:0,REJECTED_FROM_VERSION_DOES_NOT_MATCH:1,METHOD_NOT_ALLOWED:2};b={CLIENT_TERMINATED:0};f.ZenonSignalingStatusCode=a;f.ZenonSignalingStatusSubCode=b}),66);
__d("addDevTierOverridesToHeaderExtensions",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b={multiwayCoreTier:"",multiwayWwwTier:""};if(!c("gkx")("25224"))return b;b.multiwayWwwTier=h(a,"multiway_www_tier");b.multiwayCoreTier=h(a,"multiway_core_tier");return b}function h(a,b){b=b+"=";a=a.split(b);return a[1]?a.pop().split("&").shift():""}g["default"]=a}),98);
__d("ZenonMWThriftTranslatorUtils",["MultiwayCommonTypes","MultiwaySharedTypes","OverlayConfigServerLayer","RequestStreamBodyUtils","WebrtcSignalingCommonTypes","ZenonDismissReason","ZenonMWMessageTypes","ZenonMWThriftMessageTagUtils","ZenonParticipantState","ZenonScreenShare","ZenonSignalingProtocol","ZenonSignalingTypes","addDevTierOverridesToHeaderExtensions","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k="signalingDominantSpeakerUpdate",l="signalingVideoUploadUpdate",m="E2eeState",n=new Map(Array.from(d("MultiwaySharedTypes").ConferenceType.members(),function(a){return[d("MultiwaySharedTypes").ConferenceType.getName(a),a]}));function a(a,b,c,d){c===void 0&&(c=!1),a&&Object.keys(a).forEach(function(e){if(e===m&&d)return;var f=a[e],g=f.data;f=f.version;if(g!=null){g={data:g,eventName:"stateSyncNotifyRequest",responseRequired:c,topic:e,version:f};b.push(g)}})}function b(a){if(a){a=a[m];return a==null?void 0:a.data}}function e(a){if(a==null)return d("ZenonMWMessageTypes").ZenonMWMediaPath.UNKNOWN;switch(a){case d("MultiwaySharedTypes").MediaPath.SFU:return d("ZenonMWMessageTypes").ZenonMWMediaPath.SFU;case d("MultiwaySharedTypes").MediaPath.P2P:return d("ZenonMWMessageTypes").ZenonMWMediaPath.P2P;default:return d("ZenonMWMessageTypes").ZenonMWMediaPath.UNKNOWN}}function f(a){if(a==null)return d("ZenonParticipantState").ZenonParticipantState.UNKNOWN;switch(a){case d("MultiwayCommonTypes").ParticipantCallState.DISCONNECTED:return d("ZenonParticipantState").ZenonParticipantState.DISCONNECTED;case d("MultiwayCommonTypes").ParticipantCallState.NO_ANSWER:return d("ZenonParticipantState").ZenonParticipantState.NO_ANSWER;case d("MultiwayCommonTypes").ParticipantCallState.REJECTED:return d("ZenonParticipantState").ZenonParticipantState.REJECTED;case d("MultiwayCommonTypes").ParticipantCallState.UNREACHABLE:case d("MultiwayCommonTypes").ParticipantCallState.UNCALLABLE:return d("ZenonParticipantState").ZenonParticipantState.UNREACHABLE;case d("MultiwayCommonTypes").ParticipantCallState.CONNECTION_DROPPED:return d("ZenonParticipantState").ZenonParticipantState.CONNECTION_DROPPED;case d("MultiwayCommonTypes").ParticipantCallState.CONTACTING:return d("ZenonParticipantState").ZenonParticipantState.CONTACTING;case d("MultiwayCommonTypes").ParticipantCallState.RINGING:return d("ZenonParticipantState").ZenonParticipantState.RINGING;case d("MultiwayCommonTypes").ParticipantCallState.CONNECTING:return d("ZenonParticipantState").ZenonParticipantState.CONNECTING;case d("MultiwayCommonTypes").ParticipantCallState.CONNECTED:return d("ZenonParticipantState").ZenonParticipantState.CONNECTED;case d("MultiwayCommonTypes").ParticipantCallState.PARTICIPANT_LIMIT_REACHED:return d("ZenonParticipantState").ZenonParticipantState.PARTICIPANT_LIMIT_REACHED;case d("MultiwayCommonTypes").ParticipantCallState.IN_ANOTHER_CALL:return d("ZenonParticipantState").ZenonParticipantState.IN_ANOTHER_CALL;case d("MultiwayCommonTypes").ParticipantCallState.RING_TYPE_UNSUPPORTED:return d("ZenonParticipantState").ZenonParticipantState.RING_TYPE_UNSUPPORTED;case d("MultiwayCommonTypes").ParticipantCallState.PENDING_APPROVAL:return d("ZenonParticipantState").ZenonParticipantState.PENDING_APPROVAL;case d("MultiwayCommonTypes").ParticipantCallState.APPROVED:return d("ZenonParticipantState").ZenonParticipantState.APPROVED;case d("MultiwayCommonTypes").ParticipantCallState.FAILED_APPROVAL:return d("ZenonParticipantState").ZenonParticipantState.FAILED_APPROVAL;case d("MultiwayCommonTypes").ParticipantCallState.HANGUP_IN_WAITING_ROOM:return d("ZenonParticipantState").ZenonParticipantState.HANGUP_IN_WAITING_ROOM;default:return d("ZenonParticipantState").ZenonParticipantState.UNKNOWN}}function o(a){var b=null;a!=null&&a.forEach(function(a){a=(a=a.body)==null?void 0:a.genericMessage;if(a!=null&&a.topic==="collision_context_payload"){a=a.data;if(a!=null){var c;a=JSON.parse(d("RequestStreamBodyUtils").uint8ArrayToString(a));b={groupThreadID:(c=a.group_thread_id)!=null?c:null,peerID:(c=a.peer_id)!=null?c:null,serverInfoData:(c=a.server_info_data)!=null?c:null}}}});return b}function p(a){a=a&&a.length>0?a.find(function(a){return((a=a.body)==null?void 0:(a=a.genericMessage)==null?void 0:a.topic)==="room_metadata"}):null;if(a){var b;b=(b=a.body)==null?void 0:(b=b.genericMessage)==null?void 0:b.data;if(b!=null){b=JSON.parse(d("RequestStreamBodyUtils").uint8ArrayToString(b));a=(a=a.header)==null?void 0:a.sender;if(b.link_hash!=null&&b.room_name!=null&&a!=null)return{linkHash:b.link_hash,profileURL:b.profile_url,ringSubtitle:b.ring_subtitle,roomName:b.room_name,sender:a}}}return null}function q(a){return a.reduce(function(a,b){var c;c=(c=b.body)==null?void 0:(c=c.genericMessage)==null?void 0:c.topic;b=(b=b.body)==null?void 0:(b=b.genericMessage)==null?void 0:b.data;c!=null&&b!=null&&(a[c]=d("RequestStreamBodyUtils").uint8ArrayToString(b));return a},{})}function r(a){switch(a){case d("ZenonMWMessageTypes").ZenonMWMediaPath.SFU:return d("MultiwaySharedTypes").MediaPath.SFU;case d("ZenonMWMessageTypes").ZenonMWMediaPath.P2P:return d("MultiwaySharedTypes").MediaPath.P2P;default:return d("MultiwaySharedTypes").MediaPath.UNKNOWN}}function s(a,b,c){c===void 0&&(c=0);var d={fromVersion:b,tracks:[],version:c};a!=null&&Object.keys(a.tracks).forEach(function(b){var c,e=a.tracks[b];c={enabled:e.enabled,name:(c=e.name)!=null?c:"",participantID:(c=e.owner)!=null?c:"0",trackID:b,type:t(e.label)};d.tracks.push(c)});return d}function t(a){if(a==null)return null;switch(a){case d("WebrtcSignalingCommonTypes").TrackLabel.DEFAULT_AUDIO:return"audio";case d("WebrtcSignalingCommonTypes").TrackLabel.DEFAULT_VIDEO:return"video";case d("WebrtcSignalingCommonTypes").TrackLabel.SCREEN_AUDIO:return"screen_audio";case d("WebrtcSignalingCommonTypes").TrackLabel.SCREEN_VIDEO:return"screen";default:return null}}function u(a,b){b=c("OverlayConfigServerLayer").createFromHeader(b);if(b){b={eventName:"overlayConfigServerUpdateRequest",serverLayer:b};a.push(b)}}function v(a){var b=a.header,c=a.rtcMessageBody;a=a.type;b=A(b,a);a={messageBody:c,messageHeader:b};return a}function w(a){var b=a.header,c=a.rtcMessageBody,d=a.statusCode,e=a.subCode;a=a.type;b=H(b,a,d,e);a={messageBody:c,messageHeader:b};return a}var x={IN_ANOTHER_CALL:(i=d("MultiwayCommonTypes")).DeviceStatus.IN_ANOTHER_CALL,NO_OP:null,NOT_SUPPORTED:i.DeviceStatus.NOT_SUPPORTED,OK:i.DeviceStatus.OK};function y(a,b){return Object.keys(a).map(function(c){var e=a[c];return{body:{genericMessage:{data:d("RequestStreamBodyUtils").stringToUint8Array(e),topic:c}},header:{recipients:new Set(b),topic_DEPRECATED:c}}})}function z(a){var b=a.clientSessionId,e=a.conferenceName,f=a.receiver,g=a.receiverUserId,h=a.sequenceNumber,i=a.serverInfoData,j=a.transactionId;if(g==null)throw c("err")("Incoming Thrift MW messages should have receiverUserId populated.");b=b;var k={userID:"2"};f={actorID:(f=f==null?void 0:f.actorId)!=null?f:null,messageID:j,messageTags:d("ZenonMWThriftMessageTagUtils").fromThriftMessageTags(a.messageTags),protocol:c("ZenonSignalingProtocol").MW,remoteInfo:k,retryCount:a.retryCount,roomInfo:{name:e},sequenceNumber:Number(h),signalingID:b,userInfo:{userID:g!=null?g:"1"}};i!=null&&(f.remoteSignalingID=i);return f}function A(a,b){var e,f=a.messageID,g=a.messageTags,h=a.remoteSignalingID,i=a.roomInfo,j=a.signalingID,k=c("addDevTierOverridesToHeaderExtensions")(window.location.href);e={clientStack:d("WebrtcSignalingCommonTypes").ClientStack.ZENON,conferenceName:(e=i.name)!=null?e:"",conferenceType:I((e=i.name)!=null?e:""),messageTags:new Set(g==null?void 0:g.map(function(a){return d("ZenonMWThriftMessageTagUtils").toThriftMessageTag(a)})),retryCount:a.retryCount,sequenceNumber:(i=a.sequenceNumber)==null?void 0:i.toString(),transactionId:f,type:b};(k.multiwayCoreTier!==""||k.multiwayWwwTier!=="")&&(e.extensions=k);j!=null&&(e.clientSessionId=j);h!=null&&(e.serverInfoData=h);a.actorID!=null&&(e.sender={id:a.actorID});return e}function B(a){switch(a){case d("ZenonDismissReason").ZenonDismissReason.IgnoreCall:return d("MultiwayCommonTypes").HangupReason.IGNORE_CALL;case d("ZenonDismissReason").ZenonDismissReason.HangupCall:return d("MultiwayCommonTypes").HangupReason.HANGUP_CALL;case d("ZenonDismissReason").ZenonDismissReason.NoAnswerTimeout:return d("MultiwayCommonTypes").HangupReason.NO_ANSWER_TIMEOUT;case d("ZenonDismissReason").ZenonDismissReason.ClientError:return d("MultiwayCommonTypes").HangupReason.CLIENT_ERROR;case d("ZenonDismissReason").ZenonDismissReason.InAnotherCall:return d("MultiwayCommonTypes").HangupReason.IN_ANOTHER_CALL;case d("ZenonDismissReason").ZenonDismissReason.ClientInterrupted:return d("MultiwayCommonTypes").HangupReason.CLIENT_INTERRUPTED;case d("ZenonDismissReason").ZenonDismissReason.SessionMigrated:return d("MultiwayCommonTypes").HangupReason.SESSION_MIGRATED;default:return d("MultiwayCommonTypes").HangupReason.HANGUP_CALL}}function C(a){a=(a=a.message.body)!=null?a:{};var b=a.dominantSpeakerSignalingInfo,c=a.genericMessage;a=a.videoUploadSignalingInfo;if(c)return d("RequestStreamBodyUtils").uint8ArrayToString(c.data);else if(b)return JSON.stringify(b);else if(a)return JSON.stringify(a);return null}function D(a){a=(a=a.message.body)!=null?a:{};var b=a.dominantSpeakerSignalingInfo,c=a.genericMessage;a=a.videoUploadSignalingInfo;if(c)return c.topic;else if(b)return k;else if(a)return l;return null}function E(a){if(a==null)return null;if(a===1)return d("MultiwaySharedTypes").EndpointServiceType.COMPOSITING_SERVICE;else return d("MultiwaySharedTypes").EndpointServiceType.UNKNOWN}function F(a){a=G(a);return a!=null?a:d("ZenonDismissReason").ZenonDismissReason.CallEnded}function G(a){if(a==null)return null;switch(a){case d("MultiwayCommonTypes").DismissReason.CALL_ENDED:return d("ZenonDismissReason").ZenonDismissReason.CallEnded;case d("MultiwayCommonTypes").DismissReason.ANSWERED_ON_ANOTHER_DEVICE:return d("ZenonDismissReason").ZenonDismissReason.AnsweredOnAnotherDevice;case d("MultiwayCommonTypes").DismissReason.ANSWERED_BY_OTHER_USER:return d("ZenonDismissReason").ZenonDismissReason.AnsweredByOtherUser;case d("MultiwayCommonTypes").DismissReason.IN_ANOTHER_CALL:return d("ZenonDismissReason").ZenonDismissReason.InAnotherCall;case d("MultiwayCommonTypes").DismissReason.CONNECTION_DROPPED:return d("ZenonDismissReason").ZenonDismissReason.ConnectionDropped;case d("MultiwayCommonTypes").DismissReason.PRIMARY_ENDPOINT_HANGUP:return d("ZenonDismissReason").ZenonDismissReason.HangupCall;case d("MultiwayCommonTypes").DismissReason.REJECTED_ON_ANOTHER_DEVICE:return d("ZenonDismissReason").ZenonDismissReason.RejectedOnAnotherDevice;case d("MultiwayCommonTypes").DismissReason.REMOVED_BY_PARTICIPANT:return d("ZenonDismissReason").ZenonDismissReason.RemovedByParticipant;case d("MultiwayCommonTypes").DismissReason.REJECTED_BY_CALLEE:return d("ZenonDismissReason").ZenonDismissReason.RejectedByCallee;case d("MultiwayCommonTypes").DismissReason.INTERNAL_ERROR:return d("ZenonDismissReason").ZenonDismissReason.SignalingMessageFailed;case d("MultiwayCommonTypes").DismissReason.CALL_ENDED_BY_PRODUCT:return d("ZenonDismissReason").ZenonDismissReason.CallEndedByProduct;case d("MultiwayCommonTypes").DismissReason.TX_ACK_TIMEDOUT:return d("ZenonDismissReason").ZenonDismissReason.TxAckTimeout;default:return null}}function H(a,b,c,e){a=A(a,b);a.responseStatusCode=c!=null?c:d("MultiwayCommonTypes").RtcResponseStatusCode.OK;a.responseSubCode=e;return a}function I(a){var b=a.indexOf(":");if(b===-1)return null;a=a.slice(0,b);return(b=n.get(a))!=null?b:null}function J(a){var b={},c=!d("ZenonScreenShare").screenShareWithReplaceTrack();a.tracks.forEach(function(a){var e={customAudioContentType:d("WebrtcSignalingCommonTypes").CustomAudioContentType.NONE,customVideoContentType:d("WebrtcSignalingCommonTypes").CustomVideoContentType.NONE,enabled:a.enabled},f=c?P(a.type):null;f!=null&&(e.label=f);b[a.trackID]=e});return{tracks:b}}function K(a){a=x[a];return a!=null?a:d("MultiwayCommonTypes").DeviceStatus.OK}function L(a){var b={};a.tracks.forEach(function(a){b[a.trackID]=a.enabled});return b}function M(a){return R[a]}function N(a){return a==null?null:S[a]}function O(a){var b={};a.forEach(function(a,c){b[c]={data:a.data,version:a.version}});return b}function P(a){switch(a){case"audio":return d("WebrtcSignalingCommonTypes").TrackLabel.DEFAULT_AUDIO;case"video":return d("WebrtcSignalingCommonTypes").TrackLabel.DEFAULT_VIDEO;case"screen":return d("WebrtcSignalingCommonTypes").TrackLabel.SCREEN_VIDEO;case"screen_audio":return d("WebrtcSignalingCommonTypes").TrackLabel.SCREEN_AUDIO;default:return null}}function Q(a){if(a===d("MultiwaySharedTypes").EndpointServiceType.COMPOSITING_SERVICE)return 1;else return 0}var R=Object.freeze((h={},h[(j=d("ZenonSignalingTypes")).ZenonSignalingStatusCode.OK]=i.RtcResponseStatusCode.OK,h[j.ZenonSignalingStatusCode.REJECTED_FROM_VERSION_DOES_NOT_MATCH]=i.RtcResponseStatusCode.CONDITIONAL_REQUEST_FAILED,h[j.ZenonSignalingStatusCode.METHOD_NOT_ALLOWED]=i.RtcResponseStatusCode.METHOD_NOT_ALLOWED,h)),S=Object.freeze((h={},h[j.ZenonSignalingStatusSubCode.CLIENT_TERMINATED]=i.RtcResponseSubCode.CLIENT_TERMINATED,h));g.addThriftStateStoreSignalingEvents=a;g.fetchE2eeServerState=b;g.fromThriftMediaPath=e;g.fromThriftParticipantState=f;g.getCollisionContextFromThriftAppMessages=o;g.getRoomMetadataFromThriftAppMessages=p;g.mwThriftAppMessagesToSignalingAppMessages=q;g.toThriftMediaPath=r;g.toZenonMediaStatesFromThrift=s;g.toMWClientTrackContentTypeFromThrift=t;g.maybeAddOverlayConfigServerUpdateRequestFromThrift=u;g.createMWThriftRequest=v;g.createMWThriftResponse=w;g.signalingMessageAppMessagesToThriftMWAppMessages=y;g.mwThriftMessageHeaderToSignalingMessageHeader=z;g.toMWThriftHangupReason=B;g.getGenericMWThriftDataMessageData=C;g.getGenericMWThriftDataMessageTopic=D;g.toThriftServiceRecipient=E;g.fromMWThriftDismissReason=F;g.getConferenceTypeFromName=I;g.toThriftMWMediaStatusEx=J;g.toMWThriftDeviceStatus=K;g.toMWThriftMediaStatus=L;g.toMWThriftResponseStatusCode=M;g.toMWThriftResponseStatusSubCode=N;g.toThriftMWSyncStateStore=O;g.toMWThriftTrackLabel=P;g.toServiceRecipientType=Q}),98);
__d("ZenonMWThriftMessageDebugLogger",["Log","LogHistory","MultiwayCommonTypes","ODS","RequestStreamBodyUtils","RpWebStateMachineLoggingBlocklist","ZenonAuditedCheckpointLogId","ZenonIceStatsParser","ZenonInfraActionsLogger","ZenonMWThriftMessageMap","ZenonMWThriftTranslatorUtils","formatDate","isEmployeeTestUserZenonLogging"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(){this.$1=d("LogHistory").getInstance("webrtc"),this.$2=new Set(c("RpWebStateMachineLoggingBlocklist").MESSAGE_TYPES)}var b=a.prototype;b.$3=function(a,b,d){b===void 0&&(b=!0);var e=c("formatDate")(new Date(),"[H:i:s:X]",{skipPatternLocalization:!0});this.$1.log("Console",e+" "+a);b&&c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"[ZP] "+a,messageID:d})};b.$4=function(a){a=a.messageHeader.responseStatusCode;return a!=null};b.logMWThriftMessage=function(a,b,e){this.$5(a,b,e);if(!c("isEmployeeTestUserZenonLogging")())return;var f=e.messageHeader,g=d("ZenonMWThriftMessageMap").messageTypeToString(e.messageHeader.type),h=this.$4(e)?"RESPONSE":"REQUEST";e=this.$6(e);a="[ms] "+a+" ["+b+"] "+g+" "+h+" [retryCount: "+f.retryCount+(e!=null?" details: "+e:"")+"]";this.$2.has(g)||this.$3(a,!0,f.transactionId)};b.$5=function(a,b,c){a=this.$7(a,b,c);a!==null&&(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_signaling",a)};b.$7=function(a,b,c){var e=c.messageBody,f=c.messageHeader,g="";if(f.type!=null)switch(f.type){case d("MultiwayCommonTypes").MessageType.DATA_MESSAGE:if(e.dataMessageRequest){g=(e=d("ZenonMWThriftTranslatorUtils").getGenericMWThriftDataMessageTopic(e.dataMessageRequest))!=null?e:"undefined"}break;default:break}e=this.$4(c)?"RESPONSE":"REQUEST";c=d("ZenonMWThriftMessageMap").messageTypeToString(f.type);if(g==="")return a+"-"+b+"-"+c+"-"+e;else return a+"-"+b+"-"+c+"-"+e+"-"+g};b.$6=function(a){var b=a.messageHeader;if(d("MultiwayCommonTypes").MessageType==null||b.type==null)return null;switch(b.type){case d("MultiwayCommonTypes").MessageType.JOIN:return this.$8(a);case d("MultiwayCommonTypes").MessageType.SERVER_MEDIA_UPDATE:return this.$9(a);case d("MultiwayCommonTypes").MessageType.CLIENT_MEDIA_UPDATE:return this.$10(a);case d("MultiwayCommonTypes").MessageType.SUBSCRIPTION:return this.$11(a);case d("MultiwayCommonTypes").MessageType.ICE_CANDIDATE:return this.$12(a);default:return null}};b.$8=function(a){var b=a.messageBody,c=a.messageHeader;if(this.$4(a)){return JSON.stringify({hasAnswer:((a=b.joinResponse)==null?void 0:a.answer)!=null,hasRenegotiationOffer:((a=b.joinResponse)==null?void 0:a.renegotiationOffer)!=null,isPendingApproval:(a=b.joinResponse)==null?void 0:a.isPendingApproval,multipleVideoStreamsAllowed:(a=b.joinResponse)==null?void 0:a.multipleVideoStreamsAllowed,statusCode:c.responseStatusCode,subCode:c.responseSubCode})}return JSON.stringify({deviceCapabilities:(a=b.joinRequest)==null?void 0:a.deviceCapabilities,sdpType:((c=b.joinRequest)==null?void 0:c.offer)!=null?"offer":((a=b.joinRequest)==null?void 0:a.answer)!=null?"answer":"null",userCapabilities:((c=b.joinRequest)==null?void 0:c.userCapabilities)?d("RequestStreamBodyUtils").uint8ArrayToString(b.joinRequest.userCapabilities):""})};b.$9=function(a){var b=a.messageBody,c=a.messageHeader;if(this.$4(a)){return JSON.stringify({currentVersion:(a=b.serverMediaUpdateResponse)==null?void 0:a.currentVersion,hasAnswer:((a=b.serverMediaUpdateResponse)==null?void 0:a.answer)!=null,statusCode:c.responseStatusCode,subCode:c.responseSubCode})}return JSON.stringify({fromVersion:(a=b.serverMediaUpdateRequest)==null?void 0:a.fromVersion,messageTags:c.messageTags,renegotiationRequested:(c=(a=b.serverMediaUpdateRequest)==null?void 0:a.renegotiationRequested)!=null?c:!1,sdpType:((a=b.serverMediaUpdateRequest)==null?void 0:a.offer)?"offer":((c=b.serverMediaUpdateRequest)==null?void 0:c.answer)?"answer":((a=b.serverMediaUpdateRequest)==null?void 0:a.update)?"delta":"empty",toVersion:(a=(c=b.serverMediaUpdateRequest)==null?void 0:c.toVersion)!=null?a:""})};b.$10=function(a){var b=a.messageBody,c=a.messageHeader;if(this.$4(a)){return JSON.stringify({currentVersion:(a=(a=b.clientMediaUpdateResponse)==null?void 0:a.currentVersion)!=null?a:"",statusCode:c.responseStatusCode,subCode:c.responseSubCode})}return JSON.stringify({fromVersion:(c=(a=b.clientMediaUpdateRequest)==null?void 0:a.fromVersion)!=null?c:"",toVersion:(c=(a=b.clientMediaUpdateRequest)==null?void 0:a.toVersion)!=null?c:""})};b.$11=function(a){var b=a.messageBody;return this.$4(a)?null:JSON.stringify({subscriptions:(b=(a=b.subscriptionRequest)==null?void 0:a.subscriptions)!=null?b:""})};b.$12=function(a){var b=a.messageBody;if(this.$4(a))return null;b=(a=b.iceCandidateRequest)==null?void 0:a.iceCandidateSdps.map(function(a){a=a.candidateSdpString;if(a!=null)return d("ZenonIceStatsParser").extractIceInfo(a)});return JSON.stringify({iceCandidates:b})};b.logSendMultiwayThriftMessageFailure=function(a,b,e){(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_multiway","send_message_failure");h.flush();e=e?"Stack Trace: "+e.stack+".":"Error msg: "+a;c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,checkpoint:"Failed to send MW Thrift message of type "+b+". "+e})};return a}();b=new a();g["default"]=b}),98);
__d("ZenonMWMessageReliabilityLogTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["RECEIVED_REQUEST","RECEIVED_RESPONSE","PROCESSING_REQUEST","START_PROCESSING_RESPONSE","PROCESSING_RESPONSE","PROCESSED_REQUEST","PROCESSED_RESPONSE","SENDING_REQUEST","SENDING_RESPONSE","SENT_REQUEST","SENT_REQUEST_FROM_HANDLER","SENT_RESPONSE","SEND_REQUEST_FAILED","SEND_REQUEST_FAILED_FROM_HANDLER","SEND_RESPONSE_FAILED","SENT_SM_EVENT","PROCESSED_SM_EVENT","REQUEST_AFTER_NULL_CHECK","REQUEST_AFTER_TRANSLATION"]);f.ZenonMWMessageReliabilityEvent=a}),66);
__d("ZenonMWThriftResponseStatusCodeUtils",["MultiwayCommonTypes","ZenonMWMessageTypes"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(a){case d("MultiwayCommonTypes").RtcResponseStatusCode.OK:return d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.OK;case d("MultiwayCommonTypes").RtcResponseStatusCode.BAD_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.BAD_REQUEST;case d("MultiwayCommonTypes").RtcResponseStatusCode.UNAUTHORIZED:return d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.UNAUTHORIZED;case d("MultiwayCommonTypes").RtcResponseStatusCode.NOT_FOUND:return d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.NOT_FOUND;case d("MultiwayCommonTypes").RtcResponseStatusCode.METHOD_NOT_ALLOWED:return d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.METHOD_NOT_ALLOWED;case d("MultiwayCommonTypes").RtcResponseStatusCode.CONFLICT:return d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.CONFLICT;case d("MultiwayCommonTypes").RtcResponseStatusCode.CONDITIONAL_REQUEST_FAILED:return d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.CONDITIONAL_REQUEST_FAILED;case d("MultiwayCommonTypes").RtcResponseStatusCode.SERVER_INTERNAL_ERROR:return d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.SERVER_INTERNAL_ERROR;case d("MultiwayCommonTypes").RtcResponseStatusCode.SERVICE_UNAVAILABLE:return d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.SERVICE_UNAVAILABLE}}function b(a){switch(a){case d("MultiwayCommonTypes").RtcResponseSubCode.UNKNOWN:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.UNKNOWN;case d("MultiwayCommonTypes").RtcResponseSubCode.EXCEEDED_MAX_ALLOWED_PARTICIPANTS:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.EXCEEDED_MAX_ALLOWED_PARTICIPANTS;case d("MultiwayCommonTypes").RtcResponseSubCode.MEMBERSHIP_CHECK_FAIL:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEMBERSHIP_CHECK_FAIL;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFERENCE_THROTTLED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFERENCE_THROTTLED;case d("MultiwayCommonTypes").RtcResponseSubCode.ENDPOINT_THROTTLED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.ENDPOINT_THROTTLED;case d("MultiwayCommonTypes").RtcResponseSubCode.MWS_MESSAGE_SENT_TO_INCORRECT_REGION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MWS_MESSAGE_SENT_TO_INCORRECT_REGION;case d("MultiwayCommonTypes").RtcResponseSubCode.UNSUPPORTED_REQUEST_TYPE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.UNSUPPORTED_REQUEST_TYPE;case d("MultiwayCommonTypes").RtcResponseSubCode.CLIENT_REQUEST_UNACCEPTABLE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CLIENT_REQUEST_UNACCEPTABLE;case d("MultiwayCommonTypes").RtcResponseSubCode.CLIENT_RESPONSE_UNACCEPTABLE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CLIENT_RESPONSE_UNACCEPTABLE;case d("MultiwayCommonTypes").RtcResponseSubCode.RING_RESPONSE_BODY_NOT_SET:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.RING_RESPONSE_BODY_NOT_SET;case d("MultiwayCommonTypes").RtcResponseSubCode.SERVER_MEDIA_UPDATE_RESPONSE_BODY_NOT_SET:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SERVER_MEDIA_UPDATE_RESPONSE_BODY_NOT_SET;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_SDP:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_SDP;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_CONFERENCE_NAME:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_CONFERENCE_NAME;case d("MultiwayCommonTypes").RtcResponseSubCode.SERVER_INFO_CONFERENCE_NAME_MISMATCH:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SERVER_INFO_CONFERENCE_NAME_MISMATCH;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_USER_ID:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_USER_ID;case d("MultiwayCommonTypes").RtcResponseSubCode.INCORRECT_VERSION_RANGE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INCORRECT_VERSION_RANGE;case d("MultiwayCommonTypes").RtcResponseSubCode.SENDER_ID_MISMATCH:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SENDER_ID_MISMATCH;case d("MultiwayCommonTypes").RtcResponseSubCode.RECIPIENT_NOT_SPECIFIED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.RECIPIENT_NOT_SPECIFIED;case d("MultiwayCommonTypes").RtcResponseSubCode.FIELD_NOT_ALLOWED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.FIELD_NOT_ALLOWED;case d("MultiwayCommonTypes").RtcResponseSubCode.USERS_NOT_SPECIFIED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.USERS_NOT_SPECIFIED;case d("MultiwayCommonTypes").RtcResponseSubCode.REQUEST_UNACCEPTABLE_FOR_ENDPOINT_STATE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.REQUEST_UNACCEPTABLE_FOR_ENDPOINT_STATE;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_CALL_ID:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_CALL_ID;case d("MultiwayCommonTypes").RtcResponseSubCode.SESSION_DESCRIPTION_ID_MISMATCH:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SESSION_DESCRIPTION_ID_MISMATCH;case d("MultiwayCommonTypes").RtcResponseSubCode.EMPTY_CLIENT_MEDIA_UPDATES:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.EMPTY_CLIENT_MEDIA_UPDATES;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_SERVER_INFO_DATA:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_SERVER_INFO_DATA;case d("MultiwayCommonTypes").RtcResponseSubCode.INCORRECT_STATE_VERSION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INCORRECT_STATE_VERSION;case d("MultiwayCommonTypes").RtcResponseSubCode.MISMATCHED_STATE_FOR_VERSION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISMATCHED_STATE_FOR_VERSION;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_STATE_VERSION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_STATE_VERSION;case d("MultiwayCommonTypes").RtcResponseSubCode.NO_RESOLVER_FOUND:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.NO_RESOLVER_FOUND;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_APPROVERLIST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_APPROVERLIST;case d("MultiwayCommonTypes").RtcResponseSubCode.FULL_SDP_REQUIRED_IN_APPROVED_STATE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.FULL_SDP_REQUIRED_IN_APPROVED_STATE;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_BROADCAST_ID:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_BROADCAST_ID;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_ENDPOINT_CONFIG:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_ENDPOINT_CONFIG;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_E2EE_STATE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_E2EE_STATE;case d("MultiwayCommonTypes").RtcResponseSubCode.SFU_MODE_PREVENTED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SFU_MODE_PREVENTED;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_CONFERENCE_STATE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_CONFERENCE_STATE;case d("MultiwayCommonTypes").RtcResponseSubCode.JOIN_REQUEST_DENIED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.JOIN_REQUEST_DENIED;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_ENDPOINT:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_ENDPOINT;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_HEADER:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_HEADER;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_BODY:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_BODY;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_PARAMS:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_PARAMS;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_REMOVE_PARTICIPANTS_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_REMOVE_PARTICIPANTS_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_DATA_MESSAGE_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_DATA_MESSAGE_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_CLIENT_MEDIA_UPDATE_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_CLIENT_MEDIA_UPDATE_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_ADD_PARTICIPANTS_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_ADD_PARTICIPANTS_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_SUBSCRIPTION_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_SUBSCRIPTION_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_JOIN_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_JOIN_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_HANGUP_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_HANGUP_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_ICE_CANDIDATE_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_ICE_CANDIDATE_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_P2P_MESSAGE_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_P2P_MESSAGE_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_UPDATE_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_UPDATE_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_CLIENT_EVENT_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_CLIENT_EVENT_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_CONNECT_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_CONNECT_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_UNSUBSCRIBE_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_UNSUBSCRIBE_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_APPROVAL_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_APPROVAL_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_ENDPOINT_USER_ID:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_ENDPOINT_USER_ID;case d("MultiwayCommonTypes").RtcResponseSubCode.EMPTY_ENDPOINT_USER_ID:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.EMPTY_ENDPOINT_USER_ID;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_TRANSFER_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_TRANSFER_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_GENERIC:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_GENERIC;case d("MultiwayCommonTypes").RtcResponseSubCode.REQUESTOR_NOT_MEMBER_CONFERENCE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.REQUESTOR_NOT_MEMBER_CONFERENCE;case d("MultiwayCommonTypes").RtcResponseSubCode.NOT_BROADCAST_OWNER:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.NOT_BROADCAST_OWNER;case d("MultiwayCommonTypes").RtcResponseSubCode.GUEST_NOT_INVITED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.GUEST_NOT_INVITED;case d("MultiwayCommonTypes").RtcResponseSubCode.GUEST_DISCONNECTED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.GUEST_DISCONNECTED;case d("MultiwayCommonTypes").RtcResponseSubCode.GUEST_INVITATION_EXPIRED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.GUEST_INVITATION_EXPIRED;case d("MultiwayCommonTypes").RtcResponseSubCode.PARTICIPANT_IN_PENDING_APPROVAL_STATE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.PARTICIPANT_IN_PENDING_APPROVAL_STATE;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_MULTIWAY_PARAMS:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_MULTIWAY_PARAMS;case d("MultiwayCommonTypes").RtcResponseSubCode.BROADCAST_ALREADY_STOPPED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.BROADCAST_ALREADY_STOPPED;case d("MultiwayCommonTypes").RtcResponseSubCode.FAILED_TO_GENERATE_SDP_ANSWER:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.FAILED_TO_GENERATE_SDP_ANSWER;case d("MultiwayCommonTypes").RtcResponseSubCode.FAILED_GENERATE_SESSION_DESCRIPTION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.FAILED_GENERATE_SESSION_DESCRIPTION;case d("MultiwayCommonTypes").RtcResponseSubCode.SDP_SESSION_ID_MISMATCH:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SDP_SESSION_ID_MISMATCH;case d("MultiwayCommonTypes").RtcResponseSubCode.MEDIA_ENDPOINT_GONE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEDIA_ENDPOINT_GONE;case d("MultiwayCommonTypes").RtcResponseSubCode.MEDIA_ENDPOINT_ALREADY_EXISTS:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEDIA_ENDPOINT_ALREADY_EXISTS;case d("MultiwayCommonTypes").RtcResponseSubCode.MEDIA_ENDPOINT_EXISTS_DIFFERENT_SESSION_ID:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEDIA_ENDPOINT_EXISTS_DIFFERENT_SESSION_ID;case d("MultiwayCommonTypes").RtcResponseSubCode.LEGACY_MESSENGER_SENDER_UNSET:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.LEGACY_MESSENGER_SENDER_UNSET;case d("MultiwayCommonTypes").RtcResponseSubCode.FAILED_TO_SET_TRANSPORT_INFO:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.FAILED_TO_SET_TRANSPORT_INFO;case d("MultiwayCommonTypes").RtcResponseSubCode.NON_PRIMARY_MULTIWAY_SERVER:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.NON_PRIMARY_MULTIWAY_SERVER;case d("MultiwayCommonTypes").RtcResponseSubCode.FAILED_TO_GET_REMOTE_DESCRIPTION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.FAILED_TO_GET_REMOTE_DESCRIPTION;case d("MultiwayCommonTypes").RtcResponseSubCode.LOCAL_DESCRIPTION_NOT_SET:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.LOCAL_DESCRIPTION_NOT_SET;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_SDP_TYPE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_SDP_TYPE;case d("MultiwayCommonTypes").RtcResponseSubCode.CLIENT_MEDIA_UPDATE_WITHOUT_REMOTE_SDP_INFO:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CLIENT_MEDIA_UPDATE_WITHOUT_REMOTE_SDP_INFO;case d("MultiwayCommonTypes").RtcResponseSubCode.SDP_UNSET_ON_P2P_ANSWER:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SDP_UNSET_ON_P2P_ANSWER;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_ICE_CANDIDATE_PAYLOAD:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_ICE_CANDIDATE_PAYLOAD;case d("MultiwayCommonTypes").RtcResponseSubCode.P2P_PROTOCOL_UNSET:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.P2P_PROTOCOL_UNSET;case d("MultiwayCommonTypes").RtcResponseSubCode.CREATE_ACK_FOR_INVALID_MESSAGE_TYPE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CREATE_ACK_FOR_INVALID_MESSAGE_TYPE;case d("MultiwayCommonTypes").RtcResponseSubCode.LEGACY_CLIENT_CANNOT_JOIN_SFU_MODE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.LEGACY_CLIENT_CANNOT_JOIN_SFU_MODE;case d("MultiwayCommonTypes").RtcResponseSubCode.CONNECT_UNSUPPORTED_IN_SFU_MODE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONNECT_UNSUPPORTED_IN_SFU_MODE;case d("MultiwayCommonTypes").RtcResponseSubCode.CONNECT_UNSUPPORTED_DURING_P2P_TO_SFU_ESCALATION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONNECT_UNSUPPORTED_DURING_P2P_TO_SFU_ESCALATION;case d("MultiwayCommonTypes").RtcResponseSubCode.CONNECT_UNSUPPORTED_FOR_JOINED_ENDPOINTS:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONNECT_UNSUPPORTED_FOR_JOINED_ENDPOINTS;case d("MultiwayCommonTypes").RtcResponseSubCode.RESOLVE_STATE_API_ERROR:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.RESOLVE_STATE_API_ERROR;case d("MultiwayCommonTypes").RtcResponseSubCode.EXTERNAL_RESOLUTION_ERROR:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.EXTERNAL_RESOLUTION_ERROR;case d("MultiwayCommonTypes").RtcResponseSubCode.INTERNAL_RESOLUTION_ERROR:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INTERNAL_RESOLUTION_ERROR;case d("MultiwayCommonTypes").RtcResponseSubCode.RESOLUTION_DISABLED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.RESOLUTION_DISABLED;case d("MultiwayCommonTypes").RtcResponseSubCode.BROADCAST_ID_MISSING:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.BROADCAST_ID_MISSING;case d("MultiwayCommonTypes").RtcResponseSubCode.SDP_UNSET_ON_P2P_OFFER:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SDP_UNSET_ON_P2P_OFFER;case d("MultiwayCommonTypes").RtcResponseSubCode.LEGACY_OFFER_MISSING_REQUIRED_VALUE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.LEGACY_OFFER_MISSING_REQUIRED_VALUE;case d("MultiwayCommonTypes").RtcResponseSubCode.MEDIA_SERVER_STATE_SYNC_DESERIALIZATION_ERROR:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEDIA_SERVER_STATE_SYNC_DESERIALIZATION_ERROR;case d("MultiwayCommonTypes").RtcResponseSubCode.CONNECT_UNSUPPORTED_FOR_PRECONNECTED_USERS:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONNECT_UNSUPPORTED_FOR_PRECONNECTED_USERS;case d("MultiwayCommonTypes").RtcResponseSubCode.OTHER_USER_ANSWERED_THE_CALL:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.OTHER_USER_ANSWERED_THE_CALL;case d("MultiwayCommonTypes").RtcResponseSubCode.MEDIA_SERVER_DESERIALIZATION_ERROR:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEDIA_SERVER_DESERIALIZATION_ERROR;case d("MultiwayCommonTypes").RtcResponseSubCode.REMOTE_SDP_TRACKID_MISMATCH:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.REMOTE_SDP_TRACKID_MISMATCH;case d("MultiwayCommonTypes").RtcResponseSubCode.SIGNALING_MESSAGE_TO_CLIENT_DROPPED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SIGNALING_MESSAGE_TO_CLIENT_DROPPED;case d("MultiwayCommonTypes").RtcResponseSubCode.DATA_CHANNEL_ENDPOINT_GONE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.DATA_CHANNEL_ENDPOINT_GONE;case d("MultiwayCommonTypes").RtcResponseSubCode.DATA_CHANNEL_ENDPOINT_ALREADY_EXISTS:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.DATA_CHANNEL_ENDPOINT_ALREADY_EXISTS;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFERENCE_NOT_FOUND:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFERENCE_NOT_FOUND;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFERENCE_IS_TERMINATING:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFERENCE_IS_TERMINATING;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFERENCE_IS_TERMINATED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFERENCE_IS_TERMINATED;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFERENCE_NAME_EMPTY:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFERENCE_NAME_EMPTY;case d("MultiwayCommonTypes").RtcResponseSubCode.NONCE_EMPTY:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.NONCE_EMPTY;case d("MultiwayCommonTypes").RtcResponseSubCode.NONCE_MISMATCH:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.NONCE_MISMATCH;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFERENCE_HAS_GONE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFERENCE_HAS_GONE;case d("MultiwayCommonTypes").RtcResponseSubCode.PARTICIPANT_HAS_GONE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.PARTICIPANT_HAS_GONE;case d("MultiwayCommonTypes").RtcResponseSubCode.MEDIA_SERVER_NOT_FOUND:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEDIA_SERVER_NOT_FOUND;case d("MultiwayCommonTypes").RtcResponseSubCode.CLIENT_TERMINATED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CLIENT_TERMINATED;case d("MultiwayCommonTypes").RtcResponseSubCode.MEDIA_CODECS_UNSUPPORTED_BY_CONFERENCE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEDIA_CODECS_UNSUPPORTED_BY_CONFERENCE;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFERENCE_INCAPABLE_RENEGOTIATION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFERENCE_INCAPABLE_RENEGOTIATION;case d("MultiwayCommonTypes").RtcResponseSubCode.REJECTING_CMU_WHEN_SMU_PENDING:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.REJECTING_CMU_WHEN_SMU_PENDING;case d("MultiwayCommonTypes").RtcResponseSubCode.PARTICIPANT_NOT_SUBSCRIBED_TO_TOPIC:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.PARTICIPANT_NOT_SUBSCRIBED_TO_TOPIC;case d("MultiwayCommonTypes").RtcResponseSubCode.PARTICIPANT_ALREADY_IN_WAITING_ROOM:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.PARTICIPANT_ALREADY_IN_WAITING_ROOM;case d("MultiwayCommonTypes").RtcResponseSubCode.PARTICIPANT_NOT_IN_PENDING_APPROVAL:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.PARTICIPANT_NOT_IN_PENDING_APPROVAL;case d("MultiwayCommonTypes").RtcResponseSubCode.USER_NOT_APPROVER_FOR_TARGET_USER:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.USER_NOT_APPROVER_FOR_TARGET_USER;case d("MultiwayCommonTypes").RtcResponseSubCode.UNSUPPORTED_CAPABILITIES:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.UNSUPPORTED_CAPABILITIES;case d("MultiwayCommonTypes").RtcResponseSubCode.PRODUCT_SERVER_DEFINED_END_REASON:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.PRODUCT_SERVER_DEFINED_END_REASON;case d("MultiwayCommonTypes").RtcResponseSubCode.WWW_KILLSWITCHED_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.WWW_KILLSWITCHED_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFLICTING_MEDIA_PATH:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFLICTING_MEDIA_PATH;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFLICTING_MEDIA_STATUS:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFLICTING_MEDIA_STATUS;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFLICTING_SESSION_DESCRIPTION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFLICTING_SESSION_DESCRIPTION;case d("MultiwayCommonTypes").RtcResponseSubCode.EMPTY_USER_IDS:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.EMPTY_USER_IDS;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_SDP_CONNECT_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_SDP_CONNECT_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.CALLER_HAS_APPEALABLE_CALLING_RESTRICTION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CALLER_HAS_APPEALABLE_CALLING_RESTRICTION;case d("MultiwayCommonTypes").RtcResponseSubCode.P2P_CONNECT_UNSUPPORTED_AFTER_SFU_ESCALATION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.P2P_CONNECT_UNSUPPORTED_AFTER_SFU_ESCALATION;case d("MultiwayCommonTypes").RtcResponseSubCode.CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_CONFERENCE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_CONFERENCE;case d("MultiwayCommonTypes").RtcResponseSubCode.CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_USER:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_USER;case d("MultiwayCommonTypes").RtcResponseSubCode.REQUEST_TIMEOUT:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.REQUEST_TIMEOUT;case d("MultiwayCommonTypes").RtcResponseSubCode.TOO_MANY_MEDIA_TRACKS_IN_SDP:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.TOO_MANY_MEDIA_TRACKS_IN_SDP;case d("MultiwayCommonTypes").RtcResponseSubCode.OK:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.OK}}g.getResponseStatusCodeFromThrift=a;g.getResponseSubCodeFromThrift=b}),98);
__d("MDCMqttChannel",["CurrentUser","MqttChannel","MqttEnv","MqttEnvInitializer","MqttWebConfig","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";c("MqttEnvInitializer").initialize();function h(a){d("MqttEnv").setIsUserLoggedInNow(c("CurrentUser").isLoggedIn);a=c("CurrentUser").getAppID()==null?218968626708284:Number(c("CurrentUser").getAppID());return new(c("MqttChannel"))({appId:a,capabilities:c("MqttWebConfig").capabilities,chatVisibility:!0,clientCapabilities:c("MqttWebConfig").clientCapabilities,clientType:"websocket",deviceId:c("uuidv4")(),endpoint:c("MqttWebConfig").endpoint,initialSubscribedTopics:c("MqttWebConfig").subscribedTopics,phpOverride:c("MqttWebConfig").hostNameOverride,pollingEndpoint:c("MqttWebConfig").pollingEndpoint,userFbid:c("CurrentUser").getPossiblyNonFacebookUserID()})}var i=null;function a(a){i==null&&(i=h(a));return i}function b(){return i}function e(){i!=null&&(i.shutdown(),i=null)}g.getMDCMqttChannelInstance=a;g.getMDCMqttChannelInstanceDoNotCreate=b;g.shutdownAndClear=e}),98);
__d("OculusMqttChannel",["CurrentUser","HorizonMetaIsCastingRoute","MqttChannel","MqttEnv","MqttEnvInitializer","MqttWebConfig","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";c("HorizonMetaIsCastingRoute").getIsCastingRoute()?c("MqttEnvInitializer").initialize(function(a){return new WebSocket(a,"horizon_webcasting")}):c("MqttEnvInitializer").initialize();function h(a){d("MqttEnv").setIsUserLoggedInNow(c("CurrentUser").isLoggedIn);a=c("CurrentUser").getAppID()==null?2763362503905702:Number(c("CurrentUser").getAppID());return new(c("MqttChannel"))({appId:a,capabilities:c("MqttWebConfig").capabilities,chatVisibility:!0,clientCapabilities:c("MqttWebConfig").clientCapabilities,clientType:"websocket",deviceId:c("uuidv4")(),endpoint:c("MqttWebConfig").endpoint,initialSubscribedTopics:c("MqttWebConfig").subscribedTopics,phpOverride:c("MqttWebConfig").hostNameOverride,pollingEndpoint:c("MqttWebConfig").pollingEndpoint,userFbid:c("CurrentUser").getPossiblyNonFacebookUserID()})}var i=null;function a(a){i==null&&(i=h(a));return i}function b(){return i}function e(){i!=null&&(i.shutdown(),i=null)}g.getOculusMqttChannelInstance=a;g.getOculusMqttChannelInstanceDoNotCreate=b;g.shutdownAndClear=e}),98);
__d("ZenonMqttChannel",["CurrentUser","FBLogger","MqttChannel","MqttEnv","MqttEnvInitializer","MqttWebConfig","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=-1;try{c("MqttEnvInitializer").initialize();d("MqttEnv").setIsUserLoggedInNow(c("CurrentUser").isLoggedIn);if(c("gkx")("11152")&&c("CurrentUser").getAppID()===String(1358015658191005))a=949958857019662;else{var b;a=Number((b=c("CurrentUser").getAppID())!=null?b:c("MqttWebConfig").appID)}return new(c("MqttChannel"))({appId:a,capabilities:c("MqttWebConfig").capabilities,chatVisibility:!1,clientCapabilities:c("MqttWebConfig").clientCapabilities,endpoint:c("MqttWebConfig").endpoint,initialSubscribedTopics:c("MqttWebConfig").subscribedTopics,phpOverride:c("MqttWebConfig").hostNameOverride,pollingEndpoint:c("MqttWebConfig").pollingEndpoint,userFbid:c("MqttWebConfig").fbid})}catch(b){c("FBLogger")("rtc_www").catching(b).warn("[ZenonMqttChannel][%d] failed to create MqttChannel",a);throw b}}b=a();e=b;g["default"]=e}),98);
__d("getZenonMqttChannel",["CurrentUser","FBMqttChannel","HorizonWebMqttChannel","IGDOverLSMqttChannel","MDCMqttChannel","OculusMqttChannel","RpWebMqttEnabledAppIds","ZenonAppProvider","ZenonMqttChannel"],(function(a,b,c,d,e,f,g){"use strict";var h=new Set(c("RpWebMqttEnabledAppIds").APP_IDS);function a(){if(d("ZenonAppProvider").isInstagramApp())return d("IGDOverLSMqttChannel").getInstance();else if(d("ZenonAppProvider").isOculusCastingSite())return d("OculusMqttChannel").getOculusMqttChannelInstance();else if(d("ZenonAppProvider").isHorizonApp())return d("HorizonWebMqttChannel").getHorizonWebMqttChannelInstance();else if(d("ZenonAppProvider").isMDCApp())return d("MDCMqttChannel").getMDCMqttChannelInstance();else return h.has(Number(c("CurrentUser").getAppID()))?c("ZenonMqttChannel"):c("FBMqttChannel")}g["default"]=a}),98);
__d("ZenonMWThriftMessageQPLLogger",["DateConsts","QPLMsgTypesSitevarConfig","QPLUserFlow","ZenonLoggingUtils","ZenonMWMessageReliabilityLogTypes","ZenonMWThriftMessageMap","ZenonMWThriftMessageTagUtils","ZenonMWThriftResponseStatusCodeUtils","getZenonMqttChannel","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=30*d("DateConsts").MS_PER_SEC,i=c("getZenonMqttChannel")(),j=new Map();function a(a,b,e){if(!d("ZenonLoggingUtils").shouldAllowLogging())return;var f=a.messageHeader,g=d("ZenonMWThriftMessageMap").messageTypeToString(a.messageHeader.type).toLowerCase();if(!c("QPLMsgTypesSitevarConfig").QPL_MSG_TYPES.includes(g))return;f=k(f.transactionId);switch(b){case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.RECEIVED_REQUEST:l(f,g,{connectionState:(b=e==null?void 0:e.connectionState)!=null?b:"",peerConnectionState:(b=e==null?void 0:e.peerConnectionState)!=null?b:"",signalingState:(b=e==null?void 0:e.signalingState)!=null?b:""},a);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_REQUEST:m(f);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENDING_RESPONSE:n(f,a);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_RESPONSE:o(f,a);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SEND_RESPONSE_FAILED:p(f,a,e==null?void 0:e.errorMessage);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_REQUEST:q(f,g,{connectionState:(b=e==null?void 0:e.connectionState)!=null?b:"",peerConnectionState:(g=e==null?void 0:e.peerConnectionState)!=null?g:"",signalingState:(b=e==null?void 0:e.signalingState)!=null?b:""},a);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENDING_REQUEST:r(f);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SEND_REQUEST_FAILED:s(f,e==null?void 0:e.errorMessage);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.RECEIVED_RESPONSE:t(f,a);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_SM_EVENT:u(f,e==null?void 0:e.smEvent);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_SM_EVENT:v(f,e==null?void 0:e.smEvent);return;default:return}}function b(a,b){if(!d("ZenonLoggingUtils").shouldAllowLogging())return;c("QPLUserFlow").addAnnotations(c("qpl")._(398988976,"737"),{string:babelHelpers["extends"]({},b)},{instanceKey:+a})}function k(a){a=isNaN(+a)?0:+a;var b=9223372036854776e3;return Math.round(a%b)}function l(a,b,e,f){c("QPLUserFlow").start(c("qpl")._(398988976,"737"),{annotations:{"int":{retryCount:f.messageHeader.retryCount},int_array:{messageTags:d("ZenonMWThriftMessageTagUtils").fromThriftMessageTags(f.messageHeader.messageTags)},string:babelHelpers["extends"]({},e,{messageType:b,mqttState:i.getConnectionState()})},instanceKey:a,timeoutInMs:h});if(f.messageBody.serverMediaUpdateRequest){e=f.messageBody.serverMediaUpdateRequest;b=e.answer;f=e.offer;e=e.update;c("QPLUserFlow").addAnnotations(c("qpl")._(398988976,"737"),{string:{sdpType:f?"offer":b?"answer":e?"delta":"empty"}},{instanceKey:a})}f={onMQTTStateChanged:function(b){c("QPLUserFlow").addPoint(c("qpl")._(398988976,"737"),"mqtt_"+b,{instanceKey:a})}};i.subscribeChannelEvents(f);j.set(a,f)}function m(a){c("QPLUserFlow").addPoint(c("qpl")._(398988976,"737"),"processed_request",{instanceKey:a})}function n(a,b){b=b.messageHeader;var e=b.responseStatusCode;b=b.responseSubCode;c("QPLUserFlow").addPoint(c("qpl")._(398988976,"737"),"sending_response",{instanceKey:a});c("QPLUserFlow").addAnnotations(c("qpl")._(398988976,"737"),{"int":{responseStatusCode:e?d("ZenonMWThriftResponseStatusCodeUtils").getResponseStatusCodeFromThrift(e):200,responseSubCode:b?d("ZenonMWThriftResponseStatusCodeUtils").getResponseSubCodeFromThrift(b):9e3}},{instanceKey:a})}function o(a,b){b=b.messageHeader;var e=b.responseStatusCode;b=b.responseSubCode;c("QPLUserFlow").endSuccess(c("qpl")._(398988976,"737"),{annotations:{"int":{responseStatusCode:e?d("ZenonMWThriftResponseStatusCodeUtils").getResponseStatusCodeFromThrift(e):200,responseSubCode:b?d("ZenonMWThriftResponseStatusCodeUtils").getResponseSubCodeFromThrift(b):9e3}},instanceKey:a});e=j.get(a);e&&(i.unsubscribeChannelEvents(e),j["delete"](a))}function p(a,b,e){b=b.messageHeader;var f=b.responseStatusCode;b=b.responseSubCode;c("QPLUserFlow").endFailure(c("qpl")._(398988976,"737"),"send_response_failed",{annotations:{"int":{responseStatusCode:f?d("ZenonMWThriftResponseStatusCodeUtils").getResponseStatusCodeFromThrift(f):200,responseSubCode:b?d("ZenonMWThriftResponseStatusCodeUtils").getResponseSubCodeFromThrift(b):9e3},string:{errorMessage:e}},instanceKey:a});f=j.get(a);f&&(i.unsubscribeChannelEvents(f),j["delete"](a))}function q(a,b,e,f){c("QPLUserFlow").start(c("qpl")._(398988976,"737"),{annotations:{"int":{retryCount:f.messageHeader.retryCount},int_array:{messageTags:d("ZenonMWThriftMessageTagUtils").fromThriftMessageTags(f.messageHeader.messageTags)},string:babelHelpers["extends"]({},e,{messageType:b,mqttState:i.getConnectionState()})},instanceKey:a,timeoutInMs:h})}function r(a){c("QPLUserFlow").addPoint(c("qpl")._(398988976,"737"),"sending_request",{instanceKey:a})}function s(a,b){c("QPLUserFlow").endFailure(c("qpl")._(398988976,"737"),"send_request_failed",{annotations:{string:{errorMessage:b}},instanceKey:a})}function t(a,b){b=b.messageHeader;var e=b.responseStatusCode;b=b.responseSubCode;c("QPLUserFlow").endSuccess(c("qpl")._(398988976,"737"),{annotations:{"int":{responseStatusCode:e?d("ZenonMWThriftResponseStatusCodeUtils").getResponseStatusCodeFromThrift(e):200,responseSubCode:b?d("ZenonMWThriftResponseStatusCodeUtils").getResponseSubCodeFromThrift(b):9e3}},instanceKey:a})}function u(a,b){b!=null&&c("QPLUserFlow").addPoint(c("qpl")._(398988976,"737"),"sent_sm_event:"+b,{instanceKey:a})}function v(a,b){b!=null&&c("QPLUserFlow").addPoint(c("qpl")._(398988976,"737"),"processed_sm_event:"+b,{instanceKey:a})}g.log=a;g.updateState=b}),98);
__d("ZenonMWThriftMessageReliabilityLogger",["ODS","ZenonMWMessageReliabilityLogTypes","ZenonMWThriftMessageMap","ZenonMWThriftMessageQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Map(),j=new Map(),k=new Map();function a(a){k.set(a,!0)}function b(a,b,c){a=j.get(a);if(!a)return;u(a,b,c)}function c(a){q(a)?u(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.RECEIVED_RESPONSE):u(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.RECEIVED_REQUEST)}function e(a){q(a)?u(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSING_RESPONSE):u(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSING_REQUEST)}function f(a){q(a)||u(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.REQUEST_AFTER_NULL_CHECK)}function l(a){q(a)||u(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.REQUEST_AFTER_TRANSLATION)}function m(a){q(a)?u(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_RESPONSE):u(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_REQUEST)}function n(a){q(a)?u(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENDING_RESPONSE):u(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENDING_REQUEST)}function o(a){q(a)?u(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_RESPONSE):u(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_REQUEST)}function p(a,b){var c=q(a)?d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SEND_RESPONSE_FAILED:d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SEND_REQUEST_FAILED;u(a,c,{errorMessage:b})}function q(a){a=a.messageHeader.responseStatusCode;return a!=null}function r(a,b){var c=d("ZenonMWThriftMessageMap").messageTypeToString(a.messageHeader.type).toLowerCase();a=q(a)?"response":"request";switch(b){case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.RECEIVED_REQUEST:case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.RECEIVED_RESPONSE:(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_multiway","receive_"+a+"_"+c);(h||(h=d("ODS"))).flush();return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSING_REQUEST:(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_multiway","processing_"+a+"_"+c);(h||(h=d("ODS"))).flush();return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_REQUEST:(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_multiway","processed_"+a+"_"+c);(h||(h=d("ODS"))).flush();return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENDING_RESPONSE:(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_multiway","sending_"+a+"_"+c);(h||(h=d("ODS"))).flush();return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.REQUEST_AFTER_TRANSLATION:(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_multiway","after_translation_"+a+"_"+c);(h||(h=d("ODS"))).flush();return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.REQUEST_AFTER_NULL_CHECK:(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_multiway","after_null_check_"+a+"_"+c);(h||(h=d("ODS"))).flush();return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_RESPONSE:case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_REQUEST:(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_multiway","sent_"+a+"_"+c);(h||(h=d("ODS"))).flush();return;default:return}}var s={connectionState:"",peerConnectionState:"",signalingState:""};function t(a){var b=babelHelpers["extends"]({},s,{},a);if(s.connectionState!==b.connectionState||s.peerConnectionState!==b.peerConnectionState||s.signalingState!==b.signalingState){s=b;for(b of i.keys())d("ZenonMWThriftMessageQPLLogger").updateState(b,a)}}function u(a,b,c){var e,f=a.messageHeader;e=(e=i.get(f.transactionId))!=null?e:new Set();i.set(f.transactionId,e);if(b!==d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_SM_EVENT&&b!==d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_SM_EVENT&&e.has(b))return;e.add(b);j.set(f.transactionId,a);r(a,b);d("ZenonMWThriftMessageQPLLogger").log(a,b,babelHelpers["extends"]({},c,{},s))}g.setE2eeIsMandatedForCall=a;g.logEventForTxid=b;g.logReceivedMessage=c;g.logProcessingMessage=e;g.logMessageAfterNullCheck=f;g.logMessageAfterTranslation=l;g.logProcessedMessage=m;g.logSendingMessage=n;g.logSentMessage=o;g.logSendMessageFailed=p;g.updateState=t}),98);
__d("MqttThriftHeaderSerializers",["ThriftTypes"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return{}}function b(a,b){b.writeStructBegin("MqttThriftHeader"),a.traceInfo!=null&&(b.writeFieldBegin({fname:"traceInfo",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.traceInfo),b.writeFieldEnd()),a.coreContextRequestId!=null&&(b.writeFieldBegin({fname:"coreContextRequestId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.coreContextRequestId),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function d(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.traceInfo=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.coreContextRequestId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}g.MqttThriftHeader$DefaultConstructor=a;g.serializeMqttThriftHeader=b;g.deserializeMqttThriftHeader=d}),98);
__d("StateSyncSerializers",["ThriftTypes"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return{version:0}}function b(){return{stateStore:{}}}function i(a,b){b.writeStructBegin("State");b.writeFieldBegin({fname:"version",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.version!=null)b.writeI32(a.version);else{var d=0;b.writeI32(d)}b.writeFieldEnd();a.data!=null&&(b.writeFieldBegin({fname:"data",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeBinary(a.data),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function d(a,b){b.writeStructBegin("Snapshot");b.writeFieldBegin({fname:"stateStore",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.stateStore!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(a.stateStore).length});for(a of Object.entries(a.stateStore)){var d=a[0],e=a[1];b.writeString(d);i(e,b)}b.writeMapEnd()}else{d={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(d).length});for(e of Object.entries(d)){a=e[0];d=e[1];b.writeString(a);i(d,b)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function j(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I32?b.version=a.readI32():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.data=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.version===void 0&&(b.version=0);return b}function e(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).MAP){b.stateStore={};d=a.readMapBegin();for(var f=0;f<d.size;f++){var g=a.readString(),i=j(a);b.stateStore[g]=i}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.stateStore===void 0&&(b.stateStore={});return b}g.State$DefaultConstructor=a;g.Snapshot$DefaultConstructor=b;g.serializeState=i;g.serializeSnapshot=d;g.deserializeState=j;g.deserializeSnapshot=e}),98);
__d("StateSyncTopicsConfigTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";c=(a=b("$InternalEnum"))({UNKNOWN:0,INTERNAL:1,EXTERNAL:2});d=a({UNKNOWN:0,PARTICIPANT_JOIN:100,PARTICIPANT_UPDATE:101,PARTICIPANT_LEAVE:102,PARTICIPANT_NEGOTIATED:103,PARTICIPANT_SDP_CHANGED:104,EXTENSION_CREATION:201,EXTENSION_JOIN:202,EXTENSION_UPDATE:203,EXTENSION_LEAVE:204,EXTENSION_REQUEST:205,CONFERENCE_UPDATE:501,DOMINANT_SPEAKER_UPDATE:1001,MEDIA_ASPECT_RATIO_UPDATE:1002,TIMER_FIRED:1003,MEDIA_PATH_CHANGED:1004,PARTICIPANTS_ACKED_MEDIA:1005});f=a({UNKNOWN:0,ANY_PARTICIPANT_SUBSCRIBED:1,ALWAYS_RESOLVE:2});b=a({CACHIUS:1,IRIS:2});a=a({Config_engine:1,E2eeState:2,Media_information:3,Breakout:4,Countdown_timer:5,Effect_match:6,Emoji_reactions:7,Entered_avatars_mode:8,Moderator_controls:9,Polls:10,Raised_hands_queue:11,Xac_calling:12,Action_items:13,Can_you_see_my_screen:14,Collage:15,Companion:16,Coplay:17,Coview:18,Custom_video_capabilities:19,Dropin:20,Dtmf:21,E2ee_v2_msg:22,Effect_sync:23,Et_pluto_activity:24,Et_pluto_session:25,Et_test_activity:26,Et_test_session:27,Et_tubi_activity:28,Et_tubi_session:29,External_resolution_enabled:30,Hyperspace_copresence_state:31,Hyperspace_mic_state:32,Intenticons:33,Live_stream:34,Live_stream_app_message:35,Max_video_subscriptions:36,Media_sync:37,Media_sync_autoplay:38,Meeting_assistant:39,Meeting_transcription:40,Morpheo_grid:41,Multipeer_ar:42,Number_of_people:43,Opaque_blob:44,Photo_booth:45,Qna:46,Quizzes:47,Reactions:48,Role_assignments:49,Room_features_availability:50,Rooms_notes:51,Screenshare_floor_control:52,Screenshare_single_floor_control:53,Sctp_negotiation:54,Sideband:55,Simple:56,Simple_external:57,Simple_pass_through:58,Simple_passthrough:59,Snippets:60,Sound_effects:61,Whiteboard:62,Whiteboard_messenger:63,Workroom:64,Workrooms_ask_everyone_to_open:65,Workrooms_vr:66,Avatar_transport_state:67,Ambisonic:68,Cathode_extension:69,Biz_calling:70,Work_costreaming:71,Conversation_bot:72,Voip_zone:73,Admin_initiated_casting:74,Smart_glasses_assistant:75,Codec_avatar_2d:76});e.exports={CryptoAuthVerifierIdentity:b,DataSource:d,DataSourceCondition:f,ResolutionPath:c,TopicId:a}}),null);
__d("WebrtcEnumsTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";c=(a=b("$InternalEnum"))({OFFER:0,ANSWER:1,ICE_CANDIDATE:2,OK:3,HANG_UP:4,OTHER_DISMISS:5,PRANSWER:7,PING:8,PING_ACK:9,ICE_RESTART_OFFER:10,ICE_RESTART_ANSWER:11,OFFER_ACK:12,ANSWER_ACK:13,NOTIFY_MEDIA_STATE:14,ACK:15,INVALID:16,OFFER_NACK:17,NACK:18,VIDEO_REQUEST:19,SDP_UPDATE:20,SWITCH_TO_MULTIWAY:28,NEGOTIATE:30,PR_OFFER_ACK:32,CLIENT_REPORTED_EVENT:33});d=a({OFFER:0,ANSWER:1});f=a({LL_NIL:0,LL_BASIC:1,LL_DEBUG:2,LL_WARNING:3,LL_INFO:4,LL_VERBOSE:5});b=a({IGNORE_CALL:0,HANGUP_CALL:1,IN_ANOTHER_CALL:2,ACCEPT_AFTER_HANGUP:3,NO_ANSWER_TIMEOUT:4,INCOMING_TIMEOUT:5,OTHER_INSTANCE_HANDLED:6,SIGNALING_MESSAGE_FAILED:7,CONNECTION_DROPPED:8,CLIENT_INTERRUPTED:9,WEBRTC_ERROR:10,CLIENT_ERROR:11,NO_PERMISSION:12,OTHER_NOT_CAPABLE:13,NO_UI_ERROR:14,UNSUPPORTED_VERSION:15,CALLER_NOT_VISIBLE:16,CARRIER_BLOCKED:17,OTHER_CARRIER_BLOCKED:18,CLIENT_ENCRYPTION_ERROR:19,MICROPHONE_PERMISSION_DENIED:20,CAMERA_PERMISSION_DENIED:21,SESSION_MIGRATED:22,RING_MUTED:23,MAX_ALLOWED_PARTICIPANTS_REACHED:24,CALLEE_REQUIRES_MULTIWAY:25,LIVE_NOT_ACKED:26,TX_ACK_TIMEDOUT:27,E2EE_MANDATED_BUT_OFFER_DID_NOT_CONTAIN_E2EE:28,E2EE_MANDATED_BUT_ANSWER_DID_NOT_NEGOTIATE_E2EE:29,ANSWERED_BY_OTHER_USER:30,LONG_LASTING_AUDIO_ISSUE:31,ADMIN_CALLING_OWN_PAGE:32,PAGE_CALLS_BLOCKED:33});var g=a({UDP:0,TCP:1,SSLTCP:2}),h=a({HOST:0,SERVER_REFLEXIVE:1,PEER_REFLEXIVE:2,RELAY:3}),i=a({TCPTYPE_NONE:0,TCPTYPE_PASSIVE:1,TCPTYPE_ACTIVE:2,TCPTYPE_SIMOPEN:3}),j=a({SENDONLY:0,SENDRECV:1,RECVONLY:2,INACTIVE:3}),k=a({AUDIO:0,VIDEO:1,DATA:2}),l=a({AUDIO:0,VIDEO:1,SCREEN:2}),m=a({AES_CM_128_HMAC_SHA1_80:0,AES_CM_128_HMAC_SHA1_32:1,F8_128_HMAC_SHA1_80:2,AEAD_AES_256_GCM:8}),n=a({RTP_SAVPF:0,DTLS_SCTP:1,SCTP:2}),o=a({URN_IETF_PARAMS_RTP_HDREXT_SSRC_AUDIO_LEVEL:0,URN_IETF_PARAMS_RTP_HDREXT_TOFFSET:1,IETF_DRAFT_HOLMER_RMCAT_TRANSPORT_WIDE_CC_01:2,URN_3GPP_VIDEO_ORIENTATION:3,ABS_SEND_TIME:4,PLAYOUT_DELAY:5,VIDEO_CONTENT_TYPE:6,VIDEO_TIMING:7,RTP_MID:8,RTP_STREAM_ID:9,RTP_REPAIRED_STREAM_ID:10,ENCRYPT_EXTENSIONS:11,FRAME_MARKING:12,GENERIC_FRAME_DESCRIPTOR:13,RTP_LOSS_INFO:14,RTP_CONGESTION_INFO:15,RTP_AUDIO_DROP_INFO:16,FRAME_ENCRYPTION_INFO:17,GENERIC_FRAME_DESCRIPTOR_01:18,DEPENDENCY_DESCRIPTOR:19,COLOR_SPACE:20,ABS_CAPTURE_TIME:21,VIDEO_FRAME_TRACKING_ID:22}),p=a({ISAC:0,SPEEX_ISAC_OBSOLETE:1,SPEEX:2,OPUS:3,PCMU_OBSOLETE:4,PCMA_OBSOLETE:5,CN:6,TELEPHONE_EVENT:7,VP8:8,RED:9,ULPFEC:10,H264:17,ISPX_WB_2:32,GOOGLE_DATA:33,AAC:36,AAC_LD:37,VP9:96,GOOGLE_SCTP_DATA:97,H265:98,RTX:99,FLEXFEC:100,MULTIPLEX:101,VIDEO_DATA:102,AV1:103}),q=a({SILENCEBIT_OBSOLETE:0,SPEEXUSEJITTERBIT_OBSOLETE:1,USEINBANDFEC:2,USEADAPTIVEFEC_OBSOLETE:3,EXTERNALBWE_OBSOLETE:4,FEC_BEI_OBSOLETE:5,ISPX_ADAPTIVE_FEC:6,CBR:7,USEDTX:8}),r=a({MINPTIME:0,MAXAVERAGEBITRATE:1,SPROP_STEREO:2,STEREO:3,MAXPTIME:4,PTIME:5,FEC_BEI_OBSOLETE:6,PORT:7,H264PROFILELEVELID:8,PACKETIZATION_MODE:9,LEVEL_ASYMMETRY_ALLOWED:10,APT:11,MAXPLAYBACKRATE:12,REPAIR_WINDOW:13,EMPTY_KEY:14}),s=a({CR_NONE:0,CR_ACTIVE:1,CR_PASSIVE:2,CR_ACTPASS:3,CR_HOLDCONN:4});a=a({EVENT_NONE:0,EVENT_MEDIA_CONNECTED:1});e.exports={CallEndReason:b,ClientReportedEventType:a,CodecName:p,CodecOption:r,CodecOptionBoolean:q,ConnectionRole:s,CryptoSuite:m,ExtmapUris:o,IceCandidateProtocolType:h,IceCandidateTcpType:i,IceCandidateTransport:g,MediaProtocol:n,MediaType:k,PayloadType:c,SdpNegotiateType:d,SendRecvMode:j,StreamType:l,UploadLogLevel:f}}),null);
__d("WebrtcSdpSerializers",["ThriftTypes","WebrtcEnumsTypes"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return{}}function b(){return{msid:"stream_label"}}function e(){return{id:""}}function f(){return{bwtype:"",bw:0}}function i(){return{numAudioChannels:1}}function j(){return{id:1,extensionAttributes:[]}}function k(){return{}}function l(){return{componentId:1,transport:d("WebrtcEnumsTypes").IceCandidateTransport.cast(0),generation:0}}function m(){return{port:1,protocol:d("WebrtcEnumsTypes").MediaProtocol.cast(0),sendRecvMode:d("WebrtcEnumsTypes").SendRecvMode.cast(1),hasRtcpMux:!0}}function n(){return{supportsMsid:!0}}function o(){return{}}function p(a,b){b.writeStructBegin("SsrcGroup");a.semantics!=null&&(b.writeFieldBegin({fname:"semantics",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.semantics),b.writeFieldEnd());if(a.ssrcIds!=null){b.writeFieldBegin({fname:"ssrcIds",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:2});b.writeListBegin({etype:h.I32,size:a.ssrcIds.length});for(a of a.ssrcIds)b.writeI32(a);b.writeListEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function q(a,b){b.writeStructBegin("SsrcObject");a.ssrcId!=null&&(b.writeFieldBegin({fname:"ssrcId",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1}),b.writeI32(a.ssrcId),b.writeFieldEnd());a.cname!=null&&(b.writeFieldBegin({fname:"cname",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.cname),b.writeFieldEnd());b.writeFieldBegin({fname:"msid",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3});if(a.msid!=null)b.writeString(a.msid);else{var d="stream_label";b.writeString(d)}b.writeFieldEnd();a.msidAppData!=null&&(b.writeFieldBegin({fname:"msidAppData",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeString(a.msidAppData),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function r(a,b){b.writeStructBegin("RtcpFbVal");b.writeFieldBegin({fname:"id",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.id!=null)b.writeString(a.id);else{var d="";b.writeString(d)}b.writeFieldEnd();a.param!=null&&(b.writeFieldBegin({fname:"param",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.param),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function s(a,b){b.writeStructBegin("Bandwidth");b.writeFieldBegin({fname:"bwtype",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.bwtype!=null)b.writeString(a.bwtype);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"bw",ftype:h.I32,fid:2});if(a.bw!=null)b.writeI32(a.bw);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function t(a,b){b.writeStructBegin("CodecDescription");a.payloadType!=null&&(b.writeFieldBegin({fname:"payloadType",ftype:(h||(h=c("ThriftTypes"))).BYTE,fid:1}),b.writeByte(a.payloadType),b.writeFieldEnd());if(a.encodingName!=null){var d;b.writeFieldBegin({fname:"encodingName",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2});b.writeI32((d=a.encodingName)!=null?d:0);b.writeFieldEnd()}a.clockRateKhz!=null&&(b.writeFieldBegin({fname:"clockRateKhz",ftype:(h||(h=c("ThriftTypes"))).BYTE,fid:3}),b.writeByte(a.clockRateKhz),b.writeFieldEnd());b.writeFieldBegin({fname:"numAudioChannels",ftype:(h||(h=c("ThriftTypes"))).BYTE,fid:4});if(a.numAudioChannels!=null)b.writeByte(a.numAudioChannels);else{d=1;b.writeByte(d)}b.writeFieldEnd();if(a.fmtParameters!=null){b.writeFieldBegin({fname:"fmtParameters",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:5});b.writeMapBegin({ktype:h.I32,vtype:h.STRING,size:Object.keys(a.fmtParameters).length});for(d of Object.entries(a.fmtParameters)){var e=d[0],f=d[1];b.writeI32((e=Number(e))!=null?e:0);b.writeString(f)}b.writeMapEnd();b.writeFieldEnd()}if(a.enabledOptions!=null){b.writeFieldBegin({fname:"enabledOptions",ftype:(h||(h=c("ThriftTypes"))).SET,fid:6});b.writeSetBegin({etype:h.I32,size:a.enabledOptions.size});for(e of a.enabledOptions)b.writeI32(e!=null?e:0);b.writeSetEnd();b.writeFieldEnd()}if(a.rtcpFbParameters!=null){b.writeFieldBegin({fname:"rtcpFbParameters",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:7});b.writeMapBegin({ktype:h.STRING,vtype:h.STRING,size:Object.keys(a.rtcpFbParameters).length});for(f of Object.entries(a.rtcpFbParameters)){d=f[0];e=f[1];b.writeString(d);b.writeString(e)}b.writeMapEnd();b.writeFieldEnd()}if(a.rtcpFbParamList!=null){b.writeFieldBegin({fname:"rtcpFbParamList",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:10});b.writeListBegin({etype:h.STRUCT,size:a.rtcpFbParamList.length});for(d of a.rtcpFbParamList)r(d,b);b.writeListEnd();b.writeFieldEnd()}a.videoWidth!=null&&(b.writeFieldBegin({fname:"videoWidth",ftype:(h||(h=c("ThriftTypes"))).I32,fid:8}),b.writeI32(a.videoWidth),b.writeFieldEnd());a.videoHeight!=null&&(b.writeFieldBegin({fname:"videoHeight",ftype:(h||(h=c("ThriftTypes"))).I32,fid:9}),b.writeI32(a.videoHeight),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function u(a,b){b.writeStructBegin("Extmap");b.writeFieldBegin({fname:"id",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.id!=null)b.writeI32(a.id);else{var d=1;b.writeI32(d)}b.writeFieldEnd();if(a.uri!=null){b.writeFieldBegin({fname:"uri",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2});b.writeI32((d=a.uri)!=null?d:0);b.writeFieldEnd()}b.writeFieldBegin({fname:"extensionAttributes",ftype:h.LIST,fid:3});if(a.extensionAttributes!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).I32,size:a.extensionAttributes.length});for(d of a.extensionAttributes)b.writeI32(d!=null?d:0);b.writeListEnd()}else{a=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).I32,size:a.length});for(d of a)b.writeI32(d!=null?d:0);b.writeListEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function v(a,b){b.writeStructBegin("CryptoParam");a.tag!=null&&(b.writeFieldBegin({fname:"tag",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1}),b.writeI32(a.tag),b.writeFieldEnd());if(a.suite!=null){var d;b.writeFieldBegin({fname:"suite",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2});b.writeI32((d=a.suite)!=null?d:0);b.writeFieldEnd()}a.keyParams!=null&&(b.writeFieldBegin({fname:"keyParams",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeString(a.keyParams),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function w(a,b){b.writeStructBegin("IceCandidateSdp");a.foundation!=null&&(b.writeFieldBegin({fname:"foundation",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.foundation),b.writeFieldEnd());b.writeFieldBegin({fname:"componentId",ftype:(h||(h=c("ThriftTypes"))).BYTE,fid:2});if(a.componentId!=null)b.writeByte(a.componentId);else{var e=1;b.writeByte(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"transport",ftype:h.I32,fid:3});if(a.transport!=null){b.writeI32((e=a.transport)!=null?e:0)}else{e=d("WebrtcEnumsTypes").IceCandidateTransport.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();a.priority!=null&&(b.writeFieldBegin({fname:"priority",ftype:(h||(h=c("ThriftTypes"))).I32,fid:4}),b.writeI32(a.priority),b.writeFieldEnd());a.address!=null&&(b.writeFieldBegin({fname:"address",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:5}),b.writeString(a.address),b.writeFieldEnd());a.port!=null&&(b.writeFieldBegin({fname:"port",ftype:(h||(h=c("ThriftTypes"))).I32,fid:6}),b.writeI32(a.port),b.writeFieldEnd());if(a.protocolType!=null){b.writeFieldBegin({fname:"protocolType",ftype:(h||(h=c("ThriftTypes"))).I32,fid:7});b.writeI32((e=a.protocolType)!=null?e:0);b.writeFieldEnd()}a.relatedAddress!=null&&(b.writeFieldBegin({fname:"relatedAddress",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:8}),b.writeString(a.relatedAddress),b.writeFieldEnd());a.relatedPort!=null&&(b.writeFieldBegin({fname:"relatedPort",ftype:(h||(h=c("ThriftTypes"))).I32,fid:9}),b.writeI32(a.relatedPort),b.writeFieldEnd());a.username!=null&&(b.writeFieldBegin({fname:"username",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:10}),b.writeString(a.username),b.writeFieldEnd());a.password!=null&&(b.writeFieldBegin({fname:"password",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:11}),b.writeString(a.password),b.writeFieldEnd());b.writeFieldBegin({fname:"generation",ftype:h.I32,fid:12});if(a.generation!=null)b.writeI32(a.generation);else{e=0;b.writeI32(e)}b.writeFieldEnd();if(a.tcptype!=null){b.writeFieldBegin({fname:"tcptype",ftype:(h||(h=c("ThriftTypes"))).I32,fid:13});b.writeI32((e=a.tcptype)!=null?e:0);b.writeFieldEnd()}a.networkId!=null&&(b.writeFieldBegin({fname:"networkId",ftype:(h||(h=c("ThriftTypes"))).I16,fid:14}),b.writeI16(a.networkId),b.writeFieldEnd());a.networkCost!=null&&(b.writeFieldBegin({fname:"networkCost",ftype:(h||(h=c("ThriftTypes"))).I16,fid:15}),b.writeI16(a.networkCost),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function x(a,b){b.writeStructBegin("MediaDescription");if(a.mediaType!=null){var e;b.writeFieldBegin({fname:"mediaType",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});b.writeI32((e=a.mediaType)!=null?e:0);b.writeFieldEnd()}b.writeFieldBegin({fname:"port",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2});if(a.port!=null)b.writeI32(a.port);else{e=1;b.writeI32(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"protocol",ftype:h.I32,fid:3});if(a.protocol!=null){b.writeI32((e=a.protocol)!=null?e:0)}else{e=d("WebrtcEnumsTypes").MediaProtocol.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();a.fmt!=null&&(b.writeFieldBegin({fname:"fmt",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:22}),b.writeString(a.fmt),b.writeFieldEnd());a.mediaIceUserFrag!=null&&(b.writeFieldBegin({fname:"mediaIceUserFrag",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeString(a.mediaIceUserFrag),b.writeFieldEnd());a.mediaIcePassword!=null&&(b.writeFieldBegin({fname:"mediaIcePassword",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:5}),b.writeString(a.mediaIcePassword),b.writeFieldEnd());if(a.mediaIceOptions!=null){b.writeFieldBegin({fname:"mediaIceOptions",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:6});b.writeListBegin({etype:h.STRING,size:a.mediaIceOptions.length});for(e of a.mediaIceOptions)b.writeString(e);b.writeListEnd();b.writeFieldEnd()}a.mediaSslFingerprintHash!=null&&(b.writeFieldBegin({fname:"mediaSslFingerprintHash",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:7}),b.writeString(a.mediaSslFingerprintHash),b.writeFieldEnd());a.mediaSslFingerprintDigest!=null&&(b.writeFieldBegin({fname:"mediaSslFingerprintDigest",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:8}),b.writeString(a.mediaSslFingerprintDigest),b.writeFieldEnd());if(a.extmaps!=null){b.writeFieldBegin({fname:"extmaps",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:9});b.writeListBegin({etype:h.STRUCT,size:a.extmaps.length});for(e of a.extmaps)u(e,b);b.writeListEnd();b.writeFieldEnd()}b.writeFieldBegin({fname:"sendRecvMode",ftype:h.I32,fid:10});if(a.sendRecvMode!=null){b.writeI32((e=a.sendRecvMode)!=null?e:0)}else{e=d("WebrtcEnumsTypes").SendRecvMode.cast(1);b.writeI32(e!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"hasRtcpMux",ftype:h.BOOL,fid:11});if(a.hasRtcpMux!=null)b.writeBool(a.hasRtcpMux);else{e=!0;b.writeBool(e)}b.writeFieldEnd();a.rtcpReducedSize!=null&&(b.writeFieldBegin({fname:"rtcpReducedSize",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:25}),b.writeBool(a.rtcpReducedSize),b.writeFieldEnd());if(a.cryptoParams!=null){b.writeFieldBegin({fname:"cryptoParams",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:12});b.writeListBegin({etype:h.STRUCT,size:a.cryptoParams.length});for(e of a.cryptoParams)v(e,b);b.writeListEnd();b.writeFieldEnd()}if(a.codecs!=null){b.writeFieldBegin({fname:"codecs",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:13});b.writeListBegin({etype:h.STRUCT,size:a.codecs.length});for(e of a.codecs)t(e,b);b.writeListEnd();b.writeFieldEnd()}a.maxPTime!=null&&(b.writeFieldBegin({fname:"maxPTime",ftype:(h||(h=c("ThriftTypes"))).I32,fid:14}),b.writeI32(a.maxPTime),b.writeFieldEnd());a.pTime!=null&&(b.writeFieldBegin({fname:"pTime",ftype:(h||(h=c("ThriftTypes"))).I32,fid:15}),b.writeI32(a.pTime),b.writeFieldEnd());if(a.ssrcObjects!=null){b.writeFieldBegin({fname:"ssrcObjects",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:16});b.writeListBegin({etype:h.STRUCT,size:a.ssrcObjects.length});for(e of a.ssrcObjects)q(e,b);b.writeListEnd();b.writeFieldEnd()}if(a.candidates!=null){b.writeFieldBegin({fname:"candidates",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:17});b.writeListBegin({etype:h.STRUCT,size:a.candidates.length});for(e of a.candidates)w(e,b);b.writeListEnd();b.writeFieldEnd()}a.conferenceMode!=null&&(b.writeFieldBegin({fname:"conferenceMode",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:18}),b.writeBool(a.conferenceMode),b.writeFieldEnd());if(a.ssrcGroups!=null){b.writeFieldBegin({fname:"ssrcGroups",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:19});b.writeListBegin({etype:h.STRUCT,size:a.ssrcGroups.length});for(e of a.ssrcGroups)p(e,b);b.writeListEnd();b.writeFieldEnd()}if(a.connectionRole!=null){b.writeFieldBegin({fname:"connectionRole",ftype:(h||(h=c("ThriftTypes"))).I32,fid:20});b.writeI32((e=a.connectionRole)!=null?e:0);b.writeFieldEnd()}a.mid!=null&&(b.writeFieldBegin({fname:"mid",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:21}),b.writeString(a.mid),b.writeFieldEnd());a.bandwidth!=null&&(b.writeFieldBegin({fname:"bandwidth",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:23}),s(a.bandwidth,b),b.writeFieldEnd());a.sctpPort!=null&&(b.writeFieldBegin({fname:"sctpPort",ftype:(h||(h=c("ThriftTypes"))).I32,fid:24}),b.writeI32(a.sctpPort),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function y(a,b){b.writeStructBegin("SessionDescription");a.sessionId!=null&&(b.writeFieldBegin({fname:"sessionId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.sessionId),b.writeFieldEnd());a.sessionVersion!=null&&(b.writeFieldBegin({fname:"sessionVersion",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.sessionVersion),b.writeFieldEnd());b.writeFieldBegin({fname:"supportsMsid",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:3});if(a.supportsMsid!=null)b.writeBool(a.supportsMsid);else{var d=!0;b.writeBool(d)}b.writeFieldEnd();a.useIceLite!=null&&(b.writeFieldBegin({fname:"useIceLite",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:4}),b.writeBool(a.useIceLite),b.writeFieldEnd());if(a.features!=null){b.writeFieldBegin({fname:"features",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:5});b.writeListBegin({etype:h.STRING,size:a.features.length});for(d of a.features)b.writeString(d);b.writeListEnd();b.writeFieldEnd()}if(a.connectionRole!=null){b.writeFieldBegin({fname:"connectionRole",ftype:(h||(h=c("ThriftTypes"))).I32,fid:6});b.writeI32((d=a.connectionRole)!=null?d:0);b.writeFieldEnd()}a.bandwidth!=null&&(b.writeFieldBegin({fname:"bandwidth",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:7}),s(a.bandwidth,b),b.writeFieldEnd());if(a.transportBundle!=null){b.writeFieldBegin({fname:"transportBundle",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:8});b.writeListBegin({etype:h.STRING,size:a.transportBundle.length});for(d of a.transportBundle)b.writeString(d);b.writeListEnd();b.writeFieldEnd()}if(a.commonCryptos!=null){b.writeFieldBegin({fname:"commonCryptos",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:9});b.writeListBegin({etype:h.STRUCT,size:a.commonCryptos.length});for(d of a.commonCryptos)v(d,b);b.writeListEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function z(a,b){b.writeStructBegin("Sdp");a.sessionDescription!=null&&(b.writeFieldBegin({fname:"sessionDescription",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1}),y(a.sessionDescription,b),b.writeFieldEnd());if(a.mediaDescriptions!=null){b.writeFieldBegin({fname:"mediaDescriptions",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:2});b.writeListBegin({etype:h.STRUCT,size:a.mediaDescriptions.length});for(a of a.mediaDescriptions)x(a,b);b.writeListEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function A(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.semantics=a.readString():a.skip(e);break;case 2:if(e===(h||(h=c("ThriftTypes"))).LIST){b.ssrcIds=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=a.readI32();b.ssrcIds.push(g)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function B(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I32?b.ssrcId=a.readI32():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.cname=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.msid=a.readString():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.msidAppData=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.msid===void 0&&(b.msid="stream_label");return b}function C(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.id=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.param=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.id===void 0&&(b.id="");return b}function D(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.bwtype=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I32?b.bw=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.bwtype===void 0&&(b.bwtype="");b.bw===void 0&&(b.bw=0);return b}function E(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).BYTE?b.payloadType=a.readByte():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.encodingName=d("WebrtcEnumsTypes").CodecName.cast(a.readI32()):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).BYTE?b.clockRateKhz=a.readByte():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).BYTE?b.numAudioChannels=a.readByte():a.skip(f);break;case 5:if(f===(h||(h=c("ThriftTypes"))).MAP){b.fmtParameters={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=d("WebrtcEnumsTypes").CodecOption.cast(a.readI32()),j=a.readString();i!=null&&(b.fmtParameters[i]=j)}}else a.skip(f);break;case 6:if(f===(h||(h=c("ThriftTypes"))).SET){b.enabledOptions=new Set();i=a.readSetBegin();for(j=0;j<i.size;j++){g=d("WebrtcEnumsTypes").CodecOptionBoolean.cast(a.readI32());b.enabledOptions.add(g)}}else a.skip(f);break;case 7:if(f===(h||(h=c("ThriftTypes"))).MAP){b.rtcpFbParameters={};e=a.readMapBegin();for(g=0;g<e.size;g++){j=a.readString();i=a.readString();b.rtcpFbParameters[j]=i}}else a.skip(f);break;case 10:if(f===(h||(h=c("ThriftTypes"))).LIST){b.rtcpFbParamList=[];j=a.readListBegin();for(i=0;i<j.size;i++){g=C(a);b.rtcpFbParamList.push(g)}}else a.skip(f);break;case 8:f===(h||(h=c("ThriftTypes"))).I32?b.videoWidth=a.readI32():a.skip(f);break;case 9:f===(h||(h=c("ThriftTypes"))).I32?b.videoHeight=a.readI32():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.numAudioChannels===void 0&&(b.numAudioChannels=1);return b}function F(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.id=a.readI32():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.uri=d("WebrtcEnumsTypes").ExtmapUris.cast(a.readI32()):a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).LIST){b.extensionAttributes=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=d("WebrtcEnumsTypes").ExtmapUris.cast(a.readI32());b.extensionAttributes.push(i)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.id===void 0&&(b.id=1);b.extensionAttributes===void 0&&(b.extensionAttributes=[]);return b}function G(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.tag=a.readI32():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.suite=d("WebrtcEnumsTypes").CryptoSuite.cast(a.readI32()):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRING?b.keyParams=a.readString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return b}function H(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.foundation=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).BYTE?b.componentId=a.readByte():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.transport=d("WebrtcEnumsTypes").IceCandidateTransport.cast(a.readI32()):a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).I32?b.priority=a.readI32():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRING?b.address=a.readString():a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).I32?b.port=a.readI32():a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).I32?b.protocolType=d("WebrtcEnumsTypes").IceCandidateProtocolType.cast(a.readI32()):a.skip(f);break;case 8:f===(h||(h=c("ThriftTypes"))).STRING?b.relatedAddress=a.readString():a.skip(f);break;case 9:f===(h||(h=c("ThriftTypes"))).I32?b.relatedPort=a.readI32():a.skip(f);break;case 10:f===(h||(h=c("ThriftTypes"))).STRING?b.username=a.readString():a.skip(f);break;case 11:f===(h||(h=c("ThriftTypes"))).STRING?b.password=a.readString():a.skip(f);break;case 12:f===(h||(h=c("ThriftTypes"))).I32?b.generation=a.readI32():a.skip(f);break;case 13:f===(h||(h=c("ThriftTypes"))).I32?b.tcptype=d("WebrtcEnumsTypes").IceCandidateTcpType.cast(a.readI32()):a.skip(f);break;case 14:f===(h||(h=c("ThriftTypes"))).I16?b.networkId=a.readI16():a.skip(f);break;case 15:f===(h||(h=c("ThriftTypes"))).I16?b.networkCost=a.readI16():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.componentId===void 0&&(b.componentId=1);b.transport===void 0&&(b.transport=d("WebrtcEnumsTypes").IceCandidateTransport.cast(0));b.generation===void 0&&(b.generation=0);return b}function I(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.mediaType=d("WebrtcEnumsTypes").MediaType.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.port=a.readI32():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.protocol=d("WebrtcEnumsTypes").MediaProtocol.cast(a.readI32()):a.skip(f);break;case 22:f===(h||(h=c("ThriftTypes"))).STRING?b.fmt=a.readString():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.mediaIceUserFrag=a.readString():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRING?b.mediaIcePassword=a.readString():a.skip(f);break;case 6:if(f===(h||(h=c("ThriftTypes"))).LIST){b.mediaIceOptions=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=a.readString();b.mediaIceOptions.push(i)}}else a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).STRING?b.mediaSslFingerprintHash=a.readString():a.skip(f);break;case 8:f===(h||(h=c("ThriftTypes"))).STRING?b.mediaSslFingerprintDigest=a.readString():a.skip(f);break;case 9:if(f===(h||(h=c("ThriftTypes"))).LIST){b.extmaps=[];i=a.readListBegin();for(g=0;g<i.size;g++){e=F(a);b.extmaps.push(e)}}else a.skip(f);break;case 10:f===(h||(h=c("ThriftTypes"))).I32?b.sendRecvMode=d("WebrtcEnumsTypes").SendRecvMode.cast(a.readI32()):a.skip(f);break;case 11:f===(h||(h=c("ThriftTypes"))).BOOL?b.hasRtcpMux=a.readBool():a.skip(f);break;case 25:f===(h||(h=c("ThriftTypes"))).BOOL?b.rtcpReducedSize=a.readBool():a.skip(f);break;case 12:if(f===(h||(h=c("ThriftTypes"))).LIST){b.cryptoParams=[];e=a.readListBegin();for(g=0;g<e.size;g++){i=G(a);b.cryptoParams.push(i)}}else a.skip(f);break;case 13:if(f===(h||(h=c("ThriftTypes"))).LIST){b.codecs=[];i=a.readListBegin();for(g=0;g<i.size;g++){e=E(a);b.codecs.push(e)}}else a.skip(f);break;case 14:f===(h||(h=c("ThriftTypes"))).I32?b.maxPTime=a.readI32():a.skip(f);break;case 15:f===(h||(h=c("ThriftTypes"))).I32?b.pTime=a.readI32():a.skip(f);break;case 16:if(f===(h||(h=c("ThriftTypes"))).LIST){b.ssrcObjects=[];e=a.readListBegin();for(g=0;g<e.size;g++){i=B(a);b.ssrcObjects.push(i)}}else a.skip(f);break;case 17:if(f===(h||(h=c("ThriftTypes"))).LIST){b.candidates=[];i=a.readListBegin();for(g=0;g<i.size;g++){e=H(a);b.candidates.push(e)}}else a.skip(f);break;case 18:f===(h||(h=c("ThriftTypes"))).BOOL?b.conferenceMode=a.readBool():a.skip(f);break;case 19:if(f===(h||(h=c("ThriftTypes"))).LIST){b.ssrcGroups=[];e=a.readListBegin();for(g=0;g<e.size;g++){i=A(a);b.ssrcGroups.push(i)}}else a.skip(f);break;case 20:f===(h||(h=c("ThriftTypes"))).I32?b.connectionRole=d("WebrtcEnumsTypes").ConnectionRole.cast(a.readI32()):a.skip(f);break;case 21:f===(h||(h=c("ThriftTypes"))).STRING?b.mid=a.readString():a.skip(f);break;case 23:f===(h||(h=c("ThriftTypes"))).STRUCT?b.bandwidth=D(a):a.skip(f);break;case 24:f===(h||(h=c("ThriftTypes"))).I32?b.sctpPort=a.readI32():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.port===void 0&&(b.port=1);b.protocol===void 0&&(b.protocol=d("WebrtcEnumsTypes").MediaProtocol.cast(0));b.sendRecvMode===void 0&&(b.sendRecvMode=d("WebrtcEnumsTypes").SendRecvMode.cast(1));b.hasRtcpMux===void 0&&(b.hasRtcpMux=!0);return b}function J(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.sessionId=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.sessionVersion=a.readString():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).BOOL?b.supportsMsid=a.readBool():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).BOOL?b.useIceLite=a.readBool():a.skip(f);break;case 5:if(f===(h||(h=c("ThriftTypes"))).LIST){b.features=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=a.readString();b.features.push(i)}}else a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).I32?b.connectionRole=d("WebrtcEnumsTypes").ConnectionRole.cast(a.readI32()):a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).STRUCT?b.bandwidth=D(a):a.skip(f);break;case 8:if(f===(h||(h=c("ThriftTypes"))).LIST){b.transportBundle=[];i=a.readListBegin();for(g=0;g<i.size;g++){e=a.readString();b.transportBundle.push(e)}}else a.skip(f);break;case 9:if(f===(h||(h=c("ThriftTypes"))).LIST){b.commonCryptos=[];e=a.readListBegin();for(g=0;g<e.size;g++){i=G(a);b.commonCryptos.push(i)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.supportsMsid===void 0&&(b.supportsMsid=!0);return b}function K(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRUCT?b.sessionDescription=J(a):a.skip(e);break;case 2:if(e===(h||(h=c("ThriftTypes"))).LIST){b.mediaDescriptions=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=I(a);b.mediaDescriptions.push(g)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}g.SsrcGroup$DefaultConstructor=a;g.SsrcObject$DefaultConstructor=b;g.RtcpFbVal$DefaultConstructor=e;g.Bandwidth$DefaultConstructor=f;g.CodecDescription$DefaultConstructor=i;g.Extmap$DefaultConstructor=j;g.CryptoParam$DefaultConstructor=k;g.IceCandidateSdp$DefaultConstructor=l;g.MediaDescription$DefaultConstructor=m;g.SessionDescription$DefaultConstructor=n;g.Sdp$DefaultConstructor=o;g.serializeSsrcGroup=p;g.serializeSsrcObject=q;g.serializeRtcpFbVal=r;g.serializeBandwidth=s;g.serializeCodecDescription=t;g.serializeExtmap=u;g.serializeCryptoParam=v;g.serializeIceCandidateSdp=w;g.serializeMediaDescription=x;g.serializeSessionDescription=y;g.serializeSdp=z;g.deserializeSsrcGroup=A;g.deserializeSsrcObject=B;g.deserializeRtcpFbVal=C;g.deserializeBandwidth=D;g.deserializeCodecDescription=E;g.deserializeExtmap=F;g.deserializeCryptoParam=G;g.deserializeIceCandidateSdp=H;g.deserializeMediaDescription=I;g.deserializeSessionDescription=J;g.deserializeSdp=K}),98);
__d("MultiwayCommonSerializers",["DataMessageSerializers","DataMessageTypes","MultiwayCommonTypes","MultiwaySharedSerializers","MultiwaySharedTypes","StateSyncSerializers","StateSyncTopicsConfigTypes","ThriftTypes","Utf8ToString","WebrtcSdpSerializers","WebrtcSignalingCommonTypes"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a;return{message:"",responseStatusCode:(a=d("MultiwayCommonTypes")).RtcResponseStatusCode.cast(0),responseSubCode:a.RtcResponseSubCode.cast(0),apiStatusCode:a.RtcApiStatusCode.cast(0),rtcLogSeverity:a.RtcLogSeverity.cast(0)}}function i(){return{}}function b(){return{media:{}}}function e(){return{body:"",msid:"",mid:""}}function f(){return{sourceKey:"",media:[],ssrcGroups:[]}}function j(){return{mediaStatus:{}}}function k(){return{sdpMLineIndex:"0",sdpMid:""}}function l(){return{stateStore:{},stateStoreV2:{}}}function aa(){return{version:0}}function ba(){return{encryptedTopic:"",encryptedData:Uint8Array.of(),senderId:Uint8Array.of(),messageType:d("MultiwayCommonTypes").E2eeDataMessageType.cast(0)}}function ca(){return{fromVersion:"0",toVersion:"0",mediaUpdates:[]}}function da(){return{currentVersion:"0",mediaPath:d("MultiwaySharedTypes").MediaPath.cast(0)}}function ea(){return{callerUserId:"",calleeUserId:"",sessionId:""}}function fa(){return{fromVersion:"0",toVersion:"0",mediaUpdates:[],renegotiationRequested:!1,multipleVideoStreamsAllowed:!1,mediaPath:d("MultiwaySharedTypes").MediaPath.cast(0),screenShareStreamAllowed:!1}}function ga(){return{currentVersion:"0"}}function ha(){return{}}function ia(){return{reason:d("MultiwayCommonTypes").HangupReason.cast(0),detailedReasonString:""}}function ja(){return{iceCandidateSdps:[]}}function ka(){return{reason:d("MultiwayCommonTypes").DismissReason.cast(0),detailedReasonString:""}}function la(){return{joinMode:d("MultiwayCommonTypes").JoinMode.cast(0)}}function ma(){return{state:d("MultiwayCommonTypes").ParticipantCallState.cast(0)}}function na(){return{}}function oa(){return{}}function pa(){return{}}function qa(){return{version:"0",participantStates:{},groupsOfUsers:[]}}function ra(){return{currentVersion:"0"}}function sa(){return{subscriptions:[]}}function ta(){return{message:d("DataMessageSerializers").DataMessage$DefaultConstructor()}}function ua(){return{deliveryResult:{}}}function va(){return{usersToInvite:new Set()}}function wa(){return{smcTier:"",region:"",isUsfu:!1,isEdge:!1}}function xa(){return{offer:i(),deviceCapabilities:new Set()}}function ya(){return{answer:i(),mediaStatus:{},initiator:"",isPendingApproval:!1,multipleVideoStreamsAllowed:!1,mediaPath:d("MultiwaySharedTypes").MediaPath.cast(0),groupsOfUsers:[],screenShareStreamAllowed:!1}}function za(){return{deviceCapabilities:new Set()}}function Aa(){return{}}function Ba(){return{type:d("MultiwayCommonTypes").ClientEventType.cast(0)}}function Ca(){return{clientEvents:[]}}function Da(){return{}}function Ea(){return{}}function Fa(){return{caller:"",otherParticipants:new Set(),ringType:d("MultiwayCommonTypes").RingType.cast(0),mediaPath:d("MultiwaySharedTypes").MediaPath.cast(0),isTransferCall:!1}}function Ga(){return{deviceStatus:d("MultiwayCommonTypes").DeviceStatus.cast(0)}}function Ha(){return{usersToRemove:new Set()}}function Ia(){return{topic:"",version:0,topicId:d("StateSyncTopicsConfigTypes").TopicId.cast(0)}}function Ja(){return{topic:"",version:0}}function Ka(){return{syncPayload:l(),topic:"",version:0,topicId:d("StateSyncTopicsConfigTypes").TopicId.cast(0)}}function La(){return{topic:"",version:0}}function Ma(){return{topic:"",version:0,data:Uint8Array.of()}}function Na(){return{topic:"",version:0}}function Oa(){return{approvalStatus:d("MultiwayCommonTypes").ApprovalStatus.cast(0),targetUsers:new Set()}}function Pa(){return{id:""}}function Qa(){return{actorId:"",baseId:""}}function m(){return{type:d("MultiwayCommonTypes").MessageType.cast(0),conferenceName:"",transactionId:"",retryCount:0}}function n(){return{}}function Ra(){return{messageHeader:m(),messageBody:n()}}function Sa(){return{users:new Set(),allowMultipleJoins:!1,dismissOthersOnFirstJoin:!1,aliasId:""}}function Ta(){return{}}function Ua(a,b){b.writeStructBegin("RtcException");b.writeFieldBegin({fname:"message",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.message!=null)b.writeString(a.message);else{var e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"responseStatusCode",ftype:h.I32,fid:2});if(a.responseStatusCode!=null){b.writeI32((e=a.responseStatusCode)!=null?e:0)}else{e=d("MultiwayCommonTypes").RtcResponseStatusCode.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"responseSubCode",ftype:h.I32,fid:3});if(a.responseSubCode!=null){b.writeI32((e=a.responseSubCode)!=null?e:0)}else{e=d("MultiwayCommonTypes").RtcResponseSubCode.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"apiStatusCode",ftype:h.I32,fid:4});if(a.apiStatusCode!=null){b.writeI32((e=a.apiStatusCode)!=null?e:0)}else{e=d("MultiwayCommonTypes").RtcApiStatusCode.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"rtcLogSeverity",ftype:h.I32,fid:5});if(a.rtcLogSeverity!=null){b.writeI32((e=a.rtcLogSeverity)!=null?e:0)}else{a=d("MultiwayCommonTypes").RtcLogSeverity.cast(0);b.writeI32(a!=null?a:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function o(a,b){b.writeStructBegin("SessionDescription"),a.sdpString!=null&&(b.writeFieldBegin({fname:"sdpString",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.sdpString),b.writeFieldEnd()),a.sdpThrift!=null&&(b.writeFieldBegin({fname:"sdpThrift",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2}),d("WebrtcSdpSerializers").serializeSdp(a.sdpThrift,b),b.writeFieldEnd()),a.sdpCompressionVersion!=null&&(b.writeFieldBegin({fname:"sdpCompressionVersion",ftype:(h||(h=c("ThriftTypes"))).I64,fid:3}),b.writeI64(BigInt(a.sdpCompressionVersion)),b.writeFieldEnd()),a.sdpCompressedData!=null&&(b.writeFieldBegin({fname:"sdpCompressedData",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeBinary(a.sdpCompressedData),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function Va(a,b){b.writeStructBegin("SessionDescriptionUpdate");b.writeFieldBegin({fname:"media",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.media!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.STRUCT,size:Object.keys(a.media).length});for(a of Object.entries(a.media)){var d=a[0],e=a[1];b.writeI32(Number(d));p(e,b)}b.writeMapEnd()}else{d={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.STRUCT,size:Object.keys(d).length});for(e of Object.entries(d)){a=e[0];d=e[1];b.writeI32(Number(a));p(d,b)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function p(a,b){b.writeStructBegin("MediaDescriptionUpdate");b.writeFieldBegin({fname:"body",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.body!=null)b.writeString(a.body);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"msid",ftype:h.STRING,fid:2});if(a.msid!=null)b.writeString(a.msid);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"mid",ftype:h.STRING,fid:3});if(a.mid!=null)b.writeString(a.mid);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function q(a,b){b.writeStructBegin("ServerMediaUpdate");b.writeFieldBegin({fname:"sourceKey",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.sourceKey!=null)b.writeString(a.sourceKey);else{var e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"media",ftype:h.LIST,fid:2});if(a.media!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.media.length});for(e of a.media)d("MultiwaySharedSerializers").serializeMedia(e,b);b.writeListEnd()}else{e=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:e.length});for(e of e)d("MultiwaySharedSerializers").serializeMedia(e,b);b.writeListEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"ssrcGroups",ftype:h.LIST,fid:3});if(a.ssrcGroups!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.ssrcGroups.length});for(e of a.ssrcGroups)d("MultiwaySharedSerializers").serializeSsrcGroup(e,b);b.writeListEnd()}else{a=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.length});for(e of a)d("MultiwaySharedSerializers").serializeSsrcGroup(e,b);b.writeListEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function r(a,b){b.writeStructBegin("ClientMediaUpdate");b.writeFieldBegin({fname:"mediaStatus",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.mediaStatus!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.BOOL,size:Object.keys(a.mediaStatus).length});for(var e of Object.entries(a.mediaStatus)){var f=e[0],g=e[1];b.writeString(f);b.writeBool(g)}b.writeMapEnd()}else{f={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.BOOL,size:Object.keys(f).length});for(g of Object.entries(f)){e=g[0];f=g[1];b.writeString(e);b.writeBool(f)}b.writeMapEnd()}b.writeFieldEnd();a.mediaStatusEx!=null&&(b.writeFieldBegin({fname:"mediaStatusEx",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2}),d("MultiwaySharedSerializers").serializeClientMediaStatus(a.mediaStatusEx,b),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function s(a,b){b.writeStructBegin("IceCandidate");a.candidateSdpString!=null&&(b.writeFieldBegin({fname:"candidateSdpString",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.candidateSdpString),b.writeFieldEnd());b.writeFieldBegin({fname:"sdpMLineIndex",ftype:(h||(h=c("ThriftTypes"))).I64,fid:2});if(a.sdpMLineIndex!=null)b.writeI64(BigInt(a.sdpMLineIndex));else{var e="0";b.writeI64(BigInt(e))}b.writeFieldEnd();b.writeFieldBegin({fname:"sdpMid",ftype:h.STRING,fid:3});if(a.sdpMid!=null)b.writeString(a.sdpMid);else{e="";b.writeString(e)}b.writeFieldEnd();a.candidateSdpThrift!=null&&(b.writeFieldBegin({fname:"candidateSdpThrift",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:4}),d("WebrtcSdpSerializers").serializeIceCandidateSdp(a.candidateSdpThrift,b),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function t(a,b){b.writeStructBegin("SyncPayload");b.writeFieldBegin({fname:"stateStore",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.stateStore!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(a.stateStore).length});for(var e of Object.entries(a.stateStore)){var f=e[0],g=e[1];b.writeString(f);d("StateSyncSerializers").serializeState(g,b)}b.writeMapEnd()}else{f={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(f).length});for(g of Object.entries(f)){e=g[0];f=g[1];b.writeString(e);d("StateSyncSerializers").serializeState(f,b)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"stateStoreV2",ftype:h.MAP,fid:4});if(a.stateStoreV2!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.STRUCT,size:Object.keys(a.stateStoreV2).length});for(e of Object.entries(a.stateStoreV2)){f=e[0];g=e[1];b.writeI32((a=Number(f))!=null?a:0);d("StateSyncSerializers").serializeState(g,b)}b.writeMapEnd()}else{f={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.STRUCT,size:Object.keys(f).length});for(a of Object.entries(f)){g=a[0];e=a[1];b.writeI32((f=Number(g))!=null?f:0);d("StateSyncSerializers").serializeState(e,b)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function Wa(a,b){b.writeStructBegin("SyncAck");b.writeFieldBegin({fname:"version",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.version!=null)b.writeI32(a.version);else{a=0;b.writeI32(a)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function Xa(a,b){b.writeStructBegin("E2eeData");b.writeFieldBegin({fname:"encryptedTopic",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.encryptedTopic!=null)b.writeString(a.encryptedTopic);else{var e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"encryptedData",ftype:h.STRING,fid:2});if(a.encryptedData!=null)b.writeBinary(a.encryptedData);else{e=Uint8Array.of();b.writeBinary(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"senderId",ftype:h.STRING,fid:3});if(a.senderId!=null)b.writeBinary(a.senderId);else{e=Uint8Array.of();b.writeBinary(e)}b.writeFieldEnd();if(a.targetIds!=null){b.writeFieldBegin({fname:"targetIds",ftype:(h||(h=c("ThriftTypes"))).SET,fid:4});b.writeSetBegin({etype:h.STRING,size:a.targetIds.size});for(e of a.targetIds)b.writeBinary(e);b.writeSetEnd();b.writeFieldEnd()}b.writeFieldBegin({fname:"messageType",ftype:h.I32,fid:5});if(a.messageType!=null){b.writeI32((e=a.messageType)!=null?e:0)}else{a=d("MultiwayCommonTypes").E2eeDataMessageType.cast(0);b.writeI32(a!=null?a:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function u(a,b){b.writeStructBegin("ClientMediaUpdateRequest");b.writeFieldBegin({fname:"fromVersion",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.fromVersion!=null)b.writeI64(BigInt(a.fromVersion));else{var d="0";b.writeI64(BigInt(d))}b.writeFieldEnd();b.writeFieldBegin({fname:"toVersion",ftype:h.I64,fid:2});if(a.toVersion!=null)b.writeI64(BigInt(a.toVersion));else{d="0";b.writeI64(BigInt(d))}b.writeFieldEnd();b.writeFieldBegin({fname:"mediaUpdates",ftype:h.LIST,fid:3});if(a.mediaUpdates!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.mediaUpdates.length});for(d of a.mediaUpdates)r(d,b);b.writeListEnd()}else{d=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:d.length});for(d of d)r(d,b);b.writeListEnd()}b.writeFieldEnd();a.offer!=null&&(b.writeFieldBegin({fname:"offer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:4}),o(a.offer,b),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function v(a,b){b.writeStructBegin("ClientMediaUpdateResponse");b.writeFieldBegin({fname:"currentVersion",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.currentVersion!=null)b.writeI64(BigInt(a.currentVersion));else{var e="0";b.writeI64(BigInt(e))}b.writeFieldEnd();a.answer!=null&&(b.writeFieldBegin({fname:"answer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2}),o(a.answer,b),b.writeFieldEnd());a.mediaStatus!=null&&(b.writeFieldBegin({fname:"mediaStatus",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:3}),d("MultiwaySharedSerializers").serializeClientMediaStatus(a.mediaStatus,b),b.writeFieldEnd());a.sdpOriginLocalId!=null&&(b.writeFieldBegin({fname:"sdpOriginLocalId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeString(a.sdpOriginLocalId),b.writeFieldEnd());a.renegotiationOffer!=null&&(b.writeFieldBegin({fname:"renegotiationOffer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:5}),o(a.renegotiationOffer,b),b.writeFieldEnd());b.writeFieldBegin({fname:"mediaPath",ftype:h.I32,fid:6});if(a.mediaPath!=null){b.writeI32((e=a.mediaPath)!=null?e:0)}else{e=d("MultiwaySharedTypes").MediaPath.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();if(a.stateStore!=null){b.writeFieldBegin({fname:"stateStore",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:7});b.writeMapBegin({ktype:h.STRING,vtype:h.STRUCT,size:Object.keys(a.stateStore).length});for(e of Object.entries(a.stateStore)){var f=e[0],g=e[1];b.writeString(f);d("StateSyncSerializers").serializeState(g,b)}b.writeMapEnd();b.writeFieldEnd()}if(a.stateStoreV2!=null){b.writeFieldBegin({fname:"stateStoreV2",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:8});b.writeMapBegin({ktype:h.I32,vtype:h.STRUCT,size:Object.keys(a.stateStoreV2).length});for(f of Object.entries(a.stateStoreV2)){g=f[0];e=f[1];b.writeI32((a=Number(g))!=null?a:0);d("StateSyncSerializers").serializeState(e,b)}b.writeMapEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function Ya(a,b){b.writeStructBegin("MultipleRelaysAllocationParameters");b.writeFieldBegin({fname:"callerUserId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.callerUserId!=null)b.writeString(a.callerUserId);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"calleeUserId",ftype:h.STRING,fid:2});if(a.calleeUserId!=null)b.writeString(a.calleeUserId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"sessionId",ftype:h.STRING,fid:3});if(a.sessionId!=null)b.writeString(a.sessionId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function w(a,b){b.writeStructBegin("ServerMediaUpdateRequest");b.writeFieldBegin({fname:"fromVersion",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.fromVersion!=null)b.writeI64(BigInt(a.fromVersion));else{var e="0";b.writeI64(BigInt(e))}b.writeFieldEnd();b.writeFieldBegin({fname:"toVersion",ftype:h.I64,fid:2});if(a.toVersion!=null)b.writeI64(BigInt(a.toVersion));else{e="0";b.writeI64(BigInt(e))}b.writeFieldEnd();b.writeFieldBegin({fname:"mediaUpdates",ftype:h.LIST,fid:3});if(a.mediaUpdates!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.mediaUpdates.length});for(e of a.mediaUpdates)q(e,b);b.writeListEnd()}else{e=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:e.length});for(e of e)q(e,b);b.writeListEnd()}b.writeFieldEnd();a.offer!=null&&(b.writeFieldBegin({fname:"offer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:4}),o(a.offer,b),b.writeFieldEnd());a.answer!=null&&(b.writeFieldBegin({fname:"answer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6}),o(a.answer,b),b.writeFieldEnd());a.mediaStatus!=null&&(b.writeFieldBegin({fname:"mediaStatus",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:7}),d("MultiwaySharedSerializers").serializeClientMediaStatus(a.mediaStatus,b),b.writeFieldEnd());b.writeFieldBegin({fname:"renegotiationRequested",ftype:h.BOOL,fid:8});if(a.renegotiationRequested!=null)b.writeBool(a.renegotiationRequested);else{e=!1;b.writeBool(e)}b.writeFieldEnd();a.prAnswer!=null&&(b.writeFieldBegin({fname:"prAnswer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:9}),o(a.prAnswer,b),b.writeFieldEnd());if(a.stateStore!=null){b.writeFieldBegin({fname:"stateStore",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:10});b.writeMapBegin({ktype:h.STRING,vtype:h.STRUCT,size:Object.keys(a.stateStore).length});for(e of Object.entries(a.stateStore)){var f=e[0],g=e[1];b.writeString(f);d("StateSyncSerializers").serializeState(g,b)}b.writeMapEnd();b.writeFieldEnd()}a.sdpOriginLocalId!=null&&(b.writeFieldBegin({fname:"sdpOriginLocalId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:11}),b.writeString(a.sdpOriginLocalId),b.writeFieldEnd());a.multipleRelaysParameters!=null&&(b.writeFieldBegin({fname:"multipleRelaysParameters",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:12}),Ya(a.multipleRelaysParameters,b),b.writeFieldEnd());b.writeFieldBegin({fname:"multipleVideoStreamsAllowed",ftype:h.BOOL,fid:13});if(a.multipleVideoStreamsAllowed!=null)b.writeBool(a.multipleVideoStreamsAllowed);else{f=!1;b.writeBool(f)}b.writeFieldEnd();a.renegotiationOffer!=null&&(b.writeFieldBegin({fname:"renegotiationOffer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:14}),o(a.renegotiationOffer,b),b.writeFieldEnd());b.writeFieldBegin({fname:"mediaPath",ftype:h.I32,fid:15});if(a.mediaPath!=null){b.writeI32((g=a.mediaPath)!=null?g:0)}else{e=d("MultiwaySharedTypes").MediaPath.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();a.update!=null&&(b.writeFieldBegin({fname:"update",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:16}),Va(a.update,b),b.writeFieldEnd());b.writeFieldBegin({fname:"screenShareStreamAllowed",ftype:h.BOOL,fid:17});if(a.screenShareStreamAllowed!=null)b.writeBool(a.screenShareStreamAllowed);else{f=!1;b.writeBool(f)}b.writeFieldEnd();if(a.stateStoreV2!=null){b.writeFieldBegin({fname:"stateStoreV2",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:18});b.writeMapBegin({ktype:h.I32,vtype:h.STRUCT,size:Object.keys(a.stateStoreV2).length});for(g of Object.entries(a.stateStoreV2)){e=g[0];f=g[1];b.writeI32((e=Number(e))!=null?e:0);d("StateSyncSerializers").serializeState(f,b)}b.writeMapEnd();b.writeFieldEnd()}if(a.allowedCustomVideoContentTypes!=null){b.writeFieldBegin({fname:"allowedCustomVideoContentTypes",ftype:(h||(h=c("ThriftTypes"))).SET,fid:19});b.writeSetBegin({etype:h.I32,size:a.allowedCustomVideoContentTypes.size});for(e of a.allowedCustomVideoContentTypes)b.writeI32(e!=null?e:0);b.writeSetEnd();b.writeFieldEnd()}a.relayInfo!=null&&(b.writeFieldBegin({fname:"relayInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:20}),d("MultiwaySharedSerializers").serializeRelayInfo(a.relayInfo,b),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function x(a,b){b.writeStructBegin("ServerMediaUpdateResponse");b.writeFieldBegin({fname:"currentVersion",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.currentVersion!=null)b.writeI64(BigInt(a.currentVersion));else{var e="0";b.writeI64(BigInt(e))}b.writeFieldEnd();a.answer!=null&&(b.writeFieldBegin({fname:"answer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2}),o(a.answer,b),b.writeFieldEnd());a.mediaStatus!=null&&(b.writeFieldBegin({fname:"mediaStatus",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:3}),d("MultiwaySharedSerializers").serializeClientMediaStatus(a.mediaStatus,b),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function y(a,b){b.writeStructBegin("TransferRequest"),b.writeFieldStop(),b.writeStructEnd()}function z(a,b){b.writeStructBegin("HangupRequest");b.writeFieldBegin({fname:"reason",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.reason!=null){var e;b.writeI32((e=a.reason)!=null?e:0)}else{e=d("MultiwayCommonTypes").HangupReason.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"detailedReasonString",ftype:h.STRING,fid:2});if(a.detailedReasonString!=null)b.writeString(a.detailedReasonString);else{e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function A(a,b){b.writeStructBegin("IceCandidateRequest");b.writeFieldBegin({fname:"iceCandidateSdps",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:1});if(a.iceCandidateSdps!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.iceCandidateSdps.length});for(a of a.iceCandidateSdps)s(a,b);b.writeListEnd()}else{a=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.length});for(a of a)s(a,b);b.writeListEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function B(a,b){b.writeStructBegin("DismissRequest");b.writeFieldBegin({fname:"reason",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.reason!=null){var e;b.writeI32((e=a.reason)!=null?e:0)}else{e=d("MultiwayCommonTypes").DismissReason.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"detailedReasonString",ftype:h.STRING,fid:2});if(a.detailedReasonString!=null)b.writeString(a.detailedReasonString);else{e="";b.writeString(e)}b.writeFieldEnd();a.callabilityResultErrorCode!=null&&(b.writeFieldBegin({fname:"callabilityResultErrorCode",ftype:(h||(h=c("ThriftTypes"))).I64,fid:3}),b.writeI64(BigInt(a.callabilityResultErrorCode)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function Za(a,b){b.writeStructBegin("EndpointSettings");b.writeFieldBegin({fname:"joinMode",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.joinMode!=null){b.writeI32((a=a.joinMode)!=null?a:0)}else{a=d("MultiwayCommonTypes").JoinMode.cast(0);b.writeI32(a!=null?a:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function C(a,b){b.writeStructBegin("ParticipantState");b.writeFieldBegin({fname:"state",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.state!=null){var e;b.writeI32((e=a.state)!=null?e:0)}else{e=d("MultiwayCommonTypes").ParticipantCallState.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();a.userCapabilities!=null&&(b.writeFieldBegin({fname:"userCapabilities",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeBinary(a.userCapabilities),b.writeFieldEnd());a.sctpNodeId!=null&&(b.writeFieldBegin({fname:"sctpNodeId",ftype:(h||(h=c("ThriftTypes"))).I64,fid:3}),b.writeI64(BigInt(a.sctpNodeId)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function $a(a,b){b.writeStructBegin("ServerOnlyParticipantState"),a.userCountry!=null&&(b.writeFieldBegin({fname:"userCountry",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.userCountry),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function D(a,b){b.writeStructBegin("UserProfile"),a.name!=null&&(b.writeFieldBegin({fname:"name",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.name),b.writeFieldEnd()),a.profilePictureUri!=null&&(b.writeFieldBegin({fname:"profilePictureUri",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.profilePictureUri),b.writeFieldEnd()),a.aliasId!=null&&(b.writeFieldBegin({fname:"aliasId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeString(a.aliasId),b.writeFieldEnd()),a.thirdPartyId!=null&&(b.writeFieldBegin({fname:"thirdPartyId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeString(a.thirdPartyId),b.writeFieldEnd()),a.groupId!=null&&(b.writeFieldBegin({fname:"groupId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:5}),b.writeString(a.groupId),b.writeFieldEnd()),a.avatarImageUri!=null&&(b.writeFieldBegin({fname:"avatarImageUri",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:6}),b.writeString(a.avatarImageUri),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function ab(a,b){b.writeStructBegin("ProductMetadata"),a.callerInfo!=null&&(b.writeFieldBegin({fname:"callerInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1}),D(a.callerInfo,b),b.writeFieldEnd()),a.liveBroadcastId!=null&&(b.writeFieldBegin({fname:"liveBroadcastId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.liveBroadcastId),b.writeFieldEnd()),a.callingTags!=null&&(b.writeFieldBegin({fname:"callingTags",ftype:(h||(h=c("ThriftTypes"))).I32,fid:3}),b.writeI32(a.callingTags),b.writeFieldEnd()),a.backingIdentifier!=null&&(b.writeFieldBegin({fname:"backingIdentifier",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeString(a.backingIdentifier),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function E(a,b){b.writeStructBegin("ConferenceStateRequest");b.writeFieldBegin({fname:"version",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.version!=null)b.writeI64(BigInt(a.version));else{var e="0";b.writeI64(BigInt(e))}b.writeFieldEnd();b.writeFieldBegin({fname:"participantStates",ftype:h.MAP,fid:2});if(a.participantStates!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(a.participantStates).length});for(e of Object.entries(a.participantStates)){var f=e[0],g=e[1];b.writeString(f);C(g,b)}b.writeMapEnd()}else{f={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(f).length});for(g of Object.entries(f)){e=g[0];f=g[1];b.writeString(e);C(f,b)}b.writeMapEnd()}b.writeFieldEnd();if(a.userProfiles!=null){b.writeFieldBegin({fname:"userProfiles",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:3});b.writeMapBegin({ktype:h.STRING,vtype:h.STRUCT,size:Object.keys(a.userProfiles).length});for(e of Object.entries(a.userProfiles)){f=e[0];g=e[1];b.writeString(f);D(g,b)}b.writeMapEnd();b.writeFieldEnd()}if(a.appMessages!=null){b.writeFieldBegin({fname:"appMessages",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:4});b.writeListBegin({etype:h.STRUCT,size:a.appMessages.length});for(f of a.appMessages)d("DataMessageSerializers").serializeDataMessage(f,b);b.writeListEnd();b.writeFieldEnd()}b.writeFieldBegin({fname:"groupsOfUsers",ftype:h.LIST,fid:5});if(a.groupsOfUsers!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.groupsOfUsers.length});for(g of a.groupsOfUsers)Y(g,b);b.writeListEnd()}else{e=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:e.length});for(f of e)Y(f,b);b.writeListEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function F(a,b){b.writeStructBegin("ConferenceStateResponse");b.writeFieldBegin({fname:"currentVersion",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.currentVersion!=null)b.writeI64(BigInt(a.currentVersion));else{a="0";b.writeI64(BigInt(a))}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function G(a,b){b.writeStructBegin("SubscriptionRequest");b.writeFieldBegin({fname:"subscriptions",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:1});if(a.subscriptions!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.subscriptions.length});for(a of a.subscriptions)d("MultiwaySharedSerializers").serializeSubscription(a,b);b.writeListEnd()}else{a=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.length});for(a of a)d("MultiwaySharedSerializers").serializeSubscription(a,b);b.writeListEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function H(a,b){b.writeStructBegin("DataMessageRequest");b.writeFieldBegin({fname:"message",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1});if(a.message!=null)d("DataMessageSerializers").serializeDataMessage(a.message,b);else{a=d("DataMessageSerializers").DataMessage$DefaultConstructor();d("DataMessageSerializers").serializeDataMessage(a,b)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function I(a,b){b.writeStructBegin("DataMessageResponse");b.writeFieldBegin({fname:"deliveryResult",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.deliveryResult!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.I32,size:Object.keys(a.deliveryResult).length});for(var d of Object.entries(a.deliveryResult)){var e=d[0],f=d[1];b.writeString(e);b.writeI32(f!=null?f:0)}b.writeMapEnd()}else{e={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.I32,size:Object.keys(e).length});for(f of Object.entries(e)){d=f[0];e=f[1];b.writeString(d);b.writeI32(e!=null?e:0)}b.writeMapEnd()}b.writeFieldEnd();if(a.serviceTypeDeliveryResult!=null){b.writeFieldBegin({fname:"serviceTypeDeliveryResult",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:2});b.writeMapBegin({ktype:h.I32,vtype:h.I32,size:Object.keys(a.serviceTypeDeliveryResult).length});for(d of Object.entries(a.serviceTypeDeliveryResult)){e=d[0];f=d[1];b.writeI32((a=Number(e))!=null?a:0);b.writeI32(f!=null?f:0)}b.writeMapEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function J(a,b){b.writeStructBegin("AddParticipantsRequest");b.writeFieldBegin({fname:"usersToInvite",ftype:(h||(h=c("ThriftTypes"))).SET,fid:1});if(a.usersToInvite!=null){b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:a.usersToInvite.size});for(var e of a.usersToInvite)b.writeString(e);b.writeSetEnd()}else{e=new Set();b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:e.size});for(e of e)b.writeString(e);b.writeSetEnd()}b.writeFieldEnd();if(a.appMessages!=null){b.writeFieldBegin({fname:"appMessages",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:2});b.writeListBegin({etype:h.STRUCT,size:a.appMessages.length});for(e of a.appMessages)d("DataMessageSerializers").serializeDataMessage(e,b);b.writeListEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function K(a,b){b.writeStructBegin("SfuAllocation");b.writeFieldBegin({fname:"smcTier",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.smcTier!=null)b.writeString(a.smcTier);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"region",ftype:h.STRING,fid:2});if(a.region!=null)b.writeString(a.region);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"isUsfu",ftype:h.BOOL,fid:3});if(a.isUsfu!=null)b.writeBool(a.isUsfu);else{d=!1;b.writeBool(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"isEdge",ftype:h.BOOL,fid:4});if(a.isEdge!=null)b.writeBool(a.isEdge);else{d=!1;b.writeBool(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function L(a,b){b.writeStructBegin("JoinRequest");b.writeFieldBegin({fname:"offer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1});if(a.offer!=null)o(a.offer,b);else{var e=i();o(e,b)}b.writeFieldEnd();b.writeFieldBegin({fname:"deviceCapabilities",ftype:h.SET,fid:2});if(a.deviceCapabilities!=null){b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).I32,size:a.deviceCapabilities.size});for(e of a.deviceCapabilities)b.writeI32(e!=null?e:0);b.writeSetEnd()}else{e=new Set();b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).I32,size:e.size});for(e of e)b.writeI32(e!=null?e:0);b.writeSetEnd()}b.writeFieldEnd();if(a.usersToCall!=null){b.writeFieldBegin({fname:"usersToCall",ftype:(h||(h=c("ThriftTypes"))).SET,fid:3});b.writeSetBegin({etype:h.STRING,size:a.usersToCall.size});for(e of a.usersToCall)b.writeString(e);b.writeSetEnd();b.writeFieldEnd()}if(a.mediaStatus!=null){b.writeFieldBegin({fname:"mediaStatus",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:4});b.writeMapBegin({ktype:h.STRING,vtype:h.BOOL,size:Object.keys(a.mediaStatus).length});for(e of Object.entries(a.mediaStatus)){var f=e[0],g=e[1];b.writeString(f);b.writeBool(g)}b.writeMapEnd();b.writeFieldEnd()}a.userCapabilities!=null&&(b.writeFieldBegin({fname:"userCapabilities",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:5}),b.writeBinary(a.userCapabilities),b.writeFieldEnd());a.supportedExperiments!=null&&(b.writeFieldBegin({fname:"supportedExperiments",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:6}),b.writeString(a.supportedExperiments),b.writeFieldEnd());if(a.appMessages!=null){b.writeFieldBegin({fname:"appMessages",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:9});b.writeListBegin({etype:h.STRUCT,size:a.appMessages.length});for(f of a.appMessages)d("DataMessageSerializers").serializeDataMessage(f,b);b.writeListEnd();b.writeFieldEnd()}a.userToEscalate!=null&&(b.writeFieldBegin({fname:"userToEscalate",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:10}),b.writeString(a.userToEscalate),b.writeFieldEnd());a.escalatingCallId!=null&&(b.writeFieldBegin({fname:"escalatingCallId",ftype:(h||(h=c("ThriftTypes"))).I64,fid:11}),b.writeI64(BigInt(a.escalatingCallId)),b.writeFieldEnd());if(a.conferenceType!=null){b.writeFieldBegin({fname:"conferenceType",ftype:(h||(h=c("ThriftTypes"))).I32,fid:12});b.writeI32((g=a.conferenceType)!=null?g:0);b.writeFieldEnd()}a.mediaStatusEx!=null&&(b.writeFieldBegin({fname:"mediaStatusEx",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:13}),d("MultiwaySharedSerializers").serializeClientMediaStatus(a.mediaStatusEx,b),b.writeFieldEnd());a.answer!=null&&(b.writeFieldBegin({fname:"answer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:14}),o(a.answer,b),b.writeFieldEnd());a.syncPayload!=null&&(b.writeFieldBegin({fname:"syncPayload",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:15}),t(a.syncPayload,b),b.writeFieldEnd());if(a.usersToApproveFromWaitingRoom!=null){b.writeFieldBegin({fname:"usersToApproveFromWaitingRoom",ftype:(h||(h=c("ThriftTypes"))).SET,fid:16});b.writeSetBegin({etype:h.STRING,size:a.usersToApproveFromWaitingRoom.size});for(e of a.usersToApproveFromWaitingRoom)b.writeString(e);b.writeSetEnd();b.writeFieldEnd()}a.e2eeEnforcement!=null&&(b.writeFieldBegin({fname:"e2eeEnforcement",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:17}),d("MultiwaySharedSerializers").serializeE2eeEnforcement(a.e2eeEnforcement,b),b.writeFieldEnd());a.sfuAllocation!=null&&(b.writeFieldBegin({fname:"sfuAllocation",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:18}),K(a.sfuAllocation,b),b.writeFieldEnd());if(a.clientMediaMode!=null){b.writeFieldBegin({fname:"clientMediaMode",ftype:(h||(h=c("ThriftTypes"))).I32,fid:19});b.writeI32((f=a.clientMediaMode)!=null?f:0);b.writeFieldEnd()}a.endpointSettings!=null&&(b.writeFieldBegin({fname:"endpointSettings",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:20}),Za(a.endpointSettings,b),b.writeFieldEnd());a.backupSfuAllocation!=null&&(b.writeFieldBegin({fname:"backupSfuAllocation",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:21}),K(a.backupSfuAllocation,b),b.writeFieldEnd());if(a.supportedCustomVideoContentTypes!=null){b.writeFieldBegin({fname:"supportedCustomVideoContentTypes",ftype:(h||(h=c("ThriftTypes"))).SET,fid:22});b.writeSetBegin({etype:h.I32,size:a.supportedCustomVideoContentTypes.size});for(g of a.supportedCustomVideoContentTypes)b.writeI32(g!=null?g:0);b.writeSetEnd();b.writeFieldEnd()}a.configIntegrityOpaqueToken!=null&&(b.writeFieldBegin({fname:"configIntegrityOpaqueToken",ftype:(h||(h=c("ThriftTypes"))).I32,fid:23}),b.writeI32(a.configIntegrityOpaqueToken),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function M(a,b){b.writeStructBegin("JoinResponse");b.writeFieldBegin({fname:"answer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1});if(a.answer!=null)o(a.answer,b);else{var e=i();o(e,b)}b.writeFieldEnd();b.writeFieldBegin({fname:"mediaStatus",ftype:h.MAP,fid:2});if(a.mediaStatus!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.BOOL,size:Object.keys(a.mediaStatus).length});for(e of Object.entries(a.mediaStatus)){var f=e[0],g=e[1];b.writeString(f);b.writeBool(g)}b.writeMapEnd()}else{f={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.BOOL,size:Object.keys(f).length});for(g of Object.entries(f)){e=g[0];f=g[1];b.writeString(e);b.writeBool(f)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"initiator",ftype:h.STRING,fid:3});if(a.initiator!=null)b.writeString(a.initiator);else{e="";b.writeString(e)}b.writeFieldEnd();a.negotiatedExperiments!=null&&(b.writeFieldBegin({fname:"negotiatedExperiments",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeString(a.negotiatedExperiments),b.writeFieldEnd());a.mediaStatusEx!=null&&(b.writeFieldBegin({fname:"mediaStatusEx",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6}),d("MultiwaySharedSerializers").serializeClientMediaStatus(a.mediaStatusEx,b),b.writeFieldEnd());if(a.appMessages!=null){b.writeFieldBegin({fname:"appMessages",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:7});b.writeListBegin({etype:h.STRUCT,size:a.appMessages.length});for(f of a.appMessages)d("DataMessageSerializers").serializeDataMessage(f,b);b.writeListEnd();b.writeFieldEnd()}if(a.stateStore!=null){b.writeFieldBegin({fname:"stateStore",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:8});b.writeMapBegin({ktype:h.STRING,vtype:h.STRUCT,size:Object.keys(a.stateStore).length});for(g of Object.entries(a.stateStore)){e=g[0];f=g[1];b.writeString(e);d("StateSyncSerializers").serializeState(f,b)}b.writeMapEnd();b.writeFieldEnd()}a.sdpOriginLocalId!=null&&(b.writeFieldBegin({fname:"sdpOriginLocalId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:9}),b.writeString(a.sdpOriginLocalId),b.writeFieldEnd());b.writeFieldBegin({fname:"isPendingApproval",ftype:h.BOOL,fid:10});if(a.isPendingApproval!=null)b.writeBool(a.isPendingApproval);else{e=!1;b.writeBool(e)}b.writeFieldEnd();a.renegotiationOffer!=null&&(b.writeFieldBegin({fname:"renegotiationOffer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:11}),o(a.renegotiationOffer,b),b.writeFieldEnd());b.writeFieldBegin({fname:"multipleVideoStreamsAllowed",ftype:h.BOOL,fid:12});if(a.multipleVideoStreamsAllowed!=null)b.writeBool(a.multipleVideoStreamsAllowed);else{f=!1;b.writeBool(f)}b.writeFieldEnd();b.writeFieldBegin({fname:"mediaPath",ftype:h.I32,fid:13});if(a.mediaPath!=null){b.writeI32((g=a.mediaPath)!=null?g:0)}else{e=d("MultiwaySharedTypes").MediaPath.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"groupsOfUsers",ftype:h.LIST,fid:14});if(a.groupsOfUsers!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.groupsOfUsers.length});for(f of a.groupsOfUsers)Y(f,b);b.writeListEnd()}else{g=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:g.length});for(e of g)Y(e,b);b.writeListEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"screenShareStreamAllowed",ftype:h.BOOL,fid:15});if(a.screenShareStreamAllowed!=null)b.writeBool(a.screenShareStreamAllowed);else{f=!1;b.writeBool(f)}b.writeFieldEnd();a.relayInfo!=null&&(b.writeFieldBegin({fname:"relayInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:16}),d("MultiwaySharedSerializers").serializeRelayInfo(a.relayInfo,b),b.writeFieldEnd());a.selfSctpNodeId!=null&&(b.writeFieldBegin({fname:"selfSctpNodeId",ftype:(h||(h=c("ThriftTypes"))).I64,fid:17}),b.writeI64(BigInt(a.selfSctpNodeId)),b.writeFieldEnd());if(a.stateStoreV2!=null){b.writeFieldBegin({fname:"stateStoreV2",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:18});b.writeMapBegin({ktype:h.I32,vtype:h.STRUCT,size:Object.keys(a.stateStoreV2).length});for(g of Object.entries(a.stateStoreV2)){e=g[0];f=g[1];b.writeI32((e=Number(e))!=null?e:0);d("StateSyncSerializers").serializeState(f,b)}b.writeMapEnd();b.writeFieldEnd()}if(a.allowedCustomVideoContentTypes!=null){b.writeFieldBegin({fname:"allowedCustomVideoContentTypes",ftype:(h||(h=c("ThriftTypes"))).SET,fid:19});b.writeSetBegin({etype:h.I32,size:a.allowedCustomVideoContentTypes.size});for(e of a.allowedCustomVideoContentTypes)b.writeI32(e!=null?e:0);b.writeSetEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function N(a,b){b.writeStructBegin("ConnectRequest");a.sdp!=null&&(b.writeFieldBegin({fname:"sdp",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1}),o(a.sdp,b),b.writeFieldEnd());b.writeFieldBegin({fname:"deviceCapabilities",ftype:(h||(h=c("ThriftTypes"))).SET,fid:3});if(a.deviceCapabilities!=null){b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).I32,size:a.deviceCapabilities.size});for(var e of a.deviceCapabilities)b.writeI32(e!=null?e:0);b.writeSetEnd()}else{e=new Set();b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).I32,size:e.size});for(e of e)b.writeI32(e!=null?e:0);b.writeSetEnd()}b.writeFieldEnd();if(a.supportedCustomVideoContentTypes!=null){b.writeFieldBegin({fname:"supportedCustomVideoContentTypes",ftype:(h||(h=c("ThriftTypes"))).SET,fid:5});b.writeSetBegin({etype:h.I32,size:a.supportedCustomVideoContentTypes.size});for(e of a.supportedCustomVideoContentTypes)b.writeI32(e!=null?e:0);b.writeSetEnd();b.writeFieldEnd()}a.prOffer!=null&&(b.writeFieldBegin({fname:"prOffer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6}),o(a.prOffer,b),b.writeFieldEnd());a.e2eeEnforcement!=null&&(b.writeFieldBegin({fname:"e2eeEnforcement",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:7}),d("MultiwaySharedSerializers").serializeE2eeEnforcement(a.e2eeEnforcement,b),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function O(a,b){b.writeStructBegin("ConnectResponse"),a.sdp!=null&&(b.writeFieldBegin({fname:"sdp",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1}),o(a.sdp,b),b.writeFieldEnd()),a.sdpOriginLocalId!=null&&(b.writeFieldBegin({fname:"sdpOriginLocalId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.sdpOriginLocalId),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function P(a,b){b.writeStructBegin("ClientEvent");b.writeFieldBegin({fname:"type",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.type!=null){var e;b.writeI32((e=a.type)!=null?e:0)}else{e=d("MultiwayCommonTypes").ClientEventType.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();a.time!=null&&(b.writeFieldBegin({fname:"time",ftype:(h||(h=c("ThriftTypes"))).I64,fid:2}),b.writeI64(BigInt(a.time)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function Q(a,b){b.writeStructBegin("ClientEventRequest");b.writeFieldBegin({fname:"clientEvents",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:1});if(a.clientEvents!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.clientEvents.length});for(a of a.clientEvents)P(a,b);b.writeListEnd()}else{a=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.length});for(a of a)P(a,b);b.writeListEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function bb(a,b){b.writeStructBegin("ThreadIdInfo"),a.groupThreadId!=null&&(b.writeFieldBegin({fname:"groupThreadId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.groupThreadId),b.writeFieldEnd()),a.peerId!=null&&(b.writeFieldBegin({fname:"peerId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.peerId),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function R(a,b){b.writeStructBegin("ClientEventResponse"),b.writeFieldStop(),b.writeStructEnd()}function S(a,b){b.writeStructBegin("RingRequest");b.writeFieldBegin({fname:"caller",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.caller!=null)b.writeString(a.caller);else{var e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"otherParticipants",ftype:h.SET,fid:2});if(a.otherParticipants!=null){b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:a.otherParticipants.size});for(e of a.otherParticipants)b.writeString(e);b.writeSetEnd()}else{e=new Set();b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:e.size});for(e of e)b.writeString(e);b.writeSetEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"ringType",ftype:h.I32,fid:4});if(a.ringType!=null){b.writeI32((e=a.ringType)!=null?e:0)}else{e=d("MultiwayCommonTypes").RingType.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();a.offeredExperiments!=null&&(b.writeFieldBegin({fname:"offeredExperiments",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:5}),b.writeString(a.offeredExperiments),b.writeFieldEnd());a.isScheduledCall!=null&&(b.writeFieldBegin({fname:"isScheduledCall",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:6}),b.writeBool(a.isScheduledCall),b.writeFieldEnd());if(a.appMessages!=null){b.writeFieldBegin({fname:"appMessages",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:8});b.writeListBegin({etype:h.STRUCT,size:a.appMessages.length});for(e of a.appMessages)d("DataMessageSerializers").serializeDataMessage(e,b);b.writeListEnd();b.writeFieldEnd()}a.offer!=null&&(b.writeFieldBegin({fname:"offer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:10}),o(a.offer,b),b.writeFieldEnd());a.mediaStatusEx!=null&&(b.writeFieldBegin({fname:"mediaStatusEx",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:11}),d("MultiwaySharedSerializers").serializeClientMediaStatus(a.mediaStatusEx,b),b.writeFieldEnd());a.isPreconnectSupported!=null&&(b.writeFieldBegin({fname:"isPreconnectSupported",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:12}),b.writeBool(a.isPreconnectSupported),b.writeFieldEnd());a.sdpOriginLocalId!=null&&(b.writeFieldBegin({fname:"sdpOriginLocalId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:13}),b.writeString(a.sdpOriginLocalId),b.writeFieldEnd());a.unifiedOffer!=null&&(b.writeFieldBegin({fname:"unifiedOffer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:14}),o(a.unifiedOffer,b),b.writeFieldEnd());b.writeFieldBegin({fname:"mediaPath",ftype:h.I32,fid:15});if(a.mediaPath!=null){b.writeI32((e=a.mediaPath)!=null?e:0)}else{e=d("MultiwaySharedTypes").MediaPath.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();a.e2eeEnforcement!=null&&(b.writeFieldBegin({fname:"e2eeEnforcement",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:16}),d("MultiwaySharedSerializers").serializeE2eeEnforcement(a.e2eeEnforcement,b),b.writeFieldEnd());a.isLegacyCall!=null&&(b.writeFieldBegin({fname:"isLegacyCall",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:17}),b.writeBool(a.isLegacyCall),b.writeFieldEnd());b.writeFieldBegin({fname:"isTransferCall",ftype:h.BOOL,fid:18});if(a.isTransferCall!=null)b.writeBool(a.isTransferCall);else{e=!1;b.writeBool(e)}b.writeFieldEnd();a.relayInfo!=null&&(b.writeFieldBegin({fname:"relayInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:20}),d("MultiwaySharedSerializers").serializeRelayInfo(a.relayInfo,b),b.writeFieldEnd());if(a.overlayConfigs!=null){b.writeFieldBegin({fname:"overlayConfigs",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:21});b.writeMapBegin({ktype:h.I32,vtype:h.I32,size:Object.keys(a.overlayConfigs).length});for(e of Object.entries(a.overlayConfigs)){var f=e[0],g=e[1];b.writeI32(Number(f));b.writeI32(g)}b.writeMapEnd();b.writeFieldEnd()}a.productMetadata!=null&&(b.writeFieldBegin({fname:"productMetadata",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:22}),ab(a.productMetadata,b),b.writeFieldEnd());a.callerClientSessionId!=null&&(b.writeFieldBegin({fname:"callerClientSessionId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:23}),b.writeString(a.callerClientSessionId),b.writeFieldEnd());a.threadIdInfo!=null&&(b.writeFieldBegin({fname:"threadIdInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:24}),bb(a.threadIdInfo,b),b.writeFieldEnd());a.linkUrl!=null&&(b.writeFieldBegin({fname:"linkUrl",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:25}),b.writeString(a.linkUrl),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function T(a,b){b.writeStructBegin("RingResponse");b.writeFieldBegin({fname:"deviceStatus",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2});if(a.deviceStatus!=null){b.writeI32((a=a.deviceStatus)!=null?a:0)}else{a=d("MultiwayCommonTypes").DeviceStatus.cast(0);b.writeI32(a!=null?a:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function U(a,b){b.writeStructBegin("RemoveParticipantsRequest");b.writeFieldBegin({fname:"usersToRemove",ftype:(h||(h=c("ThriftTypes"))).SET,fid:1});if(a.usersToRemove!=null){b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:a.usersToRemove.size});for(a of a.usersToRemove)b.writeString(a);b.writeSetEnd()}else{a=new Set();b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:a.size});for(a of a)b.writeString(a);b.writeSetEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function V(a,b){b.writeStructBegin("UnsubscribeRequest");b.writeFieldBegin({fname:"topic",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.topic!=null)b.writeString(a.topic);else{var e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"version",ftype:h.I32,fid:2});if(a.version!=null)b.writeI32(a.version);else{e=0;b.writeI32(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"topicId",ftype:h.I32,fid:3});if(a.topicId!=null){b.writeI32((e=a.topicId)!=null?e:0)}else{a=d("StateSyncTopicsConfigTypes").TopicId.cast(0);b.writeI32(a!=null?a:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function W(a,b){b.writeStructBegin("UnsubscribeResponse");b.writeFieldBegin({fname:"topic",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.topic!=null)b.writeString(a.topic);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"version",ftype:h.I32,fid:2});if(a.version!=null)b.writeI32(a.version);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function X(a,b){b.writeStructBegin("UpdateRequest");b.writeFieldBegin({fname:"syncPayload",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1});if(a.syncPayload!=null)t(a.syncPayload,b);else{var e=l();t(e,b)}b.writeFieldEnd();b.writeFieldBegin({fname:"topic",ftype:h.STRING,fid:2});if(a.topic!=null)b.writeString(a.topic);else{e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"version",ftype:h.I32,fid:3});if(a.version!=null)b.writeI32(a.version);else{e=0;b.writeI32(e)}b.writeFieldEnd();a.data!=null&&(b.writeFieldBegin({fname:"data",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeBinary(a.data),b.writeFieldEnd());b.writeFieldBegin({fname:"topicId",ftype:h.I32,fid:5});if(a.topicId!=null){b.writeI32((e=a.topicId)!=null?e:0)}else{a=d("StateSyncTopicsConfigTypes").TopicId.cast(0);b.writeI32(a!=null?a:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function cb(a,b){b.writeStructBegin("UpdateResponse");b.writeFieldBegin({fname:"topic",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2});if(a.topic!=null)b.writeString(a.topic);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"version",ftype:h.I32,fid:3});if(a.version!=null)b.writeI32(a.version);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function db(a,b){b.writeStructBegin("NotifyRequest");b.writeFieldBegin({fname:"topic",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2});if(a.topic!=null)b.writeString(a.topic);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"version",ftype:h.I32,fid:3});if(a.version!=null)b.writeI32(a.version);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"data",ftype:h.STRING,fid:4});if(a.data!=null)b.writeBinary(a.data);else{d=Uint8Array.of();b.writeBinary(d)}b.writeFieldEnd();a.syncPayload!=null&&(b.writeFieldBegin({fname:"syncPayload",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:5}),t(a.syncPayload,b),b.writeFieldEnd());if(a.topicId!=null){b.writeFieldBegin({fname:"topicId",ftype:(h||(h=c("ThriftTypes"))).I32,fid:6});b.writeI32((d=a.topicId)!=null?d:0);b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function eb(a,b){b.writeStructBegin("NotifyResponse");b.writeFieldBegin({fname:"topic",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2});if(a.topic!=null)b.writeString(a.topic);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"version",ftype:h.I32,fid:3});if(a.version!=null)b.writeI32(a.version);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function fb(a,b){b.writeStructBegin("ApprovalRequest");b.writeFieldBegin({fname:"approvalStatus",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2});if(a.approvalStatus!=null){var e;b.writeI32((e=a.approvalStatus)!=null?e:0)}else{e=d("MultiwayCommonTypes").ApprovalStatus.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"targetUsers",ftype:h.SET,fid:3});if(a.targetUsers!=null){b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:a.targetUsers.size});for(e of a.targetUsers)b.writeString(e);b.writeSetEnd()}else{a=new Set();b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:a.size});for(e of a)b.writeString(e);b.writeSetEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function gb(a,b){b.writeStructBegin("RtcSender");b.writeFieldBegin({fname:"id",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.id!=null)b.writeString(a.id);else{a="";b.writeString(a)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function hb(a,b){b.writeStructBegin("RtcReceiver");b.writeFieldBegin({fname:"actorId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.actorId!=null)b.writeString(a.actorId);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"baseId",ftype:h.STRING,fid:2});if(a.baseId!=null)b.writeString(a.baseId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function ib(a,b){b.writeStructBegin("RtcMessageHeader");b.writeFieldBegin({fname:"type",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.type!=null){var e;b.writeI32((e=a.type)!=null?e:0)}else{e=d("MultiwayCommonTypes").MessageType.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"conferenceName",ftype:h.STRING,fid:2});if(a.conferenceName!=null)b.writeString(a.conferenceName);else{e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"transactionId",ftype:h.STRING,fid:3});if(a.transactionId!=null)b.writeString(a.transactionId);else{e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"retryCount",ftype:h.I16,fid:4});if(a.retryCount!=null)b.writeI16(a.retryCount);else{e=0;b.writeI16(e)}b.writeFieldEnd();a.serverInfoData!=null&&(b.writeFieldBegin({fname:"serverInfoData",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:5}),b.writeString(a.serverInfoData),b.writeFieldEnd());if(a.responseStatusCode!=null){b.writeFieldBegin({fname:"responseStatusCode",ftype:(h||(h=c("ThriftTypes"))).I32,fid:6});b.writeI32((e=a.responseStatusCode)!=null?e:0);b.writeFieldEnd()}if(a.extensions!=null){b.writeFieldBegin({fname:"extensions",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:7});b.writeMapBegin({ktype:h.STRING,vtype:h.STRING,size:Object.keys(a.extensions).length});for(e of Object.entries(a.extensions)){var f=e[0],g=e[1];b.writeString(f);b.writeString(g)}b.writeMapEnd();b.writeFieldEnd()}a.sequenceNumber!=null&&(b.writeFieldBegin({fname:"sequenceNumber",ftype:(h||(h=c("ThriftTypes"))).I64,fid:8}),b.writeI64(BigInt(a.sequenceNumber)),b.writeFieldEnd());a.clientSessionId!=null&&(b.writeFieldBegin({fname:"clientSessionId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:9}),b.writeString(a.clientSessionId),b.writeFieldEnd());a.responseStatusMessage!=null&&(b.writeFieldBegin({fname:"responseStatusMessage",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:10}),b.writeString(a.responseStatusMessage),b.writeFieldEnd());if(a.responseSubCode!=null){b.writeFieldBegin({fname:"responseSubCode",ftype:(h||(h=c("ThriftTypes"))).I32,fid:11});b.writeI32((f=a.responseSubCode)!=null?f:0);b.writeFieldEnd()}a.collisionKey!=null&&(b.writeFieldBegin({fname:"collisionKey",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:12}),b.writeString(a.collisionKey),b.writeFieldEnd());if(a.conferenceType!=null){b.writeFieldBegin({fname:"conferenceType",ftype:(h||(h=c("ThriftTypes"))).I32,fid:13});b.writeI32((g=a.conferenceType)!=null?g:0);b.writeFieldEnd()}a.serverSessionId!=null&&(b.writeFieldBegin({fname:"serverSessionId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:14}),b.writeString(a.serverSessionId),b.writeFieldEnd());a.rtcHandle!=null&&(b.writeFieldBegin({fname:"rtcHandle",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:15}),b.writeString(a.rtcHandle),b.writeFieldEnd());a.retryAfterMsec!=null&&(b.writeFieldBegin({fname:"retryAfterMsec",ftype:(h||(h=c("ThriftTypes"))).I32,fid:16}),b.writeI32(a.retryAfterMsec),b.writeFieldEnd());a.receiverUserId!=null&&(b.writeFieldBegin({fname:"receiverUserId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:17}),b.writeString(a.receiverUserId),b.writeFieldEnd());if(a.clientStack!=null){b.writeFieldBegin({fname:"clientStack",ftype:(h||(h=c("ThriftTypes"))).I32,fid:18});b.writeI32((e=a.clientStack)!=null?e:0);b.writeFieldEnd()}a.serverMsgTime!=null&&(b.writeFieldBegin({fname:"serverMsgTime",ftype:(h||(h=c("ThriftTypes"))).I64,fid:19}),b.writeI64(BigInt(a.serverMsgTime)),b.writeFieldEnd());a.sender!=null&&(b.writeFieldBegin({fname:"sender",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:20}),gb(a.sender,b),b.writeFieldEnd());a.receiver!=null&&(b.writeFieldBegin({fname:"receiver",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:21}),hb(a.receiver,b),b.writeFieldEnd());if(a.messageTags!=null){b.writeFieldBegin({fname:"messageTags",ftype:(h||(h=c("ThriftTypes"))).SET,fid:22});b.writeSetBegin({etype:h.I32,size:a.messageTags.size});for(f of a.messageTags)b.writeI32(f!=null?f:0);b.writeSetEnd();b.writeFieldEnd()}a.conferenceId!=null&&(b.writeFieldBegin({fname:"conferenceId",ftype:(h||(h=c("ThriftTypes"))).I64,fid:23}),b.writeI64(BigInt(a.conferenceId)),b.writeFieldEnd());a.protocolVersion!=null&&(b.writeFieldBegin({fname:"protocolVersion",ftype:(h||(h=c("ThriftTypes"))).I32,fid:24}),b.writeI32(a.protocolVersion),b.writeFieldEnd());a.bodyCompressionVersion!=null&&(b.writeFieldBegin({fname:"bodyCompressionVersion",ftype:(h||(h=c("ThriftTypes"))).I64,fid:25}),b.writeI64(BigInt(a.bodyCompressionVersion)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function jb(a,b){b.writeStructBegin("RtcMessageBody"),a.joinRequest!=null&&(b.writeFieldBegin({fname:"joinRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1}),L(a.joinRequest,b),b.writeFieldEnd()),a.joinResponse!=null&&(b.writeFieldBegin({fname:"joinResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2}),M(a.joinResponse,b),b.writeFieldEnd()),a.serverMediaUpdateRequest!=null&&(b.writeFieldBegin({fname:"serverMediaUpdateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:3}),w(a.serverMediaUpdateRequest,b),b.writeFieldEnd()),a.serverMediaUpdateResponse!=null&&(b.writeFieldBegin({fname:"serverMediaUpdateResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:4}),x(a.serverMediaUpdateResponse,b),b.writeFieldEnd()),a.hangupRequest!=null&&(b.writeFieldBegin({fname:"hangupRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:5}),z(a.hangupRequest,b),b.writeFieldEnd()),a.iceCandidateRequest!=null&&(b.writeFieldBegin({fname:"iceCandidateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6}),A(a.iceCandidateRequest,b),b.writeFieldEnd()),a.ringRequest!=null&&(b.writeFieldBegin({fname:"ringRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:8}),S(a.ringRequest,b),b.writeFieldEnd()),a.ringResponse!=null&&(b.writeFieldBegin({fname:"ringResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:9}),T(a.ringResponse,b),b.writeFieldEnd()),a.dismissRequest!=null&&(b.writeFieldBegin({fname:"dismissRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:10}),B(a.dismissRequest,b),b.writeFieldEnd()),a.conferenceStateRequest!=null&&(b.writeFieldBegin({fname:"conferenceStateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:11}),E(a.conferenceStateRequest,b),b.writeFieldEnd()),a.conferenceStateResponse!=null&&(b.writeFieldBegin({fname:"conferenceStateResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:12}),F(a.conferenceStateResponse,b),b.writeFieldEnd()),a.addParticipantsRequest!=null&&(b.writeFieldBegin({fname:"addParticipantsRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:13}),J(a.addParticipantsRequest,b),b.writeFieldEnd()),a.subscriptionRequest!=null&&(b.writeFieldBegin({fname:"subscriptionRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:14}),G(a.subscriptionRequest,b),b.writeFieldEnd()),a.clientMediaUpdateRequest!=null&&(b.writeFieldBegin({fname:"clientMediaUpdateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:15}),u(a.clientMediaUpdateRequest,b),b.writeFieldEnd()),a.clientMediaUpdateResponse!=null&&(b.writeFieldBegin({fname:"clientMediaUpdateResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:16}),v(a.clientMediaUpdateResponse,b),b.writeFieldEnd()),a.dataMessageRequest!=null&&(b.writeFieldBegin({fname:"dataMessageRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:17}),H(a.dataMessageRequest,b),b.writeFieldEnd()),a.removeParticipantsRequest!=null&&(b.writeFieldBegin({fname:"removeParticipantsRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:18}),U(a.removeParticipantsRequest,b),b.writeFieldEnd()),a.dataMessageResponse!=null&&(b.writeFieldBegin({fname:"dataMessageResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:19}),I(a.dataMessageResponse,b),b.writeFieldEnd()),a.updateRequest!=null&&(b.writeFieldBegin({fname:"updateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:30}),X(a.updateRequest,b),b.writeFieldEnd()),a.updateResponse!=null&&(b.writeFieldBegin({fname:"updateResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:31}),cb(a.updateResponse,b),b.writeFieldEnd()),a.notifyRequest!=null&&(b.writeFieldBegin({fname:"notifyRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:32}),db(a.notifyRequest,b),b.writeFieldEnd()),a.notifyResponse!=null&&(b.writeFieldBegin({fname:"notifyResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:33}),eb(a.notifyResponse,b),b.writeFieldEnd()),a.connectRequest!=null&&(b.writeFieldBegin({fname:"connectRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:34}),N(a.connectRequest,b),b.writeFieldEnd()),a.connectResponse!=null&&(b.writeFieldBegin({fname:"connectResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:35}),O(a.connectResponse,b),b.writeFieldEnd()),a.clientEventRequest!=null&&(b.writeFieldBegin({fname:"clientEventRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:36}),Q(a.clientEventRequest,b),b.writeFieldEnd()),a.clientEventResponse!=null&&(b.writeFieldBegin({fname:"clientEventResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:37}),R(a.clientEventResponse,b),b.writeFieldEnd()),a.unsubscribeRequest!=null&&(b.writeFieldBegin({fname:"unsubscribeRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:40}),V(a.unsubscribeRequest,b),b.writeFieldEnd()),a.unsubscribeResponse!=null&&(b.writeFieldBegin({fname:"unsubscribeResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:41}),W(a.unsubscribeResponse,b),b.writeFieldEnd()),a.approvalRequest!=null&&(b.writeFieldBegin({fname:"approvalRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:42}),fb(a.approvalRequest,b),b.writeFieldEnd()),a.transferRequest!=null&&(b.writeFieldBegin({fname:"transferRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:43}),y(a.transferRequest,b),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function kb(a,b){b.writeStructBegin("RtcMultiwayMessage");b.writeFieldBegin({fname:"messageHeader",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1});if(a.messageHeader!=null)ib(a.messageHeader,b);else{var d=m();ib(d,b)}b.writeFieldEnd();b.writeFieldBegin({fname:"messageBody",ftype:h.STRUCT,fid:2});if(a.messageBody!=null)jb(a.messageBody,b);else{d=n();jb(d,b)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function Y(a,b){b.writeStructBegin("GroupOfUsers");b.writeFieldBegin({fname:"users",ftype:(h||(h=c("ThriftTypes"))).SET,fid:1});if(a.users!=null){b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:a.users.size});for(var d of a.users)b.writeString(d);b.writeSetEnd()}else{d=new Set();b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:d.size});for(d of d)b.writeString(d);b.writeSetEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"allowMultipleJoins",ftype:h.BOOL,fid:2});if(a.allowMultipleJoins!=null)b.writeBool(a.allowMultipleJoins);else{d=!1;b.writeBool(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"dismissOthersOnFirstJoin",ftype:h.BOOL,fid:3});if(a.dismissOthersOnFirstJoin!=null)b.writeBool(a.dismissOthersOnFirstJoin);else{d=!1;b.writeBool(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"aliasId",ftype:h.STRING,fid:4});if(a.aliasId!=null)b.writeString(a.aliasId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function lb(a,b){b.writeStructBegin("RtcMessageBodyVariant");if(a.joinRequest!=null){b.writeFieldBegin({fname:"joinRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1});L(a.joinRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.joinResponse!=null){b.writeFieldBegin({fname:"joinResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2});M(a.joinResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.serverMediaUpdateRequest!=null){b.writeFieldBegin({fname:"serverMediaUpdateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:3});w(a.serverMediaUpdateRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.serverMediaUpdateResponse!=null){b.writeFieldBegin({fname:"serverMediaUpdateResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:4});x(a.serverMediaUpdateResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.hangupRequest!=null){b.writeFieldBegin({fname:"hangupRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:5});z(a.hangupRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.iceCandidateRequest!=null){b.writeFieldBegin({fname:"iceCandidateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6});A(a.iceCandidateRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.ringRequest!=null){b.writeFieldBegin({fname:"ringRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:8});S(a.ringRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.ringResponse!=null){b.writeFieldBegin({fname:"ringResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:9});T(a.ringResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.dismissRequest!=null){b.writeFieldBegin({fname:"dismissRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:10});B(a.dismissRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.conferenceStateRequest!=null){b.writeFieldBegin({fname:"conferenceStateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:11});E(a.conferenceStateRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.conferenceStateResponse!=null){b.writeFieldBegin({fname:"conferenceStateResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:12});F(a.conferenceStateResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.addParticipantsRequest!=null){b.writeFieldBegin({fname:"addParticipantsRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:13});J(a.addParticipantsRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.subscriptionRequest!=null){b.writeFieldBegin({fname:"subscriptionRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:14});G(a.subscriptionRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.clientMediaUpdateRequest!=null){b.writeFieldBegin({fname:"clientMediaUpdateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:15});u(a.clientMediaUpdateRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.clientMediaUpdateResponse!=null){b.writeFieldBegin({fname:"clientMediaUpdateResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:16});v(a.clientMediaUpdateResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.dataMessageRequest!=null){b.writeFieldBegin({fname:"dataMessageRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:17});H(a.dataMessageRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.removeParticipantsRequest!=null){b.writeFieldBegin({fname:"removeParticipantsRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:18});U(a.removeParticipantsRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.dataMessageResponse!=null){b.writeFieldBegin({fname:"dataMessageResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:19});I(a.dataMessageResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.updateRequest!=null){b.writeFieldBegin({fname:"updateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:30});X(a.updateRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.updateResponse!=null){b.writeFieldBegin({fname:"updateResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:31});cb(a.updateResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.notifyRequest!=null){b.writeFieldBegin({fname:"notifyRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:32});db(a.notifyRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.notifyResponse!=null){b.writeFieldBegin({fname:"notifyResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:33});eb(a.notifyResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.connectRequest!=null){b.writeFieldBegin({fname:"connectRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:34});N(a.connectRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.connectResponse!=null){b.writeFieldBegin({fname:"connectResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:35});O(a.connectResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.clientEventRequest!=null){b.writeFieldBegin({fname:"clientEventRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:36});Q(a.clientEventRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.clientEventResponse!=null){b.writeFieldBegin({fname:"clientEventResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:37});R(a.clientEventResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.unsubscribeRequest!=null){b.writeFieldBegin({fname:"unsubscribeRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:40});V(a.unsubscribeRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.unsubscribeResponse!=null){b.writeFieldBegin({fname:"unsubscribeResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:41});W(a.unsubscribeResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.approvalRequest!=null){b.writeFieldBegin({fname:"approvalRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:42});fb(a.approvalRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.transferRequest!=null){b.writeFieldBegin({fname:"transferRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:43});y(a.transferRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}b.writeFieldStop();b.writeStructEnd()}function mb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.message=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.responseStatusCode=d("MultiwayCommonTypes").RtcResponseStatusCode.cast(a.readI32()):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.responseSubCode=d("MultiwayCommonTypes").RtcResponseSubCode.cast(a.readI32()):a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).I32?b.apiStatusCode=d("MultiwayCommonTypes").RtcApiStatusCode.cast(a.readI32()):a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).I32?b.rtcLogSeverity=d("MultiwayCommonTypes").RtcLogSeverity.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.message===void 0&&(b.message="");b.responseStatusCode===void 0&&(b.responseStatusCode=d("MultiwayCommonTypes").RtcResponseStatusCode.cast(0));b.responseSubCode===void 0&&(b.responseSubCode=d("MultiwayCommonTypes").RtcResponseSubCode.cast(0));b.apiStatusCode===void 0&&(b.apiStatusCode=d("MultiwayCommonTypes").RtcApiStatusCode.cast(0));b.rtcLogSeverity===void 0&&(b.rtcLogSeverity=d("MultiwayCommonTypes").RtcLogSeverity.cast(0));return b}function Z(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.sdpString=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRUCT?b.sdpThrift=d("WebrtcSdpSerializers").deserializeSdp(a):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I64?b.sdpCompressionVersion=a.readI64().toString():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.sdpCompressedData=a.readBinary():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return b}function nb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).MAP){b.media={};d=a.readMapBegin();for(var f=0;f<d.size;f++){var g=a.readI32(),i=ob(a);b.media[g]=i}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.media===void 0&&(b.media={});return b}function ob(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.body=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.msid=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.mid=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.body===void 0&&(b.body="");b.msid===void 0&&(b.msid="");b.mid===void 0&&(b.mid="");return b}function pb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.sourceKey=a.readString():a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).LIST){b.media=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=d("MultiwaySharedSerializers").deserializeMedia(a);b.media.push(i)}}else a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).LIST){b.ssrcGroups=[];i=a.readListBegin();for(g=0;g<i.size;g++){e=d("MultiwaySharedSerializers").deserializeSsrcGroup(a);b.ssrcGroups.push(e)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.sourceKey===void 0&&(b.sourceKey="");b.media===void 0&&(b.media=[]);b.ssrcGroups===void 0&&(b.ssrcGroups=[]);return b}function qb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).MAP){b.mediaStatus={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readString(),j=a.readBool();b.mediaStatus[i]=j}}else a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRUCT?b.mediaStatusEx=d("MultiwaySharedSerializers").deserializeClientMediaStatus(a):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.mediaStatus===void 0&&(b.mediaStatus={});return b}function rb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.candidateSdpString=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I64?b.sdpMLineIndex=a.readI64().toString():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRING?b.sdpMid=a.readString():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRUCT?b.candidateSdpThrift=d("WebrtcSdpSerializers").deserializeIceCandidateSdp(a):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.sdpMLineIndex===void 0&&(b.sdpMLineIndex="0");b.sdpMid===void 0&&(b.sdpMid="");return b}function $(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).MAP){b.stateStore={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readString(),j=d("StateSyncSerializers").deserializeState(a);b.stateStore[i]=j}}else a.skip(f);break;case 4:if(f===(h||(h=c("ThriftTypes"))).MAP){b.stateStoreV2={};i=a.readMapBegin();for(j=0;j<i.size;j++){g=d("StateSyncTopicsConfigTypes").TopicId.cast(a.readI32());e=d("StateSyncSerializers").deserializeState(a);g!=null&&(b.stateStoreV2[g]=e)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.stateStore===void 0&&(b.stateStore={});b.stateStoreV2===void 0&&(b.stateStoreV2={});return b}function sb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I32?b.version=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.version===void 0&&(b.version=0);return b}function tb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.encryptedTopic=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.encryptedData=a.readBinary():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRING?b.senderId=a.readBinary():a.skip(f);break;case 4:if(f===(h||(h=c("ThriftTypes"))).SET){b.targetIds=new Set();e=a.readSetBegin();for(var g=0;g<e.size;g++){var i=d("Utf8ToString").Utf8ToString(a.readBinary());b.targetIds.add(i)}}else a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).I32?b.messageType=d("MultiwayCommonTypes").E2eeDataMessageType.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.encryptedTopic===void 0&&(b.encryptedTopic="");b.encryptedData===void 0&&(b.encryptedData=Uint8Array.of());b.senderId===void 0&&(b.senderId=Uint8Array.of());b.messageType===void 0&&(b.messageType=d("MultiwayCommonTypes").E2eeDataMessageType.cast(0));return b}function ub(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.fromVersion=a.readI64().toString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I64?b.toVersion=a.readI64().toString():a.skip(e);break;case 3:if(e===(h||(h=c("ThriftTypes"))).LIST){b.mediaUpdates=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=qb(a);b.mediaUpdates.push(g)}}else a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRUCT?b.offer=Z(a):a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.fromVersion===void 0&&(b.fromVersion="0");b.toVersion===void 0&&(b.toVersion="0");b.mediaUpdates===void 0&&(b.mediaUpdates=[]);return b}function vb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I64?b.currentVersion=a.readI64().toString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRUCT?b.answer=Z(a):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRUCT?b.mediaStatus=d("MultiwaySharedSerializers").deserializeClientMediaStatus(a):a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.sdpOriginLocalId=a.readString():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRUCT?b.renegotiationOffer=Z(a):a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).I32?b.mediaPath=d("MultiwaySharedTypes").MediaPath.cast(a.readI32()):a.skip(f);break;case 7:if(f===(h||(h=c("ThriftTypes"))).MAP){b.stateStore={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readString(),j=d("StateSyncSerializers").deserializeState(a);b.stateStore[i]=j}}else a.skip(f);break;case 8:if(f===(h||(h=c("ThriftTypes"))).MAP){b.stateStoreV2={};i=a.readMapBegin();for(j=0;j<i.size;j++){g=d("StateSyncTopicsConfigTypes").TopicId.cast(a.readI32());e=d("StateSyncSerializers").deserializeState(a);g!=null&&(b.stateStoreV2[g]=e)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.currentVersion===void 0&&(b.currentVersion="0");b.mediaPath===void 0&&(b.mediaPath=d("MultiwaySharedTypes").MediaPath.cast(0));return b}function wb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.callerUserId=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.calleeUserId=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.sessionId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.callerUserId===void 0&&(b.callerUserId="");b.calleeUserId===void 0&&(b.calleeUserId="");b.sessionId===void 0&&(b.sessionId="");return b}function xb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I64?b.fromVersion=a.readI64().toString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I64?b.toVersion=a.readI64().toString():a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).LIST){b.mediaUpdates=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=pb(a);b.mediaUpdates.push(i)}}else a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRUCT?b.offer=Z(a):a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).STRUCT?b.answer=Z(a):a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).STRUCT?b.mediaStatus=d("MultiwaySharedSerializers").deserializeClientMediaStatus(a):a.skip(f);break;case 8:f===(h||(h=c("ThriftTypes"))).BOOL?b.renegotiationRequested=a.readBool():a.skip(f);break;case 9:f===(h||(h=c("ThriftTypes"))).STRUCT?b.prAnswer=Z(a):a.skip(f);break;case 10:if(f===(h||(h=c("ThriftTypes"))).MAP){b.stateStore={};i=a.readMapBegin();for(g=0;g<i.size;g++){e=a.readString();var j=d("StateSyncSerializers").deserializeState(a);b.stateStore[e]=j}}else a.skip(f);break;case 11:f===(h||(h=c("ThriftTypes"))).STRING?b.sdpOriginLocalId=a.readString():a.skip(f);break;case 12:f===(h||(h=c("ThriftTypes"))).STRUCT?b.multipleRelaysParameters=wb(a):a.skip(f);break;case 13:f===(h||(h=c("ThriftTypes"))).BOOL?b.multipleVideoStreamsAllowed=a.readBool():a.skip(f);break;case 14:f===(h||(h=c("ThriftTypes"))).STRUCT?b.renegotiationOffer=Z(a):a.skip(f);break;case 15:f===(h||(h=c("ThriftTypes"))).I32?b.mediaPath=d("MultiwaySharedTypes").MediaPath.cast(a.readI32()):a.skip(f);break;case 16:f===(h||(h=c("ThriftTypes"))).STRUCT?b.update=nb(a):a.skip(f);break;case 17:f===(h||(h=c("ThriftTypes"))).BOOL?b.screenShareStreamAllowed=a.readBool():a.skip(f);break;case 18:if(f===(h||(h=c("ThriftTypes"))).MAP){b.stateStoreV2={};e=a.readMapBegin();for(j=0;j<e.size;j++){g=d("StateSyncTopicsConfigTypes").TopicId.cast(a.readI32());i=d("StateSyncSerializers").deserializeState(a);g!=null&&(b.stateStoreV2[g]=i)}}else a.skip(f);break;case 19:if(f===(h||(h=c("ThriftTypes"))).SET){b.allowedCustomVideoContentTypes=new Set();g=a.readSetBegin();for(i=0;i<g.size;i++){j=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(a.readI32());b.allowedCustomVideoContentTypes.add(j)}}else a.skip(f);break;case 20:f===(h||(h=c("ThriftTypes"))).STRUCT?b.relayInfo=d("MultiwaySharedSerializers").deserializeRelayInfo(a):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.fromVersion===void 0&&(b.fromVersion="0");b.toVersion===void 0&&(b.toVersion="0");b.mediaUpdates===void 0&&(b.mediaUpdates=[]);b.renegotiationRequested===void 0&&(b.renegotiationRequested=!1);b.multipleVideoStreamsAllowed===void 0&&(b.multipleVideoStreamsAllowed=!1);b.mediaPath===void 0&&(b.mediaPath=d("MultiwaySharedTypes").MediaPath.cast(0));b.screenShareStreamAllowed===void 0&&(b.screenShareStreamAllowed=!1);return b}function yb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I64?b.currentVersion=a.readI64().toString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRUCT?b.answer=Z(a):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRUCT?b.mediaStatus=d("MultiwaySharedSerializers").deserializeClientMediaStatus(a):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.currentVersion===void 0&&(b.currentVersion="0");return b}function zb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function Ab(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.reason=d("MultiwayCommonTypes").HangupReason.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.detailedReasonString=a.readString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.reason===void 0&&(b.reason=d("MultiwayCommonTypes").HangupReason.cast(0));b.detailedReasonString===void 0&&(b.detailedReasonString="");return b}function Bb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).LIST){b.iceCandidateSdps=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=rb(a);b.iceCandidateSdps.push(g)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.iceCandidateSdps===void 0&&(b.iceCandidateSdps=[]);return b}function Cb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.reason=d("MultiwayCommonTypes").DismissReason.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.detailedReasonString=a.readString():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I64?b.callabilityResultErrorCode=a.readI64().toString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.reason===void 0&&(b.reason=d("MultiwayCommonTypes").DismissReason.cast(0));b.detailedReasonString===void 0&&(b.detailedReasonString="");return b}function Db(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.joinMode=d("MultiwayCommonTypes").JoinMode.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.joinMode===void 0&&(b.joinMode=d("MultiwayCommonTypes").JoinMode.cast(0));return b}function Eb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.state=d("MultiwayCommonTypes").ParticipantCallState.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.userCapabilities=a.readBinary():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I64?b.sctpNodeId=a.readI64().toString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.state===void 0&&(b.state=d("MultiwayCommonTypes").ParticipantCallState.cast(0));return b}function Fb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.userCountry=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function Gb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.name=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.profilePictureUri=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.aliasId=a.readString():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.thirdPartyId=a.readString():a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).STRING?b.groupId=a.readString():a.skip(e);break;case 6:e===(h||(h=c("ThriftTypes"))).STRING?b.avatarImageUri=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function Hb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRUCT?b.callerInfo=Gb(a):a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.liveBroadcastId=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).I32?b.callingTags=a.readI32():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.backingIdentifier=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function Ib(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I64?b.version=a.readI64().toString():a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).MAP){b.participantStates={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readString(),j=Eb(a);b.participantStates[i]=j}}else a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).MAP){b.userProfiles={};i=a.readMapBegin();for(j=0;j<i.size;j++){g=a.readString();e=Gb(a);b.userProfiles[g]=e}}else a.skip(f);break;case 4:if(f===(h||(h=c("ThriftTypes"))).LIST){b.appMessages=[];g=a.readListBegin();for(e=0;e<g.size;e++){j=d("DataMessageSerializers").deserializeDataMessage(a);b.appMessages.push(j)}}else a.skip(f);break;case 5:if(f===(h||(h=c("ThriftTypes"))).LIST){b.groupsOfUsers=[];i=a.readListBegin();for(j=0;j<i.size;j++){e=lc(a);b.groupsOfUsers.push(e)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.version===void 0&&(b.version="0");b.participantStates===void 0&&(b.participantStates={});b.groupsOfUsers===void 0&&(b.groupsOfUsers=[]);return b}function Jb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.currentVersion=a.readI64().toString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.currentVersion===void 0&&(b.currentVersion="0");return b}function Kb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).LIST){b.subscriptions=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=d("MultiwaySharedSerializers").deserializeSubscription(a);b.subscriptions.push(i)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.subscriptions===void 0&&(b.subscriptions=[]);return b}function Lb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRUCT?b.message=d("DataMessageSerializers").deserializeDataMessage(a):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.message===void 0&&(b.message=d("DataMessageSerializers").DataMessage$DefaultConstructor());return b}function Mb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).MAP){b.deliveryResult={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readString(),j=d("DataMessageTypes").DataMessageStatusCode.cast(a.readI32());b.deliveryResult[i]=j}}else a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).MAP){b.serviceTypeDeliveryResult={};i=a.readMapBegin();for(j=0;j<i.size;j++){g=d("MultiwaySharedTypes").EndpointServiceType.cast(a.readI32());e=d("DataMessageTypes").DataMessageStatusCode.cast(a.readI32());g!=null&&(b.serviceTypeDeliveryResult[g]=e)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.deliveryResult===void 0&&(b.deliveryResult={});return b}function Nb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).SET){b.usersToInvite=new Set();e=a.readSetBegin();for(var g=0;g<e.size;g++){var i=a.readString();b.usersToInvite.add(i)}}else a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).LIST){b.appMessages=[];i=a.readListBegin();for(g=0;g<i.size;g++){e=d("DataMessageSerializers").deserializeDataMessage(a);b.appMessages.push(e)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.usersToInvite===void 0&&(b.usersToInvite=new Set());return b}function Ob(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.smcTier=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.region=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).BOOL?b.isUsfu=a.readBool():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).BOOL?b.isEdge=a.readBool():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.smcTier===void 0&&(b.smcTier="");b.region===void 0&&(b.region="");b.isUsfu===void 0&&(b.isUsfu=!1);b.isEdge===void 0&&(b.isEdge=!1);return b}function Pb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRUCT?b.offer=Z(a):a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).SET){b.deviceCapabilities=new Set();e=a.readSetBegin();for(var g=0;g<e.size;g++){var j=d("MultiwayCommonTypes").Capability.cast(a.readI32());b.deviceCapabilities.add(j)}}else a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).SET){b.usersToCall=new Set();j=a.readSetBegin();for(g=0;g<j.size;g++){e=a.readString();b.usersToCall.add(e)}}else a.skip(f);break;case 4:if(f===(h||(h=c("ThriftTypes"))).MAP){b.mediaStatus={};e=a.readMapBegin();for(g=0;g<e.size;g++){j=a.readString();var k=a.readBool();b.mediaStatus[j]=k}}else a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRING?b.userCapabilities=a.readBinary():a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).STRING?b.supportedExperiments=a.readString():a.skip(f);break;case 9:if(f===(h||(h=c("ThriftTypes"))).LIST){b.appMessages=[];j=a.readListBegin();for(k=0;k<j.size;k++){g=d("DataMessageSerializers").deserializeDataMessage(a);b.appMessages.push(g)}}else a.skip(f);break;case 10:f===(h||(h=c("ThriftTypes"))).STRING?b.userToEscalate=a.readString():a.skip(f);break;case 11:f===(h||(h=c("ThriftTypes"))).I64?b.escalatingCallId=a.readI64().toString():a.skip(f);break;case 12:f===(h||(h=c("ThriftTypes"))).I32?b.conferenceType=d("MultiwaySharedTypes").ConferenceType.cast(a.readI32()):a.skip(f);break;case 13:f===(h||(h=c("ThriftTypes"))).STRUCT?b.mediaStatusEx=d("MultiwaySharedSerializers").deserializeClientMediaStatus(a):a.skip(f);break;case 14:f===(h||(h=c("ThriftTypes"))).STRUCT?b.answer=Z(a):a.skip(f);break;case 15:f===(h||(h=c("ThriftTypes"))).STRUCT?b.syncPayload=$(a):a.skip(f);break;case 16:if(f===(h||(h=c("ThriftTypes"))).SET){b.usersToApproveFromWaitingRoom=new Set();e=a.readSetBegin();for(g=0;g<e.size;g++){k=a.readString();b.usersToApproveFromWaitingRoom.add(k)}}else a.skip(f);break;case 17:f===(h||(h=c("ThriftTypes"))).STRUCT?b.e2eeEnforcement=d("MultiwaySharedSerializers").deserializeE2eeEnforcement(a):a.skip(f);break;case 18:f===(h||(h=c("ThriftTypes"))).STRUCT?b.sfuAllocation=Ob(a):a.skip(f);break;case 19:f===(h||(h=c("ThriftTypes"))).I32?b.clientMediaMode=d("MultiwaySharedTypes").MediaPath.cast(a.readI32()):a.skip(f);break;case 20:f===(h||(h=c("ThriftTypes"))).STRUCT?b.endpointSettings=Db(a):a.skip(f);break;case 21:f===(h||(h=c("ThriftTypes"))).STRUCT?b.backupSfuAllocation=Ob(a):a.skip(f);break;case 22:if(f===(h||(h=c("ThriftTypes"))).SET){b.supportedCustomVideoContentTypes=new Set();j=a.readSetBegin();for(k=0;k<j.size;k++){g=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(a.readI32());b.supportedCustomVideoContentTypes.add(g)}}else a.skip(f);break;case 23:f===(h||(h=c("ThriftTypes"))).I32?b.configIntegrityOpaqueToken=a.readI32():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.offer===void 0&&(b.offer=i());b.deviceCapabilities===void 0&&(b.deviceCapabilities=new Set());return b}function Qb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRUCT?b.answer=Z(a):a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).MAP){b.mediaStatus={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var j=a.readString(),k=a.readBool();b.mediaStatus[j]=k}}else a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRING?b.initiator=a.readString():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.negotiatedExperiments=a.readString():a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).STRUCT?b.mediaStatusEx=d("MultiwaySharedSerializers").deserializeClientMediaStatus(a):a.skip(f);break;case 7:if(f===(h||(h=c("ThriftTypes"))).LIST){b.appMessages=[];j=a.readListBegin();for(k=0;k<j.size;k++){g=d("DataMessageSerializers").deserializeDataMessage(a);b.appMessages.push(g)}}else a.skip(f);break;case 8:if(f===(h||(h=c("ThriftTypes"))).MAP){b.stateStore={};e=a.readMapBegin();for(g=0;g<e.size;g++){k=a.readString();j=d("StateSyncSerializers").deserializeState(a);b.stateStore[k]=j}}else a.skip(f);break;case 9:f===(h||(h=c("ThriftTypes"))).STRING?b.sdpOriginLocalId=a.readString():a.skip(f);break;case 10:f===(h||(h=c("ThriftTypes"))).BOOL?b.isPendingApproval=a.readBool():a.skip(f);break;case 11:f===(h||(h=c("ThriftTypes"))).STRUCT?b.renegotiationOffer=Z(a):a.skip(f);break;case 12:f===(h||(h=c("ThriftTypes"))).BOOL?b.multipleVideoStreamsAllowed=a.readBool():a.skip(f);break;case 13:f===(h||(h=c("ThriftTypes"))).I32?b.mediaPath=d("MultiwaySharedTypes").MediaPath.cast(a.readI32()):a.skip(f);break;case 14:if(f===(h||(h=c("ThriftTypes"))).LIST){b.groupsOfUsers=[];k=a.readListBegin();for(j=0;j<k.size;j++){g=lc(a);b.groupsOfUsers.push(g)}}else a.skip(f);break;case 15:f===(h||(h=c("ThriftTypes"))).BOOL?b.screenShareStreamAllowed=a.readBool():a.skip(f);break;case 16:f===(h||(h=c("ThriftTypes"))).STRUCT?b.relayInfo=d("MultiwaySharedSerializers").deserializeRelayInfo(a):a.skip(f);break;case 17:f===(h||(h=c("ThriftTypes"))).I64?b.selfSctpNodeId=a.readI64().toString():a.skip(f);break;case 18:if(f===(h||(h=c("ThriftTypes"))).MAP){b.stateStoreV2={};e=a.readMapBegin();for(g=0;g<e.size;g++){j=d("StateSyncTopicsConfigTypes").TopicId.cast(a.readI32());k=d("StateSyncSerializers").deserializeState(a);j!=null&&(b.stateStoreV2[j]=k)}}else a.skip(f);break;case 19:if(f===(h||(h=c("ThriftTypes"))).SET){b.allowedCustomVideoContentTypes=new Set();j=a.readSetBegin();for(k=0;k<j.size;k++){g=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(a.readI32());b.allowedCustomVideoContentTypes.add(g)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.answer===void 0&&(b.answer=i());b.mediaStatus===void 0&&(b.mediaStatus={});b.initiator===void 0&&(b.initiator="");b.isPendingApproval===void 0&&(b.isPendingApproval=!1);b.multipleVideoStreamsAllowed===void 0&&(b.multipleVideoStreamsAllowed=!1);b.mediaPath===void 0&&(b.mediaPath=d("MultiwaySharedTypes").MediaPath.cast(0));b.groupsOfUsers===void 0&&(b.groupsOfUsers=[]);b.screenShareStreamAllowed===void 0&&(b.screenShareStreamAllowed=!1);return b}function Rb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRUCT?b.sdp=Z(a):a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).SET){b.deviceCapabilities=new Set();e=a.readSetBegin();for(var g=0;g<e.size;g++){var i=d("MultiwayCommonTypes").Capability.cast(a.readI32());b.deviceCapabilities.add(i)}}else a.skip(f);break;case 5:if(f===(h||(h=c("ThriftTypes"))).SET){b.supportedCustomVideoContentTypes=new Set();i=a.readSetBegin();for(g=0;g<i.size;g++){e=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(a.readI32());b.supportedCustomVideoContentTypes.add(e)}}else a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).STRUCT?b.prOffer=Z(a):a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).STRUCT?b.e2eeEnforcement=d("MultiwaySharedSerializers").deserializeE2eeEnforcement(a):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.deviceCapabilities===void 0&&(b.deviceCapabilities=new Set());return b}function Sb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRUCT?b.sdp=Z(a):a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.sdpOriginLocalId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function Tb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.type=d("MultiwayCommonTypes").ClientEventType.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I64?b.time=a.readI64().toString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.type===void 0&&(b.type=d("MultiwayCommonTypes").ClientEventType.cast(0));return b}function Ub(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).LIST){b.clientEvents=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=Tb(a);b.clientEvents.push(g)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.clientEvents===void 0&&(b.clientEvents=[]);return b}function Vb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.groupThreadId=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.peerId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function Wb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function Xb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.caller=a.readString():a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).SET){b.otherParticipants=new Set();e=a.readSetBegin();for(var g=0;g<e.size;g++){var i=a.readString();b.otherParticipants.add(i)}}else a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).I32?b.ringType=d("MultiwayCommonTypes").RingType.cast(a.readI32()):a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRING?b.offeredExperiments=a.readString():a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).BOOL?b.isScheduledCall=a.readBool():a.skip(f);break;case 8:if(f===(h||(h=c("ThriftTypes"))).LIST){b.appMessages=[];i=a.readListBegin();for(g=0;g<i.size;g++){e=d("DataMessageSerializers").deserializeDataMessage(a);b.appMessages.push(e)}}else a.skip(f);break;case 10:f===(h||(h=c("ThriftTypes"))).STRUCT?b.offer=Z(a):a.skip(f);break;case 11:f===(h||(h=c("ThriftTypes"))).STRUCT?b.mediaStatusEx=d("MultiwaySharedSerializers").deserializeClientMediaStatus(a):a.skip(f);break;case 12:f===(h||(h=c("ThriftTypes"))).BOOL?b.isPreconnectSupported=a.readBool():a.skip(f);break;case 13:f===(h||(h=c("ThriftTypes"))).STRING?b.sdpOriginLocalId=a.readString():a.skip(f);break;case 14:f===(h||(h=c("ThriftTypes"))).STRUCT?b.unifiedOffer=Z(a):a.skip(f);break;case 15:f===(h||(h=c("ThriftTypes"))).I32?b.mediaPath=d("MultiwaySharedTypes").MediaPath.cast(a.readI32()):a.skip(f);break;case 16:f===(h||(h=c("ThriftTypes"))).STRUCT?b.e2eeEnforcement=d("MultiwaySharedSerializers").deserializeE2eeEnforcement(a):a.skip(f);break;case 17:f===(h||(h=c("ThriftTypes"))).BOOL?b.isLegacyCall=a.readBool():a.skip(f);break;case 18:f===(h||(h=c("ThriftTypes"))).BOOL?b.isTransferCall=a.readBool():a.skip(f);break;case 20:f===(h||(h=c("ThriftTypes"))).STRUCT?b.relayInfo=d("MultiwaySharedSerializers").deserializeRelayInfo(a):a.skip(f);break;case 21:if(f===(h||(h=c("ThriftTypes"))).MAP){b.overlayConfigs={};e=a.readMapBegin();for(g=0;g<e.size;g++){i=a.readI32();var j=a.readI32();b.overlayConfigs[i]=j}}else a.skip(f);break;case 22:f===(h||(h=c("ThriftTypes"))).STRUCT?b.productMetadata=Hb(a):a.skip(f);break;case 23:f===(h||(h=c("ThriftTypes"))).STRING?b.callerClientSessionId=a.readString():a.skip(f);break;case 24:f===(h||(h=c("ThriftTypes"))).STRUCT?b.threadIdInfo=Vb(a):a.skip(f);break;case 25:f===(h||(h=c("ThriftTypes"))).STRING?b.linkUrl=a.readString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.caller===void 0&&(b.caller="");b.otherParticipants===void 0&&(b.otherParticipants=new Set());b.ringType===void 0&&(b.ringType=d("MultiwayCommonTypes").RingType.cast(0));b.mediaPath===void 0&&(b.mediaPath=d("MultiwaySharedTypes").MediaPath.cast(0));b.isTransferCall===void 0&&(b.isTransferCall=!1);return b}function Yb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 2:f===(h||(h=c("ThriftTypes"))).I32?b.deviceStatus=d("MultiwayCommonTypes").DeviceStatus.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.deviceStatus===void 0&&(b.deviceStatus=d("MultiwayCommonTypes").DeviceStatus.cast(0));return b}function Zb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).SET){b.usersToRemove=new Set();d=a.readSetBegin();for(var f=0;f<d.size;f++){var g=a.readString();b.usersToRemove.add(g)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.usersToRemove===void 0&&(b.usersToRemove=new Set());return b}function $b(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.topic=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.version=a.readI32():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.topicId=d("StateSyncTopicsConfigTypes").TopicId.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.topic===void 0&&(b.topic="");b.version===void 0&&(b.version=0);b.topicId===void 0&&(b.topicId=d("StateSyncTopicsConfigTypes").TopicId.cast(0));return b}function ac(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.topic=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I32?b.version=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.topic===void 0&&(b.topic="");b.version===void 0&&(b.version=0);return b}function bc(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRUCT?b.syncPayload=$(a):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.topic=a.readString():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.version=a.readI32():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.data=a.readBinary():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).I32?b.topicId=d("StateSyncTopicsConfigTypes").TopicId.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.syncPayload===void 0&&(b.syncPayload=l());b.topic===void 0&&(b.topic="");b.version===void 0&&(b.version=0);b.topicId===void 0&&(b.topicId=d("StateSyncTopicsConfigTypes").TopicId.cast(0));return b}function cc(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.topic=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).I32?b.version=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.topic===void 0&&(b.topic="");b.version===void 0&&(b.version=0);return b}function dc(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.topic=a.readString():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.version=a.readI32():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.data=a.readBinary():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRUCT?b.syncPayload=$(a):a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).I32?b.topicId=d("StateSyncTopicsConfigTypes").TopicId.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.topic===void 0&&(b.topic="");b.version===void 0&&(b.version=0);b.data===void 0&&(b.data=Uint8Array.of());return b}function ec(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.topic=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).I32?b.version=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.topic===void 0&&(b.topic="");b.version===void 0&&(b.version=0);return b}function fc(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 2:f===(h||(h=c("ThriftTypes"))).I32?b.approvalStatus=d("MultiwayCommonTypes").ApprovalStatus.cast(a.readI32()):a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).SET){b.targetUsers=new Set();e=a.readSetBegin();for(var g=0;g<e.size;g++){var i=a.readString();b.targetUsers.add(i)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.approvalStatus===void 0&&(b.approvalStatus=d("MultiwayCommonTypes").ApprovalStatus.cast(0));b.targetUsers===void 0&&(b.targetUsers=new Set());return b}function gc(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.id=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.id===void 0&&(b.id="");return b}function hc(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.actorId=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.baseId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.actorId===void 0&&(b.actorId="");b.baseId===void 0&&(b.baseId="");return b}function ic(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.type=d("MultiwayCommonTypes").MessageType.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.conferenceName=a.readString():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRING?b.transactionId=a.readString():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).I16?b.retryCount=a.readI16():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRING?b.serverInfoData=a.readString():a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).I32?b.responseStatusCode=d("MultiwayCommonTypes").RtcResponseStatusCode.cast(a.readI32()):a.skip(f);break;case 7:if(f===(h||(h=c("ThriftTypes"))).MAP){b.extensions={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readString(),j=a.readString();b.extensions[i]=j}}else a.skip(f);break;case 8:f===(h||(h=c("ThriftTypes"))).I64?b.sequenceNumber=a.readI64().toString():a.skip(f);break;case 9:f===(h||(h=c("ThriftTypes"))).STRING?b.clientSessionId=a.readString():a.skip(f);break;case 10:f===(h||(h=c("ThriftTypes"))).STRING?b.responseStatusMessage=a.readString():a.skip(f);break;case 11:f===(h||(h=c("ThriftTypes"))).I32?b.responseSubCode=d("MultiwayCommonTypes").RtcResponseSubCode.cast(a.readI32()):a.skip(f);break;case 12:f===(h||(h=c("ThriftTypes"))).STRING?b.collisionKey=a.readString():a.skip(f);break;case 13:f===(h||(h=c("ThriftTypes"))).I32?b.conferenceType=d("MultiwaySharedTypes").ConferenceType.cast(a.readI32()):a.skip(f);break;case 14:f===(h||(h=c("ThriftTypes"))).STRING?b.serverSessionId=a.readString():a.skip(f);break;case 15:f===(h||(h=c("ThriftTypes"))).STRING?b.rtcHandle=a.readString():a.skip(f);break;case 16:f===(h||(h=c("ThriftTypes"))).I32?b.retryAfterMsec=a.readI32():a.skip(f);break;case 17:f===(h||(h=c("ThriftTypes"))).STRING?b.receiverUserId=a.readString():a.skip(f);break;case 18:f===(h||(h=c("ThriftTypes"))).I32?b.clientStack=d("WebrtcSignalingCommonTypes").ClientStack.cast(a.readI32()):a.skip(f);break;case 19:f===(h||(h=c("ThriftTypes"))).I64?b.serverMsgTime=a.readI64().toString():a.skip(f);break;case 20:f===(h||(h=c("ThriftTypes"))).STRUCT?b.sender=gc(a):a.skip(f);break;case 21:f===(h||(h=c("ThriftTypes"))).STRUCT?b.receiver=hc(a):a.skip(f);break;case 22:if(f===(h||(h=c("ThriftTypes"))).SET){b.messageTags=new Set();i=a.readSetBegin();for(j=0;j<i.size;j++){g=d("MultiwayCommonTypes").MessageTag.cast(a.readI32());b.messageTags.add(g)}}else a.skip(f);break;case 23:f===(h||(h=c("ThriftTypes"))).I64?b.conferenceId=a.readI64().toString():a.skip(f);break;case 24:f===(h||(h=c("ThriftTypes"))).I32?b.protocolVersion=a.readI32():a.skip(f);break;case 25:f===(h||(h=c("ThriftTypes"))).I64?b.bodyCompressionVersion=a.readI64().toString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.type===void 0&&(b.type=d("MultiwayCommonTypes").MessageType.cast(0));b.conferenceName===void 0&&(b.conferenceName="");b.transactionId===void 0&&(b.transactionId="");b.retryCount===void 0&&(b.retryCount=0);return b}function jc(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRUCT?b.joinRequest=Pb(a):a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRUCT?b.joinResponse=Qb(a):a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRUCT?b.serverMediaUpdateRequest=xb(a):a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRUCT?b.serverMediaUpdateResponse=yb(a):a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).STRUCT?b.hangupRequest=Ab(a):a.skip(e);break;case 6:e===(h||(h=c("ThriftTypes"))).STRUCT?b.iceCandidateRequest=Bb(a):a.skip(e);break;case 8:e===(h||(h=c("ThriftTypes"))).STRUCT?b.ringRequest=Xb(a):a.skip(e);break;case 9:e===(h||(h=c("ThriftTypes"))).STRUCT?b.ringResponse=Yb(a):a.skip(e);break;case 10:e===(h||(h=c("ThriftTypes"))).STRUCT?b.dismissRequest=Cb(a):a.skip(e);break;case 11:e===(h||(h=c("ThriftTypes"))).STRUCT?b.conferenceStateRequest=Ib(a):a.skip(e);break;case 12:e===(h||(h=c("ThriftTypes"))).STRUCT?b.conferenceStateResponse=Jb(a):a.skip(e);break;case 13:e===(h||(h=c("ThriftTypes"))).STRUCT?b.addParticipantsRequest=Nb(a):a.skip(e);break;case 14:e===(h||(h=c("ThriftTypes"))).STRUCT?b.subscriptionRequest=Kb(a):a.skip(e);break;case 15:e===(h||(h=c("ThriftTypes"))).STRUCT?b.clientMediaUpdateRequest=ub(a):a.skip(e);break;case 16:e===(h||(h=c("ThriftTypes"))).STRUCT?b.clientMediaUpdateResponse=vb(a):a.skip(e);break;case 17:e===(h||(h=c("ThriftTypes"))).STRUCT?b.dataMessageRequest=Lb(a):a.skip(e);break;case 18:e===(h||(h=c("ThriftTypes"))).STRUCT?b.removeParticipantsRequest=Zb(a):a.skip(e);break;case 19:e===(h||(h=c("ThriftTypes"))).STRUCT?b.dataMessageResponse=Mb(a):a.skip(e);break;case 30:e===(h||(h=c("ThriftTypes"))).STRUCT?b.updateRequest=bc(a):a.skip(e);break;case 31:e===(h||(h=c("ThriftTypes"))).STRUCT?b.updateResponse=cc(a):a.skip(e);break;case 32:e===(h||(h=c("ThriftTypes"))).STRUCT?b.notifyRequest=dc(a):a.skip(e);break;case 33:e===(h||(h=c("ThriftTypes"))).STRUCT?b.notifyResponse=ec(a):a.skip(e);break;case 34:e===(h||(h=c("ThriftTypes"))).STRUCT?b.connectRequest=Rb(a):a.skip(e);break;case 35:e===(h||(h=c("ThriftTypes"))).STRUCT?b.connectResponse=Sb(a):a.skip(e);break;case 36:e===(h||(h=c("ThriftTypes"))).STRUCT?b.clientEventRequest=Ub(a):a.skip(e);break;case 37:e===(h||(h=c("ThriftTypes"))).STRUCT?b.clientEventResponse=Wb(a):a.skip(e);break;case 40:e===(h||(h=c("ThriftTypes"))).STRUCT?b.unsubscribeRequest=$b(a):a.skip(e);break;case 41:e===(h||(h=c("ThriftTypes"))).STRUCT?b.unsubscribeResponse=ac(a):a.skip(e);break;case 42:e===(h||(h=c("ThriftTypes"))).STRUCT?b.approvalRequest=fc(a):a.skip(e);break;case 43:e===(h||(h=c("ThriftTypes"))).STRUCT?b.transferRequest=zb(a):a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function kc(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRUCT?b.messageHeader=ic(a):a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRUCT?b.messageBody=jc(a):a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.messageHeader===void 0&&(b.messageHeader=m());b.messageBody===void 0&&(b.messageBody=n());return b}function lc(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).SET){b.users=new Set();d=a.readSetBegin();for(var f=0;f<d.size;f++){var g=a.readString();b.users.add(g)}}else a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).BOOL?b.allowMultipleJoins=a.readBool():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).BOOL?b.dismissOthersOnFirstJoin=a.readBool():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.aliasId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.users===void 0&&(b.users=new Set());b.allowMultipleJoins===void 0&&(b.allowMultipleJoins=!1);b.dismissOthersOnFirstJoin===void 0&&(b.dismissOthersOnFirstJoin=!1);b.aliasId===void 0&&(b.aliasId="");return b}function mc(a){var b,d={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.joinRequest=Pb(a),b="joinRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: joinRequest, previous deserialized field: "+b);else a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.joinResponse=Qb(a),b="joinResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: joinResponse, previous deserialized field: "+b);else a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.serverMediaUpdateRequest=xb(a),b="serverMediaUpdateRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: serverMediaUpdateRequest, previous deserialized field: "+b);else a.skip(f);break;case 4:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.serverMediaUpdateResponse=yb(a),b="serverMediaUpdateResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: serverMediaUpdateResponse, previous deserialized field: "+b);else a.skip(f);break;case 5:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.hangupRequest=Ab(a),b="hangupRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: hangupRequest, previous deserialized field: "+b);else a.skip(f);break;case 6:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.iceCandidateRequest=Bb(a),b="iceCandidateRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: iceCandidateRequest, previous deserialized field: "+b);else a.skip(f);break;case 8:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.ringRequest=Xb(a),b="ringRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: ringRequest, previous deserialized field: "+b);else a.skip(f);break;case 9:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.ringResponse=Yb(a),b="ringResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: ringResponse, previous deserialized field: "+b);else a.skip(f);break;case 10:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.dismissRequest=Cb(a),b="dismissRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: dismissRequest, previous deserialized field: "+b);else a.skip(f);break;case 11:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.conferenceStateRequest=Ib(a),b="conferenceStateRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: conferenceStateRequest, previous deserialized field: "+b);else a.skip(f);break;case 12:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.conferenceStateResponse=Jb(a),b="conferenceStateResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: conferenceStateResponse, previous deserialized field: "+b);else a.skip(f);break;case 13:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.addParticipantsRequest=Nb(a),b="addParticipantsRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: addParticipantsRequest, previous deserialized field: "+b);else a.skip(f);break;case 14:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.subscriptionRequest=Kb(a),b="subscriptionRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: subscriptionRequest, previous deserialized field: "+b);else a.skip(f);break;case 15:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.clientMediaUpdateRequest=ub(a),b="clientMediaUpdateRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: clientMediaUpdateRequest, previous deserialized field: "+b);else a.skip(f);break;case 16:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.clientMediaUpdateResponse=vb(a),b="clientMediaUpdateResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: clientMediaUpdateResponse, previous deserialized field: "+b);else a.skip(f);break;case 17:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.dataMessageRequest=Lb(a),b="dataMessageRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: dataMessageRequest, previous deserialized field: "+b);else a.skip(f);break;case 18:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.removeParticipantsRequest=Zb(a),b="removeParticipantsRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: removeParticipantsRequest, previous deserialized field: "+b);else a.skip(f);break;case 19:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.dataMessageResponse=Mb(a),b="dataMessageResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: dataMessageResponse, previous deserialized field: "+b);else a.skip(f);break;case 30:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.updateRequest=bc(a),b="updateRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: updateRequest, previous deserialized field: "+b);else a.skip(f);break;case 31:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.updateResponse=cc(a),b="updateResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: updateResponse, previous deserialized field: "+b);else a.skip(f);break;case 32:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.notifyRequest=dc(a),b="notifyRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: notifyRequest, previous deserialized field: "+b);else a.skip(f);break;case 33:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.notifyResponse=ec(a),b="notifyResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: notifyResponse, previous deserialized field: "+b);else a.skip(f);break;case 34:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.connectRequest=Rb(a),b="connectRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: connectRequest, previous deserialized field: "+b);else a.skip(f);break;case 35:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.connectResponse=Sb(a),b="connectResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: connectResponse, previous deserialized field: "+b);else a.skip(f);break;case 36:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.clientEventRequest=Ub(a),b="clientEventRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: clientEventRequest, previous deserialized field: "+b);else a.skip(f);break;case 37:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.clientEventResponse=Wb(a),b="clientEventResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: clientEventResponse, previous deserialized field: "+b);else a.skip(f);break;case 40:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.unsubscribeRequest=$b(a),b="unsubscribeRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: unsubscribeRequest, previous deserialized field: "+b);else a.skip(f);break;case 41:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.unsubscribeResponse=ac(a),b="unsubscribeResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: unsubscribeResponse, previous deserialized field: "+b);else a.skip(f);break;case 42:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.approvalRequest=fc(a),b="approvalRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: approvalRequest, previous deserialized field: "+b);else a.skip(f);break;case 43:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.transferRequest=zb(a),b="transferRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: transferRequest, previous deserialized field: "+b);else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return d}g.RtcException$DefaultConstructor=a;g.SessionDescription$DefaultConstructor=i;g.SessionDescriptionUpdate$DefaultConstructor=b;g.MediaDescriptionUpdate$DefaultConstructor=e;g.ServerMediaUpdate$DefaultConstructor=f;g.ClientMediaUpdate$DefaultConstructor=j;g.IceCandidate$DefaultConstructor=k;g.SyncPayload$DefaultConstructor=l;g.SyncAck$DefaultConstructor=aa;g.E2eeData$DefaultConstructor=ba;g.ClientMediaUpdateRequest$DefaultConstructor=ca;g.ClientMediaUpdateResponse$DefaultConstructor=da;g.MultipleRelaysAllocationParameters$DefaultConstructor=ea;g.ServerMediaUpdateRequest$DefaultConstructor=fa;g.ServerMediaUpdateResponse$DefaultConstructor=ga;g.TransferRequest$DefaultConstructor=ha;g.HangupRequest$DefaultConstructor=ia;g.IceCandidateRequest$DefaultConstructor=ja;g.DismissRequest$DefaultConstructor=ka;g.EndpointSettings$DefaultConstructor=la;g.ParticipantState$DefaultConstructor=ma;g.ServerOnlyParticipantState$DefaultConstructor=na;g.UserProfile$DefaultConstructor=oa;g.ProductMetadata$DefaultConstructor=pa;g.ConferenceStateRequest$DefaultConstructor=qa;g.ConferenceStateResponse$DefaultConstructor=ra;g.SubscriptionRequest$DefaultConstructor=sa;g.DataMessageRequest$DefaultConstructor=ta;g.DataMessageResponse$DefaultConstructor=ua;g.AddParticipantsRequest$DefaultConstructor=va;g.SfuAllocation$DefaultConstructor=wa;g.JoinRequest$DefaultConstructor=xa;g.JoinResponse$DefaultConstructor=ya;g.ConnectRequest$DefaultConstructor=za;g.ConnectResponse$DefaultConstructor=Aa;g.ClientEvent$DefaultConstructor=Ba;g.ClientEventRequest$DefaultConstructor=Ca;g.ThreadIdInfo$DefaultConstructor=Da;g.ClientEventResponse$DefaultConstructor=Ea;g.RingRequest$DefaultConstructor=Fa;g.RingResponse$DefaultConstructor=Ga;g.RemoveParticipantsRequest$DefaultConstructor=Ha;g.UnsubscribeRequest$DefaultConstructor=Ia;g.UnsubscribeResponse$DefaultConstructor=Ja;g.UpdateRequest$DefaultConstructor=Ka;g.UpdateResponse$DefaultConstructor=La;g.NotifyRequest$DefaultConstructor=Ma;g.NotifyResponse$DefaultConstructor=Na;g.ApprovalRequest$DefaultConstructor=Oa;g.RtcSender$DefaultConstructor=Pa;g.RtcReceiver$DefaultConstructor=Qa;g.RtcMessageHeader$DefaultConstructor=m;g.RtcMessageBody$DefaultConstructor=n;g.RtcMultiwayMessage$DefaultConstructor=Ra;g.GroupOfUsers$DefaultConstructor=Sa;g.RtcMessageBodyVariant$DefaultConstructor=Ta;g.serializeRtcException=Ua;g.serializeSessionDescription=o;g.serializeSessionDescriptionUpdate=Va;g.serializeMediaDescriptionUpdate=p;g.serializeServerMediaUpdate=q;g.serializeClientMediaUpdate=r;g.serializeIceCandidate=s;g.serializeSyncPayload=t;g.serializeSyncAck=Wa;g.serializeE2eeData=Xa;g.serializeClientMediaUpdateRequest=u;g.serializeClientMediaUpdateResponse=v;g.serializeMultipleRelaysAllocationParameters=Ya;g.serializeServerMediaUpdateRequest=w;g.serializeServerMediaUpdateResponse=x;g.serializeTransferRequest=y;g.serializeHangupRequest=z;g.serializeIceCandidateRequest=A;g.serializeDismissRequest=B;g.serializeEndpointSettings=Za;g.serializeParticipantState=C;g.serializeServerOnlyParticipantState=$a;g.serializeUserProfile=D;g.serializeProductMetadata=ab;g.serializeConferenceStateRequest=E;g.serializeConferenceStateResponse=F;g.serializeSubscriptionRequest=G;g.serializeDataMessageRequest=H;g.serializeDataMessageResponse=I;g.serializeAddParticipantsRequest=J;g.serializeSfuAllocation=K;g.serializeJoinRequest=L;g.serializeJoinResponse=M;g.serializeConnectRequest=N;g.serializeConnectResponse=O;g.serializeClientEvent=P;g.serializeClientEventRequest=Q;g.serializeThreadIdInfo=bb;g.serializeClientEventResponse=R;g.serializeRingRequest=S;g.serializeRingResponse=T;g.serializeRemoveParticipantsRequest=U;g.serializeUnsubscribeRequest=V;g.serializeUnsubscribeResponse=W;g.serializeUpdateRequest=X;g.serializeUpdateResponse=cb;g.serializeNotifyRequest=db;g.serializeNotifyResponse=eb;g.serializeApprovalRequest=fb;g.serializeRtcSender=gb;g.serializeRtcReceiver=hb;g.serializeRtcMessageHeader=ib;g.serializeRtcMessageBody=jb;g.serializeRtcMultiwayMessage=kb;g.serializeGroupOfUsers=Y;g.serializeRtcMessageBodyVariant=lb;g.deserializeRtcException=mb;g.deserializeSessionDescription=Z;g.deserializeSessionDescriptionUpdate=nb;g.deserializeMediaDescriptionUpdate=ob;g.deserializeServerMediaUpdate=pb;g.deserializeClientMediaUpdate=qb;g.deserializeIceCandidate=rb;g.deserializeSyncPayload=$;g.deserializeSyncAck=sb;g.deserializeE2eeData=tb;g.deserializeClientMediaUpdateRequest=ub;g.deserializeClientMediaUpdateResponse=vb;g.deserializeMultipleRelaysAllocationParameters=wb;g.deserializeServerMediaUpdateRequest=xb;g.deserializeServerMediaUpdateResponse=yb;g.deserializeTransferRequest=zb;g.deserializeHangupRequest=Ab;g.deserializeIceCandidateRequest=Bb;g.deserializeDismissRequest=Cb;g.deserializeEndpointSettings=Db;g.deserializeParticipantState=Eb;g.deserializeServerOnlyParticipantState=Fb;g.deserializeUserProfile=Gb;g.deserializeProductMetadata=Hb;g.deserializeConferenceStateRequest=Ib;g.deserializeConferenceStateResponse=Jb;g.deserializeSubscriptionRequest=Kb;g.deserializeDataMessageRequest=Lb;g.deserializeDataMessageResponse=Mb;g.deserializeAddParticipantsRequest=Nb;g.deserializeSfuAllocation=Ob;g.deserializeJoinRequest=Pb;g.deserializeJoinResponse=Qb;g.deserializeConnectRequest=Rb;g.deserializeConnectResponse=Sb;g.deserializeClientEvent=Tb;g.deserializeClientEventRequest=Ub;g.deserializeThreadIdInfo=Vb;g.deserializeClientEventResponse=Wb;g.deserializeRingRequest=Xb;g.deserializeRingResponse=Yb;g.deserializeRemoveParticipantsRequest=Zb;g.deserializeUnsubscribeRequest=$b;g.deserializeUnsubscribeResponse=ac;g.deserializeUpdateRequest=bc;g.deserializeUpdateResponse=cc;g.deserializeNotifyRequest=dc;g.deserializeNotifyResponse=ec;g.deserializeApprovalRequest=fc;g.deserializeRtcSender=gc;g.deserializeRtcReceiver=hc;g.deserializeRtcMessageHeader=ic;g.deserializeRtcMessageBody=jc;g.deserializeRtcMultiwayMessage=kc;g.deserializeGroupOfUsers=lc;g.deserializeRtcMessageBodyVariant=mc}),98);
__d("ZenonMWThriftMessageSerializer",["CompactSerializer","MqttThriftHeaderSerializers","MultiwayCommonSerializers","TCompactProtocol","TReadBuffer"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b===void 0&&(b=!1);var c=d("CompactSerializer").serialize(a.messageHeader,d("MultiwayCommonSerializers").serializeRtcMessageHeader);a=d("CompactSerializer").serialize(a.messageBody,d("MultiwayCommonSerializers").serializeRtcMessageBody);if(b){b=new Uint8Array(c.length+a.length);b.set(c);b.set(a,c.length);return b}b={};b=d("CompactSerializer").serialize(b,d("MqttThriftHeaderSerializers").serializeMqttThriftHeader);var e=new Uint8Array(b.length+c.length+a.length);e.set(b);e.set(c,b.length);e.set(a,b.length+c.length);return e}function b(a,b){b===void 0&&(b=!1);a=new(c("TReadBuffer"))(a);a=new(c("TCompactProtocol"))(a);b||d("MqttThriftHeaderSerializers").deserializeMqttThriftHeader(a);b=d("MultiwayCommonSerializers").deserializeRtcMessageHeader(a);a=d("MultiwayCommonSerializers").deserializeRtcMessageBody(a);return{messageBody:a,messageHeader:b}}g.serializeMWThriftMessage=a;g.deserializeMWThriftMessage=b}),98);
__d("ZenonMWThriftAddParticipantsTranslator",["MultiwayCommonTypes","RequestStreamBodyUtils","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";var h="new_room_context";function a(a,b){var c={usersToInvite:new Set(b.participants)};if(b.groupThreadId!=null){b={calling_tags:2,group_thread_id:b.groupThreadId};if(b){b=[{body:{genericMessage:{data:d("RequestStreamBodyUtils").stringToUint8Array(JSON.stringify(b)),topic:h}},header:{topic_DEPRECATED:h}}];c.appMessages=b}}return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{addParticipantsRequest:c},type:d("MultiwayCommonTypes").MessageType.ADD_PARTICIPANTS})}g.NEW_ROOM_CONTEXT=h;g.toThriftAddParticipantsRequest=a}),98);
__d("ZenonMWThriftApprovalTranslator",["MultiwayCommonTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var c=b.approvalStatus;b=b.targetUsers;c={approvalStatus:c===0?d("MultiwayCommonTypes").ApprovalStatus.DENIED:d("MultiwayCommonTypes").ApprovalStatus.APPROVED,targetUsers:new Set(b)};return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{approvalRequest:c},type:d("MultiwayCommonTypes").MessageType.APPROVAL})}g.toThriftApprovalRequest=a}),98);
__d("ZenonMWThriftClientEventTranslator",["MultiwayCommonTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b={clientEvents:[{type:b.clientEventType===0?d("MultiwayCommonTypes").ClientEventType.UNKNOWN:d("MultiwayCommonTypes").ClientEventType.MEDIA_CONNECTED}]};return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{clientEventRequest:b},type:d("MultiwayCommonTypes").MessageType.CLIENT_EVENT})}g.toThriftClientEventRequest=a}),98);
__d("ZenonMWCommonUtils",["unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=a.split("\n");if(a.length<2)throw c("unrecoverableViolation")("Expected SDP string with two or more lines, but got "+a.length,"rtc_www");a=a[1].trim();a=a.split(" ");if(a.length<3)throw c("unrecoverableViolation")("Session line should have at least 3 tokens, but got "+a.length,"rtc_www");a=parseInt(a[2],10);if(isNaN(a))throw c("unrecoverableViolation")("SDP version could not be parsed as number.","rtc_www");return a}function b(a){return a.includes("BUNDLE 0")}g.getSdpVersion=a;g.isUnifiedPlan=b}),98);
__d("ZenonMWThriftClientMediaUpdateTranslator",["MultiwayCommonTypes","ZenonMWCommonUtils","ZenonMWThriftResponseStatusCodeUtils","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[],c=a.messageBody;a=a.messageHeader;c=c.clientMediaUpdateResponse;var e=a.responseStatusCode,f=a.responseSubCode,g=a.retryAfterMsec;if(c){var h=c.answer,i=c.mediaStatus,j=h!=null&&i!=null;d("ZenonMWThriftTranslatorUtils").addThriftStateStoreSignalingEvents(c.stateStore,b,!1,j);var k=d("ZenonMWThriftTranslatorUtils").fetchE2eeServerState(c.stateStore);if(j){h=(j=h==null?void 0:h.sdpString)!=null?j:"";j=d("ZenonMWThriftTranslatorUtils").toZenonMediaStatesFromThrift(i);i={ackMessageId:a.transactionId,eventName:"localSdpResponse",hasAnswerInJoinResponse:!1,source:"clientMediaUpdate"};var l=c.renegotiationOffer,m=null;l!=null&&l.sdpString!=null&&(m={sdp:l.sdpString,type:"offer",version:d("ZenonMWCommonUtils").getSdpVersion(l.sdpString)});l={e2eeServerState:k,eventName:"remoteSdpRequest",mediaPath:d("ZenonMWThriftTranslatorUtils").fromThriftMediaPath(c.mediaPath),mediaStates:j,negotiateType:!1,renegotiationOffer:m,sdp:{sdp:h,type:"answer",version:d("ZenonMWCommonUtils").getSdpVersion(h)},sdpOriginLocalId:c.sdpOriginLocalId,source:"clientMediaUpdateResponse"};b.push(i);b.push(l)}k={ackMessageId:a.transactionId,acknowledgedVersion:Number(c.currentVersion),eventName:"mediaUpdateResponse",retryAfter:g!=null?g:0};e!=null&&(k.responseStatusCode=d("ZenonMWThriftResponseStatusCodeUtils").getResponseStatusCodeFromThrift(e));f!=null&&(k.responseSubCode=d("ZenonMWThriftResponseStatusCodeUtils").getResponseSubCodeFromThrift(f));b.push(k)}return b}function b(a,b,c){b={fromVersion:String(b.version),mediaUpdates:[{mediaStatus:d("ZenonMWThriftTranslatorUtils").toMWThriftMediaStatus(b),mediaStatusEx:d("ZenonMWThriftTranslatorUtils").toThriftMWMediaStatusEx(b)}],toVersion:String(b.version)};c!==void 0&&(b.offer={sdpString:c.sdp});return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{clientMediaUpdateRequest:b},type:d("MultiwayCommonTypes").MessageType.CLIENT_MEDIA_UPDATE})}g.fromThriftClientMediaUpdateResponse=a;g.toThriftClientMediaUpdateRequest=b}),98);
__d("ZenonMWThriftConferenceStateTranslator",["MultiwayCommonTypes","RequestStreamBodyUtils","ZenonMWMessageTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[],c=a.messageBody.conferenceStateRequest;if(c){var e=c.appMessages,f=c.participantStates,g={eventName:"participantUpdateRequest",participantStates:new Map(),sctpUserIdNodeIdMap:new Map(),versionId:+c.version},h={actorRepresentatives:new Map(),eventName:"clientInfoRequest",mediaPath:d("ZenonMWMessageTypes").ZenonMWMediaPath.UNKNOWN,userCapabilities:new Map()};Object.keys(f).forEach(function(a){var b=f[a],c=b.sctpNodeId,e=b.state;b=b.userCapabilities;g.participantStates.set(a,d("ZenonMWThriftTranslatorUtils").fromThriftParticipantState(e));c!=null&&g.sctpUserIdNodeIdMap.set(a,+c);h.userCapabilities.set(a,b?d("RequestStreamBodyUtils").uint8ArrayToString(b):"")});b.push(g);b.push(h);c=d("ZenonMWThriftTranslatorUtils").getCollisionContextFromThriftAppMessages(e);if(c){c.serverInfoData=a.messageHeader.serverInfoData;e={context:c,eventName:"roomContextUpdateRequest"};b.push(e)}}return b}function b(a,b){b={currentVersion:String(b.requestVersionId)};return d("ZenonMWThriftTranslatorUtils").createMWThriftResponse({header:a,rtcMessageBody:{conferenceStateResponse:b},type:d("MultiwayCommonTypes").MessageType.CONFERENCE_STATE})}g.fromThriftConferenceStateRequest=a;g.toThriftConferenceStateResponse=b}),98);
__d("ZenonMWThriftDataMessageTranslator",["MultiwayCommonTypes","RequestStreamBodyUtils","ZenonActorHooks","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[];a=a.messageBody.dataMessageRequest;if(a){var c=a.message.header,e=d("ZenonMWThriftTranslatorUtils").getGenericMWThriftDataMessageData(a);a=d("ZenonMWThriftTranslatorUtils").getGenericMWThriftDataMessageTopic(a);var f=h(c.serviceRecipients);if(e!=null&&a!=null){c={data:e,eventName:"genericDataMessageRequest",recipientIDs:Array.from((e=c.recipients)!=null?e:[]),serviceRecipients:f,topic:a};b.push(c)}}return b}function b(a,b){var c={data:d("RequestStreamBodyUtils").stringToUint8Array(b.data),topic:b.topic},e=new Set(b.serviceRecipients.map(d("ZenonMWThriftTranslatorUtils").toThriftServiceRecipient));return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{dataMessageRequest:{message:{body:{genericMessage:c},header:{recipients:new Set(b.recipientIDs),sender:d("ZenonActorHooks").ZenonActor.getID(),serviceRecipients:e,topic_DEPRECATED:""}}}},type:d("MultiwayCommonTypes").MessageType.DATA_MESSAGE})}function c(a){return d("ZenonMWThriftTranslatorUtils").createMWThriftResponse({header:a,rtcMessageBody:{dataMessageResponse:{deliveryResult:{}}},type:d("MultiwayCommonTypes").MessageType.DATA_MESSAGE})}function h(a){var b=[];a==null?void 0:a.forEach(function(a){return b.push(d("ZenonMWThriftTranslatorUtils").toServiceRecipientType(a))});return b}g.fromThriftDataMessageRequest=a;g.toThriftDataMessageRequest=b;g.toThriftDataMessageResponse=c}),98);
__d("ZenonMWThriftDismissTranslator",["MultiwayCommonTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[];a=a.messageBody.dismissRequest;if(a){var c=a.detailedReasonString;a=a.reason;a={eventName:"terminateRequest",fromJoinResponse:!1,reason:d("ZenonMWThriftTranslatorUtils").fromMWThriftDismissReason(a),shouldInformPeer:!0,subreason:c};b.push(a)}return b}function b(a){return d("ZenonMWThriftTranslatorUtils").createMWThriftResponse({header:a,rtcMessageBody:{},type:d("MultiwayCommonTypes").MessageType.DISMISS})}g.fromThriftDismissRequest=a;g.toThriftDismissResponse=b}),98);
__d("ZenonMWThriftHangupTranslator",["MultiwayCommonTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[];a=a.messageHeader;a={ackMessageId:a.transactionId,eventName:"hangupResponse"};b.push(a);return b}function b(a,b){b=b.reason;b={detailedReasonString:"",reason:d("ZenonMWThriftTranslatorUtils").toMWThriftHangupReason(b)};return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{hangupRequest:b},type:d("MultiwayCommonTypes").MessageType.HANGUP})}g.fromThriftHangupResponse=a;g.toThriftHangupRequest=b}),98);
__d("ZenonMWThriftIceCandidateTranslator",["MultiwayCommonTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[];a=a.messageBody.iceCandidateRequest;if(a){a={eventName:"iceCandidateRequest",iceCandidates:a.iceCandidateSdps.map(function(a){var b;return{candidateSdpString:(b=a.candidateSdpString)!=null?b:"",sdpMid:a.sdpMid,sdpMLineIndex:parseInt(a.sdpMLineIndex,10)}})};b.push(a)}return b}function b(a){var b=[];a=a.messageHeader;a={ackMessageId:a.transactionId,eventName:"iceCandidateResponse"};b.push(a);return b}function c(a){return d("ZenonMWThriftTranslatorUtils").createMWThriftResponse({header:a,rtcMessageBody:{},type:d("MultiwayCommonTypes").MessageType.ICE_CANDIDATE})}function e(a,b){b=b.iceCandidates;b=b.map(function(a){return{candidateSdpString:a.candidateSdpString,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex.toString()}});b={iceCandidateSdps:b};return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{iceCandidateRequest:b},type:d("MultiwayCommonTypes").MessageType.ICE_CANDIDATE})}g.fromThriftIceCandidateRequest=a;g.fromThriftIceCandidateResponse=b;g.toThriftIceCandidateResponse=c;g.toThriftIceCandidateRequest=e}),98);
__d("ZenonBrowsers",["UserAgent","UserAgentData"],(function(a,b,c,d,e,f,g){"use strict";function h(){return c("UserAgent").isBrowser("Chrome")}function i(){return!!navigator.webkitGetUserMedia}function a(){return c("UserAgent").isBrowser("Edge (Chromium Based)")||c("UserAgent").isBrowser("Edge PWA (Chromium Based)")}function j(){return c("UserAgent").isBrowser("Safari")}function k(){return c("UserAgent").isBrowser("Firefox")}function b(){return c("UserAgent").isBrowser("Opera")}function l(){return c("UserAgent").isBrowser("Mobile Safari")}function m(){return c("UserAgent").isBrowser("Oculus Browser")}function n(){return c("UserAgent").isBrowser("Samsung Browser")}function d(){return l()||c("UserAgent").isPlatform("Android")||n()}function o(){return c("UserAgent").isPlatform("Android")||c("UserAgent").isPlatform("iOS")}function p(){if(k()){var a;return(a=c("UserAgentData").browserVersion)!=null?a:0}if(i()){a=navigator.userAgent.match(/Chrom(e|ium)\/(\d+)\./);return a!=null?parseInt(a[2],10):999}return 0}function q(){return c("UserAgent").isBrowser("FBLite")||c("UserAgent").isBrowser("Facebook for Android")}function e(a){if(!q())return!1;var b=p();return b>=a}function f(){return k()}function r(){return k()||j()||c("UserAgent").isBrowser("Chrome >= 97")}function s(){return!o()&&(c("UserAgent").isBrowser("Chrome >= 51")||c("UserAgent").isBrowser("Opera >= 36"))}function t(){return c("UserAgent").isBrowser("Firefox < 60")||c("UserAgent").isBrowser("Edge")}function u(){return!m()}function v(){return!m()}function w(){return!l()&&!j()&&!((i()||h())&&p()<80)&&!(k()&&p()<70)}function x(){return(i()||h())&&p()>=77||c("UserAgent").isBrowser("Firefox >= 70")||c("UserAgent").isBrowser("Safari >= 14.1")}function y(){return!(c("UserAgent").isBrowser("Chrome > 105")&&c("UserAgent").isBrowser("Chrome < 115"))}function z(){return c("UserAgent").isBrowser("Chrome >= 89")||c("UserAgent").isBrowser("Opera >= 75")||c("UserAgent").isBrowser("Edge (Chromium Based) >= 89")||c("UserAgent").isBrowser("Edge PWA (Chromium Based) >= 89")}g.isChrome=h;g.isChromium=i;g.isChromiumBasedEdge=a;g.isDesktopSafari=j;g.isFirefox=k;g.isOpera=b;g.isMobileSafari=l;g.isOculusBrowser=m;g.isSamsung=n;g.isSupportedMobileBrowser=d;g.isMobileDevice=o;g.webrtcVersion=p;g.isFBWebview=q;g.isFBWebviewWithChromeMinVersion=e;g.noTransceiverForNegotiations=f;g.onlySupportsUnifiedPlan=r;g.isVideoFilterEffectSupported=s;g.videoEscalationByUnmuteWorkaround=t;g.supportsMWAVEscalation=u;g.supportsVideoCalls=v;g.supportsRollback=w;g.supportsIceRestart=x;g.supportsPranswer=y;g.isVideoLayersAllocationSupported=z}),98);
__d("ZenonJoiningContext",[],(function(a,b,c,d,e,f){"use strict";b="joining_context";function a(a){var b=a.callablePostID,c=a.callingTags,d=a.callTrigger,e=a.conferenceName,f=a.groupThreadID,g=a.igThreadID,h=a.immersiveModeDoorID,i=a.isMetaAiCall,j=a.linkUrl,k=a.liveBroadcastID,l=a.meetingID,m=a.peerID,n=a.rtcDoorID;a=a.serverInfoData;return{call_trigger:d,callable_post_id:b,calling_tags:c,conference_name:e,group_thread_id:f,ig_thread_id:g,immersive_mode_door_id:h,is_meta_ai_call:i,link_url:j,live_broadcast_id:k,meeting_id:l,peer_id:m,rtc_door_id:n,server_info_data:a}}f.JOINING_CONTEXT_TOPIC=b;f.convertCollisionToJoiningContext=a}),66);
__d("ZenonIGMediaUtil",["ZenonAppProvider","gkx"],(function(a,b,c,d,e,f,g){"use strict";a={shouldUseSFUOnly:function(){return d("ZenonAppProvider").isInstagramApp()&&!c("gkx")("2274")}};b=a;g["default"]=b}),98);
__d("shouldUseSFUMediaPath",["ZenonAppProvider","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=c("gkx")("25249");if(b)return!0;return d("ZenonAppProvider").isMessengerWebApp()&&a&&((b=c("gkx")("3298"))!=null?b:!1)?!0:!1}g["default"]=a}),98);
__d("ZenonMWJoinUtils",["ZenonBrowsers","ZenonIGMediaUtil","gkx","shouldUseSFUMediaPath"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("ZenonBrowsers").isFirefox()&&a!=="answer"?!1:!c("ZenonIGMediaUtil").shouldUseSFUOnly()}function b(){return c("shouldUseSFUMediaPath")(!1)?!1:c("gkx")("25223")}g.canUseMwpp=a;g.canDeescalate=b}),98);
__d("ZenonMWThriftJoinTranslator",["MultiwayCommonTypes","MultiwaySharedTypes","RequestStreamBodyUtils","RoboticsPermission","ZenonAuditedCheckpointLogId","ZenonBrowsers","ZenonDismissReason","ZenonInfraActionsLogger","ZenonJoiningContext","ZenonMWCommonUtils","ZenonMWJoinUtils","ZenonMWThriftTranslatorUtils","ZenonScreenShare","justknobx","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[],e=a.messageHeader,f=e.responseStatusCode,g=e.responseSubCode;if(f&&f!==d("MultiwayCommonTypes").RtcResponseStatusCode.OK){var i;g="JOIN response status code: "+String(f)+" subcode "+String(g!=null?g:"[undefined]");c("ZenonInfraActionsLogger").logError({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,callType:"mw",checkpoint:"[ZP] Got non-OK "+g,errorDomain:"ZenonMWThriftMessageTranslator.fromThriftJoinResponse"});i={detailedReasonFromMW:(i=e.responseStatusMessage)!=null?i:"",eventName:"terminateRequest",fromJoinResponse:!0,reason:h(f,e.responseSubCode),shouldInformPeer:!1,subreason:g};b.push(i);return b}f=a.messageBody.joinResponse;if(!f)return b;a=(i=(g=f.answer)==null?void 0:g.sdpString)!=null?i:"";g=a!=="";d("ZenonMWThriftTranslatorUtils").addThriftStateStoreSignalingEvents(f.stateStore,b,!1,g);d("ZenonMWThriftTranslatorUtils").maybeAddOverlayConfigServerUpdateRequestFromThrift(b,e);i=d("ZenonMWThriftTranslatorUtils").fetchE2eeServerState(f.stateStore);e={ackMessageId:e.transactionId,eventName:"localSdpResponse",hasAnswerInJoinResponse:g,source:"joinResponse"};b.push(e);if(g){e={sdp:a,type:"answer",version:d("ZenonMWCommonUtils").getSdpVersion(a)};g=d("ZenonMWThriftTranslatorUtils").toZenonMediaStatesFromThrift(f.mediaStatusEx);a=f.renegotiationOffer;var j=null;a!=null&&a.sdpString!=null&&(j={sdp:a.sdpString,type:"offer",version:d("ZenonMWCommonUtils").getSdpVersion(a.sdpString)});a={e2eeServerState:i,eventName:"remoteSdpRequest",mediaPath:d("ZenonMWThriftTranslatorUtils").fromThriftMediaPath(f.mediaPath),mediaStates:g,negotiateType:!1,renegotiationOffer:j,sdp:e,sdpOriginLocalId:f.sdpOriginLocalId,source:"joinResponse"};b.push(a)}i={capabilities:{addParticipantEnabled:!0,cowatchEnabled:!0,cowatchGroupEnabled:!0,multipleVideoStreamsAllowed:f.multipleVideoStreamsAllowed},eventName:"capabilitiesRequest"};b.push(i);if(f.isPendingApproval){g={eventName:"pendingApprovalRequest"};b.push(g)}j=f.groupsOfUsers;var k=new Map();j.forEach(function(a){var b=a.aliasId;a=a.users;b!=null&&a.forEach(function(a){k.set(a,b)})});e={actorRepresentatives:k,eventName:"clientInfoRequest",mediaPath:d("ZenonMWThriftTranslatorUtils").fromThriftMediaPath(f.mediaPath),userCapabilities:new Map()};b.push(e);return b}function b(a,b,e,f){var g=b.initialSyncStates,h=b.isSecondaryJoinRole,j=b.userCapabilities;j={clientMediaMode:e.mediaMode==="p2p"?d("MultiwaySharedTypes").MediaPath.P2P:d("MultiwaySharedTypes").MediaPath.SFU,deviceCapabilities:new Set([d("MultiwayCommonTypes").Capability.SUPPORT_NEW_PARTICIPANT_STATES,d("MultiwayCommonTypes").Capability.REQUIRE_FULL_SDP_IN_SMU,d("MultiwayCommonTypes").Capability.SUPPORT_SDP_RENEGOTIATION,d("MultiwayCommonTypes").Capability.REQUIRE_FULL_SDP_IN_SMU_OPTIMIZED].concat(d("ZenonBrowsers").supportsPranswer()?[d("MultiwayCommonTypes").Capability.SUPPORT_PRECONNECT]:[])),mediaStatus:d("ZenonMWThriftTranslatorUtils").toMWThriftMediaStatus(e.mediaStates),mediaStatusEx:d("ZenonMWThriftTranslatorUtils").toThriftMWMediaStatusEx(e.mediaStates),offer:{},syncPayload:g?{stateStore:d("ZenonMWThriftTranslatorUtils").toThriftMWSyncStateStore(g),stateStoreV2:{}}:void 0,userCapabilities:d("RequestStreamBodyUtils").stringToUint8Array((g=j.get(a.userInfo.userID))!=null?g:"")};h!=null&&(j.endpointSettings={joinMode:h?d("MultiwayCommonTypes").JoinMode.SECONDARY:d("MultiwayCommonTypes").JoinMode.PRIMARY});g=b.isE2eeMandated===!0;j.e2eeEnforcement={infraMandatedExpStatus:b.e2eeInfraMandatedExpStatus,mode:g?d("MultiwaySharedTypes").E2eeMode.E2EE_MANDATED:d("MultiwaySharedTypes").E2eeMode.E2EE_NOT_MANDATED,p2pSFrameExpStatus:d("MultiwaySharedTypes").P2PSFrameExpStatus.NOT_SET,preventSfuMode:!1};e.sdp.type==="offer"&&(j.offer={sdpString:e.sdp.sdp});d("ZenonMWJoinUtils").canUseMwpp(e.sdp.type)&&(j.deviceCapabilities.add(d("MultiwayCommonTypes").Capability.SUPPORT_MWPP),e.sdp.type==="answer"&&(j.answer={sdpString:e.sdp.sdp}),d("ZenonMWJoinUtils").canDeescalate()&&j.deviceCapabilities.add(d("MultiwayCommonTypes").Capability.SUPPORT_MWPP_DEESCALATION));(!d("ZenonScreenShare").screenShareWithReplaceTrack()||c("RoboticsPermission").is_authorized_robot)&&j.deviceCapabilities.add(d("MultiwayCommonTypes").Capability.SUPPORT_MULTIPLE_VIDEO_STREAMS);h=f==null?void 0:f.otherParticipants;h&&(j.usersToCall=new Set(h));b=[];e=(e=f==null?void 0:f.roomInfo.context)!=null?e:a.roomInfo.context;if(e!=null){var k=d("ZenonJoiningContext").convertCollisionToJoiningContext(e);g&&(k.calling_tags=2);b=[].concat(b,[{body:{genericMessage:{data:d("RequestStreamBodyUtils").stringToUint8Array(JSON.stringify(k)),topic:d("ZenonJoiningContext").JOINING_CONTEXT_TOPIC}},header:{topic_DEPRECATED:d("ZenonJoiningContext").JOINING_CONTEXT_TOPIC}}])}(f==null?void 0:f.appMessages)!=null&&(b=[].concat(b,d("ZenonMWThriftTranslatorUtils").signalingMessageAppMessagesToThriftMWAppMessages(f.appMessages,h)));j.appMessages=b;g=d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{joinRequest:j},type:d("MultiwayCommonTypes").MessageType.JOIN});e&&e.serverInfoData!=null&&(g.messageHeader.serverInfoData=e.serverInfoData);i(e,g.messageHeader)&&(g.messageHeader.conferenceType=d("MultiwaySharedTypes").ConferenceType.ROOM);return g}function h(a,b){if(b===d("MultiwayCommonTypes").RtcResponseSubCode.EXCEEDED_MAX_ALLOWED_PARTICIPANTS)return d("ZenonDismissReason").ZenonDismissReason.MaxAllowedParticipantsReached;if(b===d("MultiwayCommonTypes").RtcResponseSubCode.PRODUCT_SERVER_DEFINED_END_REASON)return d("ZenonDismissReason").ZenonDismissReason.ProductServerDefinedEndReason;if(b===d("MultiwayCommonTypes").RtcResponseSubCode.CALLER_HAS_APPEALABLE_CALLING_RESTRICTION&&c("justknobx")._("4391"))return d("ZenonDismissReason").ZenonDismissReason.CallerHasAppealableCallingRestriction;switch(a){case d("MultiwayCommonTypes").RtcResponseStatusCode.METHOD_NOT_ALLOWED:case d("MultiwayCommonTypes").RtcResponseStatusCode.UNAUTHORIZED:return d("ZenonDismissReason").ZenonDismissReason.NoPermission;case d("MultiwayCommonTypes").RtcResponseStatusCode.SERVICE_UNAVAILABLE:return d("ZenonDismissReason").ZenonDismissReason.SignalingMessageFailed;case d("MultiwayCommonTypes").RtcResponseStatusCode.OK:throw c("unrecoverableViolation")("Response status code is OK; should not return a dismiss reason","rtc_www");default:c("ZenonInfraActionsLogger").logError({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,callType:"mw",error:"[ZP] Got unexpected JOIN response status: "+String(a)+" subcode "+String(b!=null?b:"[undefined]"),errorDomain:"fromMWThriftJoinResponseStatusToDismissReason"});return d("ZenonDismissReason").ZenonDismissReason.UnexpectedEndOfCall}}function i(a,b){return((a==null?void 0:a.peerID)!=null||(a==null?void 0:a.groupThreadID)!=null)&&b.conferenceName===""}g.fromThriftJoinResponse=a;g.toThriftJoinRequest=b}),98);
__d("ZenonMWThriftPingTranslator",["MultiwayCommonTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[];a=a.messageHeader;a={ackMessageId:a.transactionId,eventName:"pingResponse"};b.push(a);return b}function b(a){return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{},type:d("MultiwayCommonTypes").MessageType.PING})}g.fromThriftPingResponse=a;g.toThriftPingRequest=b}),98);
__d("ZenonMWThriftRemoveParticipantsTranslator",["MultiwayCommonTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b={usersToRemove:new Set(b.participants)};return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{removeParticipantsRequest:b},type:d("MultiwayCommonTypes").MessageType.REMOVE_PARTICIPANTS})}g.toThriftRemoveParticipantsRequest=a}),98);
__d("ZenonMWThriftRingTranslator",["MultiwayCommonTypes","MultiwaySharedTypes","ZenonMWCommonUtils","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c){if(b)return{groupThreadID:b.groupThreadId,peerID:b.peerId,serverInfoData:c};b=d("ZenonMWThriftTranslatorUtils").getCollisionContextFromThriftAppMessages(a);b&&(b.serverInfoData=c);return b!=null?b:{groupThreadID:null,peerID:null,serverInfoData:c}}function a(a,b){var c=[],e=a.messageBody;a=a.messageHeader;e=e.ringRequest;if(e){var f=e.appMessages,g=e.caller,i=e.e2eeEnforcement,j=e.otherParticipants,k=e.ringType,l=e.sdpOriginLocalId,m=e.threadIdInfo;g=g;k=k===d("MultiwayCommonTypes").RingType.PEER_VIDEO_CALL||k===d("MultiwayCommonTypes").RingType.GROUP_VIDEO_CALL||k===d("MultiwayCommonTypes").RingType.LIVE_STREAM||k===d("MultiwayCommonTypes").RingType.PEER_ESCALATED_AUDIO_CALL;var n=a.conferenceName;a=a.serverInfoData;m=h(f,m,a);var o=d("ZenonMWThriftTranslatorUtils").getRoomMetadataFromThriftAppMessages(f);g={actorID:b.actorID,e2eeInfraMandatedExpStatus:i==null?void 0:i.infraMandatedExpStatus,eventName:"inviteRequest",inviterID:g,isE2eeMandated:(i==null?void 0:i.mode)===d("MultiwaySharedTypes").E2eeMode.E2EE_MANDATED,isRemoteOfferer:!1,otherParticipants:Array.from(j),requestingVideo:k,roomInfo:babelHelpers["extends"]({context:m,name:n},o==null?{}:{room:o,sender:o.sender}),userID:b.userInfo.userID};a!=null&&(g.serverInfoData=a);f!=null&&(g.appMessages=d("ZenonMWThriftTranslatorUtils").mwThriftAppMessagesToSignalingAppMessages(f));c.push(g);k=(j=(i=e.offer)==null?void 0:i.sdpString)!=null?j:"";n=(m=e.mediaStatusEx)!=null?m:null;if(k!==""&&n!=null){o={sdp:k,type:"offer",version:d("ZenonMWCommonUtils").getSdpVersion(k)};b=d("ZenonMWThriftTranslatorUtils").toZenonMediaStatesFromThrift(n);a={eventName:"remoteSdpRequest",mediaPath:d("ZenonMWThriftTranslatorUtils").fromThriftMediaPath(e.mediaPath),mediaStates:b,negotiateType:!1,sdp:o,sdpOriginLocalId:l,source:"ringRequest"};c.push(a)}}return c}function b(a,b){b=b.status;b==="IN_ANOTHER_CALL"&&(a.signalingID=null);b=d("ZenonMWThriftTranslatorUtils").toMWThriftDeviceStatus(b);b={deviceStatus:b};return d("ZenonMWThriftTranslatorUtils").createMWThriftResponse({header:a,rtcMessageBody:{ringResponse:b},type:d("MultiwayCommonTypes").MessageType.RING})}g.fromThriftRingRequest=a;g.toThriftRingResponse=b}),98);
__d("ZenonMWThriftServerMediaUpdateTranslator",["FBLogger","MultiwayCommonTypes","ZenonAuditedCheckpointLogId","ZenonBrowsers","ZenonInfraActionsLogger","ZenonMWCommonUtils","ZenonMWThriftMessageReliabilityLogger","ZenonMWThriftMessageTagUtils","ZenonMWThriftTranslatorUtils","ZenonScreenShare"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[],e=a.messageBody.serverMediaUpdateRequest,f=a.messageHeader,g=f.messageTags,i=f.transactionId;if(!e)return b;var j=e.answer,k=e.fromVersion,l=e.mediaPath,m=e.mediaStatus,n=e.multipleVideoStreamsAllowed,o=e.offer,p=e.prAnswer,q=e.renegotiationRequested,r=e.sdpOriginLocalId,s=e.stateStore,t=e.toVersion;e=e.update;o=(o=o==null?void 0:o.sdpString)!=null?o:"";j=(j=j==null?void 0:j.sdpString)!=null?j:"";p=(p=p==null?void 0:p.sdpString)!=null?p:"";k=+k;t=+t;l=d("ZenonMWThriftTranslatorUtils").fromThriftMediaPath(l);g=d("ZenonMWThriftMessageTagUtils").fromThriftMessageTags(g);var u=function(){d("ZenonMWThriftMessageReliabilityLogger").logProcessedMessage(a)},v=o!=="",w=j!=="",x=d("ZenonBrowsers").supportsPranswer()&&p!=="",y=e!==null;y=v||w||x||y;d("ZenonMWThriftTranslatorUtils").addThriftStateStoreSignalingEvents(s,b,!1,y);y=d("ZenonMWThriftTranslatorUtils").fetchE2eeServerState(s);if(q){c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"SMU type 1: renegotationRequested"});s={ackMessageId:i,eventName:"initiateRenegotiationRequest",fromVersion:k,hasRemoteOffer:o!=="",mediaPath:l,messageTags:g!=null?g:[],onProcessed:u,version:t};b.push(s);if(v){q=h(i,k,l,m,{sdp:o,type:"offer",version:d("ZenonMWCommonUtils").getSdpVersion(o)},r,u,g,y);b.push(q)}}else if(w){c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"SMU type 2: answer SDP"});s=h(i,k,l,m,{sdp:j,type:"answer",version:d("ZenonMWCommonUtils").getSdpVersion(j)},r,u,g,y);if(s.sdp.sdp!=null&&d("ZenonMWCommonUtils").isUnifiedPlan(s.sdp.sdp)){q={sdp:j,type:"offer",version:d("ZenonMWCommonUtils").getSdpVersion(j)};s.renegotiationOffer=q}b.push(s)}else if(v){c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"SMU type 3: offer SDP"});w=h(i,k,l,m,{sdp:o,type:"offer",version:d("ZenonMWCommonUtils").getSdpVersion(o)},r,u,g,y);b.push(w)}else if(e){c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"SMU type 4: delta SDP"});j=h(i,k,l,m,{type:"offer",update:e,version:t},r,u,g,y);b.push(j)}else if(x){c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"SMU type 5: prAnswer SDP"});q=h(i,k,l,m,{sdp:p,type:"pranswer",version:d("ZenonMWCommonUtils").getSdpVersion(p)},r,u,g,y);b.push(q)}else if(m){c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"SMU type 6: media update"});s={ackMessageId:i,eventName:"mediaUpdateRequest",mediaStates:d("ZenonMWThriftTranslatorUtils").toZenonMediaStatesFromThrift(m,k,t),messageTags:g!=null?g:[],onProcessed:u};b.push(s)}else{v="Warning: unsupported SMU type. TXID: "+i;c("FBLogger")("rpweb").warn(v);c("ZenonInfraActionsLogger").logError({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,error:v,errorDomain:"ZenonMWThriftServerMediaUpdateTranslator"})}d("ZenonMWThriftTranslatorUtils").maybeAddOverlayConfigServerUpdateRequestFromThrift(b,f);o={capabilities:{multipleVideoStreamsAllowed:n},eventName:"capabilitiesRequest",messageTags:g!=null?g:[]};b.push(o);return b}function h(a,b,c,e,f,g,h,i,j){return{ackMessageId:a,e2eeServerState:j,eventName:"remoteSdpRequest",fromVersion:b,mediaPath:c,mediaStates:d("ZenonMWThriftTranslatorUtils").toZenonMediaStatesFromThrift(e),messageTags:i!=null?i:[],negotiateType:!1,onProcessed:h,sdp:f,sdpOriginLocalId:g,source:"serverMediaUpdateRequest"}}function b(a,b,c,e){return i({acknowledgedVersion:b.acknowledgedVersion,answer:e,header:a,mediaStates:c,statusCode:d("ZenonMWThriftTranslatorUtils").toMWThriftResponseStatusCode(b.statusCode),subCode:(e=d("ZenonMWThriftTranslatorUtils").toMWThriftResponseStatusSubCode(b.subCode))!=null?e:void 0})}function e(a,b){return i({acknowledgedVersion:b.acknowledgedVersion,header:a,statusCode:d("ZenonMWThriftTranslatorUtils").toMWThriftResponseStatusCode(b.statusCode),subCode:(a=d("ZenonMWThriftTranslatorUtils").toMWThriftResponseStatusSubCode(b.subCode))!=null?a:void 0})}function f(a,b){return i({acknowledgedVersion:b.acknowledgedVersion,header:a,statusCode:(a=d("MultiwayCommonTypes").RtcResponseStatusCode.cast(b.responseStatusCode))!=null?a:d("MultiwayCommonTypes").RtcResponseStatusCode.CONDITIONAL_REQUEST_FAILED,subCode:d("MultiwayCommonTypes").RtcResponseSubCode.cast(b.responseSubCode)})}function i(a){var b=a.acknowledgedVersion,c=a.answer,e=a.header,f=a.mediaStates,g=a.statusCode;a=a.subCode;b={currentVersion:String(b)};f&&(b.mediaStatus=j(f));c&&(b.answer={sdpString:c.sdp});return d("ZenonMWThriftTranslatorUtils").createMWThriftResponse({header:e,rtcMessageBody:{serverMediaUpdateResponse:b},statusCode:g,subCode:a,type:d("MultiwayCommonTypes").MessageType.SERVER_MEDIA_UPDATE})}function j(a){var b={tracks:{}},c=!d("ZenonScreenShare").screenShareWithReplaceTrack();a.tracks.forEach(function(a){var e={customAudioContentType:void 0,customVideoContentType:void 0,enabled:a.enabled,name:a.name,owner:a.participantID},f=c?d("ZenonMWThriftTranslatorUtils").toMWThriftTrackLabel(a.type):null;f!=null&&(e.label=f);b.tracks[a.trackID]=e});return b}g.fromThriftServerMediaUpdateRequest=a;g.toThriftServerMediaUpdateResponse=b;g.toThriftServerMediaUpdateRenegotiationResponse=e;g.toThriftServerMediaUpdateNoSdpResponse=f}),98);
__d("ZenonMWThriftStateSyncTranslator",["MultiwayCommonTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.messageBody.updateResponse;a=a.messageHeader.transactionId;if(!b)return[];var c=b.topic;b=b.version;a={ackMessageId:a,eventName:"stateSyncUpdateResponse",topic:c,version:b};return[a]}function b(a){a=a.messageBody.notifyRequest;if(!a)return[];var b=[];if(a.syncPayload!=null)d("ZenonMWThriftTranslatorUtils").addThriftStateStoreSignalingEvents(a.syncPayload.stateStore,b,!0,!1);else{var c=a.data,e=a.topic;a=a.version;c={data:c,eventName:"stateSyncNotifyRequest",responseRequired:!0,topic:e,version:a};b.push(c)}return b}function c(a){var b=a.messageBody.unsubscribeResponse;a=a.messageHeader.transactionId;if(!b)return[];var c=b.topic;b=b.version;a={ackMessageId:a,eventName:"stateSyncUnsubscribeResponse",topic:c,version:b};return[a]}function e(a,b){var c=b.data,e=b.topic;b=b.version;c={data:c,syncPayload:{stateStore:{},stateStoreV2:{}},topic:e,topicId:null,version:b};return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{updateRequest:c},type:d("MultiwayCommonTypes").MessageType.UPDATE})}function f(a,b){var c=b.topic;b=b.version;c={topic:c,version:b};return d("ZenonMWThriftTranslatorUtils").createMWThriftResponse({header:a,rtcMessageBody:{notifyResponse:c},type:d("MultiwayCommonTypes").MessageType.NOTIFY})}function h(a,b){var c=b.topic;b=b.version;c={topic:c,topicId:null,version:b};return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{unsubscribeRequest:c},type:d("MultiwayCommonTypes").MessageType.UNSUBSCRIBE})}g.fromThriftUpdateResponse=a;g.fromThriftNotifyRequest=b;g.fromThriftUnsubscribeResponse=c;g.toThriftUpdateRequest=e;g.toThriftNotifyResponse=f;g.toThriftUnsubscribeRequest=h}),98);
__d("ZenonMWThriftSubscriptionTranslator",["MultiwayCommonTypes","MultiwaySharedTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b=b.subscriptions;b={subscriptions:b.map(function(a){var b;return{cname:"",options:{videoQuality:d("MultiwaySharedTypes").VideoQuality.cast((b=a.options)==null?void 0:b.videoQuality)},trackId:a.trackId,type:d("MultiwaySharedTypes").SubscriptionType.cast(a.type)}})};return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{subscriptionRequest:b},type:d("MultiwayCommonTypes").MessageType.SUBSCRIPTION})}g.toThriftSubscriptionRequest=a}),98);
__d("ZenonMWThriftWakeupTranslator",["MultiwayCommonTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[];a=a.messageHeader;a={ackMessageId:a.transactionId,eventName:"wakeupRequest"};b.push(a);return b}function b(a){return d("ZenonMWThriftTranslatorUtils").createMWThriftResponse({header:a,rtcMessageBody:{},type:d("MultiwayCommonTypes").MessageType.WAKEUP})}g.fromThriftWakeupRequest=a;g.toThriftWakeupResponse=b}),98);
__d("ZenonSignalingMessage",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.getHeader=function(){return this.$1};b.getEvents=function(){return this.$2};b.setSignalingID=function(a){this.$1.signalingID=a};b.setRetryCount=function(a){this.$1.retryCount=a};return a}();f["default"]=a}),66);
__d("ZenonMWThriftMessageTranslator",["FBLogger","MultiwayCommonTypes","ZenonActorHooks","ZenonMWThriftAddParticipantsTranslator","ZenonMWThriftApprovalTranslator","ZenonMWThriftClientEventTranslator","ZenonMWThriftClientMediaUpdateTranslator","ZenonMWThriftConferenceStateTranslator","ZenonMWThriftDataMessageTranslator","ZenonMWThriftDismissTranslator","ZenonMWThriftHangupTranslator","ZenonMWThriftIceCandidateTranslator","ZenonMWThriftJoinTranslator","ZenonMWThriftPingTranslator","ZenonMWThriftRemoveParticipantsTranslator","ZenonMWThriftRingTranslator","ZenonMWThriftServerMediaUpdateTranslator","ZenonMWThriftStateSyncTranslator","ZenonMWThriftSubscriptionTranslator","ZenonMWThriftTranslatorUtils","ZenonMWThriftWakeupTranslator","ZenonSignalingMessage","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.getHeader();a=a.getEvents();if(a.length===0)throw c("unrecoverableViolation")("Unexpected Translation: called toMWThriftMessage with empty signaling events","rtc_www");else{var e=a[0];switch(e.eventName){case"addParticipantsRequest":return d("ZenonMWThriftAddParticipantsTranslator").toThriftAddParticipantsRequest(b,e);case"clientEventRequest":return d("ZenonMWThriftClientEventTranslator").toThriftClientEventRequest(b,e);case"clientInfoRequest":if(a.length>=2&&a[1].eventName==="localSdpRequest"&&(a[1].sdp.type==="offer"||a[1].sdp.type==="answer"))return d("ZenonMWThriftJoinTranslator").toThriftJoinRequest(b,e,a[1]);break;case"dismissResponse":return d("ZenonMWThriftDismissTranslator").toThriftDismissResponse(b);case"genericDataMessageRequest":return d("ZenonMWThriftDataMessageTranslator").toThriftDataMessageRequest(b,e);case"genericDataMessageResponse":return d("ZenonMWThriftDataMessageTranslator").toThriftDataMessageResponse(b);case"terminateRequest":return d("ZenonMWThriftHangupTranslator").toThriftHangupRequest(b,e);case"initiateRenegotiationResponse":if(a.length>=3&&a[1].eventName==="remoteSdpResponse"&&a[2].eventName==="localSdpRequest"&&a[2].sdp.type==="answer")return d("ZenonMWThriftServerMediaUpdateTranslator").toThriftServerMediaUpdateResponse(b,a[1],a[2].mediaStates,a[2].sdp);else return d("ZenonMWThriftServerMediaUpdateTranslator").toThriftServerMediaUpdateRenegotiationResponse(b,e);case"inviteRequest":if(a.length>=3&&a[1].eventName==="clientInfoRequest"&&a[2].eventName==="localSdpRequest"&&a[2].sdp.type==="offer")return d("ZenonMWThriftJoinTranslator").toThriftJoinRequest(b,a[1],a[2],e);break;case"inviteResponse":return d("ZenonMWThriftRingTranslator").toThriftRingResponse(b,e);case"iceCandidateRequest":return d("ZenonMWThriftIceCandidateTranslator").toThriftIceCandidateRequest(b,e);case"iceCandidateResponse":return d("ZenonMWThriftIceCandidateTranslator").toThriftIceCandidateResponse(b);case"participantUpdateResponse":return d("ZenonMWThriftConferenceStateTranslator").toThriftConferenceStateResponse(b,e);case"localSdpRequest":return d("ZenonMWThriftClientMediaUpdateTranslator").toThriftClientMediaUpdateRequest(b,e.mediaStates,e.sdp);case"mediaUpdateRequest":return d("ZenonMWThriftClientMediaUpdateTranslator").toThriftClientMediaUpdateRequest(b,e.mediaStates);case"mediaUpdateResponse":return d("ZenonMWThriftServerMediaUpdateTranslator").toThriftServerMediaUpdateNoSdpResponse(b,e);case"pingRequest":return d("ZenonMWThriftPingTranslator").toThriftPingRequest(b);case"remoteSdpResponse":return e.type==="offer"&&(a.length>=2&&a[1].eventName==="localSdpRequest"&&a[1].sdp.type==="answer")?a[1].mediaMode!=="p2p"?d("ZenonMWThriftServerMediaUpdateTranslator").toThriftServerMediaUpdateResponse(b,e,a[1].mediaStates):d("ZenonMWThriftServerMediaUpdateTranslator").toThriftServerMediaUpdateResponse(b,e,a[1].mediaStates,a[1].sdp):d("ZenonMWThriftServerMediaUpdateTranslator").toThriftServerMediaUpdateResponse(b,e);case"removeParticipantsRequest":return d("ZenonMWThriftRemoveParticipantsTranslator").toThriftRemoveParticipantsRequest(b,e);case"subscriptionRequest":return d("ZenonMWThriftSubscriptionTranslator").toThriftSubscriptionRequest(b,e);case"stateSyncNotifyResponse":return d("ZenonMWThriftStateSyncTranslator").toThriftNotifyResponse(b,e);case"stateSyncUpdateRequest":return d("ZenonMWThriftStateSyncTranslator").toThriftUpdateRequest(b,e);case"stateSyncUnsubscribeRequest":return d("ZenonMWThriftStateSyncTranslator").toThriftUnsubscribeRequest(b,e);case"usersApprovalRequest":return d("ZenonMWThriftApprovalTranslator").toThriftApprovalRequest(b,e);case"wakeupResponse":return d("ZenonMWThriftWakeupTranslator").toThriftWakeupResponse(b)}}return null}function b(a){var b=a.messageHeader;if(!h(b)){c("FBLogger")("rtc_www").info("Ignoring Thrift MW message; receiver does not match self ID","rtc_www");return null}var e=b.type,f=b.responseStatusCode==null;b=d("ZenonMWThriftTranslatorUtils").mwThriftMessageHeaderToSignalingMessageHeader(b);var g=[];if(e==null)return new(c("ZenonSignalingMessage"))(b,g);switch(e){case d("MultiwayCommonTypes").MessageType.RING:f&&(g=d("ZenonMWThriftRingTranslator").fromThriftRingRequest(a,b));break;case d("MultiwayCommonTypes").MessageType.JOIN:f||(g=d("ZenonMWThriftJoinTranslator").fromThriftJoinResponse(a));break;case d("MultiwayCommonTypes").MessageType.CONFERENCE_STATE:f&&(g=d("ZenonMWThriftConferenceStateTranslator").fromThriftConferenceStateRequest(a));break;case d("MultiwayCommonTypes").MessageType.CLIENT_MEDIA_UPDATE:f||(g=d("ZenonMWThriftClientMediaUpdateTranslator").fromThriftClientMediaUpdateResponse(a));break;case d("MultiwayCommonTypes").MessageType.HANGUP:f||(g=d("ZenonMWThriftHangupTranslator").fromThriftHangupResponse(a));break;case d("MultiwayCommonTypes").MessageType.PING:f||(g=d("ZenonMWThriftPingTranslator").fromThriftPingResponse(a));break;case d("MultiwayCommonTypes").MessageType.ICE_CANDIDATE:!f?g=d("ZenonMWThriftIceCandidateTranslator").fromThriftIceCandidateResponse(a):g=d("ZenonMWThriftIceCandidateTranslator").fromThriftIceCandidateRequest(a);break;case d("MultiwayCommonTypes").MessageType.DATA_MESSAGE:f&&(g=d("ZenonMWThriftDataMessageTranslator").fromThriftDataMessageRequest(a));break;case d("MultiwayCommonTypes").MessageType.DISMISS:f&&(g=d("ZenonMWThriftDismissTranslator").fromThriftDismissRequest(a));break;case d("MultiwayCommonTypes").MessageType.SERVER_MEDIA_UPDATE:f&&(g=d("ZenonMWThriftServerMediaUpdateTranslator").fromThriftServerMediaUpdateRequest(a));break;case d("MultiwayCommonTypes").MessageType.NOTIFY:f&&(g=d("ZenonMWThriftStateSyncTranslator").fromThriftNotifyRequest(a));break;case d("MultiwayCommonTypes").MessageType.UPDATE:f||(g=d("ZenonMWThriftStateSyncTranslator").fromThriftUpdateResponse(a));break;case d("MultiwayCommonTypes").MessageType.UNSUBSCRIBE:f||(g=d("ZenonMWThriftStateSyncTranslator").fromThriftUnsubscribeResponse(a));break;case d("MultiwayCommonTypes").MessageType.WAKEUP:f&&(g=d("ZenonMWThriftWakeupTranslator").fromThriftWakeupRequest(a));break;default:break}return new(c("ZenonSignalingMessage"))(b,g)}function h(a){return d("ZenonActorHooks").ZenonActor.isInstagramUser()||d("ZenonActorHooks").ZenonActor.isOculusUser()||d("ZenonActorHooks").ZenonActor.isKadabraUser()||d("ZenonActorHooks").ZenonActor.isManagedMetaAccount()||d("ZenonActorHooks").ZenonActor.isMDCUser()||a.receiverUserId==null||a.receiverUserId===d("ZenonActorHooks").ZenonActor.getID()||((a=a.receiver)==null?void 0:a.baseId)===d("ZenonActorHooks").ZenonActor.getAccountID()}g.toMWThriftMessage=a;g.toSignalingMessage=b}),98);
__d("decodeIgSignalingPayload",["TCompactProtocol","TReadBuffer","ThriftTypes"],(function(a,b,c,d,e,f,g){"use strict";var h,i=2;function a(a){a=new(c("TReadBuffer"))(a);a=new(c("TCompactProtocol"))(a);var b=null;a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case i:e===(h||(h=c("ThriftTypes"))).STRING?b=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}g["default"]=a}),98);
__d("IgSignalingListener",["FBLogger","IGDOverLSMqttChannel","RequestStreamBodyUtils","ZenonMWThriftMessageDebugLogger","ZenonMWThriftMessageReliabilityLogger","ZenonMWThriftMessageSerializer","ZenonMWThriftMessageTranslator","decodeIgSignalingPayload","nullthrows","promiseDone","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=d("IGDOverLSMqttChannel").waitAndGetInstance();a=function(){function a(){}var b=a.prototype;b.setLoggingEventHandler=function(a){this.$1=a};b.subscribe=function(a,b){var e=this;c("promiseDone")(h.then(function(f){f.subscribeBinary("/pubsub",function(f){try{f=c("nullthrows")(c("decodeIgSignalingPayload")(f));f=JSON.parse(f);f=d("RequestStreamBodyUtils").base64ToUint8Array(f.binaryPayload);f=d("ZenonMWThriftMessageSerializer").deserializeMWThriftMessage(f,!0);d("ZenonMWThriftMessageReliabilityLogger").logReceivedMessage(f);c("ZenonMWThriftMessageDebugLogger").logMWThriftMessage("RECEIVED","MQTT Thrift",f);e.$1&&e.$1({mwThriftMessage:f,name:"mwThriftMessageRecv"});var g=d("ZenonMWThriftMessageTranslator").toSignalingMessage(f);if(g==null)return;a(g);b&&e.$2(f,g,b);d("ZenonMWThriftMessageReliabilityLogger").logProcessingMessage(f)}catch(a){c("FBLogger")("rpweb").catching(a).mustfix("Error receiving MQTT message from /pubsub topic")}})}))};b.unsubscribe=function(){c("promiseDone")(h.then(function(a){a.unsubscribeAll("/webrtc"),a.unsubscribeAll("/pubsub")}))};b.$2=function(a,b,d){try{d(a,b)}catch(a){c("recoverableViolation")("Signaling messages should be json parsable. error:"+a,"rtweb")}};return a}();g["default"]=a}),98);
__d("LazyLoadInstance",["asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h={LOADING:1,NOT_READY:0,READY:2};a=function(){function a(a,b){this.$1={instantiate:b,moduleReference:a,stage:h.NOT_READY}}var d=a.prototype;d.get=function(a){switch(this.$1.stage){case h.NOT_READY:c("promiseDone")(this.$2(this.$1),a);break;case h.LOADING:c("promiseDone")(this.$1.instancePromise,a);break;case h.READY:a(this.$1.instance);break}};d.getNow=function(){return this.$1.stage===h.READY?this.$1.instance:null};d.preload=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){this.$1.stage===h.NOT_READY&&(yield this.$2(this.$1))});function c(){return a.apply(this,arguments)}return c}();d.$2=function(a){var b=this,c=a.instantiate;a=a.moduleReference;a=a.load().then(function(a){a=c(a);b.$1={instance:a,stage:h.READY};return a});this.$1={instancePromise:a,stage:h.LOADING};return a};return a}();g["default"]=a}),98);
__d("LsRtcEndCallSurveyFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1743882");b=d("FalcoLoggerInternal").create("ls_rtc_end_call_survey",a);e=b;g["default"]=e}),98);
__d("LsRtcStarRatingFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1743884");b=d("FalcoLoggerInternal").create("ls_rtc_star_rating",a);e=b;g["default"]=e}),98);
__d("OverlayConfigDefaults",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze([1,0,0,20,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,640,360,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,0,0,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,0,1,-1,-1,-1,-1,-1,-1,1,1,0,2e3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1e3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,1,16e3,2e4,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6e4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2e3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]);b=a;f["default"]=b}),66);
__d("OverlayConfigDefaultsLayer",["OverlayConfigDefaults","OverlayConfigLayerSource"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}var b=a.prototype;b.getLayerSource=function(){return c("OverlayConfigLayerSource").DEFAULT};b.getValue=function(a){return c("OverlayConfigDefaults")[a]};b.logExposure=function(a){};return a}();g["default"]=a}),98);
__d("OverlayConfigLayerManager",["OverlayConfigConstants","OverlayConfigDefaultsLayer","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=[new(c("OverlayConfigDefaultsLayer"))()]}var b=a.prototype;b.getValue=function(a){for(var b=this.$1.length-1;b>=0;b--){var d=this.$1[b].getValue(a);if(d>c("OverlayConfigConstants").OverlayConfigNotPresentFlagValue)return d}throw c("unrecoverableViolation")("OverlayConfigLayerManager: No value found for id "+String(a),"rtc_www")};b.addLayer=function(a){this.$1.push(a);return this.$1.length-1};b.replaceLayer=function(a,b){if(a===0)throw c("unrecoverableViolation")("OverlayConfigLayerManager: Tried to replace default layer!","rtc_www");else if(this.$1[a]==null)throw c("unrecoverableViolation")("OverlayConfigLayerManager: Layer does not exist at index "+String(a),"rtc_www");this.$1[a]=b};b.clone=function(){var b=new a();b.$1=this.$1.slice();return b};return a}();g["default"]=a}),98);
__d("OverlayConfigManager",["Configs","OverlayConfigLayerManager"],(function(a,b,c,d,e,f){"use strict";var g=(a=b("Configs")).ExampleConfig,h=a.SimulcastOverSignalingConfig,i=a.PreferredCaptureConfig,j=a.ZenonSdpTransformConfig,k=a.ZenonPeerConnectionConfig,l=a.ZenonStartCallImmediatelyConfig,m=a.ZenonGeneralizedIdentityConfig,n=a.ZenonMultiCallSupportConfig,o=a.ZenonPlatformSupportConfig,p=a.ZenonSimulcastConfig,q=a.DynamicRuleConfig,r=a.SignalingPingConfig;c=function(){function a(){this.layerManager=new(b("OverlayConfigLayerManager"))()}var c=a.prototype;c.getExampleConfig=function(){return new g(this.layerManager)};c.getSimulcastOverSignalingConfig=function(){return new h(this.layerManager)};c.getPreferredCaptureConfig=function(){return new i(this.layerManager)};c.getZenonSdpTransformConfig=function(){return new j(this.layerManager)};c.getZenonPeerConnectionConfig=function(){return new k(this.layerManager)};c.getZenonStartCallImmediatelyConfig=function(){return new l(this.layerManager)};c.getZenonGeneralizedIdentityConfig=function(){return new m(this.layerManager)};c.getZenonMultiCallSupportConfig=function(){return new n(this.layerManager)};c.getZenonPlatformSupportConfig=function(){return new o(this.layerManager)};c.getZenonSimulcastConfig=function(){return new p(this.layerManager)};c.getDynamicRuleConfig=function(){return new q(this.layerManager)};c.getSignalingPingConfig=function(){return new r(this.layerManager)};return a}();e.exports=c}),null);
__d("OverlayConfigManagerWithServerLayer",["OverlayConfigManager"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this)||this;c.$OverlayConfigManagerWithServerLayer$p_1=-1;b!=null&&(c.layerManager=b.layerManager.clone());return c}var c=b.prototype;c.setServerLayer=function(a){if(this.$OverlayConfigManagerWithServerLayer$p_1>-1){this.layerManager.replaceLayer(this.$OverlayConfigManagerWithServerLayer$p_1,a);return}this.$OverlayConfigManagerWithServerLayer$p_1=this.layerManager.addLayer(a)};return b}(c("OverlayConfigManager"));g["default"]=a}),98);
__d("PolarisLiveCreationModalLazy.react",["CometPlaceholder.react","IGCoreModal.react","IGDSBox.react","IGDSSpinner.react","JSResourceForInteraction","PolarisSizing","lazyLoadComponent","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisLiveCreationModal.react").__setRef("PolarisLiveCreationModalLazy.react"));function a(a){var b=d("react-compiler-runtime").c(3),e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsx(c("IGCoreModal.react"),{backdropColor:"dark",children:i.jsx(c("IGDSBox.react"),{alignItems:"center",height:112,justifyContent:"center",maxWidth:d("PolarisSizing").FEED_WIDTH_WIDE,position:"relative",width:"100%",children:i.jsx(c("IGDSSpinner.react"),{size:"medium"})})}),b[0]=e):e=b[0];b[1]!==a?(e=i.jsx(c("CometPlaceholder.react"),{fallback:e,children:i.jsx(j,babelHelpers["extends"]({},a))}),b[1]=a,b[2]=e):e=b[2];return e}g["default"]=a}),98);
__d("PolarisGlobalUIComponents.react",["CometErrorBoundary.react","CometPlaceholder.react","IGWebPreCallProvider.react","PolarisAppStoreLauncher.react","PolarisCallGatingHelpers","PolarisConfig","PolarisIsLiveProducerEnabled","PolarisIsLoggedIn","PolarisLiveCreationModalLazy.react","PolarisOneTapLogin","PolarisQPConstants","PolarisReactRedux.react","PolarisSwitchAccountsModalLazy.react","PolarisToastWrapper.react","PolarisUA","cr:1609","cr:3106","cr:4779","cr:4839","cr:7274","cr:8738","cr:9681","polarisNavigationSelectors","react","react-compiler-runtime","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={mobileToast:{marginBottom:"xx7atzb",$$css:!0}};function a(a){var e=d("react-compiler-runtime").c(25),f=a.hasMobileNavs,g=a.pageIdentifier;a=a.viewer;var i=d("PolarisReactRedux.react").useSelector(d("polarisNavigationSelectors").getHideNavQueryParam),n=d("PolarisReactRedux.react").useSelector(m),o=n.isAccountSwitcherOpen;n=n.isLiveCreationModalOpen;var p;e[0]!==n?(p=!d("PolarisUA").isMobile()&&n&&d("PolarisIsLiveProducerEnabled").isLiveProducerEnabled()?j.jsx(c("PolarisLiveCreationModalLazy.react"),{}):null,e[0]=n,e[1]=p):p=e[1];n=p;p=null;if(d("PolarisUA").isMobile()&&d("PolarisOneTapLogin").isCAASpiDialogEligible())if(b("cr:7274")){var q;e[2]===Symbol["for"]("react.memo_cache_sentinel")?(q=j.jsx(b("cr:7274"),{}),e[2]=q):q=e[2];p=q}else if(b("cr:8738")){e[3]===Symbol["for"]("react.memo_cache_sentinel")?(q=j.jsx(b("cr:8738"),{}),e[3]=q):q=e[3];p=q}q=f&&!!a&&k.mobileToast;e[4]!==q?(f=(h||(h=c("stylex")))(q),e[4]=q,e[5]=f):f=e[5];e[6]!==f?(q=j.jsx(c("PolarisToastWrapper.react"),{className:f}),e[6]=f,e[7]=q):q=e[7];e[8]===Symbol["for"]("react.memo_cache_sentinel")?(f=b("cr:9681")!=null&&j.jsx(b("cr:9681"),{slot:d("PolarisQPConstants").SLOTS.app_start}),p=j.jsx(c("CometErrorBoundary.react"),{fallback:l,children:p}),e[8]=f,e[9]=p):(f=e[8],p=e[9]);var r;e[10]!==o?(r=o&&d("PolarisIsLoggedIn").isLoggedIn()&&j.jsx("div",{children:j.jsx(c("PolarisSwitchAccountsModalLazy.react"),{})}),e[10]=o,e[11]=r):r=e[11];e[12]===Symbol["for"]("react.memo_cache_sentinel")?(o=j.jsx(c("CometErrorBoundary.react"),{children:b("cr:4779")!=null&&d("PolarisCallGatingHelpers").isIncomingCallEnabled()?j.jsx(c("IGWebPreCallProvider.react"),{children:j.jsx(b("cr:4779"),{})}):null}),e[12]=o):o=e[12];var s;e[13]===Symbol["for"]("react.memo_cache_sentinel")?(s=b("cr:3106")&&j.jsx(b("cr:3106"),{}),e[13]=s):s=e[13];var t;e[14]!==i||e[15]!==g||e[16]!==a?(t=d("PolarisConfig").probablyHasApp()&&!i&&b("cr:1609")&&j.jsx("div",{children:j.jsx(b("cr:1609"),{pageID:g,viewer:a})}),e[14]=i,e[15]=g,e[16]=a,e[17]=t):t=e[17];e[18]===Symbol["for"]("react.memo_cache_sentinel")?(i=j.jsx(c("PolarisAppStoreLauncher.react"),{}),g=b("cr:4839")!=null?j.jsx(c("CometPlaceholder.react"),{fallback:null,children:j.jsx(b("cr:4839"),{})}):null,e[18]=i,e[19]=g):(i=e[18],g=e[19]);e[20]!==n||e[21]!==t||e[22]!==q||e[23]!==r?(a=j.jsxs(j.Fragment,{children:[q,f,p,r,o,n,s,t,i,g]}),e[20]=n,e[21]=t,e[22]=q,e[23]=r,e[24]=a):a=e[24];return a}function l(){return j.jsx("div",{})}l.displayName=l.name+" [from "+f.id+"]";function m(a){return a.navigation}g["default"]=a}),98);
__d("RTWebDropInUtils",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";var h="drop_in_metadata";a=function(a){var b;return b={},b[h]=JSON.stringify({is_drop_in:a?"1":"0"}),b};b=function(a){a=i(a);a=a.isDropIn;return a};var i=function(a){a=a==null?void 0:a[h];if(a!=null)try{a=JSON.parse(a);return{isDropIn:a.is_drop_in==="1"}}catch(a){c("FBLogger")("rtc_www").catching(a).warn("Failed to parse drop_in_metadata app message");return{isDropIn:!1}}return{isDropIn:!1}};g.getDropInAppMessages=a;g.isDropInFromAppMessages=b}),98);
__d("ZenonCallWindowOpener_Popup",["UserAgent","ZenonUserActionLogger"],(function(a,b,c,d,e,f,g){"use strict";var h=1280,i={LargeForGroup:{height:772,width:1100},LargeForP2P:{height:720,width:1280},Small:{height:540,width:960}},j=["menubar=no","location=no","scrollbars=no","status=no","personalbar=no"];a=function(){function a(){}var b=a.prototype;b.openWindow=function(a){a=this.$1(a.joinContext);var b=this.$2(a),e=b.left;b=b.top;d("ZenonUserActionLogger").logCheckpoint({checkpoint:"Opening_Popup: left="+e+",top="+b+",width="+a.width+",height="+a.height});var f=c("UserAgent").isBrowser("Safari")?window.location.hostname:"";return window.open(f,"",[].concat(j,["height="+a.height,"width="+a.width,"left="+e,"top="+b]).join(","))};b.$1=function(a){if(screen&&screen.width>h)if(a.type==="link"||a.thread.type===2)return{height:i.LargeForGroup.height,width:i.LargeForGroup.width};else return{height:i.LargeForP2P.height,width:i.LargeForP2P.width};else return{height:i.Small.height,width:i.Small.width}};b.$2=function(a){var b=a.height;a=a.width;return{left:Math.floor(window.innerWidth/2-a/2+((a=window.screenLeft)!=null?a:window.screenX)),top:Math.floor(window.innerHeight/2-b/2+((a=window.screenTop)!=null?a:window.screenY))}};return a}();g["default"]=a}),98);
__d("ZenonCallWindowOpener_iFrame",["ZenonUserActionLogger"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}var b=a.prototype;b.openWindow=function(a){d("ZenonUserActionLogger").logCheckpoint({checkpoint:"Opening_iFrame"});a=document.createElement("iframe");a.setAttribute("data-testid","zenon-call-window");a.frameBorder="0";a.style.width="100%";a.style.height="100vh";a.style.position="fixed";a.style.top="0";a.style.left="0";a.style.zIndex="9999";document.body.appendChild(a);a=a.contentWindow;return a};return a}();g["default"]=a}),98);
__d("RTWebCallWindowOpener",["RTWebDropInUtils","ZenonCallWindowOpener_Popup","ZenonCallWindowOpener_iFrame","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=c("gkx")("15312")?new(c("ZenonCallWindowOpener_iFrame"))():new(c("ZenonCallWindowOpener_Popup"))()}var b=a.prototype;b.openWindow=function(a){if(a.context.intent==="accept invite"&&a.context.controllerParams.appMessages!=null){var b=d("RTWebDropInUtils").isDropInFromAppMessages(a.context.controllerParams.appMessages);if(b)return babelHelpers["extends"]({},window,{close:function(){return null}})}return this.$1.openWindow(a)};return a}();g["default"]=a}),98);
__d("RtcDoorCallingTags",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({OPEN:0,VANISHING:1,SECRET:2,CANVAS:32,LEAD_GEN:128,COPRESENCE:256,CONDUIT:512});c=a;f["default"]=c}),66);
__d("TokenBucketRateLimit",["DateConsts"],(function(a,b,c,d,e,f,g){"use strict";var h=1e3;a=function(){function a(a,b){this.$1=a*h,this.$2=a*h,this.$3=Date.now(),this.$4=b*h}var b=a.prototype;b.take=function(a){a===void 0&&(a=1);a=a*h;this.$5();if(this.$2<a)return!1;this.$2-=a;return!0};b.$5=function(){if(this.$2>=this.$1)return;var a=Date.now(),b=(a-this.$3)/d("DateConsts").MS_PER_SEC;b=Math.round(b*this.$4);if(b===0)return;this.$2=Math.min(this.$1,this.$2+b);this.$3=a};return a}();g["default"]=a}),98);
__d("WebAssemblyMemorySingleton",[],(function(a,b,c,d,e,f){"use strict";var g=64*1024;c=5701632;d=45*g;var h=c+d,i=null,j=0,k=0;function a(){i==null&&(i=new WebAssembly.Memory({initial:h/g,maximum:2147483648/g}),j=h);return i}function b(){if(i!=null){var a=i.buffer.byteLength;a!==j&&(k++,j=a)}return{memory_reallocation_count:k,memory_size_kb:j/1024}}e={INITIAL_MEMORY_ALLOCATED_IN_BYTES:h,get:a,getMetrics:b};f.WebAssemblyMemorySingleton=e}),66);
__d("ZenonCallFalcoEventUtils",["performanceNow"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){return String(Math.trunc(a))};a=function(){return i((h||(h=c("performanceNow")))())};b=function(a){return i(a!=null?a:0)};d=function(a){return a==null?null:i(a!=null?a:0)};e=function(a){return a!=null?a:""};g.truncateNumber=i;g.performanceNowParsed=a;g.nonNullIntNumber=b;g.intNumberOrNull=d;g.nonNullString=e}),98);
__d("ZenonCallInfoManager",["ZenonDeviceId"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=a.callTrigger,c=a.conferenceName,e=a.isCaller,f=a.isVideo,g=a.localCallID,h=a.peerID,i=a.protocol,j=a.serverInfoData;a=a.signalingID;var k=d("ZenonDeviceId").getZenonLocalStorageDeviceIdWithFallback();b={callTrigger:b!=null?b:"",conferenceName:c!=null?c:"",deviceID:k,isCaller:e,isVideo:f,localCallID:g,peerID:h,protocol:i,signalingID:a};this.$1=babelHelpers["extends"]({},b,{serverInfoData:j})}var b=a.prototype;b.setDeviceID=function(a){this.$1.deviceID=a};b.setLocalCallID=function(a){this.$1.localCallID=a};b.setSharedCallId=function(a){this.$1.serverInfoData=a};b.setSignalingID=function(a){this.$1.signalingID=a};b.getCallInfo=function(){return this.$1};return a}();g["default"]=a}),98);
__d("ZenonCallInviteModelTypes",[],(function(a,b,c,d,e,f){"use strict";a={missed:"missed",ringing:"ringing",unsupported_browser:"unsupported_browser"};f.CallInviteModelType=a}),66);
__d("ZenonCallInviteModel",["BaseEventEmitter","FBLogger","ZenonCallInviteModelTypes","ZenonIncomingRingSDKTypes"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var e;e=a.call(this)||this;e.$ZenonCallInviteModel$p_2=function(a){c("FBLogger")("rtc_www").info("Received cancel for: ",a.ringID);if(e.__currentRequest&&e.__currentRequest.model&&e.__currentRequest.model.ringID===a.ringID)switch(a.reason){case d("ZenonIncomingRingSDKTypes").ZenonCancelReason.Hangup:a=((a=e.__currentRequest)==null?void 0:(a=a.model)==null?void 0:a.type)!==d("ZenonCallInviteModelTypes").CallInviteModelType.unsupported_browser;e.__currentRequest.model=babelHelpers["extends"]({},e.__currentRequest.model,{type:"missed"});a&&e.emit("callInvite",e.__currentRequest.model);break;case d("ZenonIncomingRingSDKTypes").ZenonCancelReason.OtherDismiss:e.dismiss();break}};e.$ZenonCallInviteModel$p_1=function(a){var b;c("FBLogger")("rtc_www").info("Receiving ring: ",a.ringID);if(((b=e.__currentRequest)==null?void 0:(b=b.model)==null?void 0:b.type)==="ringing")return;e.__currentRequest={model:{actorID:a.actorID,context:a.context,controllerParams:a.controllerParams,inviterID:a.inviterID,isE2eeMandated:a.isE2eeMandated,participants:a.otherParticipants,receiverUserId:a.receiverUserId,requestingVideo:a.requestingVideo,ringID:a.ringID,ringRequest:a.ringRequest,type:a.isClientPermissableRing?"ringing":"unsupported_browser"},ringPayload:a};e.emit("callInvite",e.__currentRequest.model);a.isClientPermissableRing||a.onDecline("VersionUnsupported")};e.__eventSource=b;e.__currentRequest=null;return e}var e=b.prototype;e.getCurrentInvite=function(){var a;return(a=(a=this.__currentRequest)==null?void 0:a.model)!=null?a:null};e.startListening=function(a){a=a.callsBlocked;this.__currentRequest&&this.dismiss();this.stopListening();a||(this.__eventSource.addListener("incomingRing",this.$ZenonCallInviteModel$p_1),this.__eventSource.addListener("ringCancel",this.$ZenonCallInviteModel$p_2))};e.stopListening=function(){this.__eventSource.removeAllListeners("incomingRing"),this.__eventSource.removeAllListeners("ringCancel"),this.__currentRequest=null};e.dismiss=function(){var a;c("FBLogger")("rtc_www").info("Dismissing ring: ",(a=this.__currentRequest)==null?void 0:(a=a.model)==null?void 0:a.ringID);this.__currentRequest=null;this.emit("callInvite",null)};e.accept=function(a,b){var d=this.__currentRequest;if(d){var e;c("FBLogger")("rtc_www").info("Accepting ring: ",(e=d.model)==null?void 0:e.ringID);((e=d.model)==null?void 0:e.type)==="ringing"&&d.ringPayload.onAccept(a,b);this.dismiss()}};e.decline=function(a,b){a===void 0&&(a="IgnoreCall");var d=this.__currentRequest;if(d){var e;c("FBLogger")("rtc_www").info("Declining ring: ",(e=d.model)==null?void 0:e.ringID);d.ringPayload.onDecline(a,b);this.dismiss();return}};return b}(c("BaseEventEmitter"));g["default"]=a}),98);
__d("ZenonLogPromiseRejection",["FBLogger","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b===void 0&&(b=!1);return a["catch"](function(a){c("FBLogger")("rtc_www").catching(a).debug(a.message);if(b&&c("gkx")("1083"))throw a})}g["default"]=a}),98);
__d("ZenonCallLogger",["Promise","ZenonAuditedCheckpointLogId","ZenonInfraActionsLogger","ZenonLogPromiseRejection","isEmployeeTestUserZenonLogging","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Set(["mwMessageSent","mwThriftMessageSent","mwMessageRecv","mwThriftMessageRecv","setMediaStats","updateE2EEStats","updateIceInfo","setRemoteSdpOffer"]),j=new Set(["atLeastOneParticipantAlerted","atLeastOneParticipantAnswered"]);a=function(){function a(a){var b=this,c=a.config,d=a.initLoggerInfo,e=a.isE2eeMandated;a=a.processorConfigs;this.$5=[];this.$6=new Set();this.$1=d;this.$2=c;this.$3=e;this.$4={clientSessionID:d.signalingID,localCallID:d.localCallID,peerID:d.peerID,sharedCallID:d.serverInfoData};a.forEach(function(a){b.addLogProcessor(a)})}var d=a.prototype;d.addLogProcessor=function(a){var b=this;this.$5.push(new a.LogProcessor({config:this.$2,data:this.$1,isE2eeMandated:this.$3,updateLogIdentifiers:function(a){return b.updateLogIdentifiers(a)}}))};d.updateLogIdentifiers=function(a){Object.assign(this.$4,a),this.log({logIdentifiers:a,name:"updateLogIdentifiers"})};d.log=function(a){if(j.has(a.name)&&this.$6.has(a.name))return;this.$6.add(a.name);this.$7(a);c("promiseDone")(this.logToProcessors(a))};d.logToProcessors=function(a){return c("ZenonLogPromiseRejection")((h||(h=b("Promise"))).all(this.$5.map(function(b){return b.processEvent(a)})).then(function(){}))};d.$7=function(a){if(!c("isEmployeeTestUserZenonLogging")())return;if(i.has(a.name))return;c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"[ZP] ZenonCallLogger event: "+a.name})};d.getLogIdentifiers=function(){return this.$4};return a}();g["default"]=a}),98);
__d("ZenonCallWindowController",["FBLogger","Promise","ZenonCallWindowErrors"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a,b){var c=b.callWindowInitializerResource,d=b.callWindowOpener;b=b.uriBuilderResource;this.$2=null;this.$3=!1;this.$5=null;this.$1=a;this.$7=b;this.$4=c;this.$6=d}var e=a.prototype;e.initCall=function(a){var e=this;if(this.$3)throw new(d("ZenonCallWindowErrors").OpeningAnotherCallError)();try{if(this.$2&&!this.$2.closed&&a.joinContext.type==="thread"&&this.$2.inCallWith===a.joinContext.thread.id){this.$2.focus();return[this.$2,(h||(h=b("Promise"))).resolve({alohaEscalatedMW:!1})]}}catch(a){c("FBLogger")("rtc_www").catching(a).warn("Failed to access inCallWith on call window")}var f=this.$6.openWindow(a);try{this.$2&&(this.$2.closed||this.$2.close(),this.$2=null)}catch(a){c("FBLogger")("rtc_www").catching(a).warn("Failed to access close on call window")}this.$2=f;this.$3=!0;return[f,(h||(h=b("Promise"))).all([this.$7.load(),this.$4.load()]).then(function(b){var c=b[0];b=b[1];e.$5===null&&(e.$5=new b(e.$1,new c(e.$1)));return e.$5.initCall(e.$2,a)})["finally"](function(){e.$3=!1})]};return a}();g["default"]=a}),98);
__d("ZenonClientPerfQPLConstants",[],(function(a,b,c,d,e,f){"use strict";a="zenon_popup_opened";b="zenon_call_join_request";c="zenon_sfu_e2ee_negotiation_complete";d="csm_outgoing_start";e="csm_incoming_connection_started";var g="csm_invite_sent",h="csm_invite_ack_recv",i="csm_answer_recv",j="csm_answer_sdp_recv",k="csm_pranswer_sdp_recv",l="csm_offer_sdp_recv",m="csm_answer_sent",n="csm_negotiation_complete",o="csm_network_ready",p="csm_connection_ready",q="csm_dismiss_sent",r="csm_dismiss_recv",s="media_first_audio_packet",t="media_first_audio_packet_sent",u="media_first_video_packet",v="media_first_video_packet_sent",w="media_peer_connection_factory_created",x="signaling_mw_join_req_sent",y="signaling_mw_join_response_recv";f.POINT_ZENON_POPUP_OPENED=a;f.POINT_ZENON_CALL_JOIN_REQUEST=b;f.POINT_ZENON_SFU_E2EE_NEGOTIATION_COMPLETE=c;f.POINT_CONNECTION_OUTGOING_START=d;f.POINT_CONNECTION_INCOMING_CONNECTION_STARTED=e;f.POINT_CONNECTION_INVITE_SENT=g;f.POINT_CONNECTION_INVITE_ACK_RECV=h;f.POINT_CONNECTION_ANSWER_RECV=i;f.POINT_CONNECTION_ANSWER_SDP_RECV=j;f.POINT_CONNECTION_PRANSWER_SDP_RECV=k;f.POINT_CONNECTION_OFFER_SDP_RECV=l;f.POINT_CONNECTION_ANSWER_SENT=m;f.POINT_CONNECTION_NEGOTIATION_COMPLETE=n;f.POINT_CONNECTION_NETWORK_READY=o;f.POINT_CONNECTION_READY=p;f.POINT_CONNECTION_DISMISS_SENT=q;f.POINT_CONNECTION_DISMISS_RECV=r;f.POINT_MEDIA_FIRST_AUDIO_PACKET=s;f.POINT_MEDIA_FIRST_AUDIO_PACKET_SENT=t;f.POINT_MEDIA_FIRST_VIDEO_PACKET=u;f.POINT_MEDIA_FIRST_VIDEO_PACKET_SENT=v;f.POINT_MEDIA_PEER_CONNECTION_FACTORY_CREATED=w;f.POINT_SIGNALING_MW_JOIN_REQ_SENT=x;f.POINT_SIGNALING_MW_JOIN_RESPONSE_RECV=y}),66);
__d("ZenonCollisionContext",["RtcDoorCallingTags"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var c=null;a.groupThreadID!=null?c={e2eeThreadID:a.groupThreadID,id:a.groupThreadID,type:b?16:2}:a.peerID!=null&&(c={id:a.peerID,secureOneToOneThreadPeerId:b?a.peerID:void 0,type:b?15:1});return c}function b(a){var b=a.call_trigger,d=a.callable_post_id,e=a.calling_tags,f=a.conference_name,g=a.group_thread_id,h=a.ig_thread_id,i=a.immersive_mode_door_id,j=a.is_meta_ai_call,k=a.link_url,l=a.live_broadcast_id,m=a.meeting_id,n=a.peer_id,o=a.rtc_door_id;a=a.server_info_data;return{callablePostID:d,callingTags:c("RtcDoorCallingTags").cast(e),callTrigger:b,conferenceName:f,groupThreadID:g,igThreadID:h,immersiveModeDoorID:i,isMetaAiCall:j,linkUrl:k,liveBroadcastID:l,meetingID:m,peerID:n,rtcDoorID:o,serverInfoData:a}}function d(a){a===void 0&&(a={});return!Object.values(a).some(function(a){return a!=null})}g.getThreadIDAndTypeFromCollisionContext=a;g.fromRTCJoiningContext=b;g.isCollisionContextEmpty=d}),98);
__d("ZenonDeviceInfoHelper",["asyncToGeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";var g=-1,h=!1,i={getBatteryStats:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield i.internalGetWindow().navigator.getBattery);if(typeof a!=="function")return{level:g,placeholder:!0,wasCharged:!1};a=(yield a.call(navigator));a.charging?h=!0:a.onchargingchange=function(a){a.target.charging&&(h=!0),a.target.onchargingchange=null};return{level:a.level*100,placeholder:!1,wasCharged:h}});function c(){return a.apply(this,arguments)}return c}(),internalGetWindow:function(){return window}};a=i;f["default"]=a}),66);
__d("ZenonE2eeMandatedStateManager",["$InternalEnum","E2eeStateTypes","MultiwaySharedTypes","ZenonActorHooks","qex"],(function(a,b,c,d,e,f,g){"use strict";var h=b("$InternalEnum").Mirrored(["NONE","ONLY_INFRA_MANDATED_EXP_CONTROL","ONLY_INFRA_MANDATED_EXP_TEST","INFRA_AND_PRODUCT_MANDATED"]),i=null,j=function(){function a(){this.$1=h.NONE}var b=a.prototype;b.processE2eeMandatedStateFromProductAndRing=function(a,b){this.$1=this.$2(a,b)};b.areBothInfraAndProductE2eeMandated=function(){return this.$1===h.INFRA_AND_PRODUCT_MANDATED};b.isInfraE2eeMandated=function(){return this.areBothInfraAndProductE2eeMandated()||this.$3()};b.$3=function(){return this.$1===h.ONLY_INFRA_MANDATED_EXP_TEST};b.processE2eeMandatedStateFromE2eeServerUpdate=function(a){if(this.areBothInfraAndProductE2eeMandated())return;if(a===d("E2eeStateTypes").InfraMandatedExpStatus.TEST&&this.$1===h.ONLY_INFRA_MANDATED_EXP_TEST)return;if(a===d("E2eeStateTypes").InfraMandatedExpStatus.CONTROL&&this.$1===h.ONLY_INFRA_MANDATED_EXP_CONTROL)return;this.$1=h.NONE};b.isEligibleForE2eeInfraMandatedExperiment=function(){var a;return(a=(a=c("qex")._("138"))!=null?a:c("qex")._("192"))!=null?a:!1};b.isP2pMediaPathPreferredForInfraMandatedExperiment=function(){var a;return this.$3()&&((a=(a=c("qex")._("531"))!=null?a:c("qex")._("532"))!=null?a:!1)};b.getE2eeInfraMandatedExpStatus=function(){switch(this.$1){case h.INFRA_AND_PRODUCT_MANDATED:case h.NONE:return d("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.NOT_SET;case h.ONLY_INFRA_MANDATED_EXP_CONTROL:return d("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.CONTROL;case h.ONLY_INFRA_MANDATED_EXP_TEST:return d("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.TEST}};b.$2=function(a,b){if(a)return h.INFRA_AND_PRODUCT_MANDATED;if(d("ZenonActorHooks").ZenonActor.getAppID()===436761779744620..toString())return h.NONE;if(!this.isEligibleForE2eeInfraMandatedExperiment())return h.NONE;a=this.$4();if(b==null)return a;b=this.$5(b);if(b===h.NONE)return h.NONE;return b===h.ONLY_INFRA_MANDATED_EXP_CONTROL?a===h.ONLY_INFRA_MANDATED_EXP_TEST?h.NONE:h.ONLY_INFRA_MANDATED_EXP_CONTROL:a===h.ONLY_INFRA_MANDATED_EXP_CONTROL?h.NONE:h.ONLY_INFRA_MANDATED_EXP_TEST};b.$4=function(){var a=this.$6();if(a===d("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.TEST)return h.ONLY_INFRA_MANDATED_EXP_TEST;return a===d("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.CONTROL?h.ONLY_INFRA_MANDATED_EXP_CONTROL:h.NONE};b.$6=function(){var a;return(a=c("qex")._("196"))!=null?a:c("qex")._("227")};b.$5=function(a){if(a===d("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.TEST)return h.ONLY_INFRA_MANDATED_EXP_TEST;return a===d("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.CONTROL?h.ONLY_INFRA_MANDATED_EXP_CONTROL:h.NONE};return a}();function a(){i==null&&(i=new j());return i}e=a();g["default"]=e}),98);
__d("ZenonGenericLocalStorageStore",["CacheStorage","WebStorage","ZenonODSLogger","ZenonUserActionLogger","areEqual","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=2e3,k=3;a=function(){function a(a,b,d){this.$1=a,this.$2=new(c("CacheStorage"))(b,d)}var b=a.prototype;b.getLocalStorageObjects=function(){return this.$2.get(this.$1)||{}};b.removeLocalStorageObjects=function(a){this.mutateLocalStorageObjects(function(b){a.forEach(function(a){var c=a.peerID;a=a.signalingID;b[c]&&b[c][a]&&(delete b[c][a],Object.entries(b[c]).length===0&&delete b[c])});return b})};b.mutateLocalStorageObjects=function(a,b,d,e){var f=this;b===void 0&&(b=k);d===void 0&&(d=!1);e===void 0&&(e=null);var g=this.getLocalStorageObjects(),i=this.getLocalStorageObjects();g=a(g);var l=this.getLocalStorageObjects();(h||(h=c("areEqual")))(i,l)?(this.$2.set(this.$1,g),this.logStorageError(this.$2.getLastSetException(),e)):b>0&&(d?c("setTimeout")(function(){f.mutateLocalStorageObjects(a,b-1,!0)},j):this.mutateLocalStorageObjects(a,b-1,!0))};b.logStorageError=function(a,b){a!=null&&(d("ZenonUserActionLogger").logError({call_id:b==null?void 0:b.signalingID,error_domain:"ZenonGenericLocalStorageStore_storeLocalStorageObjects",error_type:a.name,peer_id:b==null?void 0:b.peerID}),(i||(i=c("WebStorage"))).isLocalStorageQuotaExceeded()&&c("ZenonODSLogger").logCounter("local_storage_quota_exceeded"))};return a}();g["default"]=a}),98);
__d("ZenonLSCallStartEventManager",["ZenonCallFalcoEventUtils","ZenonCallInfoManager","ZenonPeerID"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$ZenonLSCallStartEventManager$p_1={},c.$ZenonLSCallStartEventManager$p_2=!1,c.$ZenonLSCallStartEventManager$p_3=!1,b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.updateEventTimestamp=function(a){this.$ZenonLSCallStartEventManager$p_1[a]==null&&(this.$ZenonLSCallStartEventManager$p_1[a]=d("ZenonCallFalcoEventUtils").performanceNowParsed())};c.receivedFromInvite=function(){this.$ZenonLSCallStartEventManager$p_2=!0};c.receivedFromServer=function(){this.$ZenonLSCallStartEventManager$p_3=!0};c.getStartEventData=function(){var a=this.getCallInfo();a=a.signalingID;var b=babelHelpers["extends"]({},this.getTimestamps(),{},this.$ZenonLSCallStartEventManager$p_4());a!==""&&(b.local_signaling_id=a);return b};c.$ZenonLSCallStartEventManager$p_4=function(){var a=this.getCallInfo(),b=a.deviceID,c=a.localCallID,e=a.peerID,f=a.serverInfoData;a=a.signalingID;return babelHelpers["extends"]({connection_logging_id:a,local_call_id:c,peer_id:d("ZenonPeerID").convertPeerIDForLogging(e),protocol:"multiway"},f!=null&&{shared_call_id:f},{steady_time_ms:d("ZenonCallFalcoEventUtils").performanceNowParsed(),system_time_ms:String(Date.now()),web_device_id:b})};c.getTimestamps=function(){return this.$ZenonLSCallStartEventManager$p_1};c.save=function(a){var b=this.getCallInfo(),c=b.peerID;b=b.signalingID;a.storeCallStartEventManager(c,b,this)};c["delete"]=function(a){var b=this.getCallInfo(),c=b.peerID;b=b.signalingID;a.removeLocalStorageObjects([{peerID:c,signalingID:b}])};c.toJsonString=function(){var a=this.getCallInfo(),b=a.signalingID;a={callInfo:a,connectionLoggingId:b,receivedFromInvite:this.$ZenonLSCallStartEventManager$p_2,receivedFromServer:this.$ZenonLSCallStartEventManager$p_3,timestamps:this.getTimestamps()};return JSON.stringify(a)};b.fromJsonString=function(a){var c;try{c=JSON.parse(a)}catch(a){return null}a=c.callInfo;a.deviceID;a=babelHelpers.objectWithoutPropertiesLoose(a,["deviceID"]);a=new b(a);a.$ZenonLSCallStartEventManager$p_2=c.receivedFromInvite;a.$ZenonLSCallStartEventManager$p_3=c.receivedFromServer;a.$ZenonLSCallStartEventManager$p_1=c.timestamps;return a};return b}(c("ZenonCallInfoManager"));g["default"]=a}),98);
__d("ZenonLSCallStartEventStore",["ZenonGenericLocalStorageStore","ZenonLSCallStartEventManager"],(function(a,b,c,d,e,f,g){"use strict";var h="localstorage",i="RTC_LS_CALL_START_",j="ls_call_start",k=3;a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,j,h,i)||this}var d=b.prototype;d.retrieveCallStartEventManager=function(a,b){var d=this.getLocalStorageObjects();d=d[a]?d[a][b]:null;if(d)return c("ZenonLSCallStartEventManager").fromJsonString(d.__d);else return null};d.storeCallStartEventManager=function(a,b,c){this.mutateLocalStorageObjects(function(d){d[a]||(d[a]={});d[a][b]={__d:c.toJsonString(),__t:Date.now(),__z:!0};return d},k,!1,{peerID:a,signalingID:b})};return b}(c("ZenonGenericLocalStorageStore"));b=new a();g.ZenonLSCallStartEventStoreInstance=b}),98);
__d("ZenonLoggingEventTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["Send","Receive"]);c=b("$InternalEnum")({Primary:"primary",Secondary:"secondary"});d="rtc_www";f.ZenonUpdateIceInfoDirection=a;f.ZenonJoinMode=c;f.tslogSource=d}),66);
__d("ZenonLSCallSummary",["ZenonCallFalcoEventUtils","ZenonCallInfoManager","ZenonDeviceInfoHelper","ZenonDismissReason","ZenonLoggingEventTypes","ZenonPeerID","asyncToGeneratorRuntime","performanceNow","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a){babelHelpers.inheritsLoose(e,a);function e(b){var e;e=a.call(this,b)||this;e.$ZenonLSCallSummary$p_1={call_answered_time:"-1",call_connected_time:"-1",call_created_time:"-1",call_ended_time:"-1",last_updated_time:"-1"};e.$ZenonLSCallSummary$p_2=!1;e.$ZenonLSCallSummary$p_3=null;e.$ZenonLSCallSummary$p_6=null;e.$ZenonLSCallSummary$p_8=null;e.$ZenonLSCallSummary$p_9=null;e.$ZenonLSCallSummary$p_10=null;e.$ZenonLSCallSummary$p_11=null;e.$ZenonLSCallSummary$p_15=null;e.$ZenonLSCallSummary$p_19=!1;e.$ZenonLSCallSummary$p_12=b.callTrigger;e.$ZenonLSCallSummary$p_7=b.isVideo;e.$ZenonLSCallSummary$p_4=0;e.$ZenonLSCallSummary$p_14=(b=b.joinMode)!=null?b:d("ZenonLoggingEventTypes").ZenonJoinMode.Primary;e.$ZenonLSCallSummary$p_5=(h||(h=c("performanceNow")))();e.setTimestamp("call_created_time");e.updateLastUpdatedTime();c("promiseDone")(e.updateBatteryStart());return e}var f=e.prototype;f.setTimestamp=function(a){if(this.$ZenonLSCallSummary$p_1[a]!=="-1")return;this.$ZenonLSCallSummary$p_1[a]=String(this.$ZenonLSCallSummary$p_20())};f.getTimestamps=function(){return this.$ZenonLSCallSummary$p_1};f.getExtraInfo=function(){var a={};this.$ZenonLSCallSummary$p_9!=null&&!isNaN(this.$ZenonLSCallSummary$p_9)&&(a.battery_end_level=String(this.$ZenonLSCallSummary$p_9));this.$ZenonLSCallSummary$p_8!=null&&!isNaN(this.$ZenonLSCallSummary$p_8)&&(a.battery_start_level=String(this.$ZenonLSCallSummary$p_8));this.$ZenonLSCallSummary$p_10!=null&&(a.was_device_charged=this.$ZenonLSCallSummary$p_10);this.$ZenonLSCallSummary$p_11!=null&&(a.max_concurrent_connected_participant=this.$ZenonLSCallSummary$p_11);return a};f.getVideoStats=function(){var a={};if(this.$ZenonLSCallSummary$p_6!=null){var b;isNaN(this.$ZenonLSCallSummary$p_6.ld)||(a.local_video_duration=String(this.$ZenonLSCallSummary$p_6.ld));if(!isNaN((b=this.$ZenonLSCallSummary$p_6)==null?void 0:b.rd)){a.remote_video_duration=String((b=(b=this.$ZenonLSCallSummary$p_6)==null?void 0:b.rd)!=null?b:0)}}return a};f.getEndCallStats=function(){var a={};this.$ZenonLSCallSummary$p_16!=null&&(a.end_call_reason=d("ZenonDismissReason").dismissToEndCallReason(this.$ZenonLSCallSummary$p_16));this.$ZenonLSCallSummary$p_17!=null&&(a.end_call_subreason=this.$ZenonLSCallSummary$p_17);this.$ZenonLSCallSummary$p_19!=null&&(a.remote_ended=this.$ZenonLSCallSummary$p_19);if(this.$ZenonLSCallSummary$p_3!=null){var b;a.is_connected_end=(b=this.$ZenonLSCallSummary$p_21())!=null?b:!1}return a};f.getLoggingArgs=function(){var a=this.getCallInfo(),b=a.deviceID,c=a.peerID,e=a.serverInfoData;a=a.signalingID;return{call_id:a,conf_name:(a=this.$ZenonLSCallSummary$p_13)!=null?a:"",peer_id:d("ZenonPeerID").convertPeerIDForLogging(c),serv_info:e!=null?e:"",web_device_id:b}};f.getSummaryLoggingInfo=function(){var a=this.getCallInfo(),b=a.deviceID,c=a.isCaller,e=a.localCallID,f=a.peerID,g=a.serverInfoData;a=a.signalingID;return babelHelpers["extends"]({},this.getTimestamps(),{},this.getExtraInfo(),{},this.getVideoStats(),{},this.getEndCallStats(),{},g!=null&&{shared_call_id:g},{call_trigger:(g=this.$ZenonLSCallSummary$p_12)!=null?g:"",client_session_id:a==null?null:String(a),invite_requested_video:this.$ZenonLSCallSummary$p_7,is_caller:c,join_mode:String(this.$ZenonLSCallSummary$p_14),local_call_id:e,peer_id:d("ZenonPeerID").convertPeerIDForLogging(f),rtc_actor_id:this.$ZenonLSCallSummary$p_15,steady_time:d("ZenonCallFalcoEventUtils").performanceNowParsed(),system_time:String(Date.now()),web_device_id:b})};f.onCallEscalated=function(){this.updateLastUpdatedTime()};f.onCallAccepted=function(a){this.$ZenonLSCallSummary$p_12=a,this.setTimestamp("call_answered_time"),this.updateLastUpdatedTime()};f.onCallConnected=function(){this.setTimestamp("call_connected_time"),this.updateLastUpdatedTime()};f.setMediaStats=function(a){this.$ZenonLSCallSummary$p_6=a.video,this.updateLastUpdatedTime()};f.setMaxConnectedParticipants=function(a){this.$ZenonLSCallSummary$p_11=d("ZenonCallFalcoEventUtils").nonNullIntNumber(a),this.updateLastUpdatedTime()};f.setRtcActorID=function(a){this.$ZenonLSCallSummary$p_15=a};f.unsetEndCallFields=function(){this.$ZenonLSCallSummary$p_18===!0&&(this.$ZenonLSCallSummary$p_16=null,this.$ZenonLSCallSummary$p_17=null,this.$ZenonLSCallSummary$p_19=null,this.$ZenonLSCallSummary$p_3=null,this.$ZenonLSCallSummary$p_1.call_ended_time="-1",this.$ZenonLSCallSummary$p_5=0,this.$ZenonLSCallSummary$p_18=null)};f.onCallEnded=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d){this.$ZenonLSCallSummary$p_16=a,this.$ZenonLSCallSummary$p_17=d,this.$ZenonLSCallSummary$p_18=c,this.$ZenonLSCallSummary$p_19=b,this.$ZenonLSCallSummary$p_3==null&&(this.$ZenonLSCallSummary$p_3=this.$ZenonLSCallSummary$p_22()),yield this.updateBatteryEnd(),this.setTimestamp("call_ended_time"),this.updateLastUpdatedTime()});function c(b,c,d,e){return a.apply(this,arguments)}return c}();f.onPCStateChange=function(a){this.$ZenonLSCallSummary$p_2=a,this.updateLastUpdatedTime()};f.updateBatteryStart=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield c("ZenonDeviceInfoHelper").getBatteryStats()),b=a.level;a=a.placeholder;a!==!0&&(this.$ZenonLSCallSummary$p_8=parseInt(b,10))});function d(){return a.apply(this,arguments)}return d}();f.updateBatteryEnd=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield c("ZenonDeviceInfoHelper").getBatteryStats()),b=a.level,d=a.placeholder;a=a.wasCharged;d!==!0&&(this.$ZenonLSCallSummary$p_9=parseInt(b,10),this.setDeviceCharged(a))});function d(){return a.apply(this,arguments)}return d}();f.setDeviceCharged=function(a){this.$ZenonLSCallSummary$p_10!==!0&&(this.$ZenonLSCallSummary$p_10=a)};f.setConferenceName=function(a){this.$ZenonLSCallSummary$p_13=a,this.updateLastUpdatedTime()};f.getDeviceCharged=function(){return this.$ZenonLSCallSummary$p_10};e.fromJsonString=function(a){var b;try{b=JSON.parse(a)}catch(a){return null}a=b.callInfo;var c=a.deviceID;a=babelHelpers.objectWithoutPropertiesLoose(a,["deviceID"]);a=new e(a);a.setDeviceID(c);a.$ZenonLSCallSummary$p_1=b.timestamps;a.$ZenonLSCallSummary$p_2=b.pcIsConnected;a.$ZenonLSCallSummary$p_3=b.endIsConnected;a.$ZenonLSCallSummary$p_16=b.endCallReason;a.$ZenonLSCallSummary$p_17=b.endCallSubreason;a.$ZenonLSCallSummary$p_19=b.isRemoteEnded;a.$ZenonLSCallSummary$p_7=b.isVideo;a.$ZenonLSCallSummary$p_15=(c=b.rtcActorID)!=null?c:null;a.$ZenonLSCallSummary$p_6={ld:parseInt(b.videoStats.local_video_duration,10),rd:parseInt(b.videoStats.remote_video_duration,10)};a.$ZenonLSCallSummary$p_8=parseInt(b.extraInfo.battery_start_level,10);a.$ZenonLSCallSummary$p_9=parseInt(b.extraInfo.battery_end_level,10);b.extraInfo.was_device_charged!=null&&(a.$ZenonLSCallSummary$p_10=b.extraInfo.was_device_charged);b.extraInfo.max_concurrent_connected_participant!=null&&(a.$ZenonLSCallSummary$p_11=b.extraInfo.max_concurrent_connected_participant);b.unsetOnRetrieve!=null&&(a.$ZenonLSCallSummary$p_18=b.unsetOnRetrieve);b.accumulatedCallTime!=null&&(a.$ZenonLSCallSummary$p_4=b.accumulatedCallTime);b.conferenceName!=null&&(a.$ZenonLSCallSummary$p_13=b.conferenceName);return a};f.toJsonString=function(){var a={accumulatedCallTime:this.$ZenonLSCallSummary$p_20(),callInfo:this.getCallInfo(),conferenceName:this.$ZenonLSCallSummary$p_13,endCallReason:this.$ZenonLSCallSummary$p_16,endCallSubreason:this.$ZenonLSCallSummary$p_17,endIsConnected:this.$ZenonLSCallSummary$p_21(),extraInfo:this.getExtraInfo(),isRemoteEnded:this.$ZenonLSCallSummary$p_19,isVideo:this.$ZenonLSCallSummary$p_7,joinMode:this.$ZenonLSCallSummary$p_14,pcIsConnected:this.$ZenonLSCallSummary$p_22(),rtcActorID:this.$ZenonLSCallSummary$p_15,timestamps:this.getTimestamps(),unsetOnRetrieve:this.$ZenonLSCallSummary$p_18,videoStats:this.getVideoStats()};return JSON.stringify(a)};f.$ZenonLSCallSummary$p_20=function(){var a=(h||(h=c("performanceNow")))()-this.$ZenonLSCallSummary$p_5;return Math.floor(this.$ZenonLSCallSummary$p_4+a)};f.$ZenonLSCallSummary$p_21=function(){return this.$ZenonLSCallSummary$p_3==null?null:this.$ZenonLSCallSummary$p_3&&Number(this.$ZenonLSCallSummary$p_11)>1};f.$ZenonLSCallSummary$p_22=function(){return this.$ZenonLSCallSummary$p_2&&Number(this.$ZenonLSCallSummary$p_11)>1};f.updateLastUpdatedTime=function(){this.$ZenonLSCallSummary$p_1.last_updated_time=String(this.$ZenonLSCallSummary$p_20())};f.save=function(a){var b=this.getCallInfo(),c=b.peerID;b=b.signalingID;a.storeCallSummary(c,b,this)};f.remove=function(a){var b=this.getCallInfo(),c=b.peerID;b=b.signalingID;a.removeLocalStorageObjects([{peerID:c,signalingID:b}])};return e}(c("ZenonCallInfoManager"));g["default"]=a}),98);
__d("ZenonLSCallSummaryStore",["ZenonGenericLocalStorageStore","ZenonLSCallSummary"],(function(a,b,c,d,e,f,g){"use strict";var h="localstorage",i="RTC_LS_CALL_SUMMARY_",j="ls_summary",k=3;a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,j,h,i)||this}var d=b.prototype;d.retrieveCallSummary=function(a,b){var d=this.getLocalStorageObjects();d=d[a]?d[a][b]:null;if(d)return c("ZenonLSCallSummary").fromJsonString(d.__d);else return null};d.storeCallSummary=function(a,b,c){this.mutateLocalStorageObjects(function(d){d[a]||(d[a]={});d[a][b]={__d:c.toJsonString(),__t:Date.now(),__z:!0};return d},k,!1,{peerID:a,signalingID:b})};return b}(c("ZenonGenericLocalStorageStore"));b=new a();g.ZenonLSCallSummaryStoreInstance=b}),98);
__d("ZenonLSE2EEStatsManager",["E2eeMetricsSerializers","WebAssemblyMemorySingleton","ZenonCallFalcoEventUtils","ZenonCallInfoManager","ZenonPeerID"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.$ZenonLSE2EEStatsManager$p_1={group_e2ee_metrics:d("E2eeMetricsSerializers").GroupE2eeMetrics$DefaultConstructor(),p2p_e2ee_metrics:d("E2eeMetricsSerializers").P2pE2eeMetrics$DefaultConstructor(),track_specific_e2ee_stats:new Map(),wasm_metrics:d("WebAssemblyMemorySingleton").WebAssemblyMemorySingleton.getMetrics()},b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.updateE2eeStats=function(a){this.$ZenonLSE2EEStatsManager$p_1=a};c.getGroupE2eeMetricsInFalcoShape=function(){var a=this.getCallInfo(),b=a.deviceID,c=a.localCallID;a=a.serverInfoData;return babelHelpers["extends"]({g_e2ee_web_wasm_final_memory_usage_kb:String(this.$ZenonLSE2EEStatsManager$p_1.wasm_metrics.memory_size_kb),g_e2ee_web_wasm_memory_reallocation_count:String(this.$ZenonLSE2EEStatsManager$p_1.wasm_metrics.memory_reallocation_count),local_call_id:c},a!=null&&{shared_call_id:a},{steady_time_ms:d("ZenonCallFalcoEventUtils").performanceNowParsed(),system_time_ms:String(Date.now()),web_device_id:b},this.$ZenonLSE2EEStatsManager$p_1.group_e2ee_metrics)};c.getP2pE2eeMetricsInFalcoShape=function(){var a=this.getCallInfo(),b=a.deviceID,c=a.localCallID,e=a.peerID;a=a.serverInfoData;return babelHelpers["extends"]({local_call_id:c},a!=null&&{shared_call_id:a},{peer_id:d("ZenonPeerID").convertPeerIDForLogging(e),steady_time_ms:d("ZenonCallFalcoEventUtils").performanceNowParsed(),system_time_ms:String(Date.now()),web_device_id:b},this.$ZenonLSE2EEStatsManager$p_1.p2p_e2ee_metrics)};c.save=function(a){var b=this.getCallInfo(),c=b.peerID;b=b.signalingID;a.storeE2eeStats(c,b,this)};c["delete"]=function(a){var b=this.getCallInfo(),c=b.peerID;b=b.signalingID;a.removeLocalStorageObjects([{peerID:c,signalingID:b}])};c.toJsonString=function(){var a={callInfo:this.getCallInfo(),groupE2eeMetrics:this.$ZenonLSE2EEStatsManager$p_1.group_e2ee_metrics,p2pE2eeMetrics:this.$ZenonLSE2EEStatsManager$p_1.p2p_e2ee_metrics,trackSpecificE2eeStatsWithTrackId:Array.from(this.$ZenonLSE2EEStatsManager$p_1.track_specific_e2ee_stats),wasmMetrics:this.$ZenonLSE2EEStatsManager$p_1.wasm_metrics};return JSON.stringify(a)};b.fromJsonString=function(a){var c;try{c=JSON.parse(a)}catch(a){return null}a=c.callInfo;a.deviceID;a=babelHelpers.objectWithoutPropertiesLoose(a,["deviceID"]);a=new b(a);a.$ZenonLSE2EEStatsManager$p_1={group_e2ee_metrics:c.groupE2eeMetrics,p2p_e2ee_metrics:c.p2pE2eeMetrics,track_specific_e2ee_stats:new Map(c.trackSpecificE2eeStatsWithTrackId),wasm_metrics:c.wasmMetrics};return a};return b}(c("ZenonCallInfoManager"));g["default"]=a}),98);
__d("ZenonLSE2EEStore",["ZenonGenericLocalStorageStore","ZenonLSE2EEStatsManager"],(function(a,b,c,d,e,f,g){"use strict";var h="localstorage",i="RTC_LS_E2EE_STATS_",j="ls_e2ee_stats",k=3;a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,j,h,i)||this}var d=b.prototype;d.retrieveE2eeStats=function(a,b){var d=this.getLocalStorageObjects();d=d[a]?d[a][b]:null;if(d)return c("ZenonLSE2EEStatsManager").fromJsonString(d.__d);else return null};d.storeE2eeStats=function(a,b,c){this.mutateLocalStorageObjects(function(d){d[a]||(d[a]={});d[a][b]={__d:c.toJsonString(),__t:Date.now(),__z:!0};return d},k,!1,{peerID:a,signalingID:b})};return b}(c("ZenonGenericLocalStorageStore"));b=new a();g.ZenonLSE2EEStoreInstance=b}),98);
__d("ZenonLSPeerConnectionSummary",["ZenonCallFalcoEventUtils","ZenonCallInfoManager","ZenonIceStatsParser","ZenonLoggingEventTypes","ZenonMWMessageTypes","ZenonPeerID","performanceNow"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){b=a.call(this,b)||this;b.$ZenonLSPeerConnectionSummary$p_1={CoreAudioMetrics:{isstall:"0",voice_detect_pct:[]},CoreVideoMetrics:{screen:{capture_stall:{is_stall:"0"},encode_stall:{is_stall:"0"},sent_stall:{is_stall:"0"}},video:{capture_stall:{is_stall:"0"},encode_stall:{is_stall:"0"},sent_stall:{is_stall:"0"}}},DebugAudioMetrics:{NetworkReceive:{}},audio:{echo_confidence:{}},dataChannelMetrics:{},ecv:{},extraInfo:{},receiver:{},receiver_pct:{audio:{}},receiver_stalls:{screen_recv_stalls:{recv_decode_stall:{is_stall:"0"},recv_no_bytes_stall:{is_stall:"0"},recv_render_stall:{is_stall:"0"}},video_recv_stalls:{recv_decode_stall:{is_stall:"0"},recv_no_bytes_stall:{is_stall:"0"},recv_render_stall:{is_stall:"0"}}},sender:{},sender_pct:{screen:{},video:{}},video:{}};b.$ZenonLSPeerConnectionSummary$p_2={};b.$ZenonLSPeerConnectionSummary$p_3={};b.$ZenonLSPeerConnectionSummary$p_5=-1;b.$ZenonLSPeerConnectionSummary$p_8=null;b.$ZenonLSPeerConnectionSummary$p_9=new Map();b.$ZenonLSPeerConnectionSummary$p_10="unknown";b.$ZenonLSPeerConnectionSummary$p_6=(h||(h=c("performanceNow")))();b.$ZenonLSPeerConnectionSummary$p_4=0;b.$ZenonLSPeerConnectionSummary$p_7=null;return b}var e=b.prototype;e.$ZenonLSPeerConnectionSummary$p_11=function(){var a,b=this,c="",e=0,f=0,g=0,h=0;Object.keys((a=this.$ZenonLSPeerConnectionSummary$p_1.dataChannelMetrics)!=null?a:{}).forEach(function(a){a=b.$ZenonLSPeerConnectionSummary$p_1.dataChannelMetrics[a];if(a==null)return;c+=a.label+":"+a.bytes_sent+":"+a.bytes_received+":"+a.messages_sent+":"+a.messages_received+",";e+=Number(a.bytes_sent);f+=Number(a.bytes_received);g+=Number(a.messages_sent);h+=Number(a.messages_received)});return{data_channel_total_bytes_recv:d("ZenonCallFalcoEventUtils").nonNullIntNumber(f),data_channel_total_bytes_sent:d("ZenonCallFalcoEventUtils").nonNullIntNumber(e),data_channel_total_msg_recv:d("ZenonCallFalcoEventUtils").nonNullIntNumber(h),data_channel_total_msg_sent:d("ZenonCallFalcoEventUtils").nonNullIntNumber(g),data_channel_type:"SCTP",sctp_per_channel_stats_raw:c}};e.$ZenonLSPeerConnectionSummary$p_12=function(){var a=this.$ZenonLSPeerConnectionSummary$p_1.sender,b=a.codec;b=b===void 0?{}:b;var c={gen0_ice_sent_host:d("ZenonCallFalcoEventUtils").nonNullIntNumber(this.$ZenonLSPeerConnectionSummary$p_2.host),gen0_ice_sent_relay:d("ZenonCallFalcoEventUtils").nonNullIntNumber(this.$ZenonLSPeerConnectionSummary$p_2.relay),gen0_ice_sent_srflx:d("ZenonCallFalcoEventUtils").nonNullIntNumber(this.$ZenonLSPeerConnectionSummary$p_2.srflx)};b=b.www;b!=null&&(c.audio_send_codec=String(b));this.$ZenonLSPeerConnectionSummary$p_13(c,"audio_send_bytes_sent",a.bytes);this.$ZenonLSPeerConnectionSummary$p_13(c,"audio_send_level_count",a.taulc);this.$ZenonLSPeerConnectionSummary$p_13(c,"audio_send_level_sum",a.tx_sum_lvl);this.$ZenonLSPeerConnectionSummary$p_13(c,"audio_send_packets_sent",a.psent);this.$ZenonLSPeerConnectionSummary$p_13(c,"avg_video_uplink_bandwidth_estimate",a.ube_avg);this.$ZenonLSPeerConnectionSummary$p_13(c,"transport_conn_rtt_avg",a.avgrtt);return c};e.$ZenonLSPeerConnectionSummary$p_13=function(a,b,c){c!=null&&(a[b]=d("ZenonCallFalcoEventUtils").truncateNumber(c))};e.$ZenonLSPeerConnectionSummary$p_14=function(){var a,b,c;a=(a=this.$ZenonLSPeerConnectionSummary$p_1.video.sender)==null?void 0:a.ss;b=(b=a==null?void 0:a.frames)!=null?b:0;c=(c=a==null?void 0:a.eqps)!=null?c:0;c=b>0&&c>0?c/b:null;b={};this.$ZenonLSPeerConnectionSummary$p_15(b,"avg_video_actual_encode_bitrate_ss",a==null?void 0:a.avbr);this.$ZenonLSPeerConnectionSummary$p_15(b,"avg_video_uplink_bandwidth_estimate_ss",a==null?void 0:a.avbw);this.$ZenonLSPeerConnectionSummary$p_15(b,"video_send_duration_ss",a==null?void 0:a.dur);this.$ZenonLSPeerConnectionSummary$p_15(b,"video_send_frames_send_to_encoder_ss",a==null?void 0:a.eiframes);this.$ZenonLSPeerConnectionSummary$p_15(b,"video_send_total_input_pixel_ss",a==null?void 0:a.video_sum_capture_pixel);this.$ZenonLSPeerConnectionSummary$p_15(b,"video_send_total_output_pixel_ss",a==null?void 0:a.video_sum_encoded_pixel);this.$ZenonLSPeerConnectionSummary$p_15(b,"video_send_frames_encoded_ss",a==null?void 0:a.frames);this.$ZenonLSPeerConnectionSummary$p_15(b,"video_send_qp_sum_ss",c);return b};e.$ZenonLSPeerConnectionSummary$p_15=function(a,b,c){c!=null&&(a[b]=d("ZenonCallFalcoEventUtils").truncateNumber(c))};e.$ZenonLSPeerConnectionSummary$p_16=function(){var a=this.$ZenonLSPeerConnectionSummary$p_1.video.bwe,b={};this.$ZenonLSPeerConnectionSummary$p_17(b,"avg_video_actual_encode_bitrate",a==null?void 0:a.avg_enc_bitrate);this.$ZenonLSPeerConnectionSummary$p_17(b,"avg_video_actual_encode_bitrate_ss",a==null?void 0:a.avg_enc_bitrate_ss);this.$ZenonLSPeerConnectionSummary$p_17(b,"avg_video_retransmit_bitrate",a==null?void 0:a.avg_retrans_bitrate);this.$ZenonLSPeerConnectionSummary$p_17(b,"avg_video_transmit_bitrate",a==null?void 0:a.avg_trans_bitrate);this.$ZenonLSPeerConnectionSummary$p_17(b,"avg_video_uplink_bandwidth_estimate",a==null?void 0:a.avg_send_bw);return b};e.$ZenonLSPeerConnectionSummary$p_17=function(a,b,c){c!=null&&(a[b]=d("ZenonCallFalcoEventUtils").truncateNumber(c))};e.$ZenonLSPeerConnectionSummary$p_18=function(){var a;a=(a=this.$ZenonLSPeerConnectionSummary$p_1.sender_pct.video)==null?void 0:a.vqs;var b={};(a==null?void 0:a.avg)!=null&&(b.video_send_quality_score=d("ZenonCallFalcoEventUtils").truncateNumber(a==null?void 0:a.avg));return b};e.$ZenonLSPeerConnectionSummary$p_19=function(){var a=this.$ZenonLSPeerConnectionSummary$p_1.video.sender,b={video_send_codec:a==null?void 0:a.ename};this.$ZenonLSPeerConnectionSummary$p_20(b,"video_recv_firs_sent",a==null?void 0:a.fir);this.$ZenonLSPeerConnectionSummary$p_20(b,"video_recv_nacks_sent",a==null?void 0:a.nack);this.$ZenonLSPeerConnectionSummary$p_20(b,"video_recv_plis_sent",a==null?void 0:a.pli);this.$ZenonLSPeerConnectionSummary$p_20(b,"video_send_frame_height",a==null?void 0:a.ah);this.$ZenonLSPeerConnectionSummary$p_20(b,"video_send_frame_height_input",a==null?void 0:a.ch);this.$ZenonLSPeerConnectionSummary$p_20(b,"video_send_frame_width",a==null?void 0:a.aw);this.$ZenonLSPeerConnectionSummary$p_20(b,"video_send_frame_width_input",a==null?void 0:a.cw);this.$ZenonLSPeerConnectionSummary$p_20(b,"video_send_frames_captured",a==null?void 0:a.fcap);this.$ZenonLSPeerConnectionSummary$p_20(b,"video_send_frames_encoded",a==null?void 0:a.frames);this.$ZenonLSPeerConnectionSummary$p_20(b,"video_send_frames_sent",a==null?void 0:a.fcsn);this.$ZenonLSPeerConnectionSummary$p_20(b,"video_send_frames_send_to_encoder",a==null?void 0:a.eiframes);this.$ZenonLSPeerConnectionSummary$p_20(b,"video_send_capture_duration_ms",this.$ZenonLSPeerConnectionSummary$p_1.video.ld);this.$ZenonLSPeerConnectionSummary$p_20(b,"video_send_duration_blur",a==null?void 0:a.video_blur_dur);this.$ZenonLSPeerConnectionSummary$p_20(b,"video_send_key_frames_encoded",a==null?void 0:a.kframes);this.$ZenonLSPeerConnectionSummary$p_20(b,"video_send_packets_sent",a==null?void 0:a.psent);this.$ZenonLSPeerConnectionSummary$p_20(b,"video_send_qp_sum",a==null?void 0:a.eqps);this.$ZenonLSPeerConnectionSummary$p_20(b,"video_send_total_input_pixel",a==null?void 0:a.video_sum_capture_pixel);this.$ZenonLSPeerConnectionSummary$p_20(b,"video_send_total_output_pixel",a==null?void 0:a.video_sum_encoded_pixel);return b};e.$ZenonLSPeerConnectionSummary$p_20=function(a,b,c){c!=null&&(a[b]=d("ZenonCallFalcoEventUtils").truncateNumber(c))};e.$ZenonLSPeerConnectionSummary$p_21=function(){var a,b=this.$ZenonLSPeerConnectionSummary$p_1.video.receiver,c={video_recv_codec:b==null?void 0:b.dname};this.$ZenonLSPeerConnectionSummary$p_22(c,"audio_recv_jitter_buffer_frames_assembled",b==null?void 0:b.jtasb);this.$ZenonLSPeerConnectionSummary$p_22(c,"audio_recv_jitter_buffer_frames_out",b==null?void 0:b.jtfrm);this.$ZenonLSPeerConnectionSummary$p_22(c,"audio_recv_jitter_buffer_keyframes_out",b==null?void 0:b.jtkey);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_agg_bytes_decoded",b==null?void 0:b.dec_bytes);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_agg_packets_lost",b==null?void 0:b.plost);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_agg_packets_recv",b==null?void 0:b.precv);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_av_sync_abs",b==null?void 0:b.avabs);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_frame_height",b==null?void 0:b.rh);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_frame_width",b==null?void 0:b.rw);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_frames_decoded",b==null?void 0:b.frd);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_freeze_count",b==null?void 0:b.frcnt);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_freeze_duration",b==null?void 0:b.frdur);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_freeze_duration_above_500_ms",b==null?void 0:b.frdur500);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_freeze_duration_above_500_ms_v2",b==null?void 0:b.frdur500);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_pause_count",b==null?void 0:b.pact);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_pause_duration_ms",b==null?void 0:b.padur);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_qp_sum",b==null?void 0:b.qps);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_total_pixels_decoded",b==null?void 0:b.agg_video_sum_decoded_pixel);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_union_decode_time_ms",b==null?void 0:b.dec_time);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_send_firs_recv",b==null?void 0:b.fir);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_send_nacks_recv",b==null?void 0:b.nack);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_send_plis_recv",b==null?void 0:b.pli);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_weighted_vqs",b==null?void 0:(a=b.vqs)==null?void 0:a.avg);a=b==null?void 0:b.dec_time_all_streams;b=b==null?void 0:b.dec_frame;this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_agg_decode_time_ms",a);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_agg_frames_decoded",b);a!=null&&a>0&&b!=null&&b>0&&this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_framerate_decoded",b*1e3/a);return c};e.$ZenonLSPeerConnectionSummary$p_23=function(){var a;a=(a=this.$ZenonLSPeerConnectionSummary$p_1.video.receiver)==null?void 0:a.ss_recv;var b={};this.$ZenonLSPeerConnectionSummary$p_24(b,"video_recv_duration_ss",a==null?void 0:a.ss_recv_dur);return b};e.$ZenonLSPeerConnectionSummary$p_24=function(a,b,c){c!=null&&(a[b]=d("ZenonCallFalcoEventUtils").truncateNumber(c))};e.$ZenonLSPeerConnectionSummary$p_25=function(){var a,b,c;a=(a=this.$ZenonLSPeerConnectionSummary$p_1.receiver_stalls)==null?void 0:(a=a.video_recv_stalls)==null?void 0:a.recv_no_bytes_stall;b=(b=this.$ZenonLSPeerConnectionSummary$p_1.receiver_stalls)==null?void 0:(b=b.video_recv_stalls)==null?void 0:b.recv_decode_stall;c=(c=this.$ZenonLSPeerConnectionSummary$p_1.receiver_stalls)==null?void 0:(c=c.video_recv_stalls)==null?void 0:c.recv_render_stall;var d={};if(a){var e=a.is_stall,f=a.sdur;a=a.nstall;e!=null&&(d.video_recv_byte_received_is_stalled=String(e));f!=null&&(d.video_recv_byte_received_total_stall_duration_ms=String(f));a!=null&&(d.video_recv_byte_received_total_stalls=String(a))}if(b){e=b.is_stall;f=b.sdur;a=b.nstall;e!=null&&(d.video_recv_decoder_is_stalled=String(e));f!=null&&(d.video_recv_decoder_total_stall_duration_ms=String(f));a!=null&&(d.video_recv_decoder_total_stalls=String(a))}if(c){b=c.is_stall;e=c.sdur;f=c.nstall;b!=null&&(d.video_render_is_stalled=String(b));e!=null&&(d.video_render_total_stall_duration_ms=String(e));f!=null&&(d.video_render_total_stalls=String(f))}return d};e.$ZenonLSPeerConnectionSummary$p_26=function(){var a;a=(a=this.$ZenonLSPeerConnectionSummary$p_1.receiver_stalls)==null?void 0:(a=a.screen_recv_stalls)==null?void 0:a.recv_decode_stall;var b={};if(a){var c=a.is_stall,d=a.sdur;a=a.nstall;c!=null&&(b.screen_share_recv_decoder_is_stalled=String(c));d!=null&&(b.screen_share_recv_decoder_total_stall_duration_ms=String(d));a!=null&&(b.screen_share_recv_decoder_total_stalls=String(a))}return b};e.$ZenonLSPeerConnectionSummary$p_22=function(a,b,c){c!=null&&(a[b]=d("ZenonCallFalcoEventUtils").truncateNumber(c))};e.$ZenonLSPeerConnectionSummary$p_27=function(){var a,b,c=this.$ZenonLSPeerConnectionSummary$p_1.DebugAudioMetrics.NetworkReceive.jb_nm;a=c==null?void 0:(a=c.neteq)==null?void 0:a.meanWait;b=c==null?void 0:(b=c.speech_expand_rate)==null?void 0:b.avg;c=c==null?void 0:(c=c.speech_expand_rate)==null?void 0:c.M;var d={};a!=null&&(d.audio_recv_neteq_mean_wait_ms=String(a));b!=null&&(d.audio_recv_neteq_speech_expand_rate_avg=String(b));c!=null&&(d.audio_recv_neteq_speech_expand_rate_max=String(c));return d};e.$ZenonLSPeerConnectionSummary$p_28=function(){var a=this.$ZenonLSPeerConnectionSummary$p_1.CoreAudioMetrics,b=a.audio_device,c=a.isstall,d=a.sdur;a=a.astall;var e={};b!=null&&(e.audio_device=String(b));c!=null&&(e.audio_device_is_stalled=String(c));d!=null&&(e.audio_device_stall_duration=String(d));a!=null&&(e.audio_device_total_stall=String(a));return e};e.$ZenonLSPeerConnectionSummary$p_29=function(){var a,b={};if(((a=this.$ZenonLSPeerConnectionSummary$p_1.ecv)==null?void 0:a.ecv_neteq_wait_time_ms)!=null){b.ecv_neteq_wait_time_ms=d("ZenonCallFalcoEventUtils").truncateNumber(Number((a=this.$ZenonLSPeerConnectionSummary$p_1.ecv)==null?void 0:a.ecv_neteq_wait_time_ms))}if(((a=this.$ZenonLSPeerConnectionSummary$p_1.ecv)==null?void 0:a.ecv_rtt_ms)!=null){b.ecv_rtt_ms=d("ZenonCallFalcoEventUtils").truncateNumber(Number((a=this.$ZenonLSPeerConnectionSummary$p_1.ecv)==null?void 0:a.ecv_rtt_ms))}if(((a=this.$ZenonLSPeerConnectionSummary$p_1.ecv)==null?void 0:a.ecv_plccng_v2)!=null){b.ecv_plccng_v2=d("ZenonCallFalcoEventUtils").truncateNumber(Number((a=this.$ZenonLSPeerConnectionSummary$p_1.ecv)==null?void 0:a.ecv_plccng_v2))}if(((a=this.$ZenonLSPeerConnectionSummary$p_1.ecv)==null?void 0:a.ecv_video_freeze_duration_above_500_ms_v2)!=null){b.ecv_video_freeze_duration_above_500_ms_v2=d("ZenonCallFalcoEventUtils").truncateNumber(Number((a=this.$ZenonLSPeerConnectionSummary$p_1.ecv)==null?void 0:a.ecv_video_freeze_duration_above_500_ms_v2))}if(((a=this.$ZenonLSPeerConnectionSummary$p_1.ecv)==null?void 0:a.ecv_av_sync_above_1000_ms)!=null){b.ecv_av_sync_above_1000_ms=d("ZenonCallFalcoEventUtils").truncateNumber(Number((a=this.$ZenonLSPeerConnectionSummary$p_1.ecv)==null?void 0:a.ecv_av_sync_above_1000_ms))}if(((a=this.$ZenonLSPeerConnectionSummary$p_1.ecv)==null?void 0:a.ecv_decoded_bitrate_duration_sum)!=null){b.ecv_decoded_bitrate_duration_sum=d("ZenonCallFalcoEventUtils").truncateNumber(Number((a=this.$ZenonLSPeerConnectionSummary$p_1.ecv)==null?void 0:a.ecv_decoded_bitrate_duration_sum))}return b};e.$ZenonLSPeerConnectionSummary$p_30=function(){var a=this.$ZenonLSPeerConnectionSummary$p_1.CoreVideoMetrics.video.capture_stall,b=a.is_stall,c=a.last_sdur,d=a.sdur;a=a.nstall;var e=this.$ZenonLSPeerConnectionSummary$p_1.CoreVideoMetrics.video.encode_stall,f=e.is_stall,g=e.last_sdur,h=e.sdur;e=e.nstall;var i=this.$ZenonLSPeerConnectionSummary$p_1.CoreVideoMetrics.video.sent_stall,j=i.is_stall,k=i.last_sdur,l=i.sdur;i=i.nstall;var m={};b!=null&&(m.video_device_capture_is_stalled=String(b));c!=null&&(m.video_device_capture_last_stall_duration_ms=String(c));d!=null&&(m.video_device_capture_total_stall_duration_ms=String(d));a!=null&&(m.video_device_capture_total_stalls=String(a));f!=null&&(m.video_encode_is_stalled=String(f));g!=null&&(m.video_encode_last_stall_duration_ms=String(g));h!=null&&(m.video_encode_total_stall_duration_ms=String(h));e!=null&&(m.video_encode_total_stalls=String(e));j!=null&&(m.video_send_is_stalled=String(j));k!=null&&(m.video_send_last_stall_duration_ms=String(k));l!=null&&(m.video_send_total_stall_duration_ms=String(l));i!=null&&(m.video_send_total_stalls=String(i));return m};e.$ZenonLSPeerConnectionSummary$p_31=function(){var a=this.$ZenonLSPeerConnectionSummary$p_1,b=a.receiver;a=a.receiver_pct;var c=null;b.codec!=null&&(c=String(Object.values(b.codec).pop()));var e={gen0_ice_received_host:d("ZenonCallFalcoEventUtils").nonNullIntNumber(this.$ZenonLSPeerConnectionSummary$p_3.host),gen0_ice_received_relay:d("ZenonCallFalcoEventUtils").nonNullIntNumber(this.$ZenonLSPeerConnectionSummary$p_3.relay),gen0_ice_received_srflx:d("ZenonCallFalcoEventUtils").nonNullIntNumber(this.$ZenonLSPeerConnectionSummary$p_3.srflx)};c!=null&&(e.audio_recv_codec=String(c));this.$ZenonLSPeerConnectionSummary$p_32(e,"audio_ctp_latency_avg_us",(c=a.audio.jbd)==null?void 0:c.avg,(c=a.audio.rtt)==null?void 0:c.avg);this.$ZenonLSPeerConnectionSummary$p_32(e,"audio_ctp_latency_p5_us",(c=a.audio.jbd)==null?void 0:c.p5,(c=a.audio.rtt)==null?void 0:c.p5);this.$ZenonLSPeerConnectionSummary$p_32(e,"audio_ctp_latency_p50_us",(c=a.audio.jbd)==null?void 0:c.p50,(c=a.audio.rtt)==null?void 0:c.p50);this.$ZenonLSPeerConnectionSummary$p_32(e,"audio_ctp_latency_p95_us",(c=a.audio.jbd)==null?void 0:c.p95,(c=a.audio.rtt)==null?void 0:c.p95);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_bytes_recv",b.bytes);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_concealed_samples",b.sp_c);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_fec_packets_discarded",b.fecpd);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_fec_packets_received",b.fecpr);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_jitter",b.jitter);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_jitter_buffer_flushes",b.dec_pack_flush);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_level_count",b.taulc);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_jitter_buffer_emitted_count",b.jbec);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_jitter_buffer_delay",b.jbd);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_level_sum",b.rx_sum_lvl);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_total_samples_duration",b.sp_dur);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_total_samples_received",b.sp_r);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_neteq_accelerate",b.dec_ar);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_neteq_normal",b.dec_normal);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_neteq_operations",b.neteq_calls);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_neteq_plc",b.dec_plc);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_neteq_plccng",b.dec_plc_cng);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_neteq_preemptive_expand",b.dec_per);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_packets_lost",b.plost);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_packets_recv",b.precv);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_silent_concealed_samples",b.sp_sc);return e};e.$ZenonLSPeerConnectionSummary$p_34=function(){var a,b={};a=(a=this.$ZenonLSPeerConnectionSummary$p_1.video.sender)==null?void 0:a.ss;if((a==null?void 0:a.dur)!=null&&(a==null?void 0:a.dur)>0){a=this.$ZenonLSPeerConnectionSummary$p_1.CoreVideoMetrics.screen.capture_stall;var c=a.is_stall,d=a.sdur;a=a.nstall;var e=this.$ZenonLSPeerConnectionSummary$p_1.CoreVideoMetrics.screen.encode_stall,f=e.is_stall,g=e.sdur;e=e.nstall;var h=this.$ZenonLSPeerConnectionSummary$p_1.CoreVideoMetrics.screen.sent_stall,i=h.is_stall,j=h.sdur;h=h.nstall;c!=null&&(b.screen_share_capture_is_stalled=String(c));d!=null&&(b.screen_share_capture_total_stall_duration_ms=String(d));a!=null&&(b.screen_share_capture_total_stalls=String(a));f!=null&&(b.screen_share_encode_is_stalled=String(f));g!=null&&(b.screen_share_encode_total_stall_duration_ms=String(g));e!=null&&(b.screen_share_encode_total_stalls=String(e));i!=null&&(b.screen_share_send_is_stalled=String(i));j!=null&&(b.screen_share_send_total_stall_duration_ms=String(j));h!=null&&(b.screen_share_send_total_stalls=String(h))}return b};e.$ZenonLSPeerConnectionSummary$p_33=function(a,b,c){c!=null&&(a[b]=d("ZenonCallFalcoEventUtils").truncateNumber(c))};e.$ZenonLSPeerConnectionSummary$p_35=function(){var a,b=this.$ZenonLSPeerConnectionSummary$p_1.extraInfo,c=b.localIceCandidate;b=b.remoteIceCandidate;return{relay_protocol:c==null?void 0:c.relayProtocol,transport_conn_type:"l:"+((a=c==null?void 0:c.candidateType)!=null?a:"")+"-"+((a=c==null?void 0:c.protocol)!=null?a:"")+";r:"+((c=b==null?void 0:b.candidateType)!=null?c:"")+"-"+((a=b==null?void 0:b.protocol)!=null?a:"")}};e.$ZenonLSPeerConnectionSummary$p_36=function(){var a=this.$ZenonLSPeerConnectionSummary$p_9,b={},c=0,e=!1,f=0,g=0;a.forEach(function(a,b){e!==a&&(a?c>0&&(g++,f+=b-c,c=0):c=b,e=a)});if(c>0){a=this.$ZenonLSPeerConnectionSummary$p_5;a>-1&&a>c&&(g++,f+=a-c)}b.transport_num_gaps=d("ZenonCallFalcoEventUtils").nonNullIntNumber(g);b.transport_total_gap_duration_ms=d("ZenonCallFalcoEventUtils").nonNullIntNumber(f);this.$ZenonLSPeerConnectionSummary$p_8!=null&&(b.transport_connected=this.$ZenonLSPeerConnectionSummary$p_8?"1":"0");return b};e.$ZenonLSPeerConnectionSummary$p_37=function(){var a,b={};b.audio_send_echo_confidence=(a=this.$ZenonLSPeerConnectionSummary$p_1.audio)==null?void 0:(a=a.echo_confidence)==null?void 0:a.audio_send_echo_confidence;return b};e.onCallEnded=function(){this.$ZenonLSPeerConnectionSummary$p_5=this.$ZenonLSPeerConnectionSummary$p_38(),this.$ZenonLSPeerConnectionSummary$p_8==null&&(this.$ZenonLSPeerConnectionSummary$p_8=this.$ZenonLSPeerConnectionSummary$p_7)};e.$ZenonLSPeerConnectionSummary$p_32=function(a,b,c,e){var f=0;c!=null&&(f+=c);e!=null&&(f+=e/2);f>0&&(a[b]=d("ZenonCallFalcoEventUtils").truncateNumber(f))};e.getPeerConnectionSummary=function(){var a=this.getCallInfo(),b=a.deviceID,c=a.localCallID,e=a.peerID,f=a.serverInfoData;a=a.signalingID;return babelHelpers["extends"]({},this.$ZenonLSPeerConnectionSummary$p_11(),{},this.$ZenonLSPeerConnectionSummary$p_28(),{},this.$ZenonLSPeerConnectionSummary$p_12(),{},this.$ZenonLSPeerConnectionSummary$p_31(),{},this.$ZenonLSPeerConnectionSummary$p_14(),{},this.$ZenonLSPeerConnectionSummary$p_16(),{},this.$ZenonLSPeerConnectionSummary$p_18(),{},this.$ZenonLSPeerConnectionSummary$p_19(),{},this.$ZenonLSPeerConnectionSummary$p_21(),{},this.$ZenonLSPeerConnectionSummary$p_23(),{},this.$ZenonLSPeerConnectionSummary$p_27(),{},this.$ZenonLSPeerConnectionSummary$p_36(),{},this.$ZenonLSPeerConnectionSummary$p_29(),{},this.$ZenonLSPeerConnectionSummary$p_30(),{},this.$ZenonLSPeerConnectionSummary$p_34(),{},this.$ZenonLSPeerConnectionSummary$p_25(),{},this.$ZenonLSPeerConnectionSummary$p_26(),{},this.$ZenonLSPeerConnectionSummary$p_35(),{},this.$ZenonLSPeerConnectionSummary$p_37(),{},f!=null&&{shared_call_id:f},{connection_logging_id:a,local_call_id:c,media_path:this.$ZenonLSPeerConnectionSummary$p_10,peer_id:d("ZenonPeerID").convertPeerIDForLogging(e),protocol:"multiway",steady_time_ms:d("ZenonCallFalcoEventUtils").performanceNowParsed(),system_time_ms:String(Date.now()),web_device_id:b})};e.$ZenonLSPeerConnectionSummary$p_38=function(){var a=(h||(h=c("performanceNow")))()-this.$ZenonLSPeerConnectionSummary$p_6;return Math.floor(this.$ZenonLSPeerConnectionSummary$p_4+a)};e.updateIceInfo=function(a,b){var c=b===d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send?this.$ZenonLSPeerConnectionSummary$p_2:this.$ZenonLSPeerConnectionSummary$p_3;b=d("ZenonIceStatsParser").extractIceInfo(a);b.forEach(function(a){var b=a.gen;a=a.type;b===0&&(c[a]==null?c[a]=1:c[a]++)})};e.onPCStateChange=function(a){this.$ZenonLSPeerConnectionSummary$p_7!==a&&(this.$ZenonLSPeerConnectionSummary$p_7=a,this.$ZenonLSPeerConnectionSummary$p_9.set(this.$ZenonLSPeerConnectionSummary$p_38(),a))};e.$ZenonLSPeerConnectionSummary$p_39=function(a){switch(a){case d("ZenonMWMessageTypes").ZenonMWMediaPath.SFU:return"sfu";case d("ZenonMWMessageTypes").ZenonMWMediaPath.P2P:return"p2p";case d("ZenonMWMessageTypes").ZenonMWMediaPath.UNKNOWN:default:return"unknown"}};e.setMediaPath=function(a){this.$ZenonLSPeerConnectionSummary$p_10=this.$ZenonLSPeerConnectionSummary$p_39(a)};e.setMediaStats=function(a){this.$ZenonLSPeerConnectionSummary$p_1=a};e.save=function(a){var b=this.getCallInfo(),c=b.peerID;b=b.signalingID;a.storePeerConnectionSummary(c,b,this)};e["delete"]=function(a){var b=this.getCallInfo(),c=b.peerID;b=b.signalingID;a.removeLocalStorageObjects([{peerID:c,signalingID:b}])};e.toJsonString=function(){var a=this.getCallInfo();a=a.signalingID;a={accumulatedCallTime:this.$ZenonLSPeerConnectionSummary$p_38(),callInfo:this.getCallInfo(),connectionLoggingId:a,endIsConnected:this.$ZenonLSPeerConnectionSummary$p_8,gen0IceReceivedCount:this.$ZenonLSPeerConnectionSummary$p_3,gen0IceSentCount:this.$ZenonLSPeerConnectionSummary$p_2,mediaPath:this.$ZenonLSPeerConnectionSummary$p_10,mediaStats:this.$ZenonLSPeerConnectionSummary$p_1,pcIsConnected:this.$ZenonLSPeerConnectionSummary$p_7};return JSON.stringify(a)};b.fromJsonString=function(a){var c,d;try{d=JSON.parse(a)}catch(a){return null}a=d.callInfo;a.deviceID;a=babelHelpers.objectWithoutPropertiesLoose(a,["deviceID"]);a=new b(a);a.$ZenonLSPeerConnectionSummary$p_10=d.mediaPath;a.$ZenonLSPeerConnectionSummary$p_1=d.mediaStats;a.$ZenonLSPeerConnectionSummary$p_3=d.gen0IceReceivedCount;a.$ZenonLSPeerConnectionSummary$p_2=d.gen0IceSentCount;a.$ZenonLSPeerConnectionSummary$p_7=(c=d.pcIsConnected)!=null?c:null;a.$ZenonLSPeerConnectionSummary$p_8=d.endIsConnected;d.accumulatedCallTime!=null&&(a.$ZenonLSPeerConnectionSummary$p_4=d.accumulatedCallTime);return a};return b}(c("ZenonCallInfoManager"));g["default"]=a}),98);
__d("ZenonLSPeerConnectionSummaryStore",["ZenonGenericLocalStorageStore","ZenonLSPeerConnectionSummary"],(function(a,b,c,d,e,f,g){"use strict";var h="localstorage",i="RTC_LS_PCS_",j="ls_pcs",k=3;a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,j,h,i)||this}var d=b.prototype;d.retrievePeerConnectionSummary=function(a,b){var d=this.getLocalStorageObjects();d=d[a]?d[a][b]:null;if(d)return c("ZenonLSPeerConnectionSummary").fromJsonString(d.__d);else return null};d.storePeerConnectionSummary=function(a,b,c){this.mutateLocalStorageObjects(function(d){d[a]||(d[a]={});d[a][b]={__d:c.toJsonString(),__t:Date.now(),__z:!0};return d},k,!1,{peerID:a,signalingID:b})};return b}(c("ZenonGenericLocalStorageStore"));b=new a();g.ZenonLSPeerConnectionSummaryStoreInstance=b}),98);
__d("ZenonLSStarRatingsManager",["LsRtcEndCallSurveyFalcoEvent","LsRtcStarRatingFalcoEvent","ZenonCallInfoManager","ZenonPeerID"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var e=b.prototype;e.setRating=function(a,b){var e=this.getCallInfo(),f=e.deviceID,g=e.localCallID,h=e.peerID;e=e.serverInfoData;var i={local_call_id:g,peer_id:d("ZenonPeerID").convertPeerIDForLogging(h),shared_call_id:e,web_device_id:f};c("LsRtcStarRatingFalcoEvent").logImmediately(function(){return babelHelpers["extends"]({rating_style:b?"1":null,star_rating:a.toString()},i)})};e.setSurvey=function(a,b,e){b===void 0&&(b=null);e===void 0&&(e=null);var f=this.getCallInfo(),g=f.deviceID,h=f.localCallID,i=f.peerID;f=f.serverInfoData;h={local_call_id:h,peer_id:d("ZenonPeerID").convertPeerIDForLogging(i),shared_call_id:f,web_device_id:g};i=Array.isArray(b)?b:b!=null?[b]:[];var j=babelHelpers["extends"]({rtc_end_call_survey_issue:(g=(f=e)==null?void 0:f.toLocaleLowerCase())!=null?g:"",rtc_end_call_survey_selected_options:i},h,{},a==null?{}:{rtc_end_call_survey_freeform:a});c("LsRtcEndCallSurveyFalcoEvent").log(function(){return j})};e.save=function(a){var b=this.getCallInfo(),c=b.peerID;b=b.signalingID;a.storeStarRatings(c,b,this)};e["delete"]=function(a){var b=this.getCallInfo(),c=b.peerID;b=b.signalingID;a.removeLocalStorageObjects([{peerID:c,signalingID:b}])};e.toJsonString=function(){var a={callInfo:this.getCallInfo()};return JSON.stringify(a)};b.fromJsonString=function(a){var c;try{c=JSON.parse(a)}catch(a){return null}a=c.callInfo;a.deviceID;a=babelHelpers.objectWithoutPropertiesLoose(a,["deviceID"]);return new b(a)};return b}(c("ZenonCallInfoManager"));g["default"]=a}),98);
__d("ZenonLSStarRatingsStore",["ZenonGenericLocalStorageStore","ZenonLSStarRatingsManager"],(function(a,b,c,d,e,f,g){"use strict";var h="localstorage",i="RTC_LS_STAR_RATINGS_",j="ls_star_ratings",k=3;a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,j,h,i)||this}var d=b.prototype;d.retrieveStarRatings=function(a,b){var d=this.getLocalStorageObjects();d=d[a]?d[a][b]:null;if(d)return c("ZenonLSStarRatingsManager").fromJsonString(d.__d);else return null};d.storeStarRatings=function(a,b,c){this.mutateLocalStorageObjects(function(d){d[a]||(d[a]={});d[a][b]={__d:c.toJsonString(),__t:Date.now(),__z:!0};return d},k,!1,{peerID:a,signalingID:b})};return b}(c("ZenonGenericLocalStorageStore"));b=new a();g.ZenonLSStarRatingsStoreInstance=b}),98);
__d("ZenonMWThriftMessageLogger",["MultiwayCommonTypes","ZenonLoggingEventTypes"],(function(a,b,c,d,e,f,g){"use strict";var h=new Set(),i=new Set();function a(a,b){var c=a.messageHeader;a=a.messageBody;if(h.has(c.transactionId)||c.type==null)return;switch(c.type){case d("MultiwayCommonTypes").MessageType.JOIN:a.joinRequest&&j(a.joinRequest,b);break;case d("MultiwayCommonTypes").MessageType.ICE_CANDIDATE:a.iceCandidateRequest&&l(a.iceCandidateRequest,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send);break;case d("MultiwayCommonTypes").MessageType.CLIENT_MEDIA_UPDATE:a.clientMediaUpdateRequest&&m(a.clientMediaUpdateRequest,b);break;case d("MultiwayCommonTypes").MessageType.SERVER_MEDIA_UPDATE:a.serverMediaUpdateResponse&&p(a.serverMediaUpdateResponse,b);break;default:break}h.add(c.transactionId)}function b(a,b){var c=a.messageHeader;a=a.messageBody;if(i.has(c.transactionId)||c.type==null)return;switch(c.type){case d("MultiwayCommonTypes").MessageType.JOIN:a.joinResponse&&k(a.joinResponse,b);break;case d("MultiwayCommonTypes").MessageType.ICE_CANDIDATE:a.iceCandidateRequest&&l(a.iceCandidateRequest,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Receive);break;case d("MultiwayCommonTypes").MessageType.CLIENT_MEDIA_UPDATE:a.clientMediaUpdateResponse&&n(a.clientMediaUpdateResponse,b);break;case d("MultiwayCommonTypes").MessageType.SERVER_MEDIA_UPDATE:a.serverMediaUpdateRequest&&o(a.serverMediaUpdateRequest,b);break;default:break}i.add(c.transactionId)}function j(a,b){var c=a.answer;a=a.offer;b({name:"inviteSent"});q(a,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send);c&&q(c,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send)}function k(a,b){a=a.answer;a&&q(a,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Receive)}function l(a,b,c){a=a.iceCandidateSdps;a.forEach(function(a){a.candidateSdpString!=null&&b({direction:c,name:"updateIceInfo",sdpString:a.candidateSdpString})})}function m(a,b){a=a.offer;a&&q(a,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send)}function n(a,b){a=a.answer;a&&q(a,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Receive)}function o(a,b){var c=a.answer;a=a.offer;a&&q(a,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Receive);c&&q(c,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Receive)}function p(a,b){a=a.answer;a&&q(a,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send)}function q(a,b,c){a.sdpString!=null&&b({direction:c,name:"updateIceInfo",sdpString:a.sdpString})}g.logSentMessage=a;g.logReceivedMessage=b}),98);
__d("promiseAny",["invariant","AggregateError","Promise"],(function(a,b,c,d,e,f,g,h){var i;function j(a){return new(i||(i=b("Promise")))(function(c,d){return(i||(i=b("Promise"))).resolve(a).then(d,c)})}function a(a){a.length!==0||h(0,14837);return(i||(i=b("Promise"))).all(a.map(j)).then(function(a){throw new(c("AggregateError"))(a)},function(a){return a})}g["default"]=a}),98);
__d("ZenonMessageSenderChain",["promiseAny"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.addMessageSender=function(a){this.$1.push(a)};b.sendMessage=function(a){var b=this.$1.map(function(b){return b.sendMessage(a)});return c("promiseAny")(b)};b.setMessageReceiver=function(a){this.$1.forEach(function(b){return b.setMessageReceiver(a)})};b.setLoggingEventHandler=function(a){this.$1.forEach(function(b){return b.setLoggingEventHandler(a)})};return a}();g["default"]=a}),98);
__d("ZenonSignalingConstants",[],(function(a,b,c,d,e,f){"use strict";a="/t_rtc_multi";b="config_engine";c="D3F4U1T_F8_TR4CK";f.T_RTC_MULTI_MQTT_TOPIC=a;f.CONFIG_ENGINE_STATE_SYNC_TOPIC=b;f.DEFAULT_TRACK=c}),66);
__d("ZenonValidateMWThriftMessage",["FBLogger","MultiwayCommonTypes","ZenonInfraActionsLogger","ZenonMWThriftMessageMap"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.messageHeader.type,e=d("ZenonMWThriftMessageMap").messageTypeToString(b);if(a.messageHeader.serverInfoData==null&&b!=null&&b!==d("MultiwayCommonTypes").MessageType.JOIN){c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"[ZP][DROP] No remoteSignalingID in message: "+e});c("FBLogger")("rtc_www").warn("[ZP][DROP] No remoteSignalingID in message: "+e);return!1}return!0}g["default"]=a}),98);
__d("waitForZenonMqttConnected",["Promise","ZenonUserActionLogger","err","getZenonMqttChannel"],(function(a,b,c,d,e,f,g){"use strict";var h,i=15e3;function a(){return new(h||(h=b("Promise")))(function(a,b){var d=c("getZenonMqttChannel")();if(d.getConnectionState()==="Connected")a();else{c("ZenonUserActionLogger").logCheckpoint({checkpoint:"MQTT not connected, deferring sending MWS message"});c("ZenonUserActionLogger").startTimer("MQTT not connected");var e={onMQTTStateChanged:function(b){b==="Connected"&&(c("ZenonUserActionLogger").stopTimer({checkpointName:"MQTT connected after deferring sending MWS message",timerName:"MQTT not connected"}),d.unsubscribeChannelEvents(e),window.clearTimeout(f),a())}},f=window.setTimeout(function(){d.unsubscribeChannelEvents(e),c("ZenonUserActionLogger").stopTimer({checkpointName:"MQTT never connected. Current status: "+d.getConnectionState(),timerName:"MQTT not connected"}),b(c("err")("timeout"))},i);d.subscribeChannelEvents(e)}})}g["default"]=a}),98);
__d("ZenonMqttMWThriftMessageSender",["Promise","RpZenonBinaryThriftSignalingSitevarConfig","ZenonActorHooks","ZenonMWThriftMessageDebugLogger","ZenonMWThriftMessageLogger","ZenonMWThriftMessageMap","ZenonMWThriftMessageReliabilityLogger","ZenonMWThriftMessageSerializer","ZenonMWThriftMessageTranslator","ZenonSignalingConstants","ZenonUserActionLogger","ZenonValidateMWThriftMessage","asyncToGeneratorRuntime","err","filterNulls","getZenonMqttChannel","waitForZenonMqttConnected"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(){var a=c("RpZenonBinaryThriftSignalingSitevarConfig").supported_message_types_mqtt.map(function(a){return d("ZenonMWThriftMessageMap").messageTypeFromString(a)});this.$3=new Set(c("filterNulls")(a))}var e=a.prototype;e.$4=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this,e=!0;yield c("waitForZenonMqttConnected")()["catch"](function(a){c("ZenonUserActionLogger").logCheckpoint({checkpoint:"Not sending MWS Thrift message through MQTT because MQTT could not connect. Error: "+a}),e=!1});if(!e)return;d("ZenonMWThriftMessageReliabilityLogger").logSendingMessage(a);c("ZenonMWThriftMessageDebugLogger").logMWThriftMessage("SENDING","MQTT Thrift",a);this.$2&&d("ZenonMWThriftMessageLogger").logSentMessage(a,this.$2);var f=c("getZenonMqttChannel")();try{yield f.publishBinary(d("ZenonSignalingConstants").T_RTC_MULTI_MQTT_TOPIC,d("ZenonMWThriftMessageSerializer").serializeMWThriftMessage(a)).then(function(){d("ZenonMWThriftMessageReliabilityLogger").logSentMessage(a),b.$2&&b.$2({mwThriftMessage:a,name:"mwThriftMessageSent"})},function(c){b.$5(a,c.toString())})}catch(b){this.$5(a,b.toString())}});function e(b){return a.apply(this,arguments)}return e}();e.$5=function(a,b){b=b!=null?b:"MQTT Thrift Message Send Error";d("ZenonMWThriftMessageReliabilityLogger").logSendMessageFailed(a,"[MQTT Thrift] "+b);c("ZenonMWThriftMessageDebugLogger").logSendMultiwayThriftMessageFailure(b,d("ZenonMWThriftMessageMap").messageTypeToString(a.messageHeader.type))};e.sendMessage=function(a){var e=d("ZenonMWThriftMessageTranslator").toMWThriftMessage(a);if(!e||!c("ZenonValidateMWThriftMessage")(e))return(h||(h=b("Promise"))).reject(c("err")("Invalid MW Thrift message"));if(e.messageHeader.type!=null&&!this.$3.has(e.messageHeader.type))return(h||(h=b("Promise"))).resolve();return a.getHeader().userInfo.userID!==d("ZenonActorHooks").ZenonActor.getAccountID()&&!d("ZenonActorHooks").ZenonActor.isInstagramUser()&&!d("ZenonActorHooks").ZenonActor.isOculusUser()&&!d("ZenonActorHooks").ZenonActor.isKadabraUser()?(h||(h=b("Promise"))).reject(c("err")("MQTT doesn't work with Page users yet")):this.$4(e)};e.setMessageReceiver=function(a){this.$1=a};e.setLoggingEventHandler=function(a){this.$2=a};return a}();g["default"]=a}),98);
__d("ZenonParentClientPerfQPLLogProcessor",["Promise","QuickPerformanceLogger","ZenonClientPerfQPLConstants","ZenonDismissReason","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(){function a(a){var b=a.data;a=a.isE2eeMandated;this.$1=b.localCallID;this.$2=b.serverInfoData;this.$3=b.signalingID;this.$4=a}var e=a.prototype;e.processEvent=function(a){var e=c("qpl")._(41156610,"2039");switch(a.name){case"inviteReceived":this.$2=a.serverInfoData;(i||(i=c("QuickPerformanceLogger"))).markerStartFromNavStart(e,+this.$3);(i||(i=c("QuickPerformanceLogger"))).markerAnnotate(e,{bool:{isE2eeMandated:this.$4},string:{local_call_id:this.$1,server_info_data:this.$2}},{instanceKey:+this.$3});break;case"callEnded":(i||(i=c("QuickPerformanceLogger"))).markerAnnotate(e,{string:{endCallReason:d("ZenonDismissReason").ZenonDismissReason.getName(a.endCallReason),endCallSubreason:a.endCallSubreason}},{instanceKey:+this.$3});(i||(i=c("QuickPerformanceLogger"))).markerEnd(e,4,+this.$3);break;case"popupOpened":(i||(i=c("QuickPerformanceLogger"))).markerPoint(e,d("ZenonClientPerfQPLConstants").POINT_ZENON_POPUP_OPENED,{instanceKey:+this.$3});break}return(h||(h=b("Promise"))).resolve()};return a}();e={LogProcessor:a};g.ZenonParentClientPerfQPLLogProcessor=a;g.ZenonParentClientPerfQPLLogProcessorConfig=e}),98);
__d("ZenonParentLSCallSummaryLogProcessor",["ODS","ZenonDismissReason","ZenonInfraActionsLogger","ZenonLSCallStartEventManager","ZenonLSCallStartEventStore","ZenonLSCallSummary","ZenonLSCallSummaryStore","ZenonLSE2EEStatsManager","ZenonLSE2EEStore","ZenonLSPeerConnectionSummary","ZenonLSPeerConnectionSummaryStore","ZenonLSStarRatingsManager","ZenonLSStarRatingsStore","ZenonPeerID","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a){a=a.data;a.peerID=d("ZenonPeerID").ZenonMWPeerID;this.$6=a.protocol;this.$1=new(c("ZenonLSCallSummary"))(a);this.$2=new(c("ZenonLSPeerConnectionSummary"))(a);this.$3=new(c("ZenonLSCallStartEventManager"))(a);this.$4=new(c("ZenonLSE2EEStatsManager"))(a);this.$5=new(c("ZenonLSStarRatingsManager"))(a);c("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"NSL - created call summaries in parent window"})}var e=a.prototype;e.processEvent=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){switch(a.name){case"callAccepted":this.$1.onCallAccepted(a.trigger);this.$1.save(d("ZenonLSCallSummaryStore").ZenonLSCallSummaryStoreInstance);this.$2.save(d("ZenonLSPeerConnectionSummaryStore").ZenonLSPeerConnectionSummaryStoreInstance);this.$3.save(d("ZenonLSCallStartEventStore").ZenonLSCallStartEventStoreInstance);this.$4.save(d("ZenonLSE2EEStore").ZenonLSE2EEStoreInstance);this.$5.save(d("ZenonLSStarRatingsStore").ZenonLSStarRatingsStoreInstance);break;case"callEnded":yield this.$7(a);break;case"inviteReceived":this.$8(a);break;case"popupOpened":yield this.$9(a);this.$1.save(d("ZenonLSCallSummaryStore").ZenonLSCallSummaryStoreInstance);this.$2.save(d("ZenonLSPeerConnectionSummaryStore").ZenonLSPeerConnectionSummaryStoreInstance);this.$3.save(d("ZenonLSCallStartEventStore").ZenonLSCallStartEventStoreInstance);this.$4.save(d("ZenonLSE2EEStore").ZenonLSE2EEStoreInstance);this.$5.save(d("ZenonLSStarRatingsStore").ZenonLSStarRatingsStoreInstance);break}});function c(b){return a.apply(this,arguments)}return c}();e.$8=function(a){a=a.serverInfoData;if(a==null)return;this.$1.setSharedCallId(a);this.$2.setSharedCallId(a);this.$3.setSharedCallId(a);this.$4.setSharedCallId(a)};e.$9=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield this.$1.onCallEnded(d("ZenonDismissReason").ZenonDismissReason.ClientError,!1,!0,a.isPopupBlocked?"PopupBlocked":"PopupPending"),this.$1.save(d("ZenonLSCallSummaryStore").ZenonLSCallSummaryStoreInstance)});function c(b){return a.apply(this,arguments)}return c}();e.$7=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.isRemoteEnded)return;var b=a.endCallReason,c=a.endCallSubreason;a=a.isRemoteEnded;if(b===d("ZenonDismissReason").ZenonDismissReason.OtherInstanceHandled&&a)return;b===d("ZenonDismissReason").ZenonDismissReason.ClientError&&(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_client_crashes","zenon_client_error_end_call_reason");yield this.$1.onCallEnded(b,a,!1,c);this.$1.save(d("ZenonLSCallSummaryStore").ZenonLSCallSummaryStoreInstance);this.$2.save(d("ZenonLSPeerConnectionSummaryStore").ZenonLSPeerConnectionSummaryStoreInstance);this.$3.save(d("ZenonLSCallStartEventStore").ZenonLSCallStartEventStoreInstance);this.$4.save(d("ZenonLSE2EEStore").ZenonLSE2EEStoreInstance);this.$5.save(d("ZenonLSStarRatingsStore").ZenonLSStarRatingsStoreInstance)});function c(b){return a.apply(this,arguments)}return c}();return a}();e={LogProcessor:a};g.ZenonParentLSCallSummaryLogProcessor=a;g.ZenonParentLSCallSummaryLogProcessorConfig=e}),98);
__d("ZenonParentQPLLogProcessor",["Promise","QPLUserFlow","ZenonDismissReason","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a){var b=a.data;a=a.isE2eeMandated;this.$1=b.localCallID;this.$2=b.serverInfoData;this.$3=b.signalingID;this.$4=a}var e=a.prototype;e.processEvent=function(a){switch(a.name){case"inviteReceived":c("QPLUserFlow").start(c("qpl")._(64225282,"3408"),{annotations:{bool:{isE2eeMandated:this.$4}},instanceKey:+this.$3});c("QPLUserFlow").start(c("qpl")._(398997251,"1544"),{annotations:{bool:{isE2eeMandated:this.$4},string:{localCallID:this.$1,serverInfoData:this.$2}},instanceKey:+this.$3});c("QPLUserFlow").addPoint(c("qpl")._(398997251,"1544"),"invite_received",{instanceKey:+this.$3});break;case"callEnded":c("QPLUserFlow").endCancel(c("qpl")._(398997251,"1544"),{annotations:{string:{endCallReason:d("ZenonDismissReason").ZenonDismissReason.getName(a.endCallReason),endCallSubreason:a.endCallSubreason}},instanceKey:+this.$3});if(a.isRemoteEnded)return(h||(h=b("Promise"))).resolve();c("QPLUserFlow").endCancel(c("qpl")._(64225282,"3408"),{instanceKey:+this.$3});break;case"callAccepted":c("QPLUserFlow").addPoint(c("qpl")._(64225282,"3408"),"call_accepted",{instanceKey:+this.$3});c("QPLUserFlow").addPoint(c("qpl")._(398997251,"1544"),"call_accepted",{instanceKey:+this.$3});break;case"dismissRecv":c("QPLUserFlow").addPoint(c("qpl")._(64225282,"3408"),"dismiss_recv",{instanceKey:+this.$3});c("QPLUserFlow").addPoint(c("qpl")._(398997251,"1544"),"dismiss_recv",{instanceKey:+this.$3});break;case"inviteResponded":c("QPLUserFlow").addPoint(c("qpl")._(64225282,"3408"),"invite_responded",{instanceKey:+this.$3});c("QPLUserFlow").addPoint(c("qpl")._(398997251,"1544"),"invite_responded",{instanceKey:+this.$3});break;case"popupOpened":c("QPLUserFlow").endSuccess(c("qpl")._(64225282,"3408"),{instanceKey:+this.$3});c("QPLUserFlow").addPoint(c("qpl")._(398997251,"1544"),"popup_opened",{instanceKey:+this.$3});break}return(h||(h=b("Promise"))).resolve()};return a}();e={LogProcessor:a};g.ZenonParentQPLLogProcessor=a;g.ZenonParentQPLLogProcessorConfig=e}),98);
__d("ZenonParentSignalingClient",["Promise","ZenonDebugLogger","ZenonSignalingTypes","promiseDone","qpl","recoverableViolation","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a,b,d,e){var f=this;this.remoteSignalingID=null;this.$4="init";this.$6=null;this.$7=null;this.$8=function(){};this.$9=function(a,b,d){c("ZenonDebugLogger").getInstance().logStateMachine("ParentSignalingClient",f.$4,"received "+a.eventName,f.$1.getSignalingID());switch(a.eventName){case"inviteRequest":f.$11(a,b,d);break;case"remoteSdpRequest":f.$12(a,b);break;case"terminateRequest":f.$13(a,b,d);break}};this.$1=a;this.$3=d;this.$5=e;this.$2=b;b.setReceiver(this.$9);c("ZenonDebugLogger").getInstance().startQPL(c("qpl")._(64234815,"1094"),+a.getSignalingID())}var e=a.prototype;e.setSignalingEventHandlers=function(a){if(this.$6!=null){c("recoverableViolation")("setSignalingEventHandlers should only be called once, to avoid accidentally losing handlers.","rtc_www");return}this.$6=a};e.setLoggingEventHandler=function(a){this.$8=a};e.setSecureDataMessageManager=function(a){throw c("unrecoverableViolation")("setSecureDataMessageManager called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};e.getSignalingModel=function(){return this.$1};e.processReceiveEvent=function(a,b,d){throw c("unrecoverableViolation")("processReceiveEvent called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};e.sendDismiss=function(a){this.$4="terminated";a={eventName:"terminateRequest",fromJoinResponse:!1,reason:a,shouldInformPeer:!0};return this.$10(a)};e.receiveMessage=function(a){this.$2.receiveMessage(a)};e.isTerminated=function(){return this.$4==="terminated"};e.sendAnswerIntent=function(){if(this.$4==="inviteAcknowledged"){this.$4="answered";var a={eventName:"answerIntentRequest"};return this.$10(a)}else throw c("unrecoverableViolation")("sendAnswerIntent called in unexpected state "+this.$4,"rtc_www")};e.respondToInvite=function(a){if(this.$4==="inviteReceived"){if(this.$7==null)throw c("unrecoverableViolation")("respondToInvite called without inviteMessageId being populated first","rtc_www");this.$4="inviteAcknowledged";a={ackMessageId:this.$7,eventName:"inviteResponse",status:a};return this.$10(a)}else throw c("unrecoverableViolation")("respondToInvite called in unexpected state "+this.$4,"rtc_www")};e.initiateClientRenegotiation=function(a){throw c("unrecoverableViolation")("initiateClientRenegotiation called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};e.sendClientEvent=function(a){throw c("unrecoverableViolation")("sendClientEvent called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};e.sendInvite=function(a,b,d){throw c("unrecoverableViolation")("sendInvite called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};e.sendSdp=function(a,b){throw c("unrecoverableViolation")("sendSdp called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};e.sendIceCandidate=function(a){throw c("unrecoverableViolation")("sendIceCandidate called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};e.sendMediaUpdate=function(a){throw c("unrecoverableViolation")("sendMediaUpdate called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};e.sendAddParticipantsMessage=function(a){throw c("unrecoverableViolation")("sendAddParticipantsMessage called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};e.sendRemoveParticipantsRequest=function(a){throw c("unrecoverableViolation")("sendRemoveParticipantsRequest called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};e.sendUsersApprovalRequest=function(a,b){throw c("unrecoverableViolation")("sendUsersApprovalRequest called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};e.sendStateSyncUnsubscribe=function(a){throw c("unrecoverableViolation")("sendStateSyncUnsubscribe called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};e.sendStateSyncUpdate=function(a,b){throw c("unrecoverableViolation")("sendStateSyncUpdate called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};e.sendSubscriptionRequest=function(a){throw c("unrecoverableViolation")("sendSubscriptionRequest called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};e.sendClientInfo=function(a){throw c("unrecoverableViolation")("sendClientInfo called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};e.sendGenericDataMessage=function(a,b,d){throw c("unrecoverableViolation")("sendGenericDataMessage called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};e.silentlyTerminate=function(){throw c("unrecoverableViolation")("terminate called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};e.$10=function(a){var d=this;c("ZenonDebugLogger").getInstance().logStateMachine("ParentSignalingClient",this.$4,"sending "+a.eventName,this.$1.getSignalingID());return new(h||(h=b("Promise")))(function(b,c){return d.$3.sendEvent(a,b,c)})};e.$11=function(a,b,c){this.$4==="init"&&(this.$4="inviteReceived",this.$7=b,this.$5(a,c,this))};e.$13=function(a,b,d){if(this.$4!=="terminated"){this.$4="terminated";d={ackMessageId:b,eventName:"dismissResponse"};this.$3.sendEvent(d);if(this.$6&&this.$6.onDismissReceived){c("promiseDone")(this.$6.onDismissReceived(this.$1.getSignalingID(),a.reason,(b=a.subreason)!=null?b:null,a.detailedReasonFromMW))}}};e.$12=function(a,b){b={ackMessageId:b,acknowledgedVersion:a.sdp.version,eventName:"remoteSdpResponse",negotiateType:a.negotiateType,statusCode:d("ZenonSignalingTypes").ZenonSignalingStatusCode.OK,type:a.sdp.type};this.$3.sendEvent(b)};return a}();g["default"]=a}),98);
__d("ZenonSDKRateLimiter",["TokenBucketRateLimit","ZenonPlatformRateLimitSitevarConfig"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=new Map()}var b=a.prototype;b.take=function(a,b){b===void 0&&(b=1);a=this.$2(a);return a.take(b)};b.$2=function(a){var b,d=this.$1.get(a);if(d)return d;b=(b=c("ZenonPlatformRateLimitSitevarConfig").buckets.get(a))!=null?b:c("ZenonPlatformRateLimitSitevarConfig")["default"];d=new(c("TokenBucketRateLimit"))(b.bucket_size,b.refill_rate);this.$1.set(a,d);return d};return a}();g["default"]=a}),98);
__d("ZenonSignalingTransportTypes",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({CHILD_WINDOW_READY:"rtc_child_window_ready",PARENT_INITIATED_CALL:"rtc_child_window_start_call",PARENT_LOG_IDENTIFIERS:"rtc_parent_log_identifiers",PARENT_PCF_TIMINGS:"rtc_parent_pcf_timings",PARENT_QPL_MARKER:"rtc_parent_qpl_marker",PARENT_TO_CHILD_MESSAGE:"rtc_child_window_message"});f.ChildTransportMessageType=a}),66);
__d("isFacebookishURI",["isFacebookURI","isMessengerDotComURI"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("isFacebookURI")(a)||c("isMessengerDotComURI")(a)}g["default"]=a}),98);
__d("ZenonSignalingParentTransport",["MultiwaySharedTypes","QuickPerformanceLogger","RTWebIncomingRingConfiguration","Random","URI","ZenonBrowsers","ZenonE2eeMandatedStateManager","ZenonIGMediaUtil","ZenonProductConnectFunnel","ZenonSignalingTransportTypes","isFacebookishURI","performanceNow","recoverableViolation","shouldUseSFUMediaPath"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=45*1e3;a=function(){function a(a){var b=this;this.verificationNonce=null;this.portToChild=null;this.$1=null;this.$2=null;this.localCallID=null;this.$3=new Map();this.$4=new Map();this.$5=window;a!=null&&(this.$5=a);d("RTWebIncomingRingConfiguration").isSupportedClient()&&this.$5.addEventListener&&this.$5.addEventListener("message",function(a){b.handleWindowMessageFromChild(a)},!1)}var b=a.prototype;b.handleWindowMessageFromChild=function(a){var b=this;if(this.windowMessageValid(a)&&a.data.type===d("ZenonSignalingTransportTypes").ChildTransportMessageType.CHILD_WINDOW_READY&&this.hasPort(a)){var c;c=(c=a.data.roomID)!=null?c:null;var e=a.data.serverInfoData;this.portToChild=a.ports[0];a=a.data.childNonce;this.$2=a;this.$5.clearTimeout(this.$1);this.$1=this.$5.setTimeout(function(){b.portToChild=null},k);this.verificationNonce=this.generateNonce();this.startCallInChildWindow(c,e);this.sendQPLToChildWindow();this.sendPCFToChildWindow();this.sendLogIdentifiersToChildWindow(this.localCallID)}};b.generateNonce=function(){return String(d("Random").random())};b.hasPort=function(a){return Boolean(a.ports!=null&&Array.isArray(a.ports)&&a.ports[0]!=null)};b.getRingRequestBySID=function(a){a=l((a=this.$4.get(a))!=null?a:null);return{mwThriftRingRequest:a}};b.startCallInChildWindow=function(a,b){var c=null;if(b!==void 0){if(b!=null){b=this.getRingRequestBySID(b);c=b.mwThriftRingRequest}}else if(a!=null){c=l((b=this.$3.get(a))!=null?b:null)}a={mwThriftRingRequest:c,nonce:this.$2,type:d("ZenonSignalingTransportTypes").ChildTransportMessageType.PARENT_INITIATED_CALL};this.sendMessageToChild(a)};b.sendQPLToChildWindow=function(){var a=new Map();(h||(h=c("QuickPerformanceLogger"))).activeMarkers.forEach(function(b,c){(c===398997251||c===41156610)&&a.set(c,b)});if(a.size>0){var b={markers:a,nonce:this.$2,type:d("ZenonSignalingTransportTypes").ChildTransportMessageType.PARENT_QPL_MARKER,version:2};this.sendMessageToChild(b);a.forEach(function(a){for(a of a){var b=a[0],d=a[1];(h||(h=c("QuickPerformanceLogger"))).markerDrop(d.event,b)}})}};b.sendPCFToChildWindow=function(){var a=Math.trunc((i||(i=c("performanceNow")))()),b=c("ZenonProductConnectFunnel").getPreJoinTimings(),e=b.acceptedTs,f=b.ringingTs;b=b.triggeredTs;e={acceptedTs:e!=null?e-a:null,nonce:this.$2,ringingTs:f!=null?f-a:null,triggeredTs:b!=null?b-a:null,type:d("ZenonSignalingTransportTypes").ChildTransportMessageType.PARENT_PCF_TIMINGS};this.sendMessageToChild(e);c("ZenonProductConnectFunnel").clearPreJoinTimings()};b.sendLogIdentifiersToChildWindow=function(a){a={localCallID:a,nonce:this.$2,type:d("ZenonSignalingTransportTypes").ChildTransportMessageType.PARENT_LOG_IDENTIFIERS};this.sendMessageToChild(a)};b.windowMessageValid=function(a){return Boolean(a.origin===this.$5.location.origin||c("isFacebookishURI")(new(j||(j=c("URI")))(a.origin))&&c("isFacebookishURI")(new(j||(j=c("URI")))(this.$5.location.origin)))&&this.postMessageValid(a)};b.postMessageValid=function(a){return this.verificationNonce!==null&&(a==null?void 0:(a=a.data)==null?void 0:a.nonce)===this.verificationNonce};b.sendMessageToChild=function(a){this.portToChild!=null?this.portToChild.postMessage(a):c("recoverableViolation")("The child window port should be available","rtc_www")};b.enqueueRawMWThriftMessage=function(a,b){var c=a.messageBody,d=a.messageHeader;c=c.ringRequest;if(c){c=d.conferenceName;d=d.serverInfoData;c!=null&&this.$3.set(c,{parsedMessage:b,rawMessage:a});d!=null&&this.$4.set(d,{parsedMessage:b,rawMessage:a})}};b.testGetChildNonce=function(){return this.$2};return a}();function l(a){var b;if(a==null)return null;var e=a.parsedMessage;a=a.rawMessage;if(e==null)return null;e=n(e);if((e==null?void 0:e.eventName)!=="inviteRequest")return null;e=(e=(e=a.messageBody.ringRequest)==null?void 0:e.isLegacyCall)!=null?e:!1;b=((b=a.messageBody.ringRequest)==null?void 0:(b=b.e2eeEnforcement)==null?void 0:b.mode)===d("MultiwaySharedTypes").E2eeMode.E2EE_MANDATED;c("ZenonE2eeMandatedStateManager").processE2eeMandatedStateFromProductAndRing(b,(b=a.messageBody.ringRequest)==null?void 0:(b=b.e2eeEnforcement)==null?void 0:b.infraMandatedExpStatus);return o(e)?a:p(a)}function m(a){return d("ZenonBrowsers").isFirefox()||c("shouldUseSFUMediaPath")(a)||c("ZenonIGMediaUtil").shouldUseSFUOnly()}function n(a){a=a.getEvents().find(function(a){return a.eventName==="inviteRequest"});return a}function o(a){return a||!m(!1)}function p(a){var b;(b=a.messageBody.ringRequest)==null?void 0:delete b.offer;return a}g["default"]=a}),98);
__d("ZenonParentCallsManager",["BaseEventEmitter","FBLogger","JSResource","JSResourceForInteraction","LazyLoadInstance","OverlayConfigManagerWithServerLayer","Promise","RTWebIncomingRingConfiguration","ZenonActorHooks","ZenonBrowsers","ZenonCallLogger","ZenonCallsModelTypes","ZenonCollisionContext","ZenonDeviceId","ZenonDismissReason","ZenonMessageSenderChain","ZenonMqttMWThriftMessageSender","ZenonParentClientPerfQPLLogProcessor","ZenonParentLSCallSummaryLogProcessor","ZenonParentQPLLogProcessor","ZenonParentSignalingClient","ZenonSDKRateLimiter","ZenonSignalingParentTransport","promiseDone","recoverableViolation","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("JSResourceForInteraction")("setE2eeIsMandatedForZenonLoggers").__setRef("ZenonParentCallsManager"),j=c("JSResourceForInteraction")("ZenonGraphQLMWThriftMessageSender").__setRef("ZenonParentCallsManager");a=function(a){babelHelpers.inheritsLoose(e,a);function e(e){var f;f=a.call(this)||this;f.$ZenonParentCallsManager$p_4=new Map();f.$ZenonParentCallsManager$p_5=new Set();f.$ZenonParentCallsManager$p_6=null;f.$ZenonParentCallsManager$p_8=[];f.onInviteReceived=function(a,b,e){var g,h=e.getSignalingModel().getSignalingID();e.setSignalingEventHandlers({onDismissReceived:f.onDismissReceived});var i=a.appMessages,j=a.inviterID,k=a.isE2eeMandated,l=a.otherParticipants,m=a.requestingVideo,n=a.roomInfo,o=a.serverInfoData;k===!0&&f.$ZenonParentCallsManager$p_10(h);var p=m&&d("ZenonBrowsers").supportsVideoCalls(),q="multiway_incoming",r=c("uuidv4")(),s=f.$ZenonParentCallsManager$p_11({callTrigger:q,isCaller:!1,isVideo:p,localCallID:r,peerID:j,protocol:b,signalingID:h},k!=null?k:!1);s==null?void 0:s.log({name:"inviteReceived",serverInfoData:o});m=d("RTWebIncomingRingConfiguration").isSupportedClient();var t=m?"OK":"NOT_SUPPORTED";c("promiseDone")(e.respondToInvite(t));s==null?void 0:s.log({name:"inviteResponded"});t={thread:{id:"0",type:2},type:"thread"};if(n.context!=null&&(((g=n.context)==null?void 0:g.groupThreadID)!=null||((g=n.context)==null?void 0:g.peerID)!=null)){g=(g=a.appMessages)==null?void 0:g.collision_context_payload;var u=null;if(g!=null)try{u=JSON.parse(g).calling_tags}catch(a){}g=k===!0&&u===2;if(n.context!=null){t={thread:(u=d("ZenonCollisionContext").getThreadIDAndTypeFromCollisionContext(n.context,g))!=null?u:{id:"0",type:2},type:"thread"}}}else((g=n.room)==null?void 0:g.linkHash)!=null&&((u=n.room)==null?void 0:u.roomName)!=null&&(t={room:n.room,type:"room"});u=(g=a.actorID)!=null?g:d("ZenonActorHooks").ZenonActor.getID();g={mwThriftRingRequest:null};o!=null&&(g=f.$ZenonParentCallsManager$p_2.getRingRequestBySID(o));i={actorID:a.actorID,context:t,controllerParams:{appMessages:i,callContext:n.name,configuration:b,serverInfoData:(t=(o=n.context)==null?void 0:o.serverInfoData)!=null?t:null,signalingID:h},inviterID:j,isClientPermissableRing:m,isE2eeMandated:k!=null?k:!1,onAccept:function(a,d){d=d.isPopupBlocked;s==null?void 0:s.log({name:"callAccepted",trigger:q});c("promiseDone")(e.sendAnswerIntent());f.$ZenonParentCallsManager$p_12(a,{callTrigger:q,isE2eeMandated:k!=null?k:!1,isPopupBlocked:d,isVideo:p,peerID:j,protocol:b,signalingID:h},r)},onDecline:function(a,b){b===void 0&&(b=null),f.onDecline(h,s,a,b)},otherParticipants:l.includes(u)?l:[u].concat(l),receiverUserId:a.userID,requestingVideo:p,ringID:h,ringRequest:g};f.emit("incomingRing",i)};f.onDismissReceived=function(a,c){var e=d("ZenonDismissReason").dismissReasonToCancelReason(c);e={reason:e,ringID:a};f.emit("ringCancel",e);e=f.$ZenonParentCallsManager$p_4.get(a);e!=null&&(e.log({name:"dismissRecv"}),e.log({endCallReason:c,isRemoteEnded:!0,name:"callEnded"}));return(h||(h=b("Promise"))).resolve()};f.$ZenonParentCallsManager$p_7=new(c("OverlayConfigManagerWithServerLayer"))();f.$ZenonParentCallsManager$p_3=e;f.$ZenonParentCallsManager$p_2=new(c("ZenonSignalingParentTransport"))(window);var g=new(c("ZenonMessageSenderChain"))([new(c("ZenonMqttMWThriftMessageSender"))()]);c("promiseDone")(j.load(),function(a){if(e.relayEnvironment){a=new a(e.relayEnvironment);g.addMessageSender(a)}});f.$ZenonParentCallsManager$p_1=new(c("LazyLoadInstance"))(c("JSResource")("ZenonSignalingClientManager").__setRef("ZenonParentCallsManager"),function(a){return new a(c("ZenonParentSignalingClient"),f.onInviteReceived,g)});f.$ZenonParentCallsManager$p_6=new(c("ZenonSDKRateLimiter"))();return f}var f=e.prototype;f.startOutgoingCallIntent=function(a,b){if(!this.$ZenonParentCallsManager$p_9("startOutgoingCallIntent"))return;var d=b.callTrigger,e=b.isE2eeMandated,f=b.isVideo,g=b.peerID,h=b.protocol,i=b.signalingID;e&&this.$ZenonParentCallsManager$p_10(i);var j=c("uuidv4")();this.$ZenonParentCallsManager$p_11({callTrigger:d,isCaller:!0,isVideo:f,localCallID:j,peerID:g,protocol:h,signalingID:i},e);this.$ZenonParentCallsManager$p_12(a,b,j)};f.$ZenonParentCallsManager$p_11=function(a,b){var d,e=a.callTrigger,f=a.isCaller,g=a.isVideo,h=a.localCallID,i=a.peerID,j=a.protocol;a=a.signalingID;d=(d=this.$ZenonParentCallsManager$p_4.get(a))!=null?d:null;if(e==="meetup_join")return d;if(d!=null){c("recoverableViolation")("Call logger key collision in parentCallsManager for signalingID: "+a,"rtc_www");return d}var k=new(c("ZenonCallLogger"))({config:this.$ZenonParentCallsManager$p_7,initLoggerInfo:{callTrigger:e,isCaller:f,isVideo:g,localCallID:h,peerID:i,protocol:j,signalingID:a},isE2eeMandated:b,processorConfigs:this.getLogProcessors()});this.$ZenonParentCallsManager$p_4.set(a,k);this.$ZenonParentCallsManager$p_8.forEach(function(a){a.setLoggingEventHandler(function(a){return k.log(a)})});return k};f.getLogProcessors=function(){var a=[d("ZenonParentLSCallSummaryLogProcessor").ZenonParentLSCallSummaryLogProcessorConfig,d("ZenonParentQPLLogProcessor").ZenonParentQPLLogProcessorConfig,d("ZenonParentClientPerfQPLLogProcessor").ZenonParentClientPerfQPLLogProcessorConfig];return a};f.$ZenonParentCallsManager$p_12=function(a,b,c){var e=b.isPopupBlocked;b=b.signalingID;this.$ZenonParentCallsManager$p_2.localCallID=c;this.$ZenonParentCallsManager$p_2.verificationNonce=a;this.$ZenonParentCallsManager$p_5.add(b);c=this.$ZenonParentCallsManager$p_4.get(b);c!=null&&c.log({isPopupBlocked:e,name:"popupOpened"});d("ZenonDeviceId").setZenonLocalStorageDeviceId(d("ZenonDeviceId").getZenonLocalStorageDeviceIdWithFallback())};f.initListeners=function(a){var b=this;this.$ZenonParentCallsManager$p_8=a;for(a of a)a.subscribe(function(a){return b.onMessageReceived(a)},function(a,c){return b.$ZenonParentCallsManager$p_2.enqueueRawMWThriftMessage(a,c)})};f.onMessageReceived=function(a){var b=a.getHeader().signalingID;if(b!=null&&this.$ZenonParentCallsManager$p_5.has(b))return;this.$ZenonParentCallsManager$p_1.get(function(b){b.receiveMessage(a)})};f.onDecline=function(a,b,e,f){f===void 0&&(f=null),this.$ZenonParentCallsManager$p_1.get(function(g){g=g.getSignalingClient(a);if(g){var h=d("ZenonDismissReason").endCallToDismissReason(e);e!=="VersionUnsupported"&&f!==d("ZenonCallsModelTypes").ZenonEndCallSubreason.CallsBlocked&&c("promiseDone")(g.sendDismiss(h));b==null?void 0:b.log({endCallReason:h,endCallSubreason:f==null?null:f,isRemoteEnded:!1,name:"callEnded"})}else c("recoverableViolation")("signaling client should be defined","rtc_www")})};f.removeListeners=function(a){for(a of a)a.unsubscribe()};f.$ZenonParentCallsManager$p_9=function(a){if(this.$ZenonParentCallsManager$p_6&&!this.$ZenonParentCallsManager$p_6.take(a)){c("FBLogger")("rtc_www").warn("[ZP] Dropping %s invocation. This SDK method is being called too rapidly.",a);return!1}return!0};f.$ZenonParentCallsManager$p_10=function(a){c("promiseDone")(i.load(),function(b){return b(a)})};return e}(c("BaseEventEmitter"));g["default"]=a}),98);
__d("delegateZenonCallInviteModel",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){a.getCurrentInvite=b.getCurrentInvite.bind(b),a.startListening=b.startListening.bind(b),a.stopListening=b.stopListening.bind(b),a.dismiss=b.dismiss.bind(b),a.accept=b.accept.bind(b),a.decline=b.decline.bind(b),b.addListener("callInvite",function(b){a.emit("callInvite",b)})}f["default"]=a}),66);/*FB_PKG_DELIM*/
__d("InstagramAdDirectReshareSendFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("3447");b=d("FalcoLoggerInternal").create("instagram_ad_direct_reshare_send",a);e=b;g["default"]=e}),98);
__d("InstagramAdHideResponseFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("3449");b=d("FalcoLoggerInternal").create("instagram_ad_hide_response",a);e=b;g["default"]=e}),98);
__d("PolarisAPIEditCollection",["PolarisInstapi","emptyObject","isStringNullOrEmpty"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.collectionId,e=a.collectionName,f=a.postIdsToAdd;a=a.postIdsToRemove;f=babelHelpers["extends"]({added_media_ids:JSON.stringify(f!=null?f:[]),removed_media_ids:JSON.stringify(a!=null?a:[])},c("isStringNullOrEmpty")(e)?c("emptyObject"):{name:e});return d("PolarisInstapi").apiPost("/api/v1/collections/{collection_id}/edit/",{body:f,path:{collection_id:b}}).then(function(a){return a.data})}g.editCollection=a}),98);
__d("PolarisAPIGetChildComments",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){return d("PolarisInstapi").apiGet("/api/v1/media/{media_id}/comments/{parent_comment_id}/child_comments/",{path:{media_id:a,parent_comment_id:b},query:babelHelpers["extends"]({},c!=null?{max_id:c}:{})}).then(function(a){return a.data})}g.getChildComments=a}),98);
__d("PolarisAPIGetInitialComments",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){return d("PolarisInstapi").apiGet("/api/v1/media/{media_id}/comments/",{path:{media_id:a},query:{can_support_threading:!0,permalink_enabled:!!b,sort_order:c!=null?String(c):void 0,target_comment_id:b}}).then(function(a){return a.data})}g.getInitialComments=a}),98);
__d("PolarisAPIGetPaginationComments",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e){c===void 0&&(c=!0);return d("PolarisInstapi").apiGet("/api/v1/media/{media_id}/comments/",{path:{media_id:a},query:babelHelpers["extends"]({can_support_threading:!0},c===!0?{min_id:b}:{max_id:b},{sort_order:String(e)})}).then(function(a){return a.data})}g.getPaginationComments=a}),98);
__d("PolarisAPILikePost",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("PolarisInstapi").apiPost("/api/v1/web/likes/{media_id}/like/",{path:{media_id:a}})}g.likePost=a}),98);
__d("PolarisAPIPostNotifyGuardianCall",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){var e="/api/v1/users/notify_guardian_call/";a={guardian_igid:a,reported_category:c,reported_igid:b};return d("PolarisInstapi").apiPost(e,{body:a}).then(function(a){return a.data})}g.postNotifyGuardianCall=a}),98);
__d("PolarisAPISavePost",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("PolarisInstapi").apiPost("/api/v1/web/save/{media_id}/save/",{path:{media_id:a}})}g.savePost=a}),98);
__d("PolarisAPIUnlikePost",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("PolarisInstapi").apiPost("/api/v1/web/likes/{media_id}/unlike/",{path:{media_id:a}})}g.unlikePost=a}),98);
__d("PolarisAPIUnsavePost",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("PolarisInstapi").apiPost("/api/v1/web/save/{media_id}/unsave/",{path:{media_id:a}})}g.unsavePost=a}),98);
__d("PolarisFRXBlockUserFollowupModal.react",["CometPlaceholder.react","I64","IGDSConfirmDialog.react","IGDSGlimmer.react","JSResourceForInteraction","PolarisBlockDialogContainer.react","PolarisFRXWebReportStrings","PolarisGenericStrings","PolarisLinkBuilder","PolarisNavigationUtils","PolarisReactRedux.react","PolarisReportConstants","isStringNullOrEmpty","lazyLoadComponent","polarisRelationshipSelectors.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));h.useCallback;var k=c("lazyLoadComponent")(c("JSResourceForInteraction")("IGDBlockUserDialog.react").__setRef("PolarisFRXBlockUserFollowupModal.react"));function l(a,b){a=a.userToBlock.id;return d("polarisRelationshipSelectors.react").getRelationship(b.relationships,a)}function m(a){a.onClose&&a.onClose()}function a(a){var b=d("react-compiler-runtime").c(24),e;b[0]!==a?(e=function(b){return l(a,b)},b[0]=a,b[1]=e):e=b[1];e=d("PolarisReactRedux.react").useSelector(e);var f=a.isGroupThread,g=a.onClose,h=a.shouldReportAsInstamadillo,p=a.threadKey,q=a.userToBlock,r=a.useSimpleBlockModalWithoutRefresh,s=q.fbidV2,t=q.id;q=q.username;var u=n(a.frxObjectType),v;b[2]!==g?(v=function(){g()},b[2]=g,b[3]=v):v=b[3];v=v;if(u&&q!=null){b[4]===Symbol["for"]("react.memo_cache_sentinel")?(u=j.jsx(c("IGDSGlimmer.react"),{index:0}),b[4]=u):u=b[4];var w;b[5]!==t?(w=(i||(i=d("I64"))).of_string(t),b[5]=t,b[6]=w):w=b[6];f=f!=null?f:!1;h=h!=null?h:!1;b[7]!==v||b[8]!==w||b[9]!==f||b[10]!==h||b[11]!==p||b[12]!==q?(u=j.jsx(c("CometPlaceholder.react"),{fallback:u,children:j.jsx(k,{clickPoint:"report",contactID:w,isAfterReport:!0,isBlocked:!1,isGroup:f,onClose:v,shouldReportAsInstamadillo:h,threadKey:p,userName:q})}),b[7]=v,b[8]=w,b[9]=f,b[10]=h,b[11]=p,b[12]=q,b[13]=u):u=b[13];return u}if(!t)return null;if(r===!0){b[14]!==a?(v=j.jsx(o,babelHelpers["extends"]({},a)),b[14]=a,b[15]=v):v=b[15];return v}b[16]!==a?(w=function(){return m(a)},b[16]=a,b[17]=w):w=b[17];b[18]!==s||b[19]!==e||b[20]!==w||b[21]!==t||b[22]!==q?(f=j.jsx(c("PolarisBlockDialogContainer.react"),{fbidV2:s,onClose:w,relationship:e,userId:t,username:q}),b[18]=s,b[19]=e,b[20]=w,b[21]=t,b[22]=q,b[23]=f):f=b[23];return f}function n(a){switch(a){case d("PolarisReportConstants").FRXObjectType.DIRECT_MESSAGE:case d("PolarisReportConstants").FRXObjectType.DIRECT_MESSAGE_THREAD:case d("PolarisReportConstants").FRXObjectType.ENCRYPTED_DIRECT_MESSAGE:return!0;default:return!1}}function o(a){var b=d("react-compiler-runtime").c(18),e=a.userToBlock;e=e.username;var f,g,h,i;b[0]!==e?(i=c("isStringNullOrEmpty")(e)?null:d("PolarisLinkBuilder").buildUserLink(e),h=c("isStringNullOrEmpty")(i),b[0]=e,b[1]=f,b[2]=g,b[3]=h,b[4]=i):(f=b[1],g=b[2],h=b[3],i=b[4]);if(!h){f=d("PolarisGenericStrings").CANCEL_TEXT;b[5]!==a||b[6]!==i?(h={confirmLabel:d("PolarisFRXWebReportStrings").VIEW_PROFILE_BUTTON_TEXT,onConfirm:function(){d("PolarisNavigationUtils").openURLWithFullPageReload(i),m(a)}},b[5]=a,b[6]=i,b[7]=h):h=b[7];g=h}else{f=d("PolarisGenericStrings").CLOSE_TEXT;b[8]===Symbol["for"]("react.memo_cache_sentinel")?(h={},b[8]=h):h=b[8];g=h}h=g;var k=f,l;b[9]!==a?(l=function(){return m(a)},b[9]=a,b[10]=l):l=b[10];var n;b[11]!==e?(n=d("PolarisFRXWebReportStrings").getBlockUserModalTitle(e),b[11]=e,b[12]=n):n=b[12];b[13]!==f||b[14]!==g||b[15]!==l||b[16]!==n?(e=j.jsx(c("IGDSConfirmDialog.react"),babelHelpers["extends"]({},h,{body:d("PolarisFRXWebReportStrings").BLOCK_USER_THROUGH_PROFILE_MODAL_CONTENT,cancelLabel:k,onClose:l,title:n})),b[13]=f,b[14]=g,b[15]=l,b[16]=n,b[17]=e):e=b[17];return e}g["default"]=a}),98);
__d("PolarisFRXNotifyGuardianFollowupModal.react",["IGDSConfirmDialog.react","PolarisFRXWebReportStrings","react","react-compiler-runtime","usePolarisViewer"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function j(a){a.onClose&&a.onClose()}function k(a,b,c){a.onNotify&&a.onNotify(b,c)}function a(a){var b=d("react-compiler-runtime").c(14),e=c("usePolarisViewer")(),f=e==null?void 0:e.guardianId;b[0]!==f||b[1]!==a?(e={confirmLabel:d("PolarisFRXWebReportStrings").SEND_BUTTON_TEXT,onConfirm:function(){k(a,!0,f)}},b[0]=f,b[1]=a,b[2]=e):e=b[2];e=e;var g;b[3]!==a.guardianUsername||b[4]!==a.reportedTagTitle||b[5]!==a.reportedUsername?(g=d("PolarisFRXWebReportStrings").getNotifyGuardianModalText(a.guardianUsername,a.reportedTagTitle,a.reportedUsername),b[3]=a.guardianUsername,b[4]=a.reportedTagTitle,b[5]=a.reportedUsername,b[6]=g):g=b[6];var h;b[7]!==f||b[8]!==a?(h=function(){k(a,!1,f),j(a)},b[7]=f,b[8]=a,b[9]=h):h=b[9];var l;b[10]!==e||b[11]!==g||b[12]!==h?(l=i.jsx(c("IGDSConfirmDialog.react"),babelHelpers["extends"]({},e,{body:g,cancelLabel:d("PolarisFRXWebReportStrings").DONT_SEND_BUTTON_TEXT,onClose:h,title:d("PolarisFRXWebReportStrings").NOTIFY_GUARDIAN_MODAL_TITLE_NO_QUESTION})),b[10]=e,b[11]=g,b[12]=h,b[13]=l):l=b[13];return l}g["default"]=a}),98);
__d("PolarisFRXReportBaseScreenModal.react",["cx","IGDSBox.react","IGDSDialogHeader.react","IGDSDialogLegacy.react","PolarisFRXWebReportConstants","PolarisFRXWebReportStrings","PolarisUA","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=4,l=4,m=4,n=!1;function a(a,b,c){a=a||{};var e=a.response;a=a.type;if(a===d("PolarisFRXWebReportConstants").FRX_SCREEN_PAYLOAD_TYPE_INTS.CONFIRMATION)return{headerEnabled:!1};a=e||{};e=a.title;e=(a=e==null?void 0:e.text)!=null?a:d("PolarisFRXWebReportStrings").DEFAULT_MODAL_HEADER_TEXT;return{headerEnabled:!0,onBackButton:c,titleText:e,withBackButton:b}}function o(a){a.onClose&&a.onClose()}function b(a){var b,e=d("react-compiler-runtime").c(8),f=d("PolarisUA").isMobile()?"large":"default";b=(b=a.headerParams.titleText)!=null?b:void 0;var g;e[0]!==a?(g=function(){return o(a)},e[0]=a,e[1]=g):g=e[1];var h;e[2]!==a?(h=j.jsxs("div",{className:"_acgx"+(f==="large"?" _acqj":""),children:[j.jsx(p,babelHelpers["extends"]({},a)),j.jsx(q,babelHelpers["extends"]({},a))]}),e[2]=a,e[3]=h):h=e[3];e[4]!==b||e[5]!==g||e[6]!==h?(f=j.jsx(c("IGDSDialogLegacy.react"),{label:b,onClose:g,size:f,testid:void 0,children:h}),e[4]=b,e[5]=g,e[6]=h,e[7]=f):f=e[7];return f}function p(a){var b=d("react-compiler-runtime").c(11),e=a.headerParams,f=e.headerEnabled,g=e.titleText,h=e.onBackButton;e=e.withBackButton;e=e===void 0?n:e;if(!f)return null;b[0]!==h||b[1]!==e?(f=e&&h?{onBack:function(){return h()}}:void 0,b[0]=h,b[1]=e,b[2]=f):f=b[2];e=f;b[3]!==a?(f=function(){return o(a)},b[3]=a,b[4]=f):f=b[4];var i;b[5]!==g?(i=j.jsx(j.Fragment,{children:g}),b[5]=g,b[6]=i):i=b[6];b[7]!==e||b[8]!==f||b[9]!==i?(g=j.jsx(c("IGDSDialogHeader.react"),babelHelpers["extends"]({onClose:f},e,{children:i})),b[7]=e,b[8]=f,b[9]=i,b[10]=g):g=b[10];return g}function q(a){var b=d("react-compiler-runtime").c(5),e=a.children;a=a.disableDefaultBodyPaddingMargin;a=a===void 0?!1:a;var f,g;a?f=g=a=0:(f=k,a=m,g=l);var h;b[0]!==g||b[1]!==a||b[2]!==f||b[3]!==e?(h=j.jsx("div",{className:"_acgy",children:j.jsx("div",{className:"_acgz",children:j.jsx(c("IGDSBox.react"),{marginBottom:g,marginTop:a,paddingX:f,position:"relative",children:e})})}),b[0]=g,b[1]=a,b[2]=f,b[3]=e,b[4]=h):h=b[4];return h}g.DEFAULT_BODY_PADDING_X=k;g.DEFAULT_BODY_MARGIN_BOTTOM=l;g.DEFAULT_BODY_MARGIN_TOP=m;g.getDefaultScreenModalHeaderParamsFromScreenPayload=a;g.FRXReportBaseScreenModal=b}),98);
__d("PolarisFRXReportModalLinkUtils",["URI","polarisIsInternalURIString","vulture"],(function(a,b,c,d,e,f,g){"use strict";var h,i="help.instagram.com";function j(a){return c("polarisIsInternalURIString")(a)&&new(h||(h=c("URI")))(a).getDomain()===i}function a(a){c("vulture")("87IWjEpngPgUKv5ng2LFYTxoWeI=");return j(a)||!c("polarisIsInternalURIString")(a)}g.shouldLinkUseBlankTarget=a}),98);
__d("PolarisFRXReportMainButton.react",["PolarisFRXReportModalLinkUtils","PolarisIGCoreButton.react","isStringNullOrEmpty","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(13),e=a["data-testid"],f=a.disabled,g=a.href,h=a.onClick,j=a.primaryButton,k=a.spinner;a=a.text;var l;if(!c("isStringNullOrEmpty")(g)&&f!==!0){var m=d("PolarisFRXReportModalLinkUtils").shouldLinkUseBlankTarget(g)?"_blank":void 0,n;b[0]!==g||b[1]!==m?(n={href:g,target:m},b[0]=g,b[1]=m,b[2]=n):n=b[2];l=n}g=(j!=null?j:!0)?"ig-primary-button":"ig-secondary-button";m=!!f;n=!!k;b[3]!==h?(j=function(){return h&&h()},b[3]=h,b[4]=j):j=b[4];b[5]!==l||b[6]!==g||b[7]!==m||b[8]!==n||b[9]!==j||b[10]!==e||b[11]!==a?(f=i.jsx(c("PolarisIGCoreButton.react"),babelHelpers["extends"]({},l,{color:g,"data-testid":void 0,disabled:m,loading:n,onClick:j,children:a})),b[5]=l,b[6]=g,b[7]=m,b[8]=n,b[9]=j,b[10]=e,b[11]=a,b[12]=f):f=b[12];return f}g["default"]=a}),98);
__d("PolarisFRXReportModalFollowUpActionSectionFetaSupervisionQuery_instagramRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9617087628339557"}),null);
__d("PolarisFRXReportModalFollowUpActionSectionFetaSupervisionQuery.graphql",["PolarisFRXReportModalFollowUpActionSectionFetaSupervisionQuery_instagramRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"is_f3_supervised_user",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PolarisFRXReportModalFollowUpActionSectionFetaSupervisionQuery",selections:[{alias:null,args:null,concreteType:"XFBYouthPlatformApi",kind:"LinkedField",name:"xfb_youth_platform",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBYouthPlatformViewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"RequiredField",field:a,action:"THROW"}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"PolarisFRXReportModalFollowUpActionSectionFetaSupervisionQuery",selections:[{alias:null,args:null,concreteType:"XFBYouthPlatformApi",kind:"LinkedField",name:"xfb_youth_platform",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBYouthPlatformViewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("PolarisFRXReportModalFollowUpActionSectionFetaSupervisionQuery_instagramRelayOperation"),metadata:{},name:"PolarisFRXReportModalFollowUpActionSectionFetaSupervisionQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("PolarisFRXReportModalOptionList.react",["cx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(4),c=a.asRadio;a=a.children;c=c===void 0?!1:c;var e="_ac7r";if(c){b[0]!==a?(c=j.jsx("fieldset",{className:e,children:a}),b[0]=a,b[1]=c):c=b[1];return c}b[2]!==a?(c=j.jsx("div",{className:e,role:"list",children:a}),b[2]=a,b[3]=c):c=b[3];return c}g["default"]=a}),98);
__d("PolarisFRXReportModalRichTextRenderer.react",["IGDSTextVariants.react","PolarisFRXReportModalLinkUtils","PolarisFastLink.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={BOLD:1,CODE:8,ITALIC:2,NONE:0,QUOTE:128,STRIKETHROUGH:16,SUBSCRIPT:32,SUPERSCRIPT:64,UNDERLINE:4},k={"#000000":"web-always-black","#00376B":"ig-link","#0095F6":"ig-primary-button","#262626":"ig-primary-text","#58C322":"DEPRECATED_green","#8E8E8E":"ig-secondary-text","#c7c7c7":"ig-tertiary-text","#ed4956":"ig-error-or-destructive","#ffffff":"web-always-white"};function a(a){var b=d("react-compiler-runtime").c(20),e=a.children,f=a.className,g=a.color,h=a["data-testid"],l=a.href,m=a.onClick;a=a.style;var n=e,o=l!==""&&l!=null,p;!o&&g!=null&&(p=g in k?k[g]:void 0);if(a!=null&&(g!=null||o))bb0:switch(a){case j.BOLD:b[0]!==e||b[1]!==p?(g=i.jsx(d("IGDSTextVariants.react").IGDSTextBodyEmphasized,{color:p,children:e}),b[0]=e,b[1]=p,b[2]=g):g=b[2];n=g;break bb0;case j.SUBSCRIPT:b[3]!==e||b[4]!==p?(o=i.jsx(d("IGDSTextVariants.react").IGDSTextBody2,{color:p,children:e}),b[3]=e,b[4]=p,b[5]=o):o=b[5];n=o;break bb0;default:b[6]!==e||b[7]!==p?(a=i.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:p,children:e}),b[6]=e,b[7]=p,b[8]=a):a=b[8];n=a}if(l!==""&&l!=null){b[9]!==m?(g=function(){return m&&m()},b[9]=m,b[10]=g):g=b[10];o=d("PolarisFRXReportModalLinkUtils").shouldLinkUseBlankTarget(l)?"_blank":void 0;b[11]!==f||b[12]!==l||b[13]!==n||b[14]!==g||b[15]!==o||b[16]!==h?(e=i.jsx(c("PolarisFastLink.react"),{className:f,"data-testid":void 0,href:l,onClick:g,target:o,children:n}),b[11]=f,b[12]=l,b[13]=n,b[14]=g,b[15]=o,b[16]=h,b[17]=e):e=b[17];return e}b[18]!==n?(a=i.jsx(i.Fragment,{children:n}),b[18]=n,b[19]=a):a=b[19];return a}g["default"]=a}),98);
__d("PolarisFRXReportModalOptionListItem.react",["cx","fbt","IGDSBox.react","IGDSChevronIcon.react","IGDSRadioButton.react","IGDSSpinner.react","PolarisFRXReportModalRichTextRenderer.react","isStringNullOrEmpty","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l={BUTTON:"button",LINK:"link",RADIO:"radio"},m={DEFAULT:"default",GREY:"grey",RED:"red"},n=4;function o(a){a.onSelect&&a.onSelect()}function p(a){a=a.href;return c("isStringNullOrEmpty")(a)?l.BUTTON:l.LINK}function a(a){var b=d("react-compiler-runtime").c(37),e=a.children,f=a["data-testid"],g=a.href,h=a.variant,i=a.textColor,j=a.disabled;h=h===void 0?p(a):h;i=i===void 0?m.DEFAULT:i;var r=h===l.RADIO;e=e;if(!r){var s;b[0]!==e?(s=k.jsx(c("IGDSBox.react"),{flex:"grow",position:"relative",children:e}),b[0]=e,b[1]=s):s=b[1];var t;b[2]!==j||b[3]!==a?(t=j!==!0&&k.jsx(q,babelHelpers["extends"]({},a)),b[2]=j,b[3]=a,b[4]=t):t=b[4];var u;b[5]!==s||b[6]!==t?(u=k.jsxs(c("IGDSBox.react"),{alignContent:"center",alignItems:"center",direction:"row",padding:n,position:"relative",children:[s,t]}),b[5]=s,b[6]=t,b[7]=u):u=b[7];e=u}s="_abn2"+(i===m.RED?" _abn3":"")+(i===m.GREY?" _abn4":"");if(r){t=a.selected;u=a.value;i=u===void 0?"":u;b[8]!==e||b[9]!==s?(r=k.jsx("div",{className:s,children:e}),b[8]=e,b[9]=s,b[10]=r):r=b[10];b[11]!==a?(u=function(){return o(a)},b[11]=a,b[12]=u):u=b[12];var v;b[13]!==t||b[14]!==r||b[15]!==u||b[16]!==i?(v=k.jsx(c("IGDSRadioButton.react"),{isChecked:t,label:r,onChange:u,value:i}),b[13]=t,b[14]=r,b[15]=u,b[16]=i,b[17]=v):v=b[17];b[18]!==v||b[19]!==f?(t=k.jsx(c("IGDSBox.react"),{"data-testid":void 0,padding:n,children:v}),b[18]=v,b[19]=f,b[20]=t):t=b[20];return t}else if(h===l.LINK&&g!=null&&g!==""){b[21]!==a?(r=function(){return o(a)},b[21]=a,b[22]=r):r=b[22];b[23]!==e||b[24]!==g||b[25]!==s||b[26]!==r||b[27]!==f?(u=k.jsx(c("PolarisFRXReportModalRichTextRenderer.react"),{className:s,"data-testid":void 0,href:g,onClick:r,children:e}),b[23]=e,b[24]=g,b[25]=s,b[26]=r,b[27]=f,b[28]=u):u=b[28];return u}b[29]!==a?(i=function(){return o(a)},b[29]=a,b[30]=i):i=b[30];b[31]!==e||b[32]!==j||b[33]!==s||b[34]!==i||b[35]!==f?(v=k.jsx("button",{className:s,"data-testid":void 0,disabled:j,onClick:i,children:e}),b[31]=e,b[32]=j,b[33]=s,b[34]=i,b[35]=f,b[36]=v):v=b[36];return v}function q(a){var b=d("react-compiler-runtime").c(4);a=a.loading;if(a===!0){b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=k.jsx(c("IGDSSpinner.react"),{size:"small"}),b[0]=a):a=b[0];a=a}else{var e;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(e=k.jsx(c("IGDSChevronIcon.react"),{alt:i._(/*BTDS*/"chevron"),color:"ig-tertiary-text",direction:"next",size:17}),b[1]=e):e=b[1];a=e}b[2]!==a?(e=k.jsx(c("IGDSBox.react"),{alignContent:"center",alignItems:"center",direction:"row",marginStart:2,position:"relative",children:a}),b[2]=a,b[3]=e):e=b[3];return e}g.OPTION_LIST_ITEM_VARIANTS=l;g.OPTION_LIST_ITEM_TEXT_COLORS=m;g.FRXReportModalOptionListItem=a}),226);
__d("polarisGetGuardianInfo",["normalizr"],(function(a,b,c,d,e,f,g){"use strict";var h=new(d("normalizr").schema.Entity)("userInfo",{},{idAttribute:function(a){return String(a.pk)},processStrategy:function(a){return{username:a.username}}});function a(a){return d("normalizr").normalize(a,h).entities.userInfo}g["default"]=a}),98);
__d("PolarisFRXWebReportActions",["JSResourceForInteraction","PolarisAPIPostNotifyGuardianCall","PolarisDirectLogger","PolarisFRXWebReportConstants","PolarisInstapi","PolarisReportConstants","polarisGetGuardianInfo","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h=1,i=c("JSResourceForInteraction")("PolarisFRXWebSendSecureReportAction").__setRef("PolarisFRXWebReportActions");function a(a){a=babelHelpers["extends"]({},a,{frx_prompt_request_type:d("PolarisFRXWebReportConstants").FRX_SCREEN_INPUT_REQUEST_TYPE_INTS.START});return k(a,!0)}function b(a){var b=a.frxPromptRequestType,c=a.metadata,d=j(a);c=babelHelpers["extends"]({},c,{},d,{frx_prompt_request_type:b});return k(c,!1,(d=a.optionalParams)==null?void 0:d.thread_id,(b=a.optionalParams)==null?void 0:b.responsible_id)}function j(a){var b=a.context;a=a.optionalParams;var c=a.attachments,d=a.evidenceText,e=a.reportSubtype,f=a.selectedPromptButtonActionType,g=a.selectedTagTypes,h=a.selectedVictimID;a=a.tipNumber;var i={};b!=null&&(i.context=b);g!=null&&(i.selected_tag_types=JSON.stringify(g));f!=null&&(i.action_type=f);h!=null&&(i.victim_user_id=h);a!=null&&(i.tip_number=a);c!=null&&(i.attachments=c);d!=null&&(i.evidence_text=d);e!=null&&(i.report_subtype=e);return babelHelpers["extends"]({},i)}function k(a,b,e,f){return function(g,j){var k=h++;g({frxScreenRequestID:k,isInitScreen:b,type:"FRX_WEB_REPORT_SCREEN_API_REQUESTED"});j=d("PolarisInstapi").apiPost("/api/v1/web/reports/get_frx_prompt/",{body:a}).then(function(a){return a.data});j.then(function(b){var h=b.response;b=b.type;if(h==null||b==null)g({frxScreenRequestID:k,type:"FRX_WEB_REPORT_SCREEN_API_REQUEST_FAILED"});else{var j=h.frx_context;[d("PolarisReportConstants").FRXLocation.ENCRYPTED_DIRECT_MESSAGE,d("PolarisReportConstants").FRXLocation.ENCRYPTED_DIRECT_THREAD].includes(a.location)&&a.frx_prompt_request_type===d("PolarisFRXWebReportConstants").FRX_SCREEN_INPUT_REQUEST_TYPE_INTS.POLICY_EDUCATION&&f!==void 0&&e!==void 0&&j!==void 0&&c("promiseDone")(i.load().then(function(b){g(b(j,f,e,a.victim_user_id,a.location===d("PolarisReportConstants").FRXLocation.ENCRYPTED_DIRECT_MESSAGE?a.object_id:void 0))}));g({frxScreenRequestID:k,screenPayload:{frxScreenRequestID:k,response:h,type:b},type:"FRX_WEB_REPORT_SCREEN_API_REQUEST_SUCCESS"})}})["catch"](function(){g({frxScreenRequestID:k,type:"FRX_WEB_REPORT_SCREEN_API_REQUEST_FAILED"})})}}function e(a,b,c,e){return function(f,g){f({type:"FRX_WEB_NOTIFY_GUARDIAN_FOLLOWUP_MODAL_TO_CONFIMATION_MODAL"}),a&&d("PolarisAPIPostNotifyGuardianCall").postNotifyGuardianCall(b,c,e)["catch"](function(a){var b=new(d("PolarisDirectLogger").DirectLogger)("DirectActions");b.logError("Notify Guardian From Web",a)})}}function f(a){return babelHelpers["extends"]({type:"FRX_WEB_REPORT_REPORTING_MODAL_CLOSED"},a)}function l(){return{type:"FRX_WEB_REPORT_GO_BACK_ONE_SCREEN"}}function m(){return{type:"FRX_WEB_REPORT_START_UNFOLLOW_FOLLOWUP"}}function n(){return{type:"FRX_WEB_REPORT_START_BLOCK_FOLLOWUP"}}function o(){return{type:"FRX_WEB_REPORT_START_NOTIFY_GUARDIAN_FOLLOWUP"}}function p(){return function(a,b){a({type:"FRX_WEB_REPORT_DISABLE_NOTIFY_GUARDIAN_OPTION"})}}function q(a){return function(b,e){d("PolarisInstapi").apiGet("/api/v1/users/{user_id}/info/",{path:{user_id:a}}).then(function(d){d=d.data.user;d&&b({guardian:c("polarisGetGuardianInfo")(d)[a],type:"FRX_WEB_REPORT_STORE_GUARDIAN_INFORMATION"})})}}function r(a){return function(b,c){b({reportedTagTitle:a,type:"FRX_WEB_REPORT_STORE_REPORTED_TAG_TITLE"})}}g.doRequestInitFRXScreenAction=a;g.doRequestNextFRXScreenAction=b;g.doOpenNotifyGuardianFollowupModalToPreviousScreenAction=e;g.doReportingModalClosedAction=f;g.doGoBackOneFRXScreenAction=l;g.doStartUnfollowFollowupAction=m;g.doStartBlockFollowupAction=n;g.doStartNotifyGuardianFollowupAction=o;g.doDisableNotifyGuardianOption=p;g.doStoreGuardianInformation=q;g.doStoreReportedTagTitle=r}),98);
__d("PolarisFRXWebReportStateSelectors",["PolarisFRXWebReportConstants","PolarisFRXWebReportUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a.webFRXReport.pendingFRXScreenRequestID!==null}function h(a){return a.webFRXReport.screenHistoryStack}function b(a){return d("PolarisFRXWebReportUtils").getCurrentScreenFromHistoryStack(h(a))}function c(a){return h(a).length}function e(a){a=h(a);return a.findIndex(function(a){return a.type===d("PolarisFRXWebReportConstants").FRX_SCREEN_PAYLOAD_TYPE_INTS.CONFIRMATION})>=0}function f(a){return a.webFRXReport.currRenderStep}function i(a){return a.webFRXReport.disableNotifyGuardianOption}function j(a){return a.webFRXReport.guardianUsername}function k(a){return a.webFRXReport.reportedTagTitle}g.getIsFRXScreenRequestProcessing=a;g.getCurrScreenPayload=b;g.getScreenHistorySize=c;g.getIsConfirmationScreenInHistoryStack=e;g.getCurrRenderStep=f;g.getDisableNotifyGuardianOption=i;g.getGuardianUsername=j;g.getReportedTagTitle=k}),98);
__d("PolarisFRXReportModalFollowUpActionSection.react",["IGDSBox.react","PolarisFRXReportModalFollowUpActionSectionFetaSupervisionQuery.graphql","PolarisFRXReportModalOptionList.react","PolarisFRXReportModalOptionListItem.react","PolarisFRXWebReportActions","PolarisFRXWebReportStateSelectors","PolarisFRXWebReportStrings","PolarisReactRedux.react","PolarisReportConstants","isStringNullOrEmpty","polarisRelationshipSelectors.react","react","react-compiler-runtime","react-relay/relay-hooks/useLazyLoadQuery","usePolarisViewer"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function k(a,b){a=a.reportedOwner.id;return d("polarisRelationshipSelectors.react").getRelationship(b.relationships,a)}function l(a,b){a=a.onSelectFollowupAction;a&&a(b)}function a(a){var e=d("react-compiler-runtime").c(22),f,g;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=h!==void 0?h:h=b("PolarisFRXReportModalFollowUpActionSectionFetaSupervisionQuery.graphql"),g={},e[0]=f,e[1]=g):(f=e[0],g=e[1]);f=c("react-relay/relay-hooks/useLazyLoadQuery")(f,g);var i=(g=f.xfb_youth_platform)==null?void 0:(f=g.viewer)==null?void 0:f.is_f3_supervised_user;g=a.followUpActions;e[2]!==a?(f=function(b){return d("polarisRelationshipSelectors.react").followedByViewer(k(a,b))},e[2]=a,e[3]=f):f=e[3];var q=d("PolarisReactRedux.react").useSelector(f);e[4]!==a?(f=function(b){return d("polarisRelationshipSelectors.react").isBlockedByViewer(k(a,b))},e[4]=a,e[5]=f):f=e[5];var r=d("PolarisReactRedux.react").useSelector(f),s=c("usePolarisViewer")();if(e[6]!==g||e[7]!==i||e[8]!==a||e[9]!==r||e[10]!==q||e[11]!==(s==null?void 0:s.isSupervisedUser)){e[13]!==i||e[14]!==a||e[15]!==r||e[16]!==q||e[17]!==(s==null?void 0:s.isSupervisedUser)?(f=function(b,c){var e=b.action_type,f=b.beta_redirect_uri,g=b.name;if(e==null)return null;g=g==null?void 0:g.text;var h=function(){return l(a,b)};c="followup-"+c;switch(e){case d("PolarisReportConstants").FRXActionType.LEARN_MORE_ADS:case d("PolarisReportConstants").FRXActionType.LEARN_MORE_EDUCATION:case d("PolarisReportConstants").FRXActionType.SELF_INJURY_EDUCATION_ACTION:case d("PolarisReportConstants").FRXActionType.EATING_DISORDER_EDUCATION_ACTION:return g==null||g===""||f==null||f===""?null:j.jsx(d("PolarisFRXReportModalOptionListItem.react").FRXReportModalOptionListItem,{href:f,onSelect:h,children:g},c);case d("PolarisReportConstants").FRXActionType.UNFOLLOW:return!q?null:j.jsx(n,{labelText:g,onSelect:h},c);case d("PolarisReportConstants").FRXActionType.BLOCK_ACTOR:return r?null:j.jsx(o,{labelText:g,onSelect:h},c);case d("PolarisReportConstants").FRXActionType.NOTIFY_GUARDIAN:return(s==null?void 0:s.isSupervisedUser)!==!0&&i!==!0?null:j.jsx(p,{labelText:g,onSelect:h},c);default:return null}},e[13]=i,e[14]=a,e[15]=r,e[16]=q,e[17]=s==null?void 0:s.isSupervisedUser,e[18]=f):f=e[18];f=g.map(f).filter(m);e[6]=g;e[7]=i;e[8]=a;e[9]=r;e[10]=q;e[11]=s==null?void 0:s.isSupervisedUser;e[12]=f}else f=e[12];g=f;if(g.length===0)return null;e[19]===Symbol["for"]("react.memo_cache_sentinel")?(f=j.jsx(c("IGDSBox.react"),{marginTop:11,position:"relative"}),e[19]=f):f=e[19];e[20]!==g?(f=j.jsxs(j.Fragment,{children:[f,j.jsx(c("PolarisFRXReportModalOptionList.react"),{children:g})]}),e[20]=g,e[21]=f):f=e[21];return f}function m(a){return a!=null}function n(a){var b=d("react-compiler-runtime").c(6),e=a.labelText,f=a.onSelect;a=c("isStringNullOrEmpty")(e)?d("PolarisFRXWebReportStrings").DEFAULT_UNFOLLOW_BUTTON_TEXT:e;var g=d("PolarisReactRedux.react").useDispatch();b[0]!==g||b[1]!==f?(e=function(){f(),g(d("PolarisFRXWebReportActions").doStartUnfollowFollowupAction())},b[0]=g,b[1]=f,b[2]=e):e=b[2];var h;b[3]!==e||b[4]!==a?(h=j.jsx(d("PolarisFRXReportModalOptionListItem.react").FRXReportModalOptionListItem,{onSelect:e,children:a}),b[3]=e,b[4]=a,b[5]=h):h=b[5];return h}function o(a){var b=d("react-compiler-runtime").c(6),e=a.labelText,f=a.onSelect;a=c("isStringNullOrEmpty")(e)?d("PolarisFRXWebReportStrings").DEFAULT_BLOCK_BUTTON_TEXT:e;var g=d("PolarisReactRedux.react").useDispatch();b[0]!==g||b[1]!==f?(e=function(){f(),g(d("PolarisFRXWebReportActions").doStartBlockFollowupAction())},b[0]=g,b[1]=f,b[2]=e):e=b[2];var h;b[3]!==a||b[4]!==e?(h=j.jsx(d("PolarisFRXReportModalOptionListItem.react").FRXReportModalOptionListItem,{onSelect:e,textColor:d("PolarisFRXReportModalOptionListItem.react").OPTION_LIST_ITEM_TEXT_COLORS.RED,children:a}),b[3]=a,b[4]=e,b[5]=h):h=b[5];return h}function p(a){var b=d("react-compiler-runtime").c(8),e=a.labelText,f=a.onSelect;a=c("isStringNullOrEmpty")(e)?d("PolarisFRXWebReportStrings").DEFAULT_NOTIFY_GUARDIAN_BUTTON_TEXT:e;var g=d("PolarisReactRedux.react").useDispatch();e=d("PolarisReactRedux.react").useSelector(d("PolarisFRXWebReportStateSelectors").getDisableNotifyGuardianOption);var h=e===!0?d("PolarisFRXReportModalOptionListItem.react").OPTION_LIST_ITEM_TEXT_COLORS.GREY:d("PolarisFRXReportModalOptionListItem.react").OPTION_LIST_ITEM_TEXT_COLORS.DEFAULT,i;b[0]!==g||b[1]!==f?(i=function(){f(),g(d("PolarisFRXWebReportActions").doStartNotifyGuardianFollowupAction())},b[0]=g,b[1]=f,b[2]=i):i=b[2];var k;b[3]!==e||b[4]!==a||b[5]!==i||b[6]!==h?(k=j.jsx(d("PolarisFRXReportModalOptionListItem.react").FRXReportModalOptionListItem,{disabled:e,onSelect:i,textColor:h,children:a}),b[3]=e,b[4]=a,b[5]=i,b[6]=h,b[7]=k):k=b[7];return k}g["default"]=a}),98);
__d("PolarisTextWithEntities.react",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function j(a,b){return a.offset===b.offset&&(a.length===0||b.length===0)?a.length-b.length:a.offset-b.offset}function k(a){return[].concat(a.ranges).filter(Boolean).sort(j)}function a(a){var b=d("react-compiler-runtime").c(4);if(b[0]!==a){var c=0,e=[],f=a.text,g=k(a),h=[],j=[];for(var l=0;l<g.length;l++)h.push(g[l].offset),j.push(g[l].offset+g[l].length);l=[];var m=0;while(m<g.length){var n=g[m];if(j[m]<c){m=l.length>0?l.pop():m+1;continue}if(n.offset>c){var o=f.substring(c,n.offset);e.push(i.jsx(i.Fragment,{children:o},o+m));c=n.offset}o=0;for(var p=m+1;p<g.length;p++)if(h[p]<j[m]&&h[p]>=c){o=p;break}if(o!==0){p=f.substring(c,h[o]);e.push(i.jsx(i.Fragment,{children:a.rangeRenderer(p,n)},p+m));c=h[o];l.push(m);m=o;continue}p=f.substring(c,j[m]);e.push(i.jsx(i.Fragment,{children:a.rangeRenderer(p,n)},p+m));c=j[m];l.length>0?m=l.pop():m++}if(f.length>c){o=f.substr(c);b[2]!==o?(n=i.jsx(i.Fragment,{children:o},o),b[2]=o,b[3]=n):n=b[3];e.push(n)}p=a.textRenderer(e);b[0]=a;b[1]=p}else p=b[1];return p}g["default"]=a}),98);
__d("PolarisFRXReportModalRichText.react",["PolarisFRXReportModalRichTextRenderer.react","PolarisTextWithEntities.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function j(a){a=a.token;if(!a)return null;var b=a.color,c=a.style,d=a.uri;b==null&&(b=a["3"]);c==null&&(c=a["1"]);(d===""||d==null)&&(d=a["2"]);c!=null&&(c=parseInt(c,10));return{color:b,style:c,uri:d}}function k(a){if(!a)return[];var b=[];a.forEach(function(a){var c=a.length,d=a.offset;a=j(a)||{};var e=a.color,f=a.style;a=a.uri;c!=null&&d!=null&&(a!=null||e!=null||f!=null)&&b.push({color:e,length:c,offset:d,override_uri:a,style:f})});return b}function l(a,b){var d=b.color,e=b.override_uri;b=b.style;return i.jsx(c("PolarisFRXReportModalRichTextRenderer.react"),{color:d,href:e,style:b,children:a})}l.displayName=l.name+" [from "+f.id+"]";function a(a){var b=d("react-compiler-runtime").c(5);a=a.richText;if(a==null)return null;var e=a.markup;a=a.text;if(a==null)return null;var f;b[0]!==e?(f=k(e),b[0]=e,b[1]=f):f=b[1];b[2]!==f||b[3]!==a?(e=i.jsx(c("PolarisTextWithEntities.react"),{rangeRenderer:l,ranges:f,text:a,textRenderer:m}),b[2]=f,b[3]=a,b[4]=e):e=b[4];return e}function m(a){return i.jsx(i.Fragment,{children:a})}g["default"]=a}),98);
__d("PolarisFRXWebReportAPIUtils",["PolarisInstapi","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";function a(a){d("PolarisInstapi").apiPost("/api/v1/web/reports/log_tag_selected/",{body:a})["catch"](c("emptyFunction"))}function b(a){d("PolarisInstapi").apiPost("/api/v1/web/reports/handle_guided_action/",{body:a})["catch"](c("emptyFunction"))}g.logFRXTagSelected=a;g.handleFRXGuidedAction=b}),98);
__d("PolarisFRXReportConfirmationScreenModalForSupervision.react",["IGDSBox.react","IGDSCircleCheckPanoOutlineIcon.react","IGDSTextVariants.react","PolarisFRXReportBaseScreenModal.react","PolarisFRXReportMainButton.react","PolarisFRXReportModalFollowUpActionSection.react","PolarisFRXReportModalRichText.react","PolarisFRXWebReportAPIUtils","PolarisFRXWebReportStrings","PolarisGenericStrings","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function j(a,b){b=b.action_type;if(b==null)return;a=a.screenPayload.response;d("PolarisFRXWebReportAPIUtils").handleFRXGuidedAction({action_type:b,context:a==null?void 0:a.context})}function a(a){var b=d("react-compiler-runtime").c(13),e=a.headerParams,f=a.onClose,g;b[0]!==f?(g=function(){return f&&f()},b[0]=f,b[1]=g):g=b[1];g=g;var h,j;b[2]!==a?(h=i.jsx(k,babelHelpers["extends"]({},a)),j=i.jsx(l,babelHelpers["extends"]({},a)),b[2]=a,b[3]=h,b[4]=j):(h=b[3],j=b[4]);b[5]!==g?(a=i.jsx(c("IGDSBox.react"),{marginBottom:d("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_MARGIN_BOTTOM,marginTop:4,paddingX:d("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:i.jsx(c("PolarisFRXReportMainButton.react"),{onClick:g,text:d("PolarisGenericStrings").CLOSE_TEXT})}),b[5]=g,b[6]=a):a=b[6];var m;b[7]!==e||b[8]!==g||b[9]!==h||b[10]!==j||b[11]!==a?(m=i.jsxs(d("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{disableDefaultBodyPaddingMargin:!0,headerParams:e,onClose:g,children:[h,j,a]}),b[7]=e,b[8]=g,b[9]=h,b[10]=j,b[11]=a,b[12]=m):m=b[12];return m}function k(a){var b=d("react-compiler-runtime").c(14);a=a.screenPayload;var e;b[0]!==a?(e=a||{},b[0]=a,b[1]=e):e=b[1];a=e;e=a.response;b[2]!==e?(a=e||{},b[2]=e,b[3]=a):a=b[3];e=a;a=e.follow_up_actions_title;e=e.subtitle;var f;b[4]!==e?(f=e?i.jsx(c("IGDSBox.react"),{marginTop:6,position:"relative",children:i.jsx(d("IGDSTextVariants.react").IGDSTextSection,{textAlign:"center",zeroMargin:!0,children:i.jsx(c("PolarisFRXReportModalRichText.react"),{richText:e})})}):null,b[4]=e,b[5]=f):f=b[5];e=f;f=null;if(a){var g;b[6]!==a?(g=i.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"center",zeroMargin:!0,children:i.jsx(c("PolarisFRXReportModalRichText.react"),{richText:a})}),b[6]=a,b[7]=g):g=b[7];f=g;if(e){b[8]!==f?(a=i.jsx(c("IGDSBox.react"),{marginTop:2,position:"relative",children:f}),b[8]=f,b[9]=a):a=b[9];f=a}}b[10]===Symbol["for"]("react.memo_cache_sentinel")?(g=i.jsx(c("IGDSCircleCheckPanoOutlineIcon.react"),{alt:d("PolarisFRXWebReportStrings").CHECKMARK_ICON_ALT_TEXT,color:"ig-success",size:48}),b[10]=g):g=b[10];b[11]!==f||b[12]!==e?(a=i.jsx(c("IGDSBox.react"),{marginTop:d("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_MARGIN_TOP,paddingX:d("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:i.jsxs(c("IGDSBox.react"),{alignContent:"center",alignItems:"center",marginTop:6,position:"relative",children:[g,e,f]})}),b[11]=f,b[12]=e,b[13]=a):a=b[13];return a}function l(a){var b=d("react-compiler-runtime").c(6),e=a.reportedOwner,f=a.screenPayload;f=f.response;f=f==null?void 0:f.follow_up_actions;if(!f||f.length===0)return null;var g;b[0]!==a?(g=function(b){j(a,b)},b[0]=a,b[1]=g):g=b[1];var h;b[2]!==f||b[3]!==e||b[4]!==g?(h=i.jsx(c("PolarisFRXReportModalFollowUpActionSection.react"),{followUpActions:f,onSelectFollowupAction:g,reportedOwner:e}),b[2]=f,b[3]=e,b[4]=g,b[5]=h):h=b[5];return h}g["default"]=a}),98);
__d("PolarisFRXReportModalFetaSupervisionQuery_instagramRelayOperation",[],(function(a,b,c,d,e,f){e.exports="29609414422005335"}),null);
__d("PolarisFRXReportModalFetaSupervisionQuery.graphql",["PolarisFRXReportModalFetaSupervisionQuery_instagramRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"is_f3_supervised_user",storageKey:null},c={alias:null,args:null,concreteType:"XFBXMFCGuardianPreferredProfile",kind:"LinkedField",name:"f3_guardian_preferred_profile",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"full_name",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PolarisFRXReportModalFetaSupervisionQuery",selections:[{alias:null,args:null,concreteType:"XFBYouthPlatformApi",kind:"LinkedField",name:"xfb_youth_platform",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBYouthPlatformViewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"RequiredField",field:a,action:"THROW"},c],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"PolarisFRXReportModalFetaSupervisionQuery",selections:[{alias:null,args:null,concreteType:"XFBYouthPlatformApi",kind:"LinkedField",name:"xfb_youth_platform",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBYouthPlatformViewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[a,c,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("PolarisFRXReportModalFetaSupervisionQuery_instagramRelayOperation"),metadata:{},name:"PolarisFRXReportModalFetaSupervisionQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("PolarisFRXReportConfirmationScreenModal.react",["IGDSBox.react","IGDSCircleCheckPanoOutlineIcon.react","IGDSTextVariants.react","PolarisFRXReportBaseScreenModal.react","PolarisFRXReportMainButton.react","PolarisFRXReportModalFollowUpActionSection.react","PolarisFRXReportModalRichText.react","PolarisFRXWebReportAPIUtils","PolarisFRXWebReportStrings","PolarisGenericStrings","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function j(a,b){b=b.action_type;if(b==null)return;a=a.screenPayload.response;d("PolarisFRXWebReportAPIUtils").handleFRXGuidedAction({action_type:b,context:a==null?void 0:a.context})}function a(a){var b=d("react-compiler-runtime").c(13),e=a.headerParams,f=a.onClose,g;b[0]!==f?(g=function(){return f&&f()},b[0]=f,b[1]=g):g=b[1];g=g;var h,j;b[2]!==a?(h=i.jsx(k,babelHelpers["extends"]({},a)),j=i.jsx(l,babelHelpers["extends"]({},a)),b[2]=a,b[3]=h,b[4]=j):(h=b[3],j=b[4]);b[5]!==g?(a=i.jsx(c("IGDSBox.react"),{marginBottom:d("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_MARGIN_BOTTOM,marginTop:4,paddingX:d("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:i.jsx(c("PolarisFRXReportMainButton.react"),{"data-testid":void 0,onClick:g,text:d("PolarisGenericStrings").CLOSE_TEXT})}),b[5]=g,b[6]=a):a=b[6];var m;b[7]!==e||b[8]!==g||b[9]!==h||b[10]!==j||b[11]!==a?(m=i.jsxs(d("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{disableDefaultBodyPaddingMargin:!0,headerParams:e,onClose:g,children:[h,j,a]}),b[7]=e,b[8]=g,b[9]=h,b[10]=j,b[11]=a,b[12]=m):m=b[12];return m}function k(a){var b=d("react-compiler-runtime").c(14);a=a.screenPayload;var e;b[0]!==a?(e=a||{},b[0]=a,b[1]=e):e=b[1];a=e;e=a.response;b[2]!==e?(a=e||{},b[2]=e,b[3]=a):a=b[3];e=a;a=e.follow_up_actions_title;e=e.subtitle;var f;b[4]!==e?(f=e?i.jsx(c("IGDSBox.react"),{alignItems:"start",marginTop:6,position:"relative",children:i.jsx(d("IGDSTextVariants.react").IGDSTextSection,{elementType:"h2",textAlign:"center",zeroMargin:!0,children:i.jsx(c("PolarisFRXReportModalRichText.react"),{richText:e})})}):null,b[4]=e,b[5]=f):f=b[5];e=f;f=null;if(a){var g;b[6]!==a?(g=i.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"center",zeroMargin:!0,children:i.jsx(c("PolarisFRXReportModalRichText.react"),{richText:a})}),b[6]=a,b[7]=g):g=b[7];f=g;if(e){b[8]!==f?(a=i.jsx(c("IGDSBox.react"),{marginTop:2,position:"relative",children:f}),b[8]=f,b[9]=a):a=b[9];f=a}}b[10]===Symbol["for"]("react.memo_cache_sentinel")?(g=i.jsx(c("IGDSCircleCheckPanoOutlineIcon.react"),{alt:d("PolarisFRXWebReportStrings").CHECKMARK_ICON_ALT_TEXT,color:"ig-success",size:48}),b[10]=g):g=b[10];b[11]!==f||b[12]!==e?(a=i.jsx(c("IGDSBox.react"),{marginTop:d("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_MARGIN_TOP,paddingX:d("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:i.jsxs(c("IGDSBox.react"),{alignContent:"center",alignItems:"center",marginTop:6,position:"relative",children:[g,e,f]})}),b[11]=f,b[12]=e,b[13]=a):a=b[13];return a}function l(a){var b=d("react-compiler-runtime").c(6),e=a.reportedOwner,f=a.screenPayload;f=f.response;f=f==null?void 0:f.follow_up_actions;if(!f||f.length===0)return null;var g;b[0]!==a?(g=function(b){j(a,b)},b[0]=a,b[1]=g):g=b[1];var h;b[2]!==f||b[3]!==e||b[4]!==g?(h=i.jsx(c("PolarisFRXReportModalFollowUpActionSection.react"),{followUpActions:f,onSelectFollowupAction:g,reportedOwner:e}),b[2]=f,b[3]=e,b[4]=g,b[5]=h):h=b[5];return h}g["default"]=a}),98);
__d("PolarisFRXReportModalPromptButton.react",["fbt","PolarisFRXReportMainButton.react","PolarisFRXWebReportStateSelectors","PolarisReactRedux.react","react","react-compiler-runtime","useCometAccessibilityAlerts"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(15),e=d("PolarisReactRedux.react").useSelector(d("PolarisFRXWebReportStateSelectors").getIsFRXScreenRequestProcessing),f=c("useCometAccessibilityAlerts")(),g=f.accessibilityAlerts,i=f.triggerAccessibilityAlert,k=a.actionType,l=a.canSubmitOnClick;f=a.disabled;var m=a.href,n=a.label,o=a.onSubmit;a=a.primaryButton;f=f===void 0?!1:f;a=a===void 0?!0:a;f=f||l&&e;var p;b[0]!==k||b[1]!==l||b[2]!==o||b[3]!==i?(p=function(){i(h._(/*BTDS*/"Cargando")),l&&o&&o(k)},b[0]=k,b[1]=l,b[2]=o,b[3]=i,b[4]=p):p=b[4];e=l&&e;var q;b[5]!==m||b[6]!==n||b[7]!==a||b[8]!==f||b[9]!==p||b[10]!==e?(q=j.jsx(c("PolarisFRXReportMainButton.react"),{disabled:f,href:m,onClick:p,primaryButton:a,spinner:e,text:n}),b[5]=m,b[6]=n,b[7]=a,b[8]=f,b[9]=p,b[10]=e,b[11]=q):q=b[11];b[12]!==g||b[13]!==q?(m=j.jsxs(j.Fragment,{children:[q,g]}),b[12]=g,b[13]=q,b[14]=m):m=b[14];return m}g["default"]=a}),226);
__d("PolarisFRXReportModalScreenContentSectionList.react",["IGDSBox.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=4;function a(a){var b=d("react-compiler-runtime").c(7),e=a.sections;a=a.marginBetween;var f=a===void 0?j:a;if(b[0]!==f||b[1]!==e){b[3]!==f?(a=function(a,b){var d=b>0&&f!==0?i.jsx(c("IGDSBox.react"),{marginTop:f,position:"relative"}):null;return i.jsxs(i.Fragment,{children:[d,a]},"section-"+b)},b[3]=f,b[4]=a):a=b[4];a=e.filter(k).map(a);b[0]=f;b[1]=e;b[2]=a}else a=b[2];e=a;b[5]!==e?(a=i.jsx(i.Fragment,{children:e}),b[5]=e,b[6]=a):a=b[6];return a}function k(a){return!!a}g["default"]=a}),98);
__d("PolarisFRXReportModalPolicyEducationSection.react",["IGDSBox.react","IGDSText.react","IGDSTextVariants.react","PolarisFRXReportModalRichText.react","PolarisFRXReportModalScreenContentSectionList.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=2,k=1,l="\u2022";function m(a,b){a=a.first_paragraph;var d=[];[a].forEach(function(a){if(!a||(a==null?void 0:a.text)==null||(a==null?void 0:a.text)==="")return;d.push(i.jsx(c("IGDSText.react"),{color:"secondaryText",size:"body",weight:b?"semibold":"normal",zeroMargin:!0,children:i.jsx(c("PolarisFRXReportModalRichText.react"),{richText:a})}))});return d}function n(a){a=a.policies;a=a===void 0?[]:a;if(!a||a.length===0)return[];var b=[];a.forEach(function(a){a=a.title;if(!a)return;b.push(i.jsx("div",{role:"listitem",children:i.jsxs(c("IGDSBox.react"),{direction:"row",position:"relative",children:[i.jsx(c("IGDSBox.react"),{marginEnd:2,position:"relative",children:i.jsx("div",{"aria-hidden":"true",children:i.jsx(d("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",zeroMargin:!0,children:l})})}),i.jsx(c("IGDSBox.react"),{flex:"grow",position:"relative",children:i.jsx(d("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",zeroMargin:!0,children:i.jsx(c("PolarisFRXReportModalRichText.react"),{richText:a})})})]})}))});return b}function a(a){var b=d("react-compiler-runtime").c(23);a=a.policyEducation;var e=a.second_paragraph,f=a.title,g;b[0]!==f?(g=f?i.jsx(d("IGDSTextVariants.react").IGDSTextSection,{zeroMargin:!0,children:i.jsx(c("PolarisFRXReportModalRichText.react"),{richText:f})}):null,b[0]=f,b[1]=g):g=b[1];f=g;b[2]!==a?(g=n(a),b[2]=a,b[3]=g):g=b[3];g=g;var h=g.length>0,l;b[4]!==a||b[5]!==h?(l=m(a,h),b[4]=a,b[5]=h,b[6]=l):l=b[6];a=l;b[7]!==a||b[8]!==f?(h=a.length>0?i.jsx(c("IGDSBox.react"),{marginTop:f?j:0,position:"relative",children:i.jsx(c("PolarisFRXReportModalScreenContentSectionList.react"),{marginBetween:j,sections:a})}):null,b[7]=a,b[8]=f,b[9]=h):h=b[9];l=h;b[10]!==l||b[11]!==g||b[12]!==f?(a=g.length>0?i.jsx(c("IGDSBox.react"),{marginTop:f||l?k:0,position:"relative",children:i.jsx("div",{role:"list",children:i.jsx(c("PolarisFRXReportModalScreenContentSectionList.react"),{marginBetween:k,sections:g})})}):null,b[10]=l,b[11]=g,b[12]=f,b[13]=a):a=b[13];h=a;b[14]!==h||b[15]!==e||b[16]!==f?(g=e?i.jsxs(c("IGDSBox.react"),{marginTop:h?1:0,position:"relative",children:[i.jsx(c("IGDSText.react"),{color:"secondaryText",size:"body",weight:"normal",zeroMargin:!0,children:i.jsx(c("PolarisFRXReportModalRichText.react"),{richText:e})}),i.jsx(c("IGDSBox.react"),{height:f?2:10,position:"relative"})]}):null,b[14]=h,b[15]=e,b[16]=f,b[17]=g):g=b[17];a=g;b[18]!==l||b[19]!==h||b[20]!==a||b[21]!==f?(e=i.jsxs(c("IGDSBox.react"),{position:"relative",children:[f,a,l,h]}),b[18]=l,b[19]=h,b[20]=a,b[21]=f,b[22]=e):e=b[22];return e}g["default"]=a}),98);
__d("PolarisFRXReportPolicyEducationScreenModal.react",["IGDSBox.react","IGDSTextVariants.react","PolarisFRXReportBaseScreenModal.react","PolarisFRXReportModalPolicyEducationSection.react","PolarisFRXReportModalPromptButton.react","PolarisFRXReportModalRichText.react","PolarisFRXReportModalScreenContentSectionList.react","PolarisFRXWebReportUtils","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(26),e=a.headerParams,f=a.onClose,g=a.screenPayload,h=g.response,l;b[0]!==h?(l=h||{},b[0]=h,b[1]=l):l=b[1];h=l;l=h.policy_education;h=h.subtitle;var m;b[2]!==h?(m=h?i.jsx(j,{subtitle:h}):null,b[2]=h,b[3]=m):m=b[3];h=m;b[4]!==l?(m=l?i.jsx(c("PolarisFRXReportModalPolicyEducationSection.react"),{policyEducation:l}):null,b[4]=l,b[5]=m):m=b[5];m=m;var n;b[6]!==g?(n=d("PolarisFRXWebReportUtils").getPromptButtonRenderPropsFromScreenPayload(g),b[6]=g,b[7]=n):n=b[7];g=n;b[8]!==g||b[9]!==a?(n=g?i.jsx(k,{parentProps:a,promptButtonProps:g}):null,b[8]=g,b[9]=a,b[10]=n):n=b[10];g=n;a=null;if(l){n=l.education_button;if(n){l=(l=(l=n.title)==null?void 0:l.text)!=null?l:"";var o;b[11]!==n.action_type||b[12]!==n.url||b[13]!==l?(o={actionType:n.action_type,canSubmitOnClick:!1,href:n.url,label:l,primaryButton:!1},b[11]=n.action_type,b[12]=n.url,b[13]=l,b[14]=o):o=b[14];n=o;b[15]!==n?(l=i.jsx(c("PolarisFRXReportModalPromptButton.react"),babelHelpers["extends"]({},n)),b[15]=n,b[16]=l):l=b[16];a=l}}b[17]!==a||b[18]!==m||b[19]!==g||b[20]!==h?(o=i.jsx(c("PolarisFRXReportModalScreenContentSectionList.react"),{sections:[h,m,g,a]}),b[17]=a,b[18]=m,b[19]=g,b[20]=h,b[21]=o):o=b[21];b[22]!==e||b[23]!==f||b[24]!==o?(n=i.jsx(d("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{headerParams:e,onClose:f,children:o}),b[22]=e,b[23]=f,b[24]=o,b[25]=n):n=b[25];return n}function j(a){var b=d("react-compiler-runtime").c(2);a=a.subtitle;var e;b[0]!==a?(e=i.jsx(c("IGDSBox.react"),{alignItems:"start",marginTop:2,position:"relative",children:i.jsx(d("IGDSTextVariants.react").IGDSTextSection,{elementType:"h2",children:i.jsx(c("PolarisFRXReportModalRichText.react"),{richText:a})})}),b[0]=a,b[1]=e):e=b[1];return e}function k(a){var b=d("react-compiler-runtime").c(5),e=a.parentProps;a=a.promptButtonProps;var f=e.onSubmitScreen;b[0]!==f?(e=function(a){return f(a)},b[0]=f,b[1]=e):e=b[1];var g;b[2]!==a||b[3]!==e?(g=i.jsx(c("PolarisFRXReportModalPromptButton.react"),babelHelpers["extends"]({},a,{onSubmit:e})),b[2]=a,b[3]=e,b[4]=g):g=b[4];return g}g["default"]=a}),98);
__d("PolarisReportSearchBoxContainer.react",["PolarisMobileSearchBox.react","PolarisReactRedux.react","PolarisSearchActions","polarisSearchSelectors","react"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");function a(a){var b=a.search;a=d("polarisSearchSelectors").getCurrentSearchContent(a);return{currentTab:b.currentSearchTab,discoverToken:"",loading:a.loading,rankToken:a.rankToken,results:a.results,searchedForQuery:a.searchedForQuery,selectedIndex:a.selectedIndex,suggested:b.suggested}}function b(a){return{onClearSearch:function(){a(d("PolarisSearchActions").clearSearch())},onNavigateToResult:function(b,c,e){a(d("PolarisSearchActions").navigateToResult(b,c,e))},onSearch:function(b,c,e,f,g){a(d("PolarisSearchActions").search(b,c,e))},onSelectResult:function(b,c){a(d("PolarisSearchActions").selectResult(b,c))}}}e=d("PolarisReactRedux.react").connect(a,b)(c("PolarisMobileSearchBox.react"));g["default"]=e}),98);
__d("PolarisReportButton.react",["PolarisIGCoreButton.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(5),e=a.children,f=a.color,g=a.disabled;a=a.onClick;f=f===void 0?"ig-primary-button":f;var h;b[0]!==e||b[1]!==f||b[2]!==g||b[3]!==a?(h=i.jsx(c("PolarisIGCoreButton.react"),{color:f,disabled:g,fullWidth:!0,large:!0,onClick:a,children:e}),b[0]=e,b[1]=f,b[2]=g,b[3]=a,b[4]=h):h=b[4];return h}g["default"]=a}),98);
__d("PolarisReportUserImpersonationListItem.react",["IGDSBox.react","IGDSListItem.react","IGDSTextVariants.react","PolarisAssetManagerGlyphMapping","PolarisGenericStrings","PolarisIGCoreIcon.react","PolarisReportButton.react","PolarisReportStrings","PolarisUserAvatar.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=function(){c.props.onReport()},b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.render=function(){var a=this.props.result;return i.jsx(c("IGDSListItem.react"),{addOnEnd:i.jsx(c("PolarisReportButton.react"),{onClick:this.$1,children:d("PolarisReportStrings").nextText}),addOnStart:i.jsx(c("PolarisUserAvatar.react"),{isLink:!1,profilePictureUrl:a.profilePictureUrl,size:44,username:a.username}),subtitle:a.fullName,title:i.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",display:"block",children:[i.jsx(d("IGDSTextVariants.react").IGDSTextBodyEmphasized,{breakWord:!0,children:a.username}),a.isVerified?i.jsx(c("IGDSBox.react"),{display:"inlineBlock",marginStart:1,children:i.jsx(c("PolarisIGCoreIcon.react"),{alt:d("PolarisGenericStrings").VERIFIED_TEXT,icon:d("PolarisAssetManagerGlyphMapping").ICONS.VERIFIED_SMALL})}):null]})})};return b}(i.Component);g.ReportUserImpersonationListItem=a}),98);
__d("PolarisReportUserImpersonationSearchBox.react",["cx","IGDSBox.react","PolarisReportSearchBoxContainer.react","PolarisReportUserImpersonationListItem.react","PolarisSearchConstants","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(21),e=a.fromWebview,f=a.onSelectVictim,g=a.reportedUserID,h=a.searchBoxPlaceHolder,i=a.userSearchResults,k=a.verifiedOnly;a=e===void 0?!1:e;b[0]!==h?(e=j.jsx(c("PolarisReportSearchBoxContainer.react"),{analyticsContext:void 0,disableResultKeyboardNav:!0,hideCancelButton:!0,isActive:!0,placeholder:h,searchContext:d("PolarisSearchConstants").SEARCH_CONTEXT.USER,useHistory:!0}),b[0]=h,b[1]=e):e=b[1];h=a?0:2;a=a?"_ac68":"";if(b[2]!==f||b[3]!==g||b[4]!==i||b[5]!==k){var l;b[7]!==g||b[8]!==k?(l=function(a){return k?a.isVerified&&a.pk!==g.toString():a.pk!==g.toString()},b[7]=g,b[8]=k,b[9]=l):l=b[9];var m;b[10]!==f?(m=function(a,b){return j.jsx(d("PolarisReportUserImpersonationListItem.react").ReportUserImpersonationListItem,{onReport:function(){return f(a)},result:a},b)},b[10]=f,b[11]=m):m=b[11];l=i.filter(l).map(m);b[2]=f;b[3]=g;b[4]=i;b[5]=k;b[6]=l}else l=b[6];b[12]!==a||b[13]!==l?(m=j.jsx("div",{className:a,children:l}),b[12]=a,b[13]=l,b[14]=m):m=b[14];b[15]!==h||b[16]!==m?(i=j.jsx(c("IGDSBox.react"),{color:"primaryBackground",marginTop:h,position:"relative",children:m}),b[15]=h,b[16]=m,b[17]=i):i=b[17];b[18]!==e||b[19]!==i?(a=j.jsxs("div",{children:[e,i]}),b[18]=e,b[19]=i,b[20]=a):a=b[20];return a}g["default"]=a}),98);
__d("PolarisFRXReportSelectVictimScreenModal.react",["IGDSBox.react","IGDSTextVariants.react","PolarisFRXReportBaseScreenModal.react","PolarisFRXReportModalRichText.react","PolarisFRXReportModalScreenContentSectionList.react","PolarisReactRedux.react","PolarisReportConstants","PolarisReportUserImpersonationSearchBox.react","PolarisSearchActions","PolarisSearchConstants","polarisSearchSelectors","react","react-compiler-runtime","useJSON"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useEffect;function k(a){a=a.allSearchResults;var b=[];for(var c=0;c<a.length;c++){var d=a[c];d.type==="USER_RESULT"&&b.push(d)}return b}function l(a){var b=d("react-compiler-runtime").c(3),c=a.onClearSearch,e;b[0]!==c?(a=function(){return function(){c()}},e=[c],b[0]=c,b[1]=a,b[2]=e):(a=b[1],e=b[2]);j(a,e)}function a(a){l(a);var b=a.headerParams,e=a.onClose,f=a.onSelectVictim,g=a.reportedOwner,h=a.screenPayload;h=h.response;var j=h||{};j=j.subtitle;h=h.context;g=g.id;j=j?i.jsx(c("IGDSBox.react"),{marginTop:2,position:"relative",children:i.jsx(d("IGDSTextVariants.react").IGDSTextBodyEmphasized,{children:i.jsx(c("PolarisFRXReportModalRichText.react"),{richText:j})})}):null;try{h=c("useJSON")(h!=null?h:null);h=h==null?void 0:h.tags;h=(h==null?void 0:h.includes(d("PolarisReportConstants").IGUserImpersonationSomeoneIFollowTag.tag_type))===!0}catch(a){h=!1}h=!h;g=i.jsx(c("PolarisReportUserImpersonationSearchBox.react"),{onSelectVictim:function(a){return f(a)},reportedUserID:g,searchBoxPlaceHolder:d("PolarisSearchConstants").IMPERSONATION_SEARCH_TEXT,userSearchResults:k(a),verifiedOnly:h});return i.jsx(d("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{headerParams:b,onClose:function(){return e&&e()},children:i.jsx(c("PolarisFRXReportModalScreenContentSectionList.react"),{sections:[j,g]})})}a.displayName=a.name+" [from "+f.id+"]";function b(a){a=d("polarisSearchSelectors").getCurrentSearchContent(a);a=a.results;return{allSearchResults:a}}e={onClearSearch:d("PolarisSearchActions").clearSearch};f=d("PolarisReactRedux.react").connect(b,e)(a);g["default"]=f}),98);
__d("PolarisFRXReportTagSelectionScreenModal.react",["IGDSBox.react","IGDSText.react","IGDSTextVariants.react","InstagramAdHideResponseFalcoEvent","PolarisFRXReportBaseScreenModal.react","PolarisFRXReportModalOptionList.react","PolarisFRXReportModalOptionListItem.react","PolarisFRXReportModalPolicyEducationSection.react","PolarisFRXReportModalPromptButton.react","PolarisFRXReportModalRichText.react","PolarisFRXReportModalScreenContentSectionList.react","PolarisFRXWebReportAPIUtils","PolarisFRXWebReportConstants","PolarisFRXWebReportStateSelectors","PolarisFRXWebReportUtils","PolarisReactRedux.react","PolarisReportConstants","goUriOnNewWindow","isEmpty","isStringNullOrEmpty","polarisAdsSelectors.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));e=i;var k=e.useEffect,l=e.useRef,m=e.useState,n=null,o="";function p(a,b,e,f){var g=a.isFRXScreenRequestProcessing,h=a.onSubmitScreen;a=a.screenPayload.response;var i=b.setStateSelectedTagTitle;b=b.setStateSelectedTagType;var j=e.tag_type,k=e.title;k=(k=k==null?void 0:k.text)!=null?k:"";if(e.tag_click_override_url!=null){c("goUriOnNewWindow")(e.tag_click_override_url);return}if(g||j==null||j==="")return;b(j);i(k);d("PolarisFRXWebReportAPIUtils").logFRXTagSelected({context:a==null?void 0:a.context,selected_tag_type:j});h&&!f&&h({selectedPromptButtonActionType:null,selectedTagTitles:[k],selectedTagTypes:[j]})}function q(a,b,d){a=a.onSubmitScreen;var e=b.selectedTagTitle;b=b.selectedTagType;a&&!c("isStringNullOrEmpty")(b)&&a({selectedPromptButtonActionType:d,selectedTagTitles:[e],selectedTagTypes:[b]})}function r(){var a=d("react-compiler-runtime").c(3),b=m(n),c=b[0];b=b[1];var e=m(o),f=e[0];e=e[1];a[0]!==f||a[1]!==c?(e={selectedTagTitle:f,selectedTagType:c,setStateSelectedTagTitle:e,setStateSelectedTagType:b},a[0]=f,a[1]=c,a[2]=e):e=a[2];return e}function s(a,b){var c=b.setStateSelectedTagTitle,d=b.setStateSelectedTagType,e=a.screenPayload.frxScreenRequestID,f=l(),g=f.current;k(function(){f.current=e,e!==g&&(d(n),c(o))},[e,g,d,c])}function a(a){var b=d("react-compiler-runtime").c(7),c=r();s(a,c);var e=a.headerParams,f=a.onClose,g;b[0]!==a||b[1]!==c?(g=j.jsx(t,{parentProps:a,parentState:c}),b[0]=a,b[1]=c,b[2]=g):g=b[2];b[3]!==e||b[4]!==f||b[5]!==g?(a=j.jsx(d("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{disableDefaultBodyPaddingMargin:!0,headerParams:e,onClose:f,children:g}),b[3]=e,b[4]=f,b[5]=g,b[6]=a):a=b[6];return a}function t(a){var b=d("react-compiler-runtime").c(30),e=a.parentProps;a=a.parentState;var f=e.screenPayload,g=f.response,i;b[0]!==g?(i=g||{},b[0]=g,b[1]=i):i=b[1];g=i;i=g.policy_education;var k=g.report_tags,l=g.second_subtitle;g=g.subtitle;if(b[2]!==g){var m;m=g&&!(h||(h=c("isEmpty")))((m=g.text)==null?void 0:m.trim())?j.jsx(u,{subtitle:g}):null;b[2]=g;b[3]=m}else m=b[3];g=m;if(b[4]!==l){m=l&&!(h||(h=c("isEmpty")))((m=l.text)==null?void 0:m.trim())?j.jsx(v,{secondSubtitle:l}):null;b[4]=l;b[5]=m}else m=b[5];l=m;b[6]!==e||b[7]!==a||b[8]!==k?(m=k&&k.length>0?j.jsx(w,{parentProps:e,parentState:a,reportTags:k}):null,b[6]=e,b[7]=a,b[8]=k,b[9]=m):m=b[9];k=m;m=!k;var n;b[10]!==i||b[11]!==m?(n=i&&m?j.jsx(x,{policyEducation:i}):null,b[10]=i,b[11]=m,b[12]=n):n=b[12];i=n;b[13]!==f?(n=d("PolarisFRXWebReportUtils").getPromptButtonRenderPropsFromScreenPayload(f),b[13]=f,b[14]=n):n=b[14];f=n;b[15]!==e||b[16]!==a||b[17]!==f||b[18]!==m?(n=f&&m?j.jsx(y,{parentProps:e,parentState:a,promptButtonProps:f}):null,b[15]=e,b[16]=a,b[17]=f,b[18]=m,b[19]=n):n=b[19];e=n;a=g!=null?d("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_MARGIN_TOP:0;f=i||e?d("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_MARGIN_BOTTOM:0;b[20]!==i||b[21]!==e||b[22]!==k||b[23]!==l||b[24]!==g?(m=j.jsx(c("PolarisFRXReportModalScreenContentSectionList.react"),{sections:[g,l,k,i,e]}),b[20]=i,b[21]=e,b[22]=k,b[23]=l,b[24]=g,b[25]=m):m=b[25];b[26]!==f||b[27]!==a||b[28]!==m?(n=j.jsx(c("IGDSBox.react"),{marginBottom:f,marginTop:a,position:"relative",children:m}),b[26]=f,b[27]=a,b[28]=m,b[29]=n):n=b[29];return n}function u(a){var b=d("react-compiler-runtime").c(2);a=a.subtitle;var e;b[0]!==a?(e=j.jsx(c("IGDSBox.react"),{alignItems:"start",marginTop:2,paddingX:d("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:j.jsx(d("IGDSTextVariants.react").IGDSTextSection,{elementType:"h2",children:j.jsx(c("PolarisFRXReportModalRichText.react"),{richText:a})})}),b[0]=a,b[1]=e):e=b[1];return e}function v(a){var b=d("react-compiler-runtime").c(2);a=a.secondSubtitle;var e;b[0]!==a?(e=j.jsx(c("IGDSBox.react"),{marginTop:0,paddingX:d("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:j.jsx(c("IGDSText.react"),{color:"secondaryText",size:"body",weight:"normal",zeroMargin:!0,children:j.jsx(c("PolarisFRXReportModalRichText.react"),{richText:a})})}),b[0]=a,b[1]=e):e=b[1];return e}function w(a){var b=d("react-compiler-runtime").c(24),e=a.parentProps,f=a.parentState;a=a.reportTags;var g=e.frxMetadata,h=e.isFRXScreenRequestProcessing,i=e.onSelectReportAd,k=e.screenPayload;k=k.response;k=k||{};k=k.style;var l=f.selectedTagType,m=k===d("PolarisFRXWebReportConstants").FRX_TAG_SELECTION_STYLE_INTS.RADIO_BUTTONS,n=d("polarisAdsSelectors.react").useFRXReportAdLoggingParams(g.object_id,g.location);if(b[0]!==g.object_id||b[1]!==g.object_type||b[2]!==n||b[3]!==h||b[4]!==i||b[5]!==e||b[6]!==f||b[7]!==a||b[8]!==l||b[9]!==m){b[11]!==g.object_id||b[12]!==g.object_type||b[13]!==n||b[14]!==h||b[15]!==i||b[16]!==e||b[17]!==f||b[18]!==l||b[19]!==m?(k=function(a,b){var k=a.tag_type,o=a.title,q=l===k,r=h&&q&&!m,s=m?d("PolarisFRXReportModalOptionListItem.react").OPTION_LIST_ITEM_VARIANTS.RADIO:d("PolarisFRXReportModalOptionListItem.react").OPTION_LIST_ITEM_VARIANTS.BUTTON;b="tag-"+b;return j.jsx(d("PolarisFRXReportModalOptionListItem.react").FRXReportModalOptionListItem,{"data-testid":void 0,loading:r,onSelect:function(){g.object_type===d("PolarisReportConstants").FRXObjectType.AD&&(i!=null?i(k):c("InstagramAdHideResponseFalcoEvent").log(function(){return babelHelpers["extends"]({ad_id:g.object_id,response:k},n)})),p(e,f,a,m)},selected:q,value:b,variant:s,children:o==null?void 0:o.text},b)},b[11]=g.object_id,b[12]=g.object_type,b[13]=n,b[14]=h,b[15]=i,b[16]=e,b[17]=f,b[18]=l,b[19]=m,b[20]=k):k=b[20];k=a.map(k);b[0]=g.object_id;b[1]=g.object_type;b[2]=n;b[3]=h;b[4]=i;b[5]=e;b[6]=f;b[7]=a;b[8]=l;b[9]=m;b[10]=k}else k=b[10];a=k;b[21]!==a||b[22]!==m?(k=j.jsx(c("PolarisFRXReportModalOptionList.react"),{asRadio:m,children:a}),b[21]=a,b[22]=m,b[23]=k):k=b[23];return k}function x(a){var b=d("react-compiler-runtime").c(2);a=a.policyEducation;var e;b[0]!==a?(e=j.jsx(c("IGDSBox.react"),{paddingX:d("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:j.jsx(c("PolarisFRXReportModalPolicyEducationSection.react"),{policyEducation:a})}),b[0]=a,b[1]=e):e=b[1];return e}function y(a){var b=d("react-compiler-runtime").c(7),e=a.parentProps,f=a.parentState;a=a.promptButtonProps;var g=f.selectedTagType;g=!g;var h;b[0]!==e||b[1]!==f?(h=function(a){return q(e,f,a)},b[0]=e,b[1]=f,b[2]=h):h=b[2];var i;b[3]!==a||b[4]!==g||b[5]!==h?(i=j.jsx(c("IGDSBox.react"),{paddingX:d("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:j.jsx(c("PolarisFRXReportModalPromptButton.react"),babelHelpers["extends"]({},a,{disabled:g,onSubmit:h}))}),b[3]=a,b[4]=g,b[5]=h,b[6]=i):i=b[6];return i}function b(a){return{isFRXScreenRequestProcessing:d("PolarisFRXWebReportStateSelectors").getIsFRXScreenRequestProcessing(a)}}f=d("PolarisReactRedux.react").connect(b,null)(a);g["default"]=f}),98);
__d("PolarisFRXReportUtils",[],(function(a,b,c,d,e,f){"use strict";var g=["ig_ad_ip_violation","ig_ad_ip_violation","ig_intellectual_property_v1","ig_ar_effect_ip_violation","ig_intellectual_property_direct_message","ig_hashtag_intellectual_property","ig_ad_spam","ig_spam_v3","ig_spam_direct_message","ig_bullying_or_harassment_comment_v3","ig_bullying_or_harassment_direct_message","ig_hashtag_bullying_or_harassment","ig_ar_effect_harassment_or_bullying","ig_harassment_or_bullying","ig_nudity_v2","ig_nudity_direct_message","ig_clips_audio_page_nudity","ig_clips_effect_page_nudity","ig_clips_prompt_page_nudity","ig_hashtag_nudity","ig_ar_effect_nudity_or_pornography","ig_ad_sexually_inappropriate","ig_iab_sexually_inappropriate","product_sexualized_content_or_adult_products","bi_commerce_sexualized_or_adult_content","inappropriate_content","ig_commerce_ugc_graphic_content","bi_commerce_abusive_or_harmful","ig_violence_parent","ig_ad_violent_prohibited","ig_ar_effect_violence","ig_violence_direct_message","ig_hashtag_violence","ig_violence_v3","ig_violence","ig_dangerous_org_or_individual","ig_hate_speech_v3","ig_ar_effect_hate_speech","ig_hate_speech_direct_message","ig_hashtag_hate_speech","ig_i_dont_like_it_v3","ig_ar_effect_i_dont_like_it","ig_i_dont_like_it_direct_message","ig_ad_offensive","ig_self_injury_v3","ig_ar_effect_self_injury","ig_hashtag_self_injury","ig_self_injury_direct_message","ig_ad_scam_misleading","ig_product_scam_fraud_v2","ig_product_scam_fraud_reportable","ig_iab_scam_misleading","bi_commerce_misleading_or_possible_scam","ig_sale_of_illegal_or_regulated_goods_v3","ig_sale_of_illegal_or_regulated_goods_direct_message","ig_sale_of_illegal_or_regulated_goods_v2","ig_ar_effect_drugs","ig_ar_effect_firearms","bi_commerce_alcohol_tobacco_and_weapons","bi_commerce_animal_products_or_sales","ig_false_news","ig_ar_effect_false_information","ig_report_report_as_unlawful","bi_commerce_discriminatory_listing","discrimination","ig_something_else","something_else","ig_ad_political","ig_eating_disorder","bi_commerce_buying_or_selling","ig_commerce_ugc_manipulation","ig_commerce_ugc_irrelevance","ig_commerce_review_irrelevant","ig_commerce_fake_review","ig_commerce_product_answer_irrelevant","ig_commerce_product_question_irrelevant","ig_user_impersonation","ig_unwanted_joiner","ig_iab_excessive_ads","ig_iab_other","page_place_inaccurate_info","bi_commerce_service_or_job","product_no_intent_to_sale","bi_commerce_appears_to_be_counterfeit","bi_commerce_health_or_wellness","bi_commerce_other_prohibited","bi_commerce_no_service_offered","bi_commerce_health_or_medical","information_misuse","dont_recognize_activity"];function a(a){return g.includes(a)}f.shouldUseTagType=a}),66);
__d("PolarisFRXReportScreenModal.react",["IGDSBox.react","IGDSSpinner.react","PolarisFRXReportBaseScreenModal.react","PolarisFRXReportConfirmationScreenModal.react","PolarisFRXReportPolicyEducationScreenModal.react","PolarisFRXReportSelectVictimScreenModal.react","PolarisFRXReportTagSelectionScreenModal.react","PolarisFRXReportUtils","PolarisFRXWebReportActions","PolarisFRXWebReportConstants","PolarisFRXWebReportStateSelectors","PolarisFRXWebReportStrings","PolarisFRXWebReportUtils","PolarisReactRedux.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useState;function k(a){a.onClose&&a.onClose()}function l(a){var b=a.isFRXScreenRequestProcessing;a=a.onGoBackOneFRXScreen;a&&!b&&a()}function m(a,b){var c=a.frxMetadata,e=a.isFRXScreenRequestProcessing,f=a.onRequestNextFRXScreen,g=a.onStoreReportedTagTitle,h=a.reportedTagTitle;a=a.screenPayload;if(e)return;e=a||{};a=e.response;e=e.type;a=a||{};a=a.context;var i=b==null?void 0:b.selectedTagTypes;i=i!=null&&i.length>0?i[0]:null;var j=b==null?void 0:b.selectedTagTitles;j=j!=null&&j.length>0?j[0]:"";h===""&&i!=null&&d("PolarisFRXReportUtils").shouldUseTagType(i)&&j!==""&&g(j);h=d("PolarisFRXWebReportUtils").getNextFRXScreenInputRequestTypeFromScreenPayloadType(e);if(!h)return;f({context:a,frxPromptRequestType:h,metadata:c,optionalParams:b})}function a(a){var b=d("react-compiler-runtime").c(54),e=a.frxMetadata,f=a.hasMountedScreenFlow,g=a.hasPreviousScreens,h=a.isFRXScreenRequestProcessing,p=a.onSelectReportAd,q=a.reportedOwner,r=a.screenPayload,s=a.showFRXDropOffSurveyModal,t=a.threadId,u;b[0]!==a?(u=function(){return l(a)},b[0]=a,b[1]=u):u=b[1];var v;b[2]!==g||b[3]!==r||b[4]!==u?(v=d("PolarisFRXReportBaseScreenModal.react").getDefaultScreenModalHeaderParamsFromScreenPayload(r,g,u),b[2]=g,b[3]=r,b[4]=u,b[5]=v):v=b[5];g=v;u=j(!1);v=u[0];var w=u[1];b[6]!==a?(u=function(){w(!0),k(a)},b[6]=a,b[7]=u):u=b[7];var x=u;b[8]!==g||b[9]!==x?(u=i.jsx(o,{headerParams:g,onClose:x}),b[8]=g,b[9]=x,b[10]=u):u=b[10];u=u;if(!r){if(h||!f||v){b[11]!==g||b[12]!==x?(h=i.jsx(n,{headerParams:g,onClose:x}),b[11]=g,b[12]=x,b[13]=h):h=b[13];return h}return u}f=r.type;switch(f){case d("PolarisFRXWebReportConstants").FRX_SCREEN_PAYLOAD_TYPE_INTS.TAG_SELECTION:b[14]!==x||b[15]!==s?(v=function(){x(),s!=null&&s()},b[14]=x,b[15]=s,b[16]=v):v=b[16];b[17]!==a?(h=function(b){m(a,babelHelpers["extends"]({},b))},b[17]=a,b[18]=h):h=b[18];b[19]!==e||b[20]!==g||b[21]!==p||b[22]!==r||b[23]!==v||b[24]!==h?(f=i.jsx(c("PolarisFRXReportTagSelectionScreenModal.react"),{frxMetadata:e,headerParams:g,onClose:v,onSelectReportAd:p,onSubmitScreen:h,screenPayload:r}),b[19]=e,b[20]=g,b[21]=p,b[22]=r,b[23]=v,b[24]=h,b[25]=f):f=b[25];return f;case d("PolarisFRXWebReportConstants").FRX_SCREEN_PAYLOAD_TYPE_INTS.POLICY_EDUCATION:b[26]!==x||b[27]!==s?(e=function(){x(),s!=null&&s()},b[26]=x,b[27]=s,b[28]=e):e=b[28];b[29]!==a||b[30]!==q.id||b[31]!==t?(p=function(b){m(a,{responsible_id:q.id,selectedPromptButtonActionType:b,thread_id:t})},b[29]=a,b[30]=q.id,b[31]=t,b[32]=p):p=b[32];b[33]!==g||b[34]!==r||b[35]!==e||b[36]!==p?(v=i.jsx(c("PolarisFRXReportPolicyEducationScreenModal.react"),{headerParams:g,onClose:e,onSubmitScreen:p,screenPayload:r}),b[33]=g,b[34]=r,b[35]=e,b[36]=p,b[37]=v):v=b[37];return v;case d("PolarisFRXWebReportConstants").FRX_SCREEN_PAYLOAD_TYPE_INTS.CONFIRMATION:b[38]!==g||b[39]!==x||b[40]!==q||b[41]!==r?(h=i.jsx(c("PolarisFRXReportConfirmationScreenModal.react"),{headerParams:g,onClose:x,reportedOwner:q,screenPayload:r}),b[38]=g,b[39]=x,b[40]=q,b[41]=r,b[42]=h):h=b[42];return h;case d("PolarisFRXWebReportConstants").FRX_SCREEN_PAYLOAD_TYPE_INTS.SELECT_VICTIM:b[43]!==x||b[44]!==s?(f=function(){x(),s!=null&&s()},b[43]=x,b[44]=s,b[45]=f):f=b[45];b[46]!==a?(e=function(b){m(a,{selectedVictimID:b.pk})},b[46]=a,b[47]=e):e=b[47];b[48]!==g||b[49]!==q||b[50]!==r||b[51]!==f||b[52]!==e?(p=i.jsx(c("PolarisFRXReportSelectVictimScreenModal.react"),{headerParams:g,onClose:f,onSelectVictim:e,reportedOwner:q,screenPayload:r}),b[48]=g,b[49]=q,b[50]=r,b[51]=f,b[52]=e,b[53]=p):p=b[53];return p;default:return u}}function n(a){var b=d("react-compiler-runtime").c(4),e=a.headerParams;a=a.onClose;var f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=i.jsx(c("IGDSBox.react"),{alignContent:"center",alignItems:"center",justifyContent:"center",minHeight:122,position:"relative",children:i.jsx(c("IGDSSpinner.react"),{})}),b[0]=f):f=b[0];b[1]!==e||b[2]!==a?(f=i.jsx(d("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{headerParams:e,onClose:a,children:f}),b[1]=e,b[2]=a,b[3]=f):f=b[3];return f}function o(a){var b=d("react-compiler-runtime").c(3),c=a.headerParams;a=a.onClose;var e;b[0]!==c||b[1]!==a?(e=i.jsx(d("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{headerParams:c,onClose:a,children:d("PolarisFRXWebReportStrings").DEFAULT_ERROR_MESSAGE_TEXT}),b[0]=c,b[1]=a,b[2]=e):e=b[2];return e}function b(a){return{isFRXScreenRequestProcessing:d("PolarisFRXWebReportStateSelectors").getIsFRXScreenRequestProcessing(a),reportedTagTitle:d("PolarisFRXWebReportStateSelectors").getReportedTagTitle(a)}}e={onRequestNextFRXScreen:d("PolarisFRXWebReportActions").doRequestNextFRXScreenAction,onStoreReportedTagTitle:d("PolarisFRXWebReportActions").doStoreReportedTagTitle};f=d("PolarisReactRedux.react").connect(b,e)(a);g["default"]=f}),98);
__d("PolarisFRXUnfollowUserFollowupModal.react",["PolarisConnectionsLogger","PolarisUnfollowDialog.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(6),e=a.onClose;a=a.userToUnfollow;a=a.id;if(!a)return null;var f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f={},b[0]=f):f=b[0];var g;b[1]!==e?(g=function(){return e&&e()},b[1]=e,b[2]=g):g=b[2];b[3]!==g||b[4]!==a?(f=i.jsx(c("PolarisUnfollowDialog.react"),{analyticsContext:d("PolarisConnectionsLogger").CONNECTIONS_CONTAINER_MODULES.frx_web_reporting,analyticsExtra:f,onClose:g,userId:a}),b[3]=g,b[4]=a,b[5]=f):f=b[5];return f}g["default"]=a}),98);
__d("PolarisFRXReportModal.react",["IGDSBox.react","IGDSSpinner.react","PolarisFRXBlockUserFollowupModal.react","PolarisFRXNotifyGuardianFollowupModal.react","PolarisFRXReportBaseScreenModal.react","PolarisFRXReportConfirmationScreenModalForSupervision.react","PolarisFRXReportModalFetaSupervisionQuery.graphql","PolarisFRXReportScreenModal.react","PolarisFRXUnfollowUserFollowupModal.react","PolarisFRXWebReportActions","PolarisFRXWebReportState","PolarisFRXWebReportStateSelectors","PolarisFRXWebReportStrings","PolarisReactRedux.react","PolarisReportConstants","nullthrows","react","react-compiler-runtime","react-relay/relay-hooks/useLazyLoadQuery","usePolarisAnalyticsContext","usePolarisViewer"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));f=i;var k=f.useEffect;f.useMemo;var l=f.useState;function m(a){var b=a.frxObjectType,c=a.isAfterConfirmationScreen,d=a.onClose,e=a.onConfirm,f=a.onDoReportingModalClosedAction;a=a.reportedObjectID;c&&e!=null&&e();f({isAfterConfirmationScreen:c,reportedObjectID:a,reportedObjectType:b});d&&d()}function n(a){a=a.onGoBackOneFRXScreen;a()}function o(a,b,c){if(b===!0){var d=a.onDoDisableNotifyGuardianOption;d()}d=a.onDoOpenNotifyGuardianFollowupModalToPreviousScreen;var e=a.reportedOwner.id;d(b,c,e,a.reportedTagTitle)}function p(a,b,c,e){var f=d("react-compiler-runtime").c(6),g=a.onRequestInitFRXScreen,h;f[0]!==e||f[1]!==b||f[2]!==g||f[3]!==c?(a=function(){b||(g(e),c(!0))},h=[c,b,e,g],f[0]=e,f[1]=b,f[2]=g,f[3]=c,f[4]=a,f[5]=h):(a=f[4],h=f[5]);k(a,h)}function a(a){var e=d("react-compiler-runtime").c(60),f=l(!1),g=f[0];f=f[1];var i=a.containerModule,k=a.currScreenPayload,q=a.currRenderStep,r=a.screenHistorySize,s=a.reportedObjectID,t=a.frxEntryPoint,u=a.frxLocation,v=a.frxObjectType,w=a.reportedOwner,x=a.showFRXDropOffSurveyModal,y=a.useSimpleBlockModalWithoutRefresh,z=a.threadId,A=a.threadKey,B=a.onSelectReportAd,C=a.isGroupThread,D=a.shouldReportAsInstamadillo;t=t===void 0?d("PolarisReportConstants").FRXEntryPoint.CHEVRON_BUTTON:t;var E=c("usePolarisAnalyticsContext")(),F=d("PolarisReactRedux.react").useDispatch();i=i!=null?i:E;e[0]!==t||e[1]!==u||e[2]!==v||e[3]!==s||e[4]!==i?(E={container_module:i,entry_point:t,location:u,object_id:s,object_type:v},e[0]=t,e[1]=u,e[2]=v,e[3]=s,e[4]=i,e[5]=E):E=e[5];t=E;u=t;p(a,g,f,u);e[6]!==a?(s=function(){return m(a)},e[6]=a,e[7]=s):s=e[7];i=s;E=r>1;e[8]!==a?(t=function(){return n(a)},e[8]=a,e[9]=t):t=e[9];e[10]!==k||e[11]!==E||e[12]!==t?(f=d("PolarisFRXReportBaseScreenModal.react").getDefaultScreenModalHeaderParamsFromScreenPayload(k,E,t),e[10]=k,e[11]=E,e[12]=t,e[13]=f):f=e[13];s=f;e[14]!==s||e[15]!==i?(E=j.jsx(d("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{headerParams:s,onClose:i,children:d("PolarisFRXWebReportStrings").DEFAULT_ERROR_MESSAGE_TEXT}),e[14]=s,e[15]=i,e[16]=E):E=e[16];t=E;e[17]===Symbol["for"]("react.memo_cache_sentinel")?(f=j.jsx(c("IGDSBox.react"),{alignContent:"center",alignItems:"center",justifyContent:"center",minHeight:122,position:"relative",children:j.jsx(c("IGDSSpinner.react"),{})}),e[17]=f):f=e[17];e[18]!==s||e[19]!==i?(E=j.jsx(d("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{headerParams:s,onClose:i,children:f}),e[18]=s,e[19]=i,e[20]=E):E=e[20];f=E;E=c("usePolarisViewer")();E!==null&&(E==null?void 0:E.guardianId)!==null&&(E==null?void 0:E.guardianId)!==""&&F(d("PolarisFRXWebReportActions").doStoreGuardianInformation(c("nullthrows")(E==null?void 0:E.guardianId)));e[21]===Symbol["for"]("react.memo_cache_sentinel")?(F=h!==void 0?h:h=b("PolarisFRXReportModalFetaSupervisionQuery.graphql"),E={},e[21]=F,e[22]=E):(F=e[21],E=e[22]);F=c("react-relay/relay-hooks/useLazyLoadQuery")(F,E);E=(E=F.xfb_youth_platform)==null?void 0:(E=E.viewer)==null?void 0:E.is_f3_supervised_user;F=(F=(F=F.xfb_youth_platform)==null?void 0:(F=F.viewer)==null?void 0:(F=F.f3_guardian_preferred_profile)==null?void 0:F.full_name)!=null?F:null;var G=d("PolarisReactRedux.react").useSelector(d("PolarisFRXWebReportStateSelectors").getGuardianUsername);E===!0&&G===""&&F!==null&&(G=F);switch(q){case d("PolarisFRXWebReportState").FRX_WEB_REPORT_RENDER_STEP_STRS.UNFOLLOW:e[23]!==i||e[24]!==w?(E=j.jsx(c("PolarisFRXUnfollowUserFollowupModal.react"),{onClose:i,userToUnfollow:w}),e[23]=i,e[24]=w,e[25]=E):E=e[25];return E;case d("PolarisFRXWebReportState").FRX_WEB_REPORT_RENDER_STEP_STRS.BLOCK:e[26]!==v||e[27]!==C||e[28]!==i||e[29]!==w||e[30]!==D||e[31]!==A||e[32]!==y?(F=j.jsx(c("PolarisFRXBlockUserFollowupModal.react"),{frxObjectType:v,isGroupThread:C,onClose:i,shouldReportAsInstamadillo:D,threadKey:A,userToBlock:w,useSimpleBlockModalWithoutRefresh:y}),e[26]=v,e[27]=C,e[28]=i,e[29]=w,e[30]=D,e[31]=A,e[32]=y,e[33]=F):F=e[33];return F;case d("PolarisFRXWebReportState").FRX_WEB_REPORT_RENDER_STEP_STRS.NOTIFY_GUARDIAN:e[34]!==a?(q=function(b,c){return o(a,b,c)},e[34]=a,e[35]=q):q=e[35];E=w==null?void 0:w.username;e[36]!==G||e[37]!==i||e[38]!==a.reportedTagTitle||e[39]!==q||e[40]!==E?(v=j.jsx(c("PolarisFRXNotifyGuardianFollowupModal.react"),{guardianUsername:G,onClose:i,onNotify:q,reportedTagTitle:a.reportedTagTitle,reportedUsername:E}),e[36]=G,e[37]=i,e[38]=a.reportedTagTitle,e[39]=q,e[40]=E,e[41]=v):v=e[41];return v;case d("PolarisFRXWebReportState").FRX_WEB_REPORT_RENDER_STEP_STRS.NOTIFY_GUARDIAN_FOLLOWUP:if(!k)return!g?f:t;e[42]!==k||e[43]!==s||e[44]!==i||e[45]!==w?(C=j.jsx(c("PolarisFRXReportConfirmationScreenModalForSupervision.react"),{headerParams:s,onClose:i,reportedOwner:w,screenPayload:k}),e[42]=k,e[43]=s,e[44]=i,e[45]=w,e[46]=C):C=e[46];return C;case d("PolarisFRXWebReportState").FRX_WEB_REPORT_RENDER_STEP_STRS.DEFAULT:default:D=r>1;e[47]!==a?(A=function(){return n(a)},e[47]=a,e[48]=A):A=e[48];e[49]!==k||e[50]!==u||e[51]!==g||e[52]!==i||e[53]!==B||e[54]!==w||e[55]!==x||e[56]!==D||e[57]!==A||e[58]!==z?(y=j.jsx(c("PolarisFRXReportScreenModal.react"),{frxMetadata:u,hasMountedScreenFlow:g,hasPreviousScreens:D,onClose:i,onGoBackOneFRXScreen:A,onSelectReportAd:B,reportedOwner:w,screenPayload:k,showFRXDropOffSurveyModal:x,threadId:z}),e[49]=k,e[50]=u,e[51]=g,e[52]=i,e[53]=B,e[54]=w,e[55]=x,e[56]=D,e[57]=A,e[58]=z,e[59]=y):y=e[59];return y}}function e(a){var b;return{currRenderStep:(b=d("PolarisFRXWebReportStateSelectors")).getCurrRenderStep(a),currScreenPayload:b.getCurrScreenPayload(a),isAfterConfirmationScreen:b.getIsConfirmationScreenInHistoryStack(a),reportedTagTitle:b.getReportedTagTitle(a),screenHistorySize:b.getScreenHistorySize(a)}}f={onDoDisableNotifyGuardianOption:d("PolarisFRXWebReportActions").doDisableNotifyGuardianOption,onDoOpenNotifyGuardianFollowupModalToPreviousScreen:d("PolarisFRXWebReportActions").doOpenNotifyGuardianFollowupModalToPreviousScreenAction,onDoReportingModalClosedAction:d("PolarisFRXWebReportActions").doReportingModalClosedAction,onGoBackOneFRXScreen:d("PolarisFRXWebReportActions").doGoBackOneFRXScreenAction,onRequestInitFRXScreen:d("PolarisFRXWebReportActions").doRequestInitFRXScreenAction};e=d("PolarisReactRedux.react").connect(e,f)(a);g["default"]=e}),98);
__d("PolarisCommentOptionsDialog.react",["fbt","IGCoreDialog.react","IGDSDialogBackwardsCompatibilityWrapper.react","PolarisFRXReportModal.react","PolarisGenericStrings","PolarisIsLoggedIn","PolarisReportConstants","PolarisReportUnderLawDialogItem.react","react","react-compiler-runtime","usePolarisViewer"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useState;function a(a){var b=d("react-compiler-runtime").c(33),e=a.canDeleteComment,f=a.canPinComment,g=a.commentId,i=a.commentOwnerAvatar,l=a.commentOwnerFbidV2,m=a.commentOwnerId,n=a.commentOwnerUsername,o=a.mediaOwnerId,p=a.onClose,q=a.onDelete;a=a.onPin;f=f===void 0?!1:f;var r=k(!1),s=r[0],t=r[1];r=m!==((r=c("usePolarisViewer")())==null?void 0:r.id);var u;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(u=function(){t(!0)},b[0]=u):u=b[0];u=u;var v;b[1]!==p?(v=function(){p(),t(!1)},b[1]=p,b[2]=v):v=b[2];v=v;var w;b[3]!==p||b[4]!==q?(w=function(){q(),p()},b[3]=p,b[4]=q,b[5]=w):w=b[5];w=w;if(s){b[6]!==i||b[7]!==l||b[8]!==m||b[9]!==n?(s={fbidV2:l,id:m,profilePicURL:i,username:n},b[6]=i,b[7]=l,b[8]=m,b[9]=n,b[10]=s):s=b[10];i=m===o;b[11]!==g||b[12]!==v||b[13]!==s||b[14]!==i?(l=j.jsx(c("IGDSDialogBackwardsCompatibilityWrapper.react"),{children:j.jsx(c("PolarisFRXReportModal.react"),{frxLocation:d("PolarisReportConstants").FRXLocation.COMMENTS,frxObjectType:d("PolarisReportConstants").FRXObjectType.COMMENT,onClose:v,reportedObjectID:g,reportedOwner:s,useSimpleBlockModalWithoutRefresh:i})}),b[11]=g,b[12]=v,b[13]=s,b[14]=i,b[15]=l):l=b[15];return l}b[16]!==g||b[17]!==n?(m=d("PolarisIsLoggedIn").isLoggedIn()?j.jsx(d("IGCoreDialog.react").IGCoreDialogItem,{color:"ig-error-or-destructive",onClick:u,children:h._(/*BTDS*/"Denunciar")}):j.jsx(d("PolarisReportUnderLawDialogItem.react").ReportUnderLawDialogItem,{contentId:g,reportingType:d("PolarisReportUnderLawDialogItem.react").InstagramLegalReportingType.COMMENT,username:n}),b[16]=g,b[17]=n,b[18]=m):m=b[18];o=m;s=r&&o;b[19]!==f||b[20]!==a?(i=f&&j.jsx(d("IGCoreDialog.react").IGCoreDialogItem,{color:"ig-secondary-button",onClick:a,children:h._(/*BTDS*/"Fijar comentario")}),b[19]=f,b[20]=a,b[21]=i):i=b[21];b[22]!==e||b[23]!==w?(l=e&&j.jsx(d("IGCoreDialog.react").IGCoreDialogItem,{color:"ig-error-or-destructive","data-testid":void 0,onClick:w,children:h._(/*BTDS*/"Eliminar")}),b[22]=e,b[23]=w,b[24]=l):l=b[24];b[25]!==v?(u=j.jsx(d("IGCoreDialog.react").IGCoreDialogItem,{onClick:v,children:d("PolarisGenericStrings").CANCEL_TEXT}),b[25]=v,b[26]=u):u=b[26];b[27]!==v||b[28]!==s||b[29]!==i||b[30]!==l||b[31]!==u?(g=j.jsxs(d("IGCoreDialog.react").IGCoreDialog,{onModalClose:v,children:[s,i,l,u]}),b[27]=v,b[28]=s,b[29]=i,b[30]=l,b[31]=u,b[32]=g):g=b[32];return g}g["default"]=a}),226);
__d("polarisCommentSelectors.react",["PolarisPaginationUtils","PolarisReactRedux.react","nullthrows","polarisCreateSelectorWithArg","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";e=c("polarisCreateSelectorWithArg")(function(a){return a.comments.byId},function(a){return a.comments.byPostId},function(a,b){return function(e){e=b.get(e);if(e==null)return null;var f=e.commentIds;return f.toSeq().map(function(b){return c("nullthrows")(a.get(b))}).slice(f.count()-d("PolarisPaginationUtils").getVisibleCount(e.pagination),f.count()).filter(function(a){return!a.deleted&&!a.didReportAsSpam})}});f=c("polarisCreateSelectorWithArg")(function(a){return a.posts.byId},function(a){return a.comments.byId},function(a,b){return function(d){d=c("nullthrows")(a.get(d));d=d.previewCommentIds;return d==null?[]:d.map(function(a){return b.get(a)}).filter(Boolean)}});function a(a,b){return c("nullthrows")(a.comments.byId.get(b))}function b(a){var b=d("react-compiler-runtime").c(2),c;b[0]!==a?(c=function(b){return a==null?null:b.comments.translationById.get(a)},b[0]=a,b[1]=c):c=b[1];return d("PolarisReactRedux.react").useSelector(c)}g.selectVisibleCommentsForPostId=e;g.getPreviewCommentsForPostId=f;g.getCommentById=a;g.useCommentTranslation=b}),98);
__d("usePolarisComment",["PolarisReactRedux.react","polarisCommentSelectors.react","polarisUserSelectors","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var c=d("react-compiler-runtime").c(3),e;c[0]!==a||c[1]!==b?(e=function(c){c=d("polarisCommentSelectors.react").getCommentById(c,a);return b(c)},c[0]=a,c[1]=b,c[2]=e):e=c[2];return d("PolarisReactRedux.react").useSelector(e)}function b(a,b){var c=d("react-compiler-runtime").c(3),e;c[0]!==a||c[1]!==b?(e=function(c){var e=d("polarisCommentSelectors.react").getCommentById(c,a);c=d("polarisUserSelectors").getUserByIdOrThrows(c,e.userId);return b(e,c)},c[0]=a,c[1]=b,c[2]=e):e=c[2];return d("PolarisReactRedux.react").useSelector(e)}function c(a){var b=d("react-compiler-runtime").c(2),c;b[0]!==a?(c=function(b){return a==null?null:(b=b.comments.byId.get(a))!=null?b:null},b[0]=a,b[1]=c):c=b[1];return d("PolarisReactRedux.react").useSelector(c)}g.useComment=a;g.useCommentAndOwner=b;g.useCommentOrNull=c}),98);
__d("PolarisCommentTranslationPrompt.react",["fbt","CometPressable.react","IGDSTextVariants.react","PolarisCommentActions","PolarisReactRedux.react","polarisCommentSelectors.react","react","react-compiler-runtime","usePolarisComment"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));i.useCallback;function a(a){var b,e=d("react-compiler-runtime").c(22),f=a.commentId,g=a.inFeed,i=a.isCaptionWithTranslation;a=a.isOverMedia;a=a===void 0?!1:a;var k=d("PolarisReactRedux.react").useDispatch();b=((b=d("usePolarisComment").useCommentOrNull(f))==null?void 0:b.hasTranslation)===!0;i=i===!0||b;b=d("polarisCommentSelectors.react").useCommentTranslation(f);var l=b==null?void 0:b.translatedText,m;e[0]!==f||e[1]!==k||e[2]!==l?(m=function(){if(f==null)return;l!=null?k(d("PolarisCommentActions").showCommentTranslatedText(f)):k(d("PolarisCommentActions").translateComment(f))},e[0]=f,e[1]=k,e[2]=l,e[3]=m):m=e[3];m=m;if(i!==!0)return null;i=g===!0?"primaryText":"secondaryText";if((b==null?void 0:b.loading)===!0){g=a?"webAlwaysWhite":i;var n;e[4]===Symbol["for"]("react.memo_cache_sentinel")?(n=h._(/*BTDS*/"Cargando..."),e[4]=n):n=e[4];e[5]!==g?(n=j.jsx(d("IGDSTextVariants.react").IGDSTextBody2Emphasized,{color:g,children:n}),e[5]=g,e[6]=n):n=e[6];return n}if((b==null?void 0:b.showTranslatedText)===!0){e[7]!==f||e[8]!==k?(g=function(){f!=null&&k(d("PolarisCommentActions").showCommentOriginalText(f))},e[7]=f,e[8]=k,e[9]=g):g=e[9];n=a?"webAlwaysWhite":i;e[10]===Symbol["for"]("react.memo_cache_sentinel")?(b=h._(/*BTDS*/"Ver el original"),e[10]=b):b=e[10];e[11]!==n?(b=j.jsx(d("IGDSTextVariants.react").IGDSTextBody2Emphasized,{color:n,children:b}),e[11]=n,e[12]=b):b=e[12];e[13]!==g||e[14]!==b?(n=j.jsx(c("CometPressable.react"),{onPress:g,overlayDisabled:!0,children:b}),e[13]=g,e[14]=b,e[15]=n):n=e[15];return n}g=a?"webAlwaysWhite":i;e[16]===Symbol["for"]("react.memo_cache_sentinel")?(b=h._(/*BTDS*/"Ver traducci\u00f3n"),e[16]=b):b=e[16];e[17]!==g?(n=j.jsx(d("IGDSTextVariants.react").IGDSTextBody2Emphasized,{color:g,children:b}),e[17]=g,e[18]=n):n=e[18];e[19]!==m||e[20]!==n?(a=j.jsx(c("CometPressable.react"),{onPress:m,overlayDisabled:!0,children:n}),e[19]=m,e[20]=n,e[21]=a):a=e[21];return a}g["default"]=a}),226);
__d("PolarisPostCaptionTranslationPrompt.react",["IGDSBox.react","PolarisCommentTranslationPrompt.react","react","react-compiler-runtime","usePolarisPost"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(6),e=a.inFeed,f=a.marginBottom;a=a.postId;f=f===void 0?0:f;var g=d("usePolarisPost").usePost(a,k);a=d("usePolarisPost").usePost(a,j);if(g!==!0||a==null)return null;b[0]!==a||b[1]!==e?(g=i.jsx(c("PolarisCommentTranslationPrompt.react"),{commentId:a,inFeed:e,isCaptionWithTranslation:!0}),b[0]=a,b[1]=e,b[2]=g):g=b[2];b[3]!==f||b[4]!==g?(a=i.jsx(c("IGDSBox.react"),{marginBottom:f,children:g}),b[3]=f,b[4]=g,b[5]=a):a=b[5];return a}function j(a){return a.captionCommentId}function k(a){return a.captionHasTranslation}g["default"]=a}),98);
__d("PolarisPostVariants",["keyMirror"],(function(a,b,c,d,e,f,g){"use strict";a=c("keyMirror")({feed:null,flexible:null,narrow:null,wide:null});g.VARIANTS=a}),98);
__d("PolarisPostComment.react",["cx","fbt","IGDSBox.react","IGDSButton.react","IGDSIconButton.react","IGDSMoreHorizontalPanoOutlineIcon.react","IGDSText.react","IGDSTextVariants.react","IGDSVerifiedBadge.react","Locale","PolarisApproveCommentDialog.react","PolarisCommentActions","PolarisCommentLikeListsActions","PolarisCommentLikedByListDialogRoot.entrypoint","PolarisCommentOptionsDialog.react","PolarisCommentTranslationPrompt.react","PolarisConfig","PolarisDoubleTappable","PolarisEngagementLogger","PolarisFastLink.react","PolarisIGCoreConstants","PolarisIgWellbeingRestrictManageCommentFalcoEvent","PolarisLikeButton.react","PolarisLikedByListDialogPlaceholder.react","PolarisLinkBuilder","PolarisPendingCommentActions","PolarisPostCaptionTranslationPrompt.react","PolarisPostGifComment.react","PolarisPostStrings","PolarisPostVariants","PolarisReactRedux.react","PolarisTimestamp.react","PolarisTruncatedText.react","PolarisUA","PolarisUserAvatarWithStories.react","PolarisUserHoverCard.react","PolarisUserText.react","PolarisViewpointReact.react","QE2Logger","joinClasses","nullthrows","polarisPostSelectors","polarisUserSelectors","qex","react","react-compiler-runtime","stylex","useIGDSEntryPointDialog","usePolarisDynamicIpadUpsell","usePolarisLoggedOutBlockingEntryPointDialog","usePolarisLoggedOutIntentAction","usePolarisLoggedOutIntentEntryPointDialog","vulture"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l=k||(k=d("react")),m=k;m.useCallback;var n=m.useEffect,aa=m.useState,ba=750,ca={avatar:{alignSelf:"xqcrz7y",marginTop:"xdj266r",marginInlineEnd:"x14iifvp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",$$css:!0},reducedAvatarMargin:{marginTop:"xr9ek0c",marginInlineEnd:"x1sa5p1d",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",$$css:!0},restrictedContent:{opacity:"xbyyjgo",$$css:!0},userLinkHeader:{alignItems:"x6s0dn4",display:"x3nfvp2",$$css:!0}};function da(a){var b=d("react-compiler-runtime").c(22),e=a.parentProps,f=e.commentOwnerId,g=e.commentOwnerUsername,h=e.isAuthorVerified,i=e.isCaption,k=e.isRestrictedPending,m=e.postOwnerIsUnpublished;e=e.showRichComment;h=h===void 0?!1:h;i=i===void 0?!1:i;m=m===void 0?!1:m;e=e===void 0?!1:e;a=k&&!a.showRestrictedContent;var n=i?"h2":"h3";if(a){b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=l.jsx(c("IGDSBox.react"),{marginBottom:1,position:"relative",children:l.jsx(c("IGDSText.react"),{color:"tertiaryText",size:"body",weight:"semibold",children:d("PolarisPostStrings").RESTRICTED_ACCOUNT_HEADER_TEXT})}),b[0]=a):a=b[0];return a}else if(!i||m!==!0){a=k===!0&&ca.restrictedContent;b[1]!==a?(i=(j||(j=c("stylex")))(ca.userLinkHeader,a),b[1]=a,b[2]=i):i=b[2];b[3]!==g?(m=d("PolarisLinkBuilder").buildUserLink(c("nullthrows")(g)),b[3]=g,b[4]=m):m=b[4];b[5]!==g?(k=c("nullthrows")(g),b[5]=g,b[6]=k):k=b[6];b[7]!==m||b[8]!==k?(a=l.jsx(c("IGDSButton.react"),{display:"block",href:m,label:k,variant:"secondary_link"}),b[7]=m,b[8]=k,b[9]=a):a=b[9];b[10]!==f||b[11]!==g||b[12]!==a?(m=l.jsx(c("IGDSBox.react"),{marginEnd:1,position:"relative",children:l.jsx(c("PolarisUserHoverCard.react"),{display:"inline",userId:f,username:g,children:a})}),b[10]=f,b[11]=g,b[12]=a,b[13]=m):m=b[13];b[14]!==h||b[15]!==e?(k=e&&h&&l.jsx(c("IGDSBox.react"),{marginEnd:1,position:"relative",children:l.jsx(c("IGDSVerifiedBadge.react"),{size:"small"})}),b[14]=h,b[15]=e,b[16]=k):k=b[16];b[17]!==n||b[18]!==k||b[19]!==i||b[20]!==m?(f=l.jsxs(n,{className:i,children:[m,k]}),b[17]=n,b[18]=k,b[19]=i,b[20]=m,b[21]=f):f=b[21];return f}return null}function ea(a){var b=d("react-compiler-runtime").c(10);a=a.parentProps;var e=a.captionCreatedAt,f=a.commentThreadId,g=a.disableTimestampNav,h=a.id,i=a.isCaption,j=a.isEdited,k=a.postedAt;a=a.postShortcode;i=i===void 0?!1:i;j=j===void 0?!1:j;i=i&&j&&e!=null?e:k;b[0]!==i?(j=l.jsx(c("PolarisTimestamp.react"),{className:"_a9ze _a9zf",value:i}),b[0]=i,b[1]=j):j=b[1];e=j;if(a!=null&&h!=null){b[2]!==h||b[3]!==f||b[4]!==a?(k=f!=null&&f!==h?d("PolarisLinkBuilder").buildReplyPermalink(a,f,h,d("PolarisUA").isMobile()):d("PolarisLinkBuilder").buildCommentPermalink(a,h,d("PolarisUA").isMobile()),b[2]=h,b[3]=f,b[4]=a,b[5]=k):k=b[5];i=k;j=g===!0?o:void 0;b[6]!==j||b[7]!==i||b[8]!==e?(h=l.jsx(c("PolarisFastLink.react"),{className:"_a9zg",href:i,onClick:j,children:e}),b[6]=j,b[7]=i,b[8]=e,b[9]=h):h=b[9];e=h}return e}function o(a){return a.preventDefault()}function fa(a){var b=d("react-compiler-runtime").c(146),e=aa(null),f=e[0],g=e[1];e=aa(!1);var h=e[0],j=e[1];e=aa(!1);var k=e[0],m=e[1];e=aa(!1);var o=e[0],fa=e[1];b[0]!==f?(e=function(){window.clearTimeout(f)},b[0]=f,b[1]=e):e=b[1];var p=e,q=d("usePolarisDynamicIpadUpsell").usePolarisDesktopExcludingIpad(),r;b[2]!==p?(e=function(){return function(){p()}},r=[p],b[2]=p,b[3]=e,b[4]=r):(e=b[3],r=b[4]);n(e,r);b[5]===Symbol["for"]("react.memo_cache_sentinel")?(e=function(){m(!0)},b[5]=e):e=b[5];var ha=e;b[6]!==a.isCaption||b[7]!==a.showRichComment?(r=function(){if(!d("PolarisUA").isMobile()||a.showRichComment!==!0||a.isCaption===!0)return;g(window.setTimeout(ha,ba))},b[6]=a.isCaption,b[7]=a.showRichComment,b[8]=r):r=b[8];var ia=r;b[9]===Symbol["for"]("react.memo_cache_sentinel")?(e=function(){m(!1)},b[9]=e):e=b[9];var ja=e;b[10]!==a?(r=function(){m(!1),a.onDeleteComment()},b[10]=a,b[11]=r):r=b[11];var ka=r;b[12]!==a?(e=function(){var b=a.id,d=a.onDeleteCommentClick;d&&d(c("nullthrows")(b))},b[12]=a,b[13]=e):e=b[13];var s=e;b[14]!==a?(r=function(b){var c=a.onLikeComment,d=a.onUnlikeComment;b?c():d()},b[14]=a,b[15]=r):r=b[15];var la=r;b[16]!==a?(e=function(){var b=a.isRestrictedPending,c=a.likedByViewer,d=a.loggedIn,e=a.onLikeComment;b=b===void 0?!1:b;c=c===void 0?!1:c;!c&&!b&&d&&e()},b[16]=a,b[17]=e):e=b[17];var ma=e;b[18]===Symbol["for"]("react.memo_cache_sentinel")?(r={},b[18]=r):r=b[18];e=(e=a.id)!=null?e:"";b[19]!==e?(r={routeParams:r,routeProps:{commentId:e}},b[19]=e,b[20]=r):r=b[20];e=c("useIGDSEntryPointDialog")(c("PolarisCommentLikedByListDialogRoot.entrypoint"),r,"button",ga);var na=e[0];b[21]!==q||b[22]!==a||b[23]!==na?(r=function(){var b=a.code,e=a.commentOwnerId,f=a.commentOwnerUsername,g=a.fetchCommentLikes,h=a.id,i=a.likeCount,j=a.loggedIn,k=a.onLikeCountClick,l=a.onLoggedOutDialogClick,m=a.onLoggedOutIntentClick,n=a.viewerId;if(j){if(k){d("QE2Logger").logExposureForIGWebCookieCritical("ig_web_h1_2023_desktop_reels_comment_likes_graphql","is_enabled");if(c("qex")._("1656")){j=n===e;na({isOwnerTheViewer:j,likeAndViewCountsDisabled:!1,likeCount:i,ownerUsername:f,productType:void 0,viewCount:0})}else g(),k(c("nullthrows")(h))}}else q?l(d("PolarisLinkBuilder").buildMediaLink(c("nullthrows")(b)),"post_comment_like_count"):m("post_comment_like_count")},b[21]=q,b[22]=a,b[23]=na,b[24]=r):r=b[24];var oa=r;b[25]!==a?(e=function(){var b=a.loggedIn,c=a.onLoggedOutDialogPreload;!b&&d("PolarisUA").isDesktop()&&c()},b[25]=a,b[26]=e):e=b[26];var pa=e;b[27]!==a?(r=function(b){var e=a.analyticsContext,f=a.commentOwnerId,g=a.commentThreadId,h=a.id,i=a.isRestrictedPending,j=a.mediaType,k=a.postId,l=a.postOwnerId,m=a.viewerId;switch(b.state){case"entered":c("vulture")("MAG-RJBbXFB0NvzlBajB7dOG-UU=");if(h!=null&&m!=null){d("PolarisEngagementLogger").logCommentImpression({commentAuthorId:f,commentId:h,commentThreadId:g,containerModule:e,mediaAuthorId:l,mediaId:k,mediaType:j});i&&c("PolarisIgWellbeingRestrictManageCommentFalcoEvent").log({action:"impression",actorIgUserid:f,commentId:h,commentThreadId:g,parentMediaId:k,step:"pending_comment"});return}}},b[27]=a,b[28]=r):r=b[28];e=r;b[29]!==q||b[30]!==a?(r=function(){var b=a.code,e=a.loggedIn,f=a.onLoggedOutDialogClick,g=a.onLoggedOutIntentClick,h=a.onReplyClick;e?h():q?f(d("PolarisLinkBuilder").buildMediaLink(c("nullthrows")(b)),"post_comment_reply"):g("post_comment_reply")},b[29]=q,b[30]=a,b[31]=r):r=b[31];var qa=r;b[32]!==a?(r=function(){var b=a.loggedIn,c=a.onLoggedOutDialogPreload;!b&&d("PolarisUA").isDesktop()&&c()},b[32]=a,b[33]=r):r=b[33];var ra=r;b[34]!==a?(r=function(){var b=a.commentOwnerId,d=a.commentThreadId,e=a.id,f=a.postId;c("PolarisIgWellbeingRestrictManageCommentFalcoEvent").log({action:"click",actorIgUserid:b,commentId:e,commentThreadId:d,parentMediaId:f,step:"pending_comment_see_hidden"});fa(!0)},b[34]=a,b[35]=r):r=b[35];var sa=r;b[36]!==a?(r=function(){var b=a.commentOwnerId,d=a.commentThreadId,e=a.id,f=a.postId;c("PolarisIgWellbeingRestrictManageCommentFalcoEvent").log({action:"click",actorIgUserid:b,commentId:e,commentThreadId:d,parentMediaId:f,step:"pending_comment_approve"});j(!0)},b[36]=a,b[37]=r):r=b[37];var ta=r;b[38]===Symbol["for"]("react.memo_cache_sentinel")?(r=function(){j(!1)},b[38]=r):r=b[38];var ua=r;b[39]!==s||b[40]!==a||b[41]!==o?(r=function(){var b=a.commentOwnerId,d=a.commentThreadId,e=a.id,f=a.postId;c("PolarisIgWellbeingRestrictManageCommentFalcoEvent").log({action:"click",actorIgUserid:b,commentId:e,commentThreadId:d,parentMediaId:f,step:o?"pending_comment_delete":"pending_comment_delete_hidden"});s()},b[39]=s,b[40]=a,b[41]=o,b[42]=r):r=b[42];var va=r;b[43]!==oa||b[44]!==pa||b[45]!==a?(r=function(){var b=a.code,e=a.id,f=a.likeCount,g=a.loggedIn;if(f==null||f===0)return null;var h=f.toLocaleString(),j=i._(/*BTDS*/"{like count} Me gusta",[i._param("like count",h)]);h=i._(/*BTDS*/"{like count} Me gusta",[i._param("like count",h)]);j=f===1?j:h;return f>0&&(d("PolarisUA").isDesktop()||!g?l.jsx("button",{className:"_a9ze",onClick:oa,onMouseEnter:pa,children:l.jsx(c("IGDSText.react"),{color:"secondaryText",size:"footnote",weight:"semibold",zeroMargin:!0,children:j})}):l.jsx(c("PolarisFastLink.react"),{className:"_a9ze _amp7",href:"/p/"+c("nullthrows")(b)+"/c/"+c("nullthrows")(e)+"/liked_by/",children:j}))},b[43]=oa,b[44]=pa,b[45]=a,b[46]=r):r=b[46];var wa=r,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,xa,ya,R,S,T,U,V;if(b[47]!==e||b[48]!==a||b[49]!==o){r=a.className;var za=a.commentingDisabledForViewer,Aa=a.commentOwnerAvatar,Ba=a.commentOwnerId,Ca=a.commentOwnerUsername,Da=a.commentThreadId,Ea=a.communityNoteComponent,Fa=a.customPaddingStyle,Ga=a.giphyMediaInfo,W=a.hideUserAvatar,Ha=a.id,X=a.isCaption,Y=a.isEdited,Ia=a.isPermalinkedComment,Ja=a.isRestrictedPending,Ka=a.likedByViewer,La=a.postId,Z=a.postOwnerId,Ma=a.postOwnerIsUnpublished,$=a.reducedAvatarMargin,Na=a.showCommentOptionsInline,Oa=a.showRemoveIcon,Pa=a.showRichComment,Qa=a.translation,Ra=a.variant,Sa=a.viewerId;x=r;D=za;z=Aa;A=Ba;B=Ca;C=Da;E=Ea;F=Fa;I=Ha;M=Ja;N=Ka;O=La;P=Z;Q=Ma;xa=$;H=W===void 0?!1:W;J=X===void 0?!1:X;K=Y===void 0?!1:Y;r=Ia===void 0?!1:Ia;R=Na===void 0?!1:Na;T=Pa===void 0?!1:Pa;V=a.text.toString();(Qa==null?void 0:Qa.showTranslatedText)===!0&&Qa.translatedText!=null&&(V=Qa.translatedText);u=!J&&Sa!=null&&(Sa===A||P===Sa);S=u&&Oa&&!T;v=!J&&Sa!=null&&!S&&!M;b[84]!==r?(za=d("PolarisConfig").isLoggedOutFRXEligible()&&r,b[84]=r,b[85]=za):za=b[85];Aa=za;w=Aa||T&&!d("PolarisUA").isMobile()&&!J&&Sa!=null;t=Ra===d("PolarisPostVariants").VARIANTS.feed?c("PolarisTruncatedText.react"):c("PolarisUserText.react");L=!!J||!v&&!u;U=M&&!o;ya=M&&o;Ba=Ga!=null;G=Ba?(Ea=Ga==null?void 0:(Ca=Ga.first_party_cdn_proxied_images)==null?void 0:(Da=Ca.fixed_height)==null?void 0:Da.url)!=null?Ea:Ga==null?void 0:(Fa=Ga.images)==null?void 0:(Ha=Fa.fixed_height)==null?void 0:Ha.url:void 0;Ja=R===!0?"_a9ze":"";Ka=(R!==!0?"_a9zh":"")+(R===!0?" _a9zi":"");b[86]===Symbol["for"]("react.memo_cache_sentinel")?(La=l.jsx(c("IGDSIconButton.react"),{"data-testid":void 0,onClick:ha,children:l.jsx(c("IGDSBox.react"),{alignItems:"center",height:24,justifyContent:"center",position:"relative",width:24,children:l.jsx(c("IGDSMoreHorizontalPanoOutlineIcon.react"),{alt:d("PolarisPostStrings").COMMENT_OPTIONS_ALT_TEXT,color:"ig-secondary-text"})})}),b[86]=La):La=b[86];b[87]!==Ka?(Z=l.jsx("div",{className:Ka,children:La}),b[87]=Ka,b[88]=Z):Z=b[88];b[89]!==Ja||b[90]!==Z?(Ma=l.jsx("div",{className:Ja,children:Z}),b[89]=Ja,b[90]=Z,b[91]=Ma):Ma=b[91];y=Ma;$=d("PolarisViewpointReact.react").Viewpoint;W=e;X=V.replace(" ","-");b[47]=e;b[48]=a;b[49]=o;b[50]=$;b[51]=t;b[52]=u;b[53]=v;b[54]=w;b[55]=x;b[56]=y;b[57]=z;b[58]=A;b[59]=B;b[60]=C;b[61]=D;b[62]=E;b[63]=F;b[64]=G;b[65]=H;b[66]=I;b[67]=J;b[68]=K;b[69]=L;b[70]=M;b[71]=N;b[72]=O;b[73]=P;b[74]=Q;b[75]=xa;b[76]=ya;b[77]=R;b[78]=S;b[79]=T;b[80]=U;b[81]=W;b[82]=X;b[83]=V}else $=b[50],t=b[51],u=b[52],v=b[53],w=b[54],x=b[55],y=b[56],z=b[57],A=b[58],B=b[59],C=b[60],D=b[61],E=b[62],F=b[63],G=b[64],H=b[65],I=b[66],J=b[67],K=b[68],L=b[69],M=b[70],N=b[71],O=b[72],P=b[73],Q=b[74],xa=b[75],ya=b[76],R=b[77],S=b[78],T=b[79],U=b[80],W=b[81],X=b[82],V=b[83];b[92]!==t||b[93]!==u||b[94]!==v||b[95]!==w||b[96]!==x||b[97]!==y||b[98]!==z||b[99]!==A||b[100]!==B||b[101]!==C||b[102]!==D||b[103]!==E||b[104]!==F||b[105]!==G||b[106]!==ta||b[107]!==ua||b[108]!==ka||b[109]!==ia||b[110]!==p||b[111]!==s||b[112]!==ma||b[113]!==la||b[114]!==qa||b[115]!==ra||b[116]!==va||b[117]!==sa||b[118]!==H||b[119]!==I||b[120]!==J||b[121]!==K||b[122]!==L||b[123]!==M||b[124]!==N||b[125]!==O||b[126]!==P||b[127]!==Q||b[128]!==a||b[129]!==xa||b[130]!==wa||b[131]!==h||b[132]!==ya||b[133]!==k||b[134]!==R||b[135]!==S||b[136]!==o||b[137]!==T||b[138]!==U||b[139]!==V?(Y=function(b){return l.jsxs(d("PolarisDoubleTappable").DoubleTappable,{onDoubleClick:ma,role:"button",children:[l.jsx("li",{className:c("joinClasses")((T?"_a9zj":"")+(F==="compact"?" _a9zk":"")+" _a9zl",x),onMouseDown:ia,onMouseUp:p,onTouchEnd:p,onTouchMove:p,onTouchStart:ia,ref:b,children:l.jsxs("div",{className:"_a9zm","data-testid":void 0,children:[l.jsxs("div",{className:(L?"_a9zn":"")+" _a9zo",children:[T&&!H&&l.jsx(c("PolarisUserHoverCard.react"),{display:"block",userId:A,username:B,children:l.jsx(c("PolarisUserAvatarWithStories.react"),{isLink:!Q,profilePictureUrl:(b=z)!=null?b:"",size:c("PolarisIGCoreConstants").AVATAR_SIZES.small,storyEntrypoint:"post_comment",username:B,xstyle:[ca.avatar,xa===!0&&ca.reducedAvatarMargin,M===!0&&ca.restrictedContent]})}),l.jsxs("div",{className:"_a9zr",children:[l.jsx(da,{parentProps:a,showRestrictedContent:o}),!U&&(G!=null?l.jsx(c("PolarisPostGifComment.react"),{gifSrc:G}):l.jsx("div",babelHelpers["extends"]({},{0:{className:"xt0psk2"},1:{className:"xt0psk2 xbyyjgo"}}[!!(M===!0)<<0],{"data-testid":void 0,children:l.jsx(t,{display:"inline",headlineTag:J===!0?"h1":void 0,size:"body",value:V})}))),T&&l.jsx(c("IGDSBox.react"),{marginBottom:1,marginTop:2,position:"relative",children:l.jsxs(d("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",dir:c("Locale").isRTL()?"rtl":"ltr",children:[J&&K&&l.jsxs(l.Fragment,{children:[d("PolarisPostStrings").CAPTION_EDITED_TEXT,"\xa0\xb7\xa0"]}),l.jsx(ea,{parentProps:a}),J&&l.jsx(c("IGDSBox.react"),{display:"inlineBlock",position:"relative",children:l.jsx(c("PolarisPostCaptionTranslationPrompt.react"),{postId:O})}),!J&&!M&&l.jsxs(l.Fragment,{children:[wa(),D!==!0&&l.jsx("button",{className:"_a9ze",onClick:qa,onMouseEnter:ra,children:l.jsx(c("IGDSText.react"),{color:"secondaryText",size:"footnote",weight:"semibold",zeroMargin:!0,children:d("PolarisPostStrings").REPLY_TEXT})}),I!=null&&l.jsx(c("IGDSBox.react"),{display:"inlineBlock",marginEnd:2,position:"relative",children:l.jsx(c("PolarisCommentTranslationPrompt.react"),{commentId:I})}),w&&R===!0&&y]}),U&&l.jsx("button",{className:"_a9ze",onClick:sa,children:l.jsx(c("IGDSText.react"),{color:"secondaryText",size:"footnote",weight:"semibold",zeroMargin:!0,children:d("PolarisPostStrings").RESTRICT_SEE_COMMENT_TEXT})}),ya&&l.jsx("button",{className:"_a9ze",onClick:ta,children:l.jsx(c("IGDSText.react"),{color:"secondaryText",size:"footnote",weight:"semibold",zeroMargin:!0,children:d("PolarisApproveCommentDialog.react").APPROVE_COMMENT_CTA})}),M&&l.jsx("button",{className:"_a9ze",onClick:va,children:l.jsx(c("IGDSText.react"),{color:"secondaryText",size:"footnote",weight:"semibold",zeroMargin:!0,children:d("PolarisPostStrings").RESTRICT_DELETE_COMMENT_TEXT})})]})}),E!=null&&E]})]}),S&&l.jsx("button",{className:"_a9zt",onClick:s,title:d("PolarisPostStrings").DELETE_COMMENT_TEXT,children:l.jsx(c("IGDSText.react"),{color:"tertiaryText",size:"footnote",weight:"semibold",zeroMargin:!0,children:d("PolarisPostStrings").DELETE_COMMENT_TEXT})}),w&&!R&&y,v&&l.jsx(c("PolarisLikeButton.react"),{className:"_a9zu",isLiked:!!N,onChange:la,padding:0,size:12})]})}),k&&I!=null&&l.jsx(c("PolarisCommentOptionsDialog.react"),{canDeleteComment:!!u,commentId:I,commentOwnerAvatar:(b=z)!=null?b:"",commentOwnerId:A,commentOwnerUsername:B,mediaOwnerId:P,onClose:ja,onDelete:ka}),h&&I!=null&&l.jsx(d("PolarisApproveCommentDialog.react").ApproveCommentDialog,{commentId:I,commentOwnerId:A,commentOwnerUsername:B,commentThreadId:C,onClose:ua,postId:O})]})},b[92]=t,b[93]=u,b[94]=v,b[95]=w,b[96]=x,b[97]=y,b[98]=z,b[99]=A,b[100]=B,b[101]=C,b[102]=D,b[103]=E,b[104]=F,b[105]=G,b[106]=ta,b[107]=ua,b[108]=ka,b[109]=ia,b[110]=p,b[111]=s,b[112]=ma,b[113]=la,b[114]=qa,b[115]=ra,b[116]=va,b[117]=sa,b[118]=H,b[119]=I,b[120]=J,b[121]=K,b[122]=L,b[123]=M,b[124]=N,b[125]=O,b[126]=P,b[127]=Q,b[128]=a,b[129]=xa,b[130]=wa,b[131]=h,b[132]=ya,b[133]=k,b[134]=R,b[135]=S,b[136]=o,b[137]=T,b[138]=U,b[139]=V,b[140]=Y):Y=b[140];b[141]!==$||b[142]!==W||b[143]!==X||b[144]!==Y?(Ia=l.jsx($,{action:W,id:X,children:Y}),b[141]=$,b[142]=W,b[143]=X,b[144]=Y,b[145]=Ia):Ia=b[145];return Ia}function ga(a){return l.jsx(c("PolarisLikedByListDialogPlaceholder.react"),{onClose:a})}ga.displayName=ga.name+" [from "+f.id+"]";function a(a,b){var e=b.commentOwnerId,f=b.postId,g=b.postOwnerId;e=d("polarisUserSelectors").getUserByIdOrThrows(a,e);f=d("polarisPostSelectors").getPostOrNullById(a,f);b=b.id;b==null&&(b=f==null?void 0:f.captionCommentId);return{commentOwnerAvatar:e.profilePictureUrl,commentOwnerId:c("nullthrows")(e.id),commentOwnerUsername:c("nullthrows")(e.username),postOwnerIsUnpublished:d("polarisUserSelectors").getUserByIdOrThrows(a,g).isUnpublished,postShortcode:f&&f.code,translation:b!=null?a.comments.translationById.get(b):null,viewerId:a.users.viewerId}}function b(a,b){var e={commentAuthorId:b.commentOwnerId,commentId:b.id||"",containerModule:b.analyticsContext,mediaAuthorId:b.postOwnerId,mediaId:b.id||"",mediaType:b.mediaType||0};return{fetchCommentLikes:function(){return a(d("PolarisCommentLikeListsActions").requestCommentLikes(c("nullthrows")(b.id)))},onDeleteComment:function(){return a(d("PolarisCommentActions").deleteComment(b.postId,b.id||"",b.analyticsContext))},onLikeComment:function(b){return a(d("PolarisCommentActions").likeComment(babelHelpers["extends"]({},e,{userId:b||""})))},onReplyClick:function(e){return a(d("PolarisPendingCommentActions").changePendingComment(b.postId,"@"+(e||"")+" ",c("nullthrows")(b.commentThreadId),b.commentOwnerId,e))},onUnlikeComment:function(b){return a(d("PolarisCommentActions").unlikeComment(babelHelpers["extends"]({},e,{userId:b||""})))}}}function e(a,b,c){return babelHelpers["extends"]({},a,{},b,{},c,{onLikeComment:function(){return b.onLikeComment(a.viewerId)},onReplyClick:function(){return b.onReplyClick(a.commentOwnerUsername)},onUnlikeComment:function(){return b.onUnlikeComment(a.viewerId)}})}function h(a){var b=d("react-compiler-runtime").c(13),e=c("usePolarisLoggedOutIntentAction")(),f=c("usePolarisLoggedOutBlockingEntryPointDialog")(),g=f[0],h=f[1];f=c("usePolarisLoggedOutIntentEntryPointDialog")();var i=f[0],j=f[1];b[0]!==g||b[1]!==i?(f=function(a,b){a={contentReportingLink:a,nextUrl:a,source:b};d("PolarisUA").isDesktop()||d("PolarisConfig").isLoggedOutFRXEligible()?i==null?void 0:i(a):g==null?void 0:g(a)},b[0]=g,b[1]=i,b[2]=f):f=b[2];f=f;var k;b[3]!==h||b[4]!==j?(k=function(){d("PolarisUA").isDesktop()||d("PolarisConfig").isLoggedOutFRXEligible()?j==null?void 0:j(!0):h==null?void 0:h(!0)},b[3]=h,b[4]=j,b[5]=k):k=b[5];k=k;var m;b[6]!==e?(m=function(a){return e({source:a})},b[6]=e,b[7]=m):m=b[7];var n;b[8]!==k||b[9]!==f||b[10]!==a||b[11]!==m?(n=l.jsx(fa,babelHelpers["extends"]({},a,{onLoggedOutDialogClick:f,onLoggedOutDialogPreload:k,onLoggedOutIntentClick:m})),b[8]=k,b[9]=f,b[10]=a,b[11]=m,b[12]=n):n=b[12];return n}m=d("PolarisReactRedux.react").connect(a,b,e)(h);g["default"]=m}),226);
__d("polarisTransformCommentEntities",["PolarisCommentModel","PolarisUserModel","polarisTransformEntities"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b;return{comments:c("polarisTransformEntities")((b=a.commentDicts)!=null?b:{},function(a){return c("PolarisCommentModel").fromNativeResponse(a).toReduxStore()}),users:c("polarisTransformEntities")((b=a.userDicts)!=null?b:{},function(a){return c("PolarisUserModel").fromNativeResponse(a).toReduxStore()})}}g["default"]=a}),98);
__d("PolarisThreadedCommentActions",["PolarisAPIGetChildComments","PolarisAPIGetInitialComments","PolarisAPIGetPaginationComments","PolarisLegacyGraphQLPaginationUtils","PolarisPaginationUtils","PolarisThreadedCommentActionConstants","nullthrows","polarisNormalizeComments","polarisTransformCommentEntities"],(function(a,b,c,d,e,f,g){"use strict";var h,i="6544739342301107",j="6718530511526291";function a(a){return{commentPageData:c("nullthrows")(a.shortcode_media),type:"MOBILE_ALL_COMMENTS_PAGE_LOADED"}}function b(a){return{parentId:a,type:"HIDE_CHILD_COMMENTS"}}function e(a){return{parentId:a,type:"SHOW_CHILD_COMMENTS"}}function k(a,b){b=b.map(function(a){return a.pk});var c={};for(b of b)b!=null&&a[b]!=null&&(c[b]=a[b]);return c}i=d("PolarisLegacyGraphQLPaginationUtils").generatePaginationActionCreators({getState:function(a,b){return a.threadedComments.parentByPostId.get(b).pagination},onError:function(a,b,c){return{fetch:b,postId:c,type:"PARENT_COMMENT_REQUEST_FAILED"}},onUpdate:function(a,b,d,e){b=b==null?void 0:(b=b.shortcode_media)==null?void 0:b.edge_media_to_parent_comment;var f={};if(b!=null)for(var g of b.edges){var h=c("nullthrows")(g.node.edge_threaded_comments);h={comments:h.edges.map(function(a){return a.node}),count:h.count,pageInfo:h.page_info};f[g.node.id]=h}return{childComments:f,comments:b?b.edges.map(function(a){return a.node}):[],count:b&&b.count,fetch:a,hasRankedComments:e,pageInfo:b&&b.page_info,postId:d,type:"PARENT_COMMENT_REQUEST_UPDATED"}},pageSize:(h=d("PolarisThreadedCommentActionConstants")).PARENT_PAGE_SIZE,pagesToPreload:h.PAGES_TO_PRELOAD,queryId:i,queryParams:function(a,b,c){return{shortcode:c}}});h=d("PolarisLegacyGraphQLPaginationUtils").generatePaginationActionCreators({getState:function(a,b){return(a=a.threadedComments.childByParentId[b])==null?void 0:a.pagination},onError:function(a,b,c){return{fetch:b,parentId:c,type:"CHILD_COMMENT_REQUEST_FAILED"}},onUpdate:function(a,b,c){b=b==null?void 0:(b=b.comment)==null?void 0:b.edge_threaded_comments;return{comments:b&&b.edges?b.edges.map(function(a){return a.node}):[],count:b&&b.count,fetch:a,pageInfo:b&&b.page_info,parentId:c,type:"CHILD_COMMENT_REQUEST_UPDATED"}},pageSize:h.CHILD_PAGE_SIZE,pagesToPreload:h.PAGES_TO_PRELOAD,queryId:j,queryParams:function(a){return{comment_id:a}}});function l(a,b,e){var f,g=b.has_more_comments===!0||b.has_more_headload_comments===!0,h=b.has_more_headload_comments===!0,i=g?h?b.next_min_id:b.next_max_id:"";f=(f=b.comment_count)!=null?f:0;b=(b=b.comments)!=null?b:[];var j=c("polarisTransformCommentEntities")(d("polarisNormalizeComments").normalizeComments(b).entities);return{comments:k(j.comments,b),count:f,pagination:{end_cursor:i,has_next_page:g,has_previous_page:h},postId:a,sortOrder:e,type:"INITIAL_PARENT_COMMENT_REQUEST_LOADED",users:(b=j.users)!=null?b:{}}}function m(a){return{postId:a,type:"INITIAL_PARENT_COMMENT_REQUEST_FAILED"}}function n(a,b,c){return function(e,f){f=f();f=f.threadedComments;if(c!=null&&((f=f.parentByPostId[a])==null?void 0:f.sortOrder)===c)return;e({postId:a,type:"INITIAL_PARENT_COMMENT_REQUEST_LOADING"});return d("PolarisAPIGetInitialComments").getInitialComments(a,b,c).then(function(b){e(l(a,b,c))})["catch"](function(b){e(m(a))})}}function o(a,b){return function(e,f){var g;f=f();f=f.threadedComments;g=(g=(g=f.parentByPostId[a])==null?void 0:g.pagination)!=null?g:null;f=f.parentByPostId[a].sortOrder;if(g==null)return;var h=d("PolarisPaginationUtils").getEndCursor(g);if(h==null)return;e({postId:a,type:"PARENT_COMMENT_REQUEST_LOADING"});return d("PolarisAPIGetPaginationComments").getPaginationComments(a,h,d("PolarisPaginationUtils").hasPreviousPage(g)===!0,f).then(function(f){var g,h=f.has_more_comments===!0||f.has_more_headload_comments===!0,i=f.has_more_headload_comments===!0,j=h?i?f.next_min_id:f.next_max_id:"";g=(g=f.comment_count)!=null?g:0;f=(f=f.comments)!=null?f:[];var l=c("polarisTransformCommentEntities")(d("polarisNormalizeComments").normalizeComments(f).entities);e({comments:k(l.comments,f),count:g,hasRankedComments:b!=null?b:!1,pagination:{end_cursor:j,has_next_page:h,has_previous_page:i},postId:a,type:"PARENT_COMMENT_REQUEST_UPDATED_V2",users:(f=l.users)!=null?f:{}})})["catch"](function(){e({postId:a,type:"PARENT_COMMENT_REQUEST_FAILED_V2"})})}}function p(a,b){return function(e,f){e({parentId:b,type:"CHILD_COMMENT_REQUEST_LOADING"});f=f();f=f.threadedComments;f=(f=f.childByParentId[b])==null?void 0:f.pagination;var g;f!=null&&(g=d("PolarisPaginationUtils").getEndCursor(f));g=(f=g)!=null?f:null;return d("PolarisAPIGetChildComments").getChildComments(a,b,g).then(function(f){var g,h,i,j=f.has_more_head_child_comments===!0||f.has_more_tail_child_comments===!0;g=(g=f.next_max_child_cursor)!=null?g:"";h=(h=f.child_comment_count)!=null?h:0;f=(f=f.child_comments)!=null?f:[];f=c("polarisTransformCommentEntities")(d("polarisNormalizeComments").normalizeComments(f).entities);e({comments:(i=f.comments)!=null?i:{},count:h,pagination:{end_cursor:g,has_next_page:j},parentId:b,postId:a,type:"CHILD_COMMENT_REQUEST_UPDATED_V2",users:(i=f.users)!=null?i:{}})})["catch"](function(){e({parentId:b,type:"CHILD_COMMENT_REQUEST_FAILED_V2"})})}}j=i.next;function f(a,b){return function(c){return c(o(a,b))}}function q(a,b,c){return function(d){return d(n(a,b,c))}}i=h.next;function r(a,b){return function(c){return c(p(a,b))}}function s(a){return function(b){return function(c){c(l(a,b))}}}g.mobileAllCommentsPageLoaded=a;g.hideChildComments=b;g.showChildComments=e;g.initialCommentsError=m;g.requestNextParentCommentPage=j;g.requestNextParentCommentPageV2=f;g.requestInitialComments=q;g.requestNextChildCommentPage=i;g.requestNextChildCommentPageV2=r;g.setupPostComments=s}),98);
__d("PolarisThreadedCommentSelectors",["PolarisPaginationUtils","immutable-4.0.0-rc.9","nullthrows","polarisCreateSelectorWithArg"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return!a.deleted&&!a.didReportAsSpam}b=c("polarisCreateSelectorWithArg")(function(a){return a.posts.byId},function(a){return a.comments.byId},function(a){return a.threadedComments.parentByPostId},function(a,b,e){return function(f){var g=e[f];f=a.get(f);if(!g||!f)return d("immutable-4.0.0-rc.9").List();var i=g.commentIds;g=d("PolarisPaginationUtils").getVisibleCount(g.pagination);f=f.hasRankedComments===!0?0:i.count()-g;return i.map(function(a){return c("nullthrows")(b.get(a))}).slice(f,f+g).filter(function(a){return h(a)})}});e=c("polarisCreateSelectorWithArg")(function(a){return a.comments.byId},function(a){return a.threadedComments.childByParentId},function(a,b){return function(e){e=c("nullthrows")(b[e]);var f=e.commentIds;e=e.pagination;f=f.map(function(b){return c("nullthrows")(a.get(b))});e=f.count()-d("PolarisPaginationUtils").getVisibleCount(e);var g=f.slice(e,f.count()).filter(function(a){return h(a)});f=f.slice(0,e).filter(function(a){return h(a)});e=f.map(function(a){return a.id});return{remainingCachedShowableChildCommentIds:e,visibleChildComments:g}}});f=c("polarisCreateSelectorWithArg")(function(a){return a.comments.byId},function(a){return a.threadedComments.childByParentId},function(a,b){return function(a){a=c("nullthrows")(b[a]);return a.count||0}});function a(a,b){return!!a.threadedComments.initialCommentsLoading[b]}g.selectVisibleParentCommentsForPostId=b;g.selectChildCommentsForParentIdSplitByVisibility=e;g.getTotalChildCommentCountForParentId=f;g.getThreadedCommentsLoading=a}),98);
__d("PolarisCommentThread.react",["cx","fbt","IGDSBox.react","IGDSSpinner.react","PolarisIGCoreButton.react","PolarisInteractionsLogger","PolarisIsLoggedIn","PolarisPaginationUtils","PolarisPostComment.react","PolarisPostVariants","PolarisReactRedux.react","PolarisThreadedCommentActions","PolarisThreadedCommentSelectors","isStringNullOrEmpty","nullthrows","polarisCommentReducer","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react");function l(a){var b=d("react-compiler-runtime").c(24),e=a.childComment,f=a.disableTimestampNav;a=a.parentProps;var g=a.analyticsContext,h=a.code,i=a.commentingDisabledForViewer,j=a.hideUserAvatar,l=a.loggedIn,m=a.onDeleteCommentClick,n=a.onLikeCountClick,o=a.parentComment,p=a.postId,q=a.postOwnerId,r=a.reducedAvatarMargin,s=a.showCommentOptionsInline;a=a.showRemoveIcon;j=!!j;var t;b[0]!==g||b[1]!==e.giphyMediaInfo||b[2]!==e.id||b[3]!==e.isAuthorVerified||b[4]!==e.isRestrictedPending||b[5]!==e.likeCount||b[6]!==e.likedByViewer||b[7]!==e.postedAt||b[8]!==e.text||b[9]!==e.userId||b[10]!==h||b[11]!==i||b[12]!==f||b[13]!==l||b[14]!==m||b[15]!==n||b[16]!==o.id||b[17]!==p||b[18]!==q||b[19]!==r||b[20]!==s||b[21]!==a||b[22]!==j?(t=k.jsx(c("PolarisPostComment.react"),{analyticsContext:g,className:"_a9ye",code:h,commentingDisabledForViewer:i,commentOwnerId:e.userId,commentThreadId:o.id,disableTimestampNav:f,giphyMediaInfo:e.giphyMediaInfo,hideUserAvatar:j,id:e.id,isAuthorVerified:e.isAuthorVerified,isRestrictedPending:e.isRestrictedPending,likeCount:e.likeCount,likedByViewer:e.likedByViewer,loggedIn:l,onDeleteCommentClick:m,onLikeCountClick:n,postedAt:e.postedAt,postId:p,postOwnerId:q,reducedAvatarMargin:r,showCommentOptionsInline:s,showRemoveIcon:a,showRichComment:!0,text:e.text,variant:d("PolarisPostVariants").VARIANTS.flexible},e.id),b[0]=g,b[1]=e.giphyMediaInfo,b[2]=e.id,b[3]=e.isAuthorVerified,b[4]=e.isRestrictedPending,b[5]=e.likeCount,b[6]=e.likedByViewer,b[7]=e.postedAt,b[8]=e.text,b[9]=e.userId,b[10]=h,b[11]=i,b[12]=f,b[13]=l,b[14]=m,b[15]=n,b[16]=o.id,b[17]=p,b[18]=q,b[19]=r,b[20]=s,b[21]=a,b[22]=j,b[23]=t):t=b[23];return t}b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={hasPermalinkedReplyBeenHidden:!1},b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.componentDidUpdate=function(a,b){(a.parentComment.id!==this.props.parentComment.id||a.permalinkedReplyId!==this.props.permalinkedReplyId)&&this.setState({hasPermalinkedReplyBeenHidden:!1})};e.$1=function(){var a=this.props,b=a.childCommentsCacheCanShowMoreWithoutFetch,c=a.childCommentsCanFetchMorePagination,d=a.childCommentsHasNextPage,e=a.permalinkedReply;a=a.remainingCachedShowableChildCommentIds;return e!=null&&d===!0&&b===!0&&c!==!0&&a.count()===1&&a.get(0)===e.id};e.$2=function(a){var b=this.props.childCommentsHasNextPage;return b!==!0||a&&this.$1()};e.$3=function(a){var b=this.props,c=b.analyticsContext,e=b.childCommentsCacheCanShowMoreWithoutFetch,f=b.childCommentsIsFetching,g=b.hideReplies,h=b.loadChildComments,i=b.loadChildCommentsV2,j=b.onHidePermalinkReply,k=b.parentComment,l=k.id;k=k.userId;var m=b.permalinkedReply,n=b.postId,o=b.postOwnerId;b=b.showReplies;if(f)return;else a?(g(l),d("PolarisInteractionsLogger").logInteractionAction({commentAuthorId:k,commentId:l,containerModule:c,eventName:"instagram_child_comments_collapse",mediaAuthorId:o,mediaId:n}),m!=null&&(j!=null&&j(),this.setState({hasPermalinkedReplyBeenHidden:!0}))):e?b(l):d("PolarisIsLoggedIn").isLoggedIn()?i(n,l):h(l)};e.$4=function(a,b){var d=this,e=this.props,f=e.childCommentsIsFetching,g=e.replyPagerNodeRef;e=e.totalChildCommentCount;var h=this.$2(b),j=b?1:0;j=a+j;e=e-j;h&&!f?j=i._(/*BTDS*/"Ocultar respuestas"):e<=0?j=i._(/*BTDS*/"Ver respuestas"):j=i._(/*BTDS*/"Ver respuestas ({hidden replies})",[i._param("hidden replies",e)]);return k.jsx("li",{className:"_a9yg",ref:g,children:k.jsxs(c("IGDSBox.react"),{direction:"row",marginBottom:a>0?4:0,marginTop:b?2:0,position:"relative",children:[k.jsxs(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:function(){return d.$3(h)},children:[k.jsx("div",{className:"_a9yh"}),k.jsx("span",{className:"_a9yi",children:j})]}),f&&k.jsx("div",{className:"_a9yj",children:k.jsx(c("IGDSSpinner.react"),{size:"small"})})]})})};e.render=function(){var a=this,b=this.props,e=b.analyticsContext,f=b.code,g=b.commentingDisabledForViewer,h=b.customIndentationPadding,i=b.hideUserAvatar,j=b.innerRef,m=b.isPermalinkedComment,n=b.loggedIn,o=b.onDeleteCommentClick,p=b.onLikeCountClick,q=b.parentComment,r=b.permalinkedReply,s=b.permalinkedReplyAnimating,t=b.permalinkedReplyId,u=b.permalinkedReplyNodeRef,v=b.postId,w=b.postOwnerId,x=b.reducedAvatarMargin,y=b.showCommentOptionsInline,z=b.showRemoveIcon,A=b.totalChildCommentCount;b=b.visibleChildComments;var B=this.state.hasPermalinkedReplyBeenHidden,C=null;r&&!(B&&b.count()===0)&&(C=k.jsx("div",{className:"_a9yk"+(s===!0&&!B?" _a9yl":""),ref:u,children:k.jsx(l,{childComment:r,disableTimestampNav:!0,parentProps:this.props})}));s=b.map(function(b,d){return C&&c("nullthrows")(r).id===b.id?null:k.jsx(l,{childComment:b,parentProps:a.props},d)}).filter(function(a){return a!=null});B=this.$4(s.count(),C!=null);u=h!=null?{margin:"12px 0 0 "+h+"px",width:"calc(100% - "+h+"px)"}:void 0;return k.jsxs("ul",{className:"_a9ym",ref:j,children:[k.jsx(c("PolarisPostComment.react"),{analyticsContext:e,code:f,commentingDisabledForViewer:g,commentOwnerId:q.userId,commentThreadId:q.id,disableTimestampNav:m===!0&&t==null,giphyMediaInfo:q.giphyMediaInfo,hideUserAvatar:!!i,id:q.id,isAuthorVerified:q.isAuthorVerified,isPermalinkedComment:m,isRestrictedPending:q.isRestrictedPending,likeCount:q.likeCount,likedByViewer:q.likedByViewer,loggedIn:n,onDeleteCommentClick:o,onLikeCountClick:p,postedAt:q.postedAt,postId:v,postOwnerId:w,reducedAvatarMargin:x,showCommentOptionsInline:y,showRemoveIcon:z,showRichComment:!0,text:q.text,variant:d("PolarisPostVariants").VARIANTS.flexible}),A!==0&&k.jsx("li",{children:k.jsxs("ul",{className:"_a9yo",style:u,children:[C,B,s]})})]})};return b}(k.Component);function a(a,b){var e=b.parentComment;b=b.permalinkedReplyId;var f=d("PolarisThreadedCommentSelectors").selectChildCommentsForParentIdSplitByVisibility(a,e.id),g=f.remainingCachedShowableChildCommentIds;f=f.visibleChildComments;var h=d("PolarisThreadedCommentSelectors").getTotalChildCommentCountForParentId(a,e.id);e=(e=a.threadedComments.childByParentId[e.id])!=null?e:d("polarisCommentReducer").EMPTY_POST_COMMENTS_STATE;e=e.pagination;var i=null;c("isStringNullOrEmpty")(b)||(i=a.comments.byId.get(b));return{childCommentsCacheCanShowMoreWithoutFetch:d("PolarisPaginationUtils").getVisibleCount(e)<d("PolarisPaginationUtils").getLoadedCount(e),childCommentsCanFetchMorePagination:d("PolarisPaginationUtils").canFetchMorePagination(e),childCommentsHasNextPage:d("PolarisPaginationUtils").hasNextPage(e),childCommentsIsFetching:d("PolarisPaginationUtils").isFetching(e),permalinkedReply:i,remainingCachedShowableChildCommentIds:g,totalChildCommentCount:h||0,visibleChildComments:f}}e={hideReplies:d("PolarisThreadedCommentActions").hideChildComments,loadChildComments:d("PolarisThreadedCommentActions").requestNextChildCommentPage,loadChildCommentsV2:d("PolarisThreadedCommentActions").requestNextChildCommentPageV2,showReplies:d("PolarisThreadedCommentActions").showChildComments};f=d("PolarisReactRedux.react").connect(a,e)(b);g["default"]=f}),226);
__d("PolarisDeleteCommentModal.react",["fbt","IGCoreDialog.react","PolarisCommentActions","PolarisGenericStrings","PolarisReactRedux.react","polarisLogAction","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(15),e=a.analyticsContext,f=a.commentId,g=a.onClose,i=a.postId,k=d("PolarisReactRedux.react").useDispatch();b[0]!==e||b[1]!==f||b[2]!==k||b[3]!==g||b[4]!==i?(a=function(a){c("polarisLogAction")("commentDelete",{source:e}),k(d("PolarisCommentActions").deleteComment(i,f,e)),g(a)},b[0]=e,b[1]=f,b[2]=k,b[3]=g,b[4]=i,b[5]=a):a=b[5];a=a;var l;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(l=h._(/*BTDS*/"Eliminar comentario"),b[6]=l):l=b[6];b[7]!==a?(l=j.jsx(d("IGCoreDialog.react").IGCoreDialogItem,{color:"ig-error-or-destructive",onClick:a,children:l}),b[7]=a,b[8]=l):l=b[8];b[9]!==g?(a=j.jsx(d("IGCoreDialog.react").IGCoreDialogItem,{onClick:g,children:d("PolarisGenericStrings").CANCEL_TEXT}),b[9]=g,b[10]=a):a=b[10];var m;b[11]!==g||b[12]!==l||b[13]!==a?(m=j.jsxs(d("IGCoreDialog.react").IGCoreDialog,{onModalClose:g,children:[l,a]}),b[11]=g,b[12]=l,b[13]=a,b[14]=m):m=b[14];return m}g["default"]=a}),226);
__d("PolarisDirectActionSendPostToUsers",["InstagramODS","MercuryLocalIDs","PolarisDirectAPI","PolarisDirectActionConstants","PolarisDirectActionSendText","PolarisDirectActionThreadLoaded","PolarisDirectActionsLogger","PolarisDirectConstants","PolarisDirectStrings","PolarisToastActions","Promise","isStringNullOrEmpty","nullthrows","polarisDirectSelectors"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var e=a.comment,f=a.customToast,g=a.mediaId,j=a.mediaOverlayInfo,k=a.mqtt,l=a.onError,m=a.onSuccess,n=a.productType,o=a.recipients;return function(a,p){var q=function(b){f!=null?f({text:b}):a(d("PolarisToastActions").showToast({text:b}))};o.forEach(function(f,o){var r;f.type==="user"?r=d("polarisDirectSelectors").getThreadIdForUserId(p(),o):f.type==="thread"&&(r=o);d("PolarisDirectActionsLogger").directActionsLogger.logDirectEvent("http_message_attempt",{recipientType:f.type,type:d("PolarisDirectConstants").ThreadItemType.MEDIA_SHARE});r!=null?i(k,r,g,j,n).then(function(){m==null?void 0:m(o),d("PolarisDirectActionsLogger").directActionsLogger.logDirectEvent("http_message_success",{recipientType:f.type,type:d("PolarisDirectConstants").ThreadItemType.MEDIA_SHARE}),c("InstagramODS").incr("web.share_sheet.send_post"),q(d("PolarisDirectStrings").SENT_TOAST_TEXT)}).then(function(){var a=d("MercuryLocalIDs").generateOfflineThreadingID();r!=null&&!c("isStringNullOrEmpty")(e)&&new(h||(h=b("Promise")))(function(a){window.setTimeout(a,d("PolarisDirectActionConstants").NUM_SEC_DELAY_FOR_SEND_TEXT*1e3)}).then(function(){return d("PolarisDirectActionSendText").sendText(k,c("nullthrows")(r),e,a)}).then(function(){d("PolarisDirectActionsLogger").directActionsLogger.logDirectEvent("http_message_success",{recipientType:f.type,type:d("PolarisDirectConstants").ThreadItemType.TEXT}),c("InstagramODS").incr("web.share_sheet.send_post_with_comment")})["catch"](function(a){d("PolarisDirectActionsLogger").directActionsLogger.logError("direct_send_message_to_users_failed",a),q(d("PolarisDirectStrings").GENERIC_ERROR_MESSAGE)})})["catch"](function(a){l==null?void 0:l(a,o),d("PolarisDirectActionsLogger").directActionsLogger.logError("direct_send_post_to_users_failed",a),q(d("PolarisDirectStrings").GENERIC_ERROR_MESSAGE)}):d("PolarisDirectAPI").createGroupThread([o]).then(function(p){var r=p.thread_id;a(d("PolarisDirectActionThreadLoaded").threadLoaded(p));i(k,r,g,j,n).then(function(){m==null?void 0:m(o),d("PolarisDirectActionsLogger").directActionsLogger.logDirectEvent("http_message_success",{type:d("PolarisDirectConstants").ThreadItemType.MEDIA_SHARE}),q(d("PolarisDirectStrings").SENT_TOAST_TEXT)}).then(function(){var a=d("MercuryLocalIDs").generateOfflineThreadingID();r!=null&&!c("isStringNullOrEmpty")(e)&&new(h||(h=b("Promise")))(function(a){window.setTimeout(a,d("PolarisDirectActionConstants").NUM_SEC_DELAY_FOR_SEND_TEXT*1e3)}).then(function(){return d("PolarisDirectActionSendText").sendText(k,c("nullthrows")(r),e,a)}).then(function(){d("PolarisDirectActionsLogger").directActionsLogger.logDirectEvent("http_message_success",{recipientType:f.type,type:d("PolarisDirectConstants").ThreadItemType.TEXT}),q(d("PolarisDirectStrings").SENT_TOAST_TEXT)})["catch"](function(a){d("PolarisDirectActionsLogger").directActionsLogger.logError("direct_send_message_to_users_failed",a),q(d("PolarisDirectStrings").GENERIC_ERROR_MESSAGE)})})["catch"](function(a){l==null?void 0:l(a,o),d("PolarisDirectActionsLogger").directActionsLogger.logError("direct_send_post_to_users_failed",a)})},function(a){l==null?void 0:l(a,o),d("PolarisDirectActionsLogger").directActionsLogger.logError("direct_create_thread_send_post_to_users_failed",a),q(d("PolarisDirectStrings").GENERIC_ERROR_MESSAGE)})})}}function i(a,c,d,e,f){return a!=null?a.sendMediaShare(c,d,e,f):(h||(h=b("Promise"))).reject(new Error("MQTT is not instantiated"))}g.sendPostToUsers=a}),98);
__d("PolarisEmbedHashHelpers",["memoize"],(function(a,b,c,d,e,f,g){"use strict";a=c("memoize")(function(){var a=window.location.hash;a=decodeURIComponent(a.substring(a.indexOf("#")+1));try{a=JSON.parse(a)}catch(b){a={}}return{clientId:a.ci,offset:a.os,sdkLoadEnd:a.le,sdkLoadStart:a.ls}});g.getHashPayload=a}),98);
__d("polarisGetEmbedRequestID",["nullthrows"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("nullthrows")(document.querySelector(".Embed"));return a.getAttribute("data-request-id")}g["default"]=a}),98);
__d("PolarisEmbedLogger",["InstagramQueryParamsHelper","PolarisEmbedHashHelpers","PolarisLogger","PolarisLoggerUtils","PolarisPigeonLogger","gkx","polarisGetEmbedRequestID"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=d("PolarisLoggerUtils").trimAndSanitizeUrl(a||window.location.href);var b=c("polarisGetEmbedRequestID")();return b!=null?d("InstagramQueryParamsHelper").appendQueryParams(a,{ig_rid:b}):a}function a(a,b,e){if(!c("gkx")("25394"))return;var f=d("PolarisLogger").getExtra(),g=f.url;f=babelHelpers.objectWithoutPropertiesLoose(f,["url"]);a=babelHelpers["extends"]({client_id:d("PolarisEmbedHashHelpers").getHashPayload().clientId,event_name:a.actionName,is_copyright_blocked:a.isCopyrightBlocked,media_id:a.mediaId,media_type:a.mediaType,owner_id:a.ownerId===""?null:a.ownerId},f);f=babelHelpers["extends"]({obj_id:h(g),obj_type:"url"},e);d("PolarisLogger").logPigeonEvent(d("PolarisPigeonLogger").createEvent("instagram_web_embeds",a,f),b)}function i(a,b,c){var e=d("PolarisLogger").getAnonymousExtra(),f=e.url;e=babelHelpers.objectWithoutPropertiesLoose(e,["url"]);a=babelHelpers["extends"]({client_id:d("PolarisEmbedHashHelpers").getHashPayload().clientId,event_name:a.actionName,is_copyright_blocked:a.isCopyrightBlocked,media_id:a.mediaId,media_type:a.mediaType,owner_id:a.ownerId===""?null:a.ownerId},e);e=babelHelpers["extends"]({obj_id:h(f),obj_type:"url"},c);d("PolarisLogger").logPigeonEvent(d("PolarisPigeonLogger").createEvent("instagram_web_embeds_anonymous",a,e),b)}function b(a){var b=a.isCopyrightBlocked,c=a.mediaId,d=a.mediaType;a=a.ownerId;i({actionName:"view",isCopyrightBlocked:b,mediaId:c,mediaType:d,ownerId:a})}function e(a,b,e){if(!c("gkx")("25394"))return;a=d("PolarisLogger").getExtra(a);var f=a.url;a=babelHelpers.objectWithoutPropertiesLoose(a,["url"]);a=babelHelpers["extends"]({client_id:d("PolarisEmbedHashHelpers").getHashPayload().clientId,parent_url:window.document.referrer},a);f=babelHelpers["extends"]({obj_id:h(f),obj_type:"url"},e);d("PolarisLogger").logPigeonEvent(d("PolarisPigeonLogger").createEvent("instagram_web_embed_perf_events",a,f),b)}g.logEmbedAction=a;g.logEmbedPageView=b;g.logEmbedTimings=e}),98);
__d("PolarisEmbedVideoWatchAgain.react",["cx","fbt","PolarisEmbedLogger","PolarisFastLink.react","PolarisLinkBuilder","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l=i._(/*BTDS*/"Controlar"),m=i._(/*BTDS*/"Volver a ver en Instagram"),n="https://www.instagram.com";function o(a){var b=d("react-compiler-runtime").c(4),e=a.className,f=a.href;a=a.onClick;var g;b[0]!==e||b[1]!==f||b[2]!==a?(g=k.jsx(c("PolarisFastLink.react"),{"aria-label":l,className:e,href:f,onClick:a,target:"_blank"}),b[0]=e,b[1]=f,b[2]=a,b[3]=g):g=b[3];return g}function a(a){var b,e=d("react-compiler-runtime").c(18),f=a.post;a=f.code;a=a!=null&&a.length>0?d("PolarisLinkBuilder").buildMediaLink(a):"";a=""+n+a+"?utm_source=ig_embed&utm_campaign=embed_video_watch_again";if(e[0]!==f.id||e[1]!==((b=f.owner)==null?void 0:b.id)){var g;b=function(){var a;d("PolarisEmbedLogger").logEmbedAction({actionName:"videoWatchAgainClick",mediaId:f.id,mediaType:"video",ownerId:((a=f.owner)==null?void 0:a.id)||""})};e[0]=f.id;e[1]=(g=f.owner)==null?void 0:g.id;e[2]=b}else b=e[2];g=b;e[3]!==g||e[4]!==a?(b=k.jsx(c("PolarisFastLink.react"),{"aria-label":m,className:"_aarb _9zwu",href:a,onClick:g,target:"_blank"}),e[3]=g,e[4]=a,e[5]=b):b=e[5];var h;e[6]!==g||e[7]!==a?(h=k.jsx(c("PolarisFastLink.react"),{"aria-label":m,className:"_aarc",href:a,onClick:g,target:"_blank",children:m}),e[6]=g,e[7]=a,e[8]=h):h=e[8];var i;e[9]!==b||e[10]!==h?(i=k.jsx("div",{className:"_aar9",children:k.jsxs("div",{className:"_aara",children:[b,h]})}),e[9]=b,e[10]=h,e[11]=i):i=e[11];e[12]!==g||e[13]!==a?(b=k.jsx(o,{className:"_aard",href:a,onClick:g}),e[12]=g,e[13]=a,e[14]=b):b=e[14];e[15]!==i||e[16]!==b?(h=k.jsxs(k.Fragment,{children:[i,b]}),e[15]=i,e[16]=b,e[17]=h):h=e[17];return h}g["default"]=a}),226);
__d("PolarisVideoHeight",["PolarisSizing"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e){Object.assign(e,{height:"100%",position:"absolute",width:"100%"});var f=null;a.dimensions!=null&&(f=d("PolarisSizing").getHeightPercent(a.dimensions));f!=null&&f!==100&&(b&&(f=Math.min(f,d("PolarisSizing").CAPPED_HEIGHT_PERCENT)),Object.assign(c,{paddingBottom:"calc("+f+"% - 1px)"}),Object.assign(e,{height:"calc(100% + 1px)"}))}g.setVideoHeightCompensation=a}),98);
__d("PolarisVideoPlayButton.react",["cx","fbt","PolarisGenericStrings","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l=i._(/*BTDS*/"Controlar");function a(a){var b=d("react-compiler-runtime").c(7),c=a.onClick;a=a.showPlayButton;var e="_aakh";a="_aaki _aakj"+(a?" _aakk":"")+" _9zwu";b[0]!==a?(e=k.jsx("div",{className:e,children:k.jsx("span",{"aria-label":d("PolarisGenericStrings").ASSISTIVE_TEXT_PLAY_BUTTON,className:a,role:"button"})}),b[0]=a,b[1]=e):e=b[1];b[2]!==c?(a=k.jsx("div",{"aria-label":l,className:"_aakl",onClick:c,role:"button",tabIndex:"0"}),b[2]=c,b[3]=a):a=b[3];b[4]!==e||b[5]!==a?(c=k.jsxs(k.Fragment,{children:[e,a]}),b[4]=e,b[5]=a,b[6]=c):c=b[6];return c}g["default"]=a}),226);
__d("PolarisEmbedVideo.react",["cx","PolarisEmbedLogger","PolarisEmbedVideoWatchAgain.react","PolarisUserTagIndicatorWithSheet.react","PolarisVideoHeight","PolarisVideoPlayButton.react","Run","joinClasses","keyMirror","nullthrows","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=c("keyMirror")({finished:null,paused:null,playing:null});a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this,b)||this;c.$1=j.createRef();c.$2=!1;c.$3=null;c.handleVisiblityChange=function(){c.state.playerState!=null&&document.visibilityState&&document.visibilityState==="hidden"&&c.stop()};c.handleBeforeUnload=function(){c.state.playerState===k.playing&&c.stop()};c.handlePlayerPlayEvent=function(){c.setState({playerState:k.playing})};c.handlePlayerPauseEvent=function(){c.pause()};c.handlePlayerEndedEvent=function(){c.stop()};c.handleContainerClick=function(a){c.state.playerState!==k.playing?c.play():c.pause()};b={playerState:null};c.state=b;return c}var e=b.prototype;e.componentDidMount=function(){document.addEventListener("visibilitychange",this.handleVisiblityChange);this.$3=d("Run").onBeforeUnload(this.handleBeforeUnload);var a=c("nullthrows")(this.$1.current);a.addEventListener("play",this.handlePlayerPlayEvent);a.addEventListener("pause",this.handlePlayerPauseEvent);a.addEventListener("ended",this.handlePlayerEndedEvent)};e.componentDidUpdate=function(a){this.props.isVisible===!1&&a.isVisible===!0&&this.pause()};e.componentWillUnmount=function(){this.handleBeforeUnload();document.removeEventListener("visibilitychange",this.handleVisiblityChange);this.$3!=null&&(this.$3.remove(),this.$3=null);var a=c("nullthrows")(this.$1.current);a.removeEventListener("play",this.handlePlayerPlayEvent);a.removeEventListener("pause",this.handlePlayerPauseEvent);a.removeEventListener("ended",this.handlePlayerEndedEvent)};e.play=function(){if(this.state.playerState===k.playing)return;if(this.$2===!1){var a;d("PolarisEmbedLogger").logEmbedAction({actionName:"videoFirstPlayClick",mediaId:this.props.post.id,mediaType:"video",ownerId:((a=this.props.post.owner)==null?void 0:a.id)||""});this.$2=!0}c("nullthrows")(this.$1.current).play()};e.pause=function(){if(this.state.playerState!==k.playing)return;c("nullthrows")(this.$1.current).pause();this.setState({playerState:k.paused})};e.stop=function(){if(this.state.playerState===k.finished)return;var a=c("nullthrows")(this.$1.current);a.pause();a.currentTime=0;this.setState({playerState:k.finished})};e.render=function(){var a=this.props,b=a.className;a=a.post;var e=this.state.playerState,f={},g={};d("PolarisVideoHeight").setVideoHeightCompensation(a,!0,f,g);var h=e===k.finished;e=!e||e===k.paused;return j.jsxs("div",{className:c("joinClasses")(b,"_aand"),style:f,children:[j.jsx("div",{style:g,children:!a.mediaOverlayInfo&&j.jsx("video",{className:"_aane",controls:!1,controlsList:void 0,"data-testid":void 0,loop:!1,playsInline:!0,poster:a.src,preload:"none",ref:this.$1,src:a.videoUrl,children:j.jsx("track",{kind:"captions"})})}),h?j.jsx(c("PolarisEmbedVideoWatchAgain.react"),{post:a}):j.jsx(c("PolarisVideoPlayButton.react"),{onClick:this.handleContainerClick,showPlayButton:e}),a.usertags&&a.usertags.length>=1&&j.jsx(c("PolarisUserTagIndicatorWithSheet.react"),{mediaId:a.id,usertags:a.usertags})]})};return b}(j.Component);g["default"]=a}),98);
__d("PolarisHotKeys.react",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext;b={keyMap:{}};var k=i.createContext(b);function a(a){var b=d("react-compiler-runtime").c(13),c=a.children,e=a.className,f=a.isButton,g=a.keyMap;a=f===void 0?!1:f;f=j(k).keyMap;var h=m,n=l;b[0]!==g?(f=function(a){if(g[a.key]!=null&&n()&&h(a)){var b=g[a.key];b();a.stopPropagation()}},b[0]=g,b[1]=f):f=b[1];f=f;var o=a?"button":"presentation";a=a?"0":"-1";var p;b[2]!==g?(p={keyMap:g},b[2]=g,b[3]=p):p=b[3];var q;b[4]!==c||b[5]!==e||b[6]!==f||b[7]!==o||b[8]!==a?(q=typeof c==="function"?c(f,o,a):i.jsx("div",{className:e,onKeyUp:f,role:o,tabIndex:a,children:c}),b[4]=c,b[5]=e,b[6]=f,b[7]=o,b[8]=a,b[9]=q):q=b[9];b[10]!==p||b[11]!==q?(c=i.jsx(k.Provider,{value:p,children:q}),b[10]=p,b[11]=q,b[12]=c):c=b[12];return c}function l(){var a;return((a=document.activeElement)==null?void 0:a.tagName.toLowerCase())!=="textarea"&&((a=document.activeElement)==null?void 0:a.tagName.toLowerCase())!=="input"}function m(a){return!(a.ctrlKey||a.altKey||a.metaKey)}g["default"]=a}),98);
__d("PolarisInFeedPostModalContext",["emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=(h||d("react")).createContext;b=a(c("emptyFunction"));g.InFeedPostModalContext=b}),98);
__d("PolarisLikedByListContainerLazy.react",["CometPlaceholder.react","JSResourceForInteraction","lazyLoadComponent","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisLikedByListContainer.react").__setRef("PolarisLikedByListContainerLazy.react"));function a(a){var b=d("react-compiler-runtime").c(2),e;b[0]!==a?(e=i.jsx(c("CometPlaceholder.react"),{fallback:null,children:i.jsx(j,babelHelpers["extends"]({},a))}),b[0]=a,b[1]=e):e=b[1];return e}g["default"]=a}),98);
__d("PolarisPhotoWrapper.react",["InstagramODS","PolarisClickEventLoggerProvider.react","PolarisExternalLink.react","PolarisSponsoredPostContext.react","PolarisTrackingNodeProvider.react","PolarisUA","polarisAdsSelectors.react","react","react-compiler-runtime","usePolarisOffsiteTrackingDataURLParams"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext;function k(a){var b=d("react-compiler-runtime").c(7),e=a.children,f=a.externalURL;a=a.wrappedRef;var g=l,h=c("usePolarisOffsiteTrackingDataURLParams")(f),j;b[0]!==e||b[1]!==f||b[2]!==h?(j=function(a){return i.jsx("div",{ref:a,children:i.jsx(c("PolarisExternalLink.react"),{className:"x4gyw5p",href:f,ignoreDoubleClick:!0,onClick:g,queryParams:h,children:e})})},b[0]=e,b[1]=f,b[2]=h,b[3]=j):j=b[3];var k;b[4]!==j||b[5]!==a?(k=i.jsx(c("PolarisClickEventLoggerProvider.react"),{ignoreDoubleClick:!0,children:i.jsx(c("PolarisTrackingNodeProvider.react"),{ref:a,trackingNode:86,children:j})}),b[4]=j,b[5]=a,b[6]=k):k=b[6];return k}function l(){c("InstagramODS").incr("web.ads.feed.link_click")}function a(a){var b=d("react-compiler-runtime").c(10),e=a.children,f=a.postId,g=a.ref;a=d("polarisAdsSelectors.react").useFeedAdInfo(f,m);var h=j(d("PolarisSponsoredPostContext.react").PolarisSponsoredPostContext);h=h.singleImageAdAsCta;if(b[0]!==(a==null?void 0:a.ctaItems)||b[1]!==f){var l;l=a==null?void 0:(l=a.ctaItems)==null?void 0:(l=l.get(f))==null?void 0:l.ctaLinkUrl;b[0]=a==null?void 0:a.ctaItems;b[1]=f;b[2]=l}else l=b[2];var n=l;if(n!=null&&h&&d("PolarisUA").isDesktop()){b[3]!==e||b[4]!==n||b[5]!==g?(a=i.jsx(c("PolarisTrackingNodeProvider.react"),{trackingNode:12,children:function(a){return i.jsx("div",{ref:a,children:i.jsx(k,{externalURL:n,wrappedRef:g,children:e})})}}),b[3]=e,b[4]=n,b[5]=g,b[6]=a):a=b[6];return a}b[7]!==e||b[8]!==g?(f=i.jsx("div",{ref:g,children:e}),b[7]=e,b[8]=g,b[9]=f):f=b[9];return f}function m(a){return a}g["default"]=a}),98);
__d("PolarisVideoViewedTimeAction",["convertToViewabilityPercentage","gkx","memoizeStringOnly","polarisVideoEventLogger","polarisVideoUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=c("memoizeStringOnly")(function(a){return new Map()}),i=c("memoizeStringOnly")(function(a){return new Map()}),j=c("memoizeStringOnly")(function(){return new Map()});function k(a){a=a.video;var b=a.getDeclarativeVideoRef();return{lastStartPosition:(b=b==null?void 0:b.getCurrentTime())!=null?b:0,loopCount:a.getLoopCount()}}function l(a){var b=a.adTrackingToken,c=a.context,e=a.initialData,f=a.post;a=a.video;var g=a.getDeclarativeVideoRef();return{adTrackingToken:b,analyticsContext:c,carouselParentId:f.carouselParentId,currentVideoTime:d("polarisVideoUtils").getCurrentVideoTime(g),dashInfo:d("polarisVideoUtils").getDashInfo(f),duration:g==null?void 0:g.getDuration(),id:f.id,isAd:!0,lastStartPosition:e.lastStartPosition,loopCount:a.getLoopCount()-e.loopCount,ownerId:(b=f.owner)==null?void 0:b.id,postedAt:f.postedAt,sequenceNumber:a.getNextSequenceNumber(),timeAtVideoPause:d("polarisVideoUtils").getTimeAtVideoPause(g),trackingToken:f.trackingToken,videoWidth:g==null?void 0:(c=g.getVideo())==null?void 0:c.videoWidth}}function a(a,b,e,f){return function(g){if(b.current==null)return;var m=b.current,n=h(e),o=i(e),p=a.id;g.percentVisible>=.5&&!n.has(p)&&n.set(p,k({video:m}));g.percentVisible>=1&&!o.has(p)&&o.set(p,k({video:m}));var q=n.get(p);q!=null&&g.percentVisible<.5&&(n["delete"](p),d("polarisVideoEventLogger").logVideoViewedTime(l({adTrackingToken:f,context:e,initialData:q,post:a,video:m})));n=o.get(p);n&&g.percentVisible<1&&(o["delete"](p),d("polarisVideoEventLogger").logVideoFullViewedTime(l({adTrackingToken:f,context:e,initialData:n,post:a,video:m})));if(!c("gkx")("25360"))return;q=j(e);o=q.get(p);n=c("convertToViewabilityPercentage")(g.percentVisible);g=m.getDeclarativeVideoRef();if(n!==o){q.set(p,n);d("polarisVideoEventLogger").logVideoViewabilityChanged({adTrackingToken:f,analyticsContext:e,carouselParentId:a.carouselParentId,currentVideoTime:d("polarisVideoUtils").getCurrentVideoTime(g),currentViewabilityPercentage:n,dashInfo:d("polarisVideoUtils").getDashInfo(a),duration:g==null?void 0:g.getDuration(),id:a.id,isAd:!0,ownerId:(o=a.owner)==null?void 0:o.id,sequenceNumber:m.getNextSequenceNumber(),trackingToken:a.trackingToken})}}}g.makeVideoViewTimeAction=a}),98);
__d("usePolarisMediaSensitivityOverlay",["polarisGetPostFromGraphMediaInterface","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useMemo;var i=b.useState;function a(a,b,c,e){var f=d("react-compiler-runtime").c(16),g=i(!0),h=g[0],j=g[1];f[0]!==c?(g=function(a){c&&c(a),j(!1)},f[0]=c,f[1]=g):g=f[1];g=g;var k;f[2]!==a?(k=d("polarisGetPostFromGraphMediaInterface").getMediaOverlayMediaCoverInfoFromPostOrSidecarItem(a),f[2]=a,f[3]=k):k=f[3];k=k;var l=k;f[4]!==b||f[5]!==e||f[6]!==l||f[7]!==a||f[8]!==h?(k=function(){return e!=null&&e(a)?!1:l!=null&&h&&(b==="profilePage"||b==="profilePageModal"||b==="postPage"||b==="feed"||b==="feedPage"||b==="feedPageModal"||b==="DirectThreadPage"||b==="directThreadPageModal"||b==="reelsTab")},f[4]=b,f[5]=e,f[6]=l,f[7]=a,f[8]=h,f[9]=k):k=f[9];k=k;var m;f[10]!==k?(m=k(),f[10]=k,f[11]=m):m=f[11];k=m;m=k;f[12]!==g||f[13]!==l||f[14]!==m?(k={handleHideSensitivityOverlay:g,mediaOverlayCoverInfo:l,shouldShowSensitivityOverlay:m},f[12]=g,f[13]=l,f[14]=m,f[15]=k):k=f[15];return k}g["default"]=a}),98);
__d("PolarisMedia_DEPRECATED.react",["JSResourceForInteraction","PolarisDoubleTappable","PolarisEmbedVideo.react","PolarisFeedSeenStateManagerSingleton","PolarisIGCoreToast.react","PolarisIsLoggedInDesktop","PolarisLikeAnimation.react","PolarisMediaVideo.react","PolarisPhoto.react","PolarisPhotoWithIndicator.react","PolarisPhotoWrapper.react","PolarisSensitivityOverlay.react","PolarisSidecarMedia.react","PolarisUA","PolarisVideoViewedTimeAction","PolarisViewpointReact.react","lazyLoadComponent","nullthrows","polarisVideoUtils","polarisWithRemountOnChange","react","usePolarisMediaSensitivityOverlay"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useState;function a(a){var b=j(!1),e=b[0],f=b[1];b=j(!1);var g=b[0],h=b[1];b=j(0);var k=b[0],l=b[1],m=c("PolarisFeedSeenStateManagerSingleton").get();b=function(){a.onLike&&(a.onLike(),l(k+1))};var n=function(){f(!0)},o=function(){f(!1)},p=function(b,c){var d=a.onMediaRendered,e=a.post;if(e.isVideo===!0)return;d&&d({mediaType:"Photo",resourceName:b,timeTaken:c})},q=function(a){switch(a.state){case"entered":case"updated":a=a.percentVisible>.2;g!==a&&h(a);break;case"exited":h(!1)}},r=function(b,c){if(b===!0&&a.autoplay===!0){if(d("polarisVideoUtils").isFeed(a.analyticsContext))return!1;if(c===0&&d("PolarisIsLoggedInDesktop").isLoggedInDesktop())return!0}return!1},s=a.adInfo,t=a.analyticsContext,u=a.asSidecarChild,v=a.autoplay;a.checkIsSensitivityOverlayDisabledCallback;var w=a.commentsAreStacked,x=a.firstSidecarChildSrc;a.hasViewInsights;var y=a.id;a.initialCarouselIndex;var z=a.isEmbed,A=a.isVisible,B=a.mediaFooter;a.onLike;a.onMediaRendered;var C=a.onSensitivityOverlayCleared;a.onSetModal;var D=a.onSidecarChildIndexChange,E=a.onToastClose,aa=a.onVideoFinished,ba=a.onVideoLoop,F=a.post,ca=a.relationship,G=a.sensitivityOverlayMediaOverlayInfoLoggingProps,da=a.showToast,H=a.toastString,ea=a.viewer,fa=a.visiblePosition,I=babelHelpers.objectWithoutPropertiesLoose(a,["adInfo","analyticsContext","asSidecarChild","autoplay","checkIsSensitivityOverlayDisabledCallback","commentsAreStacked","firstSidecarChildSrc","hasViewInsights","id","initialCarouselIndex","isEmbed","isVisible","mediaFooter","onLike","onMediaRendered","onSensitivityOverlayCleared","onSetModal","onSidecarChildIndexChange","onToastClose","onVideoFinished","onVideoLoop","post","relationship","sensitivityOverlayMediaOverlayInfoLoggingProps","showToast","toastString","viewer","visiblePosition"]),J=F||{},K=J.dimensions,ga=J.displayResources,L=J.upcomingEvent,M=J.id,N=J.isVideo;N=N===void 0?!1:N;var O=J.mediaPreview,P=J.owner,Q=J.sidecarChildren;Q=Q===void 0?[]:Q;var R=J.src;J=J.usertags;var S=Q&&Q.length>0,T=[];!S&&d("polarisVideoUtils").isFeed(t)&&T.push(function(a){m.addImpressionFromPost(F,a)});var U=!1;C=c("usePolarisMediaSensitivityOverlay")(F,t,C,a.checkIsSensitivityOverlayDisabledCallback);var V=C.mediaOverlayCoverInfo,ha=C.handleHideSensitivityOverlay;C=C.shouldShowSensitivityOverlay;if(P&&C){var W;G=G||{};var X=G.checkIfMediaOverlayInfoImpressionLoggingDisabled;G=G.onLoggedMediaOverlayInfoImpression;var Y=F.code;if(!d("PolarisUA").isMobile()&&Y!=null&&((W=V)==null?void 0:W.overlayType)==="SECRET_LINK"){W=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostSecretReelQRCode.react").__setRef("PolarisMedia_DEPRECATED.react"));V=babelHelpers["extends"]({},V,{extra:i.jsx(W,{params:{permalink_key:F.isVideo===!0?"reel":"p",shortcode:Y}})})}W=i.jsx(c("PolarisSensitivityOverlay.react"),{analyticsContext:t,asSidecarChild:u,dimensions:K,disableMediaOverlayInfoImpressionLogging:X!=null?X(M):!1,isPhoto:!N&&!S,isVisible:A,mediaId:M,mediaOverlayCoverInfo:V,onLoggedMediaOverlayInfoImpression:G,onShowPostClicked:function(){return ha(F)},ownerId:P.id,previewData:O})}else if(S){if(w===!0)U=!0,Y=a;else{a.mediaFooter;X=babelHelpers.objectWithoutPropertiesLoose(a,["mediaFooter"]);Y=X}W=i.jsx(c("PolarisSidecarMedia.react"),babelHelpers["extends"]({},Y,{onChildIndexChange:D,sidecarChildren:Q}))}else if(N){var Z=g;V=[q];G=i.createRef();s!=null&&s.tracking_token!=null&&V.push(d("PolarisVideoViewedTimeAction").makeVideoViewTimeAction(a.post,G,t,s.tracking_token));W=i.jsx(d("PolarisViewpointReact.react").Viewpoint,{action:[].concat(V,T),id:F.id,children:function(b){return i.jsxs("div",{ref:b,children:[z===!0?i.jsx(c("PolarisEmbedVideo.react"),{className:a.className,isVisible:Z,post:F}):i.jsx(c("PolarisMediaVideo.react"),{adInfo:s,analyticsContext:t,asSidecarChild:u,autoplay:v,className:a.className,firstSidecarChildSrc:x,isVisible:Z,onFinished:aa,onLoop:ba,post:F,relationship:ca,shouldAutoPlay:r(Z,fa),upcomingEventMediaId:y}),da===!0&&H!=null&&i.jsx(c("PolarisIGCoreToast.react"),{absolutePosition:!0,duration:3e3,onClose:E,wide:!0,children:H})]})}})}else{P={dimensions:K,likeEventCount:k,onPhotoRendered:p,postId:M,src:c("nullthrows")(R),srcSet:ga};var $;J&&J.length>0||L?$=i.jsx(d("PolarisPhotoWithIndicator.react").PhotoWithIndicator,babelHelpers["extends"]({},I,P,{analyticsContext:t,isFocused:e,isVisible:A,upcomingEvent:L,upcomingEventMediaId:y,upcomingEventThumbnailSrc:c("nullthrows")(u===!0?x:R),usertags:J,viewer:ea})):$=i.jsx(c("PolarisPhoto.react"),babelHelpers["extends"]({},I,P,{analyticsContext:t,asSidecarChild:u}));O=[].concat(T);S=i.jsx(d("PolarisViewpointReact.react").Viewpoint,{action:O,id:F.id,children:function(a){return i.jsx(c("PolarisPhotoWrapper.react"),{postId:F.id,ref:a,children:$})}});W=i.jsxs(d("PolarisDoubleTappable").DoubleTappable,{onBlur:o,onDoubleClick:b,onFocus:n,role:"button",children:[S,i.jsx(c("PolarisLikeAnimation.react"),{likeEventCount:k},k)]})}B!=null&&!U&&!C&&(W=i.jsxs(i.Fragment,{children:[W,B]}));return W}a.displayName=a.name+" [from "+f.id+"]";function b(a,b){return a.id!==b.id}e=c("polarisWithRemountOnChange")(b)(a);g["default"]=e}),98);
__d("PolarisSidecarChild.react",["IGDSBox.react","PolarisMedia_DEPRECATED.react","PolarisOrganicImpressionAction","PolarisViewpointReact.react","PolarisVpvdImpressionAction","cr:5000","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var e=d("react-compiler-runtime").c(43),f;if(e[0]!==a){var g=a.index,h=a.media,j=a.mediaWidth;a.onChildIndexChange;var k=a.sidecarChildIndex,l=a.sidecarChildren,m=a.analyticsContext,n=a.isVisible;a.mediaFooter;var o=a.onMediaRendered,p=a.post,q=babelHelpers.objectWithoutPropertiesLoose(a,["index","media","mediaWidth","onChildIndexChange","sidecarChildIndex","sidecarChildren","analyticsContext","isVisible","mediaFooter","onMediaRendered","post"]);g=g;h=h;f=j;j=k;k=l;l=m;m=n;n=o;o=p;p=q;e[0]=a;e[1]=l;e[2]=g;e[3]=m;e[4]=h;e[5]=f;e[6]=n;e[7]=p;e[8]=o;e[9]=j;e[10]=k}else l=e[1],g=e[2],m=e[3],h=e[4],f=e[5],n=e[6],p=e[7],o=e[8],j=e[9],k=e[10];e[11]!==l||e[12]!==g||e[13]!==m||e[14]!==h||e[15]!==n||e[16]!==p||e[17]!==j||e[18]!==k?(q=h.isUpsell===!0&&b("cr:5000")!=null?i.jsx(b("cr:5000"),{upsellSidecarChild:h}):i.jsx(c("PolarisMedia_DEPRECATED.react"),babelHelpers["extends"]({},p,{accessibilityCaption:h.accessibilityCaption,analyticsContext:l,asSidecarChild:!0,firstSidecarChildSrc:k[0].src,isVisible:j===g?m:!1,onMediaRendered:n,post:h})),e[11]=l,e[12]=g,e[13]=m,e[14]=h,e[15]=n,e[16]=p,e[17]=j,e[18]=k,e[19]=q):q=e[19];var r=q;if(g===0){e[20]!==h.id||e[21]!==f||e[22]!==r?(a=i.jsx(c("IGDSBox.react"),{position:"relative",width:f,children:r},h.id),e[20]=h.id,e[21]=f,e[22]=r,e[23]=a):a=e[23];return a}e[24]!==l||e[25]!==h?(m=d("PolarisOrganicImpressionAction").makeCarouselImpressionAction(h,l),e[24]=l,e[25]=h,e[26]=m):m=e[26];e[27]!==l||e[28]!==g||e[29]!==h||e[30]!==o.id||e[31]!==k[0]?(n=d("PolarisVpvdImpressionAction").makeCarouselVpvdImpressionAction(h,k[0],g,o.id,l),e[27]=l,e[28]=g,e[29]=h,e[30]=o.id,e[31]=k[0],e[32]=n):n=e[32];e[33]!==m||e[34]!==n?(p=[m,n],e[33]=m,e[34]=n,e[35]=p):p=e[35];e[36]!==f||e[37]!==r?(j=function(a){return i.jsx(c("IGDSBox.react"),{containerRef:a,position:"relative",width:f,children:r})},e[36]=f,e[37]=r,e[38]=j):j=e[38];e[39]!==h.id||e[40]!==p||e[41]!==j?(q=i.jsx(d("PolarisViewpointReact.react").Viewpoint,{action:p,id:h.id,children:j},h.id),e[39]=h.id,e[40]=p,e[41]=j,e[42]=q):q=e[42];return q}g["default"]=a}),98);
__d("usePolarisSidecarMediaOrUpsell",["PolarisIsLoggedIn","PolarisUA","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=4,i=2;function a(a){var b=d("react-compiler-runtime").c(3),c=a.post;a=a.sidecarChildren;if(d("PolarisIsLoggedIn").isLoggedIn()||d("PolarisUA").isDesktop()||a.some(j)||c.dimensions===null||c.owner===null)return a;var e;if(b[0]!==c||b[1]!==a){e=[].concat(a);var f=e.length>=h?i:null;if(f!=null&&e[f-1].mediaPreview!=null){var g={dimensions:c.dimensions,id:"",isUpsell:!0,isVideo:!1,mediaPreview:e[f-1].mediaPreview,owner:c.owner,src:""};e.splice(f,0,g)}b[0]=c;b[1]=a;b[2]=e}else e=b[2];return e}function j(a){return a.mediaOverlayInfo!=null}g["default"]=a}),98);
__d("PolarisSidecarMedia.react",["PolarisSidecarChild.react","PolarisSidecar_DEPRECATED.react","qex","react","react-compiler-runtime","usePolarisSidecarMediaOrUpsell"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useCallback;function a(a){var b=d("react-compiler-runtime").c(23),e,f,g,h;b[0]!==a?(h=a.sidecarChildren,e=a.initialCarouselIndex,g=a.post,f=babelHelpers.objectWithoutPropertiesLoose(a,["sidecarChildren","initialCarouselIndex","post"]),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=h):(e=b[1],f=b[2],g=b[3],h=b[4]);b[5]!==f.onChildIndexChange?(a=function(a,b,c){return[f.onChildIndexChange].filter(Boolean).forEach(function(d){return d(a,b,c)})},b[5]=f.onChildIndexChange,b[6]=a):a=b[6];a=a;var k;b[7]!==g||b[8]!==h?(k={post:g,sidecarChildren:h},b[7]=g,b[8]=h,b[9]=k):k=b[9];var l=c("usePolarisSidecarMediaOrUpsell")(k);b[10]!==f||b[11]!==g||b[12]!==l?(h=function(a,b){return l.map(function(d,e){return i.jsx(c("PolarisSidecarChild.react"),babelHelpers["extends"]({index:e,media:d,mediaWidth:a,post:g,sidecarChildIndex:b,sidecarChildren:l},f),e)})},b[10]=f,b[11]=g,b[12]=l,b[13]=h):h=b[13];k=h;b[14]!==l?(h=l.map(j).filter(Boolean),b[14]=l,b[15]=h):h=b[15];h=h;var m;b[16]!==h||b[17]!==e||b[18]!==a||b[19]!==f.mediaFooter||b[20]!==k||b[21]!==l.length?(m=i.jsx(d("PolarisSidecar_DEPRECATED.react").Sidecar,{dimensions:h,hoverTriggeredPager:c("qex")._("6")===!0,initialCarouselIndex:e,mediaFooter:f.mediaFooter,numSidecarChildren:l.length,onChildIndexChange:a,renderSidecarChildren:k}),b[16]=h,b[17]=e,b[18]=a,b[19]=f.mediaFooter,b[20]=k,b[21]=l.length,b[22]=m):m=b[22];h=m;return h}function j(a){a=a.dimensions;return a}g["default"]=a}),98);
__d("PolarisMediaContainer.react",["PolarisMedia_DEPRECATED.react","PolarisReactRedux.react","polarisPostSelectors","react"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");function a(a,b){return{onMediaRendered:d("polarisPostSelectors").getOnMediaRendered(a,b.onPostMediaRendered)}}function b(a,b){return{onSidecarChildIndexChange:function(a,c,d){a=b.onPostSidecarChildIndexChange;a&&a(c)}}}function e(a,b,c){c.onPostMediaRendered;c.onPostSidecarChildIndexChange;c=babelHelpers.objectWithoutPropertiesLoose(c,["onPostMediaRendered","onPostSidecarChildIndexChange"]);return babelHelpers["extends"]({},c,{},a,{},b)}f=d("PolarisReactRedux.react").connect(a,b,e)(c("PolarisMedia_DEPRECATED.react"));g["default"]=f}),98);
__d("PolarisPostActionLikePost",["PolarisAPILikePost","PolarisAdsEngagementLogger","PolarisEngagementLogger","PolarisGenericStrings","PolarisSentryFeedbackActions","PolarisToastActions","QPLUserFlow","polarisLogAction","qpl"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,e){return function(f){c("polarisLogAction")("likeAttempt",b);c("QPLUserFlow").start(c("qpl")._(379204822,"720"),{annotations:{string:{source:b==null?void 0:b.source}}});f({postId:a,type:"LIKE_POST_REQUESTED"});return d("PolarisAPILikePost").likePost(a).then(function(){e!=null?d("PolarisAdsEngagementLogger").logAdLike(b,e):d("PolarisEngagementLogger").logOrganicLike(b),c("QPLUserFlow").endSuccess(c("qpl")._(379204822,"720")),f({postId:a,type:"LIKE_POST_SUCCEEDED"})},function(e){var g;c("polarisLogAction")("likeFailure",b);c("QPLUserFlow").endFailure(c("qpl")._(379204822,"720"),"request_failed");g=((g=e.responseObject)==null?void 0:g.spam)||!1;if(g){var i,j,k,l,m;g=(g=e.responseObject)==null?void 0:g.feedback_title;i=(i=e.responseObject)==null?void 0:i.feedback_message;j=(j=e.responseObject)==null?void 0:j.feedback_url;k=(k=e.responseObject)==null?void 0:k.feedback_action;l=(l=e.responseObject)==null?void 0:l.feedback_appeal_label;m=(m=e.responseObject)==null?void 0:m.restriction_enrollment_data;e=(e=e.responseObject)==null?void 0:e.enforcement_transparency_instance_identifier;f(d("PolarisSentryFeedbackActions").showSentryFeedback({action:k,enforcement_transparency_instance_identifier:e,feedback_appeal_label:l,message:i,restriction_enrollment_data:m,source:b.source,sourceOfAction:"like_post",title:g,url:j}))}f({postId:a,type:"LIKE_POST_FAILED"});f(d("PolarisToastActions").showToast({actionHandler:function(){return f(h(a,b))},actionText:d("PolarisGenericStrings").RETRY_TEXT,text:d("PolarisGenericStrings").GENERIC_ERROR_MESSAGE}))})}}g.likePost=h}),98);
__d("PolarisPostActionRemovePostFromCollection",["InstagramODS","PolarisAPIEditCollection"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.collectionId,e=a.postId;return function(a){a({collectionId:b,postId:e,type:"REMOVE_POST_FROM_COLLECTION_REQUESTED"});c("InstagramODS").incr("web.unsaveFromCollection.attempt");return d("PolarisAPIEditCollection").editCollection({collectionId:b,postIdsToRemove:[e]}).then(function(){a({collectionId:b,postId:e,type:"REMOVE_POST_FROM_COLLECTION_SUCCEEDED"}),c("InstagramODS").incr("web.unsaveFromCollection.success")})["catch"](function(){a({collectionId:b,postId:e,type:"REMOVE_POST_FROM_COLLECTION_FAILED"}),c("InstagramODS").incr("web.unsaveFromCollection.failure")})}}g.removePostFromCollection=a}),98);
__d("PolarisPostActionSavePost",["PolarisAPISavePost","PolarisAdsEngagementLogger","polarisLogAction"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e){return function(f){c("polarisLogAction")("saveAttempt",b);f({postId:a,type:"SAVE_POST_REQUESTED"});return d("PolarisAPISavePost").savePost(a).then(function(){c("polarisLogAction")("saveSuccess",b),f({postId:a,type:"SAVE_POST_SUCCEEDED"}),e!=null&&d("PolarisAdsEngagementLogger").logAdSave(e)},function(){c("polarisLogAction")("saveFailure",b),f({postId:a,type:"SAVE_POST_FAILED"})})}}g.savePost=a}),98);
__d("PolarisPostActionUnlikePost",["PolarisAPIUnlikePost","PolarisAdsEngagementLogger","PolarisEngagementLogger","PolarisGenericStrings","PolarisSentryFeedbackActions","PolarisToastActions","QPLUserFlow","polarisLogAction","qpl"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,e){return function(f){c("polarisLogAction")("unlikeAttempt",b);c("QPLUserFlow").start(c("qpl")._(379198902,"749"),{annotations:{string:{source:b==null?void 0:b.source}}});f({postId:a,type:"UNLIKE_POST_REQUESTED"});return d("PolarisAPIUnlikePost").unlikePost(a).then(function(){e!=null?d("PolarisAdsEngagementLogger").logAdUnlike(b,e):d("PolarisEngagementLogger").logOrganicUnlike(b),c("QPLUserFlow").endSuccess(c("qpl")._(379198902,"749")),f({postId:a,type:"UNLIKE_POST_SUCCEEDED"})},function(e){var g;g=((g=e.responseObject)==null?void 0:g.spam)||!1;if(g){var i,j,k,l,m;g=(g=e.responseObject)==null?void 0:g.feedback_title;i=(i=e.responseObject)==null?void 0:i.feedback_message;j=(j=e.responseObject)==null?void 0:j.feedback_url;k=(k=e.responseObject)==null?void 0:k.feedback_action;l=(l=e.responseObject)==null?void 0:l.feedback_appeal_label;m=(m=e.responseObject)==null?void 0:m.restriction_enrollment_data;e=(e=e.responseObject)==null?void 0:e.enforcement_transparency_instance_identifier;f(d("PolarisSentryFeedbackActions").showSentryFeedback({action:k,enforcement_transparency_instance_identifier:e,feedback_appeal_label:l,message:i,restriction_enrollment_data:m,source:b.source,sourceOfAction:"unlike_post",title:g,url:j}))}c("polarisLogAction")("unlikeFailure",b);c("QPLUserFlow").endFailure(c("qpl")._(379198902,"749"),"request_failed");f({postId:a,type:"UNLIKE_POST_FAILED"});f(d("PolarisToastActions").showToast({actionHandler:function(){return f(h(a,b))},actionText:d("PolarisGenericStrings").RETRY_TEXT,text:d("PolarisGenericStrings").GENERIC_ERROR_MESSAGE}))})}}g.unlikePost=h}),98);
__d("PolarisPostActionUnsavePost",["PolarisAPIUnsavePost","PolarisAdsEngagementLogger","polarisLogAction"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e){return function(f){c("polarisLogAction")("unsaveAttempt",b);f({postId:a,type:"UNSAVE_POST_REQUESTED"});return d("PolarisAPIUnsavePost").unsavePost(a).then(function(){c("polarisLogAction")("unsaveSuccess",b),f({postId:a,type:"UNSAVE_POST_SUCCEEDED"}),e!=null&&d("PolarisAdsEngagementLogger").logAdUnsave(e)},function(){c("polarisLogAction")("unsaveFailure",b),f({postId:a,type:"UNSAVE_POST_FAILED"})})}}g.unsavePost=a}),98);
__d("PolarisPostCoauthorReviewOverlayFooterCTA.react",["fbt","FBLogger","IGDSBox.react","IGDSButton.react","IGDSTextVariants.react","JSResourceForInteraction","PolarisConfig","PolarisUserHoverCard.react","PolarisUserLink.react","err","gkx","polarisGetPostFromGraphMediaInterface","react","react-compiler-runtime","useIGDSLazyDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));i.useCallback;var k=c("JSResourceForInteraction")("PolarisCoauthorReviewDialog.react").__setRef("PolarisPostCoauthorReviewOverlayFooterCTA.react");function a(a){var b,e=d("react-compiler-runtime").c(22),f=a.invitedCoauthorProducers,g=a.mediaId,i=a.mediaShortcode,l=a.productType,m=a.user;a=c("useIGDSLazyDialog")(k);var n=a[0];e[0]!==g||e[1]!==i||e[2]!==l||e[3]!==n||e[4]!==(m==null?void 0:m.username)?(a=function(){var a;n({mediaId:g!=null?g:"",mediaShortcode:i!=null?i:"",productType:l,username:(a=m==null?void 0:m.username)!=null?a:""})},e[0]=g,e[1]=i,e[2]=l,e[3]=n,e[4]=m==null?void 0:m.username,e[5]=a):a=e[5];a=a;if(m==null||m.username==null||g==null){var o=c("err")("PolarisPostCoauthorReviewOverlayFooterCTA requires a post user");c("FBLogger")("ig_web").catching(o);return null}var p=d("PolarisConfig").getViewerIdOrZero();o=f!=null&&f.some(function(a){return(a==null?void 0:a.id)===p});if(!o)return null;f=!m.isUnpublished;o=(o=m==null?void 0:m.username)!=null?o:"";b=(b=m==null?void 0:m.username)!=null?b:"";var q;e[6]!==b?(q=j.jsx(c("PolarisUserLink.react"),{username:b}),e[6]=b,e[7]=q):q=e[7];e[8]!==f||e[9]!==o||e[10]!==q||e[11]!==m.id?(b=j.jsx(c("PolarisUserHoverCard.react"),{display:"inline-block",isUserAvailable:f,userId:m.id,username:o,children:q}),e[8]=f,e[9]=o,e[10]=q,e[11]=m.id,e[12]=b):b=e[12];f=b;e[13]!==f?(o=h._(/*BTDS*/"{media_owner_username} te ha invitado a colaborar en su publicaci\u00f3n.",[h._param("media_owner_username",f)]),e[13]=f,e[14]=o):o=e[14];q=o;e[15]!==f?(b=h._(/*BTDS*/"{media_owner_username} te ha invitado a que colabores en su reel.",[h._param("media_owner_username",f)]),e[15]=f,e[16]=b):b=e[16];o=b;e[17]!==a||e[18]!==q||e[19]!==l||e[20]!==o?(f=c("gkx")("4757")?j.jsxs(c("IGDSBox.react"),{alignItems:"center",color:"primaryBackground",direction:"row",justifyContent:"between",paddingX:3,paddingY:2,position:"relative",children:[j.jsx(c("IGDSBox.react"),{flex:"shrink",marginEnd:5,marginStart:1,maxWidth:350,overflow:"auto",wrap:!0,children:j.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"primaryText",maxLines:3,zeroMargin:!0,children:l===d("polarisGetPostFromGraphMediaInterface").PRODUCT_TYPE_CLIPS?o:q})}),j.jsx(c("IGDSBox.react"),{flex:"shrink",marginEnd:1,children:j.jsx(c("IGDSButton.react"),{display:"inline",label:h._(/*BTDS*/"Revisar"),onClick:a,variant:"tertiary"})})]}):null,e[17]=a,e[18]=q,e[19]=l,e[20]=o,e[21]=f):f=e[21];return f}g["default"]=a}),226);
__d("PolarisPostConstants",["IGDSThemeConstantsHelpers"],(function(a,b,c,d,e,f,g){"use strict";a=30;b=40;c=d("IGDSThemeConstantsHelpers").getNumericValue("medium-screen-max");e=d("IGDSThemeConstantsHelpers").getNumericValue("medium-screen-min");f=56;g.AVATAR_SIZE_SMALL=a;g.AVATAR_SIZE_LARGE=b;g.MEDIUM_SCREEN_MAX=c;g.SIDEBAR_VARIANT_CUTOFF=e;g.POST_TOAST_HEIGHT=f}),98);
__d("PolarisPostCommentInputPicker.react",["CometPlaceholder.react","PolarisUA","deferredLoadComponent","react","react-compiler-runtime","requireDeferredForDisplay","usePolarisIsOnAdsActivityPage","usePolarisIsOnFeedPage"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("deferredLoadComponent")(c("requireDeferredForDisplay")("PolarisPostCommentInput.react").__setRef("PolarisPostCommentInputPicker.react"));function a(a){var b=d("react-compiler-runtime").c(17),e,f;b[0]!==a?(f=a.ref,e=babelHelpers.objectWithoutPropertiesLoose(a,["ref"]),b[0]=a,b[1]=e,b[2]=f):(e=b[1],f=b[2]);a=c("usePolarisIsOnFeedPage")();var g=c("usePolarisIsOnAdsActivityPage")(),h;b[3]!==g||b[4]!==a||b[5]!==e?(h=(a||g)&&e.inModal!==!0&&d("PolarisUA").isDesktop(),b[3]=g,b[4]=a,b[5]=e,b[6]=h):h=b[6];g=h;b[7]!==g?(a={0:{className:"x1qjc9v5 x5ur3kl x13fuv20 x178xt8z x9f619 x78zum5 xdt5ytf x2lah0s xnnlda6 x1gslohp x1n2onr6"},1:{className:"x1qjc9v5 x9f619 x78zum5 xdt5ytf x2lah0s x1d6elog"}}[!!g<<0],b[7]=g,b[8]=a):a=b[8];b[9]!==a?(h=i.jsx("div",babelHelpers["extends"]({},a)),b[9]=a,b[10]=h):h=b[10];b[11]!==e||b[12]!==f?(g=i.jsx(j,babelHelpers["extends"]({},e,{ref:f})),b[11]=e,b[12]=f,b[13]=g):g=b[13];b[14]!==h||b[15]!==g?(a=i.jsx(c("CometPlaceholder.react"),{fallback:h,name:"PostCommentInputPicker",children:g}),b[14]=h,b[15]=g,b[16]=a):a=b[16];return a}g["default"]=a}),98);
__d("PolarisPostFeatures.react",["FBLogger","PolarisPostConstants","PolarisPostModalRenderingContext.react","PolarisPostVariants","PolarisReactRedux.react","PolarisRelationshipTypes","PolarisUA","polarisRelationshipSelectors.react","react-compiler-runtime","usePolarisDisplayProperties","usePolarisViewer"],(function(a,b,c,d,e,f,g){"use strict";var h=[{overrides:{threeLineHeaderEnabled:!0},predicate:"isThreeLineHeaderEnabled"},{overrides:{avatarSize:(b=d("PolarisPostConstants")).AVATAR_SIZE_SMALL,commentsAreStacked:!0},predicate:"isFeed"},{overrides:{avatarSize:b.AVATAR_SIZE_SMALL,commentsAreStacked:!0},predicate:"isWidePhotoOnMediumScreen"},{overrides:{avatarSize:b.AVATAR_SIZE_SMALL,hasThreadedSidebarComments:!0,showPostButton:!0},predicate:"isRichCommentsEnabled"},{overrides:{avatarSize:b.AVATAR_SIZE_SMALL,commentsAreStacked:!0,hasThreadedSidebarComments:!1,showPostButton:!0},predicate:"isStackedScreenSize"},{overrides:{hasPhotosOfYouOption:!0},predicate:"isViewerInUserTags"},{overrides:{showFollowButton:!1},predicate:"isFeedAndOwnerFollowedByViewer"},{overrides:{showFollowButton:!1},predicate:"isModalAndOwnerFollowedByViewer"},{overrides:{canViewerProvideFeedback:!1},predicate:"isOwnerPrivate"},{overrides:{canViewerProvideFeedback:!0},predicate:"isOwnerFollowedByViewer"},{overrides:{canViewerProvideFeedback:!0,showFollowButton:!1},predicate:"isOwnerTheViewer"},{overrides:{showFollowButton:!1},predicate:"isOwnerUnpublished"},{overrides:{showFollowButton:!1},predicate:"isBlocked"},{overrides:{showFollowButton:!1},predicate:"hasFollowHashtagInfo"},{overrides:{canViewerProvideFeedback:!1},predicate:"isLoggedOut"}],i={avatarSize:b.AVATAR_SIZE_LARGE,canViewerProvideFeedback:!0,commentsAreStacked:!1,hasPhotosOfYouOption:!1,hasThreadedSidebarComments:!1,showFollowButton:!0,showPostButton:!1,threeLineHeaderEnabled:!1};function j(a){var b=a.isInModal,c=a.owner,e=a.post,f=a.relationship,g=a.variant,h=a.viewer;a=a.viewportWidth;g=g===d("PolarisPostVariants").VARIANTS.feed;var i=Boolean(h),j=!h,k=(h==null?void 0:h.id)===c.id,l=f.followedByViewer.state===d("PolarisRelationshipTypes").FOLLOW_STATUS_FOLLOWING,m=Boolean(e.followHashtagInfo),n=Boolean(e.location)&&(e.sponsors||[]).length>0;return{hasFollowHashtagInfo:m,isBlocked:f.hasBlockedViewer.state===d("PolarisRelationshipTypes").BLOCK_STATUS_BLOCKED,isFavorited:((m=f.favoritedByViewer)==null?void 0:m.state)===d("PolarisRelationshipTypes").FAVORITE_STATUS_FAVORITED,isFeed:g,isFeedAndOwnerFollowedByViewer:g&&l,isLoggedIn:i,isLoggedOut:j,isModalAndOwnerFollowedByViewer:b&&l,isOwnerFollowedByViewer:l,isOwnerPrivate:Boolean(c.isPrivate),isOwnerTheViewer:k,isOwnerUnpublished:Boolean(c.isUnpublished),isRichCommentsEnabled:!0,isSidecar:(e.sidecarChildren||[]).length>0,isStackedScreenSize:a<d("PolarisPostConstants").SIDEBAR_VARIANT_CUTOFF,isThreeLineHeaderEnabled:n,isViewerInUserTags:i&&(e.usertags||[]).some(function(a){return a.user.id===(h==null?void 0:h.id)}),isWidePhotoOnMediumScreen:Boolean(e.dimensions&&e.dimensions.width/e.dimensions.height>1.5&&a>d("PolarisPostConstants").SIDEBAR_VARIANT_CUTOFF&&a<=d("PolarisPostConstants").MEDIUM_SCREEN_MAX)}}function k(a){var b=j(a);a=b.isBlocked;var d=b.isFavorited,e=b.isLoggedIn,f=b.isSidecar,g=b.isStackedScreenSize;return babelHelpers["extends"]({isBlocked:a,isFavorited:d,isLoggedIn:e,isSidecar:f,isStackedScreenSize:g},h.filter(function(a){a=a.predicate;var d=b[a];if(typeof d!=="boolean")throw c("FBLogger")("instagram_web").mustfixThrow("Could not find predicate %s",a);return d}).reduce(function(a,b){b=b.overrides;return babelHelpers["extends"]({},a,{},b)},i))}function a(a){var b=d("react-compiler-runtime").c(12),e=a.owner,f=a.path,g=a.post;a=a.variant;var h;b[0]!==e.id?(h=function(a){return d("polarisRelationshipSelectors.react").getRelationship(a.relationships,e.id)},b[0]=e.id,b[1]=h):h=b[1];h=d("PolarisReactRedux.react").useSelector(h);var i=c("usePolarisViewer")(),j=c("usePolarisDisplayProperties")(),l=j.viewportHeight;j=j.viewportWidth;var m=d("PolarisPostModalRenderingContext.react").usePolarisPostModalRenderingContext();m=m.isInModal;if(b[2]!==m||b[3]!==e||b[4]!==f||b[5]!==g||b[6]!==h||b[7]!==a||b[8]!==i||b[9]!==l||b[10]!==j){var n={isInModal:m,isMobile:d("PolarisUA").isMobile(),owner:e,path:f,post:g,relationship:h,variant:a,viewer:i,viewportHeight:l,viewportWidth:j};n=k(n);b[2]=m;b[3]=e;b[4]=f;b[5]=g;b[6]=h;b[7]=a;b[8]=i;b[9]=l;b[10]=j;b[11]=n}else n=b[11];return n}g.getPostFeatures=k;g.usePolarisPostFeatures=a}),98);
__d("PolarisPostShareUtils.next.react",["PolarisLinkBuilder","PolarisMediaConstants"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return!a&&b}function h(a,b){return a===d("PolarisMediaConstants").MediaTypes.VIDEO?d("PolarisLinkBuilder").buildClipsMediaLink(b):d("PolarisLinkBuilder").buildMediaLink(b)}function b(a,b){a=window.location.origin+h(a,b);return a+"?utm_source=ig_web_copy_link"}g.getIsShareable=a;g.getShareURL=h;g.getCopyUrl=b}),98);
__d("useMaybeLogInstagramAdDirectReshareSend",["InstagramAdDirectReshareSendFalcoEvent","InstagramODS","PolarisContainerModuleUtils","PolarisViewpointActionUtils","polarisAdsSelectors.react","polarisRelationshipSelectors.react","react","react-compiler-runtime","usePolarisAnalyticsContext"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(a){var b=d("react-compiler-runtime").c(7),e=a.id,f=a.mediaType,g=a.mpk,h=a.ownerId,j=c("usePolarisAnalyticsContext")(),k=d("polarisAdsSelectors.react").useFeedAdInfo(e,i),l=d("polarisRelationshipSelectors.react").useRelationship(h||"");b[0]!==k||b[1]!==j||b[2]!==f||b[3]!==g||b[4]!==h||b[5]!==l?(a=function(){if(k!=null&&k.ad_id!=null&&k.tracking_token!=null&&l!=null){var a=k.ad_id,b=k.tracking_token,e=d("PolarisContainerModuleUtils").getContainerModule(j);c("InstagramODS").incr("web.ads.feed.share");c("InstagramAdDirectReshareSendFalcoEvent").log(function(){return{a_pk:h!=null?h:"",ad_id:a,follow_status:d("PolarisViewpointActionUtils").getFollowStatus(l),m_pk:g,m_t:f.toString(),pigeon_reserved_keyword_module:e,source_of_action:e,tracking_token:b}})}},b[0]=k,b[1]=j,b[2]=f,b[3]=g,b[4]=h,b[5]=l,b[6]=a):a=b[6];return a}function i(a){return a}g["default"]=a}),98);
__d("useIGDShareSheetSendPostToOpenRecipients",["InstagramMediaProductTypeName","PolarisDirectActionSendPostToUsers","PolarisInteractionsLogger","PolarisReactRedux.react","PolarisViewpointActionUtils","react-compiler-runtime","useMaybeLogInstagramAdDirectReshareSend","usePolarisMQTT","useStableCallback"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=d("react-compiler-runtime").c(19),e=c("usePolarisMQTT")(),f=d("PolarisReactRedux.react").useDispatch();if(b[0]!==a.id||b[1]!==a.owner){var g;g=(g=d("PolarisViewpointActionUtils").getMPKForFeedMedia({id:a.id,owner:a.owner}))!=null?g:"";b[0]=a.id;b[1]=a.owner;b[2]=g}else g=b[2];g=g;var h;b[3]!==a?(h=d("PolarisInteractionsLogger").getMediaTypeFromPost(a),b[3]=a,b[4]=h):h=b[4];h=h;var i;b[5]!==a.productType?(i=c("InstagramMediaProductTypeName").cast(a.productType),b[5]=a.productType,b[6]=i):i=b[6];var j=i;i=(i=a.owner)==null?void 0:i.id;var k;b[7]!==h||b[8]!==g||b[9]!==a.id||b[10]!==i?(k={id:a.id,mediaType:h,mpk:g,ownerId:i},b[7]=h,b[8]=g,b[9]=a.id,b[10]=i,b[11]=k):k=b[11];var l=c("useMaybeLogInstagramAdDirectReshareSend")(k);b[12]!==f||b[13]!==l||b[14]!==e||b[15]!==a.id||b[16]!==a.mediaOverlayInfo||b[17]!==j?(h=function(b,c,g,h){f(d("PolarisDirectActionSendPostToUsers").sendPostToUsers({comment:c!=null?c:void 0,mediaId:a.id,mediaOverlayInfo:a.mediaOverlayInfo,mqtt:e,onError:h,onSuccess:g,productType:j,recipients:b})),l()},b[12]=f,b[13]=l,b[14]=e,b[15]=a.id,b[16]=a.mediaOverlayInfo,b[17]=j,b[18]=h):h=b[18];return c("useStableCallback")(h)}g["default"]=a}),98);
__d("useIGDShareSheetOnSubmitPost",["IGDShareSheetOnSubmitFactory","IGDThreadTTLCUtils","PolarisInteractionsLogger","PolarisLinkBuilder","PolarisPostShareUtils.next.react","asyncToGeneratorRuntime","react-compiler-runtime","requireDeferred","useIGDShareSheetSendPostToOpenRecipients","useStableCallback"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("getSendPostToInstamadilloRecipient").__setRef("useIGDShareSheetOnSubmitPost");function a(a){var e=d("react-compiler-runtime").c(7),f=c("useIGDShareSheetSendPostToOpenRecipients")(a),g=d("PolarisInteractionsLogger").getMediaTypeFromPost(a),i=d("PolarisLinkBuilder").BASE_INSTAGRAM_URL+d("PolarisPostShareUtils.next.react").getShareURL(g,(g=a.code)!=null?g:"");if(e[0]!==a.id||e[1]!==((g=a.owner)==null?void 0:g.id)||e[2]!==((g=a.owner)==null?void 0:g.username)||e[3]!==a.productType||e[4]!==f||e[5]!==i){var j;g=function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b,e;for(var g=arguments.length,j=new Array(g),k=0;k<g;k++)j[k]=arguments[k];var l=j,m=(yield h.load());return c("IGDShareSheetOnSubmitFactory")(f,m(a.id,(b=a.owner)==null?void 0:b.id,(e=a.owner)==null?void 0:e.username,i),function(b){return d("IGDThreadTTLCUtils").isIGDTTLCEnabledForIGDCandidate(b,a.productType)}).apply(void 0,l)});return function(){return e.apply(this,arguments)}}();e[0]=a.id;e[1]=(j=a.owner)==null?void 0:j.id;e[2]=(j=a.owner)==null?void 0:j.username;e[3]=a.productType;e[4]=f;e[5]=i;e[6]=g}else g=e[6];return c("useStableCallback")(g)}g["default"]=a}),98);
__d("PolarisPostFastShareButton.react",["CometPlaceholder.react","IGDContactSearchDialogType.flow","IGDSMessagesOutlineIcon.react","IGDSecureShareSheetDialogPlaceholder.react","JSResourceForInteraction","PolarisIGCoreSVGIconButton.react","PolarisIsLoggedIn","PolarisPostModalContext.react","PolarisPostStrings","PolarisPostTypeUtils","PolarisShareSheetV3.entrypoint","QPLUserFlow","lazyLoadComponent","polarisLogAction","qex","qpl","react","react-compiler-runtime","useIGDSEntryPointDialog","useIGDSLazyDialog","useIGDSecureShareSheetInteractionLogger","useIGDShareSheetOnSubmitPost","usePolarisPost","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;b.useMemo;var j=b.useState,k=c("JSResourceForInteraction")("IGDSecureShareSheetDialog.react").__setRef("PolarisPostFastShareButton.react"),l=c("lazyLoadComponent")(c("JSResourceForInteraction")("IGWebBloksApp").__setRef("PolarisPostFastShareButton.react"));function a(a){var b=d("react-compiler-runtime").c(40),e=a.analyticsContext,f=a["data-testid"],g=a.mediaId,h=a.mediaOverlayInfo,o=a.postId,p=a.sharingFrictionInfo,q=d("usePolarisPost").usePost(o,n),r=d("PolarisPostModalContext.react").useSetPostModal();a=c("useIGDSLazyDialog")(k,m);var s=a[0];o=a[1];a=j(!1);var t=a[0],u=a[1],v=(p==null?void 0:p.bloksAppUrl)!=null&&(p==null?void 0:p.shouldHaveSharingFriction)===!0;a=h!=null?h:q.mediaOverlayInfo;b[0]!==q||b[1]!==a?(h=babelHelpers["extends"]({},q,{mediaOverlayInfo:a}),b[0]=q,b[1]=a,b[2]=h):h=b[2];a=h;var w=a,x=c("useIGDShareSheetOnSubmitPost")(w);b[3]!==g?(h={routeProps:{mediaId:g}},b[3]=g,b[4]=h):h=b[4];a=c("useIGDSEntryPointDialog")(c("PolarisShareSheetV3.entrypoint"),h);var y=a[0],z=d("useIGDSecureShareSheetInteractionLogger").useLogShareSheetInteraction();b[5]!==e||b[6]!==z||b[7]!==x||b[8]!==s||b[9]!==q||b[10]!==r||b[11]!==v||b[12]!==y||b[13]!==w?(h=function(){c("polarisLogAction")("shareClick",{source:e,type:d("PolarisPostTypeUtils").getPostType(q)});c("QPLUserFlow").start(c("qpl")._(379205139,"1723"),{annotations:{string:{source:e}}});if(!v){if(!d("PolarisIsLoggedIn").isLoggedIn())r("share");else{var a=c("uuidv4")();z("igd_sharesheet_open",{flowInstanceId:a,shareType:d("IGDContactSearchDialogType.flow").IGDContactSearchDialogType.SHARESHEET,source:e});var b=c("qex")._("948")===!0;b?y({flowInstanceId:a}):s({flowInstanceId:a,onSubmit:x,post:w})}u(!0)}},b[5]=e,b[6]=z,b[7]=x,b[8]=s,b[9]=q,b[10]=r,b[11]=v,b[12]=y,b[13]=w,b[14]=h):h=b[14];a=h;b[15]!==e||b[16]!==g?(h={media_id:g,module:e},b[15]=e,b[16]=g,b[17]=h):h=b[17];h=h;var A=h;b[18]!==e||b[19]!==A||b[20]!==z||b[21]!==g||b[22]!==x||b[23]!==s||b[24]!==v||b[25]!==(p==null?void 0:p.bloksAppUrl)||b[26]!==t||b[27]!==w?(h=function(){return!v?null:t&&(p==null?void 0:p.bloksAppUrl)!=null&&i.jsx(c("CometPlaceholder.react"),{fallback:null,children:i.jsx(l,{appId:p==null?void 0:p.bloksAppUrl,bridgeOverrides_DEPRECATED:{onOpenShareSheetClick:function(){u(!1);var a=c("uuidv4")();z("igd_sharesheet_open",{flowInstanceId:a,shareType:d("IGDContactSearchDialogType.flow").IGDContactSearchDialogType.SHARESHEET,source:e});s({flowInstanceId:a,onSubmit:x,post:w})},onResumeStoryPlayback:function(){u(!1)}},params:A},g)})},b[18]=e,b[19]=A,b[20]=z,b[21]=g,b[22]=x,b[23]=s,b[24]=v,b[25]=p==null?void 0:p.bloksAppUrl,b[26]=t,b[27]=w,b[28]=h):h=b[28];h=h;var B;b[29]===Symbol["for"]("react.memo_cache_sentinel")?(B=i.jsx(c("IGDSMessagesOutlineIcon.react"),{alt:d("PolarisPostStrings").SHARE_TEXT,color:"ig-secondary-text",size:24}),b[29]=B):B=b[29];var C;b[30]===Symbol["for"]("react.memo_cache_sentinel")?(C=i.jsx(c("IGDSMessagesOutlineIcon.react"),{alt:d("PolarisPostStrings").SHARE_TEXT,color:"ig-primary-text",size:24}),b[30]=C):C=b[30];b[31]!==f||b[32]!==a||b[33]!==o?(B=i.jsx(c("PolarisIGCoreSVGIconButton.react"),{"data-testid":void 0,hover:B,onClick:a,ref:o,children:C}),b[31]=f,b[32]=a,b[33]=o,b[34]=B):B=b[34];b[35]!==h?(C=h(),b[35]=h,b[36]=C):C=b[36];b[37]!==B||b[38]!==C?(f=i.jsxs(i.Fragment,{children:[B,C]}),b[37]=B,b[38]=C,b[39]=f):f=b[39];return f}function m(a){return i.jsx(c("IGDSecureShareSheetDialogPlaceholder.react"),{onClose:a})}m.displayName=m.name+" [from "+f.id+"]";function n(a){return a}g["default"]=a}),98);
__d("PolarisSaveButton.react",["IGDSIconButton.react","IGDSSavePanoFilledIcon.react","IGDSSavePanoOutlineIcon.react","JSResourceForInteraction","PolarisIGCoreAnchoredPopover.react","PolarisIGCorePressable.react","PolarisPostStrings","PolarisReactRedux.react","PolarisSavedCollectionPicker.react","PolarisSavedPostsActionRequestNextSavedCollections","PolarisUA","nullthrows","polarisSavedPostsSelectors","react","react-compiler-runtime","useIGDSLazyDialog","usePolarisViewer"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useState,k=24,l=-16,m=5;function a(a){var b=d("react-compiler-runtime").c(40),e=a.analyticsContext,f=a.collectionsPostSavedTo,g=a["data-testid"],h=a.isSaved,o=a.onMouseEnter,p=a.onSaveMedia,q=a.onSaveMediaToCollection,r=a.onShowToast,s=a.postId,t=a.thumbnailSrcSet,u=d("PolarisReactRedux.react").useDispatch(),v=c("usePolarisViewer")(),w=!v;b[0]!==w||b[1]!==v?(a=function(a){if(w)return null;var b=c("nullthrows")(v);return d("polarisSavedPostsSelectors").getAllSavedCollectionsForUser(a,c("nullthrows")(b.id))},b[0]=w,b[1]=v,b[2]=a):a=b[2];var x=d("PolarisReactRedux.react").useSelector(a);b[3]!==w||b[4]!==v?(a=function(a){if(w)return null;var b=c("nullthrows")(v);return d("polarisSavedPostsSelectors").getSavedCollectionsPaginationForUser(a,c("nullthrows")(b.id))},b[3]=w,b[4]=v,b[5]=a):a=b[5];var y=d("PolarisReactRedux.react").useSelector(a);b[6]!==x||b[7]!==y?(a=function(){if(x==null||y==null)return!1;return x.length>=m?!0:!y.moreAvailable&&x.length>1},b[6]=x,b[7]=y,b[8]=a):a=b[8];var z=a;b[9]!==w?(a=!w&&d("PolarisUA").isDesktop(),b[9]=w,b[10]=a):a=b[10];a=a;var A=z()&&a,B=function(a){a.preventDefault(),p(!h),!h===!0&&A&&(r!=null&&r(),F(!0))},C=function(){o==null?void 0:o();if(!w&&!z()&&!c("nullthrows")(y).isFetching){var a=c("nullthrows")(v);u(d("PolarisSavedPostsActionRequestNextSavedCollections").requestInitialSavedCollections(c("nullthrows")(a.id)))}F(!1)},D=j(!1),E=D[0];D=D[1];var F=D;b[11]===Symbol["for"]("react.memo_cache_sentinel")?(D=c("JSResourceForInteraction")("PolarisCreateCollectionWithPostModal.react").__setRef("PolarisSaveButton.react"),b[11]=D):D=b[11];D=c("useIGDSLazyDialog")(D);var G=D[0];b[12]!==e||b[13]!==f||b[14]!==E||b[15]!==h||b[16]!==p||b[17]!==q||b[18]!==s||b[19]!==F||b[20]!==A||b[21]!==t||b[22]!==G?(D=A?i.jsx(c("PolarisSavedCollectionPicker.react"),{collectionsPostSavedTo:f,hidePopover:E,onSaveMedia:p,onSaveMediaToCollection:q,postId:s,postIsSaved:h,setHidePopover:F,setShowCreateCollectionModal:function(){return G({onSaveChange:p,postId:s,source:e,srcSet:t})}}):null,b[12]=e,b[13]=f,b[14]=E,b[15]=h,b[16]=p,b[17]=q,b[18]=s,b[19]=F,b[20]=A,b[21]=t,b[22]=G,b[23]=D):D=b[23];b[24]!==a||b[25]!==h?(f=h||!a?null:i.jsx(c("IGDSSavePanoOutlineIcon.react"),{alt:d("PolarisPostStrings").SAVE_TEXT,color:"ig-secondary-text",size:k}),b[24]=a,b[25]=h,b[26]=f):f=b[26];b[27]!==h?(E=h?i.jsx(c("IGDSSavePanoFilledIcon.react"),{alt:d("PolarisPostStrings").UNSAVE_TEXT,color:"ig-primary-text",size:k}):i.jsx(c("IGDSSavePanoOutlineIcon.react"),{alt:d("PolarisPostStrings").SAVE_TEXT,color:"ig-primary-text",size:k}),b[27]=h,b[28]=E):E=b[28];b[29]!==g||b[30]!==B||b[31]!==f||b[32]!==E?(q=i.jsx(c("IGDSIconButton.react"),{"data-testid":void 0,hover:f,onClick:B,padding:8,children:E}),b[29]=g,b[30]=B,b[31]=f,b[32]=E,b[33]=q):q=b[33];b[34]!==C||b[35]!==q?(a=i.jsx(c("PolarisIGCorePressable.react"),{onMouseEnter:C,onPress:n,children:q}),b[34]=C,b[35]=q,b[36]=a):a=b[36];b[37]!==a||b[38]!==D?(g=i.jsx(c("PolarisIGCoreAnchoredPopover.react"),{content:D,offsetTop:l,preferredPositionX:"center",preferredPositionY:"top",showOnHover:!0,children:a}),b[37]=a,b[38]=D,b[39]=g):g=b[39];return g}function n(){}g["default"]=a}),98);
__d("PolarisPostActionAddPostToCollection",["InstagramODS","PolarisAPIEditCollection","nullthrows","polarisUserSelectors"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.collectionId,e=a.failureHandler,f=a.postIds,g=a.successHandler;return function(a,h){h=h();var i=c("nullthrows")(d("polarisUserSelectors").getViewer__DEPRECATED(h)).id;a({collectionId:b,postIds:f,type:"ADD_POST_TO_COLLECTION_REQUESTED"});c("InstagramODS").incr("web.saveToCollection.attempt");return d("PolarisAPIEditCollection").editCollection({collectionId:b,postIdsToAdd:[].concat(f)}).then(function(){a({collectionId:b,postIds:f,type:"ADD_POST_TO_COLLECTION_SUCCEEDED",userId:i}),c("InstagramODS").incr("web.saveToCollection.success"),g!=null&&g()})["catch"](function(){a({collectionId:b,postIds:f,type:"ADD_POST_TO_COLLECTION_FAILED"}),c("InstagramODS").incr("web.saveToCollection.failure"),e!=null&&e()})}}g.addPostToCollection=a}),98);
__d("usePolarisMediaSaveToCollectionReduxHandler",["PolarisPostActionAddPostToCollection","PolarisPostActionRemovePostFromCollection","PolarisReactRedux.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(a){var b=d("react-compiler-runtime").c(3),c=d("PolarisReactRedux.react").useDispatch(),e;b[0]!==c||b[1]!==a?(e=function(b,e){b?c(d("PolarisPostActionRemovePostFromCollection").removePostFromCollection({collectionId:e,postId:a})):c(d("PolarisPostActionAddPostToCollection").addPostToCollection({collectionId:e,postIds:[a]}))},b[0]=c,b[1]=a,b[2]=e):e=b[2];return e}g["default"]=a}),98);
__d("PolarisPostFeedbackControls_DEPRECATED.react",["IGRouter_DO_NOT_USE.react","PolarisCommentButton.react","PolarisFeedActionOpenPostModalForId","PolarisInFeedPostModalContext","PolarisInteractionsLogger","PolarisIsLoggedIn","PolarisLikeButton.react","PolarisPostFastShareButton.react","PolarisPostVariants","PolarisReactRedux.react","PolarisSaveButton.react","PolarisSponsoredPostContext.react","PolarisTrackingConstants","PolarisUA","XPolarisMobileAllCommentsControllerRouteBuilder","logPolarisPostModalOpen","polarisLogAction","polarisPostSelectors","react","react-compiler-runtime","stylex","usePolarisMediaSaveToCollectionReduxHandler","usePolarisNavigateToLogin","usePolarisPostShowSavedToastHandler","usePolarisSelector"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;b.useCallback;var k=b.useContext,l={likeButton:{display:"x1rg5ohu",marginInlineStart:"x1qfufaz",$$css:!0},likeButtonLeftAligned:{marginInlineEnd:"x1xegmmw",order:"x9ek82g",$$css:!0},root:{display:"x78zum5",flexDirection:"x1q0g3np",marginTop:"x1gslohp",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(75),e=a.analyticsContext,f=a.canViewerProvideFeedback,g=a.canViewerReshare,i=a.code,m=a.commentsDisabled,n=a.containerRef,o=a.customAlignment,p=a.hideShareButton,q=a.isBlocked,r=a.isSidecar,s=a.isVideo,t=a.likedByViewer,u=a.mediaId,v=a.onCommentClick,w=a.onLikeChange,x=a.onSaveChange,y=a.ownerIsPrivate,z=a.ownerUsername,A=a.postId,B=a.savedByViewer,C=a.sharingFrictionInfo,D=a.variant,E=a.xstyle,F=a.history,G=d("PolarisReactRedux.react").useDispatch();b[0]!==A?(a=function(a){return d("polarisPostSelectors").getPostById(a,A)},b[0]=A,b[1]=a):a=b[1];a=c("usePolarisSelector")(a);var H;b[2]!==A?(H=function(a){return d("polarisPostSelectors").getSavedCollectionsForPost(a,A)},b[2]=A,b[3]=H):H=b[3];H=c("usePolarisSelector")(H);var I=c("usePolarisPostShowSavedToastHandler")(),J=k(d("PolarisSponsoredPostContext.react").PolarisSponsoredPostContext),K=J.canUserSeePersistentCta,L=k(d("PolarisInFeedPostModalContext").InFeedPostModalContext);J=c("usePolarisNavigateToLogin")(i,z);var M=J[0],N=J[1];b[4]!==e||b[5]!==M||b[6]!==w?(z=function(a){d("PolarisIsLoggedIn").isLoggedIn()?w(a,"button"):(c("polarisLogAction")("likeAttempt",{source:e}),M("like"))},b[4]=e,b[5]=M,b[6]=w,b[7]=z):z=b[7];J=z;b[8]!==e||b[9]!==M||b[10]!==x?(z=function(a){d("PolarisIsLoggedIn").isLoggedIn()?x(a):(c("polarisLogAction")("saveAttempt",{source:e}),M("save"))},b[8]=e,b[9]=M,b[10]=x,b[11]=z):z=b[11];z=z;var O;b[12]!==N?(O=function(){d("PolarisIsLoggedIn").isLoggedIn()||N()},b[12]=N,b[13]=O):O=b[13];O=O;var P=c("usePolarisMediaSaveToCollectionReduxHandler")(A),Q;b[14]!==e||b[15]!==K||b[16]!==i||b[17]!==G||b[18]!==F||b[19]!==r||b[20]!==s||b[21]!==M||b[22]!==v||b[23]!==L||b[24]!==A||b[25]!==D?(Q=function(){var a=d("PolarisUA").isMobile();c("polarisLogAction")("commentButtonClicked",{isLoggedIn:d("PolarisIsLoggedIn").isLoggedIn(),source:e,type:s?"video":"photo"});if(d("PolarisIsLoggedIn").isLoggedIn())if(d("PolarisUA").isDesktop()&&D===d("PolarisPostVariants").VARIANTS.feed)G(d("PolarisFeedActionOpenPostModalForId").openPostModalForId(A)),L(A),c("logPolarisPostModalOpen")(e,d("PolarisInteractionsLogger").getMediaTypeFromPost({isSidecar:r,isVideo:s}),"feed_comment");else if(D===d("PolarisPostVariants").VARIANTS.feed||a){a=c("XPolarisMobileAllCommentsControllerRouteBuilder").buildURL((a={},a[d("PolarisTrackingConstants").ENABLE_PERSISTENT_CTA]=K||void 0,a.shortcode=i,a));F.push(a)}else v();else M("comment")},b[14]=e,b[15]=K,b[16]=i,b[17]=G,b[18]=F,b[19]=r,b[20]=s,b[21]=M,b[22]=v,b[23]=L,b[24]=A,b[25]=D,b[26]=Q):Q=b[26];Q=Q;f=!d("PolarisIsLoggedIn").isLoggedIn()||f;if(q||!f)return null;q=y!==!0&&Boolean(g);f=o==="left";y=f&&l.likeButtonLeftAligned;b[27]!==y?(g=(h||(h=c("stylex")))(l.likeButton,y),b[27]=y,b[28]=g):g=b[28];b[29]!==J||b[30]!==O||b[31]!==t||b[32]!==g?(o=j.jsx(c("PolarisLikeButton.react"),{className:g,"data-testid":void 0,isLiked:t,onChange:J,onMouseEnter:O}),b[29]=J,b[30]=O,b[31]=t,b[32]=g,b[33]=o):o=b[33];b[34]!==m||b[35]!==Q||b[36]!==O||b[37]!==f?(y=!m&&j.jsx(c("PolarisCommentButton.react"),{className:{0:"x1rg5ohu",1:"x1rg5ohu x1xegmmw x182iqb8"}[!!f<<0],"data-testid":void 0,onClick:Q,onHoverStart:O}),b[34]=m,b[35]=Q,b[36]=O,b[37]=f,b[38]=y):y=b[38];b[39]!==e||b[40]!==p||b[41]!==f||b[42]!==u||b[43]!==A||b[44]!==q||b[45]!==C?(J=q&&p!==!0&&j.jsx("span",babelHelpers["extends"]({},{0:{className:"x1rg5ohu"},1:{className:"x1rg5ohu x1xegmmw x14yy4lh"}}[!!f<<0],{children:j.jsx(c("PolarisPostFastShareButton.react"),{analyticsContext:e,"data-testid":void 0,mediaId:u,mediaOverlayInfo:null,postId:A,sharingFrictionInfo:C})})),b[39]=e,b[40]=p,b[41]=f,b[42]=u,b[43]=A,b[44]=q,b[45]=C,b[46]=J):J=b[46];b[47]!==y||b[48]!==J||b[49]!==o?(t=j.jsxs(j.Fragment,{children:[o,y,J]}),b[47]=y,b[48]=J,b[49]=o,b[50]=t):t=b[50];g=t;b[51]!==E?(m=(h||(h=c("stylex"))).props(l.root,E),b[51]=E,b[52]=m):m=b[52];b[53]!==f?(Q={0:{className:"x972fbf x10w94by x1qhh985 x14e42zd x1rg5ohu xln7xf2 xk390pu xdj266r xat24cr x1ows92d xvc5jky xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf"},1:{className:"x972fbf x10w94by x1qhh985 x14e42zd x1rg5ohu xln7xf2 xk390pu xdj266r xat24cr xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf x1xegmmw x1lziwak xo1ph6p"}}[!!f<<0],b[53]=f,b[54]=Q):Q=b[54];b[55]!==H?(p=H!=null?H:[],b[55]=H,b[56]=p):p=b[56];b[57]!==e||b[58]!==z||b[59]!==O||b[60]!==P||b[61]!==I||b[62]!==a.displayResources||b[63]!==A||b[64]!==B||b[65]!==p?(u=j.jsx(c("PolarisSaveButton.react"),{analyticsContext:e,collectionsPostSavedTo:p,"data-testid":void 0,isSaved:B,onMouseEnter:O,onSaveMedia:z,onSaveMediaToCollection:P,onShowToast:I,postId:A,thumbnailSrcSet:a.displayResources}),b[57]=e,b[58]=z,b[59]=O,b[60]=P,b[61]=I,b[62]=a.displayResources,b[63]=A,b[64]=B,b[65]=p,b[66]=u):u=b[66];b[67]!==Q||b[68]!==u?(q=j.jsx("span",babelHelpers["extends"]({},Q,{children:u})),b[67]=Q,b[68]=u,b[69]=q):q=b[69];b[70]!==g||b[71]!==n||b[72]!==m||b[73]!==q?(C=j.jsxs("section",babelHelpers["extends"]({},m,{ref:n,children:[g,q]})),b[70]=g,b[71]=n,b[72]=m,b[73]=q,b[74]=C):C=b[74];return C}e=d("IGRouter_DO_NOT_USE.react").withIGRouter(a);g["default"]=e}),98);
__d("PolarisPostFooter.react",["IGDSBox.react","IGDSDivider.react","PolarisBoostMultiBoostUtils.react","PolarisBoostUtils.react","PolarisPostAboveFooterSection.react","PolarisPostBoostButton.react","PolarisPostViewInsights.react","nullthrows","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={marginTop0:{marginTop:"xdj266r",$$css:!0},marginTop16:{marginTop:"xw7yly9",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(28),e=a.analyticsContext,f=a.bloksAppId,g=a.boostedStatus,h=a.boostUnavailableIdentifier,k=a.boostUnavailableReason,l=a.className,m=a.hasViewInsights,n=a.mediaId,o=a.productType;a=a.viewerId;a=d("PolarisBoostUtils.react").useIsEligibleForBoost(g!=null&&a!=null);var p;b[0]!==h||b[1]!==g?(p=d("PolarisBoostMultiBoostUtils.react").isEligibleForMultiBoostWebWithinBoostFlow(g,h),b[0]=h,b[1]=g,b[2]=p):p=b[2];p=p;if(!m&&!a)return null;var q=m?"between":"end",r=m?j.marginTop0:j.marginTop16,s;b[3]!==f||b[4]!==m||b[5]!==n?(s=m&&i.jsx(c("PolarisPostViewInsights.react"),{bloksAppId:f,mediaId:n}),b[3]=f,b[4]=m,b[5]=n,b[6]=s):s=b[6];b[7]!==e||b[8]!==h||b[9]!==k||b[10]!==g||b[11]!==n||b[12]!==o||b[13]!==a?(f=a&&g!=null&&o!=="ad"&&i.jsx(c("PolarisPostBoostButton.react"),{analyticsContext:e,boostedStatus:g,boostUnavailableIdentifier:h,boostUnavailableReason:k,mediaId:n,productType:c("nullthrows")(o)}),b[7]=e,b[8]=h,b[9]=k,b[10]=g,b[11]=n,b[12]=o,b[13]=a,b[14]=f):f=b[14];b[15]!==q||b[16]!==r||b[17]!==s||b[18]!==f?(m=i.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",justifyContent:q,paddingX:4,paddingY:3,position:"relative",xstyle:r,children:[s,f]}),b[15]=q,b[16]=r,b[17]=s,b[18]=f,b[19]=m):m=b[19];h=m;b[20]!==e||b[21]!==g||b[22]!==p||b[23]!==h?(k=p?i.jsxs(c("IGDSBox.react"),{children:[i.jsx(c("PolarisPostAboveFooterSection.react"),{analyticsContext:e,boostedStatus:g}),i.jsx(c("IGDSBox.react"),{marginStart:4,width:"90%",children:i.jsx(c("IGDSDivider.react"),{})}),h]}):h,b[20]=e,b[21]=g,b[22]=p,b[23]=h,b[24]=k):k=b[24];b[25]!==l||b[26]!==k?(n=i.jsx("section",{className:l,children:k}),b[25]=l,b[26]=k,b[27]=n):n=b[27];return n}g["default"]=a}),98);
__d("PolarisPostRemoveCommentsSelectors",["reselect"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a.postRemoveComments}b=d("reselect").createSelector(a,function(a){a=a.isVisible;return a});g.getPostRemoveCommentsIsVisible=b}),98);
__d("PolarisThreadedComments.react",["cx","IGDSBox.react","IGDSDivider.react","PolarisBatchDOM","PolarisCommentCover.react","PolarisCommentThread.react","PolarisCommentsSectionText.react","PolarisCommentsSortContext.react","PolarisCommentsStrings","PolarisConfig","PolarisInteractionsLogger","PolarisIsLoggedIn","PolarisLinkBuilder","PolarisNoCommentsPlaceholder.react","PolarisPaginationUtils","PolarisPendingCommentState","PolarisPostComment.react","PolarisPostCommentsContainerPlaceholder.react","PolarisPostVariants","PolarisReactRedux.react","PolarisSortCommentsUtil","PolarisThreadedCommentActions","PolarisThreadedCommentSelectors","PolarisThreadedCommentsLoadMoreButton.react","PolarisUA","cr:1342","isStringNullOrEmpty","nullthrows","polarisCommentReducer","polarisUserSelectors","react","react-compiler-runtime","requestIdleCallback"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k={commentsCover:{marginInlineStart:"x1diwwjn",$$css:!0}};function l(a,b){var c=b.getBoundingClientRect().top;c=c-b.scrollTop;b=a.getBoundingClientRect().top;return b-c}function m(a){var b=d("react-compiler-runtime").c(22),e=a.innerRef,f=a.isPermalinkedComment,g=a.onHidePermalinkReply,h=a.parentComment,i=a.parentProps,k=a.parentState,l=a.permalinkedReplyId,m=a.permalinkedReplyNodeRef;a=a.replyPagerNodeRef;var n=i.analyticsContext,o=i.code,p=i.commentingDisabledForViewer,q=i.customIndentationPadding,r=i.handleDeleteCommentClick,s=i.hideUserAvatar,t=i.id,u=i.isDeletingComments,v=i.loggedIn,w=i.onLikeCountClick,x=i.ownerId,y=i.reducedAvatarMargin;i=i.showCommentOptionsInline;k=k.commentPermalinkAnimEnabled;var z;b[0]!==n||b[1]!==o||b[2]!==k||b[3]!==p||b[4]!==q||b[5]!==r||b[6]!==s||b[7]!==t||b[8]!==e||b[9]!==u||b[10]!==f||b[11]!==v||b[12]!==g||b[13]!==w||b[14]!==x||b[15]!==h||b[16]!==l||b[17]!==m||b[18]!==y||b[19]!==a||b[20]!==i?(z=j.jsx(c("PolarisCommentThread.react"),{analyticsContext:n,code:o,commentingDisabledForViewer:p,customIndentationPadding:q,hideUserAvatar:s,innerRef:e,isPermalinkedComment:f,loggedIn:v,onDeleteCommentClick:r,onHidePermalinkReply:g,onLikeCountClick:w,parentComment:h,permalinkedReplyAnimating:k,permalinkedReplyId:l,permalinkedReplyNodeRef:m,postId:t,postOwnerId:x,reducedAvatarMargin:y,replyPagerNodeRef:a,showCommentOptionsInline:i,showRemoveIcon:u}),b[0]=n,b[1]=o,b[2]=k,b[3]=p,b[4]=q,b[5]=r,b[6]=s,b[7]=t,b[8]=e,b[9]=u,b[10]=f,b[11]=v,b[12]=g,b[13]=w,b[14]=x,b[15]=h,b[16]=l,b[17]=m,b[18]=y,b[19]=a,b[20]=i,b[21]=z):z=b[21];return z}f=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.$2=j.createRef(),c.$3=j.createRef(),c.$4=j.createRef(),c.$5=[],c.state={commentPermalinkAnimEnabled:!1,commentsSortOrder:c.props.sortOrder,isAutoscrollingCommentPermalink:!1,replyPermalinkLastHideTime:null,showHiddenComments:!1},c.$13=function(a){a=c.props;var b=a.analyticsContext,e=a.code,f=a.hasRankedComments,g=a.id,h=a.loadMore,i=a.mediaType;a=a.ownerId;h(g,f,e);d("PolarisInteractionsLogger").logInteractionAction({containerModule:b,eventName:"instagram_child_comments_load_more",mediaAuthorId:a,mediaId:g,mediaType:i})},c.$14=function(){c.setState({showHiddenComments:!0})},c.$15=function(a){c.setState({commentsSortOrder:a})},b)||babelHelpers.assertThisInitialized(c)}var f=e.prototype;f.$6=function(){return this.$2.current||null};f.$7=function(){return this.$3.current||null};f.$8=function(){return this.$4.current||null};f.$9=function(a,b,e,f){var g=this;this.setState({commentPermalinkAnimEnabled:!1,isAutoscrollingCommentPermalink:!0});d("PolarisBatchDOM").measure(function(){var h,i=l(b,a);if(e){var j=l(e,a),k=e.getBoundingClientRect().height,m=a.getBoundingClientRect().height;m=Math.max(m-k,0);h=Math.max(i,j-m)}else h=i;d("PolarisBatchDOM").mutate(function(){a.scrollTop=h;var b=function(){g.setState({commentPermalinkAnimEnabled:!0,isAutoscrollingCommentPermalink:!1})};f?c("requestIdleCallback")(function(){b()}):b()})})};f.componentDidMount=function(){var a=this.$1;if(!a)return;var b=this.$6();if(b)this.$9(a,b,this.$7(),!0);else if(!this.props.hasRankedComments){if(d("PolarisUA").isDesktop())return;a.scrollTop=a.scrollHeight}};f.componentDidUpdate=function(a,b,c){var d=this.$1;if(!d)return;var e=this.$6();if(e)if(this.state.isAutoscrollingCommentPermalink)return;else if(this.props.permalinkedCommentId!==a.permalinkedCommentId||this.props.permalinkedReplyId!==a.permalinkedReplyId||this.props.permalinkedComment!==a.permalinkedComment){this.$9(d,e,this.$7(),!1);return}this.$10(a,b,c,d,e)};f.$10=function(a,b,c,e,f){var g=this,h=a.commentSaveIsInFlight&&!this.props.commentSaveIsInFlight;c=c||{};var i=c.newCommentCachedOffset,j=a.id===this.props.id&&a.permalinkedCommentId===this.props.permalinkedCommentId&&a.permalinkedReplyId===this.props.permalinkedReplyId&&b.replyPermalinkLastHideTime!==this.state.replyPermalinkLastHideTime,k=this.$8();h&&!a.commentWasReply&&(this.$5[0]&&this.$5[0].scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}));d("PolarisBatchDOM").measure(function(){var b=null;h&&!a.commentWasReply&&!g.props.hasRankedComments?b=e.scrollHeight:i!=null?b=e.scrollHeight-i:j&&f&&k&&(b=g.$11(e,f,k));d("PolarisBatchDOM").mutate(function(){b!=null&&(e.scrollTop=b)})})};f.$11=function(a,b,c){c=l(c,a);b=l(b,a);var d=6;c=Math.max(c-d,b);return a.scrollTop>c?c:null};f.getSnapshotBeforeUpdate=function(a,b){b=a.comments;var c=this.props.comments,d=this.$1;return d&&a.id===this.props.id&&c.count()>b.count()&&!this.props.hasRankedComments?{newCommentCachedOffset:d.scrollHeight-d.scrollTop}:null};f.$12=function(){this.setState({replyPermalinkLastHideTime:new Date().valueOf()})};f.render=function(){var a=this,e=this.props,f=e.analyticsContext,g=e.captionAndTitle,h=e.captionCreatedAt,i=e.captionIsEdited,l=e.className,n=e.comments,o=e.commentsDisabled,p=e.commentsHasNextPage,q=e.communityNoteComponent,r=e.disableScroll,s=e.hasCoveredComments,t=e.hasRankedComments,u=e.hideUserAvatar,v=e.id,w=e.initialCommentsLoading,x=e.isOwnerVerified,y=e.loggedIn,z=e.mediaType,A=e.ownerId,B=e.permalinkedComment,C=e.permalinkedReplyId,D=e.postedAt,E=e.reducedAvatarMargin,F=e.requestComments,G=e.showCommentOptionsInline;e=e.showPagerBelowComments;p=o!==!0&&Boolean(p);var H=w&&n.size===0;if((g==null||g==="")&&n.count()===0&&!p&&!H)return d("PolarisUA").isDesktop()?j.jsxs("div",{className:l,children:[q,j.jsx(c("PolarisNoCommentsPlaceholder.react"),{})]}):j.jsx("div",{className:l});var I=null,J=null,K=null;if(!H&&o!==!0){I=B?j.jsx("div",{className:"_a9z3"+(this.state.commentPermalinkAnimEnabled&&!C?" _a9yl":""),ref:this.$2,children:j.jsx(m,{isPermalinkedComment:!0,onHidePermalinkReply:function(){return a.$12()},parentComment:B,parentProps:this.props,parentState:this.state,permalinkedReplyId:C,permalinkedReplyNodeRef:this.$3,replyPagerNodeRef:this.$4})}):null;var L=function(){var b;return(b=a.props.comments.findIndex(function(a){return a.isAuthorVerified===!1}))!=null?b:-1};J=n.map(function(b,e){if(B&&b.id===B.id)return null;return b.isCovered===!0?null:j.jsxs(c("IGDSBox.react"),{marginBottom:4,children:[j.jsx(m,{innerRef:function(b){return a.$5[e]=b},parentComment:b,parentProps:a.props,parentState:a.state},e),a.props.sortOrder===d("PolarisSortCommentsUtil").CommentsOptionValues.META_VERIFIED&&L()===e+1&&j.jsx(c("IGDSDivider.react"),{})]},e)}).filter(function(a){return!!a});K=n.filter(function(a){return a.isCovered===!0}).map(function(b,c){return j.jsx(m,{innerRef:function(b){return a.$5[c]=b},parentComment:b,parentProps:a.props,parentState:a.state},c)})}o=null;!c("isStringNullOrEmpty")(g)?o=j.jsxs(j.Fragment,{children:[j.jsx(c("PolarisPostComment.react"),{analyticsContext:f,captionCreatedAt:h,className:(d("PolarisUA").isMobile()?"_a9z4":"")+" _a9z5",commentOwnerId:A,communityNoteComponent:q,hideUserAvatar:!!u,isAuthorVerified:!!x,isCaption:!0,isEdited:!!i,isRestrictedPending:!1,loggedIn:y,mediaType:z,postedAt:c("nullthrows")(D),postId:v,postOwnerId:A,reducedAvatarMargin:E,showCommentOptionsInline:G,showRemoveIcon:!1,showRichComment:!0,text:g,variant:d("PolarisPostVariants").VARIANTS.flexible},"captionAndTitle"),q!=null&&j.jsx(c("IGDSDivider.react"),{})]}):q!=null&&(o=j.jsxs(j.Fragment,{children:[q,j.jsx(c("IGDSDivider.react"),{})]}));C=p&&this.renderLoadMoreCommentsLink(I!=null);f=t||e===!0;h=function(a){return F(v,void 0,a)};u=d("PolarisSortCommentsUtil").showCommentsSortOptions(this.props.sortOrder,n.size);x=function(){return n.some(function(a){return a.isAuthorVerified===!0})};i=this.props.sortOrder===d("PolarisSortCommentsUtil").CommentsOptionValues.META_VERIFIED&&!x();y=j.jsx(c("IGDSBox.react"),{marginEnd:d("PolarisUA").isMobile()?4:0,marginStart:d("PolarisUA").isMobile()?4:0,children:j.jsx(c("IGDSDivider.react"),{})});return j.jsx(d("PolarisCommentsSortContext.react").PolarisCommentsSortContextProvider,{commentsSortOrder:this.state.commentsSortOrder,setCommentsSortOrder:this.$15,children:j.jsx("div",{className:l,children:j.jsxs("ul",{className:"_a9z6"+(r?" _a9z7":"")+(I!==null?" _a9z8":"")+(o===null?" _a9z9":"")+(!C||f?" _a9za":""),ref:function(b){return a.$1=b},children:[o,j.jsxs(c("IGDSBox.react"),{direction:"column",display:"flex",children:[u&&b("cr:1342")!=null&&j.jsx(c("IGDSBox.react"),{marginStart:12,marginTop:2,children:j.jsx(b("cr:1342"),{commentsCount:n.size,fetchComments:h})}),I]}),H?j.jsx(c("PolarisPostCommentsContainerPlaceholder.react"),{}):null,!f&&C,j.jsx(c("IGDSBox.react"),{children:w?j.jsx(c("PolarisPostCommentsContainerPlaceholder.react"),{}):j.jsxs(c("IGDSBox.react"),{children:[i&&j.jsx(c("PolarisCommentsSectionText.react"),{commentsDivider:y,marginStart:12,text:d("PolarisSortCommentsUtil").NO_META_VERIFIED_COMMENTS}),j.jsxs(c("IGDSBox.react"),{children:[!d("PolarisConfig").isLoggedOutFRXEligible()&&J,f&&C,!C&&s&&!this.state.showHiddenComments&&j.jsx(c("PolarisCommentCover.react"),{onClick:this.$14,postId:v,postOwnerId:A,xstyle:k.commentsCover}),this.state.showHiddenComments&&j.jsxs(j.Fragment,{children:[j.jsx(c("PolarisCommentsSectionText.react"),{commentsDivider:y,marginStart:12,text:d("PolarisCommentsStrings").COVERED_COMMENTS}),K]})]})]})})]})})})};f.renderLoadMoreCommentsLink=function(a){var b=this.props,e=b.code,f=b.commentsIsFetching;b=b.hasRankedComments;e=d("PolarisLinkBuilder").buildMediaCommentsLink(c("nullthrows")(e),d("PolarisUA").isMobile());var g;b?(b=0,g=0):a?(b=2,g=2):(b=0,g=4);return j.jsx("li",{children:j.jsx(c("PolarisThreadedCommentsLoadMoreButton.react"),{commentsIsFetching:f,handleLoadMoreCommentsClick:this.$13,marginBottom:g,marginTop:b,url:e})})};return e}(j.PureComponent);function a(a,b){var c,e,f=b.id,g=b.ownerId;b=b.permalinkedCommentId;var h=d("PolarisThreadedCommentSelectors").getThreadedCommentsLoading(a,f),i=d("PolarisThreadedCommentSelectors").selectVisibleParentCommentsForPostId(a,f);c=(c=a.threadedComments.parentByPostId[f])!=null?c:d("polarisCommentReducer").EMPTY_POST_COMMENTS_STATE;var j=c.count;c=c.pagination;e=(e=a.pendingComments[f])!=null?e:d("PolarisPendingCommentState").EMPTY_PENDING_COMMENT;var k=null;!h&&b!=null&&b!==""&&(k=a.comments.byId.get(b));b=(f=(b=a.threadedComments.parentByPostId[f])==null?void 0:b.sortOrder)!=null?f:d("PolarisSortCommentsUtil").CommentsOptionValues.TOP;return{comments:i,commentSaveIsInFlight:e.committing,commentsHasNextPage:d("PolarisPaginationUtils").hasNextPage(c),commentsIsFetching:d("PolarisPaginationUtils").isFetching(c),commentsTotalCount:j!=null?j:0,commentWasReply:e.repliedToCommentId!=null,hasCoveredComments:i.some(function(a){return a.isCovered===!0}),initialCommentsLoading:h,isOwnerVerified:d("polarisUserSelectors").getUserByIdOrThrows(a,g).isVerified,permalinkedComment:k,sortOrder:b}}function e(a){return{loadMore:function(b,c,e){d("PolarisIsLoggedIn").isLoggedIn()?a(d("PolarisThreadedCommentActions").requestNextParentCommentPageV2(b,c)):a(d("PolarisThreadedCommentActions").requestNextParentCommentPage(b,c,e))},requestComments:function(b,c,e){a(d("PolarisThreadedCommentActions").requestInitialComments(b,c,e))}}}h=d("PolarisReactRedux.react").connect(a,e)(f);g["default"]=h}),98);
__d("PolarisThreadedCommentsLoader.react",["CometErrorBoundary.react","CometPlaceholder.react","FBLogger","IGDSBox.react","IGDSSpinner.react","PolarisReactRedux.react","PolarisThreadedCommentActions","react","react-compiler-runtime","usePolarisGetQuerySetup"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function j(a){var b=d("react-compiler-runtime").c(2),e=a.children,f=a.initialCommentsQuery;a=a.postId;var g;b[0]!==a?(g=d("PolarisThreadedCommentActions").setupPostComments(a),b[0]=a,b[1]=g):g=b[1];c("usePolarisGetQuerySetup")(f,g);return e}function a(a){var b=d("react-compiler-runtime").c(11),e=a.children,f=a.initialCommentsQuery,g=a.postId,h=d("PolarisReactRedux.react").useDispatch();b[0]!==h||b[1]!==g?(a=function(a){h(d("PolarisThreadedCommentActions").initialCommentsError(g)),c("FBLogger")("ig_web").catching(a)},b[0]=h,b[1]=g,b[2]=a):a=b[2];a=a;var l;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(l=i.jsx(c("IGDSBox.react"),{direction:"row",justifyContent:"center",position:"relative",children:i.jsx(c("IGDSSpinner.react"),{})}),b[3]=l):l=b[3];b[4]!==e||b[5]!==f||b[6]!==g?(l=i.jsx(c("CometPlaceholder.react"),{fallback:l,children:i.jsx(j,{initialCommentsQuery:f,postId:g,children:e})}),b[4]=e,b[5]=f,b[6]=g,b[7]=l):l=b[7];b[8]!==a||b[9]!==l?(e=i.jsx(c("CometErrorBoundary.react"),{fallback:k,onError:a,children:l}),b[8]=a,b[9]=l,b[10]=e):e=b[10];return e}function k(){return null}g["default"]=a}),98);
__d("PolarisPostComments.react",["PolarisDeleteCommentModal.react","PolarisPostRemoveCommentsSelectors","PolarisPostVariants","PolarisReactRedux.react","PolarisThreadedComments.react","PolarisThreadedCommentsLoader.react","PolarisUA","nullthrows","polarisUserSelectors","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={commentToDeleteId:null,showDeleteCommentModal:!1},c.$1=function(a){c.setState({commentToDeleteId:a,showDeleteCommentModal:!0})},c.$2=function(){c.setState({commentToDeleteId:null,showDeleteCommentModal:!1})},b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.$3=function(){return this.props.variant!==d("PolarisPostVariants").VARIANTS.feed&&!d("PolarisUA").isMobile()};e.render=function(){var a=this.props,b=a.analyticsContext,d=a.caption,e=a.captionCreatedAt,f=a.captionIsEdited,g=a.className,h=a.code,j=a.commentingDisabledForViewer,k=a.commentsDisabled,l=a.communityNoteComponent,m=a.customIndentationPadding,n=a.hasRankedComments,o=a.hideUserAvatar,p=a.id,q=a.initialCommentsQuery,r=a.mediaType,s=a.onLikeCountClick,t=a.ownerId,u=a.permalinkedCommentId,v=a.permalinkedReplyId,w=a.postedAt,x=a.reducedAvatarMargin,y=a.showCommentOptionsInline,z=a.showRemoveCommentIcons;a=a.viewerId;a=a!=null;d=i.jsx(c("PolarisThreadedComments.react"),{analyticsContext:b,captionAndTitle:d,captionCreatedAt:e,captionIsEdited:f,className:g,code:h,commentingDisabledForViewer:j,commentsDisabled:k,communityNoteComponent:l,customIndentationPadding:m,handleDeleteCommentClick:this.$1,hasRankedComments:n,hideUserAvatar:!!o,id:p,isDeletingComments:z,loggedIn:a,mediaType:r,onLikeCountClick:s,ownerId:t,permalinkedCommentId:u,permalinkedReplyId:v,postedAt:w,reducedAvatarMargin:x,showCommentOptionsInline:y});q!=null&&(d=i.jsx(c("PolarisThreadedCommentsLoader.react"),{initialCommentsQuery:q,postId:p,children:d}));return i.jsxs(i.Fragment,{children:[d,this.state.showDeleteCommentModal&&i.jsx(c("PolarisDeleteCommentModal.react"),{analyticsContext:b,commentId:c("nullthrows")(this.state.commentToDeleteId),onClose:this.$2,postId:p})]})};return b}(i.PureComponent);b.defaultProps={variant:d("PolarisPostVariants").VARIANTS.flexible};function a(a){return{showRemoveCommentIcons:d("PolarisPostRemoveCommentsSelectors").getPostRemoveCommentsIsVisible(a),viewerId:(a=d("polarisUserSelectors").getViewer__DEPRECATED(a))==null?void 0:a.id}}e=d("PolarisReactRedux.react").connect(a)(b);g["default"]=e}),98);
__d("PolarisPostFastPreviewCaption.react",["IGDSBox.react","PolarisPostFastCommentPrimitive.react","PolarisPostFastCrawlerComment.react","PolarisUA","nullthrows","polarisCommentSelectors.react","react","react-compiler-runtime","usePolarisIsOnFeedPage","usePolarisPost"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(10),e=a.enableTruncation,f=a.inModal;a=a.postId;var g=c("usePolarisIsOnFeedPage")();g=g&&f!==!0&&d("PolarisUA").isDesktop();f=d("usePolarisPost").usePostAndOwner(a,o);var h=d("usePolarisPost").usePostAndOwner(a,n),p=d("usePolarisPost").usePostAndOwner(a,m),q=d("usePolarisPost").usePostAndOwner(a,l),r=d("usePolarisPost").usePost(a,k);a=d("usePolarisPost").usePost(a,j);a=d("polarisCommentSelectors.react").useCommentTranslation(a);if(r==null||r==="")return null;(a==null?void 0:a.showTranslatedText)===!0&&a.translatedText!=null&&(r=a.translatedText);a=g?2:1;b[0]!==e||b[1]!==q||b[2]!==p||b[3]!==r||b[4]!==f||b[5]!==h?(g=e===!0?i.jsx(c("PolarisPostFastCrawlerComment.react"),{isAuthorUnpublished:q,isAuthorVerified:p,text:r,userId:f,username:h}):i.jsx(c("PolarisPostFastCommentPrimitive.react"),{isAuthorUnpublished:q,isAuthorVerified:p,isCaption:!0,text:r,userId:f,username:h}),b[0]=e,b[1]=q,b[2]=p,b[3]=r,b[4]=f,b[5]=h,b[6]=g):g=b[6];b[7]!==a||b[8]!==g?(e=i.jsx(c("IGDSBox.react"),{marginBottom:a,position:"relative",children:g}),b[7]=a,b[8]=g,b[9]=e):e=b[9];return e}function j(a){return a.captionCommentId}function k(a){return a.caption}function l(a,b){return b.isUnpublished}function m(a,b){return b.isVerified}function n(a,b){return c("nullthrows")(b.username)}function o(a,b){return c("nullthrows")(b.id)}g["default"]=a}),98);
__d("PolarisPostFastCommentLikeButton.react",["PolarisCommentActions","PolarisConfig","PolarisInteractionsLogger","PolarisLikeButton.react","PolarisReactRedux.react","react","react-compiler-runtime","usePolarisAnalyticsContext","usePolarisComment","usePolarisPost"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function j(a,b){var e=d("react-compiler-runtime").c(8),f=d("usePolarisComment").useComment(a,l),g=d("usePolarisPost").usePost(b,d("PolarisInteractionsLogger").getMediaTypeFromPost),h=d("usePolarisPost").usePostAndOwner(b,k),i=c("usePolarisAnalyticsContext")();if(e[0]===Symbol["for"]("react.memo_cache_sentinel")){var j;j=(j=d("PolarisConfig").getViewerId())!=null?j:"";e[0]=j}else j=e[0];e[1]!==i||e[2]!==f||e[3]!==a||e[4]!==b||e[5]!==h||e[6]!==g?(j={commentAuthorId:f,commentId:a,containerModule:i,mediaAuthorId:h,mediaId:b,mediaType:g,userId:j},e[1]=i,e[2]=f,e[3]=a,e[4]=b,e[5]=h,e[6]=g,e[7]=j):j=e[7];return j}function k(a,b){return b.id}function l(a){return a.id}function a(a){var b=d("react-compiler-runtime").c(7),e=a.color,f=a.commentId;a=a.postId;var g=d("PolarisReactRedux.react").useDispatch(),h=j(f,a);a=d("usePolarisComment").useComment(f,m);b[0]!==g||b[1]!==h?(f=function(a){a?g(d("PolarisCommentActions").likeComment(h)):g(d("PolarisCommentActions").unlikeComment(h))},b[0]=g,b[1]=h,b[2]=f):f=b[2];f=f;var k;b[3]!==e||b[4]!==a||b[5]!==f?(k=i.jsx(c("PolarisLikeButton.react"),{color:e,isLiked:a,onChange:f,padding:0,size:12}),b[3]=e,b[4]=a,b[5]=f,b[6]=k):k=b[6];return k}function m(a){return a.likedByViewer}b=i.memo(a);g["default"]=b}),98);
__d("PolarisPostFastPreviewComment.react",["PolarisPostFastCommentPrimitive.react","nullthrows","react","react-compiler-runtime","usePolarisComment"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b,e=d("react-compiler-runtime").c(5);a=a.commentId;var f=(b=d("usePolarisComment")).useCommentAndOwner(a,m),g=b.useCommentAndOwner(a,l),h=b.useComment(a,k);b=b.useComment(a,j);e[0]!==b||e[1]!==h||e[2]!==f||e[3]!==g?(a=i.jsx(c("PolarisPostFastCommentPrimitive.react"),{isAuthorVerified:b,text:h,userId:f,username:g}),e[0]=b,e[1]=h,e[2]=f,e[3]=g,e[4]=a):a=e[4];return a}function j(a){return a.isAuthorVerified}function k(a){return a.text}function l(a,b){return c("nullthrows")(b.username)}function m(a,b){return c("nullthrows")(b.id)}g["default"]=a}),98);
__d("PolarisPostFastViewAllComments.react",["fbt","IGDSText.react","PolarisBigNumber.react","PolarisConfig","PolarisFastLink.react","PolarisFeedActionOpenPostModalForId","PolarisInFeedPostModalContext","PolarisInteractionsLogger","PolarisIsLoggedIn","PolarisReactRedux.react","PolarisSponsoredPostContext.react","PolarisTrackingConstants","PolarisUA","XPolarisMobileAllCommentsControllerRouteBuilder","logPolarisPostModalOpen","nullthrows","react","react-compiler-runtime","usePolarisAnalyticsContext","usePolarisLoggedOutBlockingEntryPointDialog","usePolarisLoggedOutIntentEntryPointDialog","usePolarisPost"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;b.useCallback;var k=b.useContext;function a(a){var b=d("react-compiler-runtime").c(26),e=a.postId;a=d("usePolarisPost").usePost(e,m);var f=d("usePolarisPost").usePost(e,l),g=d("usePolarisPost").usePost(e,d("PolarisInteractionsLogger").getMediaTypeFromPost),i=k(d("PolarisSponsoredPostContext.react").PolarisSponsoredPostContext),n=i.canUserSeePersistentCta;b[0]!==n?(i=function(a){var b;return c("XPolarisMobileAllCommentsControllerRouteBuilder").buildURL((b={},b[d("PolarisTrackingConstants").ENABLE_PERSISTENT_CTA]=n||void 0,b.shortcode=c("nullthrows")(a.code),b))},b[0]=n,b[1]=i):i=b[1];var o=d("usePolarisPost").usePost(e,i),p=d("PolarisReactRedux.react").useDispatch(),q=c("usePolarisAnalyticsContext")(),r=k(d("PolarisInFeedPostModalContext").InFeedPostModalContext);b[2]===Symbol["for"]("react.memo_cache_sentinel")?(i=!d("PolarisIsLoggedIn").isLoggedIn()&&d("PolarisUA").isMobile(),b[2]=i):i=b[2];var s=i;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(i=s||d("PolarisIsLoggedIn").isLoggedIn()&&d("PolarisUA").isDesktop(),b[3]=i):i=b[3];i=i;var t=c("usePolarisLoggedOutBlockingEntryPointDialog")(),u=t[0],v=t[1];t=c("usePolarisLoggedOutIntentEntryPointDialog")();var w=t[0],x=t[1];b[4]!==v||b[5]!==x?(t=function(){d("PolarisUA").isDesktop()||d("PolarisConfig").isLoggedOutFRXEligible()?x==null?void 0:x(!0):v==null?void 0:v(!0)},b[4]=v,b[5]=x,b[6]=t):t=b[6];t=t;var y;b[7]!==q||b[8]!==p||b[9]!==r||b[10]!==u||b[11]!==w||b[12]!==f||b[13]!==e||b[14]!==g?(y=function(a,b){if(d("PolarisIsLoggedIn").isLoggedIn())d("PolarisInteractionsLogger").logInteractionAction({containerModule:q,eventName:"instagram_organic_comment_view_all",mediaAuthorId:f,mediaId:e,mediaType:g}),d("PolarisUA").isDesktop()&&(a.preventDefault(),p(d("PolarisFeedActionOpenPostModalForId").openPostModalForId(e)),c("logPolarisPostModalOpen")(q,g,"feed_view_all_comments"),r(e));else if(s){a.preventDefault();a={contentReportingLink:e,nextUrl:b,source:"post_comment_view_all"};d("PolarisUA").isDesktop()||d("PolarisConfig").isLoggedOutFRXEligible()?w==null?void 0:w(a):u==null?void 0:u(a)}},b[7]=q,b[8]=p,b[9]=r,b[10]=u,b[11]=w,b[12]=f,b[13]=e,b[14]=g,b[15]=y):y=b[15];var z=y;b[16]!==z||b[17]!==o?(y=function(a){return z(a,o)},b[16]=z,b[17]=o,b[18]=y):y=b[18];var A;b[19]!==a?(A=j.jsx(c("IGDSText.react"),{color:"secondaryText",zeroMargin:!0,children:a===1?h._(/*BTDS*/"Ver un comentario"):h._(/*BTDS*/"Ver los {count} comentarios",[h._param("count",j.jsx(c("PolarisBigNumber.react"),{value:a}))])}),b[19]=a,b[20]=A):A=b[20];b[21]!==t||b[22]!==y||b[23]!==A||b[24]!==o?(a=j.jsx(c("PolarisFastLink.react"),{"data-testid":void 0,href:o,onClick:y,onMouseEnter:t,shouldOpenModal:i,children:A}),b[21]=t,b[22]=y,b[23]=A,b[24]=o,b[25]=a):a=b[25];return a}function l(a){return c("nullthrows")((a=a.owner)==null?void 0:a.id)}function m(a){return a.numComments||0}g["default"]=a}),226);
__d("PolarisPostFastPreviewCommentsList.react",["IGDSBox.react","PolarisConfig","PolarisIsLoggedIn","PolarisPostFastCommentLikeButton.react","PolarisPostFastPreviewComment.react","PolarisPostFastViewAllComments.react","PolarisReactRedux.react","PolarisThreadedCommentSelectors","PolarisUA","isTruthy","polarisCommentSelectors.react","react","react-compiler-runtime","usePolarisIsOnAdsActivityPage","usePolarisIsOnFeedPage","usePolarisPost"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useMemo;function k(a){var b=d("react-compiler-runtime").c(13),e=a.postId;a=a.previewCommentIds;var f=c("usePolarisIsOnFeedPage")(),g=c("usePolarisIsOnAdsActivityPage")(),h;b[0]!==g||b[1]!==f?(h=(f||g)&&d("PolarisUA").isDesktop(),b[0]=g,b[1]=f,b[2]=h):h=b[2];g=h;var j=g;if(d("PolarisConfig").isLoggedOutFRXEligible())return null;if(a.length>0){f=g?1:0;if(b[3]!==j||b[4]!==e||b[5]!==a){b[7]!==j||b[8]!==e?(h=function(a){return i.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",marginBottom:1,position:"relative",children:[i.jsx(c("PolarisPostFastPreviewComment.react"),{commentId:a}),d("PolarisIsLoggedIn").isLoggedIn()&&i.jsx(c("IGDSBox.react"),{marginStart:j?2:0,position:"relative",children:i.jsx(c("PolarisPostFastCommentLikeButton.react"),{color:j?"ig-secondary-icon":void 0,commentId:a,postId:e})})]},a)},b[7]=j,b[8]=e,b[9]=h):h=b[9];g=a.map(h);b[3]=j;b[4]=e;b[5]=a;b[6]=g}else g=b[6];b[10]!==f||b[11]!==g?(h=i.jsx(c("IGDSBox.react"),{marginBottom:f,position:"relative",children:g}),b[10]=f,b[11]=g,b[12]=h):h=b[12];return h}return null}function a(a){var b=a.inModal,e=a.postId;a=a.shouldIncreaseCommentPreviews;a=a===void 0?!1:a;var f=c("usePolarisIsOnFeedPage")();f=f&&b!==!0&&d("PolarisUA").isDesktop();var g=c("isTruthy")(a);b=d("usePolarisPost").usePost(e,function(a){return!a.commentsDisabled});var h=d("PolarisReactRedux.react").useSelector(function(a){return g?d("PolarisThreadedCommentSelectors").selectVisibleParentCommentsForPostId(a,e).toArray():d("polarisCommentSelectors.react").getPreviewCommentsForPostId(a,e)});a=j(function(){return h.map(function(a){return a.id})},[h]);var l=d("usePolarisPost").usePost(e,function(a){return(a=a.numComments)!=null?a:0}),m=l>a.length;if(!b||l<=0)return null;b=!d("PolarisIsLoggedIn").isLoggedIn()&&a.length>0&&!g;return i.jsxs(i.Fragment,{children:[m&&i.jsx(c("IGDSBox.react"),{alignItems:"start",marginBottom:f?2:1,position:"relative",children:i.jsx(c("PolarisPostFastViewAllComments.react"),{postId:e})}),i.jsx(k,{postId:e,previewCommentIds:b?a.slice(-1):a})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisPostPreviewCommentsPicker.react",["CometPlaceholder.react","IGDSBox.react","IGDSSpinner.react","PolarisPostCaptionTranslationPrompt.react","PolarisPostComments.react","PolarisPostFastPreviewCaption.react","PolarisPostFastPreviewCommentsList.react","PolarisPostVariants","PolarisUA","react","react-compiler-runtime","usePolarisIsOnAdsActivityPage","usePolarisIsOnFeedPage","xigRequireInterop"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var e=d("react-compiler-runtime").c(34),f=c("usePolarisIsOnFeedPage")(),g=c("usePolarisIsOnAdsActivityPage")(),h;e[0]!==g||e[1]!==f?(h=(f||g)&&d("PolarisUA").isDesktop(),e[0]=g,e[1]=f,e[2]=h):h=e[2];g=h;f=a.variant!==d("PolarisPostVariants").VARIANTS.feed&&!d("PolarisUA").isMobile();h=a.communityNoteComponent;if(f){e[3]===Symbol["for"]("react.memo_cache_sentinel")?(f=i.jsx(c("IGDSSpinner.react"),{position:"absolute"}),e[3]=f):f=e[3];e[4]!==a.className?(f=i.jsx("div",{className:a.className,children:f}),e[4]=a.className,e[5]=f):f=e[5];var j;e[6]!==a?(j=i.jsx(c("PolarisPostComments.react"),babelHelpers["extends"]({},a)),e[6]=a,e[7]=j):j=e[7];var k;e[8]!==f||e[9]!==j?(k=i.jsx(c("CometPlaceholder.react"),{fallback:f,children:j}),e[8]=f,e[9]=j,e[10]=k):k=e[10];return k}e[11]===Symbol["for"]("react.memo_cache_sentinel")?(f=c("xigRequireInterop")(b("PolarisPostFastPreviewCommentsList.react")),e[11]=f):f=e[11];j=f["default"];e[12]===Symbol["for"]("react.memo_cache_sentinel")?(k=c("xigRequireInterop")(b("PolarisPostFastPreviewCaption.react")),e[12]=k):k=e[12];f=k["default"];e[13]!==f||e[14]!==a.enableTruncation||e[15]!==a.id||e[16]!==a.inModal?(k=i.jsx(f,{enableTruncation:a.enableTruncation,inModal:a.inModal,postId:a.id}),e[13]=f,e[14]=a.enableTruncation,e[15]=a.id,e[16]=a.inModal,e[17]=k):k=e[17];e[18]!==g||e[19]!==a.id?(f=g&&i.jsx(c("PolarisPostCaptionTranslationPrompt.react"),{inFeed:!0,marginBottom:2,postId:a.id}),e[18]=g,e[19]=a.id,e[20]=f):f=e[20];e[21]!==j||e[22]!==a.id||e[23]!==a.inModal||e[24]!==a.shouldIncreaseCommentPreviews?(g=i.jsx(j,{inModal:a.inModal,postId:a.id,shouldIncreaseCommentPreviews:a.shouldIncreaseCommentPreviews}),e[21]=j,e[22]=a.id,e[23]=a.inModal,e[24]=a.shouldIncreaseCommentPreviews,e[25]=g):g=e[25];e[26]!==h||e[27]!==k||e[28]!==f||e[29]!==g?(j=i.jsxs(c("IGDSBox.react"),{position:"relative",children:[k,f,h,g]}),e[26]=h,e[27]=k,e[28]=f,e[29]=g,e[30]=j):j=e[30];e[31]!==a.className||e[32]!==j?(h=i.jsx("div",{className:a.className,children:j}),e[31]=a.className,e[32]=j,e[33]=h):h=e[33];return h}g["default"]=a}),98);
__d("PolarisPostLikers.react",["IGDSBox.react","IGDSText.react","IGRouter_DO_NOT_USE.react","PolarisFacepile.next.react","PolarisLikedByListActions","PolarisLikedByListButton.react","PolarisLikedByText.react","PolarisLinkBuilder","PolarisPostUtils","PolarisReactRedux.react","PolarisUA","polarisLogAction","react","react-compiler-runtime","usePolarisLoggedOutBlockingEntryPointDialog","usePolarisLoggedOutIntentEntryPointDialog","usePolarisLoggedOutShowIncreasedFeatureWalls"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useCallback;var j=function(b){babelHelpers.inheritsLoose(a,b);function a(a){var c;c=b.call(this,a)||this;c.$2=function(){c.props.onLike()};c.$3=function(a){c.$1(),!c.props.viewer&&c.props.inModal!==!0?(a.preventDefault(),c.props.onGoToLoginModal(c.props.code)):d("PolarisUA").isDesktop()&&(a.preventDefault(),c.props.onViewLikedByList(c.props.mediaId),c.props.onLikeCountClick(a))};c.$4=function(){!c.props.viewer&&c.props.inModal!==!0&&c.props.onPreloadDialog()};return c}var e=a.prototype;e.$1=function(){c("polarisLogAction")("likeCountClick")};e.render=function(){var a=d("PolarisPostUtils").getOrderedUsersForLikedByList(this.props.users,this.props.viewer).map(function(a){return a.profilePictureUrl}).filter(Boolean),b=i.jsx(c("PolarisFacepile.next.react"),{avatarSize:this.props.avatarSize,border:"transparent",userProfilePicUrls:a}),e=!!this.props.viewer;return i.jsxs(c("IGDSBox.react"),{direction:"row",flex:"grow",position:"relative",children:[a.length>0&&e===!0&&i.jsx(c("IGDSBox.react"),{alignItems:"start",direction:"column",justifyContent:"start",marginEnd:1,position:"relative",children:i.jsx(c("PolarisLikedByListButton.react"),{code:this.props.code,inModal:this.props.inModal,onClick:this.$3,onMouseEnter:this.$4,children:b})}),i.jsx(c("IGDSBox.react"),{alignItems:"start",direction:"column",flex:"grow",margin:"auto",position:"relative",wrap:!0,children:i.jsx(c("IGDSText.react"),{zeroMargin:!0,children:i.jsx(c("PolarisLikedByText.react"),{code:this.props.code,hideCounts:this.props.hideCounts,inModal:!!this.props.inModal,mediaId:this.props.mediaId,onClick:this.$3,onLike:this.$2,onMouseEnter:this.$4,topLikers:this.props.topLikers,totalCount:this.props.totalCount,users:this.props.users})})})]})};return a}(i.Component);function a(a){return{onViewLikedByList:function(b){return a(d("PolarisLikedByListActions").requestNativeLikedByList(b))}}}function b(a){var b=d("react-compiler-runtime").c(12),e=c("usePolarisLoggedOutBlockingEntryPointDialog")(),f=e[0],g=e[1];e=c("usePolarisLoggedOutIntentEntryPointDialog")();var h=e[0],k=e[1],l=c("usePolarisLoggedOutShowIncreasedFeatureWalls")();b[0]!==g||b[1]!==k||b[2]!==l?(e=function(){l()?k==null?void 0:k(!0):g==null?void 0:g(!0)},b[0]=g,b[1]=k,b[2]=l,b[3]=e):e=b[3];e=e;var m;b[4]!==f||b[5]!==h||b[6]!==l?(m=function(a){a=d("PolarisLinkBuilder").buildMediaLink(a);a={contentReportingLink:a,nextUrl:a,source:"post_likers"};l()?h==null?void 0:h(a):f==null?void 0:f(a)},b[4]=f,b[5]=h,b[6]=l,b[7]=m):m=b[7];m=m;var n;b[8]!==m||b[9]!==e||b[10]!==a?(n=i.jsx(j,babelHelpers["extends"]({},a,{onGoToLoginModal:m,onPreloadDialog:e})),b[8]=m,b[9]=e,b[10]=a,b[11]=n):n=b[11];return n}e=d("IGRouter_DO_NOT_USE.react").withIGRouter(d("PolarisReactRedux.react").connect(null,a)(b));g["default"]=e}),98);
__d("PolarisPostSocialProof.react",["PolarisPostLikers.react","PolarisPostVariants","PolarisPostViews.react","PolarisShouldHideLikeCountsWithControls","PolarisUA","nullthrows","polarisGetPostFromGraphMediaInterface","react","react-compiler-runtime","usePolarisIsOnAdsActivityPage","usePolarisIsOnFeedPage"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(28),e=a.analyticsContext,f=a.canLike,g=a.className,h=a.code,j=a.containerRef,k=a.inModal,l=a.likeAndViewCountsDisabled,m=a.likedByViewer,n=a.likers,o=a.mediaId,p=a.numPreviewLikes,q=a.onLikeChange,r=a.onLikeCountClick,s=a.productType,t=a.topLikers,u=a.variant,v=a.videoViews,w=a.viewer;a=a.viewerIsOwner;var x=v!=null&&v>0,y=p!==0,z=c("usePolarisIsOnFeedPage")(),A=c("usePolarisIsOnAdsActivityPage")();u===d("PolarisPostVariants").VARIANTS.feed?u=y||x:u=y||x||f;y=w==null?void 0:w.hideLikeAndViewCounts;b[0]!==l||b[1]!==y||b[2]!==a?(f=d("PolarisShouldHideLikeCountsWithControls").shouldHideLikeCountsWithControls(y,l,a),b[0]=l,b[1]=y,b[2]=a,b[3]=f):f=b[3];l=f;y=x&&!l&&!d("polarisGetPostFromGraphMediaInterface").isClipsProductType(s);if(!u)return null;b[4]!==k||b[5]!==A||b[6]!==z?(a=(z||A)&&k!==!0&&d("PolarisUA").isDesktop(),b[4]=k,b[5]=A,b[6]=z,b[7]=a):a=b[7];f=a;b[8]!==e||b[9]!==h||b[10]!==f||b[11]!==l||b[12]!==k||b[13]!==m||b[14]!==n||b[15]!==o||b[16]!==p||b[17]!==q||b[18]!==r||b[19]!==y||b[20]!==t||b[21]!==v||b[22]!==w?(x=y?i.jsx(c("PolarisPostViews.react"),{analyticsContext:e,likeCount:p,viewCount:c("nullthrows")(v)}):i.jsx(c("PolarisPostLikers.react"),{avatarSize:f?"micro":void 0,code:h,hideCounts:l,inModal:!!k,likedByViewer:m,mediaId:o,onLike:function(){q(!0,"beTheFirstPrompt")},onLikeCountClick:r,topLikers:t,totalCount:p,users:n,viewer:w}),b[8]=e,b[9]=h,b[10]=f,b[11]=l,b[12]=k,b[13]=m,b[14]=n,b[15]=o,b[16]=p,b[17]=q,b[18]=r,b[19]=y,b[20]=t,b[21]=v,b[22]=w,b[23]=x):x=b[23];b[24]!==g||b[25]!==j||b[26]!==x?(s=i.jsx("section",{className:g,ref:j,children:x}),b[24]=g,b[25]=j,b[26]=x,b[27]=s):s=b[27];return s}g["default"]=a}),98);
__d("PolarisPostDetailsSection.react",["IGDSBox.react","IGDSText.react","PolarisCommentLikedByListContainerLazy.react","PolarisFeedPageConstants","PolarisGenericStrings","PolarisHotKeys.react","PolarisIGTheme.react","PolarisInteractionsLogger","PolarisLikedByListContainerLazy.react","PolarisLikedByListVariant","PolarisPendingCommentState","PolarisPostCaptionTranslationPrompt.react","PolarisPostCommentInputPicker.react","PolarisPostConstants","PolarisPostFeatures.react","PolarisPostFeedbackControls_DEPRECATED.react","PolarisPostFooter.react","PolarisPostModalRenderingContext.react","PolarisPostPreviewCommentsPicker.react","PolarisPostSocialProof.react","PolarisPostTimestamp.react","PolarisPostVariants","PolarisReactRedux.react","PolarisUA","isStringNullOrEmpty","nullthrows","polarisAdsSelectors.react","polarisGetAppPlatform","react","react-compiler-runtime","stylex","usePolarisDisplayProperties","usePolarisIsOnAdsActivityPage","usePolarisIsOnFeedPage","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;var k=b.useEffect,aa=b.useRef,l=b.useState,m={commentInput:{paddingBottom:"x10b6aqq",paddingTop:"x1yrsyyn",$$css:!0},commentInputAsSidebar:{order:"x1hrcb2b",$$css:!0},commentInputHidden:{display:"x1s85apg",minHeight:"x1wxaq2x",$$css:!0},commentInputStatic:{paddingInlineEnd:"xv54qhq",$$css:!0},commentInputV2:{paddingBottom:"xjkvuk6",paddingTop:"x1iorvi4",$$css:!0},commentInputV2WithRichComments:{paddingInlineEnd:"xpdmqnj",paddingInlineStart:"x1g0dm76",$$css:!0},comments:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minHeight:"x2lwn1j",overflowX:"xw2csxc",overflowY:"x1odjw0f",position:"x1n2onr6",$$css:!0},commentsAsSidebar:{marginTop:"xdj266r",marginInlineEnd:"xule2z1",marginBottom:"xat24cr",marginInlineStart:"xwqyzqf",order:"x9ek82g",overflowX:"x6ikm8r",$$css:!0},commentsMarginBottom:{marginBottom:"x12nagc",$$css:!0},commentsMarginBottomDense:{marginBottom:"xat24cr",$$css:!0},commentsV2:{marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"x4ii5y1",marginInlineStart:"x1lziwak",paddingTop:"xexx8yu",paddingInlineEnd:"xpdmqnj",paddingBottom:"x18d9i69",paddingInlineStart:"x1g0dm76",$$css:!0},commentsWithRichComments:{marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"x4ii5y1",marginInlineStart:"x1lziwak",paddingTop:"xexx8yu",paddingInlineEnd:"xv54qhq",paddingBottom:"x18d9i69",paddingInlineStart:"xf7dkkf",$$css:!0},expandedSidebarContainerResponsive:{borderStartStartRadius:"x15mokao",borderStartEndRadius:"x1t39747",borderEndEndRadius:"x1wcsgtt",borderEndStartRadius:"xbiv7yw",$$css:!0},feedback:{marginTop:"x1gslohp",paddingBottom:"xwib8y2",paddingTop:"x1yrsyyn",$$css:!0},feedbackAsSidebar:{borderTopColor:"x1xp8e9x",borderTopStyle:"x13fuv20",borderTopWidth:"x178xt8z",marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",order:"xo1ph6p",$$css:!0},feedbackV2:{paddingBottom:"x10b6aqq",paddingTop:"xexx8yu",$$css:!0},feedbackV2WithRichComments:{paddingInlineEnd:"xpdmqnj",paddingInlineStart:"x1g0dm76",$$css:!0},feedbackWithRichComments:{paddingInlineEnd:"xv54qhq",paddingInlineStart:"xf7dkkf",$$css:!0},msite:{borderBottomColor:"xh05dso",borderBottomStyle:"x1q0q8m5",borderBottomWidth:"xso031l",$$css:!0},responsiveViewInsights:{marginInlineStart:"x162z183",width:"x1j7kr1c",$$css:!0},roundedSidebarContainer:{borderStartStartRadius:"x15mokao",borderStartEndRadius:"x1ga7v0g",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",$$css:!0},sectionWithNoPadding:{overflowX:"x1plvlek",overflowY:"xryxfnj",paddingInlineEnd:"xyri2b",paddingInlineStart:"x1c1uobl",$$css:!0},sidebarContainer:{display:"x78zum5",flexDirection:"xdt5ytf",pointerEvents:"x67bb7w",position:"x1n2onr6",$$css:!0},sidebarContainerAsSidebar:{backgroundColor:"xvbhtw8",height:"x5yr21d",width:"x4h1yfo",$$css:!0},sidebarContainerFeedRoot:{backgroundColor:"xvbhtw8",$$css:!0},sidebarContainerInModal:{backgroundColor:"xvbhtw8",height:"x5yr21d",$$css:!0},sidebarContainerV2:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",$$css:!0},timestamp:{marginBottom:"x1yztbdb",$$css:!0},timestampAsSidebar:{order:"x1h3rv7z",$$css:!0},timestampDense:{marginBottom:"x1e56ztr",$$css:!0},timestampV2:{paddingInlineStart:"x1g0dm76",$$css:!0},timestampWithRichComments:{paddingInlineStart:"xf7dkkf",$$css:!0},viewInsights:{borderBottomStyle:"x1sy0etr",borderTopColor:"x1xp8e9x",borderTopStyle:"x13fuv20",borderTopWidth:"x178xt8z",order:"x14yy4lh",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(82),e=a.analyticsContext,f=a.bloksAppId,g=a.communityNoteComponent,i=a.currSidecarIndex,n=a.currSidecarItem,o=a.enableTruncation,p=a.handleLikeChange,q=a.handleSaveChange,r=a.hasDenserFeedRedesign,s=a.hasSidebarInRedesign,t=a.hasViewInsights,u=a.initialCommentsQuery,v=a.owner,w=a.permalinkedCommentId,x=a.permalinkedReplyId,y=a.post,z=a.postAuthorId,A=a.postAuthorUsername,B=a.postFeedbackControlsRef,C=a.postHeader,D=a.redesignWithoutSidebar,E=a.redesignWithSidebar,F=a.shouldIncreaseCommentPreviews,G=a.showDetailsAsSidebar,H=a.variant,I=a.viewer,J=y.commentsDisabled===!0||((a=y.mediaOverlayInfo)==null?void 0:(a=a.overlay_type)==null?void 0:a.toUpperCase())==="SECRET_LINK",K=!d("PolarisUA").isDesktop();a=l(null);var L=a[0],M=a[1];a=l(!1);var ca=a[0],da=a[1];a=l(!1);var ea=a[0],fa=a[1];a=c("usePolarisDisplayProperties")();var ga=a.viewportWidth,ha=aa(null);b[0]!==J||b[1]!==ea||b[2]!==y.commentingDisabledForViewer||b[3]!==ga?(a=function(){return!J&&y.commentingDisabledForViewer!==!0&&(ea||ga>=d("PolarisPostConstants").SIDEBAR_VARIANT_CUTOFF)},b[0]=J,b[1]=ea,b[2]=y.commentingDisabledForViewer,b[3]=ga,b[4]=a):a=b[4];var N=a;b[5]!==y.id?(a=function(a){return(a=a.pendingComments[y.id])!=null?a:d("PolarisPendingCommentState").EMPTY_PENDING_COMMENT},b[5]=y.id,b[6]=a):a=b[6];a=d("PolarisReactRedux.react").useSelector(a);var O=a.committing,P=c("usePrevious")(O);a=d("PolarisPostModalRenderingContext.react").usePolarisPostModalRenderingContext();var Q=a.isInModal;b[7]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(){fa(!0),ha.current&&ha.current.focusAndScroll()},b[7]=a):a=b[7];var ia=a;b[8]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(){da(!1)},b[8]=a):a=b[8];var ja=a;b[9]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(a){da(!0)},b[9]=a):a=b[9];var ka=a;b[10]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(){M(null)},b[10]=a):a=b[10];var la=a;b[11]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(a){M(a)},b[11]=a):a=b[11];var ma=a;b[12]!==y.commentsDisabled||b[13]!==I?(a=I?{c:function(){y.commentsDisabled!==!0&&ia()}}:{},b[12]=y.commentsDisabled,b[13]=I,b[14]=a):a=b[14];a=a;var R=c("usePrevious")(y),S,T;b[15]!==y||b[16]!==R?(T=function(){R!=null&&y!=null&&R!==y&&(M(null),da(!1))},S=[y,R],b[15]=y,b[16]=R,b[17]=S,b[18]=T):(S=b[17],T=b[18]);k(T,S);b[19]!==O||b[20]!==P?(T=function(){P===!0&&O===!1&&fa(!1)},S=[O,P],b[19]=O,b[20]=P,b[21]=T,b[22]=S):(T=b[21],S=b[22]);k(T,S);b[23]!==v||b[24]!==y||b[25]!==H?(T={owner:v,post:y,variant:H},b[23]=v,b[24]=y,b[25]=H,b[26]=T):T=b[26];S=d("PolarisPostFeatures.react").usePolarisPostFeatures(T);var U=S.canViewerProvideFeedback,V=S.commentsAreStacked,W=S.hasThreadedSidebarComments,X=S.isBlocked,Y=S.isSidecar,na=S.isStackedScreenSize,oa=S.showPostButton,pa=d("polarisAdsSelectors.react").useFeedAdInfo(y==null?void 0:y.id,ba);T=c("usePolarisIsOnFeedPage")();S=c("usePolarisIsOnAdsActivityPage")();var Z;b[27]!==Q||b[28]!==S||b[29]!==T?(Z=(T||S)&&Q!==!0&&d("PolarisUA").isDesktop(),b[27]=Q,b[28]=S,b[29]=T,b[30]=Z):Z=b[30];S=Z;var $=S,qa=d("PolarisIGTheme.react").useTheme().getTheme()===d("PolarisIGTheme.react").IGTheme.Dark;T=E?"grow":"none";b[31]!==pa||b[32]!==e||b[33]!==f||b[34]!==U||b[35]!==L||b[36]!==V||b[37]!==J||b[38]!==g||b[39]!==i||b[40]!==n||b[41]!==o||b[42]!==$||b[43]!==p||b[44]!==q||b[45]!==r||b[46]!==s||b[47]!==W||b[48]!==t||b[49]!==u||b[50]!==X||b[51]!==qa||b[52]!==Q||b[53]!==Y||b[54]!==na||b[55]!==v||b[56]!==w||b[57]!==x||b[58]!==y||b[59]!==z||b[60]!==A||b[61]!==B||b[62]!==C||b[63]!==E||b[64]!==D||b[65]!==F||b[66]!==N||b[67]!==G||b[68]!==ca||b[69]!==oa||b[70]!==H||b[71]!==I?(Z=function(a,b,k){return j.jsxs("div",babelHelpers["extends"]({},(h||(h=c("stylex"))).props(m.sidebarContainer,H===d("PolarisPostVariants").VARIANTS.feed&&m.sidebarContainerFeedRoot,G&&!Q===!0&&m.sidebarContainerAsSidebar,Q&&m.sidebarContainerInModal,!Q===!0&&r&&m.sidebarContainerV2,D&&m.roundedSidebarContainer,E&&m.expandedSidebarContainerResponsive),{onKeyUp:a,role:b,tabIndex:k,children:[(Q===!0?s:!V)?C:null,j.jsxs("div",babelHelpers["extends"]({},{0:{className:"x9f619 x78zum5 xdt5ytf x1q2y9iw xexx8yu xv54qhq x18d9i69 xf7dkkf x1n2onr6 xh8yej3"},8:{className:"x78zum5 xdt5ytf x1q2y9iw xexx8yu x18d9i69 x1n2onr6 xh8yej3 x9f619 x1iyjqo2 x64bnmy x13jy36j"},4:{className:"x9f619 x78zum5 xdt5ytf x1q2y9iw x1n2onr6 xh8yej3 x13lttk3 x1t7ytsu xpilrb4 xexx8yu xyri2b x18d9i69 x1c1uobl"},12:{className:"x78zum5 xdt5ytf x1q2y9iw x1n2onr6 xh8yej3 x9f619 x1iyjqo2 x13lttk3 x1t7ytsu xpilrb4 xexx8yu xyri2b x18d9i69 x1c1uobl"},2:{className:"x9f619 x78zum5 xdt5ytf x1q2y9iw xexx8yu xv54qhq x18d9i69 xf7dkkf x1n2onr6 xh8yej3 x1ejq31n x18oe1m7 x1sy0etr xstzfhl"},10:{className:"x78zum5 xdt5ytf x1q2y9iw xexx8yu x18d9i69 x1n2onr6 xh8yej3 x9f619 x1iyjqo2 x64bnmy x13jy36j x1ejq31n x18oe1m7 x1sy0etr xstzfhl"},6:{className:"x9f619 x78zum5 xdt5ytf x1q2y9iw x1n2onr6 xh8yej3 x13lttk3 xpilrb4 xexx8yu xyri2b x18d9i69 x1c1uobl x1ejq31n x18oe1m7 x1sy0etr xstzfhl"},14:{className:"x78zum5 xdt5ytf x1q2y9iw x1n2onr6 xh8yej3 x9f619 x1iyjqo2 x13lttk3 xpilrb4 xexx8yu xyri2b x18d9i69 x1c1uobl x1ejq31n x18oe1m7 x1sy0etr xstzfhl"},1:{className:"x9f619 x78zum5 xdt5ytf x1q2y9iw xexx8yu xv54qhq x18d9i69 xf7dkkf x1n2onr6 xh8yej3 x1b5io7h"},9:{className:"x78zum5 xdt5ytf x1q2y9iw xexx8yu x18d9i69 x1n2onr6 xh8yej3 x9f619 x1iyjqo2 x64bnmy x13jy36j x1b5io7h"},5:{className:"x9f619 x78zum5 xdt5ytf x1q2y9iw x1n2onr6 xh8yej3 x13lttk3 x1t7ytsu xpilrb4 xexx8yu xyri2b x18d9i69 x1c1uobl x1b5io7h"},13:{className:"x78zum5 xdt5ytf x1q2y9iw x1n2onr6 xh8yej3 x9f619 x1iyjqo2 x13lttk3 x1t7ytsu xpilrb4 xexx8yu xyri2b x18d9i69 x1c1uobl x1b5io7h"},3:{className:"x9f619 x78zum5 xdt5ytf x1q2y9iw xexx8yu xv54qhq x18d9i69 xf7dkkf x1n2onr6 xh8yej3 x1ejq31n x18oe1m7 x1sy0etr xstzfhl x1b5io7h"},11:{className:"x78zum5 xdt5ytf x1q2y9iw xexx8yu x18d9i69 x1n2onr6 xh8yej3 x9f619 x1iyjqo2 x64bnmy x13jy36j x1ejq31n x18oe1m7 x1sy0etr xstzfhl x1b5io7h"},7:{className:"x9f619 x78zum5 xdt5ytf x1q2y9iw x1n2onr6 xh8yej3 x13lttk3 xpilrb4 xexx8yu xyri2b x18d9i69 x1c1uobl x1ejq31n x18oe1m7 x1sy0etr xstzfhl x1b5io7h"},15:{className:"x78zum5 xdt5ytf x1q2y9iw x1n2onr6 xh8yej3 x9f619 x1iyjqo2 x13lttk3 xpilrb4 xexx8yu xyri2b x18d9i69 x1c1uobl x1ejq31n x18oe1m7 x1sy0etr xstzfhl x1b5io7h"}}[!!G<<3|!!W<<2|!!$<<1|!!qa<<0],{children:[j.jsx(c("PolarisPostFooter.react"),{analyticsContext:e,bloksAppId:f,boostedStatus:y.boostedStatus,boostUnavailableIdentifier:y.boostUnavailableIdentifier,boostUnavailableReason:y.boostUnavailableReason,className:h(d("PolarisUA").isMobile()?m.msite:m.viewInsights,!s&&m.responsiveViewInsights,V&&Y),hasViewInsights:t,mediaId:y.id,productType:y.productType,viewerId:I==null?void 0:I.id}),j.jsx(c("PolarisPostFeedbackControls_DEPRECATED.react"),{analyticsContext:e,canViewerProvideFeedback:U,canViewerReshare:y.viewerCanReshare,code:c("nullthrows")(y.code),commentsDisabled:J,containerRef:B,currSidecarIndex:i,hideShareButton:y.igMediaSharingDisabled===!0,isBlocked:X,isSidecar:Y,isVideo:!!y.isVideo,likedByViewer:!!y.likedByViewer,mediaId:n!=null?n.id:y.id,numSteps:(a=y.sidecarChildren)==null?void 0:a.length,onCommentClick:ia,onLikeChange:p,onSaveChange:q,ownerIsPrivate:v.isPrivate,ownerUsername:v.username,postId:y.id,savedByViewer:!!y.savedByViewer,sharingFrictionInfo:n!=null?n.sharingFrictionInfo:y.sharingFrictionInfo,variant:H,xstyle:[m.feedback,r&&m.feedbackV2,r&&W&&m.feedbackV2WithRichComments,G&&m.feedbackAsSidebar,W&&m.feedbackWithRichComments,$&&m.sectionWithNoPadding]}),y.code!=null&&j.jsx(c("PolarisPostSocialProof.react"),{analyticsContext:e,canLike:!X&&U,className:{0:"x1e56ztr",8:"x12nagc x182iqb8",4:"x1e56ztr xv54qhq xf7dkkf",12:"x12nagc x182iqb8 xv54qhq xf7dkkf",2:"x1e56ztr xpdmqnj x1g0dm76",10:"x12nagc x182iqb8 xpdmqnj x1g0dm76",6:"x1e56ztr xpdmqnj x1g0dm76",14:"x12nagc x182iqb8 xpdmqnj x1g0dm76",1:"x1e56ztr x1plvlek xryxfnj xyri2b x1c1uobl",9:"x12nagc x182iqb8 x1plvlek xryxfnj xyri2b x1c1uobl",5:"x1e56ztr x1plvlek xryxfnj xyri2b x1c1uobl",13:"x12nagc x182iqb8 x1plvlek xryxfnj xyri2b x1c1uobl",3:"x1e56ztr x1plvlek xryxfnj xyri2b x1c1uobl",11:"x12nagc x182iqb8 x1plvlek xryxfnj xyri2b x1c1uobl",7:"x1e56ztr x1plvlek xryxfnj xyri2b x1c1uobl",15:"x12nagc x182iqb8 x1plvlek xryxfnj xyri2b x1c1uobl"}[!!G<<3|!!W<<2|!!(r&&W)<<1|!!$<<0],code:c("nullthrows")(y.code),inModal:Q,likeAndViewCountsDisabled:y.likeAndViewCountsDisabled,likedByViewer:!!y.likedByViewer,likers:y.likers||[],mediaId:y.id,numPreviewLikes:y.numPreviewLikes||0,onLikeChange:p,onLikeCountClick:ka,productType:y.productType,topLikers:y.topLikers,variant:H,videoViews:y.videoViews,viewer:I,viewerIsOwner:z===(I==null?void 0:I.id)}),j.jsx(c("PolarisPostPreviewCommentsPicker.react"),{analyticsContext:e,caption:y.caption,captionCreatedAt:y.captionCreatedAt,captionHasTranslation:y.captionHasTranslation,captionId:y.captionCommentId,captionIsEdited:y.captionIsEdited,className:h(m.comments,!K&&m.commentsMarginBottom,K&&m.commentsMarginBottomDense,G&&m.commentsAsSidebar,W&&m.commentsWithRichComments,r&&W&&m.commentsV2,$&&m.sectionWithNoPadding),code:y.code,commentingDisabledForViewer:(b=y.commentingDisabledForViewer)!=null?b:!1,commentsDisabled:J,commentsQuery:null,communityNoteComponent:g,enableTruncation:o,hasRankedComments:y.hasRankedComments===!0,id:y.id,initialCommentsQuery:u,inModal:Q,mediaType:d("PolarisInteractionsLogger").getMediaTypeFromPost(y),onLikeCountClick:ma,owner:v,ownerId:z,permalinkedCommentId:w,permalinkedReplyId:x,postedAt:c("nullthrows")(y.postedAt),postId:y.id,shouldIncreaseCommentPreviews:F,showCommentOptionsInline:!0,title:y.title,variant:H}),!$&&j.jsx("div",babelHelpers["extends"]({},(h||(h=c("stylex"))).props(!K&&m.timestamp,K&&m.timestampDense,G&&m.timestampAsSidebar,W&&m.timestampWithRichComments,r&&W&&m.timestampV2),{children:y.isSponsored===!0?null:j.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",position:"relative",children:[j.jsx(c("PolarisPostTimestamp.react"),{code:c("nullthrows")(y.code),isVideo:y.isVideo,postedAt:c("nullthrows")(y.postedAt),productType:(k=y.productType)!=null?k:"",username:v.username}),e===d("PolarisFeedPageConstants").FEED_PAGE_ANALYTICS_CONTEXT&&j.jsx(c("IGDSBox.react"),{marginStart:2,position:"relative",children:j.jsx(c("PolarisPostCaptionTranslationPrompt.react"),{inFeed:!0,postId:y.id})})]})})),(d("polarisGetAppPlatform").isIOS()||N())&&j.jsx(c("PolarisPostCommentInputPicker.react"),{adInfo:pa,analyticsContext:e,canViewerProvideFeedback:U,hasPostButton:oa,id:y.id,inModal:Q,isRevampVersion:!1,isVideo:y.isVideo,ownerId:v.id,ref:ha,xstyle:[m.commentInput,G&&m.commentInputAsSidebar,r&&m.commentInputV2,r&&W&&m.commentInputV2WithRichComments,!N()&&m.commentInputHidden,!na&&m.commentInputStatic]},y.id),!N()&&d("PolarisUA").isDesktop()&&y.commentsDisabled!==!0&&y.commentingDisabledForViewer===!0&&j.jsx("div",babelHelpers["extends"]({},{0:{className:"x6s0dn4 x1xp8e9x x13fuv20 x178xt8z x78zum5 x1dnml7z xl56j7k x1gslohp x1hrcb2b"},2:{className:"x6s0dn4 x1xp8e9x x13fuv20 x178xt8z x78zum5 x1dnml7z xl56j7k x1hrcb2b xdj266r"},1:{className:"x6s0dn4 x1xp8e9x x178xt8z x78zum5 xl56j7k x1gslohp x1hrcb2b x1ejq31n x18oe1m7 x1sy0etr xstzfhl xxeg0ib"},3:{className:"x6s0dn4 x1xp8e9x x178xt8z x78zum5 xl56j7k x1hrcb2b xdj266r x1ejq31n x18oe1m7 x1sy0etr xstzfhl xxeg0ib"}}[!!r<<1|!!$<<0],{children:j.jsx(c("IGDSText.react"),{color:"tertiaryText",textAlign:"center",children:d("PolarisGenericStrings").COMMENTING_LIMITED})}))]})),ca&&j.jsx(c("PolarisLikedByListContainerLazy.react"),{display:c("PolarisLikedByListVariant").Modal,isOwnerTheViewer:(I==null?void 0:I.id)===z,likeAndViewCountsDisabled:y.likeAndViewCountsDisabled,likeCount:y.numLikes||0,mediaId:y.id,onClose:ja,ownerUsername:A,productType:(a=y.productType)!=null?a:"",shortcode:c("nullthrows")(y.code),viewCount:y.videoViews}),!c("isStringNullOrEmpty")(L)&&j.jsx(c("PolarisCommentLikedByListContainerLazy.react"),{commentId:L,display:c("PolarisLikedByListVariant").Modal,onClose:la})]}))},b[31]=pa,b[32]=e,b[33]=f,b[34]=U,b[35]=L,b[36]=V,b[37]=J,b[38]=g,b[39]=i,b[40]=n,b[41]=o,b[42]=$,b[43]=p,b[44]=q,b[45]=r,b[46]=s,b[47]=W,b[48]=t,b[49]=u,b[50]=X,b[51]=qa,b[52]=Q,b[53]=Y,b[54]=na,b[55]=v,b[56]=w,b[57]=x,b[58]=y,b[59]=z,b[60]=A,b[61]=B,b[62]=C,b[63]=E,b[64]=D,b[65]=F,b[66]=N,b[67]=G,b[68]=ca,b[69]=oa,b[70]=H,b[71]=I,b[72]=Z):Z=b[72];b[73]!==a||b[74]!==Z?(S=j.jsx(c("PolarisHotKeys.react"),{keyMap:a,children:Z}),b[73]=a,b[74]=Z,b[75]=S):S=b[75];b[76]!==T||b[77]!==S?(a=j.jsx(c("IGDSBox.react"),{flex:T,position:"relative",children:S}),b[76]=T,b[77]=S,b[78]=a):a=b[78];Z=a;if(E){b[79]===Symbol["for"]("react.memo_cache_sentinel")?(T={className:"x1qjc9v5 x972fbf x10w94by x1qhh985 x14e42zd x9f619 x78zum5 xdt5ytf x1iyjqo2 x5wqa0o xln7xf2 xk390pu xdj266r x14z9mp xat24cr x1lziwak x65f84u x1vq45kp xexx8yu xyri2b x18d9i69 x1c1uobl x1n2onr6 x11njtxf"},b[79]=T):T=b[79];b[80]!==Z?(S=j.jsx("div",babelHelpers["extends"]({},T,{children:Z})),b[80]=Z,b[81]=S):S=b[81];return S}return Z}function ba(a){return a}g["default"]=a}),98);
__d("PolarisPostHeaderFavoritedIconButton.react",["IGDSBox.react","IGDSIconButton.react","IGDSStarPanoFilledGradientIcon.react","PolarisFavoritesStrings","PolarisPostModalContext.react","polarisLogAction","react","react-compiler-runtime","usePolarisAnalyticsContext"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(5);a=a.isFavorited;var e=d("PolarisPostModalContext.react").useSetPostModal(),f=c("usePolarisAnalyticsContext")();if(a&&(f==="feedPage"||f==="postPage")){b[0]!==e?(a=function(){c("polarisLogAction")("favoriteIconInPostHeaderClick"),e("favorites")},b[0]=e,b[1]=a):a=b[1];b[2]===Symbol["for"]("react.memo_cache_sentinel")?(f=i.jsx(c("IGDSBox.react"),{marginEnd:2,position:"relative",children:i.jsx(c("IGDSStarPanoFilledGradientIcon.react"),{alt:d("PolarisFavoritesStrings").FAVORITED_ICON_ALT,size:16})}),b[2]=f):f=b[2];b[3]!==a?(f=i.jsx(c("IGDSIconButton.react"),{onClick:a,children:f}),b[3]=a,b[4]=f):f=b[4];return f}return null}g["default"]=a}),98);
__d("PolarisPostInvitedCoauthorsOverlayFooterCTA.react",["fbt","IGDSBox.react","IGDSTextVariants.react","PolarisConfig","PolarisInvitedCoauthorsCountWithSheet.react","PolarisUserHoverCard.react","PolarisUserLink.react","gkx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(19),e=a.invitedCoauthorProducers,f=a.mediaId;a=a.user;var g=d("PolarisConfig").getViewerIdOrZero(),i=e!=null;if(!i||(a==null?void 0:a.id)!==g||a==null||(a==null?void 0:a.username)==null)return null;b[0]!==e?(i=e==null?void 0:e.map(l),b[0]=e,b[1]=i):i=b[1];g=i;b[2]!==e?(a=e!=null?e:[],b[2]=e,b[3]=a):a=b[3];b[4]!==a?(i=a.map(k),b[4]=a,b[5]=i):i=b[5];a=i;b[6]!==g?(i=h._(/*BTDS*/"Se ha invitado a {invited_coauthor_username} para que colabore, pero a\u00fan no ha aceptado.",[h._param("invited_coauthor_username",g!=null&&g[0])]),b[6]=g,b[7]=i):i=b[7];i=i;var m;b[8]!==g?(m=h._(/*BTDS*/"Se ha invitado a {invited_coauthor_username_1} y {invited_coauthor_username_2} a colaborar, pero a\u00fan no han aceptado.",[h._param("invited_coauthor_username_1",g!=null&&g[0]),h._param("invited_coauthor_username_2",g!=null&&g[1])]),b[8]=g,b[9]=m):m=b[9];m=m;var n;b[10]!==a||b[11]!==g||b[12]!==f?(n=h._(/*BTDS*/"Se ha invitado a {invited_coauthor_username_1} y {=m2} a colaborar, pero a\u00fan no han aceptado.",[h._param("invited_coauthor_username_1",g!=null&&g[0]),h._implicitParam("=m2",j.jsx(c("PolarisInvitedCoauthorsCountWithSheet.react"),{analyticsContext:"post_invited_coauthors_overlay_footer_cta",coauthors:a,mediaId:f,children:h._(/*BTDS*/"")}))]),b[10]=a,b[11]=g,b[12]=f,b[13]=n):n=b[13];a=n;b[14]!==e||b[15]!==i||b[16]!==a||b[17]!==m?(g=e!=null&&e.length>0&&c("gkx")("4757")?j.jsx(c("IGDSBox.react"),{alignItems:"center",color:"primaryBackground",direction:"row",justifyContent:"between",paddingX:3,paddingY:2,position:"relative",children:j.jsx(c("IGDSBox.react"),{flex:"shrink",marginEnd:5,marginStart:1,maxWidth:350,overflow:"auto",wrap:!0,children:j.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"primaryText",maxLines:3,zeroMargin:!0,children:e.length===1?i:e.length===2?m:e.length>2?a:null})})}):null,b[14]=e,b[15]=i,b[16]=a,b[17]=m,b[18]=g):g=b[18];return g}function k(a){var b;return{user:{fullName:(b=a.fullName)!=null?b:"",id:a.id,isVerified:(b=a.isVerified)!=null?b:!1,profilePictureUrl:(b=a.profilePictureUrl)!=null?b:"",username:(b=a.username)!=null?b:""}}}function l(a,b){var d;return j.jsx(c("PolarisUserHoverCard.react"),{display:"inline-block",isUserAvailable:!(a==null?void 0:a.isUnpublished),userId:(d=a==null?void 0:a.id)!=null?d:"",username:(d=a==null?void 0:a.username)!=null?d:"",children:j.jsx(c("PolarisUserLink.react"),{username:(d=a==null?void 0:a.username)!=null?d:""})},b)}l.displayName=l.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("PolarisPostFastOptionsButton.react",["fbt","IGDSBox.react","IGDSIconButton.react","IGDSMoreHorizontalPanoOutlineIcon.react","IGDSMoreVerticalPanoOutline24Icon.react","InstagramAdActionMenuFalcoEvent","PolarisContainerModuleUtils","PolarisPostModalContext.react","PolarisViewpointActionUtils","identityFunction","polarisAdsSelectors.react","polarisLogAction","react","react-compiler-runtime","usePolarisAnalyticsContext","usePolarisPost","usePolarisViewer"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=h._(/*BTDS*/"M\u00e1s opciones");function l(a){var b=d("react-compiler-runtime").c(3),e=a.color;a=a.orientation;a=a==="horizontal"?c("IGDSMoreHorizontalPanoOutlineIcon.react"):c("IGDSMoreVerticalPanoOutline24Icon.react");var f;b[0]!==a||b[1]!==e?(f=j.jsx(c("IGDSBox.react"),{alignItems:"center",height:24,justifyContent:"center",position:"relative",width:24,children:j.jsx(a,{alt:k,color:e})}),b[0]=a,b[1]=e,b[2]=f):f=b[2];return f}function a(a){var b=d("react-compiler-runtime").c(27),e=a.className,f=a.orientation,g=a.padding,h=a.postId;a=f===void 0?"horizontal":f;var i=d("PolarisPostModalContext.react").useSetPostModal(),k=c("usePolarisAnalyticsContext")();b[0]!==k?(f=d("PolarisContainerModuleUtils").getContainerModule(k),b[0]=k,b[1]=f):f=b[1];var o=f,p=d("usePolarisPost").usePost(h,c("identityFunction")),q=!!p.isVideo;f=c("usePolarisViewer")();var r=f==null?void 0:f.id,s=d("polarisAdsSelectors.react").useFeedAdInfo(h,n),t=d("polarisAdsSelectors.react").useFeedAdInfo(h,m);b[2]!==p?(f=d("PolarisViewpointActionUtils").getMPKForFeedMedia(p),b[2]=p,b[3]=f):f=b[3];var u=f;b[4]!==s||b[5]!==k||b[6]!==o||b[7]!==q||b[8]!==u||b[9]!==p.isSponsored||b[10]!==h||b[11]!==i||b[12]!==t||b[13]!==r?(f=function(){c("polarisLogAction")("postOptionsClick",{mediaId:h,source:k,type:q?"video":"photo"}),p.isSponsored===!0&&r!=null&&c("InstagramAdActionMenuFalcoEvent").log(function(){return{ad_id:s,m_pk:u,pigeon_reserved_keyword_module:o,pk:r,source_of_action:o,tracking_token:t}}),i("options")},b[4]=s,b[5]=k,b[6]=o,b[7]=q,b[8]=u,b[9]=p.isSponsored,b[10]=h,b[11]=i,b[12]=t,b[13]=r,b[14]=f):f=b[14];f=f;var v;b[15]!==a?(v=j.jsx(l,{color:"ig-secondary-text",orientation:a}),b[15]=a,b[16]=v):v=b[16];var w;b[17]!==a?(w=j.jsx(l,{color:"ig-primary-text",orientation:a}),b[17]=a,b[18]=w):w=b[18];b[19]!==f||b[20]!==g||b[21]!==v||b[22]!==w?(a=j.jsx(c("IGDSIconButton.react"),{"data-testid":void 0,hover:v,onClick:f,padding:g,children:w}),b[19]=f,b[20]=g,b[21]=v,b[22]=w,b[23]=a):a=b[23];b[24]!==e||b[25]!==a?(f=j.jsx("div",{className:e,children:a}),b[24]=e,b[25]=a,b[26]=f):f=b[26];return f}function m(a){return a==null?void 0:a.tracking_token}function n(a){return a==null?void 0:a.ad_id}b=j.memo(a);g["default"]=b}),226);
__d("PolarisPostOptionsButtonPicker.react",["PolarisPostFastOptionsButton.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(5),e=a.buttonClassName;a=a.mediaPK;var f;b[0]!==a?(f=i.jsx(c("PolarisPostFastOptionsButton.react"),{postId:a}),b[0]=a,b[1]=f):f=b[1];b[2]!==e||b[3]!==f?(a=i.jsx("div",{className:e,children:f}),b[2]=e,b[3]=f,b[4]=a):a=b[4];return a}g["default"]=a}),98);
__d("PolarisPostPageRouteReferrerContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({referrerTracePolicy:null});g["default"]=b}),98);
__d("PolarisSavedPostsActionEditCollection",["PolarisAPIEditCollection","PolarisGenericStrings","PolarisSavedPostsLogger","Promise","polarisNormalizeCollections"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var c=a.collectionId,e=a.collectionName,f=a.postIdsToAdd,g=a.postIdsToRemove,i=a.retryHandler,j=a.source,k=a.userId;return function(a){a({collectionId:c,type:"SAVED_COLLECTION_EDIT_PENDING",userId:k});d("PolarisSavedPostsLogger").logEditCollection("attempt",j);return d("PolarisAPIEditCollection").editCollection({collectionId:c,collectionName:e,postIdsToAdd:f,postIdsToRemove:g}).then(function(b){b=d("polarisNormalizeCollections").normalizeCollection(b);a({collection:b,postIdsToAdd:f,postIdsToRemove:g,type:"SAVED_COLLECTION_EDIT_SUCCESS",userId:k});d("PolarisSavedPostsLogger").logEditCollection("success",j)})["catch"](function(e){a({collectionId:c,toast:{actionHandler:i,actionText:d("PolarisGenericStrings").RETRY_TEXT,text:d("PolarisGenericStrings").GENERIC_ERROR_MESSAGE},type:"SAVED_COLLECTION_EDIT_ERRORED",userId:k});d("PolarisSavedPostsLogger").logEditCollection("failure",j);return(h||(h=b("Promise"))).reject(e)})}}g.editCollection=a}),98);
__d("PolarisSponsoredPostCTAFooter.react",["InstagramODS","PolarisClickEventLoggerProvider.react","PolarisPostFooterCTA.react","PolarisPostUtils","PolarisTrackingNodeProvider.react","polarisAdsSelectors.react","react","react-compiler-runtime","usePolarisSponsoredPostCTAFooterDominantColor"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(17),e=a.isMediaRendered,f=a.post;a=a.sidecarIndex;var g=d("polarisAdsSelectors.react").useFeedAdInfo(f.id,k),h=f.isSidecar;a=h===!0?(h=d("PolarisPostUtils").getCurrentSidecarItemFromPost(f,a))==null?void 0:h.id:f.id;b[0]!==e||b[1]!==a||b[2]!==f?(h={isMediaRendered:e,mediaId:a,post:f},b[0]=e,b[1]=a,b[2]=f,b[3]=h):h=b[3];e=c("usePolarisSponsoredPostCTAFooterDominantColor")(h);var l=e.ctaDominantColor;f=e.ctaFooterViewpointRef;if(a==null)return null;if(b[4]!==(g==null?void 0:g.ctaItems)||b[5]!==a){h=g==null?void 0:(h=g.ctaItems)==null?void 0:(e=h.get(a))==null?void 0:e.ctaLinkUrl;b[4]=g==null?void 0:g.ctaItems;b[5]=a;b[6]=h}else h=b[6];var m=h;if(b[7]!==(g==null?void 0:g.ctaItems)||b[8]!==a){e=g==null?void 0:(e=g.ctaItems)==null?void 0:(h=e.get(a))==null?void 0:h.ctaLinkText;b[7]=g==null?void 0:g.ctaItems;b[8]=a;b[9]=e}else e=b[9];var n=e,o=j;if(m!=null&&n!=null){b[10]!==l||b[11]!==n||b[12]!==m?(h=function(a){return i.jsx("div",{ref:a,children:i.jsx(c("PolarisPostFooterCTA.react"),{ctaDominantColor:l,"data-testid":void 0,disableAnimation:!1,externalURL:m,forceBottomBorder:!0,isActive:!0,isForAd:!0,onClick:o,showChevron:!0,text:n})})},b[10]=l,b[11]=n,b[12]=m,b[13]=h):h=b[13];b[14]!==f||b[15]!==h?(g=i.jsx(c("PolarisClickEventLoggerProvider.react"),{children:i.jsx(c("PolarisTrackingNodeProvider.react"),{ref:f,trackingNode:86,children:h})}),b[14]=f,b[15]=h,b[16]=g):g=b[16];return g}return null}function j(){c("InstagramODS").incr("web.ads.feed.link_click")}function k(a){return a}g["default"]=a}),98);
__d("PolarisUnsaveFromCollectionDialog.react",["fbt","IGCoreDialog.react","PolarisGenericStrings","PolarisUA","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(16),c=a.onClose,e=a.onUnsaveFromAll;a=a.onUnsaveFromCollection;var f;b[0]!==a?(f=a?h._(/*BTDS*/"Se puede eliminar de esta colecci\u00f3n o de todos los lugares donde se haya guardado."):h._(/*BTDS*/"Si eliminas esto de los elementos guardados, tambi\u00e9n se borrar\u00e1 de las colecciones."),b[0]=a,b[1]=f):f=b[1];var g;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(g=h._(/*BTDS*/"\u00bfSuprimir de los elementos guardados y de las colecciones?"),b[2]=g):g=b[2];var i;b[3]!==a?(i=a&&j.jsx(d("IGCoreDialog.react").IGCoreDialogItem,{color:"ig-error-or-destructive",onClick:a,children:h._(/*BTDS*/"Eliminar de la colecci\u00f3n")}),b[3]=a,b[4]=i):i=b[4];b[5]===Symbol["for"]("react.memo_cache_sentinel")?(a=h._(/*BTDS*/"Suprimir"),b[5]=a):a=b[5];b[6]!==e?(a=j.jsx(d("IGCoreDialog.react").IGCoreDialogItem,{color:d("PolarisUA").isDesktop()?"ig-error-or-destructive":"ig-primary-button",onClick:e,children:a}),b[6]=e,b[7]=a):a=b[7];b[8]!==c?(e=j.jsx(d("IGCoreDialog.react").IGCoreDialogItem,{onClick:c,children:d("PolarisGenericStrings").CANCEL_TEXT}),b[8]=c,b[9]=e):e=b[9];b[10]!==c||b[11]!==f||b[12]!==i||b[13]!==a||b[14]!==e?(g=j.jsxs(d("IGCoreDialog.react").IGCoreDialog,{body:f,onModalClose:c,title:g,children:[i,a,e]}),b[10]=c,b[11]=f,b[12]=i,b[13]=a,b[14]=e,b[15]=g):g=b[15];return g}g["default"]=a}),226);
__d("polarisPostModalHelpers",["fbt","FBLogger","justknobx","vulture"],(function(a,b,c,d,e,f,g,h){"use strict";var i=1032,j=55,k=500,l=250,m=h._(/*BTDS*/"Anterior");h=h._(/*BTDS*/"Siguiente");var n=-1,o=1;function a(a){var b="";switch(a){case"profilePage":case"selfProfilePage":c("vulture")("7xKd-ywdlniDhYIJ7kZFfkka0Zk=");b="profilePageModal";break;case"locationPage":c("vulture")("U5V9d8WhbUrjazdHuMcvsSnUvv4=");b="locationPageModal";break;case"exploreLandingPage":c("vulture")("ZJPgDSafaRHANNWgzGeqfe4PmEM=");b="discoverMediaPageModal";break;case"DirectThreadPage":c("vulture")("YiR6B1b6l2hE73GxaHxNI3_riGI=");b="directThreadPageModal";break;case"ClipsAudioPage":c("vulture")("JSlV7w0h8HRNwTOtzc_ZIAaKpx8=");b="clipsAudioPageModal";break;case"feedPage":case"pastPostsFeedPage":case"followingFeedPage":case"favoritesFeedPage":c("vulture")("yvtaInnXzC5Cy3_iKzs-ipfyaW8=");b="feedPageModal";break;case"KeywordSearchExplorePage":c("vulture")("QwnhNgGzzuZy8zm1a-REvFJsI2s=");b="keywordSearchExplorePageModal";break;case"adsActivityFeed":c("vulture")("ffZkBqw2cGlao5s8XEe1u1x7yM8=");b="adActivityFeedModal";break;case"ExploreSERPPage":c("vulture")("ozn07wewnSY-kWidXVdFNfubl7g=");b="ExploreSERPPageModal";break;default:c("vulture")("DzdYpKLrrFT8gpJFIAs1vtakphY="),c("FBLogger")("ig_web").mustfix("Unexpected analytics context: "+a)}return b}function b(a){a=a.match(new RegExp("^(.+/)(saved)/(.+)/(.+)/"));return a!=null?a[4]:null}function d(a){return!!a.match(new RegExp("/p/"))}function e(a){a=a.match(new RegExp("/([^/]+)/[^/]*$"));return a?a[1]:null}function p(a,b,c,d){if(a.height>a.width){var e=c/a.height;d.style.maxHeight=c;d.style.maxWidth=a.width*e;d.style.aspectRatio=a.width+" / "+a.height}else b&&(d.style.aspectRatio="1"),d.style.maxHeight=c,d.style.maxWidth=c;return d}function q(a,b,c,d){c.style.maxWidth=b;b=b/a.width;c.style.maxHeight=a.height*b+d;c.style.aspectRatio=a.width*b+" / "+(a.height*b+d);return c}function f(a){var b=a.dimensions,d=a.footerHeight;d=d===void 0?j:d;var e=a.viewportHeight,f=a.viewportWidth,g=a.hasSidebarInRedesign;a=a.hasFooter;a=a===void 0?!1:a;if(b==null||e===0||f===0)return null;var h={style:{maxHeight:0,maxWidth:0}},m=f-64*2-(g?k:0);if(b){var n=e>f&&a===!0?m:g?e-24*2:e-24*2-l;n>i&&c("justknobx")._("64")&&(n=i);if(a===!1)h=p(b,g,n,h);else{a=b.height;a=(n-d)/a;h.style.maxHeight=n;!g?h=q(b,n,h,d):b.height>=b.width?e>f?h=q(b,n,h,d):b.width*a>m?h=q(b,m,h,d):(h.style.maxHeight=n,h.style.aspectRatio=b.width*a+" / "+(b.height*a+d),h.style.maxWidth=b.width*a):(h.style.aspectRatio=b.width*a>b.height*a+d?"1":b.width*a+" / "+(b.height*a+d),h.style.maxWidth=e>f?n:b.width*a>b.height*a+d?n:b.width*a)}g&&(h.style.flexBasis=h.style.maxWidth)}return h}g.PREVIOUS_ARROW_TITLE=m;g.NEXT_ARROW_TITLE=h;g.LEFT_DELTA=n;g.RIGHT_DELTA=o;g.getModalPageIdFromAnalyticsContext=a;g.getCollectionIdFromPath=b;g.isPostUrl=d;g.getPostCodeFromPath=e;g.getMediaContainerProps=f}),226);
__d("PolarisPost.react",["cx","CometErrorBoundary.react","IGDSBox.react","PolarisContainerModuleUtils","PolarisHeroPageletLogger","PolarisHotKeys.react","PolarisIGCoreConstants","PolarisIGTheme.react","PolarisInsightsUtils","PolarisInteractionsLogger","PolarisMediaContainer.react","PolarisOrganicImpressionAction","PolarisPanavisionQEHelpers","PolarisPostActionLikePost","PolarisPostActionRemovePostFromCollection","PolarisPostActionSavePost","PolarisPostActionUnlikePost","PolarisPostActionUnsavePost","PolarisPostCoauthorReviewOverlayFooterCTA.react","PolarisPostConstants","PolarisPostDetailsSection.react","PolarisPostFeatures.react","PolarisPostHeader.react","PolarisPostHeaderFavoritedIconButton.react","PolarisPostInvitedCoauthorsOverlayFooterCTA.react","PolarisPostModalContext.react","PolarisPostModalRenderingContext.react","PolarisPostOptionsButtonPicker.react","PolarisPostOverlayInfoFooterCTA.react","PolarisPostPageRouteReferrerContext.react","PolarisPostSuggestedHeader.react","PolarisPostToast.react","PolarisPostToastProvider.react","PolarisPostUtils","PolarisPostVariants","PolarisReactRedux.react","PolarisSavedPostsActionEditCollection","PolarisSavedPostsTypes","PolarisSponsoredPostCTAFooter.react","PolarisTrackingNodeProvider.react","PolarisUA","PolarisUnsaveFromCollectionDialog.react","PolarisViewpointActionUtils","PolarisViewpointReact.react","PolarisVpvdImpressionAction","browserHistory_DO_NOT_USE","hero-tracing","joinClasses","nullthrows","polarisAdsSelectors.react","polarisDeveloperSettings","polarisLogAction","polarisPostModalHelpers","polarisPostSelectors","polarisRelationshipSelectors.react","polarisUserSelectors","polarisWithPPRLogging","react","react-compiler-runtime","useMergeRefs","usePolarisDisplayProperties","usePolarisIsOnFeedPage","usePolarisPostSetURLSidecarIndex","usePolarisShowFooterCTA","usePolarisViewer","usePrevious"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));e=i;var k=e.useContext,l=e.useEffect,m=e.useRef,n=e.useState;function a(a){var b=a.adImpressionRefs,e=a.analyticsContext,f=a.autoplay,g=a.className,h=a.communityNoteComponent,i=h===void 0?null:h,o=a.enableTruncation,p=a.id;a.imageMediaActsAsCta;h=a.initialCarouselIndex;var q=a.initialCommentsQuery,r=a.isSponsored;r=r===void 0?!1:r;var aa=a.isVisible,ba=a.lightLetterbox,ca=a.onMediaRendered,da=a.permalinkedCommentId,ea=a.permalinkedReplyId,s=a.position,fa=a.shortcode,ga=a.shouldIncreaseCommentPreviews,t=a.testid;t=t===void 0?"post":t;t=a.variant;var u=t===void 0?d("PolarisPostVariants").VARIANTS.flexible:t;t=a.viewpointActionsForSponsoredPost;var ha=a.visiblePosition,ia=a.willScrollTo,v=d("PolarisReactRedux.react").useDispatch(),w=d("PolarisReactRedux.react").useSelector(function(a){return d("polarisPostSelectors").getPostById(a,p)}),x=c("nullthrows")(w.owner).id;a=(a=w.group)==null?void 0:a.id;var ja=a!=null?a:x;a=k(c("PolarisPostPageRouteReferrerContext.react"));a=a.referrerTracePolicy;var y=w.invitedCoauthorProducers,ka=d("PolarisReactRedux.react").useSelector(function(a){return d("polarisUserSelectors").getUserByIdOrThrows(a,x)}),z=d("PolarisReactRedux.react").useSelector(function(a){return d("polarisUserSelectors").getUserByIdOrThrows(a,ja)}),la=d("PolarisReactRedux.react").useSelector(function(a){return d("polarisRelationshipSelectors.react").getRelationship(a.relationships,ja)}),A=c("usePolarisViewer")(),B=!!(A==null?void 0:A.canSeeOrganicInsights),C=!!w.canSeeInsightsAsBrand,D=d("polarisAdsSelectors.react").useFeedAdInfo(w==null?void 0:w.id,function(a){return a}),E=c("usePolarisDisplayProperties")(),ma=E.viewportHeight;E=E.viewportWidth;var F=d("PolarisPostModalRenderingContext.react").usePolarisPostModalRenderingContext(),G=F.isInModal,H=(F=h!=null?h:d("PolarisPostUtils").getInitialSidecarIndexFromPost(w))!=null?F:0;w.isSidecar===!0&&(H<0||w.sidecarChildren!=null&&H>=w.sidecarChildren.length)&&(H=0);h=n(H);var I=h[0],na=h[1];F=n({});var J=F[0],oa=F[1];h=n(!1);F=h[0];var pa=h[1];h=n({});var K=h[0],qa=h[1];h=n(!1);var ra=h[0],L=h[1];h=n(!1);var sa=h[0],ta=h[1];h=n(null);var ua=h[0],va=h[1];h=m(null);var wa=c("usePolarisPostSetURLSidecarIndex")();l(function(){ia==="top"&&window.setTimeout(function(){window.scrollTo(0,0)})},[ia]);var M=c("usePrevious")(w);l(function(){M!=null&&w.id!==M.id&&(oa({}),qa({}))},[w,M]);l(function(){fa!=null&&w.isSidecar===!0&&wa(I+1)},[I,w.isSidecar,wa,fa]);var xa=function(a){pa(!0),ca!=null&&ca(w.id,a)},ya=function(a){na(a)},N=function(a,b){var c;c={containerModule:d("PolarisContainerModuleUtils").getContainerModule(e),inventorySource:w.inventorySource,mediaAuthorId:(c=w.owner)==null?void 0:c.id,mediaId:w.id,rankingInfoToken:w.loggingInfoToken,source:e,sourceOfLike:b,trackingToken:w.trackingToken};b=null;(D==null?void 0:D.ad_id)!=null&&(D==null?void 0:D.tracking_token)!=null&&Y!=null&&(b={adId:D==null?void 0:D.ad_id,adTrackingToken:D==null?void 0:D.tracking_token,viewerId:Y});a?w.likedByViewer!==!0&&v(d("PolarisPostActionLikePost").likePost(w.id,c,b)):v(d("PolarisPostActionUnlikePost").unlikePost(w.id,c,b))},za=function(){N(!0,"double_tap_media")},Aa=function(a){var b={source:e},f=null;if((D==null?void 0:D.ad_id)!=null&&(D==null?void 0:D.tracking_token)!=null&&Y!=null){var g;f={adId:D==null?void 0:D.ad_id,adTrackingToken:D==null?void 0:D.tracking_token,analyticsContext:e,followStatus:d("PolarisViewpointActionUtils").getFollowStatus(la),mediaPk:d("PolarisViewpointActionUtils").getMPKForFeedMedia(w),mediaType:d("PolarisInteractionsLogger").getMediaTypeFromPost(w),ownerId:(g=w.owner)==null?void 0:g.id,viewerId:Y}}a?w.savedByViewer!==!0&&v(d("PolarisPostActionSavePost").savePost(w.id,b,f)):w.savedByViewer===!0&&(w.savedByViewerToCollection===!0?(c("polarisLogAction")("removeSavedItemFromCollectionDialogShown"),L(!0)):v(d("PolarisPostActionUnsavePost").unsavePost(w.id,b,f)))},Ba=function(){c("polarisLogAction")("removeSavedItemFromCollectionDialogCancelled"),L(!1)},Ca=function(){L(!1),v(d("PolarisPostActionUnsavePost").unsavePost(w.id,{source:e})),c("polarisLogAction")("removeSavedItemFromCollectionDialogAccepted")},Da=function(){var a={source:e};L(!1);var b=d("browserHistory_DO_NOT_USE").browserHistory.location.pathname;b=d("polarisPostModalHelpers").getCollectionIdFromPath(b);b!=null&&A!=null&&(v(d("PolarisPostActionRemovePostFromCollection").removePostFromCollection({collectionId:b,postId:w.id})),v(d("PolarisSavedPostsActionEditCollection").editCollection({collectionId:b,postIdsToRemove:[w.id],source:a.source,userId:c("nullthrows")(A==null?void 0:A.id)})))},Ea=function(a){Ga(a)&&Ia(a.id)},Fa=function(a){Ja(a)},Ga=function(a){return J[a.id]===!0},Ha=function(a){return K[a]===!0},Ia=function(a){var b=babelHelpers["extends"]({},J);b[a]=!0;oa(b)},Ja=function(a){var b=babelHelpers["extends"]({},K);b[a]=!0;qa(b)},O=function(a){ta(!0),va(a)},Ka=function(){ta(!1)},P=d("browserHistory_DO_NOT_USE").browserHistory.location.pathname,Q=d("PolarisPostFeatures.react").usePolarisPostFeatures({owner:z,path:P,post:w,variant:u}),R=Q.commentsAreStacked,La=Q.hasPhotosOfYouOption,Ma=Q.hasThreadedSidebarComments,S=Q.isFavorited,Na=Q.isSidecar,Oa=Q.isStackedScreenSize;Q=Q.showFollowButton;P=d("polarisPostModalHelpers").getCollectionIdFromPath(P);var Pa=P!=null&&P!==d("PolarisSavedPostsTypes").SAVED_COLLECTION_TYPE.ALL_MEDIA_AUTO_COLLECTION;P=!!Q&&(!w.coauthorProducers||w.coauthorProducers.length===0)&&!r;var T=E>=d("PolarisPostConstants").SIDEBAR_VARIANT_CUTOFF,Qa=T&&G===!0,U=!T&&G===!0,Ra=G===!0?T:!R;Q=c("usePolarisIsOnFeedPage")();var V=e==="adsActivityFeed",W=(Q||V)&&G!==!0&&d("PolarisUA").isDesktop(),X=(Q||V)&&G!==!0&&d("PolarisUA").isDesktop(),Sa=d("PolarisPostUtils").getCurrentSidecarItemFromPost(w,I);V=d("PolarisIGTheme.react").useTheme().getTheme()===d("PolarisIGTheme.react").IGTheme.Dark;var Ta=j.jsxs("div",{className:"_aasi"+(W?" _aasj":"")+(U?" _aask":"")+(X?" _ai9a":"")+(V?" _at8n":""),children:[w.inventorySource==="mixed_unconnected"&&Q&&!G&&j.jsx(c("PolarisPostSuggestedHeader.react"),{postId:w.id,rankingInfoToken:w.loggingInfoToken,title:(V=w.explore)==null?void 0:V.title}),j.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",display:"flex",justifyContent:"between",position:"relative",children:[j.jsx(c("PolarisPostHeader.react"),{adTitle:D==null?void 0:D.ad_title,analyticsContext:e,clipsAttributionInfo:w.clipsAttributionInfo,clipsAudioAttributionInfo:w.clipsMusicAttributionInfo,coauthorProducers:w.coauthorProducers,displayFBPageName:D==null?void 0:D.display_fb_page_name,followHashtagInfo:w.followHashtagInfo,headerAvatarSize:c("PolarisIGCoreConstants").AVATAR_SIZES.small,inModal:G,isAffiliate:w.isAffiliate===!0,isPaidPartnership:w.isPaidPartnership===!0,isSharedToCloseFriends:w.audience==="MediaAudience.BESTIES",isSponsored:w.isSponsored===!0,location:w.location,mediaId:w.id,mediaProductType:w.productType,onDisabledClipsAudioAttributionClick:O,owner:z,postedAt:w.postedAt,shouldEllipsisText:!0,shouldShowFollowButton:P,showVerifiedBadge:!0,sidebarVariantOptionsButton:Ma,sponsoredLabel:D==null?void 0:D.label,sponsors:w.sponsors,transparencyLabelOwner:w.owner,wearablesAttributionInfo:w.wearableAttributionInfo},w.id),j.jsx(c("PolarisPostHeaderFavoritedIconButton.react"),{isFavorited:S}),j.jsx(c("PolarisPostOptionsButtonPicker.react"),{buttonClassName:"_aasm"+(W||d("PolarisPanavisionQEHelpers").hasDenserMobileWebFeed()?" _aasn":"")+(X?" _agh1":""),mediaPK:w.id})]})]});Q=d("PolarisInsightsUtils").getViewInsightsInfo(A,x,w,C,B);var Ua=Q.bloksAppId,Va=Q.hasViewInsights,Y=A==null?void 0:A.id;V=r&&t!=null?t:[d("PolarisOrganicImpressionAction").makePostImpressionAction(w,e,a,s),d("PolarisVpvdImpressionAction").makePostVpvdImpressionAction(w,e)];O=d("PolarisViewpointReact.react").useViewpoint({action:V,id:"viewpoint"+w.id});P=[O].concat(b!=null?b:[]);var Wa=c("useMergeRefs").apply(void 0,P),Xa=A?{l:function(){N(!w.likedByViewer,"button")},s:function(){Aa(!w.savedByViewer)}}:{};S=c("usePolarisShowFooterCTA")(w,I,J,r);var Z=null;r?Z=j.jsx(c("PolarisSponsoredPostCTAFooter.react"),{isMediaRendered:F,post:w,sidecarIndex:I}):S||!G?Z=j.jsx(d("PolarisPostOverlayInfoFooterCTA.react").PolarisPostOverlayInfoFooterCTA,{analyticsContext:e,currentSidecarIndex:I,dynamicFooterRef:h,idsWithClearedBlurOverlays:J,idsWithDisabledMediaOverlayInfoImpressionLogging:K,onLogOverlayImpression:function(a){return Fa(a)},rootPost:w}):y!=null&&y.length>0&&(Z=j.jsxs("div",{children:[j.jsx(c("PolarisPostCoauthorReviewOverlayFooterCTA.react"),{invitedCoauthorProducers:y,mediaId:w.id,mediaShortcode:w.code,productType:w.productType,user:w.owner}),j.jsx(c("PolarisPostInvitedCoauthorsOverlayFooterCTA.react"),{invitedCoauthorProducers:y,mediaId:w.id,user:w.owner})]}));C=Z!=null;var $=d("polarisPostModalHelpers").getMediaContainerProps({dimensions:w.dimensions,footerHeight:C?(B=h.current)==null?void 0:B.offsetHeight:void 0,hasFooter:C,hasSidebarInRedesign:T,viewportHeight:ma,viewportWidth:E}),Ya=!1,Za={border:w.isSeen===!0?"2px solid green":"2px solid red"};return j.jsx(d("PolarisPostToastProvider.react").PostToastProvider,{children:function(a){return j.jsx(d("PolarisPostModalContext.react").PostModalContext,{post:w,children:j.jsx(d("hero-tracing").HeroPagelet,{name:d("PolarisHeroPageletLogger").getHeroPageletLogName(d("PolarisHeroPageletLogger").PageletLogName.POST,s),ref:Wa,children:function(b,h){return j.jsx(c("PolarisHotKeys.react"),{keyMap:Xa,children:function(k,l,m){return j.jsx(c("PolarisTrackingNodeProvider.react"),{ref:b,trackingNode:301,children:function(b){return j.jsxs("article",{className:c("joinClasses")(g,"_aatb"+(u===d("PolarisPostVariants").VARIANTS.feed?" _aatc":"")+(Oa?" _aatd":"")+(Oa?"":" _aate")+(R?" _aatf":"")+(Ra?" _aatg":"")+(Na?" _aath":"")+(Ma?" _aati":"")+(Va?" _aatj":"")),"data-testid":void 0,onKeyUp:k,ref:b,role:l,style:Ya?Za:{},tabIndex:m,children:[j.jsxs(c("IGDSBox.react"),{alignSelf:U?"center":void 0,direction:(G===!0?T:!R)?"row":"column",display:"flex",justifyContent:"center",maxHeight:"inherit",maxWidth:U&&($==null?void 0:$.style)!=null?$.style.maxWidth:"inherit",position:"relative",children:[(G===!0?!T:R)?Ta:null,j.jsx("div",babelHelpers["extends"]({},G===!0?$:{},{className:"_aatk"+(G===!0?" _aatl":"")+(Qa&&w.dimensions!=null&&w.dimensions.width>=w.dimensions.height?" _aatm":"")+(ba===!0?" _aatn":"")+(X?" _aiao":""),children:j.jsx(c("PolarisMediaContainer.react"),{accessibilityCaption:w.accessibilityCaption,adInfo:D,analyticsContext:e,autoplay:f,checkIsSensitivityOverlayDisabledCallback:function(a){return Ga(a)},className:"_aato",commentsAreStacked:R,hasPhotosOfYouOption:La,hasViewInsights:Va,id:w.id,initialCarouselIndex:H,inModal:G,isVisible:aa,mediaFooter:Z,onLike:A?za:null,onPostMediaRendered:xa,onPostSidecarChildIndexChange:ya,onSensitivityOverlayCleared:Ea,onToastClose:Ka,position:s,post:w,relationship:la,sensitivityOverlayMediaOverlayInfoLoggingProps:{checkIfMediaOverlayInfoImpressionLoggingDisabled:function(a){return Ha(a)},onLoggedMediaOverlayInfoImpression:function(a){return Fa(a)}},showToast:sa,toastString:ua,viewer:A,visiblePosition:ha})})),j.jsx(c("PolarisPostDetailsSection.react"),{analyticsContext:e,bloksAppId:Ua,communityNoteComponent:i,currSidecarIndex:I,currSidecarItem:Sa,enableTruncation:o,handleLikeChange:N,handleSaveChange:Aa,hasDenserFeedRedesign:W,hasSidebarInRedesign:T,hasViewInsights:Va,initialCommentsQuery:q,owner:z,permalinkedCommentId:da,permalinkedReplyId:ea,post:w,postAuthorId:x,postAuthorUsername:ka==null?void 0:ka.username,postFeedbackControlsRef:a,postHeader:Ta,redesignWithoutSidebar:U,redesignWithSidebar:Qa,shouldIncreaseCommentPreviews:ga,showDetailsAsSidebar:Ra,variant:u,viewer:A}),ra&&j.jsx(c("PolarisUnsaveFromCollectionDialog.react"),{onClose:Ba,onUnsaveFromAll:Ca,onUnsaveFromCollection:Pa&&d("PolarisUA").isDesktop()?Da:null}),j.jsx(c("PolarisPostToast.react"),{isFeedVariant:u===d("PolarisPostVariants").VARIANTS.feed,isModal:G!=null?G:!1})]}),j.jsx(h,{})]})}})}})}})},w.id)}})}a.displayName=a.name+" [from "+f.id+"]";var o=c("polarisWithPPRLogging")(a);function p(){c("polarisLogAction")("feedUnitFailure",{source:"PolarisPost"})}function b(a){var b=d("react-compiler-runtime").c(2),e;b[0]!==a?(e=j.jsx(c("CometErrorBoundary.react"),{fallback:q,onError:p,children:j.jsx(o,babelHelpers["extends"]({},a))}),b[0]=a,b[1]=e):e=b[1];return e}function q(a){return null}g["default"]=b}),98);/*FB_PKG_DELIM*/
__d("ArmadilloDataTraceCheckPoint",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;a=(h||(h=d("I64"))).of_string("63");b=h.of_string("65");c=h.of_string("98");e=h.of_string("504");f=h.of_string("1000");d=h.of_string("1001");var i=h.of_string("1204"),j=h.of_string("1210"),k=h.of_string("1224"),l=h.of_string("1234"),m=h.of_string("1225"),n=h.of_string("2220");g.traceGroupMessage=a;g.armadilloActMessageSend=b;g.traceCreated=c;g.richMediaMediaSendAttachmentType=e;g.traceTextMessage=f;g.traceMediaMessage=d;g.advancedCryptoMEMSendTaskComplete=i;g.deliveryReceiptReceived=j;g.advancedCryptoMEMEncryptionDeviceCount=k;g.advancedCryptoGroupDualSend=l;g.advancedCryptoDualSend=m;g.armadilloTlcControlOpenThread=n}),98);
__d("DedupMiThreadCreationCache",["justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h=new Set();a=function(a){var b=c("justknobx")._("4749");b&&h.add(a)};g.DedupMiThreadCreationCache=h;g.addToDedupMiThreadCreationCache=a}),98);
__d("EBMainThreadListeners",["EBReenrollmentTriggerListener","LSDatabaseSingleton","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield (h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton);d("EBReenrollmentTriggerListener").initEBReenrollmentTriggerListener(a)});return i.apply(this,arguments)}g.initEBListeners=a}),98);
__d("LSSetIGE2EEEligibility",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.filter(c.db.table(176).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.contactId,a[0])&&c.i64.eq(b.e2eeEligibility,a[1])}).next().then(function(e,f){f=e.done;e=e.value;return f?(d[1]=new c.Map(),d[1].set("contact_id",a[0]),d[1].set("new_eligibility",a[1]),d[2]=c.toJSON(d[1]),c.storedProcedure(b("LSIssueNewTask"),"ig_set_e2ee_eligibility",c.i64.cast([0,60001]),d[2],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))):(e.item,0)})},function(a){return c.resolve(e)}])}a.__sproc_name__="LSContactSetIGE2EEEligibilityStoredProcedure";a.__tables__=["ig_contact_info"];e.exports=a}),null);
__d("LSSetIGE2EEEligibilityStoredProcedure",["LSSetIGE2EEEligibility","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSSetIGE2EEEligibility"),e.id,e.e2eeEligibility);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("IGDSetIGE2EEEligibility",["I64","LSDatabaseSingleton","LSFactory","LSInstagramE2EEEligibility","LSIntEnum","LSSetIGE2EEEligibilityStoredProcedure","MAWCurrentUser","asyncToGeneratorRuntime","justknobx","promiseDone","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(h||d("react")).useEffect;function m(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=(yield (i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton);return e.runInTransaction(function(e){return c("LSSetIGE2EEEligibilityStoredProcedure")(c("LSFactory")(e),{e2eeEligibility:(j||(j=d("LSIntEnum"))).ofNumber(b),id:(k||(k=d("I64"))).of_string(a)})},"readwrite",void 0,void 0,f.id+":31")});return n.apply(this,arguments)}function a(){var a=d("react-compiler-runtime").c(1),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=[],a[0]=b):b=a[0];l(o,b)}function o(){if(c("justknobx")._("2058"))return;var a=d("MAWCurrentUser").getID();c("promiseDone")(m(a,c("LSInstagramE2EEEligibility").ELIGIBLE))}g.useUpsertSetIGE2EEEligibilityOnMount=a}),98);
__d("LSPlatformGraphQLLightspeedRequestQuery.graphql",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"deviceId"},{defaultValue:null,kind:"LocalArgument",name:"requestId"},{defaultValue:null,kind:"LocalArgument",name:"requestPayload"},{defaultValue:null,kind:"LocalArgument",name:"requestType"}],b=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"device_id",variableName:"deviceId"},{kind:"Variable",name:"request_id",variableName:"requestId"},{kind:"Variable",name:"request_payload",variableName:"requestPayload"},{kind:"Variable",name:"request_type",variableName:"requestType"}],concreteType:"LightspeedWebResponse",kind:"LinkedField",name:"lightspeed_web_request",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"payload",storageKey:null},{alias:null,args:null,concreteType:"LightspeedWebRequestDependency",kind:"LinkedField",name:"dependencies",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"experiments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"target",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"LSPlatformGraphQLLightspeedRequestQuery",selections:b,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"LSPlatformGraphQLLightspeedRequestQuery",selections:b},params:{id:"8996647210435532",metadata:{},name:"LSPlatformGraphQLLightspeedRequestQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("LSPlatformGraphQLLightspeedRequestQuery",["LSPlatformGraphQLLightspeedRequestQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h!==void 0?h:h=b("LSPlatformGraphQLLightspeedRequestQuery.graphql");g.query=a}),98);
__d("LSPlatformGraphQLLightspeedRequest",["CometRelay","LSPlatformGraphQLLightspeedRequestQuery","XPlatRelayEnvironment"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e){return d("CometRelay").fetchQuery(d("XPlatRelayEnvironment").getRelayEnvironment(),d("LSPlatformGraphQLLightspeedRequestQuery").query,{deviceId:a,requestId:b,requestPayload:c,requestType:e}).toPromise().then(function(a){a=a==null?void 0:(a=a.viewer)==null?void 0:a.lightspeed_web_request;if(a!=null)return babelHelpers["extends"]({dependencies:void 0},a)})}g["default"]=a}),98);
__d("MAWAbPropsClient",["WAAbPropsToUI"],(function(a,b,c,d,e,f,g){"use strict";var h={contents:d("WAAbPropsToUI").prepareAbPropsForUI()};function a(a){h.contents=a}function b(){return h.contents}g.rewrite=a;g.getAbProps=b}),98);
__d("WAChatState",[],(function(a,b,c,d,e,f){"use strict";a="typing";b="recording_audio";c="idle";d={TYPING:a,RECORDING_AUDIO:b};e={IDLE:c};f.TYPING=a;f.RECORDING_AUDIO=b;f.IDLE=c;f.ACTIVE_CHAT_STATE_TYPE=d;f.IDLE_CHAT_STATE_TYPE=e}),66);
__d("MAWBridgeReceivedChatStateHandler",["I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","Promise","ServerTime","WAChatState","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,e){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,e.threadJid,"MAWBridgeReceivedChatStateHandler",function(a,f){var g=(i||(i=d("I64"))).of_string(e.senderId),j=i.of_float(3e3+d("ServerTime").getMillis());if(e.state===d("WAChatState").TYPING)return a.typing_indicator.upsert([f,g],{expirationTimestampMs:j,senderId:g,threadKey:f}).then(c("emptyFunction"));else if(e.state===d("WAChatState").IDLE)return a.typing_indicator["delete"](f,g).then(c("emptyFunction"));else return(h||(h=b("Promise"))).resolve()})}g.call=a}),98);
__d("MAWFTSRawStringMatcher",["JSResourceForInteraction","asyncToGeneratorRuntime","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h=c("JSResourceForInteraction")("WAFtsMultiLangTokenizer").__setRef("MAWFTSRawStringMatcher"),i=null;function a(){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){i=(yield h.load());return l});return j.apply(this,arguments)}function k(a){return new(c("nullthrows")(i))().tokenize(a)}function l(a,b){a=Array.from(k(a)).filter(function(a){return a.length>1});if(a.length===0)return!1;var c=Array.from(k(b));return a.every(function(a){return c.some(function(b){return b.startsWith(a)})})}g.load=a}),98);
__d("LSThreadPointQueryAndRestoreMessagesWithGroupJID",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("wa_jid",a[0]),d[0].set("tam_thread_subtype",c.i64.cast([0,0])),d[1]=d[0].get("wa_jid"),d[2]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[1]),c.i64.cast([0,1021]),d[2],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxThreadPointQueryAndRestoreMessagesWithGroupJIDStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSThreadPointQueryAndRestoreMessagesWithGroupJIDStoredProcedure",["LSSynchronousPromise","LSThreadPointQueryAndRestoreMessagesWithGroupJID","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSThreadPointQueryAndRestoreMessagesWithGroupJID"),e.waJid);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("waitForMiActMappingForUniversalSearch",["FBLogger","I64","LSAuthorityLevel","LSFactory","LSThreadPointQueryAndRestoreMessagesWithGroupJIDStoredProcedure","LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure","MAWCurrentUser","MAWJids","Promise","ReQL","WAJids","asyncToGeneratorRuntime","emptyFunction","err","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=3e4,k=3e4;function l(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("ReQL").toArrayAsync(a));return a.some(function(a){return a==null||(i||(i=d("I64"))).lt(a.authorityLevel,(i||(i=d("I64"))).of_int32(c("LSAuthorityLevel").AUTHORITATIVE))})===!1});return m.apply(this,arguments)}function n(a,b,c,d){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){f===void 0&&(f=c("emptyFunction"));g===void 0&&(g=c("emptyFunction"));var h=(i||(i=d("I64"))).of_string(d("MAWCurrentUser").getID()),j=d("ReQL").leftJoin(d("ReQL").fromTableAscending(a.tables.participants,["contactId"]).getKeyRange(e.serverThreadKey).filter(function(a){return!(i||(i=d("I64"))).equal(a.contactId,h)}),d("ReQL").fromTableAscending(a.tables.contacts)).map(function(a){a[0];a=a[1];return a}),m=null,n={contents:function(){}};function o(){f(e),n.contents()}if(yield l(j))return o();n.contents=j.subscribe(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(b.operation==="delete")return;m!=null&&window.clearTimeout(m);if(yield l(j))return o()});return function(b,c){return a.apply(this,arguments)}}());m=window.setTimeout(function(){n.contents(),g(c("err")("Contacts timed out"))},k)});return o.apply(this,arguments)}function a(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var g=d("MAWJids").convertChatJidToIntJid(e),i=d("WAJids").interpretAsGroupJid(e)!=null,k=d("ReQL").fromTableAscending(a.tables.mi_act_mapping_table.index("jid")).getKeyRange(g);e=(yield d("ReQL").firstAsync(k));if(e!=null){yield n(a,e);return(h||(h=b("Promise"))).resolve(e)}var l=null,m=new(h||(h=b("Promise")))(function(d,e){var f={contents:function(){}};function g(a){f.contents(),d(a)}function h(a){f.contents(),e(a)}f.contents=k.subscribe(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,c){if(c.operation==="delete")return;l!=null&&window.clearTimeout(l);yield n(a,c.value,g,h)});return function(a,b){return c.apply(this,arguments)}}());l=window.setTimeout(function(){h(c("err")("MiActMapping timed out"))},j)});c("promiseDone")(a.runInTransaction(function(a){return i?c("LSThreadPointQueryAndRestoreMessagesWithGroupJIDStoredProcedure")(c("LSFactory")(a),{waJid:g}):c("LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure")(c("LSFactory")(a),{waJid:g})},"readwrite",void 0,void 0,f.id+":149"));try{e=(yield m)}catch(a){c("FBLogger")("messenger_web").warn("[FTS] Issue waiting for mi_act_mapping to be ready",a)}return e});return p.apply(this,arguments)}g["default"]=a}),98);
__d("MAWBridgeAddMessageSearchResultHandler",["I64","LSIntEnum","LSMessageSearchType","MAWCurrentUser","MAWFTSRawStringMatcher","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","Promise","ReQL","asyncToGeneratorRuntime","cr:17064","cr:17065","emptyFunction","gkx","isMAWUniversalSearchWithEBEnabled","promiseDone","waitForMiActMappingForUniversalSearch"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE),l=j.ofNumber(c("LSMessageSearchType").THREAD);function a(a,d,e){return e.length===0?(h||(h=b("Promise"))).resolve():(h||(h=b("Promise"))).all([o(a,d,e),q(a,d,e)]).then(c("emptyFunction"))}function m(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield d("MAWFTSRawStringMatcher").load());return b.filter(function(b){b=(b=b.msg)==null?void 0:b.content;return b==null?!1:c(a,b)})});return n.apply(this,arguments)}function o(a,b,c){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){var g=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(e.message_search_queries).getKeyRange(k)));if(g.length===0)return;return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(e,f[0].chatJid,"MAWBridgeAddMessageSearchResultHandler",function(e,h){return b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var c=g.filter(function(a){return(i||(i=d("I64"))).equal(a.threadKeyV2,h)})[0];if(c==null)return;var j=c.query;if(j==null||j.length<2)return;var k=(i||(i=d("I64"))).to_int32(c.resultCount);j=(yield m(j,f));if(j.length===0)return;yield b("cr:17064").addBridgeSearchMsgsToSearchResult(a,e,c.query,j,k+j.length,i.of_string(d("MAWCurrentUser").getID()))})().then(c("emptyFunction"))})});return p.apply(this,arguments)}function q(a,b,c){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){if(!c("isMAWUniversalSearchWithEBEnabled")())return;var g=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.message_search_queries).getKeyRange(l).filter(function(a){return(i||(i=d("I64"))).equal(a.threadKeyV2,i.one)})));if(g==null)return;var h=g.query;if(h==null||h.length<2)return;var j=(yield m(h,f));if(j.length===0)return;if(c("gkx")("11537"))c("promiseDone")(c("waitForMiActMappingForUniversalSearch")(a,f[0].chatJid),function(c){if(c!=null)return b("cr:17065")(a,void 0,c.serverThreadKey,h,j,g)});else{yield c("waitForMiActMappingForUniversalSearch")(a,f[0].chatJid);return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(e,f[0].chatJid,"MAWBridgeAddMessageSearchResultHandler",function(c,d){return b("cr:17065")(a,c,d,h,j,g)})}});return r.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeCallRestoreNativeOpHandler",["I64","Promise","WAJids","WALogger","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Unable to call restore native op - echo and protobuf messages are both null"]);j=function(){return a};return a}var k=c("requireDeferred")("LSProtobufRestoreHandler").__setRef("MAWBridgeCallRestoreNativeOpHandler"),l=c("requireDeferred")("LSRestoreEchoBlobs.nop").__setRef("MAWBridgeCallRestoreNativeOpHandler");function a(a,c){var e=c.chatJid,f=c.decryptedMessagesProtobufs,g=c.echoMessages,m=c.hasMoreAfter,n=c.hasMoreBefore,o=c.isPointQuery,p=c.nextMessageTimestampMsAfter,q=c.nextMessageTimestampMsBefore,r=c.referenceTimestamp,s=c.requestId,t=c.taskSource;if(f!=null)return k.load().then(function(a){return a.handleProtobufRestoreHelper(d("WAJids").threadIdForChatJid(e),{convertedProtobufs:f,type:"convertedProtobufs"},n,q,m,p,o,s,r,void 0,void 0,t,e)});else if(g!=null)return l.load().then(function(c){return c(a,0,(i||(i=d("I64"))).zero,g,n,q,m,p,o,d("WAJids").threadIdForChatJid(e),s,r,t,e).then(function(){return(h||(h=b("Promise"))).resolve()})});else d("WALogger").ERROR(j());return(h||(h=b("Promise"))).resolve()}g.call=a}),98);
__d("LSBumpE2EEMetadataThread",["LSCancelTaskByQueueName","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("bump_timestamp_ms",a[1]),d[0].set("thread_key",a[0]),d[0].set("bumped_by_local_device_send",a[2]),d[0].set("tam_thread_subtype",c.i64.cast([0,0])),d[0].set("wa_jid",void 0),d[0].set("message_ephemeral_duration_in_sec",c.i64.cast([0,0])),d[0].set("message_product_type",void 0),d[0].set("is_message_deletion",!1),d[0].set("is_unbump",a[3]),d[1]=d[0].get("thread_key"),c.storedProcedure(b("LSCancelTaskByQueueName"),c.i64.to_string(d[1]),c.i64.cast([0,389]))},function(e){return d[2]=new c.Map(),d[2].set("bump_timestamp_ms",a[1]),d[2].set("thread_key",a[0]),d[2].set("bumped_by_local_device_send",a[2]),d[2].set("tam_thread_subtype",c.i64.cast([0,0])),d[2].set("wa_jid",void 0),d[2].set("message_ephemeral_duration_in_sec",c.i64.cast([0,0])),d[2].set("message_product_type",void 0),d[2].set("is_message_deletion",!1),d[2].set("is_unbump",a[3]),d[3]=d[2].get("thread_key"),d[4]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[3]),c.i64.cast([0,389]),d[4],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxBumpE2EEMetadataThreadStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSBumpE2EEMetadataThreadStoredProcedure",["LSBumpE2EEMetadataThread","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSBumpE2EEMetadataThread"),e.threadKey,e.serverAuthoritativeTimestampMs,e.bumpedByLocalDeviceSend,e.isUnbump);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("isStringNullOrWhitespaceOnly",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a==null||a.trim()===""}f["default"]=a}),66);
__d("MAWMemoriesShareXMASnippetFbt",["fbt","isStringNullOrWhitespaceOnly"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(){return h._(/*BTDS*/"Has enviado un recuerdo")};b=function(a){return c("isStringNullOrWhitespaceOnly")(a)?h._(/*BTDS*/"Este usuario ha enviado un recuerdo"):h._(/*BTDS*/"{user_name} ha enviado un recuerdo",[h._param("user_name",a)])};g.getCurrentUserSendMemoriesShareSnippetFbt=a;g.getParticipantSendMemoriesShareSnippetFbt=b}),226);
__d("MAWPostMentionXMASnippetFbt",["fbt","isStringNullOrWhitespaceOnly"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(a){return c("isStringNullOrWhitespaceOnly")(a)?h._(/*BTDS*/"Has etiquetado a este usuario en tu publicaci\u00f3n"):h._(/*BTDS*/"Has etiquetado a {user_name} en tu publicaci\u00f3n",[h._param("user_name",a)])};b=function(a){return c("isStringNullOrWhitespaceOnly")(a)?h._(/*BTDS*/"Este usuario te ha etiquetado en su publicaci\u00f3n"):h._(/*BTDS*/"{user_name} te ha etiquetado en su publicaci\u00f3n",[h._param("user_name",a)])};g.getCurrentUserSendPostMentionSnippetFbt=a;g.getParticipantSendPostMentionSnippetFbt=b}),226);
__d("getMAWLocalizedBumpMsgReplySnippet",["fbt","FBLogger"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a,b,d){switch(a){case"currentUserBumpedOwnMessage":return h._(/*BTDS*/"Has resaltado tu mensaje");case"currentUserBumpedMessage":return d!=null?h._(/*BTDS*/"Has resaltado el mensaje de {name}",[h._param("name",d)]):h._(/*BTDS*/"Has destacado un mensaje");case"participantBumpedCurrentUserMessage":return h._(/*BTDS*/"{sender_name} ha resaltado tu mensaje",[h._param("sender_name",b)]);case"participantBumpedOwnMessage":return h._(/*BTDS*/"{name} ha resaltado su mensaje",[h._param("name",b)]);case"participantBumpedParticipantMessage":return d!=null?h._(/*BTDS*/"{sender_name} ha resaltado el mensaje de {reply_source_sender_name}",[h._param("sender_name",b),h._param("reply_source_sender_name",d)]):h._(/*BTDS*/"{user_name} ha destacado un mensaje",[h._param("user_name",b)]);default:a;c("FBLogger")("messenger_web").mustfix("unexpected bump type %s",a);return""}}g["default"]=a}),226);
__d("getMAWLocalizedFallbackMsgSnippet",["fbt","FBLogger"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){switch(a){case"userSendEncryptedMessage":return h._(/*BTDS*/"Esperando este mensaje. Esto puede tardar unos minutos.");case"currentUserSendUnrenderableMessage":return h._(/*BTDS*/"Has enviado un mensaje, pero este navegador no puede mostrarlo.");case"participantSendUnrenderableMessage":return h._(/*BTDS*/"Has recibido un mensaje pero este navegador no puede mostrarlo.");case"currentUserSendLiveLocationFallback":return h._(/*BTDS*/"You sent a live location. Use the Messenger mobile app to see it.");case"currentUserSendLocationFallback":return h._(/*BTDS*/"Has enviado una ubicaci\u00f3n fijada. Usa la aplicaci\u00f3n de Messenger para m\u00f3viles para verla.");case"participantSendLiveLocation":return h._(/*BTDS*/"You received a live location. Use the Messenger mobile app to see it.");case"participantSendLocation":return h._(/*BTDS*/"Has recibido una ubicaci\u00f3n fijada. Usa la aplicaci\u00f3n de Messenger para m\u00f3viles para verla.");case"currentUserSendPollCreationFallback":return h._(/*BTDS*/"Has enviado una votaci\u00f3n. Usa la aplicaci\u00f3n de Messenger para m\u00f3viles para verla.");case"participantSendPollCreation":return h._(/*BTDS*/"Has recibido una votaci\u00f3n. Usa la aplicaci\u00f3n de Messenger para m\u00f3viles para verla.");case"currentUserSendContactShareFallback":return h._(/*BTDS*/"Has enviado una tarjeta de contacto. Usa la aplicaci\u00f3n de Messenger para m\u00f3viles para verla.");case"participantSendContactShareFallback":return h._(/*BTDS*/"Has recibido una tarjeta de contacto. Usa la aplicaci\u00f3n de Messenger para m\u00f3viles para verla.");case"currentUserSendStoryMentionFallback":return h._(/*BTDS*/"Has enviado una menci\u00f3n en una historia. Usa la aplicaci\u00f3n de Messenger para m\u00f3viles para verla.");case"participantSendStoryMentionFallback":return h._(/*BTDS*/"Has recibido una menci\u00f3n en una historia. Usa la aplicaci\u00f3n de Messenger para m\u00f3viles para verla.");case"currentUserSendPostMentionFallback":return h._(/*BTDS*/"Has enviado una menci\u00f3n en una publicaci\u00f3n. Usa la aplicaci\u00f3n de Messenger para m\u00f3viles para verla.");case"participantSendPostMentionFallback":return h._(/*BTDS*/"Has recibido una menci\u00f3n en una publicaci\u00f3n. Usa la aplicaci\u00f3n de Messenger para m\u00f3viles para verla.");case"currentUserSendNoteMentionFallback":return h._(/*BTDS*/"Has mencionado a alguien en tu nota. Usa la aplicaci\u00f3n para m\u00f3viles de Messenger para verla.");case"participantSendNoteMentionFallback":return h._(/*BTDS*/"Alguien te ha mencionado en su nota. Usa la aplicaci\u00f3n para m\u00f3viles de Messenger para verla.");case"messengerMemoryEncryptedMessageFallback":return h._(/*BTDS*/"Para ver este recuerdo, abre la aplicaci\u00f3n de Messenger en el tel\u00e9fono.");case"metaAISendMessageFallback":return h._(/*BTDS*/"Has recibido un mensaje de Meta AI. Usa la aplicaci\u00f3n de Messenger para m\u00f3viles para verlo.");case"currentUserSendBumpMessageFallback":return h._(/*BTDS*/"Has enviado un mensaje resaltado. Usa la aplicaci\u00f3n de Messenger para m\u00f3viles para verlo.");case"participantSendBumpMessageFallback":return h._(/*BTDS*/"Has recibido un mensaje resaltado. Usa la aplicaci\u00f3n de Messenger para m\u00f3viles para verlo.");case"participantSendStickerReceiverFetchMessageFallback":return h._(/*BTDS*/"Has recibido un sticker. Usa la aplicaci\u00f3n de Messenger para m\u00f3viles para verlo.");case"currentUserSendStickerReceiverFetchMessageFallback":return h._(/*BTDS*/"Has enviado un sticker. Usa la aplicaci\u00f3n de Messenger para m\u00f3viles para verlo.");case"userSendUnavailableMessage":return h._(/*BTDS*/"Mensaje enviado antes de que el dispositivo se a\u00f1adiera a la conversaci\u00f3n, por lo que no se puede entregar.");case"participantSendBumpMessageOriginalUnavailable":return h._(/*BTDS*/"Mensaje no disponible.");case"unavailableStory":return h._(/*BTDS*/"Story unavailable");case"viewOncePhotoMessageFallback":return h._(/*BTDS*/"Esta foto solo puede verse una vez. Utiliza la aplicaci\u00f3n para m\u00f3viles si quieres verla.");case"viewOnceVideoMessageFallback":return h._(/*BTDS*/"Este v\u00eddeo solo puede verse una vez. Utiliza la aplicaci\u00f3n para m\u00f3viles si quieres verlo.");case"rtcXMAMessageFallback":return h._(/*BTDS*/"Para ver este mensaje de notificaci\u00f3n de llamada, abre la aplicaci\u00f3n de Messenger en tu tel\u00e9fono.");default:a;c("FBLogger")("messenger_web").mustfix("unexpected content fallback type %s",a);return""}}g["default"]=a}),226);
__d("MAWAdminMsg",["fbt","MAWLocalizationType","MAWMemoriesShareXMASnippetFbt","MAWPostMentionXMASnippetFbt","getMAWLocalizedBumpMsgReplySnippet","getMAWLocalizedFallbackMsgSnippet"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a,b,e){switch(e){case d("MAWLocalizationType").LOCALIZATION_TYPE.EMPTY_SNIPPET:return"";case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CREATED_GROUP:return h._(/*BTDS*/"Has creado este grupo").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CREATED_GROUP:return h._(/*BTDS*/"{actor} ha creado este grupo",[h._param("actor",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_CREATED_GROUP:return h._(/*BTDS*/"Se ha creado este grupo.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_NAMED_GROUP:return h._(/*BTDS*/"Has asignado al grupo el nombre {custom group name}.",[h._param("custom group name",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_NAMED_GROUP:return h._(/*BTDS*/"El nombre del grupo se ha establecido como {custom group name}.",[h._param("custom group name",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP:return h._(/*BTDS*/"{actor} ha asignado al grupo el nombre {custom group name}.",[h._param("actor",b[0]),h._param("custom group name",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE:return h._(/*BTDS*/"Has a\u00f1adido un nuevo dispositivo a esta conversaci\u00f3n.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE:return h._(/*BTDS*/"{actor} ha a\u00f1adido un nuevo dispositivo a esta conversaci\u00f3n.",[h._param("actor",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE:return h._(/*BTDS*/"Has suprimido un dispositivo de esta conversaci\u00f3n.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE:return h._(/*BTDS*/"{actor} ha suprimido un dispositivo de esta conversaci\u00f3n.",[h._param("actor",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE:return h._(/*BTDS*/"Tu clave ha cambiado.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE:return h._(/*BTDS*/"La clave de {user_name} ha cambiado.",[h._param("user_name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT:return h._(/*BTDS*/"Has a\u00f1adido a {user_name} al grupo. Esta persona solo podr\u00e1 ver los mensajes enviados cuando le hayan a\u00f1adido al grupo.",[h._param("user_name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS:return h._(/*BTDS*/"Has a\u00f1adido a {user_name_1} y {user_name_2} al grupo. Solo podr\u00e1n ver los mensajes que se env\u00eden despu\u00e9s de haberles a\u00f1adido.",[h._param("user_name_1",b[0]),h._param("user_name_2",b[1])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:return h._(/*BTDS*/"Has a\u00f1adido a {user_name} y {number of participants} personas m\u00e1s al grupo. Solo podr\u00e1n ver los mensajes que se env\u00eden despu\u00e9s de haberles a\u00f1adido.",[h._param("user_name",b[0]),h._param("number of participants",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU:return h._(/*BTDS*/"{actor} te ha a\u00f1adido al grupo. Solo podr\u00e1s ver los mensajes que se env\u00eden despu\u00e9s de haberte a\u00f1adido.",[h._param("actor",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER:return h._(/*BTDS*/"{actor} os ha a\u00f1adido a ti y a {user_name} al grupo. Solo podr\u00e9is ver los mensajes que se env\u00eden despu\u00e9s de haberos a\u00f1adido.",[h._param("actor",b[0]),h._param("user_name",b[1])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:return h._(/*BTDS*/"{actor} os ha a\u00f1adido a ti y a {number of participants} personas m\u00e1s al grupo. Solo podr\u00e9is ver los mensajes que se env\u00eden despu\u00e9s de haberos a\u00f1adido.",[h._param("actor",b[0]),h._param("number of participants",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER:return h._(/*BTDS*/"{actor} ha a\u00f1adido a {user_name} al grupo. Solo podr\u00e1 ver los mensajes que se env\u00eden despu\u00e9s de haberle a\u00f1adido.",[h._param("actor",b[0]),h._param("user_name",b[1])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER:return h._(/*BTDS*/"{actor} ha a\u00f1adido a {user_name_1} y {user_name_2} al grupo. Solo podr\u00e1n ver los mensajes que se env\u00eden despu\u00e9s de haberles a\u00f1adido.",[h._param("actor",b[0]),h._param("user_name_1",b[1]),h._param("user_name_2",b[2])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER:return h._(/*BTDS*/"{actor} ha a\u00f1adido a {user_name_1} y {number of participants} personas m\u00e1s al grupo. Solo podr\u00e1n ver los mensajes que se env\u00eden despu\u00e9s de haberles a\u00f1adido.",[h._param("actor",b[0]),h._param("user_name_1",b[1]),h._param("number of participants",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT:return h._(/*BTDS*/"Has eliminado a {user_name} del grupo.",[h._param("user_name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU:return h._(/*BTDS*/"{user_name_1} te ha suprimido del grupo.",[h._param("user_name_1",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER:return h._(/*BTDS*/"{user_name_1} ha eliminado a {user_name_2} del grupo.",[h._param("user_name_1",b[0]),h._param("user_name_2",b[1])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP:return h._(/*BTDS*/"{name} ha abandonado el grupo.",[h._param("name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LEFT_GROUP:return h._(/*BTDS*/"Has abandonado el grupo.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_PROMOTED:return h._(/*BTDS*/"{user_name} ahora es administrador(a).",[h._param("user_name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_DEMOTED:return h._(/*BTDS*/"{user_name} ya no es administrador(a).",[h._param("user_name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_GOT_PROMOTED:return h._(/*BTDS*/"Ahora eres administrador.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_GOT_DEMOTED:return h._(/*BTDS*/"Ya no eres administrador.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_YOU:return h._(/*BTDS*/"{actor} te ha a\u00f1adido como administrador del grupo.",[h._param("actor",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_YOU:return h._(/*BTDS*/"{actor} te ha suprimido como administrador del grupo.",[h._param("actor",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_PARTICIPANT:return h._(/*BTDS*/"{actor} ha a\u00f1adido a {target} como administrador del grupo.",[h._param("actor",b[0]),h._param("target",b[1])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_PARTICIPANT:return h._(/*BTDS*/"{actor} ha suprimido a {target} como administrador del grupo.",[h._param("actor",b[0]),h._param("target",b[1])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_DEMOTED_PARTICIPANT:return h._(/*BTDS*/"Has suprimido a {target} como administrador del grupo.",[h._param("target",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PROMOTED_PARTICIPANT:return h._(/*BTDS*/"Has a\u00f1adido a {target} como administrador del grupo.",[h._param("target",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SELF_DEMOTED:return h._(/*BTDS*/"{actor} se ha suprimido como administrador del grupo.",[h._param("actor",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SELF_DEMOTED:return h._(/*BTDS*/"Te has suprimido como administrador del grupo.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_TEXT:return h._(/*BTDS*/"T\u00fa").toString()+": "+a[0];case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT:return a[0];case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT_IN_GROUP:return b[0]+": "+a[0];case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_IMAGE:return h._(/*BTDS*/"Has enviado una foto.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_VIDEO:return h._(/*BTDS*/"Has enviado un v\u00eddeo.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_AUDIO:return h._(/*BTDS*/"Has enviado un mensaje de voz.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_GIF:return h._(/*BTDS*/"Has enviado un GIF.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_STICKER:return h._(/*BTDS*/"Has enviado un sticker.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_ATTACHMENT:return h._(/*BTDS*/"Has enviado un archivo adjunto.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_POST:return h._(/*BTDS*/"You sent a post").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_REEL:return h._(/*BTDS*/"Has enviado un reel").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY:return h._(/*BTDS*/"Has enviado una historia.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_CONTACT_SHARE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_AI_CONTACT_SHARE:return h._(/*BTDS*/"Has enviado una tarjeta de contacto.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_EVENT:return h._(/*BTDS*/"Has enviado un evento.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY_HIGHLIGHT:return h._(/*BTDS*/"You sent a story highlight").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MENTIONED_STORY_IG:return h._(/*BTDS*/"You mentioned \u0040{user} in your story.",[h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_RECEIVED_STORY_MENTION_IG:return h._(/*BTDS*/"Te ha mencionado en su historia").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_STORY_MENTION:return h._(/*BTDS*/"Has mencionado a esta persona en tu historia").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_STORY_MENTION:return h._(/*BTDS*/"{user} te ha mencionado en su historia",[h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_IMAGE:return h._(/*BTDS*/"{user} ha enviado una foto.",[h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_VIDEO:return h._(/*BTDS*/"{user} ha enviado un v\u00eddeo.",[h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_AUDIO:return h._(/*BTDS*/"{user} ha enviado un mensaje de voz.",[h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_GIF:return h._(/*BTDS*/"{user} ha enviado un GIF.",[h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER:return h._(/*BTDS*/"{user} ha enviado un sticker.",[h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_POST:return h._(/*BTDS*/"Sent a post").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_REEL:return h._(/*BTDS*/"Sent a reel").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_ATTACHMENT:return h._(/*BTDS*/"{user} ha enviado un archivo adjunto.",[h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_POST_MENTION:return d("MAWPostMentionXMASnippetFbt").getCurrentUserSendPostMentionSnippetFbt(b[1]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_POST_MENTION:return d("MAWPostMentionXMASnippetFbt").getParticipantSendPostMentionSnippetFbt(b[0]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_LOCATION:return h._(/*BTDS*/"Has enviado una ubicaci\u00f3n.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_LOCATION:return h._(/*BTDS*/"{user} te ha enviado una ubicaci\u00f3n.",[h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY:return h._(/*BTDS*/"{user} ha enviado una historia.",[h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_CONTACT_SHARE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_AI_CONTACT_SHARE:return h._(/*BTDS*/"{user} ha enviado una tarjeta de contacto.",[h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_EVENT:return h._(/*BTDS*/"{user} ha enviado un evento.",[h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY_HIGHLIGHT:return h._(/*BTDS*/"Sent a story highlight").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET:return h._(/*BTDS*/"Mensaje no disponible").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.TWO_USERS_CONNECTED:return h._(/*BTDS*/"Ahora pod\u00e9is enviaros mensajes y llamaros, adem\u00e1s de ver informaci\u00f3n como vuestro estado activo y cu\u00e1ndo le\u00e9is los mensajes.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.TWO_USERS_CONNECTED_ONE_MSPLIT:return h._(/*BTDS*/"Ahora pod\u00e9is enviaros mensajes y llamaros.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.REACHABILITY_ERROR:return h._(/*BTDS*/"Esta cuenta no puede recibir tu mensaje porque no permite nuevas solicitudes de mensaje de cualquier persona.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS:return h._(/*BTDS*/"_j{\"*\":\"Se han activado los mensajes temporales. Los mensajes desaparecer\\u00e1n {number} segundos despu\\u00e9s de enviarse.\",\"_1\":\"Se han activado los mensajes temporales. Los mensajes desaparecer\\u00e1n 1 segundo despu\\u00e9s de enviarse.\"}",[h._plural(parseInt(a[0],10),"number")]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES:return h._(/*BTDS*/"_j{\"*\":\"Se han activado los mensajes temporales. Los mensajes desaparecer\\u00e1n {number} minutos despu\\u00e9s de enviarse.\",\"_1\":\"Se han activado los mensajes temporales. Los mensajes desaparecer\\u00e1n 1 minuto despu\\u00e9s de enviarse.\"}",[h._plural(parseInt(a[0],10),"number")]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS:return h._(/*BTDS*/"_j{\"*\":\"Se han activado los mensajes temporales. Los mensajes desaparecer\\u00e1n {number} horas despu\\u00e9s de enviarse.\",\"_1\":\"Se han activado los mensajes temporales. Los mensajes desaparecer\\u00e1n 1 hora despu\\u00e9s de enviarse.\"}",[h._plural(parseInt(a[0],10),"number")]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS:return h._(/*BTDS*/"_j{\"*\":\"Se han activado los mensajes temporales. Los mensajes desaparecer\\u00e1n {number} d\\u00edas despu\\u00e9s de enviarse.\",\"_1\":\"Se han activado los mensajes temporales. Los mensajes desaparecer\\u00e1n 1 d\\u00eda despu\\u00e9s de enviarse.\"}",[h._plural(parseInt(a[0],10),"number")]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS:return h._(/*BTDS*/"_j{\"*\":\"Has activado los mensajes temporales. Los mensajes desaparecer\\u00e1n {number} segundos despu\\u00e9s de enviarse.\",\"_1\":\"Has activado los mensajes temporales. Los mensajes desaparecer\\u00e1n 1 segundo despu\\u00e9s de enviarse.\"}",[h._plural(parseInt(a[0],10),"number")]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES:return h._(/*BTDS*/"_j{\"*\":\"Has activado los mensajes temporales. Los mensajes desaparecer\\u00e1n {number} minutos despu\\u00e9s de enviarse.\",\"_1\":\"Has activado los mensajes temporales. Los mensajes desaparecer\\u00e1n 1 minuto despu\\u00e9s de enviarse.\"}",[h._plural(parseInt(a[0],10),"number")]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS:return h._(/*BTDS*/"_j{\"*\":\"Has activado los mensajes temporales. Los mensajes desaparecer\\u00e1n {number} horas despu\\u00e9s de enviarse.\",\"_1\":\"Has activado los mensajes temporales. Los mensajes desaparecer\\u00e1n 1 hora despu\\u00e9s de enviarse.\"}",[h._plural(parseInt(a[0],10),"number")]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS:return h._(/*BTDS*/"_j{\"*\":\"Has activado los mensajes temporales. Los mensajes desaparecer\\u00e1n {number} d\\u00edas despu\\u00e9s de enviarse.\",\"_1\":\"Has activado los mensajes temporales. Los mensajes desaparecer\\u00e1n 1 d\\u00eda despu\\u00e9s de enviarse.\"}",[h._plural(parseInt(a[0],10),"number")]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:return h._(/*BTDS*/"_j{\"*\":\"{user} ha activado los mensajes temporales. Los mensajes desaparecer\\u00e1n {number} segundos despu\\u00e9s de enviarse.\",\"_1\":\"{user} ha activado los mensajes temporales. Los mensajes desaparecer\\u00e1n 1 segundo despu\\u00e9s de enviarse.\"}",[h._plural(parseInt(a[0],10),"number"),h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:return h._(/*BTDS*/"_j{\"*\":\"{user} ha activado los mensajes temporales. Los mensajes desaparecer\\u00e1n {number} minutos despu\\u00e9s de enviarse.\",\"_1\":\"{user} ha activado los mensajes temporales. Los mensajes desaparecer\\u00e1n 1 minuto despu\\u00e9s de enviarse.\"}",[h._plural(parseInt(a[0],10),"number"),h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:return h._(/*BTDS*/"_j{\"*\":\"{user} ha activado los mensajes temporales. Los mensajes desaparecer\\u00e1n {number} horas despu\\u00e9s de enviarse.\",\"_1\":\"{user} ha activado los mensajes temporales. Los mensajes desaparecer\\u00e1n 1 hora despu\\u00e9s de enviarse.\"}",[h._plural(parseInt(a[0],10),"number"),h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:return h._(/*BTDS*/"_j{\"*\":\"{user} ha activado los mensajes temporales. Los mensajes desaparecer\\u00e1n {number} d\\u00edas despu\\u00e9s de enviarse.\",\"_1\":\"{user} ha activado los mensajes temporales. Los mensajes desaparecer\\u00e1n 1 d\\u00eda despu\\u00e9s de enviarse.\"}",[h._plural(parseInt(a[0],10),"number"),h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS:return h._(/*BTDS*/"_j{\"*\":\"Se han cambiado los mensajes temporales. Los mensajes desaparecer\\u00e1n {number} segundos despu\\u00e9s de enviarse.\",\"_1\":\"Se han cambiado los mensajes temporales. Los mensajes desaparecer\\u00e1n 1 segundo despu\\u00e9s de enviarse.\"}",[h._plural(parseInt(a[0],10),"number")]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES:return h._(/*BTDS*/"_j{\"*\":\"Se han cambiado los mensajes temporales. Los mensajes desaparecer\\u00e1n {number} minutos despu\\u00e9s de enviarse.\",\"_1\":\"Se han cambiado los mensajes temporales. Los mensajes desaparecer\\u00e1n 1 minuto despu\\u00e9s de enviarse.\"}",[h._plural(parseInt(a[0],10),"number")]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS:return h._(/*BTDS*/"_j{\"*\":\"Se han cambiado los mensajes temporales. Los mensajes desaparecer\\u00e1n {number} horas despu\\u00e9s de enviarse.\",\"_1\":\"Se han cambiado los mensajes temporales. Los mensajes desaparecer\\u00e1n 1 hora despu\\u00e9s de enviarse.\"}",[h._plural(parseInt(a[0],10),"number")]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS:return h._(/*BTDS*/"_j{\"*\":\"Se han cambiado los mensajes temporales. Los mensajes desaparecer\\u00e1n {number} d\\u00edas despu\\u00e9s de enviarse.\",\"_1\":\"Se han cambiado los mensajes temporales. Los mensajes desaparecer\\u00e1n 1 d\\u00eda despu\\u00e9s de enviarse.\"}",[h._plural(parseInt(a[0],10),"number")]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE:return h._(/*BTDS*/"Los mensajes y las llamadas nuevos est\u00e1n protegidos con cifrado de extremo a extremo. \u00danicamente pueden leerlos, escucharlos o compartirlos las personas que participan en este chat.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE:return h._(/*BTDS*/"Tu otro chat se ha archivado.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_IGD_THREAD_ADMIN_MESSAGE:return h._(/*BTDS*/"Instagram upgraded the security of this chat. Messages and calls will be secured with end-to-end encryption.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_ROLLBACK_ADMIN_MESSAGE:return h._(/*BTDS*/"Puede que tus mensajes anteriores est\u00e9n en tu otro chat.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.YOUR_DEVICE_ICDC_ALERT_ADMIN_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.ICDC_ALERT_ADMIN_MESSAGE:return h._(/*BTDS*/"Se ha detectado un dispositivo no autorizado en tu cuenta. Te recomendamos que compares las claves con tus contactos para proteger el chat.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_SECONDS:return h._(/*BTDS*/"_j{\"*\":\"Has cambiado los mensajes temporales. Los mensajes desaparecer\\u00e1n {number} segundos despu\\u00e9s de enviarse.\",\"_1\":\"Has cambiado los mensajes temporales. Los mensajes desaparecer\\u00e1n 1 segundo despu\\u00e9s de enviarse.\"}",[h._plural(parseInt(a[0],10),"number")]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_MINUTES:return h._(/*BTDS*/"_j{\"*\":\"Has cambiado los mensajes temporales. Los mensajes desaparecer\\u00e1n {number} minutos despu\\u00e9s de enviarse.\",\"_1\":\"Has cambiado los mensajes temporales. Los mensajes desaparecer\\u00e1n 1 minuto despu\\u00e9s de enviarse.\"}",[h._plural(parseInt(a[0],10),"number")]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_HOURS:return h._(/*BTDS*/"_j{\"*\":\"Has cambiado los mensajes temporales. Los mensajes desaparecer\\u00e1n {number} horas despu\\u00e9s de enviarse.\",\"_1\":\"Has cambiado los mensajes temporales. Los mensajes desaparecer\\u00e1n 1 hora despu\\u00e9s de enviarse.\"}",[h._plural(parseInt(a[0],10),"number")]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_DAYS:return h._(/*BTDS*/"_j{\"*\":\"Has cambiado los mensajes temporales. Los mensajes desaparecer\\u00e1n {number} d\\u00edas despu\\u00e9s de enviarse.\",\"_1\":\"Has cambiado los mensajes temporales. Los mensajes desaparecer\\u00e1n 1 d\\u00eda despu\\u00e9s de enviarse.\"}",[h._plural(parseInt(a[0],10),"number")]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:return h._(/*BTDS*/"_j{\"*\":\"{user} ha cambiado los mensajes temporales. Los mensajes desaparecer\\u00e1n {number} segundos despu\\u00e9s de enviarse.\",\"_1\":\"{user} ha cambiado los mensajes temporales. Los mensajes desaparecer\\u00e1n 1 segundo despu\\u00e9s de enviarse.\"}",[h._plural(parseInt(a[0],10),"number"),h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:return h._(/*BTDS*/"_j{\"*\":\"{user} ha cambiado los mensajes temporales. Los mensajes desaparecer\\u00e1n {number} minutos despu\\u00e9s de enviarse.\",\"_1\":\"{user} ha cambiado los mensajes temporales. Los mensajes desaparecer\\u00e1n 1 minuto despu\\u00e9s de enviarse.\"}",[h._plural(parseInt(a[0],10),"number"),h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:return h._(/*BTDS*/"_j{\"*\":\"{user} ha cambiado los mensajes temporales. Los mensajes desaparecer\\u00e1n {number} horas despu\\u00e9s de enviarse.\",\"_1\":\"{user} ha cambiado los mensajes temporales. Los mensajes desaparecer\\u00e1n 1 hora despu\\u00e9s de enviarse.\"}",[h._plural(parseInt(a[0],10),"number"),h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:return h._(/*BTDS*/"_j{\"*\":\"{user} ha cambiado los mensajes temporales. Los mensajes desaparecer\\u00e1n {number} d\\u00edas despu\\u00e9s de enviarse.\",\"_1\":\"{user} ha cambiado los mensajes temporales. Los mensajes desaparecer\\u00e1n 1 d\\u00eda despu\\u00e9s de enviarse.\"}",[h._plural(parseInt(a[0],10),"number"),h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF:return h._(/*BTDS*/"Los mensajes temporales se han desactivado.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_OFF:return h._(/*BTDS*/"Has desactivado los mensajes temporales.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF:return h._(/*BTDS*/"{user} ha desactivado los mensajes temporales.",[h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.EPHEMERAL_SETTINGS_AUTO_RESET:return h._(/*BTDS*/"Se han desactivado los mensajes temporales. Vuelve a activarlos para que los mensajes desaparezcan 24 horas despu\u00e9s de enviarse.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UNSENT_MESSAGE:return h._(/*BTDS*/"Has anulado el env\u00edo de un mensaje").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNSENT_MESSAGE:return h._(/*BTDS*/"{first name} ha anulado el env\u00edo de un mensaje",[h._param("first name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE_IN_GROUP:return h._(/*BTDS*/"{name} ha reaccionado con {emoji} a tu mensaje",[h._param("name",b[0]),h._param("emoji",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE:return h._(/*BTDS*/"Ha reaccionado con {emoji} a tu mensaje",[h._param("emoji",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT:return h._(/*BTDS*/"Se ha hecho una captura de pantalla.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_RECORD_SCREEN:return h._(/*BTDS*/"Se ha grabado la pantalla actual.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_TAKE_SCREENSHOT:return h._(/*BTDS*/"Has hecho una captura de pantalla.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_RECORD_SCREEN:return h._(/*BTDS*/"Has grabado la pantalla.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT:return h._(/*BTDS*/"{user} ha hecho una captura de pantalla.",[h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN:return h._(/*BTDS*/"{user} ha grabado la pantalla.",[h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION:return h._(/*BTDS*/"Los mensajes y las llamadas est\u00e1n protegidos con cifrado de extremo a extremo.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU:return h._(/*BTDS*/"Alguien te ha a\u00f1adido al grupo. Solo podr\u00e1s ver los mensajes enviados cuando te hayan a\u00f1adido al grupo.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_ONE_USER:return h._(/*BTDS*/"Alguien os ha a\u00f1adido a {user_name} y a ti al grupo. Solo podr\u00e9is ver los mensajes enviados cuando os hayan a\u00f1adido al grupo.",[h._param("user_name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER:return h._(/*BTDS*/"Alguien os ha a\u00f1adido a ti y a {number of participants} personas m\u00e1s al grupo. Solo podr\u00e9is ver los mensajes enviados cuando os hayan a\u00f1adido al grupo.",[h._param("number of participants",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_ONE_USER:return h._(/*BTDS*/"Alguien ha a\u00f1adido a {user_name} al grupo. Esta persona solo podr\u00e1 ver los mensajes enviados cuando le hayan a\u00f1adido al grupo.",[h._param("user_name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_TWO_USER:return h._(/*BTDS*/"Alguien ha a\u00f1adido a {user_name_1} y a{user_name_2} al grupo. Estas personas solo podr\u00e1n ver los mensajes enviados cuando les hayan a\u00f1adido al grupo.",[h._param("user_name_1",b[0]),h._param("user_name_2",b[1])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER:return h._(/*BTDS*/"Has a\u00f1adido a {user_name_1} y {number of participants} personas m\u00e1s al grupo. Estas personas solo podr\u00e1n ver los mensajes enviados cuando les hayan a\u00f1adido al grupo.",[h._param("user_name_1",b[0]),h._param("number of participants",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.DEBUG_MSG:return a[0];case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MISSED_AUDIO_CALL:e=b[0];return e!=null?h._(/*BTDS*/"Tienes una llamada de audio perdida de {user_name}.",[h._param("user_name",e)]).toString():h._(/*BTDS*/"Tienes una llamada perdida de un contacto.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_MISSED_AUDIO_CALL:e=b[0];return e!=null?h._(/*BTDS*/"{user_name} tiene una llamada de audio perdida tuya.",[h._param("user_name",e)]).toString():h._(/*BTDS*/"Un contacto tiene una llamada de audio perdida tuya.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MISSED_VIDEO_CALL:e=b[0];return e!=null?h._(/*BTDS*/"Tienes una videollamada perdida de {user_name}.",[h._param("user_name",e)]).toString():h._(/*BTDS*/"Tienes una videollamada perdida de un contacto.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_MISSED_VIDEO_CALL:e=b[0];return e!=null?h._(/*BTDS*/"{user} tiene un chat de v\u00eddeo perdido tuyo.",[h._param("user",e)]).toString():h._(/*BTDS*/"Un contacto tiene un chat de v\u00eddeo perdido tuyo.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_AUDIO_CALLED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_AUDIO_CALLED:return h._(/*BTDS*/"La llamada de audio ha finalizado.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_VIDEO_CALLED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_VIDEO_CALLED:return h._(/*BTDS*/"La videollamada ha finalizado.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_AUDIO_CALL:return h._(/*BTDS*/"Has iniciado una llamada.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_AUDIO_CALL:e=b[0];return e!=null?h._(/*BTDS*/"{user} ha iniciado una llamada.",[h._param("user",e)]).toString():h._(/*BTDS*/"Un contacto ha iniciado una llamada.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_VIDEO_CALL:return h._(/*BTDS*/"Has iniciado un chat de v\u00eddeo.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_VIDEO_CALL:e=b[0];return e!=null?h._(/*BTDS*/"{user} ha iniciado un chat de v\u00eddeo.",[h._param("user",e)]).toString():h._(/*BTDS*/"Un contacto ha iniciado un chat de v\u00eddeo.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE:return h._(/*BTDS*/"Has configurado la reacci\u00f3n r\u00e1pida como {emoji}.",[h._param("emoji",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE:return h._(/*BTDS*/"{participant_name} ha configurado la reacci\u00f3n r\u00e1pida como {emoji}.",[h._param("participant_name",b[0]),h._param("emoji",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME:return h._(/*BTDS*/"Has cambiado el apodo de {participant_name} a {nickname}.",[h._param("participant_name",b[0]),h._param("nickname",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME:return a[1]!=null?h._(/*BTDS*/"Has cambiado el estilo a {theme_name} {theme_emoji}.",[h._param("theme_name",a[0]),h._param("theme_emoji",a[1])]).toString():h._(/*BTDS*/"Has cambiado el estilo a {theme_name}.",[h._param("theme_name",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME:return a[1]!=null?h._(/*BTDS*/"Has cambiado el tema mediante IA a \"{theme_name}\" {theme_emoji}.",[h._param("theme_name",a[0]),h._param("theme_emoji",a[1])]).toString():h._(/*BTDS*/"Has cambiado el tema mediante IA a \"{theme_name}\".",[h._param("theme_name",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_PHOTO:return h._(/*BTDS*/"Has cambiado la foto del grupo.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE:return h._(/*BTDS*/"Has fijado un mensaje.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE:return h._(/*BTDS*/"Has desfijado un mensaje.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:return h._(/*BTDS*/"Vas a enviar un mensaje a {participant_name} por primera. Si en alg\u00fan momento la situaci\u00f3n te incomoda, tienes",[h._param("participant_name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:return h._(/*BTDS*/"{participant_name_1} ha cambiado el apodo de {participant_name_2} a {nickname}.",[h._param("participant_name_1",b[0]),h._param("participant_name_2",b[1]),h._param("nickname",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:return h._(/*BTDS*/"{participant_name_1} ha borrado el apodo de {participant_name_2}.",[h._param("participant_name_1",b[0]),h._param("participant_name_2",b[1])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME:return a[1]!=null?h._(/*BTDS*/"{participant_name} ha cambiado el estilo a {theme_name} {theme_emoji}.",[h._param("participant_name",b[0]),h._param("theme_name",a[0]),h._param("theme_emoji",a[1])]).toString():h._(/*BTDS*/"{participant_name} ha cambiado el estilo a {theme_name}.",[h._param("participant_name",b[0]),h._param("theme_name",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_AI_THEME:return a[1]!=null?h._(/*BTDS*/"{participant_name} ha cambiado el tema mediante IA a \"{theme_name}\". {theme_emoji}.",[h._param("participant_name",b[0]),h._param("theme_name",a[0]),h._param("theme_emoji",a[1])]).toString():h._(/*BTDS*/"{participant_name} ha cambiado el tema mediante IA a \"{theme_name}\".",[h._param("participant_name",b[0]),h._param("theme_name",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CREATED_POLL:return h._(/*BTDS*/"Has creado una votaci\u00f3n: {poll_name}.",[h._param("poll_name",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CREATED_POLL:return h._(/*BTDS*/"{participant_name} ha creado una votaci\u00f3n: {poll_name}.",[h._param("participant_name",b[0]),h._param("poll_name",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_OPTION:return h._(/*BTDS*/"{participant_name} ha a\u00f1adido la opci\u00f3n \"{poll_option}\" a la votaci\u00f3n.",[h._param("participant_name",b[0]),h._param("poll_option",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_VOTE:return h._(/*BTDS*/"{participant_name} ha votado por \"{poll_option}\" en la votaci\u00f3n.",[h._param("participant_name",b[0]),h._param("poll_option",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_OPTION:return h._(/*BTDS*/"Has a\u00f1adido \"{poll_option}\" a la votaci\u00f3n.",[h._param("poll_option",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_VOTE:return h._(/*BTDS*/"Has votado \"{poll_option}\" en la votaci\u00f3n.",[h._param("poll_option",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_OPTIONS:e=parseInt(a[1],10)-1;return h._(/*BTDS*/"_j{\"*\":\"{participant_name} ha a\\u00f1adido la opci\\u00f3n \\\"{poll_option}\\\" y {num_other_options} opciones m\\u00e1s a la votaci\\u00f3n.\",\"_1\":\"{participant_name} ha a\\u00f1adido \\\"{poll_option}\\\" y {num_other_options} opci\\u00f3n m\\u00e1s a la votaci\\u00f3n.\"}",[h._plural(e),h._param("participant_name",b[0]),h._param("poll_option",a[0]),h._param("num_other_options",e)]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MULTIPLE_POLL_OPTIONS:e=parseInt(a[1],10)-1;return h._(/*BTDS*/"_j{\"*\":\"Has a\\u00f1adido \\\"{poll_option}\\\" y {num_other_options} opciones m\\u00e1s a la votaci\\u00f3n.\",\"_1\":\"Has a\\u00f1adido \\\"{poll_option}\\\" y {num_other_options} opci\\u00f3n m\\u00e1s a la votaci\\u00f3n.\"}",[h._plural(e),h._param("poll_option",a[0]),h._param("num_other_options",e)]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MULTIPLE_POLL_VOTES:e=parseInt(a[1],10)-1;return h._(/*BTDS*/"_j{\"*\":\"Has votado \\\"{poll_option}\\\" y {num_other_votes} opciones m\\u00e1s en la votaci\\u00f3n.\",\"_1\":\"Has votado \\\"{poll_option}\\\" y {num_other_votes} opci\\u00f3n m\\u00e1s en la votaci\\u00f3n.\"}",[h._plural(e),h._param("poll_option",a[0]),h._param("num_other_votes",e)]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_VOTES:e=parseInt(a[1],10)-1;return h._(/*BTDS*/"_j{\"*\":\"{participant_name} ha votado por \\\"{poll_option}\\\" y {num_other_votes} opciones m\\u00e1s en la votaci\\u00f3n.\",\"_1\":\"{participant_name} ha votado por \\\"{poll_option}\\\" y {num_other_votes} opci\\u00f3n m\\u00e1s en la votaci\\u00f3n.\"}",[h._plural(e),h._param("participant_name",b[0]),h._param("poll_option",a[0]),h._param("num_other_votes",e)]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MULTIPLE_POLL_VOTES:e=parseInt(a[1],10)-1;return h._(/*BTDS*/"_j{\"*\":\"Has suprimido tu voto por \\\"{poll_option}\\\" y {num_other_removed_votes} opciones m\\u00e1s en la votaci\\u00f3n.\",\"_1\":\"Has suprimido tu voto por \\\"{poll_option}\\\" y {num_other_removed_votes} opci\\u00f3n m\\u00e1s en la votaci\\u00f3n.\"}",[h._plural(e),h._param("poll_option",a[0]),h._param("num_other_removed_votes",e)]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MULTIPLE_POLL_VOTES:e=parseInt(a[1],10)-1;return h._(/*BTDS*/"_j{\"*\":\"{participant_name} ha suprimido su voto por \\\"{poll_option}\\\" y {num_other_removed_votes} opciones m\\u00e1s en la votaci\\u00f3n.\",\"_1\":\"{participant_name} ha suprimido su voto por \\\"{poll_option}\\\" y {num_other_removed_votes} opci\\u00f3n m\\u00e1s en la votaci\\u00f3n.\"}",[h._plural(e),h._param("participant_name",b[0]),h._param("poll_option",a[0]),h._param("num_other_removed_votes",e)]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_POLL_VOTE:return h._(/*BTDS*/"Has suprimido tu voto por \"{poll_option}\" en la votaci\u00f3n.",[h._param("poll_option",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_POLL_VOTE:return h._(/*BTDS*/"{participant_name} ha suprimido su voto por \"{poll_option}\" en la votaci\u00f3n.",[h._param("participant_name",b[0]),h._param("poll_option",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_MIXED_POLL_UPDATE:return h._(/*BTDS*/"Hay varias actualizaciones en la votaci\u00f3n de {participant_name}.",[h._param("participant_name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MIXED_POLL_UPDATE:return h._(/*BTDS*/"Hay varias actualizaciones en tu votaci\u00f3n.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CHANGED_POLL_VOTE:return h._(/*BTDS*/"Has cambiado tu voto a \"{poll_option}\" en la votaci\u00f3n.",[h._param("poll_option",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CHANGED_POLL_VOTE:return h._(/*BTDS*/"{participant_name} ha cambiado su voto a \"{poll_option}\" en la votaci\u00f3n.",[h._param("participant_name",b[0]),h._param("poll_option",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CHANGED_MULTIPLE_POLL_VOTES:e=parseInt(a[1],10)-1;return h._(/*BTDS*/"_j{\"*\":\"Has cambiado tu voto a \\\"{poll_option}\\\" y {num_other_changed_votes} opciones m\\u00e1s en la votaci\\u00f3n.\",\"_1\":\"Has cambiado tu voto a \\\"{poll_option}\\\" y {num_other_changed_votes} opci\\u00f3n m\\u00e1s en la votaci\\u00f3n.\"}",[h._plural(e),h._param("poll_option",a[0]),h._param("num_other_changed_votes",e)]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CHANGED_MULTIPLE_POLL_VOTES:e=parseInt(a[1],10)-1;return h._(/*BTDS*/"_j{\"*\":\"{participant_name} ha cambiado su voto a \\\"{poll_option}\\\" y {num_other_changed_votes} opciones m\\u00e1s en la votaci\\u00f3n.\",\"_1\":\"{participant_name} ha cambiado su voto a \\\"{poll_option}\\\" y {num_other_changed_votes} opci\\u00f3n m\\u00e1s en la votaci\\u00f3n.\"}",[h._plural(e),h._param("participant_name",b[0]),h._param("poll_option",a[0]),h._param("num_other_changed_votes",e)]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.POLL_UNSENT_UPDATE:return h._(/*BTDS*/"Se ha anulado el env\u00edo de una votaci\u00f3n.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO:return h._(/*BTDS*/"{participant_name} ha cambiado la foto de grupo.",[h._param("participant_name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE:return h._(/*BTDS*/"{participant_name} ha fijado un mensaje.",[h._param("participant_name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE:return h._(/*BTDS*/"{participant_name} ha desfijado un mensaje.",[h._param("participant_name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:return h._(/*BTDS*/"{participant_name} ha cambiado tu apodo a {nickname}.",[h._param("participant_name",b[0]),h._param("nickname",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME:return h._(/*BTDS*/"Has cambiado tu apodo a {nickname}.",[h._param("nickname",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_OWN_NICKNAME:return h._(/*BTDS*/"Has borrado tu apodo.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:return h._(/*BTDS*/"Has borrado el apodo de {participant_name}.",[h._param("participant_name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME:return h._(/*BTDS*/"{participant_name} ha cambiado su apodo a {nickname}.",[h._param("participant_name",b[0]),h._param("nickname",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:return h._(/*BTDS*/"{participant_name} ha borrado su apodo.",[h._param("participant_name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:return h._(/*BTDS*/"{participant_name} ha borrado tu apodo.",[h._param("participant_name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_ADD_MODE_ADMIN_ONLY:return h._(/*BTDS*/"Has cambiado qui\u00e9nes pueden a\u00f1adir a personas a \"solo administradores\".").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_ADD_MODE_ALL_MEMBERS:return h._(/*BTDS*/"Has cambiado qui\u00e9nes pueden a\u00f1adir a personas a \"todos los miembros\".").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY:return h._(/*BTDS*/"{participant_name} ha cambiado qui\u00e9nes pueden a\u00f1adir a personas a \"solo administradores\".",[h._param("participant_name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS:return h._(/*BTDS*/"{participant_name} ha cambiado qui\u00e9nes pueden a\u00f1adir a personas a \"todos los miembros\".",[h._param("participant_name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.SERVER_SET_ADD_MODE_ADMIN_ONLY:return h._(/*BTDS*/"Un administrador del chat ha cambiado qui\u00e9nes pueden a\u00f1adir a personas a \"todos los miembros\".").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.SERVER_SET_ADD_MODE_ALL_MEMBERS:return h._(/*BTDS*/"Un administrador del chat ha cambiado qui\u00e9nes pueden a\u00f1adir a personas a \"solo administradores\".").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_BUMPED_OWN_MESSAGE:return c("getMAWLocalizedBumpMsgReplySnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_BUMPED_OWN_MESSAGE,null,null).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_BUMPED_MESSAGE:return c("getMAWLocalizedBumpMsgReplySnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_BUMPED_MESSAGE,null,b[0]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE:return c("getMAWLocalizedBumpMsgReplySnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE,b[0],null).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_OWN_MESSAGE:return c("getMAWLocalizedBumpMsgReplySnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_OWN_MESSAGE,b[0],null).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE:return c("getMAWLocalizedBumpMsgReplySnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE,b[0],b[1]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.USER_SEND_UNAVAILABLE_MESSAGE_FALLBACK:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.USER_SEND_UNAVAILABLE_MESSAGE_FALLBACK).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.USER_SEND_ENCRYPTED_MESSAGE_FALLBACK:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.USER_SEND_ENCRYPTED_MESSAGE_FALLBACK).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_UNRENDERABLE_MESSAGE_FALLBACK:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_UNRENDERABLE_MESSAGE_FALLBACK).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_UNRENDERABLE_MESSAGE_FALLBACK:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_UNRENDERABLE_MESSAGE_FALLBACK).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_LIVE_LOCATION_FALLBACK:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_LIVE_LOCATION_FALLBACK).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_LOCATION_FALLBACK:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_LOCATION_FALLBACK).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_LIVE_LOCATION_FALLBACK:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_LIVE_LOCATION_FALLBACK).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_LOCATION_FALLBACK:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_LOCATION_FALLBACK).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_POLL_CREATION_FALLBACK:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_POLL_CREATION_FALLBACK).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_POLL_CREATION_FALLBACK:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_POLL_CREATION_FALLBACK).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_CONTACT_SHARE_FALLBACK:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_CONTACT_SHARE_FALLBACK).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_CONTACT_SHARE_FALLBACK:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_CONTACT_SHARE_FALLBACK).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_STORY_MENTION_FALLBACK:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_STORY_MENTION_FALLBACK).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_STORY_MENTION_FALLBACK:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_STORY_MENTION_FALLBACK).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.MESSENGER_MEMORY_ENCRYPTED_MESSAGE_FALLBACK:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.MESSENGER_MEMORY_ENCRYPTED_MESSAGE_FALLBACK).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_MEMORIES_SHARE:return d("MAWMemoriesShareXMASnippetFbt").getCurrentUserSendMemoriesShareSnippetFbt().toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_MEMORIES_SHARE:return d("MAWMemoriesShareXMASnippetFbt").getParticipantSendMemoriesShareSnippetFbt(b[0]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.RTC_XMA_FALLBACK:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.RTC_XMA_FALLBACK).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.META_AI_SEND_MESSAGE_FALLBACK:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.META_AI_SEND_MESSAGE_FALLBACK).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_BUMP_MESSAGE_FALLBACK:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_BUMP_MESSAGE_FALLBACK).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_BUMP_MESSAGE:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_BUMP_MESSAGE).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_DISABLED:return h._(/*BTDS*/"Has activado los permisos para compartir los mensajes de este chat. Todos los miembros del chat pueden compartir los mensajes con Meta AI o guardar las fotos autom\u00e1ticamente.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_ENABLED:return h._(/*BTDS*/"Has desactivado los permisos para compartir los mensajes de este chat.").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED:return h._(/*BTDS*/"{participant_name} ha activado los permisos para compartir los mensajes de este chat. Todos los miembros del chat pueden compartir los mensajes con Meta AI o guardar las fotos autom\u00e1ticamente.",[h._param("participant_name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED:return h._(/*BTDS*/"{participant_name} ha desactivado los permisos para compartir los mensajes de este chat.",[h._param("participant_name",b[0])]).toString();default:return""}}g.buildLocalizedString=a}),226);
__d("MAWThreadCustomizationUtils",["MAWLocalizationType"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a===d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME||a===d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME||a===d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME}function b(a){return a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME}g.skipNicknameCheck=a;g.nicknameOnlyForFirstParticipantChecking=b}),98);
__d("fillArray",[],(function(a,b,c,d,e,f){function a(a,b){var c=new Array(a);for(var d=0;d<a;d++)c[d]=b;return c}f["default"]=a}),66);
__d("mapPull",[],(function(a,b,c,d,e,f){function a(a,b,c){var d=new Map();for(a of a)d.set(c(a),b(a));return d}f["default"]=a}),66);
__d("MAWBridgeBuildMsgMentions",["MAWLocalizationType","MAWSubscribeToContactNames","MAWThreadCustomizationUtils","WACommon.pb","WAJids","emptyFunction","fillArray","justknobx","mapPull"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a.length>0?a.join(","):void 0}function i(a,b){return a.index-b.index}function j(a,b){return a==null||a===""?a:Array.from(b).reduce(function(a,b){var c=b[0];b=b[1];c=new RegExp(c,"g");return a.replace(c,b)},a)}function k(a,b){return a==null||a===""?[]:Array.from(b.keys()).flatMap(function(b){return Array.from(a.matchAll(b))}).sort(i)}function l(a,b,e,f,g){g===void 0&&(g=[]);e=c("mapPull")(e,function(a){var c=a[0];a[1];return d("MAWSubscribeToContactNames").getContactNameFromLookup(b,c)},function(a){a[0];a=a[1];return a});var i=k(a,e),l=[],m=[],n=[],o=0;for(i of i){var p=d("WAJids").unsafeCoerceToUserJid(i[0]);l.push(d("WAJids").userIdFromJid(p));var q=d("MAWSubscribeToContactNames").getContactNameFromLookup(e,p);m.push(q.length+1);n.push(Math.max(i.index-1+o,0));o+=q.length-p.length}q=c("fillArray")(l.length,"p");for(p of g){i=p.commandType;o=p.length;g=p.offset;if(o==null||g==null)continue;switch(i){case d("WACommon.pb").COMMAND_COMMAND_TYPE.EVERYONE:q.push("t");l.push("t");n.push(g);m.push(o);break;case d("WACommon.pb").COMMAND_COMMAND_TYPE.AI:q.push("ai");l.push("ai");n.push(g);m.push(o);break;case d("WACommon.pb").COMMAND_COMMAND_TYPE.AI_IMAGINE:q.push("im");l.push("im");n.push(g);m.push(o);break;default:break}}i=k(f,e);for(g of i){o=d("WAJids").unsafeCoerceToUserJid(g[0]);l.push(d("WAJids").userIdFromJid(o))}return{mentionIds:h(l),mentionLengths:h(m),mentionOffsets:h(n),mentionTypes:h(q),replyMessageText:j(f,e),text:j(a,e)}}function m(a,b,c,e){a=l(a,c,e);e=a.text;a=b.map(function(a){return d("MAWSubscribeToContactNames").getContactNameFromLookup(c,a)});return[e,a]}function a(a,b,e,f){b=c("mapPull")(b,c("emptyFunction").thatReturnsArgument,d("WAJids").userIdFromJid);return l(a,b,b,e,f)}function n(a,b,c,e,f){return b&&c>0||e?f===d("MAWSubscribeToContactNames").ContactNameMode.FIRST_NAME?"$CONTACT_FIRST_NAME("+a+")":"$CONTACT_FULL_NAME("+a+")":f===d("MAWSubscribeToContactNames").ContactNameMode.FIRST_NAME?"$PARTICIPANT_FIRST_NAME("+a+")":"$PARTICIPANT_FULL_NAME("+a+")"}function b(a,b,e,f){b=c("mapPull")(b!=null?b:[],c("emptyFunction").thatReturnsArgument,d("WAJids").userIdFromJid);if(b.size===0||a==null||a===""){var g=o(f),h=d("MAWThreadCustomizationUtils").nicknameOnlyForFirstParticipantChecking(f),i=d("MAWThreadCustomizationUtils").skipNicknameCheck(f);f=e.map(function(a,b){return n(a,h,b,i,g)});return[a,f]}f=new Map([].concat(Array.from(b.keys()),e).map(function(a){return[a,"$PARTICIPANT_FULL_NAME("+a+")"]}));return m(a,e,f,b)}function o(a){return c("justknobx")._("4603")?d("MAWSubscribeToContactNames").getContactNameModeFromLocalizationType(a):a===d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MENTIONED_STORY_IG||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP?d("MAWSubscribeToContactNames").ContactNameMode.FULL_NAME:d("MAWSubscribeToContactNames").ContactNameMode.FIRST_NAME}g.buildMsgTextWithMentions=a;g.buildThreadSnippetWithMentions=b}),98);
__d("MAWBridgeBuildThreadSnippet",["MAWAdminMsg","MAWBridgeBuildMsgMentions","MAWLocalizationType","MAWVault","first","justknobx"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a!=null?d("MAWVault").unvault(a):void 0}function i(a,b,c){if(a==null)return b;b=[].concat(b);switch(c){case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_TEXT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT_IN_GROUP:b[0]=a;break}return b}function j(a){return a.replace(/\$/g,"$$$$")}function a(a,b){var e=a.snippetContactIDs,f=a.snippetMentionJIDs,g=a.snippetParams,k=a.snippetSenderContactId;a=a.snippetType;if(g==null||a==null||e==null)return b;k!=null&&!e.includes(k)&&c("justknobx")._("3140")&&e.push(k);b=h(c("first")(g));k=d("MAWBridgeBuildMsgMentions").buildThreadSnippetWithMentions(b==null?null:j(b),f,e,a);b=k[0];f=k[1];return d("MAWAdminMsg").buildLocalizedString(i(b,g,a),f,a)}g.buildBridgeThreadSnippet=a}),98);
__d("getMAWLastMessageCtaType",["MAWLocalizationType"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(a){case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MISSED_AUDIO_CALL:return"xma_rtc_missed_audio";case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_MISSED_AUDIO_CALL:return"xma_rtc_missed_group_audio";case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MISSED_VIDEO_CALL:return"xma_rtc_missed_video";case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_MISSED_VIDEO_CALL:return"xma_rtc_missed_group_video"}}g["default"]=a}),98);
__d("MAWBridgeCentralizedThreadUpdateHandler",["I64","LSAuthorityLevel","LSBumpE2EEMetadataThreadStoredProcedure","LSDatabaseSingleton","LSFactory","LSIntEnum","MAWBridgeBuildThreadSnippet","MAWBridgeFireAndForget","MAWChatJid","MAWJids","MAWLocalizationType","MAWMiActGetThreadLifecycleState","MAWODSProxy","MAWThreadBumpType","MAWThreadUpdateMiddlewareGatingUtil","MAWThreadUpdateType","MWFBLogger","ODS","ReQL","WAJids","WAOdsEnums","WATimeUtils","asyncToGeneratorRuntime","getMAWLastMessageCtaType","justknobx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Encountered lastActivityTs == 0 for thread jid : "," with authority level: ",", threadType : ",", threadStatus : ",", folderType : ",", numMsgs (limit 5): "," and msgContentTypes: [","]"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Missing thread for bumping jid: "," with thread state: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Occamadillo][Middleware] Skipping receiver bump for own message on thread ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Occamadillo][Middleware] Starting Thread Update on "," via middleware. threadKey: ",", authorityLevel: ",", lastActivityTimestampMs: ",", bumpTimestampMs: ",", bumpedByLocalDeviceSend: ",", bumpType: ",", threadUpdateType: ",", isUnbump: ",", isThrottled: "," from ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Occamadillo][Middleware] Updated thread via middleware. threadKey: ",", bumpTimestampMs: ",",\n    original lastActivityTimestampMs: ","\n    , bumpedByLocalDeviceSend: ",", bumpType: ",", threadUpdateType: ",",  from ",""]);p=function(){return a};return a}var q=d("MWFBLogger").MWLogger.tags(["bridgeUIEvent","Occam","Middleware"]);function a(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=(yield d("MAWChatJid").toThreadMaybe(a,b.jid));if(e==null){var f=(yield d("MAWMiActGetThreadLifecycleState").getThreadLifecycleStateByJid(a,d("MAWJids").convertChatJidToIntJid(b.jid),"MAWBridgeCentralizedThreadUpdateHandler"));q.MUSTFIX(m(),b.jid,f.type);return}return(h||(h=d("I64"))).lt(e.authorityLevel,(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))&&!b.bumpedByLocalDeviceSend?G(e,b):s(a,e,b)});return r.apply(this,arguments)}function s(a,b,c){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=b;b=f;b=b.threadKey;var g=e.author,i=e.bumpedByLocalDeviceSend,k=e.bumpTimestampMs,m=e.centralizedThreadSnippetData,n=e.threadUpdateType;if(n===d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE)return;var o=f.lastActivityTimestampMs;B(e,f,"Local",e.isUnbump,e.threadBumpType);if((h||(h=d("I64"))).equal(o,(h||(h=d("I64"))).zero)){var p;J("zero_last_activity_timestamp");var r=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.messages).getKeyRange(f.threadKey).take(5))),s=r.length;r=r.map(function(a){return(h||(h=d("I64"))).to_string(a.displayedContentTypes)}).join(",");q.WARN(l(),e.jid,(h||(h=d("I64"))).to_string(f.authorityLevel),h.to_string(f.threadType),h.to_string((p=f.threadStatus)!=null?p:(h||(h=d("I64"))).neg_one),f.folderName,s,r)}p=C(e,o);s=p.isUnbump;r=p.threadBumpType;if(n===d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD||n===d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD||s){J("bump_on_local");s&&(f=w(s,k,f),n!==d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD&&(f=y(k,f,s)));p=D(g,i,r,k,o,f.threadKey,m.snippetType);if(p){n={bumpedByLocalDeviceSend:i,isUnbump:s,serverAuthoritativeTimestampMs:k,threadKey:b};(j||(j=d("ODS"))).bumpEntityKey(3185,"maw_tc_server_thread_bump",""+((g=e.centralizedThreadSnippetData.snippetType)!=null?g:"undefined"));B(e,f,"Server",s,r);yield u(c("LSFactory")(a),n)}}var t=z(e.centralizedThreadSnippetData,f);return a.threads.put(t).then(function(){f!=null&&A(e,o,t)})});return t.apply(this,arguments)}function u(a,b){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){J("bump_on_server");return c("LSBumpE2EEMetadataThreadStoredProcedure")(a,b)});return v.apply(this,arguments)}function w(a,b,c){return!x(a,b,c)?c:babelHelpers["extends"]({},c,{lastActivityTimestampMs:b})}function x(a,b,c){return a?(h||(h=d("I64"))).lt(b,c.lastActivityTimestampMs):(h||(h=d("I64"))).gt(b,c.lastActivityTimestampMs)}function y(a,b,c){return!c&&(h||(h=d("I64"))).lt(a,b.lastReadWatermarkTimestampMs)?b:babelHelpers["extends"]({},b,{lastReadWatermarkTimestampMs:a})}function z(a,b){var e=a.snippetSenderContactId!=null?(h||(h=d("I64"))).of_string(a.snippetSenderContactId):(h||(h=d("I64"))).zero,f=c("getMAWLastMessageCtaType")(a.snippetType);a=d("MAWBridgeBuildThreadSnippet").buildBridgeThreadSnippet(a,b.snippet);return babelHelpers["extends"]({},b,{lastMessageCtaType:f,snippet:a,snippetSenderContactId:e})}function A(a,b,c){q.DEBUG(p(),(h||(h=d("I64"))).to_string(c.threadKey),h.to_string(c.lastActivityTimestampMs),h.to_string(b),a.bumpedByLocalDeviceSend,a.threadBumpType,a.threadUpdateType,a.description)}function B(a,b,c,e,f){c=[c,(h||(h=d("I64"))).to_string(b.threadKey),h.to_string(b.authorityLevel),h.to_string(b.lastActivityTimestampMs),h.to_string(a.bumpTimestampMs),a.bumpedByLocalDeviceSend,f,a.threadUpdateType,e,a.isThrottled,a.description];q.DEBUG(o(),c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10])}function C(a,b){var e=c("justknobx")._("3068");if(e)return{isUnbump:a.isUnbump,threadBumpType:a.threadBumpType};e=(h||(h=d("I64"))).lt(a.bumpTimestampMs,b);if(a.isThrottled&&e){switch(a.tableName){case"messages":J("unbump_from_message_in_throttle");break;case"reactions":J("unbump_from_reaction_in_throttle");break;default:J("unbump_from_throttle")}e=a.tableName==="reactions";e&&d("MAWThreadUpdateMiddlewareGatingUtil").isPeristedUnbumpEnabled()&&d("MAWBridgeFireAndForget").fireAndForget("backend","unbumpThread",{incomingUnbumpFromTs:d("WATimeUtils").castToMillisTime((h||(h=d("I64"))).to_float(b)),threadJid:a.jid});return{isUnbump:!0,threadBumpType:d("MAWThreadBumpType").THREAD_BUMP_TYPE.LOCAL_ONLY}}return{isUnbump:a.isUnbump,threadBumpType:a.threadBumpType}}function D(a,b,c,e,f,g,i){if(c!==d("MAWThreadBumpType").THREAD_BUMP_TYPE.LOCAL_AND_SERVER)return!1;if(E(a,b,i)){q.DEBUG(n(),(h||(h=d("I64"))).to_string(g));return!1}J("check_if_bump_is_newer_than_current_activity");c=(h||(h=d("I64"))).gt(e,f);c||J("server_bump_prevented");return c}function E(a,b,c){return a!=null&&d("WAJids").isAuthorMe(a)&&b===!1&&!F(c)}function F(a){return a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_MISSED_AUDIO_CALL||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_MISSED_VIDEO_CALL||a===d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_AUDIO_CALLED||a===d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_VIDEO_CALLED}function G(a,b){return H.apply(this,arguments)}function H(){H=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=(yield (k||(k=d("LSDatabaseSingleton"))).LSDatabaseSingleton);J("wait_for_authoritative_thread_start");I(a.threadKey,e,function(a){J("wait_for_authoritative_thread_end");var g=(h||(h=d("I64"))).to_float(a.lastActivityTimestampMs);J("ts_of_authoritative_thread_after_wait_"+(g>0?"gt_0":"eq_0"));c("promiseDone")(e.runInTransaction(function(c){return s(c,a,b)},"readwrite",void 0,void 0,f.id+":505"))});return});return H.apply(this,arguments)}function I(a,b,e){var f=d("ReQL").fromTableAscending(b.tables.threads).getKeyRange(a).subscribe(function(a,b){if(b.operation==="delete")return;a=b.value;if((h||(h=d("I64"))).lt(a.authorityLevel,(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE)))return;e(a);return f()})}function J(a){d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_THREAD_UPDATE_MIDDLEWARE,key:a})}g.call=a}),98);
__d("MAWBridgeDeleteGroupInviteHandler",["LSThreadBitOffset","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","Promise","ReQL","asyncToGeneratorRuntime","justknobx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,e.threadJid,"MAWBridgeDeleteGroupInviteHandler",function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(e,f){var g=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(e.group_invites).getKeyRange(f)));return(h||(h=b("Promise"))).all(g.map(function(a){return e.group_invites["delete"](a.threadKey,a.inviterId,a.inviteeId)})).then(function(){if(!c("justknobx")._("1162"))return;c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(f)),function(b){if(b==null)return;var c=d("LSThreadBitOffset").clear([105],b.capabilities,b.capabilities2,b.capabilities3,b.capabilities4,b.capabilities5),e=c[0],f=c[1],g=c[2],h=c[3];c=c[4];return a.threads.put(babelHelpers["extends"]({},b,{capabilities:e,capabilities2:f,capabilities3:g,capabilities4:h,capabilities5:c,snippet:void 0}))})})});return function(a,b){return e.apply(this,arguments)}}())}g.call=a}),98);
__d("MAWBridgeDeleteMessageRangesV2Handler",["I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.threadJid,"MAWBridgeDeleteMessageRangesV2Handler",function(a,c){return a.messages_ranges_v2__generated["delete"](c,(h||(h=d("I64"))).of_float(b.minTimestampMs),b.minMsgId)})}g.call=a}),98);
__d("MAWBridgeDeleteMessagesHandler",["LSIntEnum","LSReplyMessageStatus","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWMpsGating","MAWTimeUtils","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,c){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,c.threadJid,"MAWBridgeDeleteMessagesHandler",function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,e){for(var f of c.messages)if(d("MAWMpsGating").isFullMpsEnabled()){var g=(yield a.messages.index("messageId").get(f.msgId));g!=null&&(yield b.messages["delete"](g.threadKey,g.timestampMs,g.messageId));yield j(b,f.msgId)}else yield b.messages["delete"](e,d("MAWTimeUtils").toTimestamp(f.ts),f.msgId)});return function(a,b){return e.apply(this,arguments)}}())}function j(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){e=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.messages.index("replySourceIdMessageID")).getKeyRange(e)));yield (i||(i=b("Promise"))).all(e.map(function(b){b=babelHelpers["extends"]({},b,{replyStatus:(h||(h=d("LSIntEnum"))).ofNumber(c("LSReplyMessageStatus").DELETED)});return a.messages.put(b)}))});return k.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeDeleteReactionHandler",["I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.chatJid,"MAWBridgeDeleteReactionHandler",function(a,c){return a.reactions["delete"](c,b.messageId,(h||(h=d("I64"))).of_string(b.actorId))})}g.call=a}),98);
__d("MAWBridgeEditMsgHistoryAddedHandler",["FBLogger","I64","LSMessageSendStatus","MAWChatJid","Promise","ReQL","asyncToGeneratorRuntime","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.messages.index("optimistic")).getKeyRange(b)));return a==null?void 0:a.messageId});return k.apply(this,arguments)}function l(a,b,c){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=(yield j(a,b.originalMsgExternalId));if(f==null){c("FBLogger")("messenger_web_e2ee").warn("original message for edit msg history is not present in lsdb");return}f={messageContent:b.msgContent.content,originalMessagePk:f,sendStatus:b.sendStatus!=null?(i||(i=d("I64"))).of_int32(b.sendStatus):(i||(i=d("I64"))).of_int32(c("LSMessageSendStatus").SERVER_RECEIVED),serverAdjustedEditTsMs:(i||(i=d("I64"))).of_int32(b.editTs),threadKey:e};return a.edit_message_history.put(f)});return m.apply(this,arguments)}function n(a,b,e,f,g){g={messageContent:b.msgContent.content,originalMessagePk:g,pk:f,sendStatus:b.sendStatus!=null?(i||(i=d("I64"))).of_int32(b.sendStatus):(i||(i=d("I64"))).of_int32(c("LSMessageSendStatus").SERVER_RECEIVED),serverAdjustedEditTsMs:(i||(i=d("I64"))).of_int32(b.editTs),threadKey:e};return a.edit_message_history.put(g)}function o(a,b,c){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){a=(yield d("MAWChatJid").toThreadKeyMaybe(a.tables,c.threadJid));if(a==null)return;var e=c.editMsgHistoryId,f=c.originalMsgId;b=f==null||e==null?l(b,c,a):n(b,c,a,e,f);return b});return p.apply(this,arguments)}function a(a,d,e){return(h||(h=b("Promise"))).all(e.map(function(b){return o(a,d,b)})).then(c("emptyFunction"))}g.call=a}),98);
__d("MAWBridgeFulfillRestorePromisePayloadHandler",["MAWAsyncEBPendingQueryPromise","MAWEBRestoreTrackingUtils","Promise","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){a.success?(d("MAWAsyncEBPendingQueryPromise").resolvePendingQueryUponReStore(a.value.traceId),d("MAWEBRestoreTrackingUtils").markEBRestoreSuccess(a.value.traceId)):(d("MAWAsyncEBPendingQueryPromise").rejectPendingQueryIfPresent(a.error.traceId,c("err")(a.error.message)),d("MAWEBRestoreTrackingUtils").markEBRestoreFail(a.error.traceId));return(h||(h=b("Promise"))).resolve()}g.call=a}),98);
__d("MAWBridgeGroupInfoUpdatedHandler",["I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MWFBLogger","ODS","ReQL","asyncToGeneratorRuntime","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(['MAWDB groupInfo is missing "name" field for threadKey: ',""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Missing thread for updating group with threadKey: ",""]);k=function(){return a};return a}var l=d("MWFBLogger").MWLogger.tags(["bridgeUIEvent","Occam","Middleware"]);function a(a,e){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,e.chatJid,"MAWBridgeGroupInfoUpdatedHandler",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var f;f=(f=e.threadName)!=null?f:void 0;a=a.threads;var g=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a).getKeyRange(b)));if(g==null){(h||(h=d("ODS"))).bumpEntityKey(3185,"armadillo_group_info_update","missing_thread");l.WARN(k(),(i||(i=d("I64"))).to_string(b));return}else f==null&&c("justknobx")._("4129")&&(f=g.threadName,l.WARN(j(),(i||(i=d("I64"))).to_string(b)));b=e.memberAddMode!=="all_member_add";yield a.put(babelHelpers["extends"]({},g,{needsAdminApprovalForNewParticipant:b,threadName:f}))});return function(b,c){return a.apply(this,arguments)}}())}g.call=a}),98);
__d("MAWBridgeGroupInviteUpdateHandler",["I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWUpdateLSThreadCapabilities","Promise","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,e){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,e.threadJid,"MAWBridgeGroupInviteUpdateHandler",function(a,f){var g=(i||(i=d("I64"))).of_string(e.inviterId);return(h||(h=b("Promise"))).all([d("MAWUpdateLSThreadCapabilities").setGroupInviteTxn(a,f,g)]).then(c("emptyFunction"))})}g.call=a}),98);
__d("MAWBridgeHandleCOPDigest",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;function a(a,c){return(g||(g=b("Promise"))).resolve()}f.call=a}),66);
__d("MAWBridgeMediaExpiredHandler",["MAWMiActOnMiThreadExistsForJid__DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.threadJid,"MAWBridgeMediaExpiredHandler.bs",function(a,c){return a.attachments["delete"](c,b.msgId,String(b.plaintextHash))})}g.call=a}),98);
__d("MAWLocalizationEphemeralSettingSetAdminMsg",["MAWLocalizationType"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_SECONDS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_MINUTES||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_HOURS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_DAYS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_OFF||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF||a===d("MAWLocalizationType").LOCALIZATION_TYPE.EPHEMERAL_SETTINGS_AUTO_RESET}g.isEphemeralSettingSetAdminMsg=a}),98);
__d("MAWAdminMsgCTA",["fbt","I64","MAWLocalizationEphemeralSettingSetAdminMsg","MAWLocalizationType","MAWMsgType","MAWTimeUtils","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=new Set([(c=d("MAWLocalizationType")).LOCALIZATION_TYPE.CURRENT_USER_CREATED_POLL,c.LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_VOTE,c.LOCALIZATION_TYPE.PARTICIPANT_CREATED_POLL,c.LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_VOTE,c.LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_OPTIONS,c.LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_VOTES,c.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_POLL_VOTE,c.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MULTIPLE_POLL_VOTES,c.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_POLL_VOTE,c.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MULTIPLE_POLL_VOTES,c.LOCALIZATION_TYPE.PARTICIPANT_MIXED_POLL_UPDATE,c.LOCALIZATION_TYPE.CURRENT_USER_MIXED_POLL_UPDATE,c.LOCALIZATION_TYPE.PARTICIPANT_CHANGED_POLL_VOTE,c.LOCALIZATION_TYPE.CURRENT_USER_CHANGED_POLL_VOTE,c.LOCALIZATION_TYPE.PARTICIPANT_CHANGED_MULTIPLE_POLL_VOTES,c.LOCALIZATION_TYPE.CURRENT_USER_CHANGED_MULTIPLE_POLL_VOTES,c.LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_OPTION,c.LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_OPTION]),l=new Set([c.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME,c.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME,c.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME,c.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_AI_THEME]),m=h._(/*BTDS*/"Cambiar").toString(),n=h._(/*BTDS*/"Ver todo").toString(),o=h._(/*BTDS*/"M\u00e1s informaci\u00f3n").toString(),p=h._(/*BTDS*/"M\u00e1s informaci\u00f3n").toString(),q=h._(/*BTDS*/"opciones a tu disposici\u00f3n.").toString(),r=h._(/*BTDS*/"Ir al otro chat").toString(),s=h._(/*BTDS*/"Ver chat archivado").toString(),t=h._(/*BTDS*/"Ver votaci\u00f3n").toString(),u=h._(/*BTDS*/"Cambiar").toString();function v(a){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.admin_message_ctas.index("ctaId"))));return a!=null?(j||(j=d("I64"))).add(a.ctaId,(j||(j=d("I64"))).one):(j||(j=d("I64"))).zero});return w.apply(this,arguments)}function x(a,b,c){b=[b,c];return d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.admin_message_ctas).bounds({gte:b,lte:b}))}function y(a,b,c){if(a==null)return{showAdChoiceIcon:!1};if(d("MAWLocalizationEphemeralSettingSetAdminMsg").isEphemeralSettingSetAdminMsg(a))return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:m};if(k.has(a))return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:b,targetTitle:c,title:t};if(l.has(a))return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:u};switch(a){case d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_IGD_THREAD_ADMIN_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:o};case d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_ROLLBACK_ADMIN_MESSAGE:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:r};case d("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:s};case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:n};case d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:return{actionUrl:"https://www.messenger.com/help/1145318292241859/?helpref=uk_lm",adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:q};case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_DISABLED:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_ENABLED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED:return{actionUrl:"https://www.facebook.com/help/messenger-app/2016594885417423?ref=ipl",adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:p};default:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:void 0}}}function z(a){if(a==null)return;if(d("MAWLocalizationEphemeralSettingSetAdminMsg").isEphemeralSettingSetAdminMsg(a))return"admin_msg_armadillo_ephemeral_change_duration";if(k.has(a))return"admin_msg_poll_details";if(l.has(a))return"admin_msg_change_theme";switch(a){case d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_IGD_THREAD_ADMIN_MESSAGE:return"admin_msg_thread_level_cutover";case d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION:return"admin_msg_e2ee_thread";case d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:return"admin_msg_e2ee_uk_osa";case d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_ROLLBACK_ADMIN_MESSAGE:return"admin_msg_cutover_rollback";case d("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE:return"admin_msg_dual_thread_cutover";case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE:return"admin_msg_view_pin_msgs_v2";case d("MAWLocalizationType").LOCALIZATION_TYPE.YOUR_DEVICE_ICDC_ALERT_ADMIN_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.ICDC_ALERT_ADMIN_MESSAGE:return"admin_msg_icdc";case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_DISABLED:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_ENABLED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED:return"admin_msg_change_thread_limit_sharing_permission"}}function A(a,b,c,d,e){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f){yield a.admin_message_ctas.add({actionContentBlob:f.actionContentBlob,actionUrl:f.actionUrl,adClientToken:f.adClientToken,adHelpUrl:f.adHelpUrl,adminMessageNicknameParticipantId:f.adminMessageNicknameParticipantId,adPreferenceUrl:f.adPreferenceUrl,ctaId:b,messageId:e.msgId,showAdChoiceIcon:f.showAdChoiceIcon,targetId:f.targetId,targetTitle:f.targetTitle,threadKey:c,timestampMs:d("MAWTimeUtils").toTimestamp(e.ts),title:f.title})});return B.apply(this,arguments)}function C(a,b,c){return D.apply(this,arguments)}function D(){D=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,d){var e=(yield (i||(i=b("Promise"))).all([x(a,c,d.msgId),v(a)])),f=e[0];e=e[1];if(f!=null)return{ctaId:f.ctaId,ctaType:z(d.adminType),title:f.title};else{f=E(d.adminType,d);var g=F(d.adminType,d);f=y(d.adminType,f,g);yield A(a,e,c,d,f);return{ctaId:e,ctaType:z(d.adminType),title:f.title}}});return D.apply(this,arguments)}function a(a,c,e){var f=e.adminType;return f!=null&&(d("MAWLocalizationEphemeralSettingSetAdminMsg").isEphemeralSettingSetAdminMsg(f)||f===d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE||f===d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_IGD_THREAD_ADMIN_MESSAGE||f===d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION||f===d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE||f===d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_ROLLBACK_ADMIN_MESSAGE||f===d("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE||f===d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE||f===d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE||f===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE||f===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE||f===d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_DISABLED||f===d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_ENABLED||f===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED||f===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED||f!=null&&k.has(f)||f!=null&&l.has(f))?C(a,c,e):(i||(i=b("Promise"))).resolve()}function E(a,b){if(a==null)return void 0;if(b.type_===d("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE)return(j||(j=d("I64"))).of_string(b.externalId);return k.has(a)&&b.pollStanzaId!=null?(j||(j=d("I64"))).of_string(b.pollStanzaId):void 0}function F(a,b){if(a==null)return void 0;return k.has(a)?b.adminContent==null||b.adminContent.length===0?void 0:b.adminContent[b.adminContent.length-1]:void 0}g.getAdminMsgCTAContentByAdminType=y;g.getCtaTypeByAdminType=z;g.getAdminMsgCtaStep=a}),226);
__d("MAWMsgReply",["EntMessageReplyType","FBLogger","I64","LSIntEnum","LSMessageReplySourceTypeV2","LSReplyMessageAttachmentType","MAWMsg","MAWMsgType","WATimeUtils","cr:2472","gkx","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){return a.replySourceId!=null}function k(a,b,d){if(!c("gkx")("15418"))return;(d!=null?d:"")!==(b!=null?b:"")&&c("FBLogger")("messenger_e2ee_web").mustfix("[MAWMsgReply] %s: LS derived reply field generated does not match the legacy derived version. Expected: %s, Actual: %s",a,b,d)}function a(a){var b=m(a),e;if(c("gkx")("15418")){var f;((f=a.replyContent)==null?void 0:f.replyToLSMessage)!=null&&(e=l(a.replyContent.replyToLSMessage));k("getReplyUserId",b!=null?(h||(h=d("I64"))).to_string(b):void 0,e!=null?(h||(h=d("I64"))).to_string(e):void 0)}return(f=e)!=null?f:b}function l(a){return a.senderId}function m(a){a=a.replyToUserId;return a==null?void 0:(h||(h=d("I64"))).of_string(a)}function e(a){var b=n(a),e;c("gkx")("15418")&&(a.replyContent!=null&&(e=(i||(i=d("LSIntEnum"))).ofNumber(a.replyContent.replyType)),k("getReplySourceTypeV2",b!=null?(h||(h=d("I64"))).to_string(b):void 0,e!=null?(h||(h=d("I64"))).to_string(e):void 0));return(a=e)!=null?a:b}function n(a){var b=a.isFBPostMention,e=a.isFBStoryMention,f=a.isForwarded,g=a.isMsgHighlightsTabFriendUpdatesReply,h=a.isNoteReply,k=a.isStoryProducerReply,l=a.isStoryReply,m=a.isStoryShare,n=a.replyMediaExpirationTimestampMs;a=j(a);if(b===!0)return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").FB_POST_MENTION);if(f)return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").FORWARD);if(m!=null&&m)return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").FB_STORY_SHARE);if(e!=null&&e)return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").FB_STORY_MENTION);if(g!=null&&g)return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").HIGHLIGHTS_TAB_POST_REPLY);if(n!=null&&n<d("WATimeUtils").unixTime()&&h!==!0)return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").EXPIRED_STORY);if(a)if(l!=null&&l)return k!=null&&k?(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").FB_PRODUCER_STORY_REPLY):(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").STORY);else if(h===!0)return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").LIGHTWEIGHT_STATUS);else return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE)}function f(a){var b=o(a),e;c("gkx")("15418")&&(a.replyContent!=null&&(e=(i||(i=d("LSIntEnum"))).ofNumber(a.replyContent.replyType)),k("getReplySourceType",b!=null?(h||(h=d("I64"))).to_string(b):void 0,e!=null?(h||(h=d("I64"))).to_string(e):void 0));return(a=e)!=null?a:b}function o(a){var b=j(a),e=a.isMsgHighlightsTabFriendUpdatesReply,f=a.isNoteReply,g=a.isStoryReply;a=a.isStoryShare;if(a!=null&&a)return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").FB_STORY_SHARE);if(e!=null&&e)return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").HIGHLIGHTS_TAB_POST_REPLY);if(b)if(g!=null&&g)return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").STORY);else if(f===!0)return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").LIGHTWEIGHT_STATUS);else return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE)}function p(a){var b=q(a),d;if(c("gkx")("15418")){d=(a=a.replyContent)==null?void 0:a.replyToMsgId;k("getReplySourceId",b,d)}return(a=d)!=null?a:b}function q(a){if(a.replySourceId!=null)return a.replySourceId}function r(a){var b=t(a),e;if(c("gkx")("15418")){var f;((f=a.replyContent)==null?void 0:f.replyToLSMessage)!=null&&(e=s(a.replyContent.replyToLSMessage));k("getReplyTimestampMs",b!=null?(h||(h=d("I64"))).to_string(b):void 0,e!=null?(h||(h=d("I64"))).to_string(e):void 0)}return(f=e)!=null?f:b}function s(a){return a.timestampMs}function t(a){if(a.replySourceTimestampMs!=null)return(h||(h=d("I64"))).of_float(a.replySourceTimestampMs)}function u(a){var b=w(a),d;if(c("gkx")("15418")){var e;((e=a.replyContent)==null?void 0:e.replyToLSMessage)!=null&&(d=v(a.replyContent.replyToLSMessage));k("getReplyMessageText",b,d)}return(e=d)!=null?e:b}function v(a){return a.text}function w(a){if(a.replySourceId!=null)return a.replyMessageText}function x(a){if(a.replySourceId!=null)return a.replyMentionedJids}function y(a){return a.type_===d("MAWMsg").bumpExistingMessage?(i||(i=d("LSIntEnum"))).ofNumber(c("EntMessageReplyType").BUMP):j(a)?(i||(i=d("LSIntEnum"))).ofNumber(c("EntMessageReplyType").REGULAR):void 0}function z(a){return a.replySourceId==null?!1:A(a.replyStatusType)}function A(a){switch(a){case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.RAVEN:case d("MAWMsgType").MSG_TYPE.XMA:case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:return!0;default:return!1}}function B(a){return a.replyStatusType==="XMA"&&a.replyMessageText!=null}function C(a){if(z(a))return a.replyMediaPreviewHeight!=null?(h||(h=d("I64"))).of_int32(a.replyMediaPreviewHeight):void 0}function D(a){if(z(a))return a.replyMediaPreviewWidth!=null?(h||(h=d("I64"))).of_int32(a.replyMediaPreviewWidth):void 0}function E(a){var b=G(a),e=F(a);b!==e&&c("FBLogger")("messenger_e2ee_web").mustfix("[getReplyAttachmentType result inconsistency] V1: %s, V2: %s, msg replyStatusType: %s",(h||(h=d("I64"))).to_string(b!=null?b:(h||(h=d("I64"))).zero),h.to_string(e!=null?e:(h||(h=d("I64"))).zero),a.replyStatusType);return b}function F(a){var b=a.replyStatusType;if(b==null)return;var e=b==="Raven";e=z(a)||e;if(!e)return;switch(b){case"Gif":return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").GIF);case"Ptt":return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").OTHER);case"Sticker":return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").STICKER);case"Video":return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").VIDEO);case"Image":return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").PHOTO);case"XMA":if(a.isIGXMAPostShare===!0||a.isIGXMAStoryShare===!0||a.isStoryHighlightShare===!0||a.isPostPrivateReply===!0||a.isMsgHighlightsTabFriendUpdatesReply===!0)return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").FEED_POST);if(B(a))return;return c("justknobx")._("2738")?(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").XMA):(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").PHOTO);case"DocumentFile":return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").OTHER);case"ReceiverFetch":return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").STICKER);case"Raven":return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").EPHEMERAL_RAVEN_MESSAGE);default:}}function G(a){var e=a.replyMessageText;e=e!=null?b("cr:2472")==null?e:b("cr:2472").unvault(e):"";e=e==="\ud83d\udc4d"&&a.replyStatusType==="Sticker";var f=a.replyStatusType==="Raven";f=z(a)||f;var g=a.replyStatusType;if(f){if(g==null)return;switch(g){case"Gif":if(e)return;else return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").GIF);case"Ptt":if(e)return;else return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").OTHER);case"Sticker":if(!e)return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").STICKER);break;case"Video":if(e)return;else return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").VIDEO);case"Image":return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").PHOTO);case"XMA":if(e)return;if(a.isIGXMAPostShare===!0||a.isIGXMAStoryShare===!0||a.isStoryHighlightShare===!0||a.isPostPrivateReply===!0||a.isMsgHighlightsTabFriendUpdatesReply===!0)return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").FEED_POST);if(B(a))return;return c("justknobx")._("2738")?(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").XMA):(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").PHOTO);case"DocumentFile":if(e)return;return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").OTHER);case"ReceiverFetch":if(e)return;return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").STICKER);case"Raven":return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").EPHEMERAL_RAVEN_MESSAGE);default:}}if(g!=null&&g==="Sticker"&&e)return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").STICKER)}function H(a){var b=a.replyMediaId,c=a.replyXMAId;if(z(a)&&b!=null)return c!=null?void 0:(h||(h=d("I64"))).of_float(b);if(b!=null||c==null)return;if(c!=null&&B(a))return;return(h||(h=d("I64"))).of_int32(c)}function I(a){var b=a.replyPlaintextHash;if(z(a)&&b!=null)return""+b}function J(a){var b=a.isNoteReply,c=a.isStoryReply,e=a.replyMediaExpirationTimestampMs,f=a.replyMessageText,g=a.replyStatusType;if(b===!0){if(e!=null)return(h||(h=d("I64"))).of_float(e);return}b=E(a);e=H(a);if(g!=null&&g==="XMA"&&b==null){if(e!=null)return;if(f==null)return(h||(h=d("I64"))).zero}if(e!=null||!(c!=null&&c))return;return(h||(h=d("I64"))).zero}g.assertIfQuotedV2=k;g.getReplyUserId=a;g.getReplyUserIdFromLSMessage=l;g.getReplySourceTypeV2=e;g.getReplySourceType=f;g.getReplySourceId=p;g.getReplyTimestampMs=r;g.getReplyTimestampMsFromLSMessage=s;g.getReplyMessageText=u;g.getReplyMessageTextFromLSMessage=v;g.getReplyMentionedJids=x;g.getReplyType=y;g.getReplyMediaHeight=C;g.getReplyMediaWidth=D;g.getReplyAttachmentType=E;g.getReplyAttachmentTypeV2=F;g.getReplyAttachmentTypeV1=G;g.getReplyAttachmentId=H;g.getReplyAttachmentPlaintextHash=I;g.getReplyMediaExpirationTimestampMs=J}),98);
__d("MAWBumpMessageMsgReplySnippet",["getMAWLocalizedBumpMsgReplySnippet"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.isAuthorMe,d=a.recipientName,e=a.replySenderIsMe,f=a.replySenderIsRecipient;a=a.senderName;var g="participantBumpedParticipantMessage";b&&e?g="currentUserBumpedOwnMessage":b?g="currentUserBumpedMessage":e?g="participantBumpedCurrentUserMessage":f&&(g="participantBumpedOwnMessage");return c("getMAWLocalizedBumpMsgReplySnippet")(g,a,d)}g.buildBumpMessageReplySnippet=a}),98);
__d("MAWMsgReplyStatus",["I64","LSIntEnum","LSReplyMessageStatus","MAWMsgReply","MAWMsgType","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){switch(a){case d("MAWMsgType").MSG_TYPE.DELETE_FOR_ME:case d("MAWMsgType").MSG_TYPE.REVOKED:return c("LSReplyMessageStatus").DELETED;case d("MAWMsgType").MSG_TYPE.TEXT:case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.ADMIN:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.XMA:case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case d("MAWMsgType").MSG_TYPE.RAVEN:case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:return c("LSReplyMessageStatus").VALID;case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:return c("LSReplyMessageStatus").TEMPORARY_UNAVAILABLE;case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:return c("LSReplyMessageStatus").UNKNOWN;case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:return c("LSReplyMessageStatus").EXPIRED;default:return void 0}}function k(a){if(a.isUnsent===!0)return(h||(h=d("LSIntEnum"))).ofNumber(c("LSReplyMessageStatus").DELETED);if(a.isExpired===!0)return(h||(h=d("LSIntEnum"))).ofNumber(c("LSReplyMessageStatus").EXPIRED);switch(a.displayedContentTypes){case(h||(h=d("LSIntEnum"))).ofNumber(1):return(h||(h=d("LSIntEnum"))).ofNumber(c("LSReplyMessageStatus").VALID);default:return void 0}}function a(a){var b=l(a),e;if(c("gkx")("15418")){var f;((f=a.replyContent)==null?void 0:f.replyToLSMessage)!=null&&(e=k(a.replyContent.replyToLSMessage));d("MAWMsgReply").assertIfQuotedV2("getLSReplyMessageStatus",b!=null?(i||(i=d("I64"))).to_string(b):void 0,e!=null?(i||(i=d("I64"))).to_string(e):void 0)}return(f=e)!=null?f:b}function l(a){a=j(a.replyStatusType);if(a!=null)return(h||(h=d("LSIntEnum"))).ofNumber(a)}g.getReplyMessageStatus=j;g.getReplyStatusFromLSMessage=k;g.getLSReplyMessageStatus=a}),98);
__d("MAWMsgReplySnippet",["fbt","EntMessageReplyType","FBLogger","I64","LSIntEnum","LSReplyMessageAttachmentType","LSReplyMessageStatus","MAWBumpMessageMsgReplySnippet","MAWCurrentUser","MAWMsgReply","MAWMsgReplyStatus","MAWMsgType","MAWPostMentionXMASnippetFbt","ODS","gkx","justknobx"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k;function l(a){var b=a.isAuthorMe,e=a.isBumpMsg;e=e===void 0?!1:e;var f=a.isDeletedMsg,g=a.isFBPostMention;g=g===void 0?!1:g;var k=a.isFBStoryMention;k=k===void 0?!1:k;var l=a.isIGStoryMention;l=l===void 0?!1:l;var m=a.isIGXMAStoryShare;m=m===void 0?!1:m;var n=a.isMsgHighlightsTabFriendUpdatesReply;n=n===void 0?!1:n;var o=a.isNoteReply;o=o===void 0?!1:o;var p=a.isPostPrivateReply;p=p===void 0?!1:p;var q=a.isStoryHighlightShare;q=q===void 0?!1:q;var r=a.isStoryProducerReply,s=a.isStoryReaction;s=s===void 0?!1:s;var t=a.isStoryReply;t=t===void 0?!1:t;var u=a.isStoryShare;u=u===void 0?!1:u;var v=a.recipientName,w=a.replyAttachmentType,x=a.replySenderIsMe;x=x===void 0?!1:x;var y=a.replySenderIsRecipient;y=y===void 0?!1:y;var z=a.senderName;a=a.storyShareAuthor;switch(!0){case g:return b?d("MAWPostMentionXMASnippetFbt").getCurrentUserSendPostMentionSnippetFbt(v):d("MAWPostMentionXMASnippetFbt").getParticipantSendPostMentionSnippetFbt(z);case e:return d("MAWBumpMessageMsgReplySnippet").buildBumpMessageReplySnippet({isAuthorMe:b,recipientName:v,replySenderIsMe:x,replySenderIsRecipient:y,senderName:z});case q:return a!=null?h._(/*BTDS*/"Sent {username}'s story highlight",[h._param("username",a)]):h._(/*BTDS*/"Sent a story highlight");case m&&w!=null&&(i||(i=d("I64"))).equal(w,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").FEED_POST)):return a!=null?h._(/*BTDS*/"Sent {username}'s story",[h._param("username",a)]):h._(/*BTDS*/"Sent a story");case b&&f:return h._(/*BTDS*/"Has respondido a un mensaje suprimido");case b&&u:return h._(/*BTDS*/"Has compartido una historia");case b&&s:return h._(/*BTDS*/"You reacted to their story");case b&&l:return v!=null?h._(/*BTDS*/"Has mencionado a \u0040{name} en tu historia",[h._param("name",v)]):h._(/*BTDS*/"Has mencionado a un participante en tu historia");case b&&k:return v!=null?h._(/*BTDS*/"Has mencionado a {name} en tu historia",[h._param("name",v)]):h._(/*BTDS*/"Has mencionado a un participante en tu historia");case l:case k:return h._(/*BTDS*/"Te ha mencionado en su historia");case!b&&n:return h._(/*BTDS*/"{name} ha respondido a tu publicaci\u00f3n",[h._param("name",z)]);case b&&n:return h._(/*BTDS*/"Has respondido a su publicaci\u00f3n");case b&&p:return v!=null?h._(/*BTDS*/"Has respondido a la publicaci\u00f3n de {name}",[h._param("name",v)]):h._(/*BTDS*/"Has respondido a la publicaci\u00f3n de un participante");case p:return h._(/*BTDS*/"{name} ha respondido a tu publicaci\u00f3n",[h._param("name",z)]);case!b&&o:return h._(/*BTDS*/"{name} ha respondido a tu nota",[h._param("name",z)]);case b&&o:return h._(/*BTDS*/"Has respondido a su nota");case b&&x:return h._(/*BTDS*/"Has respondido a tu propio mensaje");case b&&t:return r===!0?h._(/*BTDS*/"Has respondido a tu historia"):v!=null?h._(/*BTDS*/"Has respondido a la historia de {name}",[h._param("name",v)]):h._(/*BTDS*/"Has respondido a la historia e un participante");case b:return v!=null?h._(/*BTDS*/"Has respondido a {other_name}",[h._param("other_name",v)]):h._(/*BTDS*/"Has respondido a un participante");case f:return h._(/*BTDS*/"{name} ha respondido a un mensaje suprimido",[h._param("name",z)]);case u:return h._(/*BTDS*/"{user} ha compartido una historia",[h._param("user",z)]);case s:return h._(/*BTDS*/"Reacted to your story");case y:return h._(/*BTDS*/"{other} ha respondido a su mensaje",[h._param("other",z)]);case x&&t:return r===!0?h._(/*BTDS*/"{name} ha respondido a su historia",[h._param("name",z)]):h._(/*BTDS*/"{name} ha respondido a tu historia",[h._param("name",z)]);case x:return h._(/*BTDS*/"{other_name} te ha respondido",[h._param("other_name",z)]);default:return v!=null?h._(/*BTDS*/"{other} ha respondido a {other_name}",[h._param("other",z),h._param("other_name",v)]):h._(/*BTDS*/"{other} ha respondido al participante",[h._param("other",z)])}}function m(a,b,c,e,f,g,k,l){b===void 0&&(b=!1);c===void 0&&(c=!1);g===void 0&&(g=!1);k===void 0&&(k=!1);if(b){b=d("MAWBumpMessageMsgReplySnippet").buildBumpMessageReplySnippet({isAuthorMe:a,recipientName:f,replySenderIsMe:g,replySenderIsRecipient:k,senderName:l});return b==null?void 0:b.toString()}if(c)if(a)return h._(/*BTDS*/"Has respondido a un mensaje suprimido").toString();else return h._(/*BTDS*/"{name} ha respondido a un mensaje suprimido",[h._param("name",l)]).toString();if(a&&g)return h._(/*BTDS*/"Has respondido a tu propio mensaje").toString();if(k)return h._(/*BTDS*/"{other} ha respondido a su mensaje",[h._param("other",l)]).toString();if((i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(25))){b=a?d("MAWPostMentionXMASnippetFbt").getCurrentUserSendPostMentionSnippetFbt(f):d("MAWPostMentionXMASnippetFbt").getParticipantSendPostMentionSnippetFbt(l);return b==null?void 0:b.toString()}if((i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(22)))if(a)return f!=null?h._(/*BTDS*/"Has mencionado a {name} en tu historia",[h._param("name",f)]).toString():h._(/*BTDS*/"Has mencionado a un participante en tu historia").toString();else return h._(/*BTDS*/"Te ha mencionado en su historia").toString();if((i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(14)))if(a)return h._(/*BTDS*/"Has respondido a su publicaci\u00f3n").toString();else return h._(/*BTDS*/"{name} ha respondido a tu publicaci\u00f3n",[h._param("name",l)]).toString();if((i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(13)))if(a)return f!=null?h._(/*BTDS*/"Has respondido a la publicaci\u00f3n de {name}",[h._param("name",f)]).toString():h._(/*BTDS*/"Has respondido a la publicaci\u00f3n de un participante").toString();else return h._(/*BTDS*/"{name} ha respondido a tu publicaci\u00f3n",[h._param("name",l)]).toString();if((i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(18)))if(a)return h._(/*BTDS*/"Has respondido a su nota").toString();else return h._(/*BTDS*/"{name} ha respondido a tu nota",[h._param("name",l)]).toString();if((i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(2))||(i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(24))){c=(i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(24));if(a)return c?h._(/*BTDS*/"Has respondido a tu historia").toString():f!=null?h._(/*BTDS*/"Has respondido a la historia de {name}",[h._param("name",f)]).toString():h._(/*BTDS*/"Has respondido a la historia e un participante").toString();else if(g)return c?h._(/*BTDS*/"{name} ha respondido a su historia",[h._param("name",l)]).toString():h._(/*BTDS*/"{name} ha respondido a tu historia",[h._param("name",l)]).toString()}if((i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(12)))if(a)return h._(/*BTDS*/"You reacted to their story").toString();else return h._(/*BTDS*/"Reacted to your story").toString();if((i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(4)))if(a)return h._(/*BTDS*/"Has compartido una historia").toString();else return h._(/*BTDS*/"{user} ha compartido una historia",[h._param("user",l)]).toString();if(a)return f!=null?h._(/*BTDS*/"Has respondido a {other_name}",[h._param("other_name",f)]).toString():h._(/*BTDS*/"Has respondido a un participante").toString();else if(g)return h._(/*BTDS*/"{other_name} te ha respondido",[h._param("other_name",l)]).toString();else return f!=null?h._(/*BTDS*/"{other} ha respondido a {other_name}",[h._param("other",l),h._param("other_name",f)]).toString():h._(/*BTDS*/"{other} ha respondido al participante",[h._param("other",l)]).toString()}function n(a,b,e,f){f=f!=null&&f===(j||(j=d("LSIntEnum"))).ofNumber(c("EntMessageReplyType").BUMP);var g=d("MAWMsgReplyStatus").getReplyStatusFromLSMessage(a),h=d("MAWMsgReply").getReplyUserIdFromLSMessage(a),k=d("MAWCurrentUser").getID();a=(i||(i=d("I64"))).to_string(a.senderId)===k;k=b===k;if(h==null||b==null)throw c("FBLogger")("messenger_e2ee_web").mustfix("Error getting reply snippet without replyToUserId or / and replying message sender");g=g===(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageStatus").DELETED);var l="$PARTICIPANT_FIRST_NAME("+i.to_string(h)+")";h=b===i.to_string(h);b="$PARTICIPANT_FIRST_NAME("+b+")";k=m(k,f,g,e,l,a,h,b);return k==null?void 0:k.toString()}function a(a){var b=o(a),e;if(c("gkx")("15418")){if(a.replyContent!=null){var f=a.replyContent.replyToLSMessage,g=d("MAWMsgReply").getReplySourceTypeV2(a),h=d("MAWMsgReply").getReplyType(a);if(f==null||g==null||h==null){c("FBLogger")("messenger_e2ee_web").mustfix("Error getting reply snippet without replyToLSMessage and/or replySourceTypeV2 and/or replyType");return}e=n(f,a.sender,g,h)}d("MAWMsgReply").assertIfQuotedV2("getReplySnippet",e,b)}return(f=e)!=null?f:b}function o(a){var b=a.isAuthorMe,e=a.isFBPostMention;e=e===void 0?!1:e;var f=a.isFBStoryMention;f=f===void 0?!1:f;var g=a.isIGStoryMention;g=g===void 0?!1:g;var h=a.isIGXMAStoryShare,i=a.isMsgHighlightsTabFriendUpdatesReply;i=i===void 0?!1:i;var j=a.isNoteReply;j=j===void 0?!1:j;var m=a.isPostPrivateReply;m=m===void 0?!1:m;var n=a.isStoryHighlightShare;n=n===void 0?!1:n;var o=a.isStoryProducerReply,p=a.isStoryReaction,q=a.isStoryReply,r=a.isStoryShare;r=r===void 0?!1:r;var s=a.replySenderIsMe,t=a.replySourceId,u=a.replyStatusType,v=a.replyToUserId,w=a.sender,x=a.storyShareAuthor;a=a.type_;a=a===d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE;if(t==null&&!(c("justknobx")._("2998")&&Boolean(q))&&!r&&!g&&!f&&!n&&!j&&!e)return;if(v==null||w==null)throw c("FBLogger")("messenger_web").mustfixThrow("Error getting reply snippet without replyToUserId or sender");(k||(k=d("ODS"))).bumpEntityKey(3185,"armadillo_reply","creating_reply_snippet");return(t=l({isAuthorMe:b,isBumpMsg:a,isDeletedMsg:d("MAWMsgReplyStatus").getReplyMessageStatus(u)===c("LSReplyMessageStatus").DELETED,isFBPostMention:e,isFBStoryMention:f,isIGStoryMention:g,isIGXMAStoryShare:h,isMsgHighlightsTabFriendUpdatesReply:i,isNoteReply:j,isPostPrivateReply:m,isStoryHighlightShare:n,isStoryProducerReply:o,isStoryReaction:p,isStoryReply:q,isStoryShare:r,recipientName:"$PARTICIPANT_FIRST_NAME("+v+")",replySenderIsMe:s,replySenderIsRecipient:w===v,senderName:"$PARTICIPANT_FIRST_NAME("+w+")",storyShareAuthor:x}))==null?void 0:t.toString()}g.buildLocalizedReplySnippetLegacy=l;g.getReplySnippetFromLSMessage=n;g.getReplySnippet=a}),226);
__d("LSMessageUnsendabilityStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({CAN_UNSEND:0,DENY_LOG_MESSAGE:1,DENY_TOMBSTONE_MESSAGE:2,DENY_FOR_NON_SENDER:3,DENY_P2P_PAYMENT:4,DENY_STORY_REACTION:5,DENY_BLOB_ATTACHMENT:6,DENY_MESSAGE_NOT_FOUND:7,DENY_MESSAGE_INSTAGRAM_DIRECT_WRITE_RESTRICTION:8});f["default"]=a}),66);
__d("MAWBridgeBuildAdminMsg",["MAWAdminMsg","MAWAdminMsgNormalized","MAWLocalizationType","MAWSubscribeToContactNames","MAWThreadCustomizationUtils","justknobx"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a==null?void 0:a.replace(/\$/g,"$$$$")}function a(a,b,c){c===void 0&&(c=0);a=d("MAWAdminMsgNormalized").deconstructContactIdsFromAdminContent(b,a);var e=a.contactIds;a=a.contents;var f=d("MAWThreadCustomizationUtils").nicknameOnlyForFirstParticipantChecking(b),g=d("MAWThreadCustomizationUtils").skipNicknameCheck(b);if(c===1){var j=i(b);return d("MAWAdminMsg").buildLocalizedString(a.map(h),e.map(function(a,b){return f&&b>0||g?j===d("MAWSubscribeToContactNames").ContactNameMode.FIRST_NAME?"$CONTACT_FIRST_NAME("+a+")":"$CONTACT_FULL_NAME("+a+")":j===d("MAWSubscribeToContactNames").ContactNameMode.FIRST_NAME?"$PARTICIPANT_FIRST_NAME("+a+")":"$PARTICIPANT_FULL_NAME("+a+")"}),b)}return d("MAWAdminMsg").buildLocalizedString(a,e,b)}function i(a){return c("justknobx")._("4603")?d("MAWSubscribeToContactNames").getContactNameModeFromLocalizationType(a):a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP?d("MAWSubscribeToContactNames").ContactNameMode.FIRST_NAME:d("MAWSubscribeToContactNames").ContactNameMode.FULL_NAME}g.buildAdminMsgText=a}),98);
__d("LSTransportKey",[],(function(a,b,c,d,e,f){a=Object.freeze({ADVANCED_CRYPTO:"AdvancedCrypto",CARRIER_MESSAGING:"CarrierMessaging",FB_BROKER:"FBBroker",FB_LEGACY_BROKER:"FBLegacyBroker",TAM:"TAM",WHATS_APP:"WhatsApp",INSTAMADILLO:"Instamadillo",ENCRYPTED_BACKUPS:"EncryptedBackups",CLIENT_CONTACTS_PLACEHOLDER:"",ENCRYPTED_BACKUPS_MEDIA:"EncryptedBackupsMedia"});f["default"]=a}),66);
__d("MAWBridgeMsgUtils",["LSTransportKey"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=Object.keys(c("LSTransportKey")).find(function(b){return c("LSTransportKey")[b]===a});return b?c("LSTransportKey")[b]:"WhatsApp"}g.convertStringToLSTransportKeyType=a}),98);
__d("MAWMsgErrorUtils",["gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=[126];function a(a){var b=c("gkx")("7471");return!b?!1:h.includes(a)}g.isWellbeingError=a}),98);
__d("MAWBridgeBuildMsg",["fbt","I64","LSAuthorityLevel","LSIntEnum","LSMessageSendStatus","LSMessageUnsendabilityStatus","MAWAckLevel","MAWBridgeBuildAdminMsg","MAWBridgeBuildMsgMentions","MAWBridgeMsg","MAWBridgeMsgUtils","MAWJids","MAWMsg","MAWMsgErrorUtils","MAWMsgReply","MAWMsgReplySnippet","MAWMsgReplyStatus","MAWMsgType","MAWTimeUtils","MAWVault","MWPBumpEntityKey","gkx","isMWBumpMessage"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;function k(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return b.filter(Boolean).reduce(function(a,b){return[].concat(a,b)},[])}function l(a){return a!=null?d("MAWVault").unvault(a):void 0}function m(a){return a!=null?d("MAWVault").vault(a):void 0}function n(a){return babelHelpers["extends"]({},a,{replyMessageText:m(a.replyMessageText),text:m(a.text)})}function o(a){var b=d("MAWMsgReply").getReplyMessageText(a),e=a.adminContent,f=a.adminType,g=a.adminVersion,i=a.content,j=a.isAdminMessage;i=i;j&&e!=null&&f!=null&&(i=d("MAWBridgeBuildAdminMsg").buildAdminMsgText(e,f,g));j=d("MAWMsgReplySnippet").getReplySnippet(a);a.type_===d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE&&(i=m(a.replySourceId==null?"":j!=null?j:h._(/*BTDS*/"Ha destacado un mensaje").toString()));e=k(a.mentionedJids,d("MAWMsgReply").getReplyMentionedJids(a));f=a.commands?a.commands:[];g=f.length>0&&c("gkx")("7846");return e.length>0||g?n(d("MAWBridgeBuildMsgMentions").buildMsgTextWithMentions(l(i),e,l(b),g?f:void 0)):{replyMessageText:b,text:i}}function p(a){a=a.ephemeralDurationInSec;return a!=null?(i||(i=d("I64"))).of_int32(a):void 0}function a(a,b,e,f){var g=c("isMWBumpMessage")(b==null?void 0:b.replyType)?b==null?void 0:b.replyMessageText:b==null?void 0:b.text;b=k(e,b==null?void 0:(e=b.mentionIds)==null?void 0:e.split(",").map(d("MAWJids").toUserJid));e=f!=null?f:[];return b.length>0||e.length>0?n(d("MAWBridgeBuildMsgMentions").buildMsgTextWithMentions(l(a),b,l(g),e)):{replyMessageText:g,text:a}}function b(a,b){var e,f=o(a),g=a.type_===d("MAWMsg").unsent;e=d("MAWTimeUtils").toTimestamp(g?(e=a.originalTs)!=null?e:a.ts:a.ts);if(d("MAWMsgReply").getReplyAttachmentId(a)!=null&&d("MAWMsgReply").getReplyAttachmentPlaintextHash(a)==null){var h;d("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.reply_attachment_media_missing_plaintext_hash","new_message_handler_for_reply_type_"+(i||(i=d("I64"))).to_float((h=d("MAWMsgReply").getReplyAttachmentType(a))!=null?h:(i||(i=d("I64"))).zero))}h=d("MAWBridgeMsgUtils").convertStringToLSTransportKeyType(a.transportKey);return babelHelpers["extends"]({},f,{adminMsgCtaId:b==null?void 0:b.ctaId,adminMsgCtaTitle:b==null?void 0:b.title,adminMsgCtaType:b==null?void 0:b.ctaType,authorityLevel:(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE),cannotUnsendReason:g||!a.isAuthorMe?(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageUnsendabilityStatus").DENY_FOR_NON_SENDER):void 0,displayedContentTypes:d("MAWMsg").getDisplayedContentTypes(a.type_,a.isForwarded,a.isExpiredXmaMsg,a.replySourceId!=null,a.unsupportedType,a.xmaMessageType),editCount:(i||(i=d("I64"))).of_int32((f=a.editCount)!=null?f:0),ephemeralDurationInSec:p(a),groupId:(b=a.groupId)!=null?b:void 0,groupIndex:a.groupIndex!=null?(i||(i=d("I64"))).of_float(a.groupIndex):void 0,groupSize:a.groupSize!=null?(i||(i=d("I64"))).of_float(a.groupSize):void 0,hotEmojiSize:d("MAWBridgeMsg").getSpecialTextSize(a),isCollapsed:(f=a.isCollapsed)!=null?f:!1,isUnsent:g,messageId:a.msgId,primarySortKey:i.of_float(a.sortOrderMs),replyAttachmentId:d("MAWMsgReply").getReplyAttachmentId(a),replyAttachmentPlaintextHash:d("MAWMsgReply").getReplyAttachmentPlaintextHash(a),replyAttachmentType:d("MAWMsgReply").getReplyAttachmentType(a),replyMediaExpirationTimestampMs:d("MAWMsgReply").getReplyMediaExpirationTimestampMs(a),replyMediaPreviewHeight:d("MAWMsgReply").getReplyMediaHeight(a),replyMediaPreviewWidth:d("MAWMsgReply").getReplyMediaWidth(a),replySnippet:d("MAWMsgReplySnippet").getReplySnippet(a),replySourceId:d("MAWMsgReply").getReplySourceId(a),replySourceTimestampMs:d("MAWMsgReply").getReplyTimestampMs(a),replySourceType:d("MAWMsgReply").getReplySourceType(a),replySourceTypeV2:d("MAWMsgReply").getReplySourceTypeV2(a),replyStatus:d("MAWMsgReplyStatus").getLSReplyMessageStatus(a),replyToUserId:d("MAWMsgReply").getReplyUserId(a),sendStatus:d("MAWAckLevel").levelToMessagingSendStatus(a.ack),sendStatusV2:d("MAWAckLevel").levelToMessagingSendStatusV2(a.ack),subscriptErrorMessage:q(a),timestampMs:e,transportKey:h,unsentTimestampMs:g?d("MAWTimeUtils").toTimestamp(a.ts):void 0})}function q(a){var b=c("gkx")("7471");if(!b)return;b=a.ack;a=a.applicationErrorCode;b=d("MAWAckLevel").levelToMessagingSendStatusV2(b);b=(i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSendStatus").RETRIABLE_ERROR))||(i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSendStatus").NON_RETRIABLE_ERROR));if(!b)return;return d("MAWMsgErrorUtils").isWellbeingError(a)?h._(/*BTDS*/"Couldn't send.").toString():h._(/*BTDS*/"Couldn't send. Something went wrong.").toString()}g.getEphemeralDurationInSec=p;g.buildOptimisticMessage=a;g.buildNewAndUpdatedMessageSharedParams=b;g.getSubscriptErrorMessage=q}),226);
__d("MAWBridgeMsgUpdatedHandler",["FBLogger","MAWAdminMsgCTA","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWMsgFetchLSReplyMsgAndAttachment","MAWUpdateMsg","Promise","ReQL","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,e.chatJid,"MAWBridgeMsgUpdatedHandler",function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,f){var g,h=(yield (g=d("ReQL")).firstAsync(g.fromTableAscending(b.messages.index("messageId")).getKeyRange(e.msgId)));g=(yield g.firstAsync(g.fromTableAscending(b.attachments).getKeyRange(f,e.msgId)));if(h==null){c("FBLogger")("messenger_web").info("existing message is null for type %s, and attachment is null: %s",e.type_,g==null);return}g=(yield d("MAWAdminMsgCTA").getAdminMsgCtaStep(b,f,e));f=(yield i(a,e));return d("MAWUpdateMsg").call(b,f,h,g)});return function(a,b){return f.apply(this,arguments)}}())}function i(a,e){if(c("gkx")("15418")){a=d("MAWMsgFetchLSReplyMsgAndAttachment").fetchReplyLocalViaLS(a,e);if(a)return a}return(h||(h=b("Promise"))).resolve(e)}g.call=a}),98);
__d("LSClearMessagePlaceholderRangeStoredProcedure",["LSClearMessagePlaceholderRange","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSClearMessagePlaceholderRange"),e.threadKey,e.messageId,e.maxTimestampMs);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSInsertNewMessageRangeStoredProcedure",["LSInsertNewMessageRange","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSInsertNewMessageRange"),e.threadKey,e.newMinTs,e.newMaxTs,e.newMinMid,e.newMaxMid,e.lowerOverlap,e.upperOverlap,e.hasMoreBefore,e.hasMoreAfter,e.requestedMessageId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWBridgeMsgsLoadedHandler",["I64","LSClearMessagePlaceholderRangeStoredProcedure","LSFactory","LSInsertNewMessageRangeStoredProcedure","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWTimeUtils","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.chatJid,"MAWBridgeMsgsLoadedHandler",function(a,e){return c("LSClearMessagePlaceholderRangeStoredProcedure")(c("LSFactory")(a),{maxTimestampMs:d("MAWTimeUtils").MAX_TIMESTAMP_MS,messageId:"",threadKey:e}).then(function(){if(c("gkx")("23927")){var f,g,i,j,k,l,m,n;f=(f=(f=b.rangeExtensionType)==null?void 0:f.hasMoreBefore)!=null?f:!1;g=(g=(g=b.rangeExtensionType)==null?void 0:g.hasMoreAfter)!=null?g:!1;i=f&&((i=b.rangeExtensionType)==null?void 0:i.minMsgTs)!=null?(h||(h=d("I64"))).of_float(b.rangeExtensionType.minMsgTs):d("MAWTimeUtils").MIN_TIMESTAMP_MS;j=g&&((j=b.rangeExtensionType)==null?void 0:j.maxMsgTs)!=null?(h||(h=d("I64"))).of_float(b.rangeExtensionType.maxMsgTs):d("MAWTimeUtils").MAX_TIMESTAMP_MS;k=(k=(k=b.rangeExtensionType)==null?void 0:k.minMsgId)!=null?k:"";l=(l=(l=b.rangeExtensionType)==null?void 0:l.maxMsgId)!=null?l:"";m=((m=b.rangeExtensionType)==null?void 0:m.rangeKind)==="before"?i:d("MAWTimeUtils").MIN_TIMESTAMP_MS;n=((n=b.rangeExtensionType)==null?void 0:n.rangeKind)==="after"?j:d("MAWTimeUtils").MAX_TIMESTAMP_MS;return c("LSInsertNewMessageRangeStoredProcedure")(c("LSFactory")(a),{hasMoreAfter:g,hasMoreBefore:f,lowerOverlap:m,newMaxMid:l,newMaxTs:j,newMinMid:k,newMinTs:i,threadKey:e,upperOverlap:n})}else{f=((g=b.rangeExtensionType)==null?void 0:g.minMsgTs)!=null?(h||(h=d("I64"))).of_float(b.rangeExtensionType.minMsgTs):d("MAWTimeUtils").MIN_TIMESTAMP_MS;l=((m=b.rangeExtensionType)==null?void 0:m.maxMsgTs)!=null?(h||(h=d("I64"))).of_float(b.rangeExtensionType.maxMsgTs):d("MAWTimeUtils").MAX_TIMESTAMP_MS;i=(k=(j=b.rangeExtensionType)==null?void 0:j.minMsgId)!=null?k:"";m=(g=(n=b.rangeExtensionType)==null?void 0:n.maxMsgId)!=null?g:"";k=((j=b.rangeExtensionType)==null?void 0:j.rangeKind)==="extensionBefore"?f:d("MAWTimeUtils").MIN_TIMESTAMP_MS;g=((n=b.rangeExtensionType)==null?void 0:n.rangeKind)==="extensionAfter"?l:d("MAWTimeUtils").MAX_TIMESTAMP_MS;j=(n=(j=b.rangeExtensionType)==null?void 0:j.hasMoreBefore)!=null?n:!1;n=(n=(n=b.rangeExtensionType)==null?void 0:n.hasMoreAfter)!=null?n:!1;return c("LSInsertNewMessageRangeStoredProcedure")(c("LSFactory")(a),{hasMoreAfter:n,hasMoreBefore:j,lowerOverlap:k,newMaxMid:m,newMaxTs:l,newMinMid:i,newMinTs:f,threadKey:e,upperOverlap:g})}})})}g.call=a}),98);
__d("MAWEphemeralMessageExpirationStorage",["LSDatabaseSingleton","MAWBridgeDeleteMessagesHandler","Promise","asyncToGeneratorRuntime","clearTimeout","promiseDone","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=new Map();function k(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){yield (i||(i=b("Promise"))).all(c.map(function(b){var c=b.ts,e=b.msgId;e={msgId:e,ts:c};c=b.threadJid;b=[e];e={messages:b,threadJid:c};return d("MAWBridgeDeleteMessagesHandler").call(a,e)})),j["delete"](e)});return l.apply(this,arguments)}function m(a,e,g){return c("setTimeout")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var g=(yield (h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton);c("promiseDone")(g.runInTransaction(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){yield k(b,a,e)});return function(a){return c.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":66"))}),g)}function a(a,b,d,e){a=j.get(d);var f;if(a==null)f=[b];else{c("clearTimeout")(a.timeoutId);var g=a.msgs.map(function(a){return a.msgId}).indexOf(b.msgId)===-1;g&&a.msgs.push(b);f=a.msgs}g=m(f,d,e);j.set(d,{expirationTs:d,msgs:f,timeoutId:g})}function e(a){var b=a.msgId;a=j.get(a.countdownTs);if(a==null)return;b=a.msgs.map(function(a){return a.msgId}).indexOf(b);if(b>-1){a.msgs.splice(b,1);return}}g.setMessageForExpiration=a;g.clearMessageFromExpiration=e}),98);
__d("MAWBridgeMsgsStartCountdownHandler",["I64","MAWEphemeralMessageExpirationStorage","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWTimeUtils","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,c){return c.msgs.reduce(function(c,e){return c.then(function(){d("MAWEphemeralMessageExpirationStorage").setMessageForExpiration(a,e,e.countdownTs,e.millisecondsUntilCountdownTs);(i||(i=d("I64"))).of_int32(e.millisecondsUntilCountdownTs);return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,e.threadJid,"MAWBridgeMsgsStartCountdownHandler",function(a,c){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.messages).getKeyRange(c,d("MAWTimeUtils").toTimestamp(e.ts),e.msgId)).then(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){if(c==null)return(h||(h=b("Promise"))).resolve();c=babelHelpers["extends"]({},c,{ephemeralExpirationTs:(i||(i=d("I64"))).of_float(e.countdownTs)});yield a.messages.put(c)});return function(a){return c.apply(this,arguments)}}())})})},(h||(h=b("Promise"))).resolve())}g.call=a}),98);
__d("MAWMedia",["LSIntEnum","MAWDbMedia","MessagingAttachmentType"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){if(a===d("MAWDbMedia").IMAGE)return b!=null?(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_IMAGE):(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE);else if(a===d("MAWDbMedia").VIDEO)return b!=null?(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_VIDEO):(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO);else if(a===d("MAWDbMedia").PTT)return(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO);else if(a===d("MAWDbMedia").GIF)return(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE);else if(a===d("MAWDbMedia").STICKER)return(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER);else if(a===d("MAWDbMedia").DOCUMENT_FILE)return(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").FILE);return(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").NONE)}g.mediaTypeToMessageAttachmentType=a}),98);
__d("MAWBridgeNewMediaHandler",["FBLogger","I64","LSAuthorityLevel","LSIntEnum","LSThreadMediaGalleryGroup","MAWDbMedia","MAWMedia","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","Promise","ReQL","WAMediaHdType","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,b,e,f,g,h){var k=b.messagesSortOrderMs?(i||(i=d("I64"))).of_float(b.messagesSortOrderMs[e]):b.sortOrderMs!=null?(i||(i=d("I64"))).of_float(b.sortOrderMs):(i||(i=d("I64"))).of_float(b.ts*1e3);return{accessibilitySummaryText:b.accessibilitySummaryText,attachmentFbid:f,attachmentIndex:(f=a==null?void 0:a.attachmentIndex)!=null?f:(i||(i=d("I64"))).zero,attachmentType:(f=a==null?void 0:a.attachmentType)!=null?f:d("MAWMedia").mediaTypeToMessageAttachmentType(b.mediaType,b.ephemeralMediaViewMode),authorityLevel:(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE),ephemeralMediaState:b.ephemeralMediaState!=null?(i||(i=d("I64"))).of_int32(b.ephemeralMediaState):a==null?void 0:a.ephemeralMediaState,ephemeralMediaViewMode:b.ephemeralMediaViewMode!=null?(i||(i=d("I64"))).of_int32(b.ephemeralMediaViewMode):a==null?void 0:a.ephemeralMediaViewMode,filename:(f=(f=b.filenames!=null?b.filenames[e]:null)!=null?f:b.defaultFilename)!=null?f:a==null?void 0:a.filename,filesize:b.filesize==null?a==null?void 0:a.filesize:(i||(i=d("I64"))).of_int32(b.filesize),hasMedia:b.hasMedia,hasXma:!1,isHd:c("gkx")("9576")?((f=b.hdTypes)==null?void 0:f[e])===d("WAMediaHdType").HD_TYPE_HQ_4K:void 0,isSharable:!1,messageId:e,offlineAttachmentId:g,playableDurationMs:b.duration==null?a==null?void 0:a.playableDurationMs:(i||(i=d("I64"))).of_int32(b.duration),previewHeight:b.previewHeight==null?a==null?void 0:a.previewHeight:(i||(i=d("I64"))).of_int32(b.previewHeight),previewHeightLarge:b.previewHeightLarge==null?a==null?void 0:a.previewHeightLarge:(i||(i=d("I64"))).of_int32(b.previewHeightLarge),previewWidth:b.previewWidth==null?a==null?void 0:a.previewWidth:(i||(i=d("I64"))).of_int32(b.previewWidth),previewWidthLarge:b.previewWidthLarge==null?a==null?void 0:a.previewWidthLarge:(i||(i=d("I64"))).of_int32(b.previewWidthLarge),threadKey:h,timestampMs:k,titleText:b.accessibilitySummaryText,transportKey:(f=b.transportKey)!=null?f:"WhatsApp"}}function l(a,b){var c=b.hasPreviewMedia!=null;return{id:a,mainMediaStatus:b.hasMedia?(j||(j=d("LSIntEnum"))).ofNumber(1):(j||(j=d("LSIntEnum"))).ofNumber(4),mainMediaStatusDetails:"initial_media_download",previewMediaStatus:c?b.hasPreviewMedia===!0?(j||(j=d("LSIntEnum"))).ofNumber(1):(j||(j=d("LSIntEnum"))).ofNumber(4):void 0,previewMediaStatusDetails:c?"initial_media_download":void 0}}function m(a,b,c){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){var g=e.mediaId,j=e.msgIds,l=e.offlineAttachmentId,m=e.plaintextHash;yield o(a,e);var n=q(g,m),p=l!=null?l:n;g=!1;var s=r(e),t=null;c("gkx")("4219")&&(t=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.attachments_ranges_v2__generated).getKeyRange(f).filter(function(a){return(i||(i=d("I64"))).equal(a.mediaGroup,s)}))));yield (h||(h=b("Promise"))).all(j.map(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=a.attachments,h=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(c).getKeyRange(f,b)));b=k(h,e,b,n,p,f);e.skipShouldUpdateHasMore!==!0&&t!=null&&(i||(i=d("I64"))).le(b.timestampMs,t.minTimestampMs)&&(g=!0);if(h!=null){return c.upsert([h.threadKey,h.messageId,h.attachmentFbid],babelHelpers["extends"]({},b,{transportKey:(h=h.transportKey)!=null?h:b.transportKey}))}else return c.add(b)});return function(a){return c.apply(this,arguments)}}()));if(t!=null&&t.hasMoreBefore!==!0&&g&&c("gkx")("4219")){m=babelHelpers["extends"]({},t,{hasMoreBefore:!0});yield a.attachments_ranges_v2__generated.upsert([t.threadKey,t.mediaGroup,t.minTimestampMs],m)}});return n.apply(this,arguments)}function o(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(c("gkx")("11968")!==!0)return;var e=b.mediaId,f=b.plaintextHash;if(f==null){c("FBLogger")("messenger_web_media").mustfix("[NewMedia] No valid media plaintextHash found in reducer %s",e);return}e=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.client_media_status).getKeyRange(f)));e=e!=null&&!(i||(i=d("I64"))).equal(e.mainMediaStatus,(j||(j=d("LSIntEnum"))).ofNumber(4));if(e)return;yield a.client_media_status.add(l(f,b))});return p.apply(this,arguments)}function q(a,b){return""+(b!=null?b:a.toString())}function r(a){switch(a.mediaType){case d("MAWDbMedia").MEDIA_TYPE.IMAGE:case d("MAWDbMedia").MEDIA_TYPE.VIDEO:return(j||(j=d("LSIntEnum"))).ofNumber(c("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS);case d("MAWDbMedia").MEDIA_TYPE.DOCUMENT_FILE:return(j||(j=d("LSIntEnum"))).ofNumber(c("LSThreadMediaGalleryGroup").FILES_ONLY);default:return(j||(j=d("LSIntEnum"))).ofNumber(c("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS)}}function a(a,b){var c=b.threadJid;return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,c,"MAWBridgeNewMediaHandler",function(a,c){return m(a,b,c)})}g.callWithoutWaitingForAnything=m;g.call=a}),98);
__d("LSUpsertAttachmentRange",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.sequence([function(c){return b.forEach(b.db.table(17).fetch([[[a[0],a[1]]]]),function(a){return a["delete"]()})},function(c){return b.db.table(17).add({threadKey:a[0],mediaGroup:a[1],minTimestampMs:a[2],maxTimestampMs:b.i64.cast([2328,1316134911]),hasMoreBefore:a[3],hasMoreAfter:!1,isLoadingBefore:!1,isLoadingAfter:!1,lastLoadedMessageId:a[4]})}])},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpsertAttachmentRangeStoredProcedure";a.__tables__=["attachments_ranges_v2__generated"];e.exports=a}),null);
__d("LSUpsertAttachmentRangeStoredProcedure",["LSSynchronousPromise","LSUpsertAttachmentRange","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSUpsertAttachmentRange"),e.threadKey,e.mediaGroup,e.newMinTs,e.hasMoreBefore,e.newLastLoadedMessageId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWBridgeNewMediaRangeHandler",["I64","LSFactory","LSIntEnum","LSUpsertAttachmentRangeStoredProcedure","MAWMediaGalleryEBTaggingUtils","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","cr:20238","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,e){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,e.threadJid,"MAWBridgeNewMediaRangeHandler",function(a,f){var g=(h||(h=d("I64"))).of_float(e.earliestLoadedMediaTs),j=e.mediaGalleryGroup,k=b("cr:20238")!=null?b("cr:20238").getMediaRestoreEBRange().getRange(f):null;k=Boolean(k==null?void 0:k.hasMoreBefore)&&d("MAWMediaGalleryEBTaggingUtils").isMediaGalleryGroupSupportedForTaggedRestore(j);k=e.hasMoreBefore||k;return c("LSUpsertAttachmentRangeStoredProcedure")(c("LSFactory")(a),{hasMoreBefore:k,mediaGroup:(i||(i=d("LSIntEnum"))).ofNumber(j),newLastLoadedMessageId:e.lastLoadedMessageId,newMinTs:g,threadKey:f})})}function a(a,b){return j(a,b).then(c("emptyFunction"))}g.call=a}),98);
__d("LSGroupPollEventType",[],(function(a,b,c,d,e,f){a=Object.freeze({QUESTION_CREATION:1,ADD_OPTION:2,ADD_UNVOTED_OPTION:3,UPDATE_VOTE:4,MULTIPLE_UPDATES:5,QUESTION_CLOSED:6,QUESTION_BUMPED:7,QUESTION_DELETION_SUCCESS:8,QUESTION_DELETION_FAILURE:9});f["default"]=a}),66);
__d("LSPollQuestionType",[],(function(a,b,c,d,e,f){a=Object.freeze({CHOOSE_MULTIPLE:0,MOST_LIKELY_TO:1,NON_POLL:2});f["default"]=a}),66);
__d("MAWBridgePollUtils",["fbt","FBLogger","I64","MAWUserJidWrapper","WAJids"],(function(a,b,c,d,e,f,g,h){"use strict";var i;function a(a){return a.toSorted(function(a,b){if(a.numVotes!==b.numVotes)return b.numVotes-a.numVotes;return!(i||(i=d("I64"))).equal(a.sortKeyVotingTimestamp,b.sortKeyVotingTimestamp)?(i||(i=d("I64"))).compare(b.sortKeyVotingTimestamp,a.sortKeyVotingTimestamp):(i||(i=d("I64"))).compare(a.sortKeyCreationTimestamp,b.sortKeyCreationTimestamp)})}function b(a){if(a===d("WAJids").AUTHOR_SYSTEM)throw c("FBLogger")("messenger_web").mustfixThrow("Not a valid author for poll vote");return a===d("WAJids").AUTHOR_ME?(i||(i=d("I64"))).of_string(d("WAJids").userIdFromJid(d("MAWUserJidWrapper").getMyUserJid())):(i||(i=d("I64"))).of_string(d("WAJids").userIdFromJid(a))}function e(a,b){switch(a.length){case 0:return h._(/*BTDS*/"{option_name}, sin votos",[h._param("option_name",b)]);case 1:return h._(/*BTDS*/"{option_name}, opci\u00f3n votada por {voter_name}",[h._param("option_name",b),h._param("voter_name",a[0])]);case 2:return h._(/*BTDS*/"{option_name}, opci\u00f3n votada por {first_voter_name} y {second_voter_name}",[h._param("option_name",b),h._param("first_voter_name",a[0]),h._param("second_voter_name",a[1])]);case 3:return h._(/*BTDS*/"{option_name}, opci\u00f3n votada por {first_voter_name}, {second_voter_name} y {third_voter_name}",[h._param("option_name",b),h._param("first_voter_name",a[0]),h._param("second_voter_name",a[1]),h._param("third_voter_name",a[2])]);default:return h._(/*BTDS*/"{option_name}, opci\u00f3n votada por {first_voter_name}, {second_voter_name} y {remaining_count} personas m\u00e1s",[h._param("option_name",b),h._param("first_voter_name",a[0]),h._param("second_voter_name",a[1]),h._param("remaining_count",a.length-2)])}}g.sortPollXMAOptions=a;g.getContactIdForAuthor=b;g.getListItemAccessibilityText=e}),226);
__d("MNLSXMATemplateType",[],(function(a,b,c,d,e,f){a=Object.freeze({GENERIC_SHARE:0,DEFAULT:-1});f["default"]=a}),66);
__d("QuestionPollStage",[],(function(a,b,c,d,e,f){a=Object.freeze({NOMINATING:0,VOTING:1,CLOSED:2});f["default"]=a}),66);
__d("MAWBridgeNewPollHandler",["fbt","FBLogger","I64","LSAuthorityLevel","LSGroupPollEventType","LSIntEnum","LSPollQuestionType","MAWBridgePollUtils","MAWDbPoll","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MNLSXMALayoutType","MNLSXMATemplateType","MessagingAttachmentType","Promise","QuestionPollStage","ReQL","WAJids","asyncToGeneratorRuntime","nullthrows"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=3;function m(a,b,c){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=b.contactIdForCurrentUser,f=b.dbPoll,g=b.latestUpdateMsgId,h=b.latestUpdateTimestampMs;b=b.transportKey;var i=f.pollStanzaId;i=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.attachments.index("idx_attachments_collapsible_id")).getKeyRange(c,(k||(k=d("I64"))).of_string(i))));i!=null&&(yield a.attachments["delete"](i.threadKey,i.messageId,i.attachmentFbid));yield o(a,f,c,g,h,e,b)});return n.apply(this,arguments)}function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.dbPoll.chatJid,"BridgeNewPollHandler",function(a,c){return m(a,b,c)})}function o(a,b,c,d,e,f,g){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,h,j,m){var n=e.latestSenderTimestampsMs,o=e.pollParticipantCount,p=e.pollStanzaId,r=(k||(k=d("I64"))).of_string(p),t=(yield d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.polls).getKeyRange(r)));t==null&&(yield s(a,r,g,h,f));t=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableDescending(a.poll_options_v2).getKeyRange(r)));var v=new Map(e.pollOptions.entries().map(function(a){var b=a[0];a=a[1];return[d("MAWDbPoll").generateStableIdFromOptionHash(b,p).toString(),a]})),w=new Map();t.forEach(function(a){var b=(k||(k=d("I64"))).to_string(a.optionId);w.set(b,babelHelpers["extends"]({},w.get(b),{lsOption:a}))});v.entries().forEach(function(a){var b=a[0];a=a[1];a.optionText!=null&&w.set(b,babelHelpers["extends"]({},w.get(b),{mawDbOption:a}))});t=w.entries().toArray().sort(function(a,b){a[0];a=a[1];var d=a.lsOption;a=a.mawDbOption;b[0];b=b[1];var e=b.lsOption;b=b.mawDbOption;d=c("nullthrows")((d=d==null?void 0:d.optionText)!=null?d:a==null?void 0:a.optionText);e=c("nullthrows")((a=e==null?void 0:e.optionText)!=null?a:b==null?void 0:b.optionText);return d.localeCompare(e)});v=(yield (i||(i=b("Promise"))).all(t.map(function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,e){var f=b[0];b=b[1];var g=b.lsOption;b=b.mawDbOption;e=(k||(k=d("I64"))).of_int32(e);if(g==null&&b==null)return null;f=k.of_string(f);if(b==null){var h=c("nullthrows")(g);h=h.optionText;yield a.poll_options_v2.upsert([r,f],babelHelpers["extends"]({},c("nullthrows")(g),{sortKeyCreationTimestamp:e}));var i=(yield d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.poll_votes_v2).getKeyRange(r,f,j)));return{contactIds:[j],hasVoteFromCurrentUser:!0,numVotes:1,optionId:f,optionText:h,progressBarFilledPercentage:Math.floor(1/o*100),sortKeyCreationTimestamp:e,sortKeyVotingTimestamp:i!=null?i.timestampMs:(k||(k=d("I64"))).zero}}return q(a,r,f,c("nullthrows")(b.optionText),g,b,e,n,j,o)});return function(a,b){return e.apply(this,arguments)}}())).then(function(a){return a.filter(Boolean)}));t=v.some(function(a){return a.hasVoteFromCurrentUser});v=d("MAWBridgePollUtils").sortPollXMAOptions(v).slice(0,l);yield u(a,e,f,g,h,v,t,m)});return p.apply(this,arguments)}function q(a,b,c,d,e,f,g,h,i,j){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,h,j,l,m,n,o){j=j.voteAuthors;j=Array.from(j).map(function(a){var b=m.get(a);if(b==null)throw c("FBLogger")("messenger_web").mustfixThrow("Missing latest sender timestamp for poll voter from dbPoll");return{contactId:d("MAWBridgePollUtils").getContactIdForAuthor(a),latestSenderTimestampMs:b}});var p=h!=null?yield d("ReQL").toArrayAsync(d("ReQL").fromTableDescending(a.poll_votes_v2).getKeyRange(e,f)):[],q=p.find(function(a){return(k||(k=d("I64"))).equal(a.contactId,n)}),r=m.get(d("WAJids").AUTHOR_ME),s=q!=null&&(r==null||r<(k||(k=d("I64"))).to_float(q.timestampMs));yield (i||(i=b("Promise"))).all(p.map(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){if((k||(k=d("I64"))).equal(b.contactId,n)&&s)return;yield a.poll_votes_v2["delete"](e,f,b.contactId)});return function(a){return c.apply(this,arguments)}}()));yield i.all(j.map(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=b.contactId;b=b.latestSenderTimestampMs;yield a.poll_votes_v2.put({contactId:c,optionId:f,pollId:e,timestampMs:(k||(k=d("I64"))).of_float(b)})});return function(a){return c.apply(this,arguments)}}()));r=(k||(k=d("I64"))).of_float(Math.max.apply(Math,j.map(function(a){return a.latestSenderTimestampMs}).concat([0])));p=s?(k||(k=d("I64"))).max(c("nullthrows")(q==null?void 0:q.timestampMs),r):r;q=j.length+(s?1:0);r={optionId:f,optionText:g,pollId:e,sortKeyCreationTimestamp:l,sortKeyVotingTimestamp:p,voteCount:k.of_int32(q)};h!=null?yield a.poll_options_v2.upsert([e,f],r):yield a.poll_options_v2.add(r);h=j.map(function(a){return a.contactId});s&&h.push(n);return{contactIds:h,hasVoteFromCurrentUser:s||j.find(function(a){return(k||(k=d("I64"))).equal(a.contactId,n)})!=null,numVotes:q,optionId:f,optionText:g,progressBarFilledPercentage:Math.floor(q/o*100),sortKeyCreationTimestamp:l,sortKeyVotingTimestamp:p}});return r.apply(this,arguments)}function s(a,b,c,d,e){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g){e={authorityLevel:(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE),lastUpdateMessageEventType:j.ofNumber(c("LSGroupPollEventType").QUESTION_CREATION),lastUpdateMessageId:e,lastUpdateMessageTimestampMs:(k||(k=d("I64"))).of_float(f),pollId:b,pollStage:j.ofNumber(c("QuestionPollStage").VOTING),pollType:j.ofNumber(c("LSPollQuestionType").CHOOSE_MULTIPLE),threadKey:g};yield a.polls.put(e)});return t.apply(this,arguments)}function u(a,b,c,d,e,f,g,h){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,m,n,o,p){var q=e.pollStanzaId,r=e.title;if(n.length===0){c("FBLogger")("messenger_web").mustfix("Items length for poll XMA should be greater than 0");return}var s=(yield d("ReQL").toArrayAsync(d("ReQL").mergeJoin(d("ReQL").fromTableAscending(a.participants,[]).getKeyRange(f),d("ReQL").fromTableAscending(a.contacts,["name","id","profilePictureFallbackUrl","profilePictureUrl","profilePictureUrlExpirationTimestampMs"])).map(function(a){a[0];a=a[1];return a}).filter(Boolean))),t=new Map(s.map(function(a){return[(k||(k=d("I64"))).to_string(a.id),a]}));s=n.map(function(a){var b=a.contactIds,c=a.optionId,e=a.optionText;a=a.progressBarFilledPercentage;var f=b.reduce(function(a,b){var c;b=t.get((k||(k=d("I64"))).to_string(b));a.contactUrlExpirations.push((b==null?void 0:b.profilePictureUrlExpirationTimestampMs)!=null?(k||(k=d("I64"))).to_string(b.profilePictureUrlExpirationTimestampMs):"");a.contactUrlFallbacks.push((c=b==null?void 0:b.profilePictureFallbackUrl)!=null?c:"");a.contactUrls.push((c=b==null?void 0:b.profilePictureUrl)!=null?c:"");(b==null?void 0:b.name)!=null&&a.contactNames.push(b.name);return a},{contactNames:[],contactUrlExpirations:[],contactUrlFallbacks:[],contactUrls:[]}),g=f.contactNames,h=f.contactUrlExpirations,i=f.contactUrlFallbacks;f=f.contactUrls;return{listItemAccessibilityText:d("MAWBridgePollUtils").getListItemAccessibilityText(g,e).toString(),listItemContactUrlExpirationTimestampList:h.length>0?h.join(", "):void 0,listItemContactUrlFallbackList:i.length>0?i.join(", "):void 0,listItemContactUrlList:f.length>0?f.join(", "):void 0,listItemId:c,listItemProgressBarFilledPercentage:(k||(k=d("I64"))).of_int32(a),listItemTitleText:e,listItemTotalCount:k.of_int32(b.length)}});var u=(k||(k=d("I64"))).of_string(q);o=o?h._(/*BTDS*/"Cambiar voto").toString():h._(/*BTDS*/"Votar").toString();var v={actionContentBlob:r,attachmentFbid:q,attachmentIndex:k.zero,ctaId:u,messageId:g,targetId:k.of_string(q),threadKey:f,title:o,type_:"xma_poll_details_card"},w={attachmentCta1Id:u,attachmentFbid:q,attachmentIndex:k.zero,cta1Title:o,cta1Type:"xma_poll_details_card",defaultActionEnableExtensions:!1,defaultCtaId:u,defaultCtaTitle:o,defaultCtaType:"xma_poll_details_card",faviconUrlExpirationTimestampMs:k.zero,messageId:g,threadKey:f};o={attachmentCta1Id:u,attachmentFbid:q,attachmentIndex:k.zero,attachmentType:(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA),authorityLevel:j.ofNumber(c("LSAuthorityLevel").AUTHORITATIVE),collapsibleId:k.of_string(q),cta1Title:o,cta1Type:"xma_poll_details_card",defaultCtaId:u,defaultCtaTitle:o,defaultCtaType:"xma_poll_details_card",hasMedia:!1,hasXma:!0,isSharable:!1,listItemsDescriptionText:r,listItemsId:k.of_string(q),messageId:g,threadKey:f,timestampMs:k.of_float(m),transportKey:p!=null?p:"WhatsApp",xmaLayoutType:j.ofNumber(c("MNLSXMALayoutType").XCENTER),xmasTemplateType:j.ofNumber(c("MNLSXMATemplateType").GENERIC_SHARE)};r=e.pollOptions.values().filter(function(a){return a.optionText!=null}).toArray().length;m=r>l?h._(/*BTDS*/"_j{\"*\":\"{additional_option_count} opciones m\\u00e1s\",\"_1\":\"{additional_option_count} opci\\u00f3n m\\u00e1s\"}",[h._plural(r-l),h._param("additional_option_count",r-l)]).toString():void 0;p=babelHelpers["extends"]({},o,{listItemAccessibilityText1:s[0].listItemAccessibilityText,listItemAccessibilityText2:s.length>1?s[1].listItemAccessibilityText:void 0,listItemAccessibilityText3:s.length>2?s[2].listItemAccessibilityText:void 0,listItemContactUrlExpirationTimestampList1:s[0].listItemContactUrlExpirationTimestampList,listItemContactUrlExpirationTimestampList2:s.length>1?s[1].listItemContactUrlExpirationTimestampList:void 0,listItemContactUrlExpirationTimestampList3:s.length>2?s[2].listItemContactUrlExpirationTimestampList:void 0,listItemContactUrlFallbackList1:s[0].listItemContactUrlFallbackList,listItemContactUrlFallbackList2:s.length>1?s[1].listItemContactUrlFallbackList:void 0,listItemContactUrlFallbackList3:s.length>2?s[2].listItemContactUrlFallbackList:void 0,listItemContactUrlList1:s[0].listItemContactUrlList,listItemContactUrlList2:s.length>1?s[1].listItemContactUrlList:void 0,listItemContactUrlList3:s.length>2?s[2].listItemContactUrlList:void 0,listItemId1:s[0].listItemId,listItemId2:s.length>1?s[1].listItemId:void 0,listItemId3:s.length>2?s[2].listItemId:void 0,listItemProgressBarFilledPercentage1:s[0].listItemProgressBarFilledPercentage,listItemProgressBarFilledPercentage2:s.length>1?s[1].listItemProgressBarFilledPercentage:void 0,listItemProgressBarFilledPercentage3:s.length>2?s[2].listItemProgressBarFilledPercentage:void 0,listItemsSecondaryDescriptionText:m,listItemTitleText1:n[0].optionText,listItemTitleText2:n.length>1?n[1].optionText:void 0,listItemTitleText3:n.length>2?n[2].optionText:void 0,listItemTotalCount1:s[0].listItemTotalCount,listItemTotalCount2:s.length>1?s[1].listItemTotalCount:void 0,listItemTotalCount3:s.length>2?s[2].listItemTotalCount:void 0});yield (i||(i=b("Promise"))).all([a.attachments.upsert([f,g,q],p),a.attachment_ctas.upsert([u],v),a.attachment_items.upsert([q,k.zero],w)])});return v.apply(this,arguments)}g.POLL_OPTIONS_THRESHOLD=l;g.call=a}),226);
__d("MAWBridgeNewReceiverFetchInfoHandler",["FBLogger","I64","LSAuthorityLevel","LSIntEnum","LSMediaUrlUtils","MAWImageUtils","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MessagingAttachmentType","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b,c){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=b.msgId,f=b.receiverFetchId,g=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.attachments).getKeyRange(c,e)));b=l(b,c,g);yield a.attachments.upsert([c,e,f],b)});return k.apply(this,arguments)}function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.threadJid,"BridgeNewReceiverFetchInfoHandler",function(a,c){return j(a,b,c)})}function l(a,b,e){var f=a.accessibilitySummaryText,g=a.mimetype,j=a.msgId,k=a.previewHeight,l=a.previewUrl,n=a.previewUrlExpirationTimestampMs,o=a.previewWidth,p=a.ravenSettings,q=a.receiverFetchId,r=a.sortOrderMs,s=a.transportKey;a=a.type;a=m(a);k=d("MAWImageUtils").boundHeightWidth(k,o,d("MAWImageUtils").STICKER_THUMBNAIL_MAX_SIZE);o=k.height;k=k.width;var t=l!=null?l:e==null?void 0:e.previewUrl,u=n!=null?(h||(h=d("I64"))).of_float(n):e==null?void 0:e.previewUrlExpirationTimestampMs;t=d("LSMediaUrlUtils").hasValidReceiverFetchPreviewUrl(t,u);return{accessibilitySummaryText:f,attachmentFbid:q,attachmentIndex:(h||(h=d("I64"))).zero,attachmentType:a,authorityLevel:(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE),ephemeralMediaState:(p==null?void 0:p.ephemeralMediaState)!=null?(h||(h=d("I64"))).of_int32(p.ephemeralMediaState):void 0,ephemeralMediaViewMode:(p==null?void 0:p.ephemeralMediaViewMode)!=null?(h||(h=d("I64"))).of_int32(p.ephemeralMediaViewMode):void 0,hasMedia:t,hasXma:!1,isSharable:!1,messageId:j,previewHeight:h.of_int32(o),previewUrl:l!=null?l:e==null?void 0:e.previewUrl,previewUrlExpirationTimestampMs:n!=null?(h||(h=d("I64"))).of_float(n):e==null?void 0:e.previewUrlExpirationTimestampMs,previewUrlMimeType:g,previewWidth:h.of_int32(k),receiverFetchId:q,threadKey:b,timestampMs:h.of_float(r),transportKey:s!=null?s:"WhatsApp"}}function m(a){switch(a){case"sticker":return(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER);default:throw c("FBLogger")("messenger_web_media").mustfixThrow("Unsupported type for MAWBridgeNewReceiverFetchInfoHandler")}}g.call=a;g.composeAttachment=l}),98);
__d("MAWBridgeHandleReceiverFetchXMA",["FBLogger","I64","LSIntEnum","LSXmaContentType","MAWBridgeXMAUtils","MessagingAttachmentType","ReQL","asyncToGeneratorRuntime","cr:3468"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){var g,j=e.contentRef,k=e.defaultPreviewMediaId,l=e.msgId,m=e.subtitleText,n=e.titleText,o=e.xmaId;if(l==null)return;g=(g=e==null?void 0:(g=e.defaultCTA)==null?void 0:g.actionUrl)!=null?g:e==null?void 0:(g=e.defaultCTA)==null?void 0:g.nativeUrl;var p=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.attachments).getKeyRange(f,l)));if(p!=null)return;p=String(o);o=b("cr:3468")!=null?(h||(h=d("I64"))).of_int32(b("cr:3468").getInChatMsgIdFromMsgId(l)):(h||(h=d("I64"))).zero;var q;if(j!=null)try{j=JSON.parse(j);j!=null&&(q=JSON.stringify(j))}catch(a){c("FBLogger")("messenger_web_sharing").mustfix("Failed to parse msg.contentRef as XmsgMsgrXmaContentRefDataclass")}else c("FBLogger")("messenger_web_sharing").mustfix("contentRef is empty for a MSG_RECEIVER_FETCH XMA");j=(yield d("MAWBridgeXMAUtils").addAttachmentCtas(a,e,f,l,p,{}));e=j.attachmentCta1Id;var r=j.attachmentCta2Id,s=j.attachmentCta3Id;j=j.defaultCtaId;yield a.attachments.add({actionUrl:g!=null?g:void 0,attachmentCta1Id:e,attachmentCta2Id:r,attachmentCta3Id:s,attachmentFbid:p,attachmentIndex:(h||(h=d("I64"))).zero,attachmentType:(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA),authorityLevel:h.zero,defaultCtaId:j,hasMedia:!1,hasXma:!0,hasXmaPreview:k!=null,isSharable:!0,messageId:l,receiverFetchId:q,subtitleText:m,threadKey:f,timestampMs:o,titleText:n,transportKey:"WhatsApp",xmaContentType:i.ofNumber(c("LSXmaContentType").MSG_RECEIVER_FETCH)});return});return j.apply(this,arguments)}g.call=a}),98);
__d("isReceiverFetchReceivingEnabled",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a)return c("gkx")("6743");else return c("gkx")("6744")}g["default"]=a}),98);
__d("MAWBridgeNewXMAHandler",["MAWBridgeHandleReceiverFetchXMA","MAWBridgeXMAUtils","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","WAArmadilloXMA.pb","asyncToGeneratorRuntime","isReceiverFetchReceivingEnabled"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=String(b.xmaId),g=b.msgId;if(g==null)return;var h=b.targetType===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH;if(h&&c("isReceiverFetchReceivingEnabled")(!0))return d("MAWBridgeHandleReceiverFetchXMA").call(a,b,e);h=(yield d("MAWBridgeXMAUtils").getExistingAttachmentAndAttachmentCtas(a,e,g));var i=h[0];h=h[1];h=(yield d("MAWBridgeXMAUtils").addAttachmentCtas(a,b,e,g,f,h));var j=h.attachmentCta1Id,k=h.attachmentCta2Id,l=h.attachmentCta3Id;h=h.defaultCtaId;b=d("MAWBridgeXMAUtils").composeAttachmentXMA(b,e,f,g,j,k,l,h,"MAWBridgeNewXMAHandler");i!=null?yield a.attachments.upsert([i.threadKey,i.messageId,i.attachmentFbid],b):yield a.attachments.add(b)});return i.apply(this,arguments)}function j(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.threadJid,"MAWBridgeNewXMAHandler",function(a,c){return h(a,b,c)})}function a(a,b){return j(a,b)}g.callWithoutWaitingForAnything=h;g.call=a}),98);
__d("MAWBridgeOccamadilloCreateE2EEMetadataThreadHandler",["FBLogger","I64","LSAuthorityLevel","LSCreateE2EEMetadataThreadStoredProcedure","LSFactory","LSIntEnum","MAWCreateOptimisticThread","MAWFolderUtils","MAWJids","MAWThreadMappingState","MAWThreadUpdateMiddlewareGatingUtil","MAWThreadUtils","Promise","WALogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k="[Occamadillo][CreateE2EEMetadataThreadHandler]";function a(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){d("WALogger").LOG([k+" Handler called from "+e.creationSource+" for "+("jid: "+e.jid)]);if(!d("MAWThreadUpdateMiddlewareGatingUtil").isNewMiThreadCreationFlowEnabled()){d("WALogger").LOG([k+" Early return due to failed eligibility check"]);return(j||(j=b("Promise"))).resolve()}var f=e.bumpTimestampMs,g=e.creationSource,i=e.folderId,l=e.jid;e=e.threadKeys;var n=(yield m(a,e));if(!s(g,n,e)){d("WALogger").LOG([k+" Early return due to no SPROC call required: jid: "+l+", "+("threadKey: "+((n==null?void 0:n.threadKey)?(h||(h=d("I64"))).to_string(n==null?void 0:n.threadKey):"null"))]);return(j||(j=b("Promise"))).resolve()}g=t(g);i=d("MAWFolderUtils").systemFolderToLSCoreClientFolder(i);n=(yield q(a,n,e,l));e=d("MAWThreadUtils").getLSThreadTypeFromJid(l);u({bumpTimestampMs:f,createdByLocalDevice:g,folderType:i,jid:l,offlineThreadKeyDetails:n,threadType:e});return c("LSCreateE2EEMetadataThreadStoredProcedure")(c("LSFactory")(a),{bumpTimestampMs:f,createdByLocalDevice:g,folderType:i,offlineThreadKey:n.offlineThreadKey,threadType:e,waJid:d("MAWJids").convertChatJidToIntJid(l)})});return l.apply(this,arguments)}function m(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){a=(yield (j||(j=b("Promise"))).all([yield o(a,c.authoritative),yield o(a,c.optimistic)]));c=a[0];a=a[1];return c!=null?c:a});return n.apply(this,arguments)}function o(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){if(c==null)return(j||(j=b("Promise"))).resolve();a=(yield a.threads.get((h||(h=d("I64"))).of_string(c)));return a});return p.apply(this,arguments)}function q(a,b,c,d){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){if(e!=null)return{offlineThreadKey:e.threadKey,source:"Pre-existing LSDB Thread"};e=null;var i=null;f.authoritative!=null?(e=(h||(h=d("I64"))).of_string(f.authoritative),i="MAW: authoritative"):f.optimistic!=null?(e=(h||(h=d("I64"))).of_string(f.optimistic),i="MAW: optimistic"):(e=(yield d("MAWCreateOptimisticThread").createOfflineThreadingId(a)),i="New Offline Threading ID");yield (j||(j=b("Promise"))).all([d("MAWCreateOptimisticThread").createOptimisticThreadWithThreadKey(a,e),d("MAWThreadMappingState").markActThreadMappingAsCompleted(a,{intJid:d("MAWJids").convertChatJidToIntJid(g),threadKey:e})]);c("FBLogger")("messenger_web").info(k.concat(" Created new optimistic thread in LSDB with threadKey: ",(h||(h=d("I64"))).to_string(e),", threadKey source: ",i,", for jid: ",g));return{offlineThreadKey:e,source:i}});return r.apply(this,arguments)}function s(a,b,e){var f=b!=null?(i||(i=d("LSIntEnum"))).unwrapIntEnum(b.authorityLevel):null;c("FBLogger")("messenger_web").info(k.concat(" Validating authoritativeThreadKey optimisation. authorityLevel: %",", has authoritativeThreadKey: %",", creationSource: %",", optimistic thread key: %",", authoritative thread key: %"),f!=null?f.toString():"null",e.authoritative!=null?"true":"false",a,e.optimistic,e.authoritative);switch(a){case"incoming_message":return b==null;case"outgoing_message":switch(f){case null:case void 0:case c("LSAuthorityLevel").CLIENT_PARTIAL:case c("LSAuthorityLevel").OPTIMISTIC:case c("LSAuthorityLevel").SERVER_PARTIAL:return!0;case c("LSAuthorityLevel").AUTHORITATIVE:case c("LSAuthorityLevel").AUTHORITATIVE_PENDING_REPLACEMENT:case c("LSAuthorityLevel").CLIENT_AUTHORITATIVE_DELETE:return!1;default:f;throw c("FBLogger")("messenger_web").mustfixThrow("Unknown authority level")}default:a;throw c("FBLogger")("messenger_web").mustfixThrow("Unknown creation source")}}function t(a){switch(a){case"incoming_message":return!1;case"outgoing_message":return!0;default:a;throw c("FBLogger")("messenger_web").mustfixThrow("Unknown creation source")}}function u(a){var b=a.bumpTimestampMs,e=a.createdByLocalDevice,f=a.folderType,g=a.jid,j=a.offlineThreadKeyDetails;a=a.threadType;c("FBLogger")("messenger_web").info(k.concat(" Calling LSCreateE2EEMetadataThreadStoredProcedure with params: ","bumpTimestampMs: ",(h||(h=d("I64"))).to_float(b).toString(),", createdByLocalDevice: ",e.toString(),", folderType: ",(i||(i=d("LSIntEnum"))).toNumber(f).toString(),", offlineThreadKey: ",h.to_string(j.offlineThreadKey),", offlineThreadKeySource: ",j.source,", threadType: ",i.toNumber(a).toString(),", waJid: ",g))}g.call=a}),98);
__d("MAWBridgeOccamadilloCreateE2EEMetadataThreadHandlerV2",["DedupMiThreadCreationCache","FBLogger","I64","LSAuthorityLevel","LSCreateE2EEMetadataThreadStoredProcedure","LSFactory","LSIntEnum","MAWCreateOptimisticThread","MAWFolderUtils","MAWJids","MAWThreadMappingState","MAWThreadUtils","Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k="[Occamadillo][CreateE2EEMetadataThreadHandlerV2]";function a(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=b.bumpTimestampMs,f=b.creationSource,g=b.folderId,h=b.jid;b=b.optimisticThreadKey;p(f,h);b=b!=null?yield a.threads.get((i||(i=d("I64"))).of_string(b)):null;if(b!=null&&d("DedupMiThreadCreationCache").DedupMiThreadCreationCache.has(h)){t(h);return}if(b!=null&&m(b)){q(h,(i||(i=d("I64"))).to_string(b.threadKey));return}e={bumpTimestampMs:e,createdByLocalDevice:f==="outgoing_message",folderType:d("MAWFolderUtils").systemFolderToLSCoreClientFolder(g),offlineThreadKey:yield n(b,h,a),threadType:d("MAWThreadUtils").getLSThreadTypeFromJid(h),waJid:d("MAWJids").convertChatJidToIntJid(h)};s(e);return c("LSCreateE2EEMetadataThreadStoredProcedure")(c("LSFactory")(a),e).then(function(){d("DedupMiThreadCreationCache").addToDedupMiThreadCreationCache(h)})});return l.apply(this,arguments)}function m(a){a=(j||(j=d("LSIntEnum"))).unwrapIntEnum(a.authorityLevel);switch(a){case c("LSAuthorityLevel").CLIENT_PARTIAL:case c("LSAuthorityLevel").OPTIMISTIC:case c("LSAuthorityLevel").SERVER_PARTIAL:return!1;case c("LSAuthorityLevel").AUTHORITATIVE:case c("LSAuthorityLevel").AUTHORITATIVE_PENDING_REPLACEMENT:case c("LSAuthorityLevel").CLIENT_AUTHORITATIVE_DELETE:return!0;default:a;throw c("FBLogger")("messenger_web").mustfixThrow("Unknown authority level")}}function n(a,b,c){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){if(a!=null)return(h||(h=b("Promise"))).resolve(a.threadKey);a=(yield d("MAWCreateOptimisticThread").createOfflineThreadingId(e));r(c,a);yield (h||(h=b("Promise"))).all([d("MAWCreateOptimisticThread").createOptimisticThreadWithThreadKey(e,a),d("MAWThreadMappingState").markActThreadMappingAsCompleted(e,{intJid:d("MAWJids").convertChatJidToIntJid(c),threadKey:a})]);return a});return o.apply(this,arguments)}function p(a,b){c("FBLogger")("messenger_web").info(k+" handler called from %s for jid %s",a,b)}function q(a,b){c("FBLogger")("messenger_web").info(k+" handler returned early for jid %s because thread %s was already authoritative",a,b)}function r(a,b){c("FBLogger")("messenger_web").info(k+" no thread exists for jid %s, creating optimistic thread with key %s",a,(i||(i=d("I64"))).to_string(b))}function s(a){c("FBLogger")("messenger_web").info(k+" Calling LSCreateE2EEMetadataThreadStoredProcedure with params: bumpTimestampMs: %s, createdByLocalDevice: %s, folderType: %s, offlineThreadKey: %s, offlineThreadKeySource: %s, threadType: %s, waJid: %s",(i||(i=d("I64"))).to_string(a.bumpTimestampMs),a.createdByLocalDevice,i.to_string(a.folderType),i.to_string(a.offlineThreadKey),i.to_string(a.threadType),i.to_string(a.waJid))}function t(a){c("FBLogger")("messenger_web").info(k+" LSCreateE2EEMetadataThreadStoredProcedure has already been called for jid %s, early returning",a)}g.call=a}),98);
__d("MAWBridgeParticipantRemovedHandler",["I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.threadJid,"MAWBridgeParticipantRemovedHandler",function(a,c){return a.participants["delete"](c,(h||(h=d("I64"))).of_string(b.userId))})}g.call=a}),98);
__d("MAWBridgeParticipantUpdatedHandler",["fbt","I64","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSContactGender","LSContactIdType","LSContactType","LSContactViewerRelationship","LSContactWorkForeignEntityType","LSFactory","LSGroupParticipantJoinState","LSIntEnum","LSVerifyContactRowExistsStoredProcedure","MAWBridgeParticipantsUpdatedHandler","MAWCurrentUser","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWTimeUtils","MAWUpdateLSThreadCapabilities","Promise","asyncToGeneratorRuntime","gkx","vulture"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=d("MAWCurrentUser").getID(),m=(j||(j=d("I64"))).of_string(l);function n(a,b,c){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=(j||(j=d("I64"))).of_string(b.fbid),g=d("MAWTimeUtils").toTimestamp(b.readWatermarkTs),i=d("MAWTimeUtils").toTimestamp(b.deliveredWatermarkTs),n=d("MAWTimeUtils").toTimestamp(b.lastReadActionTs),o=b.isSuperAdmin?h._(/*BTDS*/"Creador del grupo").toString():void 0,p=(yield a.participants.get(e,f));p!=null?yield a.participants.put({authorityLevel:p.authorityLevel,contactId:f,deliveredWatermarkTimestampMs:i,groupParticipantJoinState:b.isInvited?(k||(k=d("LSIntEnum"))).ofNumber(c("LSGroupParticipantJoinState").INVITED):(k||(k=d("LSIntEnum"))).ofNumber(c("LSGroupParticipantJoinState").MEMBER),isAdmin:b.isAdmin,isModerator:!1,isSuperAdmin:p.isSuperAdmin,nickname:p.nickname,normalizedSearchTerms:p.normalizedSearchTerms,participantCapabilities:p.participantCapabilities,readActionTimestampMs:n,readWatermarkTimestampMs:g,subscribeSource:o,threadKey:e}):yield a.participants.add({authorityLevel:(j||(j=d("I64"))).zero,contactId:f,deliveredWatermarkTimestampMs:i,groupParticipantJoinState:b.isInvited?(k||(k=d("LSIntEnum"))).ofNumber(c("LSGroupParticipantJoinState").INVITED):(k||(k=d("LSIntEnum"))).ofNumber(c("LSGroupParticipantJoinState").MEMBER),isAdmin:b.isAdmin,isModerator:!1,isSuperAdmin:b.isSuperAdmin,nickname:void 0,normalizedSearchTerms:void 0,participantCapabilities:void 0,readActionTimestampMs:j.zero,readWatermarkTimestampMs:g,subscribeSource:o,threadKey:e});yield d("MAWUpdateLSThreadCapabilities").disableBlockerCapabilitiesTxn(a,e);n=b.isAdmin;(j||(j=d("I64"))).equal(m,f)&&(n?yield d("MAWUpdateLSThreadCapabilities").enableAddMembersTxn(a,e):yield d("MAWUpdateLSThreadCapabilities").disableAddMembersTxn(a,e));p==null&&(yield c("LSVerifyContactRowExistsStoredProcedure")(c("LSFactory")(a),{authorityLevel:(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC),blockedByViewerStatus:k.ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED),contactIdType:k.ofNumber(c("LSContactIdType").FBID),contactType:k.ofNumber(c("LSContactType").USER),contactViewerRelationship:k.ofNumber(c("LSContactViewerRelationship").UNKNOWN),gender:k.ofNumber(c("LSContactGender").UNKNOWN),id:f,isBlocked:!1,isMemorialized:!1,isSelf:l===b.fbid,workForeignEntityType:k.ofNumber(c("LSContactWorkForeignEntityType").UNKNOWN)}))});return o.apply(this,arguments)}function a(a,e){if(c("gkx")("13628"))return d("MAWBridgeParticipantsUpdatedHandler").call(a,{participants:[e]});if(e.fbid.startsWith("shadow_")){c("vulture")("Hxg8SseiWP5IZUyhTKsM26kY__w=");return(i||(i=b("Promise"))).resolve()}return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,e.threadJid,"MAWBridgeParticipantUpdatedHandler",function(a,b){return n(a,e,b)})}g.callWithoutWaitingForAnything=n;g.call=a}),226);
__d("MAWBridgeRavenActionMsgForUIHandler",["I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWMsg","MAWRavenUtils","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,c){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,c.threadJid,"MAWBridgeRavenActionMsgForUIHandler",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){a=a.attachments;e=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a).getKeyRange(e,c.ravenMsgId)));if(e==null)return(i||(i=b("Promise"))).resolve();if(e.ephemeralMediaState==null)return(i||(i=b("Promise"))).resolve();var f=(h||(h=d("I64"))).to_int32(e.ephemeralMediaState);if(e.ephemeralMediaViewMode==null)return(i||(i=b("Promise"))).resolve();var g=h.to_int32(e.ephemeralMediaViewMode);f=d("MAWMsg").MAWRavenMsgEphemeralMediaState.cast(f);g=d("MAWMsg").MAWRavenMsgEphemeralType.cast(g);if(f==null||g==null)return(i||(i=b("Promise"))).resolve();f=d("MAWRavenUtils").getNextRavenMessageEphemeralState(f,g);if(f==null)return(i||(i=b("Promise"))).resolve();e.ephemeralMediaState;g=babelHelpers.objectWithoutPropertiesLoose(e,["ephemeralMediaState"]);e=babelHelpers["extends"]({ephemeralMediaState:h.of_int32(f)},g,{transportKey:"WhatsApp"});f=[g.threadKey,g.messageId,g.attachmentFbid];return a.upsert(f,e)});return function(b,c){return a.apply(this,arguments)}}())}g.call=a}),98);
__d("MAWBridgeReactionUpsertHandler",["I64","LSAuthorityLevel","LSIntEnum","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWTimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b,e,f,g){return{actorId:(h||(h=d("I64"))).of_string(a),authorityLevel:(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE),messageId:e,reaction:g,reactionCreationTimestampMs:d("MAWTimeUtils").toTimestamp(f),threadKey:b,timestampMs:d("MAWTimeUtils").toTimestamp(f),transportKey:"WhatsApp"}}function k(a,b,c,e,f,g){return a.reactions.upsert([c,e,(h||(h=d("I64"))).of_string(b)],j(b,c,e,f,g))}function a(a,b,c,d,e,f){return k(a,b,c,d,e,f)}function b(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.chatJid,"MAWBridgeReactionUpsertHandler",function(a,c){return k(a,b.actorId,c,b.messageId,b.ts,b.reaction)})}g.composeReaction=j;g.attachmentMutationsOptimisticHandler=a;g.call=b}),98);
__d("MAWBridgeReceivedReceiptHandler",["I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWTimeUtils","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=(h||(h=d("I64"))).of_string(b.fbid),f=d("MAWTimeUtils").toTimestamp(b.lastReadWatermarkTs),g=d("MAWTimeUtils").toTimestamp(b.deliveredWatermarkTs);b=d("MAWTimeUtils").toTimestamp(b.lastReadActionTs);c=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.participants).getKeyRange(c,e)));c!=null&&(yield a.participants.put({authorityLevel:c.authorityLevel,contactId:c.contactId,deliveredWatermarkTimestampMs:(h||(h=d("I64"))).equal(g,(h||(h=d("I64"))).zero)?c.deliveredWatermarkTimestampMs:g,groupParticipantJoinState:c.groupParticipantJoinState,isAdmin:c.isAdmin,isModerator:c.isModerator,isSuperAdmin:c.isSuperAdmin,nickname:c.nickname,normalizedSearchTerms:c.normalizedSearchTerms,participantCapabilities:c.participantCapabilities,readActionTimestampMs:(h||(h=d("I64"))).equal(b,(h||(h=d("I64"))).zero)?c.readActionTimestampMs:b,readWatermarkTimestampMs:(h||(h=d("I64"))).equal(f,(h||(h=d("I64"))).zero)?c.readWatermarkTimestampMs:f,subscribeSource:c.subscribeSource,threadKey:c.threadKey,threadRoles:(h||(h=d("I64"))).zero}))});return j.apply(this,arguments)}function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.chatJid,"MAWBridgeReceivedReceiptHandler",function(a,c){return i(a,b,c)})}g.callWithoutWaitingForAnything=i;g.call=a}),98);
__d("MAWBridgeRefreshContactHandler",["LSFactory","LSRefetchContactRowIfExistsStoredProcedure"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return c("LSRefetchContactRowIfExistsStoredProcedure")(c("LSFactory")(a),{id:b})}g.call=a}),98);
__d("MAWBridgeRemoveMessageSearchResultHandler",["Promise","ReQL","asyncToGeneratorRuntime","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){return b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var c=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.message_search_results).filter(function(a){return e.includes(a.messageOtid)})));yield (h||(h=b("Promise"))).all(c.map(function(b){return a.message_search_results["delete"](b.type_,b.query,b.threadKey,b.globalIndex)}))})().then(c("emptyFunction"))}g.call=a}),98);
__d("MAWBridgeSyncContacts",["CurrentMessengerUser","I64","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSContactGender","LSContactIdType","LSContactType","LSContactViewerRelationship","LSContactWorkForeignEntityType","LSFactory","LSIntEnum","LSVerifyContactRowExistsStoredProcedure","Promise","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=d("CurrentMessengerUser").getID();function a(a,e){return e.reduce(function(b,e){var f=(i||(i=d("I64"))).of_string(e);return b.then(function(){return c("LSVerifyContactRowExistsStoredProcedure")(c("LSFactory")(a),{authorityLevel:(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC),blockedByViewerStatus:j.ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED),contactIdType:j.ofNumber(c("LSContactIdType").FBID),contactType:j.ofNumber(c("LSContactType").USER),contactViewerRelationship:j.ofNumber(c("LSContactViewerRelationship").UNKNOWN),gender:j.ofNumber(c("LSContactGender").UNKNOWN),id:f,isBlocked:!1,isMemorialized:!1,isSelf:k===e,workForeignEntityType:j.ofNumber(c("LSContactWorkForeignEntityType").UNKNOWN)})}).then(c("emptyFunction"))},(h||(h=b("Promise"))).resolve())}g.call=a}),98);
__d("LSDeleteThread",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.sequence([function(d){return b.db.table(9).fetch([[[a[0]]]]).next().then(function(a,d){var e=a.done;a=a.value;return e?(e=[b.i64.cast([0,0]),void 0],c[0]=e[0],c[1]=e[1],e):(d=a.item,e=[d.parentThreadKey,d.disappearingThreadKey],c[0]=e[0],c[1]=e[1],e)})},function(a){return b.count(b.db.table(9).fetch([[[c[0]]],"parentThreadKeyLastActivityTimestampMs"])).then(function(a){return c[3]=a})},function(d){return a[1]&&b.i64.neq(c[0],b.i64.cast([0,0]))&&b.i64.eq(c[3],b.i64.cast([0,1]))?b.sequence([function(d){return b.forEach(b.db.table(9).fetch([[[a[0]],[c[0]]]]),function(a){return a["delete"]()})},function(a){return b.i64.neq(c[1],void 0)?0:0}]):b.sequence([function(c){return b.forEach(b.db.table(9).fetch([[[a[0]]]]),function(a){return a["delete"]()})},function(a){return b.i64.neq(c[1],void 0)?0:0}])}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxDeleteThreadStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSMoveThreadToArchivedFolder",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(9).fetch([[[a[0]]]]).next().then(function(c,d){d=c.done;c=c.value;return d?0:(c.item,b.forEach(b.db.table(9).fetch([[[a[0]]]]),function(a){var c=a.update;a=a.item;return c({folderName:"",parentThreadKey:b.i64.cast([-1,4294967286]),capabilities2:b.i64.or_(a.capabilities2,b.i64.cast([0,2]))})}))})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxMoveThreadToArchivedFolderStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSOptimisticRemoveThread",["LSDeleteThread","LSIssueNewTaskAndGetTaskID","LSMoveThreadToArchivedFolder"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[4]=b.syncGroup,c.i64.neq(d[4],void 0)?d[3]=d[4]:d[3]=c.i64.cast([0,1]),d[0]=d[3])})},function(d){return[c.i64.cast([0,1]),c.i64.cast([0,2])].some(function(b){return c.i64.eq(a[1],b)})?c.storedProcedure(b("LSMoveThreadToArchivedFolder"),a[0]):c.storedProcedure(b("LSDeleteThread"),a[0],!1)},function(e){return c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),c.i64.to_string(a[0]),c.i64.cast([0,146]),"",void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),d[0],void 0,c.i64.cast([0,0]),c.i64.cast([0,0])).then(function(a){return a=a,d[2]=a[0],a})},function(b){return c.db.table(32).add({taskId:d[2],threadKey:a[0],removeType:a[1],syncGroup:d[0]})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticRemoveThreadStoredProcedure";a.__tables__=["threads","threads_optimistic_context"];e.exports=a}),null);
__d("LSOptimisticRemoveThreadStoredProcedure",["LSOptimisticRemoveThread","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSOptimisticRemoveThread"),e.threadKey,e.removeType);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSThreadRemoveType",[],(function(a,b,c,d,e,f){a=Object.freeze({DELETE_THREAD:0,ARCHIVE_THREAD:1,IGNORE_THREAD:2});f["default"]=a}),66);
__d("MAWBridgeThreadHiddenV2Handler",["LSFactory","LSIntEnum","LSOptimisticRemoveThreadStoredProcedure","LSThreadRemoveType","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b,"MAWBridgeThreadHiddenV2Handler",function(a,b){a=c("LSFactory")(a);return c("LSOptimisticRemoveThreadStoredProcedure")(a,{removeType:(h||(h=d("LSIntEnum"))).ofNumber(c("LSThreadRemoveType").DELETE_THREAD),threadKey:b})})}g.call=a}),98);
__d("MAWBridgeThreadTimestampsHandler",["CurrentMessengerUser","I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWTimeUtils","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=d("MAWTimeUtils").millisTimeToTimestamp(c.lastReadWatermarkTs),f=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(b)));if(f==null||c.markUnread!==null&&c.markUnread===!1&&(h||(h=d("I64"))).ge(f.lastReadWatermarkTimestampMs,e))return;e=babelHelpers["extends"]({},f,{lastReadWatermarkTimestampMs:d("MAWTimeUtils").millisTimeToTimestamp(c.lastReadWatermarkTs)});yield a.threads.put(e);f=(h||(h=d("I64"))).of_string(d("CurrentMessengerUser").getID());e=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.participants).getKeyRange(b,f)));e!=null&&(yield a.participants.put(babelHelpers["extends"]({},e,{readActionTimestampMs:d("MAWTimeUtils").millisTimeToTimestamp(c.lastActivityTimestampMs),readWatermarkTimestampMs:d("MAWTimeUtils").millisTimeToTimestamp(c.lastReadWatermarkTs)})))});return j.apply(this,arguments)}function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.threadJid,"MAWBridgeThreadTimestampsHandler",function(a,c){return i(a,c,b)})}g.callWithoutWaitingForAnything=i;g.call=a}),98);
__d("MAWBridgeThreadUpdatedHandler",["MAWBridgeBuildThreadSnippet","MAWBridgeUIEventDataValidation","MAWFolderUtils","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","ReQL","asyncToGeneratorRuntime","getMAWLastMessageCtaType"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){var c=b.folder!=null?d("MAWFolderUtils").getMessagingFolderTag(b.folder):a.folderName;return(b=b.cannotReplyReason)!=null?b:c==="inbox"?void 0:a.cannotReplyReason}function i(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){e=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(e)));if(e==null)return;var f=d("MAWBridgeBuildThreadSnippet").buildBridgeThreadSnippet(b,e.snippet),g=h(e,b),i=c("getMAWLastMessageCtaType")(b.snippetType);g=babelHelpers["extends"]({},e,{cannotReplyReason:g,folderName:e.folderName,lastMessageCtaType:i,parentThreadKey:e.parentThreadKey,snippet:f,snippetSenderContactId:b.snippetSenderContactId==null?e.snippetSenderContactId:d("MAWBridgeUIEventDataValidation").stringToI64Opt(b.snippetSenderContactId)});yield a.threads.put(g)});return j.apply(this,arguments)}function a(a,b){var c=b.threadJid;return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,c,"MAWBridgeThreadUpdatedHandler",function(a,c){return i(a,b,c)})}g.callWithoutWaitingForAnything=i;g.call=a}),98);
__d("MAWBridgeUIEventQueueQPLLogger",["QPLUserFlow","qpl"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){c("QPLUserFlow").start(c("qpl")._(1056849266,"1765"),{annotations:{string_array:{events:b}},instanceKey:a})}function b(a,b){c("QPLUserFlow").addAnnotations(c("qpl")._(1056849266,"1765"),b,{instanceKey:a})}function d(a){c("QPLUserFlow").endSuccess(c("qpl")._(1056849266,"1765"),{instanceKey:a})}function e(a,b){c("QPLUserFlow").endFailure(c("qpl")._(1056849266,"1765"),"MAWBridgeUIEventHandlerFailure",{annotations:{string:{failedEventTag:b}},instanceKey:a})}g.start=a;g.addAnnotations=b;g.endSuccess=d;g.endFailure=e}),98);
__d("MAWBridgeUnArchivedSelfDeviceChangeAlertsHandler",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;function a(a,c){return(g||(g=b("Promise"))).resolve()}f.call=a}),66);
__d("MAWBridgeUnbumpOnThreadLoadHandler",["FBLogger","I64","MAWChatJid","MAWJids","MAWMiActGetThreadLifecycleState","MAWODSProxy","WAOdsEnums","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Set();function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=b.jid,f=b.unbumpFromTs;b=b.unbumpToTs;var g=(yield d("MAWChatJid").toThreadMaybe(a,e));if(g==null){var j=(yield d("MAWMiActGetThreadLifecycleState").getThreadLifecycleStateByJid(a,d("MAWJids").convertChatJidToIntJid(e),"MAWBridgeCentralizedThreadUpdateHandler"));c("FBLogger")("UnbumpOnRefresh").mustfix("[UnbumpOnRefresh] missing thread for unbumping jid: %s with thread state: %s",e,j.type);return}if(i.has(e)){d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_THREAD_UPDATE_MIDDLEWARE,key:"unbump_already_processed"});return}i.add(e);if(!(h||(h=d("I64"))).equal(g.lastActivityTimestampMs,f))return;d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_THREAD_UPDATE_MIDDLEWARE,key:"unbump_on_thread_load"});j=babelHelpers["extends"]({},g,{lastActivityTimestampMs:b});yield a.threads.put(j)});return j.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeUpdateClientRestoreStatus",["I64","LSEncryptedBackupsClientRestoreState","LSIntEnum","MAWUpdateClientRestoreStatusOperationType","Promise","ReQL","asyncToGeneratorRuntime","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,e){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.encrypted_backups_client_restore_status).filter(function(a){return a.threadId===e})).then(function(d){if(d!=null)return a.encrypted_backups_client_restore_status["delete"](d.threadId).then(c("emptyFunction"));else return(j||(j=b("Promise"))).resolve()})}function l(a,e,f,g){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.encrypted_backups_client_restore_status).getKeyRange(e)).then(function(g){if(g!=null)return a.encrypted_backups_client_restore_status.put({lastUpdated:(h||(h=d("I64"))).of_float(Date.now()),restoreStatus:(i||(i=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsClientRestoreState").RESTORE_COMPLETE),serverThreadKey:f,threadId:e});else return(j||(j=b("Promise"))).resolve()})}function a(a){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.encrypted_backups_client_restore_status)).then(function(c){return c.reduce(function(b,c){return b.then(function(){return k(a,c.threadId)})},(j||(j=b("Promise"))).resolve())})}function e(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=e.threadId,g=e.action;g===d("MAWUpdateClientRestoreStatusOperationType").upsertClientRestoreStatus?yield a.encrypted_backups_client_restore_status.put({lastUpdated:(h||(h=d("I64"))).of_float(Date.now()),restoreStatus:(i||(i=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsClientRestoreState").RESTORE_IN_PROGRESS),serverThreadKey:void 0,threadId:f}):yield l(a,e.threadId,void 0,e.ebPrefetch);return(j||(j=b("Promise"))).resolve()});return m.apply(this,arguments)}g.truncateClientRestoreStatusTable=a;g.call=e}),98);
__d("LSAddMessengerContact",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("contact_id",a[0]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),"add_messenger_contact",c.i64.cast([0,308]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSContactAddMessengerContactStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSAddMessengerContactStoredProcedure",["LSAddMessengerContact","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSAddMessengerContact"),e.contactId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSOptimisticAcceptMessageRequest",["LSIssueNewTaskWithExtraOperations"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(e,f){var g=e.done;e=e.value;return g?0:(f=e.item,c.sequence([function(b){return c.forEach(c.db.table(9).fetch([[[a[0]]]]),function(b){var d=b.update;b.item;return d({folderName:"inbox",parentThreadKey:c.i64.cast([0,0]),igFolder:a[1],capabilities:c.i64.and_(f.capabilities,c.i64.cast([-1,4292870143]))})})},function(b){return c.db.table(173).fetch([[[a[0]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?0:(e=b.item,d[4]=e.clientThreadPk,c.db.table(276).fetch([[[d[4]]]]).next().then(function(a,b){b=a.done;a=a.value;return b?0:(a.item,c.forEach(c.db.table(276).fetch([[[d[4]]]]),function(a){var b=a.update;a.item;return b({folderType:c.i64.cast([0,0])})}))}))})},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[0]=c.i64.cast([0,1]):(e=b.item,d[5]=e.syncGroup,c.i64.neq(d[5],void 0)?d[4]=d[5]:d[4]=c.i64.cast([0,1]),d[0]=d[4])})},function(e){return d[2]=new c.Map(),d[2].set("thread_key",a[0]),d[2].set("sync_group",d[0]),d[2].set("ig_folder",a[1]),d[3]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTaskWithExtraOperations"),"message_request",c.i64.cast([0,66]),d[3],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0]))}]))})},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticAcceptMessageRequestStoredProcedure";a.__tables__=["threads","mi_act_mapping_table","client_threads"];e.exports=a}),null);
__d("LSOptimisticAcceptMessageRequestStoredProcedure",["LSOptimisticAcceptMessageRequest","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSOptimisticAcceptMessageRequest"),e.threadKey,e.igFolder);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWBridgeUpdateContactAsConnectedHandler",["FBLogger","I64","LSAddMessengerContactStoredProcedure","LSContactViewerRelationship","LSFactory","LSIntEnum","LSOptimisticAcceptMessageRequestStoredProcedure","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWUpdateLSThreadCapabilities","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=e.contactUserId;e=e.threadJid;var g=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.contacts).getKeyRange((i||(i=d("I64"))).of_string(f))));if(g==null){c("FBLogger")("messenger_web").warn("Missing contact in MAWBridgeUpdateContactAsConnectedHandler");return}var k=babelHelpers["extends"]({},g,{contactViewerRelationship:(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactViewerRelationship").CONTACT_OF_VIEWER)});return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,e,"MAWBridgeUpdateContactAsConnectedHandler",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){yield (h||(h=b("Promise"))).allSettled([a.contacts.upsert([g.id],k),c("LSAddMessengerContactStoredProcedure")(c("LSFactory")(a),{contactId:g.id}),d("MAWUpdateLSThreadCapabilities").updateNonMessageRequestThreadTxn(a,e),c("LSOptimisticAcceptMessageRequestStoredProcedure")(c("LSFactory")(a),{threadKey:e})])});return function(b,c){return a.apply(this,arguments)}}())});return k.apply(this,arguments)}g.call=a}),98);
__d("LSUpdateE2EEMetadataParticipants",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[0].set("user_self_remove",!1),d[1]=d[0].get("thread_key"),d[2]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[1]),c.i64.cast([0,394]),d[2],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxUpdateE2EEMetadataParticipantsStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSUpdateE2EEMetadataParticipantsStoredProcedure",["LSSynchronousPromise","LSUpdateE2EEMetadataParticipants","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSUpdateE2EEMetadataParticipants"),e.threadKey);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWBridgeUpdateE2EEMetadataParticipantsHandler",["LSFactory","LSUpdateE2EEMetadataParticipantsStoredProcedure","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.threadJid,"MAWBridgeThreadsLoadedHandler",function(a,b){return c("LSUpdateE2EEMetadataParticipantsStoredProcedure")(c("LSFactory")(a),{threadKey:b})})}g.call=a}),98);
__d("MAWBridgeUpdateMinMessageHandler",["FBLogger","I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","ReQL","ReQLTable"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){var e=(h||(h=d("I64"))).of_float(b.minTimestampMs),f=b.minMessageId;return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.threadJid,"MAWBridgeUpdateMinMessageHandler",function(a,g){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.messages_ranges_v2__generated).getKeyRange(g)).then(function(h){if(h==null)return;var i=b.hasMoreBefore,j=i!=null?i:h.hasMoreBefore;return d("ReQLTable").update(a.messages_ranges_v2__generated,[g,h.minTimestampMs,h.minMessageId],function(a){if(a!=null)return{hasMoreAfter:a.hasMoreAfter,hasMoreBefore:j,isLoadingAfter:a.isLoadingAfter,isLoadingBefore:a.isLoadingBefore,maxMessageId:a.maxMessageId,maxTimestampMs:a.maxTimestampMs,minMessageId:f,minTimestampMs:e,threadKey:a.threadKey};throw c("FBLogger")("wmi_eb").mustfixThrow("Thread is missing in updating the min message in message range")})})})}g.call=a}),98);
__d("MAWBridgeUpdateThreadActivityHandler",["I64","LSBumpE2EEMetadataThreadStoredProcedure","LSFactory","MAWChatJid","MAWJids","MAWMiActGetThreadLifecycleState","MWFBLogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("MWFBLogger").MWLogger.tags(["bridgeUIEvent","Occam","ActivityUpdate"]);function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield d("MAWChatJid").toThreadMaybe(a,b.chatJid));if(c==null){yield q(a,b.chatJid);return}switch(b.source){case"outgoing_msg":case"incoming_msg":return k(a,c,b);case"deleted_msg":return m(a,c,b);case"inserted_admin_msg":return p(c,b,"No bump for admin message");case"eb_restore":return i.warn("Attempted bump from EB restore");default:b.source;throw i.mustfixThrow("Unknown source")}});return j.apply(this,arguments)}function k(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,d){if(o(b,d)){p(b,d,"Stale incoming bump");return}yield c("LSBumpE2EEMetadataThreadStoredProcedure")(c("LSFactory")(a),{bumpedByLocalDeviceSend:d.source==="outgoing_msg",isUnbump:!1,serverAuthoritativeTimestampMs:d.bumpTimestampMs,threadKey:b.threadKey});p(b,d,"Thread bumped")});return l.apply(this,arguments)}function m(a,b,c){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){yield a.threads.put(babelHelpers["extends"]({},b,{lastActivityTimestampMs:(h||(h=d("I64"))).min(b.lastActivityTimestampMs,c.bumpTimestampMs),lastReadWatermarkTimestampMs:h.min(b.lastReadWatermarkTimestampMs,c.bumpTimestampMs)})),p(b,c,"Thread unbumped")});return n.apply(this,arguments)}function o(a,b){return b.source==="incoming_msg"&&(h||(h=d("I64"))).le(b.bumpTimestampMs,a.lastActivityTimestampMs)}function p(a,b,c){b=[(h||(h=d("I64"))).to_string(a.threadKey),b.source,h.to_string(b.bumpTimestampMs),h.to_string(a.lastActivityTimestampMs),h.to_string(a.lastReadWatermarkTimestampMs)];i.debug.apply(i,[c+". threadKey: %s, source: %s, bumpTimestampMs: %s, originalLastActivityTimestampMs: %s, originalLastReadWatermarkTimestampMs: %s"].concat(b))}function q(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("MAWMiActGetThreadLifecycleState").getThreadLifecycleStateByJid(a,d("MAWJids").convertChatJidToIntJid(b),"MAWBridgeUpdateThreadActivityHandler"));i.mustfix("Missing LSDBThread when updating thread activity. jid: %s, thread state: %s",b,a.type)});return r.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeUpdateThreadListItemHandler",["I64","LSBumpE2EEMetadataThreadStoredProcedure","LSFactory","MAWBridgeBuildThreadSnippet","MAWChatJid","MAWJids","MAWMiActGetThreadLifecycleState","MWFBLogger","asyncToGeneratorRuntime","getMAWLastMessageCtaType"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("MWFBLogger").MWLogger.tags(["bridgeUIEvent","Occam","Middleware"]);function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=b.activityUpdate,d=b.chatJid;b=b.snippetUpdate;c!=null&&(yield k(a,d,c));b!=null&&(yield q(a,d,b))});return j.apply(this,arguments)}function k(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=(yield d("MAWChatJid").toThreadMaybe(a,b));if(e==null){yield v(a,b);return}switch(c.source){case"outgoing_msg":case"incoming_msg":return m(a,e,c);case"deleted_msg":return o(a,e,c);case"inserted_admin_msg":return t(e,c,"No bump for admin message");case"eb_restore":return i.warn("Attempted bump from EB restore");default:c.source;throw i.mustfixThrow("Unknown source")}});return l.apply(this,arguments)}function m(a,b,c){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,d){if(s(b,d)){t(b,d,"Stale incoming bump");return}yield c("LSBumpE2EEMetadataThreadStoredProcedure")(c("LSFactory")(a),{bumpedByLocalDeviceSend:d.source==="outgoing_msg",isUnbump:!1,serverAuthoritativeTimestampMs:d.bumpTimestampMs,threadKey:b.threadKey});t(b,d,"Thread bumped")});return n.apply(this,arguments)}function o(a,b,c){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){yield a.threads.put(babelHelpers["extends"]({},b,{lastActivityTimestampMs:(h||(h=d("I64"))).min(b.lastActivityTimestampMs,c.bumpTimestampMs),lastReadWatermarkTimestampMs:h.min(b.lastReadWatermarkTimestampMs,c.bumpTimestampMs)})),t(b,c,"Thread unbumped")});return p.apply(this,arguments)}function q(a,b,c){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=(yield d("MAWChatJid").toThreadMaybe(a,b));if(f==null){yield v(a,b);return}yield a.threads.put(babelHelpers["extends"]({},f,{lastMessageCtaType:c("getMAWLastMessageCtaType")(e.snippetType),snippet:d("MAWBridgeBuildThreadSnippet").buildBridgeThreadSnippet(e,f.snippet),snippetSenderContactId:e.snippetSenderContactId!=null?(h||(h=d("I64"))).of_string(e.snippetSenderContactId):(h||(h=d("I64"))).zero}));u(f.threadKey)});return r.apply(this,arguments)}function s(a,b){return b.source==="incoming_msg"&&(h||(h=d("I64"))).le(b.bumpTimestampMs,a.lastActivityTimestampMs)}function t(a,b,c){b=[(h||(h=d("I64"))).to_string(a.threadKey),b.source,h.to_string(b.bumpTimestampMs),h.to_string(a.lastActivityTimestampMs),h.to_string(a.lastReadWatermarkTimestampMs)];i.debug.apply(i,[c+". threadKey: %s, source: %s, bumpTimestampMs: %s, originalLastActivityTimestampMs: %s, originalLastReadWatermarkTimestampMs: %s"].concat(b))}function u(a){i.debug("Updated thread snippet. threadKey: %s",(h||(h=d("I64"))).to_string(a))}function v(a,b){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("MAWMiActGetThreadLifecycleState").getThreadLifecycleStateByJid(a,d("MAWJids").convertChatJidToIntJid(b),"MAWBridgeUpdateThreadListItemHandler"));i.mustfix("Missing LSDBThread when updating threadlist item. jid: %s, thread state: %s",b,a.type)});return w.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeXMAShareExpiredHandler",["MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,c,d){var e=String(d.xmaId);return a.attachments.get(c,d.msgId,e).then(function(f){if(f==null)return(h||(h=b("Promise"))).resolve();f=[f.defaultCtaId,f.attachmentCta1Id,f.attachmentCta2Id,f.attachmentCta3Id].filter(Boolean);f=f.map(function(b){return a.attachment_ctas["delete"](b)});return(h||(h=b("Promise"))).all(f).then(function(){return a.attachments["delete"](c,d.msgId,e)})})}function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.threadJid,"MAWBridgeXMAShareExpiredHandler",function(a,c){return i(a,c,b)})}g.callWithoutWaitingForAnything=i;g.call=a}),98);
__d("MAWBridgeXMAShareTombstonedHandler",["FBLogger","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){var f=String(e.xmaId);return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,e.threadJid,"MAWBridgeXMAShareTombstonedHandler",function(a,g){return a.attachments.get(g,e.msgId,f).then(function(i){if(i==null)return(h||(h=b("Promise"))).resolve();i=[i.defaultCtaId,i.attachmentCta1Id,i.attachmentCta2Id,i.attachmentCta3Id].filter(Boolean);i=i.map(function(b){return a.attachment_ctas["delete"](b)});return(h||(h=b("Promise"))).all(i).then(function(){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.attachments).getKeyRange(g,e.msgId,f)).then(function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(d){if(d!=null){d=babelHelpers["extends"]({},d,{attachmentCta1Id:void 0,attachmentCta2Id:void 0,attachmentCta3Id:void 0,cta1Title:void 0,cta1Type:void 0,cta2Title:void 0,cta2Type:void 0,cta3Title:void 0,cta3Type:void 0,defaultCtaId:void 0,defaultCtaTitle:void 0,maxSubtitleNumOfLines:void 0,maxTitleNumOfLines:void 0,previewHeight:void 0,previewHeightLarge:void 0,previewWidth:void 0,previewWidthLarge:void 0,subtitleText:void 0,titleText:void 0});yield a.attachments.put(d)}c("FBLogger")("messenger_web_sharing").blameToPreviousFrame().mustfix("Trying to tombstone a secure xma attachment but no existing attachment");return(h||(h=b("Promise"))).resolve()});return function(a){return d.apply(this,arguments)}}())})})})}g.call=a}),98);
__d("MAWBridgeUIEventHandler",["EBLogger","MAWAbPropsClient","MAWBridgeAddMessageSearchResultHandler","MAWBridgeCallRestoreNativeOpHandler","MAWBridgeCentralizedThreadUpdateHandler","MAWBridgeDeleteGroupInviteHandler","MAWBridgeDeleteMessageRangesV2Handler","MAWBridgeDeleteMessagesHandler","MAWBridgeDeleteReactionHandler","MAWBridgeDropAllSecureThreadsHandler","MAWBridgeEditMsgHistoryAddedHandler","MAWBridgeFulfillRestorePromisePayloadHandler","MAWBridgeGroupInfoUpdatedHandler","MAWBridgeGroupInviteLoadedHandler","MAWBridgeGroupInviteUpdateHandler","MAWBridgeHandleCOPDigest","MAWBridgeMediaExpiredHandler","MAWBridgeMsgUpdatedHandler","MAWBridgeMsgsLoadedHandler","MAWBridgeMsgsStartCountdownHandler","MAWBridgeNewMediaHandler","MAWBridgeNewMediaRangeHandler","MAWBridgeNewMsgHandler","MAWBridgeNewPollHandler","MAWBridgeNewReceiverFetchInfoHandler","MAWBridgeNewXMAHandler","MAWBridgeOccamadilloCreateE2EEMetadataThreadHandler","MAWBridgeOccamadilloCreateE2EEMetadataThreadHandlerV2","MAWBridgeOccamadilloVerifyThreadExistsHandler","MAWBridgeOneToOneMessageRequestLoadedHandler","MAWBridgeParticipantRemovedHandler","MAWBridgeParticipantUpdatedHandler","MAWBridgeParticipantsUpdatedHandler","MAWBridgeRavenActionMsgForUIHandler","MAWBridgeReactionUpsertHandler","MAWBridgeReceivedChatStateHandler","MAWBridgeReceivedReceiptHandler","MAWBridgeRefreshContactHandler","MAWBridgeRemoveMessageSearchResultHandler","MAWBridgeSyncContacts","MAWBridgeThreadHiddenV2Handler","MAWBridgeThreadTimestampsHandler","MAWBridgeThreadUpdatedHandler","MAWBridgeUIEventQueueQPLLogger","MAWBridgeUnArchivedSelfDeviceChangeAlertsHandler","MAWBridgeUnbumpOnThreadLoadHandler","MAWBridgeUpdateClientRestoreStatus","MAWBridgeUpdateContactAsConnectedHandler","MAWBridgeUpdateE2EEMetadataParticipantsHandler","MAWBridgeUpdateMinMessageHandler","MAWBridgeUpdateThreadActivityHandler","MAWBridgeUpdateThreadListItemHandler","MAWBridgeXMAShareExpiredHandler","MAWBridgeXMAShareTombstonedHandler","MAWEphemeralMessageExpirationStorage","MAWLoggerUtils","MWFBLogger","Promise","WAResultOrError","WATimeUtils","asyncToGeneratorRuntime","cr:15985","cr:15986","cr:15987","cr:16021","cr:16022","cr:16023","cr:16024","cr:16025","cr:16026","cr:16027","cr:16028","emptyFunction","getErrorSafe","isArmadillo","isInstamadilloDYI","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Handle UI Events: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Attempted to call the old DYI V1 flow"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Attempted to call the old DYI V1 flow"]);k=function(){return a};return a}var l=d("MWFBLogger").MWLogger.tags(["MAWBridgeUIEvent"]);function m(a,c,e){switch(e.tag){case"NewMsg":return d("MAWBridgeNewMsgHandler").call(c,e.value);case"MsgsStartCountdown":return d("MAWBridgeMsgsStartCountdownHandler").call(c,e.value);case"MsgClearCountdown":return(h||(h=b("Promise"))).resolve(d("MAWEphemeralMessageExpirationStorage").clearMessageFromExpiration(e.value));case"DropAllSecureThreads":return d("MAWBridgeDropAllSecureThreadsHandler").call(c);case"VerifyThreadExists":var f=e.value;return d("MAWBridgeOccamadilloVerifyThreadExistsHandler").call(c,f);case"CreateE2EEMetadataThread":return d("MAWBridgeOccamadilloCreateE2EEMetadataThreadHandler").call(c,e.value);case"CreateE2EEMetadataThreadV2":return d("MAWBridgeOccamadilloCreateE2EEMetadataThreadHandlerV2").call(c,e.value);case"EditMsgHistoryAdded":return d("MAWBridgeEditMsgHistoryAddedHandler").call(a,c,e.value);case"MsgUpdated":return d("MAWBridgeMsgUpdatedHandler").call(c,e.value);case"NewMedia":return d("MAWBridgeNewMediaHandler").call(c,e.value);case"NewMediaRange":return d("MAWBridgeNewMediaRangeHandler").call(c,e.value);case"MediaExpired":return d("MAWBridgeMediaExpiredHandler").call(c,e.value);case"XMAShareExpired":return d("MAWBridgeXMAShareExpiredHandler").call(c,e.value);case"NewXMA":return d("MAWBridgeNewXMAHandler").call(c,e.value);case"XMAShareTombstoned":return d("MAWBridgeXMAShareTombstonedHandler").call(c,e.value);case"ParticipantUpdated":return d("MAWBridgeParticipantUpdatedHandler").call(c,e.value);case"ParticipantRemoved":return d("MAWBridgeParticipantRemovedHandler").call(c,e.value);case"UpdateE2EEMetadataParticipants":return d("MAWBridgeUpdateE2EEMetadataParticipantsHandler").call(c,e.value);case"ReceivedReceipt":return d("MAWBridgeReceivedReceiptHandler").call(c,e.value);case"ThreadUpdated":return d("MAWBridgeThreadUpdatedHandler").call(c,e.value);case"GroupInfoUpdated":return d("MAWBridgeGroupInfoUpdatedHandler").call(c,e.value);case"CentralizedThreadUpdate":return d("MAWBridgeCentralizedThreadUpdateHandler").call(c,e.value);case"UpdateThreadListItem":return d("MAWBridgeUpdateThreadListItemHandler").call(c,e.value);case"UpdateThreadActivity":return d("MAWBridgeUpdateThreadActivityHandler").call(c,e.value);case"UnbumpOnThreadLoad":return d("MAWBridgeUnbumpOnThreadLoadHandler").call(c,e.value);case"ThreadTimestampsUpdated":return d("MAWBridgeThreadTimestampsHandler").call(c,e.value);case"MsgsLoaded":return d("MAWBridgeMsgsLoadedHandler").call(c,e.value);case"StartTrace":return b("cr:16023").call(c,e.value);case"UpdateTrace":return b("cr:16026").call(c,e.value);case"ThreadHiddenV2":return d("MAWBridgeThreadHiddenV2Handler").call(c,e.value);case"SyncContacts":return d("MAWBridgeSyncContacts").call(c,e.value);case"ReceivedChatState":return d("MAWBridgeReceivedChatStateHandler").call(c,e.value);case"ClockSkewUpdated":return(h||(h=b("Promise"))).resolve(d("WATimeUtils").setClockSkew(e.value));case"ABPropsUpdated":l.warn("ABPropsUpdated has been deprecated. Please use the bridge with ABPropsUpdated");return(h||(h=b("Promise"))).resolve(d("MAWAbPropsClient").rewrite(e.value));case"COPDigestReceived":return d("MAWBridgeHandleCOPDigest").call(c,e.value);case"UpsertReaction":return d("MAWBridgeReactionUpsertHandler").call(c,e.value);case"DeleteReaction":return d("MAWBridgeDeleteReactionHandler").call(c,e.value);case"UploadMessage":return b("cr:16028").call(c,e.value);case"UploadMessageByBatch":return b("cr:16027").call(c,e.value);case"DeleteMessagesOfThread":return b("cr:16021").call(c,e.value);case"UploadAttachment":return b("cr:15987").call(c,e.value);case"ResignAttachmentCDNUrl":return b("cr:15986").call(c,e.value);case"DeleteMessages":return d("MAWBridgeDeleteMessagesHandler").call(c,e.value);case"RestoreMessageBatch":d("EBLogger").EBLogger.tags(["labyrinth_dyi"]).WARN(k());return(h||(h=b("Promise"))).resolve();case"OneToOneMessageRequestLoaded":return d("MAWBridgeOneToOneMessageRequestLoadedHandler").call(c,e.value);case"GroupInviteUpdate":return d("MAWBridgeGroupInviteUpdateHandler").call(c,e.value);case"UpdateDyiStatus":d("EBLogger").EBLogger.tags(["labyrinth_dyi"]).WARN(j());return(h||(h=b("Promise"))).resolve();case"DeleteGroupInvite":return d("MAWBridgeDeleteGroupInviteHandler").call(c,e.value);case"TraceRecordCheckpoint":return b("cr:16025").call(c,e.value);case"DeleteMessageRangesV2":return d("MAWBridgeDeleteMessageRangesV2Handler").call(c,e.value);case"UpdateMinMessage":return d("MAWBridgeUpdateMinMessageHandler").call(c,e.value);case"IssuePointQuery":return b("cr:16022").call(c,e.value);case"ParticipantsUpdated":return d("MAWBridgeParticipantsUpdatedHandler").call(c,e.value);case"StartTraceWithTraceId":return b("cr:16024").call(c,e.value);case"UpdateClientRestoreStatus":return d("MAWBridgeUpdateClientRestoreStatus").call(c,e.value);case"NewMsgs":return d("MAWBridgeNewMsgHandler").bulkCall(c,e.value.msgs);case"UnArchivedSelfDeviceChangeAlerts":return d("MAWBridgeUnArchivedSelfDeviceChangeAlertsHandler").call(c,e.value);case"EphemeralSettingsUpdatedForUI":return b("cr:15985").call(c,e.value);case"RavenActionUpdate":return d("MAWBridgeRavenActionMsgForUIHandler").call(c,e.value);case"GroupInviteLoaded":return d("MAWBridgeGroupInviteLoadedHandler").call(c,e.value);case"RemoveMessageSearchResult":return d("MAWBridgeRemoveMessageSearchResultHandler").call(c,e.value);case"AddMessageSearchResult":return d("MAWBridgeAddMessageSearchResultHandler").call(a,c,e.value);case"FulfillRestorePromise":return d("MAWBridgeFulfillRestorePromisePayloadHandler").call(e.value);case"UpdateContactAsConnected":return d("MAWBridgeUpdateContactAsConnectedHandler").call(c,e.value);case"RefreshContact":return d("MAWBridgeRefreshContactHandler").call(c,e.value);case"NewReceiverFetchInfo":return d("MAWBridgeNewReceiverFetchInfoHandler").call(c,e.value);case"RestoreNativeOp":return d("MAWBridgeCallRestoreNativeOpHandler").call(c,e.value);case"NewPoll":return d("MAWBridgeNewPollHandler").call(c,e.value);default:return(h||(h=b("Promise"))).resolve()}}function a(a,b){if(!c("isArmadillo")()&&!c("isInstamadilloDYI")()){l.mustfix("User is neither part of armadillo QE and dual send QE but somehow loaded this handler");return}if(!(b.length===1&&b[0].tag==="TraceRecordCheckpoint")){var d={};d=b.reduce(function(a,b){a[b.tag]=((b=a[b.tag])!=null?b:0)+1;return a},d);l.DEBUG(i(),JSON.stringify(d))}c("promiseDone")(n(a,b),c("emptyFunction"),function(a){l.catching(a).mustfix("[MAWBridgeUIEventHandler] Failed to handle UI events: %s",b.map(function(a){return a.tag}).join(", "))})}function n(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var g=(yield a);a=d("MAWLoggerUtils").getInstanceKey();var h=e.map(function(a){return a.tag}),i="";d("MAWBridgeUIEventQueueQPLLogger").start(a,h);d("MAWBridgeUIEventQueueQPLLogger").addAnnotations(a,{"int":{queue_size:e.length}});var j;try{j=(yield g.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){for(var b=0;b<e.length;b++){var f=e[b];try{yield m(g,a,f)}catch(a){i=f.tag;return d("WAResultOrError").makeError(c("getErrorSafe")(a))}}return d("WAResultOrError").makeResult(!0)});return function(b){return a.apply(this,arguments)}}(),"readwrite","background",{events:e,type:"maw_ui_bridge"},f.id+":322"))}catch(a){j=d("WAResultOrError").makeError(c("getErrorSafe")(a))}!j.success?(d("MAWBridgeUIEventQueueQPLLogger").endFailure(a,i),l.catching(j.error).mustfix("MAWBridgeUIEventHandler] Did not commit UI events to DB, failed at %s, all events: %s",i,h.toString())):d("MAWBridgeUIEventQueueQPLLogger").endSuccess(a)});return o.apply(this,arguments)}function e(a,b,c){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,d){try{yield m(a,b,d)}catch(b){a=c("getErrorSafe")(b);l.catching(a).mustfix("[handleShimEvent] Failed to handle UI event: %s",d.tag);throw b}});return p.apply(this,arguments)}g.handleEvents=a;g.handleShimEvent=e}),98);
__d("toMsgrUserJid",["MAWJids"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=d("MAWJids").toUserJid}),98);
__d("MAWFetchContacts",["I64","LSContactTypeExact","LSIntEnum","MAWContactRelationshipType","ReQL","WAJids","asyncToGeneratorRuntime","requireDeferred","toMsgrUserJid"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("LSDatabaseSingletonLazyWrapper").__setRef("MAWFetchContacts");function k(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield j.load());b=(yield b());var e=new Set(a.map(function(a){return d("WAJids").extractUserId(a)}));return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(b.tables.contacts).filter(function(a){return e.has((h||(h=d("I64"))).to_string(a.id))})).then(function(a){return new Map(a.map(function(a){return[c("toMsgrUserJid")((h||(h=d("I64"))).to_string(a.id)),a]}))})});return l.apply(this,arguments)}function a(a){return k(a).then(function(a){var b=new Map();a.forEach(function(a,c){b.set(c,d("MAWContactRelationshipType").getContactRelationshipType(a))});return b})}function e(a){return k(a).then(function(a){var b=new Map();a.forEach(function(a,e){a=a.contactTypeExact!=null&&(h||(h=d("I64"))).equal(a.contactTypeExact,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactTypeExact").MESSENGER_ONLY_NOT_ALLOWED_ON_FB));b.set(e,a)});return b})}g.fetchContacts=k;g.fetchContactsRelationships=a;g.fetchContactsIsMsplit=e}),98);
__d("MAWSetupBridgeOfflineSnapshot",["InteractionTracingMetrics","MAWMIC","MWChatInteraction","MWFBLogger","WAOfflineUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["WA infra offline connection lost"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Stats end: "," / ",", messages: "," / ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Progress: "," / ",", messages: "," / ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Stats start: ",", messages: ",""]);k=function(){return a};return a}var l=d("MWFBLogger").MWLogger.tags(["ServerRPC","Offline"]);function m(a){d("MAWMIC").addIntAnnotation("offlineQueueSize",a);var b=d("MWChatInteraction").get(d("MWChatInteraction").MW_AUTO_CHAT_TAB_OPEN);b!=null&&c("InteractionTracingMetrics").addAnnotationInt(b,"offlineQueueSize",a)}a=function(a){return function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=b.downloaded,e=b.expected,f=b.status;b=b.timestamp;switch(f){case d("WAOfflineUtils").WAClientInfraOfflineProgress.Initializing:l.DEBUG(k(),e.count,e.message);m(e.count);a({tag:"InitOfflineQueueSyncStart",value:e.count});d("MAWMIC").addPoint("download_offline_queue_start",b);return;case d("WAOfflineUtils").WAClientInfraOfflineProgress.Processing:l.DEBUG(j(),c.count,e.count,c.message,e.message);a({tag:"InitOfflineQueueSyncProgress",value:c.count});return;case d("WAOfflineUtils").WAClientInfraOfflineProgress.Complete:l.DEBUG(i(),c.count,e.count,c.message,e.message);d("MAWMIC").addIntAnnotation("offlineQueueDownloadedCount",c.count);a({tag:"InitOfflineQueueSyncProgress",value:e.count});d("MAWMIC").addPoint("download_offline_queue_end",b);return;case d("WAOfflineUtils").WAClientInfraOfflineProgress.Failed:l.DEBUG(h());d("MAWMIC").addPoint("download_offline_queue_failed",b);return}});return function(a){return c.apply(this,arguments)}}()};e=a;g["default"]=e}),98);
__d("MWWorkerOwnedDbKeychain",["Deferred","MAWCryptoConsts","MWFBLogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleEARKeyChange"]);h=function(){return a};return a}c={accountKey:null,databaseEncryptionKeys:new Map(),dbReady:new(c("Deferred"))(),latestVersion:d("MAWCryptoConsts").VERSION};var i=babelHelpers["extends"]({},c),j="uninitialized",k=d("MWFBLogger").MWLogger.tags(["MWWorkerOwnedDbKeychain"]);function a(){return i}function b(a){k.DEBUG(h()),j="initialized",i=a}function e(){return j==="initialized"}function f(){return i.latestVersion}g.getEARKey=a;g.handleEARKeyChange=b;g.isInitialised=e;g.getLatestVersion=f}),98);
__d("IGDSetupBridge",["DTSG","FBLogger","JSResourceForInteraction","LSDatabaseSingleton","LSGetLatestThreadIds.nop","LSInitSyncCompleteSubscription","LSPlatformGraphQLLightspeedRequest","LSPlatformGraphQLLightspeedRequestForIGD","MAWAbPropsClient","MAWBridgeReceivedChatStateHandler","MAWBridgeUIEventHandler","MAWCommonSetupBridge","MAWFetchContacts","MAWGetEphemeralSettings","MAWSetupBridgeOfflineSnapshot","MAWUnrecoverableDbErrors","MWWorkerOwnedDbKeychain","Promise","Run","WAExceededStorageQuota","WAResultOrError","asyncToGeneratorRuntime","cr:3411","emptyFunction","gkx","isInstamadillo","promiseDone","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(e=c("requireDeferred"))("ArmadilloCutoverClientFalcoEvent").__setRef("IGDSetupBridge"),k=e("IGDBridgeResignCdnUrlHandler").__setRef("IGDSetupBridge"),l=e("MAWBridgeUpdateDYIStatusV2").__setRef("IGDSetupBridge"),m=e("MAWSetupBridgeOfflineConsumer").__setRef("IGDSetupBridge"),n=(i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton.then(d("LSInitSyncCompleteSubscription").use).then(function(){return(i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton}),o=function(a){j.loadImmediately(function(b){b=b.log;return b(function(){return{armadillo_thread_id:a.armadilloThreadId,domain:a.domain,event:a.event,event_details:a.eventDetails,open_thread_id:a.openThreadId,success:a.success,trace_id:a.traceId}})})},p=new Set(["StartTraceWithTraceId","TraceRecordCheckpoint"]),q=new Set(["ABPropsUpdated","ClockSkewUpdated","DropAllSecureThreads","LargeClockSkewValue","ReceivedChatState","UpdateMediaStatus"]);function a(a){var e=a.dispatch,g=a.logout,j=a.reregisterDevice,r=a.rotateCryptoAuthToken,s=a.worker;function t(){s.postMessage({type:"force-flush-data"})}d("Run").onUnload(t);d("Run").onBeforeUnload(t,!1);return d("MAWCommonSetupBridge").initBridge({customizeEventHandlers:{abPropsUpdated:function(a){d("MAWAbPropsClient").rewrite(a.abProps)},earKeyChange:function(a){d("MWWorkerOwnedDbKeychain").handleEARKeyChange(a)},executeGraphQLLightSpeedRequest:function(a){a=a.args;return c("gkx")("3889")?c("LSPlatformGraphQLLightspeedRequestForIGD").apply(void 0,a):c("LSPlatformGraphQLLightspeedRequest").apply(void 0,a)},getDTSGToken:function(){return(h||(h=b("Promise"))).resolve(d("DTSG").getToken())},getLSDBEphemeralSetting:function(a){return d("MAWGetEphemeralSettings").getEphemeralSetting(a.chatJid)},getLSDBLatestThreadIds:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield (i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton);return b.runInTransaction(function(b){return c("LSGetLatestThreadIds.nop")(b,0,"",a.numThreads,a.miActMappingFilteredThreads)},"readonly",void 0,void 0,f.id+":141")});function e(b){return a.apply(this,arguments)}return e}(),getLSDBUsersIsMsplit:function(a){return d("MAWFetchContacts").fetchContactsIsMsplit(a.users)},getLSDBUsersRelationships:function(a){return d("MAWFetchContacts").fetchContactsRelationships(a.users)},getMediaStorageResult:function(){return(h||(h=b("Promise"))).resolve(d("WAResultOrError").makeError({errorMessage:"getMediaStorageResult is not supported in IGD",errorName:"igd-unsupported"}))},getMinosEpochDataForUser:a=c("emptyFunction"),isDbMigrating:function(a){e({tag:"IsDbMigrating",value:!1})},logCutoverEvent:o,logout:g,offlineConsumerProgress:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return(yield m.load())(n,e).apply(void 0,arguments)});function c(){return a.apply(this,arguments)}return c}(),offlineSnapshot:c("MAWSetupBridgeOfflineSnapshot")(e),receivedChatState:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=(yield n);yield c.runInTransaction(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){yield d("MAWBridgeReceivedChatStateHandler").call(b,a)});return function(a){return c.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":182")});function c(b){return a.apply(this,arguments)}return c}(),reregisterDevice:j,resignCdnUrl:function(a){var b=a.deliveryObjectId,c=a.payload;return k.load().then(function(a){return a.call(c,b)})},rotateCryptoAuthToken:r,storageQuota:function(a){a=a.exceededStorageQuota;d("WAExceededStorageQuota").setExceededStorageQuota(a)},trackEbConsistency:function(){},uiUpdate:function(a){a=a.events;var e=[],f=a.filter(function(a){if(p.has(a.tag)){e.push(a);return!1}if(q.has(a.tag))return!1});e.length>0&&(b("cr:3411")==null?void 0:b("cr:3411").recordBridgeUIEvent(a),d("MAWBridgeUIEventHandler").handleEvents(n,a));if(f.length===0)return;c("isInstamadillo")()?c("FBLogger")("igd_web").warn("[Instamadillo] Unsupported invocation of UI Event Handler. Please deprecate UI Event Handler: %s",a.map(function(a){return a.tag}).join(", ")):c("FBLogger")("igd_web").warn("[IGD] Deprecating UIEventHandlers, please update LSDB directly for UI changes: %s",a.map(function(a){return a.tag}).join(", "))},unrecoverableDbError:function(a){a=a.error;return d("MAWUnrecoverableDbErrors").setError(a)},updateDYIStatus:function(a){var b=a.qplEvent,d=a.qplInstanceKeyE2E,e=a.status;c("promiseDone")(l.load().then(function(a){return a.call({qplEvent:b,qplInstanceKeyE2E:d,status:e})}))},updateEBLSInWokerStateInMainThread:a,updateMediaStatus:a,updateStateManagerStateInMainThread:a,uploadMessagesToBackupV2:function(){return(h||(h=b("Promise"))).resolve(d("WAResultOrError").makeError("gql_cancelled_instamadillo"))},uploadOpenMessages:function(a){var b=a.uploadPayloads;c("promiseDone")(c("JSResourceForInteraction")("IGDMessageUploadMutation").__setRef("IGDSetupBridge").load().then(function(a){return a.uploadOpenMessageOverGQL(b)}))}},worker:s})}g.setupBridge=a}),98);
__d("MessengerWaitForEvent",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;function a(a,c,d){var e,f=d;return new(g||(g=b("Promise")))(function(b){f?e=function(){f.apply(this,arguments)&&b.apply(this,arguments)}:e=b,a==null?void 0:a.addEventListener==null?void 0:a.addEventListener(c,e)})["finally"](function(){a==null?void 0:a.removeEventListener==null?void 0:a.removeEventListener(c,e)})}f.waitForEvent=a}),66);
__d("LocalStorageMutex",["FBLogger","MessengerWaitForEvent","Promise","QPLUserFlow","emptyFunction","pageID","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i=null,j=1e3,k=c("qpl")._(1056847375,"584");a=function(){function a(a){var b=this,d=a.mutexKey,e=a.localTakeoverKey,f=a.log,g=a.logError,h=a.getStorage,i=a.setItemGuarded,k=a.mutexTimeoutMs;k=k===void 0?j:k;a=a.mutexTimeoutCallback;this.mutexFilter=function(a){if(a.key!==b.$1)return!1;a=a.newValue||"";return!a.includes(c("pageID"))};this.$1=d;this.$2=e;this.$5=h;this.$6=i;this.$3=f;this.$4=g;this.$7=k;this.$8=a}var e=a.prototype;e.init=function(){c("QPLUserFlow").start(k);this.$3("APPMUTEX - this tab is "+c("pageID"));var a=this.getMutex();if(a===c("pageID")){this.$3("APPMUTEX - WE ALREADY HAVE THE MUTEX LOCK WITHIN INIT");c("QPLUserFlow").endSuccess(k);return(h||(h=b("Promise"))).resolve(!0)}if(a!=null){this.$3("APPMUTEX - initiating localTAKEOVER");return this.localTakeover()}else{this.$3("APPMUTEX - NO1 ELSE IS ALIVE, GET THE MUTEX");a=this.$9(c("pageID"));var d=this.$10(c("pageID"));if(!a.success||!d.success){c("QPLUserFlow").addAnnotations(k,{bool:{setMutexResult:d.success,setTakeoverResult:a.success},string:{setMutexError:d.error,setTakeoverError:a.error}});c("QPLUserFlow").endFailure(k,"fail_to_set_takeover_or_mutex");return(h||(h=b("Promise"))).resolve(!1)}c("QPLUserFlow").endSuccess(k);return(h||(h=b("Promise"))).resolve(!0)}};e.localTakeover=function(){var a,e=this,f=this.$9(c("pageID"));if(!f.success){c("QPLUserFlow").addAnnotations(k,{string:{initTakeoverError:f.error}});c("QPLUserFlow").endFailure(k,"local_takeover_init_takeover_failure");return(h||(h=b("Promise"))).resolve(!1)}var g,i=function(){g!=null&&clearTimeout(g)};f=d("MessengerWaitForEvent").waitForEvent(window,"storage",this.mutexFilter);var l=(a=this.$7)!=null?a:j;return(h||(h=b("Promise"))).race([f,new h(function(a){g=setTimeout(function(){a()},l)}),this.$8?this.$8():new(h||(h=b("Promise")))(c("emptyFunction"))]).then(function(a){if(a==null){e.$3("AppMutex - Forcefully took the mutex and takeover lock");var b=e.$9(c("pageID")),d=e.$10(c("pageID"));if(!b.success||!d.success){c("QPLUserFlow").addAnnotations(k,{string:{setMutexError:d.error,setTakeoverError:b.error}});c("QPLUserFlow").endFailure(k,"local_takeover_forcefully_takeover_failure");return!1}c("QPLUserFlow").endSuccess(k);return!0}e.$3("APPMUTEX - GOT MUTEX STORAGE EVENT CHANGE FROM ANOTHER TAB");d=e.$11(a.newValue);if(!d&&e.hasTakeoverPermission()){e.$3("APPMUTEX - setting mutex on localtakeover");b=e.$10(c("pageID"));if(!b.success){c("QPLUserFlow").addAnnotations(k,{string:{setMutexError:b.error}});c("QPLUserFlow").endFailure(k,"local_takeover_set_mutex_failure");return!1}c("QPLUserFlow").endSuccess(k);return!0}else{e.hasTakeoverPermission()&&e.$12();c("QPLUserFlow").endFailure(k,"local_takeover_no_takeover_permission");return!1}}).then(function(a){i();return a})["catch"](function(a){i();e.$4("AppMutex - localTakeover error no permission - "+a);c("QPLUserFlow").endFailure(k,"local_takeover_general_failure");return!1})};e.onMutexDeath=function(){var a=this.getMutex();a!=null&&a===c("pageID")&&(this.$3("APPMUTEX - removing mutex on death"),this.$13(),this.hasTakeoverPermission()&&this.$12())};e.takeoverFilter=function(a){if(a.key!==this.$2)return!1;a=a.newValue||"";return!a.includes(c("pageID"))};e.$14=function(){if(!i){var a=this.$5();if(!a)throw c("FBLogger")("messenger_web").mustfixThrow("Could not get localStorage");i=a}return i};e.getMutex=function(){i=this.$14();return i.getItem(this.$1)};e.$10=function(a){i=this.$14();return this.$6(i,this.$1,a)};e.$13=function(){i=this.$14(),i.removeItem(this.$1)};e.getTakeover=function(){i=this.$14();return i.getItem(this.$2)};e.$9=function(a){i=this.$14();return this.$6(i,this.$2,a)};e.$12=function(){i=this.$14(),i.removeItem(this.$2)};e.$11=function(a){return a!=null?a:""};e.hasTakeoverPermission=function(){var a=this.getTakeover();return a!=null&&a===c("pageID")};return a}();g.THIS_TAB=c("pageID");g.LocalStorageMutex=a}),98);
__d("MAWAppMutex",["LocalStorageMutex","MAWLocalStorage","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h="armadillo_msgr_mutex",i="armadillo_msgr_local_takeover",j=null;function a(){j==null&&(j=new(d("LocalStorageMutex").LocalStorageMutex)({getStorage:d("MAWLocalStorage").getStorage,localTakeoverKey:i,log:function(a){d("WALogger").LOG([a])},logError:function(a){d("WALogger").ERROR([a])},mutexKey:h,setItemGuarded:d("MAWLocalStorage").setItemGuarded}));return j}g.MAW_MUTEX_KEY=h;g.MAW_LOCALTAKEOVER_KEY=i;g.use=a}),98);
__d("LSIssueNewErrorStoredProcedure",["LSIssueNewError","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSIssueNewError"),e.taskId,e.errorCode,e.errorTitleText,e.errorBodyText,e.errorExtraData,e.presentationStyle);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWIssueNewUserVisibleErrors",["fbt","$InternalEnum","LSDatabaseSingleton","LSFactory","LSIssueNewErrorStoredProcedure","LSRemoveErrorStoredProcedure","Promise","ReQL","asyncToGeneratorRuntime","gkx","promiseDone"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;function a(a,b,e,g){c("promiseDone")((j||(j=d("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(d){return d.runInTransaction(function(d){return c("LSIssueNewErrorStoredProcedure")(c("LSFactory")(d),{errorBodyText:a!=null?a.toString():void 0,errorExtraData:g,errorTitleText:b.toString(),presentationStyle:String(e)})},"readwrite",void 0,void 0,f.id+":37")}))}function k(a,b){return a.runInTransaction(function(a){return c("LSRemoveErrorStoredProcedure")(c("LSFactory")(a),{errorId:b})},"readwrite",void 0,void 0,f.id+":56")}function e(){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield (j||(j=d("LSDatabaseSingleton"))).LSDatabaseSingleton),c=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.user_visible_errors)));yield (i||(i=b("Promise"))).all(c.map(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){yield k(a,b.errorId)});return function(a){return c.apply(this,arguments)}}()))})())}function l(a){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var c=(yield (j||(j=d("LSDatabaseSingleton"))).LSDatabaseSingleton),e=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(c.tables.user_visible_errors)));yield (i||(i=b("Promise"))).all(e.map(function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b.errorExtraData===a&&(yield k(c,b.errorId))});return function(a){return d.apply(this,arguments)}}()))})())}var m=b("$InternalEnum")({TOAST:"toast",BANNER:"banner"}),n=h._(/*BTDS*/"No se han podido cargar todos los chats cifrados de extremo a extremo"),o=h._(/*BTDS*/"Actualiza la p\u00e1gina para verlos."),p=h._(/*BTDS*/"Es posible que tengas que actualizar la p\u00e1gina"),q=h._(/*BTDS*/"Es posible que se produzcan errores al enviar o recibir mensajes en esta p\u00e1gina. Actual\u00edzala para volver a cargar los chats."),r=c("gkx")("4424")?h._(/*BTDS*/"Este navegador no es compatible"):h._(/*BTDS*/"Es posible que tengas que actualizar el navegador");h=c("gkx")("4424")?h._(/*BTDS*/"Faltan algunos mensajes y determinadas funciones de mensajer\u00eda no est\u00e1n disponibles. Puedes usar otro navegador u otro dispositivo m\u00f3vil."):h._(/*BTDS*/"Los chats con cifrado de extremo a extremo no aparecer\u00e1n en este navegador. Actualiza el navegador o usa otro.");var s=new Map([[n.toString(),n],[p.toString(),p]]),t=new Map([[o.toString(),o],[q.toString(),q]]);g.issueError=a;g.deleteUserVisibleError=k;g.deleteAllErrors=e;g.deleteUserVisibleErrorByJSErrorMessage=l;g.MAWUserVisibleErrorPresentationType=m;g.MAWGeneralErrorMsgTitle=n;g.MAWGeneralErrorMsgBody=o;g.MAWLegacyUserErrorMsgTitle=p;g.MAWLegacyUserErrorMsgBody=q;g.MAWUnsupportedIndexedDBErrorMsgTitle=r;g.MAWUnsupportedIndexedDBErrorMsg=h;g.errorMsgTitleToFbtMap=s;g.errorMsgBodyToFbtMap=t}),226);
__d("MAWCommonBackendSetup",["EARInitType","MAWAppMutex","MAWEncryptionIndexedDbV2","MAWInit","MAWInitError","MAWIssueNewUserVisibleErrors","MAWLocalStorage","MAWLoggerUtils","MAWSetupWorker","MAWVaultMaterialsStorage","MAWWorkerReboot","MWSetupDBEncryption","Promise","asyncToGeneratorRuntime","gkx","requireDeferredForDisplay","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferredForDisplay")("MAWMainThreadLogger").__setRef("MAWCommonBackendSetup"),j=function(a,e){var f=c("gkx")("9301");if(f===!0)if(e)return(h||(h=b("Promise"))).resolve(!0);else return a.measurePerformance("acquire_mutex",function(){return d("MAWAppMutex").use().init()});else return a.measurePerformance("acquire_mutex",function(){try{var a=d("MAWAppMutex").use().init();return e?a.then(function(){return(h||(h=b("Promise"))).resolve(!0)},function(){return(h||(h=b("Promise"))).resolve(!0)}):a}catch(a){if(e)return(h||(h=b("Promise"))).resolve(!0);throw a}})};function a(a,b,c,d,e){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f,g){var i=d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker();if(!i){if(!d("MAWLocalStorage").isLocalStorageAvailable())throw new(d("MAWInitError").MAWInitError)("localstorage_not_supported");return(h||(h=b("Promise"))).resolve()}var j=(yield d("MAWVaultMaterialsStorage").setupVaultMaterials());yield d("MAWSetupWorker").getOrSetupWorker(j,a,c,e,f,g)["catch"](function(b){return d("MAWWorkerReboot").rebootWorker(j,a,c,e,"backend_setup_failure",g)["catch"](function(a){throw new(d("MAWInitError").MAWInitError)("worker_setup_error",a)})})});return k.apply(this,arguments)}function e(a,b,c,d,e,f){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,k,l){yield a.measurePerformance("prepare_logger",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=i.load();(yield a).setupMainWaLogger()}));d("MAWLoggerUtils").initMessengerWebLogging();var m=d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker();m||(yield a.measurePerformance("detection_support",function(){if(!d("MAWLocalStorage").isLocalStorageAvailable())throw new(d("MAWInitError").MAWInitError)("localstorage_not_supported");return(h||(h=b("Promise"))).resolve()}));var n=a.measurePerformance("setup_vault_materials",function(){return d("MAWVaultMaterialsStorage").setupVaultMaterials()});m=(yield j(a,m));var o=(yield a.measurePerformance("main_ear_setup",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(c("gkx")("12397"))return(h||(h=b("Promise"))).resolve({success:!0});d("MWSetupDBEncryption").setPerformanceMeasurementTool(d("MAWInit").MAWInit.measurePerformance);var a=(yield d("MWSetupDBEncryption").init(c("EARInitType").MAW_INIT));d("MAWEncryptionIndexedDbV2").maybeSetEncryptionDbOnVersionChange(function(){var a;(a=d("MAWIssueNewUserVisibleErrors")).issueError(a.MAWLegacyUserErrorMsgBody,a.MAWLegacyUserErrorMsgTitle,a.MAWUserVisibleErrorPresentationType.BANNER)});return a})));if(!o.success){a.logPoint("keychain_setup_failure");throw new(d("MAWInitError").MAWInitError)("keychain_setup_failure",o.payload)}if(!m){a.logPoint("maw_appmutex_no_permission");throw new(d("MAWInitError").MAWInitError)("maw_appmutex_no_permission")}var p=(yield n);yield a.measurePerformance("setup_worker",function(){return d("MAWSetupWorker").getOrSetupWorker(p,e,f,g,k,l)["catch"](function(b){a.logPoint("reboot_worker_on_backend_setup_failure");a.addStringAnnotation("backend_setup_failure_reason",b.message);return d("MAWWorkerReboot").rebootWorker(p,e,f,g,"backend_setup_failure",l)["catch"](function(a){throw new(d("MAWInitError").MAWInitError)("worker_setup_error",a)})})})});return l.apply(this,arguments)}g.getMutexPermission=j;g.setupArmadilloBackendForCalling=a;g.setupArmadilloBackend=e}),98);
__d("MAWStateContext.react",["$InternalEnum","EncryptedBackupsDYITypes","FBLogger","MAWSharedProtocolQueueConst","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=i.createContext,k=i.useCallback,l=i.useContext,m=i.useEffect,n=i.useRef,o=i.useState;i=b("$InternalEnum")({NOT_STARTED:"not_started",IN_PROGRESS:"in_progress",READY:"ready"});b={ebDYIState:d("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.NotStarted,ebState:null,ephemeralSettings:{},isMAWDBinUILoaded:!1,mediaDownloadRetryCount:{},mediaDownloadStatus:{},messageLatencies:{},offlineQueueCount:0,offlineQueueProgressDownloaded:0,offlineQueueProgressProcessed:0,offlineQueueSyncState:d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Initializing,offlineQueueThreadStatus:{},unArchivedSelfDeviceChangeAlerts:0,workerState:i.NOT_STARTED};function a(){var a=l(r);return k(function(b,c){c===void 0&&(c=Date.now()),a({optimisticMsgId:b,tag:"OptimisticSendMessage",timestamp:c})},[a])}function e(){var a=l(r);return k(function(){a({tag:"ClearEphemeralSettings"})},[a])}var p={state:b,subscriptions:new Set()},q=j(function(){return p});d=j(p);var r=j(function(a){throw c("FBLogger")("messenger_web").mustfixThrow("MAW Dispatch not implemented")});function f(a){var b=l(q)(),c=b.state,d=b.subscriptions;b=o(function(){return a(c)});var e=b[0],f=b[1],g=n(e);m(function(){var b=function(b){b=a(b);b!==g.current&&(g.current=b,f(b))};d.add(b);return function(){d["delete"](b)}},[d,a]);return e}g.WorkerState=i;g.initialState=b;g.useDispatchOptimisticSendMessage=a;g.useDispatchClearEphemeralSettings=e;g.MAWNonRerenderingStateContext=q;g.MAWStateContext=d;g.MAWDispatchContext=r;g.useMAWSelector=f}),98);
__d("WADynamicRouterSync",["ExecutionEnvironment","Promise","WALogger","WAMapWithDefault","err","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose([""," is not defined for ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["No handler for bridge with namespace: "," route: "," called in environment: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge handler: ",""]);l=function(){return a};return a}function m(a,b){if(a==null)return;var c=a.toLastActiveClient;a=babelHelpers.objectWithoutPropertiesLoose(a,["toLastActiveClient"]);if(c===!0&&b!=null){return babelHelpers["extends"]({},a,{toClientId:(c=a.toClientId)!=null?c:b})}return a}a=function(){function a(){var a=this;this.$2=new Map();this.$4=new(d("WAMapWithDefault").MapWithDefault)(function(){return new Set()});this.$5=null;this.fireAndForget=function(b,c,d,e,f,g){e===void 0&&(e=!1),a.$3==null?void 0:a.$3(b,c,d),a.$4.get(b).add({route:c,arg:d,resolver:null,silentLog:e,eventCallbacks:f,opts:m(g,a.$5)}),a.$6(b,c)};this.sendAndReceive=function(c,d,e,f,g,h){f===void 0&&(f=!1);return new(i||(i=b("Promise")))(function(b){a.$3==null?void 0:a.$3(c,d,e),a.$4.get(c).add({route:d,arg:e,resolver:function(a){b(a)},silentLog:f,eventCallbacks:g,opts:m(h,a.$5)}),a.$6(c,d)})}}var e=a.prototype;e.setAckPayload=function(a){this.$1=a};e.getAckPayoad=function(){return this.$1};e.hasHandlerForNamespace=function(a){return this.$2.has(a)};e.getHandledNamespaces=function(){return Array.from(this.$2.keys())};e.setOnRouteCalled=function(a){this.$3=a};e.setNamespaceHandler=function(a,b){var c=this.$2,d=c.get(a);if(d===b)return;c.set(a,b);d==null&&this.$6(a)};e.$7=function(a,c){var e=a.route,f=a.arg,g=a.resolver,h=a.silentLog,j=a.eventCallbacks;a=a.opts;try{var k;this.$5=(k=a==null?void 0:a.fromClientId)!=null?k:this.$5;c(e,f,g,h,j,a)}catch(a){g==null?void 0:g((i||(i=b("Promise"))).reject(a)),d("WALogger").ERROR(l(),a)}};e.$6=function(a,b){var e=this,f=this.$4.get(a),g=this.$2.get(a);if(g==null){var i=(h||(h=c("ExecutionEnvironment"))).isInWorker?"worker":"main-thread";d("WALogger").ERROR(k(),a,b,i);return}f.forEach(function(a){c("gkx")("14383")?(f["delete"](a),e.$7(a,g)):(e.$7(a,g),f["delete"](a))})};e.setHandlers=function(a,b){function e(e,f,g,h,i,k){if(b[e]==null){d("WALogger").ERROR(j(),e,a);throw c("err")(e+" is not defined for "+a)}h=b[e](f,k);g&&g(h)}this.setNamespaceHandler(a,e)};return a}();g.normaliseHandlerOptions=m;g.DynamicRouterSync=a}),98);
__d("shouldHideChatOnAppsSubdomain",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return!c("gkx")("738")?!1:document.location.hostname==="apps.facebook.com"}g["default"]=a}),98);
__d("shouldDisableWorkerOnAppsSubdomain",["gkx","shouldHideChatOnAppsSubdomain"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("8929")&&c("shouldHideChatOnAppsSubdomain")()}g["default"]=a}),98);
__d("useMWEncryptedBackupsProcessBackupIdsDeferred",["promiseDone","react","requireDeferred","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect,j=c("requireDeferred")("MWEncryptedBackupsProcessBackupIdsDEPRECATED").__setRef("useMWEncryptedBackupsProcessBackupIdsDeferred");function a(a){var b=c("useAsyncReStore")();i(function(){var d,e=!1;j.onReadyImmediately(function(f){c("promiseDone")(b,function(b){e||(d=f.subscribeToEncryptedBackupsRow(b,a))})});return function(){e=!0,d==null?void 0:d()}},[b,a])}g["default"]=a}),98);
__d("MAWCommonSetup",["EBMainThreadEBDBApiDeferred","EBMainThreadListeners","ExecutionEnvironment","MAWBridgeFireAndForget","MAWCommonBackendSetup","MAWEncryptedBackupsStateManager","MAWInit","MAWInitError","MAWIsIDBOperational","MAWIssueNewUserVisibleErrors","MAWJobDefinitions","MAWLoggerUtils","MAWMIC","MAWStateContext.react","MAWUIJob","MAWWaitForBackendSetup","WABridge","WADynamicRouterSync","WAJobOrchestratorTypes","WALogger","asyncToGeneratorRuntime","cr:13007","cr:17068","cr:19609","cr:9939","getErrorSafe","gkx","performance","promiseDone","react","requireDeferred","shouldDisableWorkerOnAppsSubdomain","useMWEncryptedBackupsProcessBackupIdsDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Armadillo is disabled on apps subdomain"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Armadillo is disabled on apps subdomain"]);l=function(){return a};return a}f=j||d("react");var m=f.useContext,n=f.useEffect,o=c("requireDeferred")("FBLogger").__setRef("MAWCommonSetup"),p=b("cr:19609")!=null?b("cr:19609")==null?void 0:b("cr:19609").MAWInitialiseMAWDbInUI:b("cr:13007")==null?void 0:b("cr:13007").MAWInitialiseMAWDbInUI;c("requireDeferred")("MAWTimedJob").__setRef("MAWCommonSetup");var q=!1,r=function(){return(h||(h=c("performance"))).now()},s=function(a){c("gkx")("12414")||(d("MAWEncryptedBackupsStateManager").setEncryptedBackupsState(a),d("MAWBridgeFireAndForget").fireAndForget("backend","setEncryptedBackupsState",{newState:a}))};function t(){d("MAWBridgeFireAndForget").fireAndForget("backend","resendEBLSInWorkerEbEnabledState")}function u(){d("MAWBridgeFireAndForget").fireAndForget("backend","resendWorkerStateManagerValuesToMainThread")}function a(a){d("MAWLoggerUtils").initMessengerWebLogging();var b=m(d("MAWStateContext.react").MAWDispatchContext),e=d("MAWIsIDBOperational").useIsIDBOperational();n(function(){e&&(i||(i=c("ExecutionEnvironment"))).isInBrowser&&c("promiseDone")(x(b,a))},[a,b,e]);n(function(){e&&c("promiseDone")(d("EBMainThreadListeners").initEBListeners())},[e]);c("useMWEncryptedBackupsProcessBackupIdsDeferred")(s);t();u()}function e(a){var b=m(d("MAWStateContext.react").MAWDispatchContext),e=d("MAWIsIDBOperational").useIsIDBOperational();n(function(){e&&c("promiseDone")(v(b,a))},[a,b,e])}function v(a,b){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=b.logout,f=b.reregisterDevice,g=b.rotateCryptoAuthToken,h=b.setupBridge;if(q){void o.load().then(function(a){a("messenger_web").warn("Armadillo already setup - return")});return}if(c("shouldDisableWorkerOnAppsSubdomain")()){d("WALogger").LOG(l());return}q=!0;d("WABridge").makeWABridge(new(d("WADynamicRouterSync").DynamicRouterSync)());try{d("MAWIssueNewUserVisibleErrors").deleteAllErrors(),yield d("MAWCommonBackendSetup").setupArmadilloBackendForCalling(function(b){return h({dispatch:a,logout:e,reregisterDevice:f,rotateCryptoAuthToken:g,worker:b})},function(){a({tag:"InitOfflineQueueSyncComplete",value:void 0}),d("MAWMIC").onConnectToExistingWorker()},function(){a({tag:"InitOfflineQueueSyncComplete",value:void 0})},"bridgeForCalling",function(a){})}catch(a){void o.load().then(function(b){return b("messenger_web").catching(a).mustfix("UI Dexie initialisation failed: %s",a.message)})}});return w.apply(this,arguments)}function x(a,b){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=e.logout,g=e.reregisterDevice,h=e.rotateCryptoAuthToken,j=e.setupBridge;if(q){void o.load().then(function(a){a("messenger_web").warn("Armadillo already setup - return")});return}if(c("shouldDisableWorkerOnAppsSubdomain")()){d("WALogger").LOG(k());return}q=!0;d("MAWMIC").startMAWMICFlow();d("MAWInit").MAWInit.start();b("cr:9939")!=null&&(i||(i=c("ExecutionEnvironment"))).isInBrowser&&(yield b("cr:9939").getOrSetupMAWCacheDB());p!=null&&(i||(i=c("ExecutionEnvironment"))).isInBrowser&&c("promiseDone")(p(a),function(){},function(a){return o.load().then(function(b){return b("messenger_web").catching(a).mustfix("UI Dexie initialisation failed: %s",a.message)})});b("cr:17068")!=null&&c("promiseDone")(b("cr:17068").getDeviceAge());d("WABridge").makeWABridge(new(d("WADynamicRouterSync").DynamicRouterSync)());try{d("MAWIssueNewUserVisibleErrors").deleteAllErrors(),yield d("MAWCommonBackendSetup").setupArmadilloBackend(d("MAWInit").MAWInit,function(b){return j({dispatch:a,logout:f,reregisterDevice:g,rotateCryptoAuthToken:h,worker:b})},function(){a({tag:"InitOfflineQueueSyncComplete",value:void 0}),a({tag:"IsDbMigrating",value:!1}),d("MAWMIC").onConnectToExistingWorker()},function(){a({tag:"InitOfflineQueueSyncComplete",value:void 0}),a({tag:"IsDbMigrating",value:!1})},"mawInit",function(a){}),d("MAWUIJob").UIJobStarters.fireAndForget(d("MAWJobDefinitions").jobSerializers.handleFutureproofMsg({priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW})),d("MAWInit").MAWInit.addIntAnnotation("endTimePageRelative",r()),d("MAWInit").MAWInit.endSuccess()}catch(a){var l,m=c("getErrorSafe")(a);e=m instanceof d("MAWInitError").MAWInitError?m.message:"maw_init_failure";m.message=(l=m.message)!=null?l:"Unknown";l=m.message==="maw_appmutex_no_permission"&&document.visibilityState!=="visible";l?d("MAWInit").MAWInit.cancel(e,m):(d("MAWWaitForBackendSetup").rejectBackendSetup(m),d("MAWInit").MAWInit.fail(e,m));d("MAWIssueNewUserVisibleErrors").issueError(d("MAWIssueNewUserVisibleErrors").MAWGeneralErrorMsgBody,d("MAWIssueNewUserVisibleErrors").MAWGeneralErrorMsgTitle,d("MAWIssueNewUserVisibleErrors").MAWUserVisibleErrorPresentationType.BANNER,m.message);m&&void o.load().then(function(a){a("messenger_web").catching(m).mustfix("MAW backend setup failed -- %s",m.message)});throw m}void d("EBMainThreadEBDBApiDeferred").startListeningDeviceRegistrations()});return y.apply(this,arguments)}g.useArmadillo=a;g.useArmadilloForCalling=e}),98);
__d("MAWOccamadilloOnMutexChange",["I64","LSDefaultSyncGroups","LSIntEnum","LSSyncGroupsUtils","Promise","WALogger","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Occamadillo] Resetting sync cursor and network request"]);k=function(){return a};return a}function l(a){var c=d("LSDefaultSyncGroups").e2eeMetadataSyncGroup;if(c!=null)return a.sync_groups.put(babelHelpers["extends"]({},d("LSSyncGroupsUtils").defaultSyncGroup,{groupId:(j||(j=d("LSIntEnum"))).ofNumber(c.groupId)}));else return(h||(h=b("Promise"))).resolve()}function m(a){return a.network_requests.put({epochId:void 0,failureCount:(i||(i=d("I64"))).zero,lastDelayedRequestTimestampMs:void 0,lastSentTimestampMs:i.zero,lastSyncRequestTimestampMs:i.zero,networkTaskIdentifier:void 0,syncDatabaseId:(j||(j=d("LSIntEnum"))).ofNumber(95),taskQueueName:""})}function a(a){d("WALogger").LOG(k()),c("promiseDone")(a.runInTransaction(function(a){return(h||(h=b("Promise"))).all([l(a),m(a)])},"readwrite",void 0,void 0,f.id+":53"))}g.onOccamadilloMutexChange=a}),98);
__d("MAWReinit",["ExecutionEnvironment","MAWCurrentUser","QPLUserFlow","QuickPerformanceLogger","WAGetStorageQplAnnotations","asyncToGeneratorRuntime","gkx","qpl","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("qpl")._(25310984,"169");function a(a){var e=a!=null?{instanceKey:a}:void 0,f=!1,g=!1;function k(){if(g)return;g=!0;c("QPLUserFlow").start(j,babelHelpers["extends"]({cancelOnUnload:!0,onFlowTimeout:function(){f=!0},timeoutInMs:(h||(h=c("ExecutionEnvironment"))).canUseDOM?6e4:0},e));void d("WAGetStorageQplAnnotations").getStorageQplAnnotations().then(function(a){c("QPLUserFlow").addAnnotations(j,a)});t()}function l(a){if(!g||f)return;t();c("QPLUserFlow").addPoint(j,a,e)}function m(a,b){var d;if(!g||f)return;c("QPLUserFlow").addAnnotations(j,{bool:(d={},d[a]=b,d)})}function n(a,b){var d;if(!g||f)return;c("QPLUserFlow").addAnnotations(j,{string:(d={},d[a]=b,d)})}function o(a,b){var d;if(!g||f)return;c("QPLUserFlow").addAnnotations(j,{string_array:(d={},d[a]=b,d)})}function p(a,b){var d;if(!g||f)return;c("QPLUserFlow").addAnnotations(j,{"int":(d={},d[a]=b,d)})}function q(a){t(),f=!0,c("QPLUserFlow").addAnnotations(j,{string:{failReason:a}},e),c("QPLUserFlow").endFailure(j,"maw_init_fail",e),s=!1}function r(a){t(),f=!0,s=!1,c("QPLUserFlow").addAnnotations(j,{string:{dropReason:a}},e),(i||(i=c("QuickPerformanceLogger"))).markerDrop(j)}var s=!1;function t(){if(s)return;s=!0;c("QPLUserFlow").addAnnotations(j,{bool:{armadillo_init_sync_api_improvements:c("gkx")("24025"),isArmadilloPublicLaunchUser:c("gkx")("23405"),isTlcPublicUser:d("MAWCurrentUser").isTlcPublicUser(),useSharedWorker:d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()}})}function u(a){t(),f=!0,c("QPLUserFlow").addAnnotations(j,{string:{cancelReason:a}},e),c("QPLUserFlow").endCancel(j,e),s=!1}function v(){t(),f=!0,c("QPLUserFlow").endSuccess(j,e),s=!1}function w(a,b){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a+"_start";a=a+"_end";l(c);c=(yield b());l(a);return c});return x.apply(this,arguments)}return{addBoolAnnotation:m,addIntAnnotation:p,addStringAnnotation:n,addStringArrayAnnotation:o,cancel:u,drop:r,endSuccess:v,fail:q,logPoint:l,measurePerformance:w,start:k}}g.getMAWReinit=a}),98);
__d("MAWReinitWorker",["MAWCommonBackendSetup","MAWOccamadilloOnMutexChange","MAWReinit","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.allTablesPersisted,c=a.db,e=a.dispatch,f=a.dispatchClearEphemeralSettings,g=a.instanceKey,h=a.logout,i=a.reregisterDevice,j=a.rotateCryptoAuthToken,k=a.setupBridge;a=a.workerCreateReason;g=d("MAWReinit").getMAWReinit(g);g.start();var l=function(){e({tag:"InitOfflineQueueSyncComplete",value:void 0})};yield d("MAWCommonBackendSetup").setupArmadilloBackend(g,function(a){a=k({dispatch:e,logout:h,reregisterDevice:i,rotateCryptoAuthToken:j,worker:a});b||d("MAWOccamadilloOnMutexChange").onOccamadilloMutexChange(c);return a},l,l,a,function(a){});g.endSuccess();f()});return h.apply(this,arguments)}g["default"]=a}),98);
__d("MAWSetupMutex",["LocalStorageMutex","MAWAppMutex","MAWBridge","MAWInit","MAWIssueNewUserVisibleErrors","MAWLocalStorage","MAWMIC","MAWReinitWorker","MAWSetupWorker","MAWStateContext.react","MAWWaitForBackendSetup","MAWWebWorkerSingleton","MWFBLogger","QPLUserFlow","Run","asyncToGeneratorRuntime","isInstamadillo","promiseDone","qpl","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=i||d("react");var j=e.useCallback,k=e.useEffect,l=e.useMemo,m=d("MWFBLogger").MWLogger.tags(["MAWInit"]),n=!1,o=0;function p(a){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(document.visibilityState!=="visible")return!1;var b=window.indexedDB!=null,c=d("MAWLocalStorage").isLocalStorageAvailable();if(a){m.debug("AppMutex - Shouldn't reinitialize, worker already exists");return!1}return!b||!c?!1:!0});return q.apply(this,arguments)}function a(a,e){var f=a.logout,g=a.reregisterDevice,i=a.rotateCryptoAuthToken,q=a.setupBridge,r=l(function(){return d("MAWAppMutex").use()},[]),s=(h||(h=c("useReStore")))(),t=d("MAWStateContext.react").useDispatchClearEphemeralSettings(),u=s.persistenceTypes.includes("indexeddb"),v=j(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=r.takeoverFilter(a);if(!b||a.newValue===d("LocalStorageMutex").THIS_TAB||a.newValue==="")return;!u&&!c("isInstamadillo")()&&d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"DropAllSecureThreads",value:void 0}]});yield d("MAWSetupWorker").terminateDedicatedWorker("MAWSetupMutexV2:handleStoreChange");d("MAWWaitForBackendSetup").resetBackendSetup();d("MAWMIC").cancel("workerMutexLost");d("MAWInit").MAWInit.cancel("workerMutexLost");r.onMutexDeath()});return function(b){return a.apply(this,arguments)}}(),[r,u]),w=j(function(){r.onMutexDeath(),c("promiseDone")(d("MAWSetupWorker").terminateDedicatedWorker("MAWSetupMutexV2:handleUnload"))},[r]),x=j(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("MAWWebWorkerSingleton").doesWorkerExist());a=(yield p(a));if(!a||n)return;n=!0;o++;try{yield c("MAWReinitWorker")({allTablesPersisted:u,db:s,dispatch:e,dispatchClearEphemeralSettings:t,instanceKey:o,logout:f,reregisterDevice:g,rotateCryptoAuthToken:i,setupBridge:q,workerCreateReason:"mawReinitSetupMutex"}),d("MAWIssueNewUserVisibleErrors").deleteUserVisibleErrorByJSErrorMessage("maw_appmutex_no_permission")}catch(a){m.catching(a).mustfix("AppMutex - failed to reinitialize worker"),c("QPLUserFlow").endFailure(c("qpl")._(25310984,"169"),"failed_to_reinitialize_worker",{annotations:{string:{error:a.message.concat(": ",a.error)}},error:a,instanceKey:o})}finally{n=!1}}),[u,s,e,t,f,g,i,q]);k(function(){window.addEventListener("storage",v);var a=d("Run").onBeforeUnload(w,!1),b=d("Run").onUnload(w);window.addEventListener("visibilitychange",x);return function(){window.removeEventListener("storage",v),a.remove(),b.remove(),window.removeEventListener("visibilitychange",x)}},[v,w,x])}g.useMutex=a}),98);
__d("MAWSetupMutex.react",["MAWSetupMutex"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.dispatch;a.environment;a.fbId;a=a.platformSetupUtils;d("MAWSetupMutex").useMutex(a,b);return null}g["default"]=a}),98);
__d("LSGetThreadDataFromTam.nop",["I64","LSMessagingThreadTypeUtil","LSResult","LSShape","LSVec","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){b=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.threads).filter(function(a){a=a.threadType;return d("LSMessagingThreadTypeUtil").isArmadilloSecure(a)}).take((h||(h=d("I64"))).to_int32(e))));a=b.map(function(a,b){var c=a.lastActivityTimestampMs,e=a.lastReadWatermarkTimestampMs,f=a.threadKey;a=a.threadType;return d("LSShape").ofRecord({client_thread_pk:f,display_timestamp_ms:c,is_group_thread:d("LSMessagingThreadTypeUtil").isGroup(a),last_activity_timestamp_ms:c,last_read_watermark_timestamp_ms:e,server_thread_key:f,sort_order:(h||(h=d("I64"))).of_int32(b)})});return c("LSResult")(c("LSVec").ofArray(a))});function e(b,c,d){return a.apply(this,arguments)}return e}();a.__nop_name__="LSGetThreadDataFromTam";g["default"]=a}),98);
__d("LSScheduleOccamThreadsIntegrityChecker",["LSGetCursor","LSGetThreadDataFromTam.nop","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return c.storedProcedure(b("LSGetCursor"),c.i64.cast([0,95])).then(function(a){return a=a,d[0]=a[0],a})},function(b){return d[1]=c.createArray(),d[2]=c.createArray(),c.i64.neq(a[1],void 0)?d[3]=a[1]:d[3]=c.i64.cast([0,20]),c.forEach(c.db.table(220).fetch([[[c.i64.cast([0,95]),c.i64.cast([0,0])]]]),function(a){a=a.item;return d[10]=a.minLastActivityTimestampMs,d[9]=new c.Map(),d[9].set("has_more_before",a.hasMoreBefore),d[9].set("is_loading_before",a.isLoadingBefore),d[9].set("min_last_activity_timestamp_ms",d[10]),d[9].set("min_thread_key",a.minThreadKey),d[9].set("parent_thread_key",c.i64.cast([0,0])),d[11]=(d[2].push(d[9]),d[2]),c.forEach(c.islc(c.filter(c.db.table(9).fetch([[[{gte:d[10]}]],"lastActivityTimestampMs"]),function(a){return c.i64.ge(a.lastActivityTimestampMs,d[10])&&c.i64.eq(a.syncGroup,c.i64.cast([0,95]))&&c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),0,c.i64.to_float(d[3])),function(a){a=a.item;return d[11]=new c.Map(),d[11].set("authority_level",a.authorityLevel),d[11].set("folder_name",a.folderName),d[11].set("last_activity_timestamp_ms",a.lastActivityTimestampMs),d[11].set("last_read_watermark_timestamp_ms",a.lastReadWatermarkTimestampMs),d[11].set("thread_key",a.threadKey),d[12]=(d[1].push(d[11]),d[1])})})},function(a){return d[4]=c.createArray(),c.nativeOperation(b("LSGetThreadDataFromTam.nop"),d[3]).then(function(a){return a=a,d[5]=a[0],a})},function(a){return d[6]=c.createArray(),d[7]=new c.Map(),d[7].set("cursor",d[0]),d[7].set("mi_act_mapping_columns_for_integrity_check",d[6]),d[7].set("occam_threads_columns_for_integrity_check",d[1]),d[7].set("threads_ranges_columns_for_integrity_check",d[2]),d[7].set("tam_threads_columns_for_integrity_check",d[5]),d[8]=c.toJSON(d[7]),c.storedProcedure(b("LSIssueNewTask"),"occam-threads-integrity-check",c.i64.cast([0,701]),d[8],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxScheduleOccamThreadsIntegrityCheckerStoredProcedure";a.__tables__=["sync_group_threads_ranges","threads"];e.exports=a}),null);
__d("LSScheduleOccamThreadsIntegrityCheckerStoredProcedure",["LSScheduleOccamThreadsIntegrityChecker","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){e===void 0&&(e={});a=a.storedProcedure(c("LSScheduleOccamThreadsIntegrityChecker"),e.delayMs,e.maxThreadCount);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MWChatFetchThreadMessageCounts",["asyncToGeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";function a(a){return g.apply(this,arguments)}function g(){g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return{}});return g.apply(this,arguments)}function c(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return 0});return h.apply(this,arguments)}f.fetchArmadilloThreadMessageCounts=a;f.fetchArmadilloThreadMessageCount=c}),66);
__d("globalCryptoSubtle",[],(function(a,b,c,d,e,f){"use strict";b=a.crypto.subtle;c=b;f["default"]=c}),66);
__d("useDataLossStatisticsStorageListener",["LSDatabaseSingleton","MWChatFetchThreadMessageCounts","Visibility","WebStorage","promiseDone","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(i||d("react")).useEffect,l="armadillo_msgr_data_loss_stats";function a(){k(function(){var a;window.setTimeout(function(){a=c("Visibility").addListener(c("Visibility").HIDDEN,function(){c("promiseDone")((j||(j=d("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(a){return d("MWChatFetchThreadMessageCounts").fetchArmadilloThreadMessageCounts(a).then(function(a){(h||(h=c("WebStorage"))).setItemGuarded(h.getLocalStorage(),l,JSON.stringify(a))})}))})},3e4);return function(){var b;(b=a)==null?void 0:b.remove()}},[])}g.DATA_LOSS_STATISTICS_STORAGE_KEY=l;g.useDataLossStatisticsStorageListener=a}),98);
__d("MWChatDataLossCheckerUtil",["FBLogger","I64","MWChatFetchThreadMessageCounts","Promise","QuickPerformanceLogger","WebStorage","asyncToGeneratorRuntime","gkx","globalCryptoSubtle","promiseDone","qpl","useDataLossStatisticsStorageListener"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function l(a){a=Array.from(new Uint8Array(a));return a.map(function(a){return a.toString(16).padStart(2,"0")}).join("")}function m(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{if(c("gkx")("24059"))return a;var b=new TextEncoder();b=b.encode(a).buffer;a=(yield c("globalCryptoSubtle").digest("SHA-256",b));return l(a)}catch(a){return a}});return n.apply(this,arguments)}function o(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.currentIDBCnt,d=a.currentMsgCnt,e=a.logThreadId,f=a.prevMsgCnt,g=a.qplEvent;a=a.threadId;if(e!=null&&e){e=(yield m(a));b!=null?((j||(j=c("QuickPerformanceLogger"))).markerStartFromNavStart(g),j.markerAnnotate(g,{"int":{current_idb_count:b,current_msg_count:d,prev_msg_count:f},string:{encrypted_threadId:e}}),j.markerEnd(g,2)):((j||(j=c("QuickPerformanceLogger"))).markerStartFromNavStart(g),j.markerAnnotate(g,{"int":{current_msg_count:d,prev_msg_count:f},string:{encrypted_threadId:e}}),j.markerEnd(g,2))}else b!=null?((j||(j=c("QuickPerformanceLogger"))).markerStartFromNavStart(g),j.markerAnnotate(g,{"int":{current_idb_count:b,current_msg_count:d,prev_msg_count:f}}),j.markerEnd(g,2)):((j||(j=c("QuickPerformanceLogger"))).markerStartFromNavStart(g),j.markerAnnotate(g,{"int":{current_msg_count:d,prev_msg_count:f}}),j.markerEnd(g,2))});return p.apply(this,arguments)}function q(a){var b=a.currentMsgCnt,c=a.logThreadId,d=a.prevMsgCnt,e=a.qplEvent;a=a.threadId;return o({currentMsgCnt:b,logThreadId:c,prevMsgCnt:d,qplEvent:e,threadId:a})}function a(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){try{a=(yield d("MWChatFetchThreadMessageCounts").fetchArmadilloThreadMessageCount(a,b));var e=(k||(k=c("WebStorage"))).getAllowlistedKeyFromLocalStorage(d("useDataLossStatisticsStorageListener").DATA_LOSS_STATISTICS_STORAGE_KEY);if(e==null)return{isThreadMissingMessages:!1};e=JSON.parse(e);b=(e=e[(i||(i=d("I64"))).to_string(b)])!=null?e:null;if(b==null)return{isThreadMissingMessages:!1};return b>0&&a===0?{currCount:a,isThreadMissingMessages:!0,prevCount:b}:{isThreadMissingMessages:!1}}catch(a){c("FBLogger")("labyrinth").catching(a).warn("Failed to check for data loss");return{isThreadMissingMessages:!1}}});return r.apply(this,arguments)}function e(a){a=d("MWChatFetchThreadMessageCounts").fetchArmadilloThreadMessageCounts(a);a.then(function(a){var e=(k||(k=c("WebStorage"))).getAllowlistedKeyFromLocalStorage(d("useDataLossStatisticsStorageListener").DATA_LOSS_STATISTICS_STORAGE_KEY);if(e==null)return(h||(h=b("Promise"))).resolve(null);e=JSON.parse(e);return(h||(h=b("Promise"))).resolve({current:a,previous:e})}).then(function(a){if(a==null)return(h||(h=b("Promise"))).resolve();var c=a.current;a=a.previous;return s(a,c)})["catch"](function(a){return c("FBLogger")("labyrinth").catching(a).warn("Failed to check for data loss")});return a.then(function(){})}function s(a,b){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,d){var e=[];for(var f in a)Object.prototype.hasOwnProperty.call(d,f)&&e.push(f);f=[];for(var g=0;g<e.length;g++){var i=e[g],j={currentMsgCnt:d[i],prevMsgCnt:a[i],threadId:i};a[i]>0&&d[i]===0?(f.push(q(babelHelpers["extends"]({},j,{qplEvent:c("qpl")._(717553665,"1183")}))),f.push(q(babelHelpers["extends"]({},j,{logThreadId:!0,qplEvent:c("qpl")._(717562243,"1358")})))):(f.push(q(babelHelpers["extends"]({},j,{qplEvent:c("qpl")._(717553666,"1184")}))),f.push(q(babelHelpers["extends"]({},j,{logThreadId:!0,qplEvent:c("qpl")._(717556541,"1361")}))))}yield (h||(h=b("Promise"))).all(f)});return t.apply(this,arguments)}function f(a){var b=function(b){c("promiseDone")(m(b).then(function(d){(j||(j=c("QuickPerformanceLogger"))).markerStartFromNavStart(c("qpl")._(717567419,"1383")),j.markerAnnotate(c("qpl")._(717567419,"1383"),{string:{encryptedThreadId:d,msg_count:a[b].toString()}}),j.markerEnd(c("qpl")._(717567419,"1383"),2)}))};for(var d in a)b(d)}g.qplLog=q;g.checkIsThreadMissingMessages=a;g.fetchCountsAndLogDataLoss=e;g.logThreadCompleteDataLoss=s;g.logLocalStatistics=f}),98);
__d("useOnMawSetupComplete.react",["emptyFunction","promiseDone","react","waitForMAWMIC"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect;function a(a,b,e){b===void 0&&(b=c("emptyFunction")),i(function(){var e=!1;c("promiseDone")(d("waitForMAWMIC").promise.then(function(){if(e)return;a()})["catch"](function(){if(e)return;b()}));return function(){e=!0}},e)}g.useOnMawSetupComplete=a}),98);
__d("useDataLossChecker",["FBLogger","I64","LSDatabaseSingleton","LSFactory","LSScheduleOccamThreadsIntegrityCheckerStoredProcedure","MWChatDataLossCheckerUtil","asyncToGeneratorRuntime","gkx","justknobx","promiseDone","useDataLossStatisticsStorageListener","useOnMawSetupComplete.react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(){d("useDataLossStatisticsStorageListener").useDataLossStatisticsStorageListener(),d("useOnMawSetupComplete.react").useOnMawSetupComplete(function(){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield (h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton);yield d("MWChatDataLossCheckerUtil").fetchCountsAndLogDataLoss(a)})()),j()},j(),[])}function j(){try{var a=c("gkx")("24061"),e=c("justknobx")._("1683");a&&e&&c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield (h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton);return a.runInTransaction(function(a){return c("LSScheduleOccamThreadsIntegrityCheckerStoredProcedure")(c("LSFactory")(a),{delayMs:(i||(i=d("I64"))).of_int32(6e4),maxThreadCount:i.of_int32(20)})},"readonly",void 0,void 0,f.id+":61")})())}catch(a){c("FBLogger")("labyrinth_web").warn("Error running thread integrity checker",a)}}g["default"]=a}),98);
__d("useLegacyUserWatchdog",["MAWIssueNewUserVisibleErrors","clearTimeout","react","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect;b=24*60*60*1e3;var j=5*b;function a(){i(function(){var a=c("setTimeout")(function(){var a;(a=d("MAWIssueNewUserVisibleErrors")).issueError(a.MAWLegacyUserErrorMsgBody,a.MAWLegacyUserErrorMsgTitle,a.MAWUserVisibleErrorPresentationType.BANNER)},j);return function(){return c("clearTimeout")(a)}},void 0)}g["default"]=a}),98);
__d("useMAWReregisterDeviceOnError",["LSPersistedDbGating","MAWIssueNewUserVisibleErrors","MAWLoggerUtils","MAWReinitWorker","MAWSetupWorker","MAWStateContext.react","MAWWaitForBackendSetup","ODS","WABridgedAPI","WATagsLogger","asyncToGeneratorRuntime","promiseDone","react","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unable to reinit worker ",""]);j=function(){return a};return a}e=h||d("react");var k=e.useCallback,l=e.useContext,m=!1,n=typeof window!=="undefined"?window:self;function o(){m=!0,c("promiseDone")(d("MAWSetupWorker").terminateWorkerPermanently(),function(){(i||(i=d("ODS"))).bumpEntityKey(3185,"armadillo_forced_reregister_fail",n.location.hostname),d("MAWIssueNewUserVisibleErrors").issueError(d("MAWIssueNewUserVisibleErrors").MAWLegacyUserErrorMsgBody,d("MAWIssueNewUserVisibleErrors").MAWLegacyUserErrorMsgTitle,d("MAWIssueNewUserVisibleErrors").MAWUserVisibleErrorPresentationType.BANNER)})}function a(a){var e=a.rotateCryptoAuthToken,f=a.setupBridge,g=c("useAsyncReStore")(),h=d("MAWStateContext.react").useDispatchClearEphemeralSettings(),p=l(d("MAWStateContext.react").MAWDispatchContext);return k(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(m)return;(i||(i=d("ODS"))).bumpEntityKey(3185,"armadillo_forced_deregister",n.location.hostname);yield c("WABridgedAPI").removeCurrentDevice();yield d("MAWSetupWorker").terminateWorker("useMAWReregisterDeviceOnError");d("MAWWaitForBackendSetup").resetBackendSetup();try{var a=(yield g);yield c("MAWReinitWorker")({allTablesPersisted:d("LSPersistedDbGating").allTablesPersisted,db:a,dispatch:p,dispatchClearEphemeralSettings:h,logout:o,reregisterDevice:o,rotateCryptoAuthToken:e,setupBridge:f,workerCreateReason:"mawReinitReregDevice"})}catch(b){d("MAWWaitForBackendSetup").rejectBackendSetup(b);a=b.description||b.message||b;d("WATagsLogger").TAGS([d("MAWLoggerUtils").Tag.DeviceRegistration,d("MAWLoggerUtils").Tag.LogoutHandler,d("MAWLoggerUtils").Tag.WorkerSetup,d("MAWLoggerUtils").Tag.MAWWorker,d("MAWLoggerUtils").Tag.MAWInit]).ERROR(j(),a);d("MAWIssueNewUserVisibleErrors").issueError(d("MAWIssueNewUserVisibleErrors").MAWLegacyUserErrorMsgBody,d("MAWIssueNewUserVisibleErrors").MAWLegacyUserErrorMsgTitle,d("MAWIssueNewUserVisibleErrors").MAWUserVisibleErrorPresentationType.BANNER)}}),[g,p,h,e,f])}g["default"]=a}),98);
__d("useStorageUsageMetricsLogger",["cr:20551","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect;function a(){i(function(){void (b("cr:20551")==null?void 0:b("cr:20551").logMAWDBUsageMetrics())},[])}g["default"]=a}),98);
__d("MAWSetupImpl.react",["BaseHeadingContext","CometRelay","MAWCommonSetup","MAWCryptoAuthToken","MAWSetupMutex.react","MAWStateContext.react","cr:6159","cr:6160","cr:8800","promiseDone","react","shouldUseMAWSharedWorker","useDataLossChecker","useLegacyUserWatchdog","useMAWReregisterDeviceOnError","useStorageUsageMetricsLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;var j=e.useCallback,k=e.useContext,l=e.useMemo;window.XPlatTesting=b("cr:6159");window.XPlatTestingGroups=b("cr:6160");window.XPlatMockServer=b("cr:8800");function a(a){var b=a.children,e=a.fbid,f=a.logout,g=a.setupBridge;a=k(d("MAWStateContext.react").MAWDispatchContext);var h=d("CometRelay").useRelayEnvironment(),m=j(function(){return d("MAWCryptoAuthToken").fetchFreshCAT(h)},[h]),n=c("useMAWReregisterDeviceOnError")({rotateCryptoAuthToken:m,setupBridge:g}),o=l(function(){return{logout:f!=null?f:function(){return c("promiseDone")(n())},reregisterDevice:function(){return c("promiseDone")(n())},rotateCryptoAuthToken:m,setupBridge:g}},[m,f,n,g]);d("MAWCommonSetup").useArmadillo(o);c("useLegacyUserWatchdog")();c("useDataLossChecker")();c("useStorageUsageMetricsLogger")();var p=k(c("BaseHeadingContext")),q=!d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker();return i.jsxs(c("BaseHeadingContext").Provider,{value:p+1,children:[b,q?i.jsx(c("MAWSetupMutex.react"),{dispatch:a,environment:h,fbId:e,platformSetupUtils:o}):null]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWBridgeInitOfflineQueueSyncStartHandler",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("MessengerLogHistory").__setRef("MAWBridgeInitOfflineQueueSyncStartHandler");function a(){h.onReady(function(a){a=a.getInstance("maw_setup");a.debug("Init Offline Queue Sync Start")})}g.call=a}),98);
__d("MAWDeviceChangeState-resolver",[],(function(a,b,c,d,e,f){"use strict";var g=0,h=[],i={getDeviceAlertCount:function(){return g},subscribe:function(a){h.push(a);return function(){h=h.filter(function(b){return b!==a})}}};function a(a){g!==a&&(g=a,h.forEach(function(a){return a()}))}function b(){return{read:function(){return i.getDeviceAlertCount()},subscribe:function(a){return i.subscribe(a)}}}f.updateDeviceCount=a;f.deviceAlertCount=b}),66);
__d("MAWMediaDownloadStatusReducersUtils",["FBLogger","MAWGetIsMediaDownloadStatusEnabled","MAWMediaDownloadStatus","isEmpty","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){b=b.reduce(function(b,d){if(d.plaintextHash==null){c("FBLogger")("messenger_web_media").mustfix("[NewMedia] No valid media plaintextHash found in reducer %s",d.mediaId);return b}var e=c("nullthrows")(d.plaintextHash).toString();if(a.mediaDownloadStatus[e]!=null&&a.mediaDownloadStatus[e].mainMediaStatus!==c("MAWMediaDownloadStatus").MISSING_FILE)return b;var f=d.hasPreviewMedia!=null;b[e]={mainMediaStatus:d.hasMedia?c("MAWMediaDownloadStatus").SUCCESS:c("MAWMediaDownloadStatus").MISSING_FILE,mainMediaStatusDetails:"initial_media_download",previewMediaStatus:f?d.hasPreviewMedia===!0?c("MAWMediaDownloadStatus").SUCCESS:c("MAWMediaDownloadStatus").MISSING_FILE:void 0,previewMediaStatusDetails:f?"initial_media_download":void 0};return b},{});return(h||(h=c("isEmpty")))(b)?a:babelHelpers["extends"]({},a,{mediaDownloadStatus:babelHelpers["extends"]({},a.mediaDownloadStatus,{},b)})}function b(a,b){if(!d("MAWGetIsMediaDownloadStatusEnabled").getIsMediaDownloadStatusForXMAsEnabled())return a;b=b.reduce(function(b,d){if(d.faviconPlaintextHash!=null){var e;b[d.faviconPlaintextHash]=babelHelpers["extends"]({},a.mediaDownloadStatus[d.faviconPlaintextHash],{mainMediaStatus:d.hasXmaFaviconMedia===!0?c("MAWMediaDownloadStatus").SUCCESS:(e=(e=a.mediaDownloadStatus[d.faviconPlaintextHash])==null?void 0:e.mainMediaStatus)!=null?e:c("MAWMediaDownloadStatus").MISSING_FILE,mainMediaStatusDetails:"initial_xma_favicon_status"})}if(d.headerMediaPlaintextHash!=null){b[d.headerMediaPlaintextHash]=babelHelpers["extends"]({},a.mediaDownloadStatus[d.headerMediaPlaintextHash],{mainMediaStatus:d.hasXmaHeaderMedia===!0?c("MAWMediaDownloadStatus").SUCCESS:(e=(e=a.mediaDownloadStatus[d.headerMediaPlaintextHash])==null?void 0:e.mainMediaStatus)!=null?e:c("MAWMediaDownloadStatus").MISSING_FILE,mainMediaStatusDetails:"initial_xma_header_status"})}if(d.defaultPreviewMediaPlaintextHash==null)return b;e=c("nullthrows")(d.defaultPreviewMediaPlaintextHash).toString();if(a.mediaDownloadStatus[e]!=null&&a.mediaDownloadStatus[e].mainMediaStatus!==c("MAWMediaDownloadStatus").MISSING_FILE)return b;b[e]=babelHelpers["extends"]({},a.mediaDownloadStatus[e],{mainMediaStatus:d.hasMedia===!0?c("MAWMediaDownloadStatus").SUCCESS:c("MAWMediaDownloadStatus").MISSING_FILE,mainMediaStatusDetails:"initial_media_download"});return b},{});return(h||(h=c("isEmpty")))(b)?a:babelHelpers["extends"]({},a,{mediaDownloadStatus:babelHelpers["extends"]({},a.mediaDownloadStatus,{},b)})}g.handleNewMedias=a;g.handleNewXMAs=b}),98);
__d("MAWOfflineQueueThreadStatus",[],(function(a,b,c,d,e,f){"use strict";var g=function(a,b){return Object.entries(a).filter(function(a){var c,d=a[0];a=a[1];return((c=b[d])==null?void 0:c.chatStatus)!==a.chatStatus||((c=b[d])==null?void 0:c.snippetStatus)!==a.snippetStatus})},h=function(a,b){return a.reduce(function(a,b){var c=b[0];b=b[1];a[c]={chatStatus:b.chatStatus,snippetStatus:b.snippetStatus};return a},b)};function a(a,b){a=a!=null?g(a,b):null;a=a==null||a.length===0?b:h(a,babelHelpers["extends"]({},b));return a}f.calculateOfflineQueueThreadStatus=a}),66);
__d("MAWStateContextProvider.react",["MAWBridgeInitOfflineQueueSyncCompleteHandler","MAWBridgeInitOfflineQueueSyncStartHandler","MAWDeviceChangeState-resolver","MAWMediaDownloadStatus","MAWMediaDownloadStatusReducersUtils","MAWOfflineQueueThreadStatus","MAWSharedProtocolQueueConst","MAWStateContext.react","cr:19624","gkx","react","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));e=i;var k=e.useCallback,l=e.useEffect,m=e.useMemo,n=e.useReducer,o=e.useTransition,p=(e=c("gkx")("12254"))!=null?e:!1,q=(e=c("gkx")("12254"))!=null?e:!1,r=(e=c("gkx")("12254"))!=null?e:!1,s=(e=c("gkx")("12254"))!=null?e:!1,t=function(a,b){switch(b.tag){case"OptimisticSendMessage":var e;return p?a:babelHelpers["extends"]({},a,{messageLatencies:babelHelpers["extends"]({},a.messageLatencies,(e={},e[b.optimisticMsgId]={sent:b.timestamp},e))});case"NewMsg":case"MsgUpdated":var f,g;if(p)return a;e=b.value.ack;var h=b.value.msgId;f=(f=b.value.offlineMsg)==null?void 0:f.msgId;f!=null&&a.messageLatencies[f]!=null&&(a.messageLatencies[h]=a.messageLatencies[f],delete a.messageLatencies[f]);f=a.messageLatencies[h];if((f==null?void 0:f.sent)!=null&&(f==null?void 0:f.acked)!=null)return a;f=(f==null?void 0:f.sent)||Date.now();e=e!==0?Date.now():void 0;return babelHelpers["extends"]({},a,{messageLatencies:babelHelpers["extends"]({},a.messageLatencies,(g={},g[h]={acked:e,sent:f},g))});case"InitOfflineQueueSyncProgress":h=b.value;return babelHelpers["extends"]({},a,{offlineQueueProgressDownloaded:h});case"InitOfflineQueueConsumerSyncProgress":e=b.value;f=e.chatJidStatus;g=e.processed;h=a.offlineQueueThreadStatus||{};e=d("MAWOfflineQueueThreadStatus").calculateOfflineQueueThreadStatus(f,h);return babelHelpers["extends"]({},a,{offlineQueueProgressProcessed:g,offlineQueueThreadStatus:e});case"InitOfflineQueueSyncStart":d("MAWBridgeInitOfflineQueueSyncStartHandler").call();f=b.value;return babelHelpers["extends"]({},a,{offlineQueueCount:f});case"InitOfflineQueueSyncComplete":d("MAWBridgeInitOfflineQueueSyncCompleteHandler").call();h=b.value;g=a.offlineQueueThreadStatus||{};e=d("MAWOfflineQueueThreadStatus").calculateOfflineQueueThreadStatus(h,g);return babelHelpers["extends"]({},a,{offlineQueueSyncState:d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete,offlineQueueThreadStatus:e});case"UnArchivedSelfDeviceChangeAlerts":f=b.value;return babelHelpers["extends"]({},a,{unArchivedSelfDeviceChangeAlerts:f});case"EphemeralSettingsUpdatedForUI":if(r)return a;h=b.value;g=h.chatJid;e=h.ephemeralSettingArgs;f=e.ephemeralExpirationInSec;h=e.ephemeralLastUpdatedOrSetTimestamp;e=g;return babelHelpers["extends"]({},a,{ephemeralSettings:babelHelpers["extends"]({},a.ephemeralSettings,(g={},g[e]={ephemeralExpirationInSec:f,ephemeralLastUpdatedOrSetTimestamp:h},g))});case"ClearEphemeralSettings":return r?a:babelHelpers["extends"]({},a,{ephemeralSettings:{}});case"UpdateMediaStatus":var i,j,k,l,m;e=b.value;f=e.details;h=e.key;g=e.status;var n=e.type;e=e.validationResult;h=h.toString();i=(i=a.mediaDownloadStatus[h])==null?void 0:i.mainMediaStatus;j=(j=a.mediaDownloadStatus[h])==null?void 0:j.mainMediaStatusDetails;k=(k=a.mediaDownloadStatus[h])==null?void 0:k.previewMediaStatus;l=(l=a.mediaDownloadStatus[h])==null?void 0:l.previewMediaStatusDetails;m=(m=a.mediaDownloadStatus[h])==null?void 0:m.validationResult;var o=n==="main"?i===c("MAWMediaDownloadStatus").SUCCESS:k===c("MAWMediaDownloadStatus").SUCCESS;return g===c("MAWMediaDownloadStatus").DOWNLOADING&&o?a:babelHelpers["extends"]({},a,{mediaDownloadStatus:babelHelpers["extends"]({},a.mediaDownloadStatus,(o={},o[h]={mainMediaStatus:n==="main"?g:i,mainMediaStatusDetails:n==="main"?f:j,previewMediaStatus:n==="preview"?g:k,previewMediaStatusDetails:n==="preview"?f:l,validationResult:e!=null?e:m},o))});case"SetMediaDownloadStatusState":h=b.value;i=h.key;j=h.newMediaDownloadState;g=i.toString();return(j==null?void 0:j.mainMediaStatus)===c("MAWMediaDownloadStatus").MISSING_FILE&&((k=a.mediaDownloadStatus[g])==null?void 0:k.mainMediaStatus)!=null?a:babelHelpers["extends"]({},a,{mediaDownloadStatus:babelHelpers["extends"]({},a.mediaDownloadStatus,(n={},n[g]=j,n))});case"IncreaseMediaDownloadRetryCount":f=b.value.key;l=f.toString();return babelHelpers["extends"]({},a,{mediaDownloadRetryCount:babelHelpers["extends"]({},a.mediaDownloadRetryCount,(e={},e[l]=((m=a.mediaDownloadRetryCount[l])!=null?m:0)+1,e))});case"NewMedia":return c("gkx")("11968")===!0?a:d("MAWMediaDownloadStatusReducersUtils").handleNewMedias(a,[b.value]);case"NewMedias":return d("MAWMediaDownloadStatusReducersUtils").handleNewMedias(a,b.value);case"SetMediaValidatedResult":o=b.value;h=o.key;i=o.validatedResult;k=h.toString();g=babelHelpers["extends"]({},a.mediaDownloadStatus[k],{validationResult:i});return babelHelpers["extends"]({},a,{mediaDownloadStatus:babelHelpers["extends"]({},a.mediaDownloadStatus,(j={},j[k]=g,j))});case"NewXMA":return d("MAWMediaDownloadStatusReducersUtils").handleNewXMAs(a,[b.value]);case"NewXMAs":return d("MAWMediaDownloadStatusReducersUtils").handleNewXMAs(a,b.value);case"UpdateMediaStatus_FOR_DEBUG_ONLY":n=b.value;f=n.details;l=n.key;m=n.status;e=l.toString();return babelHelpers["extends"]({},a,{mediaDownloadStatus:babelHelpers["extends"]({},a.mediaDownloadStatus,(o={},o[e]={mainMediaStatus:m,mainMediaStatusDetails:f,previewMediaStatus:m,previewMediaStatusDetails:f},o))});case"SetIsMAWDBinUILoaded":return q?a:babelHelpers["extends"]({},a,{isMAWDBinUILoaded:!0});case"UpdateEBState":return babelHelpers["extends"]({},a,{ebState:b.value.newState});case"UpdateWorkerState":return babelHelpers["extends"]({},a,{workerState:b.value.newState})}return a},u=function(a){if(b("cr:19624")==null)return!1;if(a.tag==="InitOfflineQueueSyncProgress"){var c=a.value;b("cr:19624").initOfflineQueueSyncProgress(c);return!0}if(a.tag==="InitOfflineQueueConsumerSyncProgress"){c=a.value;var e=c.chatJidStatus;c=c.processed;b("cr:19624").initOfflineQueueConsumerSyncProgress(c,e);return!0}if(a.tag==="InitOfflineQueueSyncStart"){d("MAWBridgeInitOfflineQueueSyncStartHandler").call();c=a.value;b("cr:19624").initOfflineQueueSyncStart(c);return!0}if(a.tag==="InitOfflineQueueSyncComplete"){d("MAWBridgeInitOfflineQueueSyncCompleteHandler").call();e=a.value;b("cr:19624").initOfflineQueueSyncComplete(e);return!0}return!1},v=function(a){if(!s)return!1;if(a.tag==="UnArchivedSelfDeviceChangeAlerts"){a=a.value;d("MAWDeviceChangeState-resolver").updateDeviceCount(a);return!0}return!1};function a(a){var b;a=a.children;var c=n(t,(b=d("MAWStateContext.react")).initialState),e=c[0],f=c[1];c=o();c[0];var g=c[1];c=k(function(a){var b=u(a);if(!b){b=v(a);b||g(function(){return f(a)})}},[]);var h=m(function(){return new Set()},[]),i=m(function(){return{state:e,subscriptions:h}},[e,h]),p=w(i),q=k(function(){return p.current},[p]);l(function(){h==null?void 0:h.forEach(function(a){return a(e)})},[e,h]);return j.jsx(b.MAWDispatchContext.Provider,{value:c,children:j.jsx(b.MAWStateContext.Provider,{value:i,children:j.jsx(b.MAWNonRerenderingStateContext.Provider,{value:q,children:a})})})}a.displayName=a.name+" [from "+f.id+"]";function w(a){var b=(h||(h=c("useUnsafeRef_DEPRECATED")))(a);b.current=a;return b}g.MAWStateContextProvider=a}),98);
__d("IGDAWSetup.react",["FBLogger","IGDSetIGE2EEEligibility","IGDSetupBridge","MAWCurrentUser","MAWSetupImpl.react","MAWStateContextProvider.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useCallback;function a(a){var b=d("react-compiler-runtime").c(4);a=a.children;var e=j;d("IGDSetIGE2EEEligibility").useUpsertSetIGE2EEEligibilityOnMount();var f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f={className:"xjp7ctv"},b[0]=f):f=b[0];var g;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(g=d("MAWCurrentUser").getID(),b[1]=g):g=b[1];b[2]!==a?(f=i.jsx("div",babelHelpers["extends"]({},f,{"data-testid":void 0,children:i.jsx(d("MAWStateContextProvider.react").MAWStateContextProvider,{children:i.jsx(c("MAWSetupImpl.react"),{fbid:g,logout:e,setupBridge:d("IGDSetupBridge").setupBridge,children:a})})})),b[2]=a,b[3]=f):f=b[3];return f}function j(){}g["default"]=a}),98);
__d("LSIssueAttachmentBackupTask",["LSArrayGetObjectAt","LSBase64Encode.nop","LSGetBlobFromString.nop","LSHmac_v2.nop","LSIsEncryptionVersionSecure","LSIssueNewTask","LSLogMebClientEvent.nop","LSOcmfClientMap.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure] Beginning execution."),a[5]!==void 0?d[1]=a[5]:(d[27]=c.i64.random(),d[1]=c.i64.to_string(d[27])),c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,e){var f=a.done;a=a.value;return f?(f=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,c.i64.cast([0,1]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,c.i64.cast([0,20]),void 0,void 0],d[2]=f[0],d[3]=f[1],d[4]=f[2],d[5]=f[3],d[6]=f[4],d[7]=f[5],d[8]=f[6],d[9]=f[7],d[10]=f[8],d[11]=f[9],d[12]=f[10],d[13]=f[11],d[14]=f[12],d[15]=f[13],d[16]=f[14],d[17]=f[15],d[18]=f[16],d[19]=f[17],f):(e=a.item,c.sequence([function(a){return d[32]=e.backupTenancy,d[31]=e.encryptionVersion,d[27]=void 0,c.i64.neq(d[27],void 0)?c.resolve(d[28]=d[27]):c.sequence([function(a){return d[33]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[34]=a[0],a})},function(a){return d[34]?d[43]=(d[33].push(c.i64.cast([0,0])),d[33]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[35]=a[0],a})},function(a){return d[35]?d[43]=(d[33].push(c.i64.cast([0,2])),d[33]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[36]=a[0],a})},function(a){return d[36]?d[43]=(d[33].push(c.i64.cast([0,3])),d[33]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[37]=a[0],a})},function(a){return d[37]?d[43]=(d[33].push(c.i64.cast([0,4])),d[33]):0,d[38]=c.createArray(),d[39]=c.i64.of_int32(d[33].length),c.i64.gt(d[39],c.i64.cast([0,0]))?c.loopAsync(d[39],function(a){return d[43]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[33],d[43]).then(function(a){return a=a,d[44]=a[0],d[45]=a[1],a})},function(a){return d[46]=(d[38].push(d[44]),d[38])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[43]=c.createArray(),d[44]=c.i64.of_int32(d[38].length),c.i64.gt(d[44],c.i64.cast([0,0]))?c.loopAsync(d[44],function(a){return d[46]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[38],d[46]).then(function(a){return a=a,d[47]=a[0],d[48]=a[1],a})},function(a){return d[49]=(d[43].push(c.i64.to_string(d[47])),d[43])}])}):c.resolve()},function(a){return d[45]=d[43].join(","),d[40]=d[45]}])},function(a){return d[38].some(function(a){return c.i64.eq(d[31],a)})?d[41]=d[31]:d[41]=void 0,c.i64.neq(d[41],void 0)?d[42]=d[41]:d[42]=void 0,d[28]=d[42]}])},function(a){return c.i64.neq(d[28],void 0)?d[29]=d[28]:d[29]=c.i64.cast([0,0]),c.i64.neq(d[32],void 0)?d[30]=d[32]:d[30]=c.i64.cast([0,1]),a=[e.backupId,e.deviceId,e.mailboxRootKeyBlob,e.ocmfClientStateBlob,void 0,void 0,d[29],d[30],e.epochAuthPublicKeyBlob,e.epochAuthPrivateKeyBlob,e.devicePublicKeyBlob,e.devicePrivateKeyBlob,e.epochStoragePublicKeyBlob,e.epochStoragePrivateKeyBlob,e.obliviousValidationTokenBlob,e.authorityLevel,void 0,void 0],d[2]=a[0],d[3]=a[1],d[4]=a[2],d[5]=a[3],d[6]=a[4],d[7]=a[5],d[8]=a[6],d[9]=a[7],d[10]=a[8],d[11]=a[9],d[12]=a[10],d[13]=a[11],d[14]=a[12],d[15]=a[13],d[16]=a[14],d[17]=a[15],d[18]=a[16],d[19]=a[17],a}]))})},function(e){return c.blobs.neq(d[5],void 0)?c.i64.neq(d[3],void 0)?(d[27]=c.i64.to_string(d[2]),d[27]!==void 0?c.sequence([function(e){return d[28]=c.createArray(),d[63]=(d[28].push(d[27]),d[28]),d[63]=(d[28].push(a[0]),d[28]),d[29]=c.toJSON(d[28]),c.nativeOperation(b("LSGetBlobFromString.nop"),d[29]).then(function(a){return a=a,d[30]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("YXR0YWNobWVudF9rZXlfc2NvcGU="),d[30]).then(function(a){return a=a,d[31]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[31]).then(function(a){return a=a,d[32]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[32]).then(function(a){return a=a,d[33]=a[0],a})},function(a){return c.nativeOperation(b("LSGetBlobFromString.nop"),d[27]).then(function(a){return a=a,d[34]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("bWFpbGJveF9pZF9zY29wZQ=="),d[34]).then(function(a){return a=a,d[35]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[35]).then(function(a){return a=a,d[36]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[36]).then(function(a){return a=a,d[37]=a[0],a})},function(e){return d[38]=new c.Map(),d[38].set("attachment_index_key",d[33]==null?"":d[33]),d[38].set("delivery_object_id",a[0]),d[38].set("device_id",d[3]),d[38].set("mailbox_partial_id",d[37]==null?"":d[37]),d[38].set("media_type",a[2]),d[38].set("product_type",a[1]),d[38].set("trace_id",d[1]),d[39]=new c.Map(),d[39].set("otid",a[3]),d[39].set("server_thread_key",a[6]),d[39].set("timestamp",void 0),c.nativeOperation(b("LSGetBlobFromString.nop"),a[3]).then(function(a){return a=a,d[40]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("YXR0YWNobWVudF90b2tlbl9zYWx0X3Njb3Bl"),d[40]).then(function(a){return a=a,d[41]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[41]).then(function(a){return a=a,d[42]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[42]).then(function(a){return a=a,d[43]=a[0],a})},function(e){return d[38].set("salt_partial_id",d[43]==null?"":d[43]),c.nativeOperation(b("LSGetBlobFromString.nop"),a[4]).then(function(a){return a=a,d[44]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("dGhyZWFkX2lkX3Njb3Bl"),d[44]).then(function(a){return a=a,d[45]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[45]).then(function(a){return a=a,d[46]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[46]).then(function(a){return a=a,d[47]=a[0],a})},function(e){return d[38].set("thread_partial_id",d[47]==null?"":d[47]),c.nativeOperation(b("LSGetBlobFromString.nop"),a[3]).then(function(a){return a=a,d[48]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("bWVzc2FnZV9pZF9zY29wZQ=="),d[48]).then(function(a){return a=a,d[49]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[49]).then(function(a){return a=a,d[50]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[50]).then(function(a){return a=a,d[51]=a[0],a})},function(e){return d[38].set("message_partial_id",d[51]==null?"":d[51]),d[52]=c.createArray(),d[63]=(d[52].push(a[3]),d[52]),d[63]=(d[52].push(a[0]),d[52]),d[53]=c.toJSON(d[52]),d[38].set("raw_identifiers",d[39]),d[38].set("backup_id",d[27]),d[38].set("thread_id",a[4]),c.nativeOperation(b("LSGetBlobFromString.nop"),d[53]).then(function(a){return a=a,d[54]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("YXR0YWNobWVudF90b2tlbl9zYWx0X3Njb3Bl"),d[54]).then(function(a){return a=a,d[55]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[55]).then(function(a){return a=a,d[56]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[56]).then(function(a){return a=a,d[57]=a[0],a})},function(a){return d[38].set("salt_partial_access_token",d[57]==null?"":d[57]),c.nativeOperation(b("LSGetBlobFromString.nop"),d[29]).then(function(a){return a=a,d[58]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("YXR0YWNobWVudF9rZXlfc2FsdF9zY29wZQ=="),d[58]).then(function(a){return a=a,d[59]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[59]).then(function(a){return a=a,d[60]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[60]).then(function(a){return a=a,d[61]=a[0],a})},function(a){return d[38].set("salt_partial_attachment_index_key",d[61]==null?"":d[61]),d[62]=c.toJSON(d[38]),c.storedProcedure(b("LSIssueNewTask"),"encrypted_backups_attachment_upload",c.i64.cast([0,50012]),d[62],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}]):(d[29]="Missing backup_id for IssueAttachmentBackupTask",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure] ","",d[29]].join("")),d[28]=c.createArray(),void 0!==void 0?d[30]=(d[28].push(void 0),d[28]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",d[29],d[28],c.i64.cast([0,3])))):(d[28]="Missing device_id for IssueAttachmentBackupTask",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure] ","",d[28]].join("")),d[27]=c.createArray(),void 0!==void 0?d[29]=(d[27].push(void 0),d[27]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",d[28],d[27],c.i64.cast([0,3]))):(d[28]="Missing ocmf_client_state_blob for IssueAttachmentBackupTask",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure] ","",d[28]].join("")),d[27]=c.createArray(),void 0!==void 0?d[29]=(d[27].push(void 0),d[27]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",d[28],d[27],c.i64.cast([0,3])))},function(a){return d[21]=c.i64.of_float(Date.now()),d[22]=c.i64.random(),d[24]="Finishing execution. Execution time: ",d[25]=c.i64.to_string(c.i64.sub(d[21],d[0])),d[26]=" ms",d[23]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure] ",d[23],d[24],d[23],d[25],d[23],d[26]].join("")),c.i64.eq(c.i64.mod_(d[22],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[27]=",",d[28]=c.createArray(),void 0!==void 0?d[29]=(d[28].push(void 0),d[28]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",[d[24],d[27],d[25],d[27],d[26]].join(""),d[28],c.i64.cast([0,4]))):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure";a.__tables__=["secure_encrypted_backups_client_state"];e.exports=a}),null);
__d("LSIssueAttachmentBackupTaskStoredProcedure",["LSIssueAttachmentBackupTask","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSIssueAttachmentBackupTask"),e.deliveryObjectId,e.productType,e.mediaType,e.messageId,e.threadId,e.traceId,e.serverThreadKey);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSIssueThreadRemove",["LSArrayGetObjectAt","LSIsEncryptionVersionSecure","LSIssueNewTaskAndGetTaskID","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][issueThreadRemove] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[15]=new c.Map(),d[15].set("error_msg","Expected a nonempty query result"),d[15].set("code",c.i64.cast([0,3])),d[15].set("src_line","MEBClientStateUtils.php:247 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),d[16]=c.createArray(),d[17]=(d[16].push(d[15]),d[16]),e=[void 0,d[16]],d[2]=e[0],d[3]=e[1],e):(b=a.item,d[15]=new c.Map(),d[15].set("backup_id",b.backupId),d[15].set("device_public_key_blob",b.devicePublicKeyBlob),d[15].set("device_private_key_blob",b.devicePrivateKeyBlob),d[15].set("epoch_storage_public_key_blob",b.epochStoragePublicKeyBlob),d[15].set("epoch_storage_private_key_blob",b.epochStoragePrivateKeyBlob),d[15].set("epoch_auth_public_key_blob",b.epochAuthPublicKeyBlob),d[15].set("epoch_auth_private_key_blob",b.epochAuthPrivateKeyBlob),d[15].set("mailbox_root_key_blob",b.mailboxRootKeyBlob),d[15].set("ocmf_client_state_blob",b.ocmfClientStateBlob),d[15].set("orf_client_state_v2_blob",void 0),d[15].set("orf_v2_authority_level",void 0),d[15].set("oblivious_validation_token_blob",b.obliviousValidationTokenBlob),d[15].set("device_id",b.deviceId),d[15].set("backup_tenancy",b.backupTenancy),d[15].set("encryption_version",b.encryptionVersion),d[15].set("revision_version",b.revisionVersion),d[15].set("initialize_restore_result",void 0),d[15].set("device_creation_timestamp_sec",void 0),d[15].set("authority_level",b.authorityLevel),e=[d[15],void 0],d[2]=e[0],d[3]=e[1],e)})},function(e){return d[5]=new c.Map(),d[5].set("value",d[2]),d[5].set("errors",d[3]),d[6]=d[5].get("value"),d[6]!==void 0?c.sequence([function(e){return d[15]=d[6].get("backup_id"),d[16]=d[6].get("device_public_key_blob"),d[17]=d[6].get("device_private_key_blob"),d[18]=d[6].get("epoch_storage_public_key_blob"),d[19]=d[6].get("epoch_storage_private_key_blob"),d[20]=d[6].get("epoch_auth_public_key_blob"),d[21]=d[6].get("epoch_auth_private_key_blob"),d[22]=d[6].get("mailbox_root_key_blob"),d[23]=d[6].get("ocmf_client_state_blob"),d[24]=d[6].get("orf_client_state_v2_blob"),d[25]=d[6].get("orf_v2_authority_level"),d[26]=d[6].get("oblivious_validation_token_blob"),d[27]=d[6].get("device_id"),d[28]=d[6].get("backup_tenancy"),d[29]=d[6].get("encryption_version"),d[30]=d[6].get("revision_version"),d[31]=d[6].get("initialize_restore_result"),d[32]=d[6].get("device_creation_timestamp_sec"),d[33]=d[6].get("authority_level"),c.i64.neq(d[27],void 0)?c.sequence([function(a){return d[36]=void 0,c.i64.neq(d[36],void 0)?c.resolve(d[37]=d[36]):c.sequence([function(a){return d[43]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[44]=a[0],a})},function(a){return d[44]?d[53]=(d[43].push(c.i64.cast([0,0])),d[43]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[45]=a[0],a})},function(a){return d[45]?d[53]=(d[43].push(c.i64.cast([0,2])),d[43]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[46]=a[0],a})},function(a){return d[46]?d[53]=(d[43].push(c.i64.cast([0,3])),d[43]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[47]=a[0],a})},function(a){return d[47]?d[53]=(d[43].push(c.i64.cast([0,4])),d[43]):0,d[48]=c.createArray(),d[49]=c.i64.of_int32(d[43].length),c.i64.gt(d[49],c.i64.cast([0,0]))?c.loopAsync(d[49],function(a){return d[53]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[43],d[53]).then(function(a){return a=a,d[54]=a[0],d[55]=a[1],a})},function(a){return d[56]=(d[48].push(d[54]),d[48])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[53]=c.createArray(),d[54]=c.i64.of_int32(d[48].length),c.i64.gt(d[54],c.i64.cast([0,0]))?c.loopAsync(d[54],function(a){return d[56]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[48],d[56]).then(function(a){return a=a,d[57]=a[0],d[58]=a[1],a})},function(a){return d[59]=(d[53].push(c.i64.to_string(d[57])),d[53])}])}):c.resolve()},function(a){return d[55]=d[53].join(","),d[50]=d[55]}])},function(a){return d[48].some(function(a){return c.i64.eq(d[29],a)})?d[51]=d[29]:d[51]=void 0,c.i64.neq(d[51],void 0)?d[52]=d[51]:d[52]=void 0,d[37]=d[52]}])},function(e){return c.i64.neq(d[37],void 0)?d[38]=d[37]:d[38]=c.i64.cast([0,0]),c.i64.neq(d[28],void 0)?d[39]=d[28]:d[39]=c.i64.cast([0,1]),d[40]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),["eb_upload",":",a[0]].join(""),c.i64.cast([0,50026]),"",void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),c.i64.cast([0,93]),void 0,c.i64.le(c.i64.cast([0,0]),c.i64.cast([0,0]))?c.i64.cast([0,0]):c.i64.add(d[40],c.i64.sub(c.i64.cast([0,0]),c.i64.mod_(d[40],c.i64.cast([0,0])))),c.i64.cast([0,0])).then(function(a){return a=a,d[41]=a[0],a})},function(b){return c.db.table(177).add({pk:void 0,pendingBackupTaskId:d[41],actionType:c.i64.cast([0,2]),contentType:c.i64.cast([0,2]),backupStatus:c.i64.cast([0,1]),listKey:a[0],uniqueKey:a[0],sortKey:a[1],persistentId:"",isInstamadillo:!1,lsTraceId:a[3],error:a[4]})},function(b){return c.i64.eq(c.i64.cast([0,2]),c.i64.cast([0,1]))?c.i64.eq(c.i64.cast([0,2]),c.i64.cast([0,1]))?(d[43]=c.createArray(),d[45]=(d[43].push("Successfully issued message backup task. act thread id = "),d[43]),d[45]=(d[43].push(a[0]),d[43]),d[45]=(d[43].push(", otid = "),d[43]),d[45]=(d[43].push(a[0]),d[43]),d[44]=d[43].join(void 0||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueThreadRemove] ","",d[44]].join("")),c.resolve()):(d[43]=c.createArray(),d[45]=(d[43].push("Successfully issued message remove task. act thread id = "),d[43]),d[45]=(d[43].push(a[0]),d[43]),d[45]=(d[43].push(", otid = "),d[43]),d[45]=(d[43].push(a[0]),d[43]),d[44]=d[43].join(void 0||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueThreadRemove] ","",d[44]].join("")),c.resolve()):(d[43]=c.createArray(),d[45]=(d[43].push("Successfully issued thread remove task. act thread id = "),d[43]),d[45]=(d[43].push(a[0]),d[43]),d[44]=d[43].join(void 0||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueThreadRemove] ","",d[44]].join("")),c.resolve())},function(a){return d[42]=new c.Map(),d[42].set("task_id",d[41]),a=[d[42],void 0],d[34]=a[0],d[35]=a[1],a}]):c.sequence([function(b){return d[36]=c.createArray(),d[39]=(d[36].push("Skipping thread remove since EB is disabled. act thread id = "),d[36]),d[39]=(d[36].push(a[0]),d[36]),d[37]=d[36].join(void 0||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueThreadRemove] ","",d[37]].join("")),c.resolve()},function(a){return d[38]=new c.Map(),d[38].set("error_code",c.i64.cast([0,24])),d[38].set("stored_procedure","LSEncryptedBackupsIssueThreadRemoveStoredProcedure"),d[38].set("error_message",""),a=[void 0,d[38]],d[34]=a[0],d[35]=a[1],a}])},function(a){return a=[d[34],d[35]],d[7]=a[0],d[8]=a[1],a}]):c.sequence([function(b){return d[15]=d[5].get("errors"),d[16]=d[5].get("errors"),d[17]=c.createArray(),d[20]=(d[17].push("Skipping thread remove since EB is disabled. act thread id = "),d[17]),d[20]=(d[17].push(a[0]),d[17]),d[18]=d[17].join(void 0||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueThreadRemove] ","",d[18]].join("")),c.resolve()},function(a){return d[19]=new c.Map(),d[19].set("error_code",c.i64.cast([0,1])),d[19].set("stored_procedure","LSEncryptedBackupsIssueThreadRemoveStoredProcedure"),d[19].set("error_message",""),a=[void 0,d[19]],d[7]=a[0],d[8]=a[1],a}])},function(a){return d[9]=c.i64.of_float(Date.now()),d[10]=c.i64.random(),d[12]="Finishing execution. Execution time: ",d[13]=c.i64.to_string(c.i64.sub(d[9],d[0])),d[14]=" ms",d[11]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueThreadRemove] ",d[11],d[12],d[11],d[13],d[11],d[14]].join("")),c.i64.eq(c.i64.mod_(d[10],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[15]=",",d[16]=c.createArray(),void 0!==void 0?d[17]=(d[16].push(void 0),d[16]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"issueThreadRemove",[d[12],d[15],d[13],d[15],d[14]].join(""),d[16],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[7],d[8]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsIssueThreadRemoveStoredProcedure";a.__tables__=["secure_encrypted_backups_client_state","pending_backups_context_v2"];e.exports=a}),null);
__d("LSIssueThreadRemoveStoredProcedure",["LSIssueThreadRemove","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSIssueThreadRemove"),e.actThreadId,e.sortKey,e.source,e.traceId,e.error);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWAsyncEBMediaDownloadPromise",[],(function(a,b,c,d,e,f){"use strict";var g=new Map();function a(a){var b=a.messageId,c=a.objectId,d=a.plaintextHash;a=a.threadId;var e=g.get(c);g.set(c,e!=null?[].concat(e,[{messageId:b,plaintextHash:d,threadId:a}]):[{messageId:b,plaintextHash:d,threadId:a}])}function b(a){return(a=g.get(a))==null?void 0:a.pop()}f.setMediaDownloadPayload=a;f.retrieveMediaDownloadPayload=b}),66);
__d("MAWBridgeDeleteMessagesOfThreadHandler",["EBIsEbEnabled","LSFactory","LSIntEnum","LSIssueThreadRemoveStoredProcedure","LSMEBTaskCreationSource","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(b.actionType===2){if(!(yield d("EBIsEbEnabled").isEbEnabledLS(a)))return;yield c("LSIssueThreadRemoveStoredProcedure")(c("LSFactory")(a),{actThreadId:b.threadId,sortKey:b.ts.toString(),source:(h||(h=d("LSIntEnum"))).ofNumber(c("LSMEBTaskCreationSource").TAM_WEB)})}});return i.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeEphemeralSettingsUpdatedForUIHandler",["MAWChatJid","MAWEphemeralSettingsUpdate","Promise","asyncToGeneratorRuntime","cr:17100"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=(yield d("MAWChatJid").toThreadKeyMaybe(a,c.chatJid));return e!=null?d("MAWEphemeralSettingsUpdate").updateEphemeralSettingsWithTxn(a,c.ephemeralSettingArgs.ephemeralExpirationInSec,yield b("cr:17100").castUnixTimeToMillisTime(c.ephemeralSettingArgs.ephemeralLastUpdatedOrSetTimestamp),c.isEphemeralSettingReset,e,!1,c.author):(h||(h=b("Promise"))).resolve()});return i.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeResignAttachmentCDNUrlHandler",["I64","LSFactory","LSIssueAttachmentRestoreTaskStoredProcedure","MAWAsyncEBMediaDownloadPromise","MAWBridgeFireAndForget","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";var h,i="-8";function a(a,b){var e,f=b.traceId,g=(e=b.skipLegacyMediaDownloadFlow)!=null?e:!1;function j(a,b,c){!g&&f!=null&&d("MAWBridgeFireAndForget").fireAndForget("backend","addMediaDownloadQpl",{annotations:c!=null?c:void 0,pointName:b,qplInstanceKey:f,qplType:a})}j("point","resign_cdn_url_bridge_handler_start");return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.threadJid,"MAWBridgeResignAttachmentCDNUrlHandler",function(a,e){e={backupEntFbid:(h||(h=d("I64"))).of_string(i),deliveryObjectId:b.deliveryObjectId,mediaType:b.mediaType,messageId:b.messageId,productType:b.productType,serverThreadKey:h.to_string(e),sortOrder:h.of_float(b.sortOrder),threadId:b.threadId,traceId:f.toString()};b.skipLegacyMediaDownloadFlow!==!0&&d("MAWAsyncEBMediaDownloadPromise").setMediaDownloadPayload({messageId:b.msgId,objectId:b.deliveryObjectId,plaintextHash:b.plaintextHash,threadId:b.threadId});j("point","resign_cdn_url_issue_attachment_task",{string:{taskTraceId:e.traceId}});return c("LSIssueAttachmentRestoreTaskStoredProcedure")(c("LSFactory")(a),e).then(function(){j("point","resign_cdn_url_issue_attachment_task_end")})["catch"](function(a){j("fail","resign_cdn_url_issue_attachment_task_fail",{string:{error:a.toString()}})})})}g.call=a}),98);
__d("MAWBridgeTraceUtils",["I64","Promise","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,c,e){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.data_trace_meta).filter(function(a){var b=a.contextThree;if(b!=null&&c===b&&(i||(i=d("I64"))).equal(a.traceType,e))return a.shouldFlush===!1;else return!1})).then(function(a){if(a.length!==0)return(h||(h=b("Promise"))).resolve(a[0].traceId);else return(h||(h=b("Promise"))).resolve()})}g.getTraceId=a}),98);
__d("MAWBridgeStartTraceHandler",["ArmadilloDataTraceCheckPoint","ArmadilloDataTraceType","I64","LSAppendDataTraceAddonStoredProcedure","LSDataTraceTag","LSFactory","LSRequestId","MAWAckLevel","MAWBridgeTraceUtils","MAWMsg","MAWTimeUtils","Promise","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b,e){return a.data_trace_meta.add({contextOne:void 0,contextThree:b.externalId,contextTwo:void 0,foregroundTimestampMs:(i||(i=d("I64"))).zero,initTimestampMs:d("MAWTimeUtils").toTimestamp(b.ts),predefinedId:void 0,shouldFlush:!1,traceId:e,traceType:b.traceType}).then(function(){return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:d("ArmadilloDataTraceCheckPoint").traceCreated,dataTraceId:e,syncChannel:(i||(i=d("I64"))).neg_one})}).then(function(){var f;if(b.threadKey==null||!c("gkx")("23995"))return;return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:d("ArmadilloDataTraceCheckPoint").armadilloTlcControlOpenThread,dataTraceId:e,syncChannel:(i||(i=d("I64"))).neg_one,tags:(f=b.threadKey)!=null?f:void 0})})}function a(a,e){var f=e.ack,g=e.traceType;return f===d("MAWAckLevel").ACK.clock?d("MAWBridgeTraceUtils").getTraceId(a,e.externalId,e.traceType).then(function(f){if(f!=null)return;var k=c("LSRequestId").generate();if((i||(i=d("I64"))).equal(g,d("ArmadilloDataTraceType").armadilloMessageSend))return j(a,e,k).then(function(){var b=e.threadType;if(b==="User")return;return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:d("ArmadilloDataTraceCheckPoint").traceGroupMessage,dataTraceId:k,syncChannel:(i||(i=d("I64"))).neg_one})}).then(function(){if(e.isFirstMsg)return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:d("ArmadilloDataTraceCheckPoint").armadilloActMessageSend,dataTraceId:k,syncChannel:(i||(i=d("I64"))).neg_one,tags:"first_msg=1"})}).then(function(){var f=e.type_;f=f===d("MAWMsg").text?d("ArmadilloDataTraceCheckPoint").traceTextMessage:f===d("MAWMsg").ptt||f===d("MAWMsg").image||f===d("MAWMsg").video||f===d("MAWMsg").gif?d("ArmadilloDataTraceCheckPoint").traceMediaMessage:void 0;if(f==null)return(h||(h=b("Promise"))).resolve(f);c("promiseDone")(c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:f,dataTraceId:k,syncChannel:(i||(i=d("I64"))).neg_one}));return(h||(h=b("Promise"))).resolve(f)}).then(function(b){if(b==null)return;if(!(i||(i=d("I64"))).equal(b,d("ArmadilloDataTraceCheckPoint").traceMediaMessage))return;b=e.type_;b=b===d("MAWMsg").image?d("LSDataTraceTag").image:b===d("MAWMsg").ptt?d("LSDataTraceTag").audio:b===d("MAWMsg").video?d("LSDataTraceTag").video:b===d("MAWMsg").gif?d("LSDataTraceTag").animatedImage:d("LSDataTraceTag").none;return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:d("ArmadilloDataTraceCheckPoint").richMediaMediaSendAttachmentType,dataTraceId:k,syncChannel:(i||(i=d("I64"))).neg_one,tags:String(b)})});else return j(a,e,k)}):(h||(h=b("Promise"))).resolve()}g.call=a}),98);
__d("MAWBridgeStartTraceWithTraceIdHandler",["MAWMainTraceUtils","MAWTimeUtils","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("MAWMainTraceUtils").startTraceWithTxn(a,d("MAWTimeUtils").toTimestamp(d("WATimeUtils").unixTime()),b.traceId,b.traceType,void 0,void 0,b.traceContext)}g.call=a}),98);
__d("MAWBridgeUpdateTraceHandler",["ArmadilloDataTraceCheckPoint","I64","LSAppendDataTraceAddonStoredProcedure","LSDataTraceCheckPoint","LSFactory","LSIntEnum","MAWBridgeTraceEvent","Promise","ReQL","emptyFunction","updateAndFlushLSDataTrace"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,e,f){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.data_trace_meta).filter(function(a){var b=a.contextThree;if(b!=null&&e.externalIds.includes(b)&&(j||(j=d("I64"))).equal(a.traceType,e.traceType))return a.shouldFlush===!1;else return!1})).then(function(g){var i=[];return g.reduce(function(b,g){return b.then(function(){i.push(g.traceId);var b=e.errorMessage;if(b!=null)return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:f,dataTraceId:g.traceId,errorMessage:b,syncChannel:(j||(j=d("I64"))).neg_one});else return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:f,dataTraceId:g.traceId,syncChannel:(j||(j=d("I64"))).neg_one})})},(h||(h=b("Promise"))).resolve()).then(function(){return i})})}function l(a,d){return d.reduce(function(b,d){return b.then(function(){return c("updateAndFlushLSDataTrace")(a,d)})},(h||(h=b("Promise"))).resolve())}function a(a,e){var f=e.event;if(f===c("MAWBridgeTraceEvent").ReceivedReceipt)return k(a,e,d("ArmadilloDataTraceCheckPoint").deliveryReceiptReceived).then(function(b){return l(a,b)});else if(f===c("MAWBridgeTraceEvent").ReceivedSent)return k(a,e,d("ArmadilloDataTraceCheckPoint").advancedCryptoMEMSendTaskComplete).then(c("emptyFunction"));else if(f===c("MAWBridgeTraceEvent").FlowEndForFailure)return k(a,e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").FLOW_END_FOR_FAILURE)).then(function(b){return l(a,b)});else if(f===c("MAWBridgeTraceEvent").FlowEndForSuccess)return k(a,e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").FLOW_END_AND_FLUSH)).then(function(b){return l(a,b)});else return(h||(h=b("Promise"))).resolve()}g.call=a}),98);
__d("MAWBridgeUploadAttachmentHandler",["I64","LSDataTraceCheckPoint","LSFactory","LSIntEnum","LSIssueAttachmentBackupTaskStoredProcedure","LSRequestId","MAWEBFrontendQPLLogger","MAWEncryptedBackupUtils","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWTimeUtils","MAWTraceUtils","Promise","isInstamadilloEB"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,e){var f;if(c("isInstamadilloEB")())return(j||(j=b("Promise"))).resolve();var g=(f=e.traceId)!=null?f:c("LSRequestId").generate();f=e.mediaType;if(f==="document"){d("MAWTraceUtils").recordInvalidUploadRequestAndFlushTrace(g,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_WEB_ECHO_MESSAGE_UPLOAD_INVALID_REQUEST),[]);return(j||(j=b("Promise"))).resolve()}return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,e.threadJid,"MAWBridgeUploadAttachmentHandler",function(a,f){var k=(i||(i=d("I64"))).to_string(f),l=d("MAWTimeUtils").isTimestampNewerThanXDays(e.ts,30);return d("MAWEncryptedBackupUtils").getBackupTenancy(a,g).then(function(f){var i=e.productType;if(f!=null&&l)if(g!=null){d("MAWEBFrontendQPLLogger").startFlowUploadAttachmentBackup({deliveryObjectId:e.deliveryObjectId,flow:"old",mediaType:e.mediaType,messageId:e.messageId,threadId:e.threadId,traceId:g});return c("LSIssueAttachmentBackupTaskStoredProcedure")(c("LSFactory")(a),{deliveryObjectId:e.deliveryObjectId,mediaType:e.mediaType,messageId:e.messageId,productType:i,serverThreadKey:k,threadId:e.threadId,traceId:g})}else return c("LSIssueAttachmentBackupTaskStoredProcedure")(c("LSFactory")(a),{deliveryObjectId:e.deliveryObjectId,mediaType:e.mediaType,messageId:e.messageId,productType:i,serverThreadKey:k,threadId:e.threadId});else{d("MAWTraceUtils").recordInvalidUploadRequestAndFlushTrace(g,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_WEB_ECHO_MESSAGE_UPLOAD_INVALID_REQUEST),[]);d("MAWEBFrontendQPLLogger").endFlowUploadAttachmentBackup(g,!1,"old");return(j||(j=b("Promise"))).resolve()}})})}g.call=a}),98);
__d("MAWBridgeUploadMessageByBatchHandler",["MAWBridgeTraceRecordCheckpointHandler","MAWBridgeUploadMessageHandler","MAWEBFrontendQPLLogger","Promise","QPLUserFlow","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,b){a.forEach(function(a){a.uploadTrackingInstanceKey!=null&&d("MAWEBFrontendQPLLogger").addPointEBUploadTracking(a.uploadTrackingInstanceKey,b)})}function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){i(e.messages,"upload_tracking_bridge_batch_handler");e.qpl.forEach(function(a){return c("QPLUserFlow").addPoint(a.event,a.action.name,{instanceKey:a.instanceKey,timestamp:a.timestamp})});e.checkPoint.forEach(function(b){return c("promiseDone")(d("MAWBridgeTraceRecordCheckpointHandler").call(a,b))});for(e of e.messages)yield d("MAWBridgeUploadMessageHandler").call(a,e);return(h||(h=b("Promise"))).resolve()});return j.apply(this,arguments)}g.call=a}),98);
__d("MAWFTSMergeCutoverSearchResults",["fbt","I64"],(function(a,b,c,d,e,f,g,h){"use strict";var i;function a(a,b){var c,e;c=(i||(i=d("I64"))).add((c=a.matchCount)!=null?c:(i||(i=d("I64"))).of_string("1"),(c=b.matchCount)!=null?c:(i||(i=d("I64"))).of_string("1"));b=i.max((e=a.messageTimestampMs)!=null?e:(i||(i=d("I64"))).minus_one,(e=b.messageTimestampMs)!=null?e:(i||(i=d("I64"))).minus_one);return babelHelpers["extends"]({},a,{contextLine:h._(/*BTDS*/"_j{\"*\":\"{number} mensajes coincidentes\",\"_1\":\"1 mensaje coincidente\"}",[h._plural(i.to_int32(c),"number")]).toString(),matchCount:c,matchLengths:void 0,matchOffsets:void 0,messageId:void 0,messageTimestampMs:(i||(i=d("I64"))).equal(b,(i||(i=d("I64"))).minus_one)?void 0:b})}g.mergeCutoverSearchResults=a}),226);
__d("MAWFTSUniversalSearchQPLLogger",["QPLUserFlow","emptyFunction","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h={hasStarted:!1,instanceKey:5e3},i=c("qpl")._(25301522,"2409");function a(){h.hasStarted&&j();h.instanceKey++;h.hasStarted=!0;c("QPLUserFlow").start(i,{annotations:{bool:{isInThread:!1}},instanceKey:h.instanceKey});return h.instanceKey}function j(a){if(!h.hasStarted||a!=null&&h.instanceKey!==a)return;h.hasStarted=!1;c("QPLUserFlow").endCancel(i,{instanceKey:h.instanceKey})}function b(a){var b=a.annotations,d=a.instanceKey;a=a.point;if(!h.hasStarted||d!=null&&h.instanceKey!==d)return;c("QPLUserFlow").addPoint(i,a,{instanceKey:h.instanceKey});b!=null&&k({annotations:b,instanceKey:h.instanceKey})}function k(a){var b=a.annotations;a=a.instanceKey;if(!h.hasStarted||a!=null&&h.instanceKey!==a)return;c("QPLUserFlow").addAnnotations(i,b,{instanceKey:h.instanceKey})}function d(a){if(!h.hasStarted||a!=null&&h.instanceKey!==a)return;h.hasStarted=!1;c("QPLUserFlow").endSuccess(i,{annotations:{"int":{result_count:h.currentResultCount}},instanceKey:h.instanceKey})}e={getCurrentInstanceKey:function(){return h.instanceKey},qplAddAnnotations:k,qplAddPoint:b,qplCancel:j,qplMarkFirstResultShowUp:c("emptyFunction"),qplStart:a,qplSuccess:d,updateCurrentResultCount:c("emptyFunction")};f=e;g["default"]=f}),98);
__d("MAWMiActOnActThreadReadyDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("MAWMiActOnActThreadReady").__setRef("MAWMiActOnActThreadReadyDeferred");function a(a,b,c,d){return h.load().then(function(e){e=e.onActThreadReady;return e(a.tables,b,c,d)})}g["default"]=a}),98);
__d("MAWOfflineQueueState",["MAWOfflineQueueThreadStatus","MAWSharedProtocolQueueConst"],(function(a,b,c,d,e,f,g){"use strict";var h=[];f={offlineQueueCount:0,offlineQueueProgressDownloaded:0,offlineQueueProgressProcessed:0,offlineQueueSyncState:d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Initializing,offlineQueueThreadStatus:{}};var i=babelHelpers["extends"]({},f),j={getSnapshot:function(){return i},subscribe:function(a){h.push(a);return function(){h=h.filter(function(b){return b!==a})}}};function a(a){i.offlineQueueCount!==a&&(i=babelHelpers["extends"]({},i,{offlineQueueCount:a}),h.forEach(function(a){return a()}))}function b(a){i.offlineQueueProgressDownloaded!==a&&(i=babelHelpers["extends"]({},i,{offlineQueueProgressDownloaded:a}),h.forEach(function(a){return a()}))}function c(a,b){b=d("MAWOfflineQueueThreadStatus").calculateOfflineQueueThreadStatus(b,i.offlineQueueThreadStatus);if(i.offlineQueueThreadStatus===b&&i.offlineQueueProgressProcessed===a)return;i=babelHelpers["extends"]({},i,{offlineQueueProgressProcessed:a,offlineQueueThreadStatus:b});h.forEach(function(a){return a()})}function e(a){a=d("MAWOfflineQueueThreadStatus").calculateOfflineQueueThreadStatus(a,i.offlineQueueThreadStatus);if(i.offlineQueueThreadStatus==a&&i.offlineQueueSyncState===d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete)return;i=babelHelpers["extends"]({},i,{offlineQueueSyncState:d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete,offlineQueueThreadStatus:a});h.forEach(function(a){return a()})}g.EMPTY_STATE=f;g.offlineQueueState=j;g.initOfflineQueueSyncStart=a;g.initOfflineQueueSyncProgress=b;g.initOfflineQueueConsumerSyncProgress=c;g.initOfflineQueueSyncComplete=e}),98);
__d("escapeRegExp",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}f["default"]=a}),66);
__d("MWContentSearchUtils",["fbt","I64","LSIntEnum","LSMessageSearchType","MAWVault","escapeRegExp","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=c("gkx")("1798");function l(a){return a.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function m(a,b){a=l(a).split(" ");var d=l(b),e=[],f=[];a.forEach(function(a){var b=new RegExp(c("escapeRegExp")(a),"gi");b=d.matchAll(b);b=Array.from(b);b=b.map(function(a){return a.index});var g=b.map(function(b){return a.length});f.push.apply(f,b);e.push.apply(e,g)});return{matchLengths:e.join(","),matchOffsets:f.join(",")}}function a(a,b,e,f){if(e!=null&&(b===1||(i||(i=d("I64"))).equal(f,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE)))){f=d("MAWVault").isVaulted(e)?d("MAWVault").unvault(e):e;e=m(a,f);return babelHelpers["extends"]({contextLine:f},e)}else return{contextLine:h._(/*BTDS*/"_j{\"*\":\"{number} mensajes coincidentes\",\"_1\":\"1 mensaje coincidente\"}",[h._plural(b,"number")]).toString(),matchLengths:void 0,matchOffsets:void 0}}function b(a,b){return a===1&&b!=null?b:void 0}function e(a,b){return a===1&&b!=null?b:void 0}function f(a){return a!=null?(i||(i=d("I64"))).of_float(a):void 0}function n(a,b){a=(i||(i=d("I64"))).of_float(-a);return b==null?a:i.min(a,b)}function o(a,b){if(!k||a.messageTimestampMs==null||b.messageTimestampMs==null)if((i||(i=d("I64"))).gt(a.globalIndex,b.globalIndex))return 1;else if((i||(i=d("I64"))).lt(a.globalIndex,b.globalIndex))return-1;else return 0;else if((i||(i=d("I64"))).lt(a.messageTimestampMs,b.messageTimestampMs))return 1;else if((i||(i=d("I64"))).gt(a.messageTimestampMs,b.messageTimestampMs))return-1;else return 0}g.getContextLineAndMatches=a;g.getMessageOtid=b;g.getMessageId=e;g.getMessageTimestamp=f;g.getGlobalIndex=n;g.searchResultsCompareFn=o}),226);
__d("MAWUniversalMessageSearch",["FBLogger","I64","JSResourceForInteraction","LSIntEnum","LSMessageSearchType","LSMessagingThreadTypeUtil","LSSearchRequestStatusType","MAWBridgeSearchMsg","MAWBridgeSendAndReceive","MAWFTSMergeCutoverSearchResults","MAWFTSUniversalSearchQPLLogger","MWContentSearchUtils","MWSearchThreadUtils","Promise","ReQL","asyncToGeneratorRuntime","groupBy","promiseDone","waitForMiActMappingForUniversalSearch"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD),l=new Map(),m=c("JSResourceForInteraction")("MAWAsyncEBIssueBulkMessagesPointQuery").__setRef("MAWUniversalMessageSearch");function n(a,b,c){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){yield a.message_search_queries.put(babelHelpers["extends"]({hasNextPage:!1,query:b,threadKeyV2:(j||(j=d("I64"))).one,type_:k},c))});return o.apply(this,arguments)}function p(a,b){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(j||(j=d("I64"))).to_string(b.threadKey);b.matchCount!=null&&l.set(c,(j||(j=d("I64"))).to_float(b.matchCount));c=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.message_search_results).getKeyRange(k,b.query,b.threadKey)));if(c==null)yield a.message_search_results.put(babelHelpers["extends"]({},b));else{var e=d("MAWFTSMergeCutoverSearchResults").mergeCutoverSearchResults(c,b);yield a.message_search_results.upsert([k,c.query,c.threadKey,c.globalIndex],babelHelpers["extends"]({},e,{globalIndex:b.globalIndex}))}});return q.apply(this,arguments)}function a(a,b){var c;c=(c=l.get((j||(j=d("I64"))).to_string(a)))!=null?c:0;c+=b;l.set((j||(j=d("I64"))).to_string(a),c)}function e(){l.clear()}function r(a,b){return!d("LSMessagingThreadTypeUtil").isArmadilloSecure(b)?null:(b=l.get((j||(j=d("I64"))).to_string(a)))!=null?b:null}function s(a,b,c){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,g){l.clear();yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield n(a,g,{resultCount:(j||(j=d("I64"))).zero,status:(i||(i=d("LSIntEnum"))).ofNumber(c("LSSearchRequestStatusType").PENDING)})});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":142");c("MAWFTSUniversalSearchQPLLogger").qplAddPoint({point:"search_local_result_start"});var o=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","search",{query:g,searchMode:d("MAWBridgeSearchMsg").MESSAGE_CONTENT_SEARCH}));o=o.map(function(a){if(a.recordType==="msg"){a.matchedTerms;a.recordType;a=babelHelpers.objectWithoutPropertiesLoose(a,["matchedTerms","recordType"]);return babelHelpers["extends"]({},a)}}).filter(Boolean);o=c("groupBy")(o,function(a){return a.chatJid});var q=Object.values(o);c("MAWFTSUniversalSearchQPLLogger").qplAddPoint({annotations:{"int":{numResult:q.length}},point:"search_local_result_end"});c("promiseDone")((h||(h=b("Promise"))).all(q.map(function(){var h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(h,i){var l=h[0].chatJid;yield c("waitForMiActMappingForUniversalSearch")(a,l);var n=(yield d("MWSearchThreadUtils").getThreadDataForSearchResult(a,l,e,k));if(n==null)return;var o=n.profilePicUrl,q=n.secondaryProfilePicUrl,r=n.threadDisplayName,s=n.threadKey;n=n.threadType;var t=h.sort(function(a,b){return b.sortOrderMs-a.sortOrderMs})[0],u=h.length===1&&t.msg==null?{id:t.externalId,sortOrderMs:t.sortOrderMs}:null,v={displayName:r,globalIndex:d("MWContentSearchUtils").getGlobalIndex(t.sortOrderMs),matchCount:(j||(j=d("I64"))).of_int32(h.length),profilePicUrl:o,query:g,secondaryProfilePicUrl:q,threadKey:s,threadType:n,type_:k};if(u==null)yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield p(a,babelHelpers["extends"]({},v,{},d("MWContentSearchUtils").getContextLineAndMatches(g,h.length,t==null?void 0:(a=t.msg)==null?void 0:a.content,k),{messageId:d("MWContentSearchUtils").getMessageId(h.length,t==null?void 0:(a=t.msg)==null?void 0:a.msgId),messageOtid:d("MWContentSearchUtils").getMessageOtid(h.length,t==null?void 0:t.externalId),messageTimestampMs:d("MWContentSearchUtils").getMessageTimestamp(t==null?void 0:t.sortOrderMs)}))});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":243");else{c("MAWFTSUniversalSearchQPLLogger").qplAddPoint({point:"fetch_missing_message_"+i+"_start"});r=(yield m.load().then(function(b){b=b.issueQueryAsPromiseForSearchResult;return b(a,l,[u],"viewerId")}));if(r!=null&&r.length!==0){var w=r[0];c("MAWFTSUniversalSearchQPLLogger").qplAddPoint({point:"fetch_missing_message_"+i+"_end"});yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield p(a,babelHelpers["extends"]({},v,{},d("MWContentSearchUtils").getContextLineAndMatches(g,h.length,t==null?void 0:(a=t.msg)==null?void 0:a.content,k),{messageOtid:w.externalId,messageTimestampMs:w.sortOrderMs!=null?(j||(j=d("I64"))).of_float(w.sortOrderMs):void 0}))});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":285")}else c("MAWFTSUniversalSearchQPLLogger").qplAddPoint({annotations:{bool:{failedFetchingMissingMessage:!0}},point:"fetch_missing_message_"+i+"_end"})}});return function(a,b){return h.apply(this,arguments)}}())),function(){c("MAWFTSUniversalSearchQPLLogger").qplAddPoint({annotations:{"int":{numResult:q.length}},point:"issue_secure_search_query_end"}),c("promiseDone")(a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield n(a,g,{hasNextPage:!1,resultCount:(j||(j=d("I64"))).of_int32(q.length),status:(i||(i=d("LSIntEnum"))).ofNumber(c("LSSearchRequestStatusType").COMPLETE)})});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":325"))},function(a){c("FBLogger")("maw_fts_search").mustfix("Error while searching in secure threads. Err: %s",a==null?void 0:a.message)})});return t.apply(this,arguments)}g.updateSecureMsgMatchCountForThread=a;g.clearSecureMsgMatchCountForThread=e;g.getSecureMsgsMatchCountForThread=r;g.search=s}),98);
__d("isEBSearchEnabled",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("4741")}g["default"]=a}),98);
__d("MWInboxSecureContentSearch",["I64","JSResourceForInteraction","LSIntEnum","LSMessageSearchType","LSSearchRequestStatusType","MAWBridgeSearchMsg","MAWBridgeSendAndReceive","MAWChatJid","MAWFTSMergeCutoverSearchResults","MAWMiActOnActThreadReadyDeferred","MAWUniversalMessageSearch","MWContentSearchUtils","MWSearchThreadUtils","Promise","ReQL","asyncToGeneratorRuntime","emptyFunction","groupBy","isEBSearchEnabled","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=c("JSResourceForInteraction")("MAWAsyncEBIssueBulkMessagesPointQuery").__setRef("MWInboxSecureContentSearch"),l=c("justknobx")._("2605");function a(a,c,e){return(j||(j=b("Promise"))).all([d("ReQL").mergeJoin(d("ReQL").fromTableAscending(e.tables.participants,[]).getKeyRange(a),d("ReQL").fromTableAscending(e.tables.contacts)),d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.tables.threads).getKeyRange(a))]).then(function(a){var b=a[0];a[1];a=b.filter(function(a){a[0];a=a[1];a=(h||(h=d("I64"))).equal(a.id,c);return!a}).map(function(a){a[0];a=a[1];return a});return d("ReQL").firstAsync(a)})}function m(a,c){return d("MAWChatJid").toThreadKeyMaybe(c,a.chatJid).then(function(e){return e==null?(j||(j=b("Promise"))).resolve([null,a]):(j||(j=b("Promise"))).all([d("ReQL").firstAsync(d("ReQL").fromTableAscending(c.threads).getKeyRange(e)),j.resolve(a)])})}function n(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.contacts).getKeyRange((h||(h=d("I64"))).of_string(b))));return a});return o.apply(this,arguments)}function p(a,b){var e=b.query;b=b.threadKey;return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.message_search_results).getKeyRange((i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD),e,b))}function q(a,e,g,k,l,o,q,r){r===void 0&&(r=c("LSSearchRequestStatusType").COMPLETE);var s=function(f){return m(a,f).then(function(a){var m=a[0];if(m==null)return;var q=a[1],s=q.msg;if(s==null)return;if(q!=null)return(j||(j=b("Promise"))).all([d("MWSearchThreadUtils").getThreadPics(m,l,o),d("MWSearchThreadUtils").getThreadParticipants(m,o),(h||(h=d("I64"))).equal(k,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE))?n(o,s.sender):(j||(j=b("Promise"))).resolve(null),(h||(h=d("I64"))).equal(k,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD))?p(f,{query:g,threadKey:m.threadKey}):(j||(j=b("Promise"))).resolve(null)]).then(function(a){var n=a[0],o=n[0];n=n[1];var p=a[1],t=a[2];a=a[3];(h||(h=d("I64"))).equal(k,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD))&&d("MAWUniversalMessageSearch").updateSecureMsgMatchCountForThread(m.threadKey,e);p=babelHelpers["extends"]({},d("MWContentSearchUtils").getContextLineAndMatches(g,e,s.content,k),{displayName:d("MWSearchThreadUtils").getThreadDisplayName(l,m,p,t,k),globalIndex:(h||(h=d("I64"))).of_float(-q.sortOrderMs),matchCount:h.of_int32(e),messageId:s.msgId,messageOtid:q.externalId,messageTimestampMs:(h||(h=d("I64"))).equal(k,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD))&&e>1?void 0:(h||(h=d("I64"))).of_string(""+q.sortOrderMs),profilePicUrl:(h||(h=d("I64"))).equal(k,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE))&&t!=null?t.profilePictureUrl:o,query:g,secondaryProfilePicUrl:(h||(h=d("I64"))).equal(k,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE))&&t!=null?t.profilePictureFallbackUrl:n,threadKey:m.threadKey,threadType:m.threadType,type_:k});if((h||(h=d("I64"))).equal(k,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD))||a==null)o=f.message_search_results.put(p);else{t=d("MAWFTSMergeCutoverSearchResults").mergeCutoverSearchResults(a,p);o=f.message_search_results.upsert([k,a.query,a.threadKey,a.globalIndex],babelHelpers["extends"]({},t,{globalIndex:p.globalIndex}))}return(j||(j=b("Promise"))).all([f.message_search_queries.put({hasNextPage:void 0,nextPageCursor:void 0,query:g,resultCount:h.of_int32(e),status:(i||(i=d("LSIntEnum"))).ofNumber(r),threadKeyV2:m.threadKey,type_:k}),o]).then(c("emptyFunction"))})})};return q!=null?s(q):o.runInTransaction(function(a){return s(a)},"readwrite",void 0,void 0,f.id+":284")}function r(a,b,c,d){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f){f!=null&&f.flow.qplAddPoint({instanceKey:f.instanceKey,point:"search_local_result_start"});c=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","search",{query:c,searchMode:d("MAWBridgeSearchMsg").MESSAGE_CONTENT_SEARCH}));return(j||(j=b("Promise"))).all(c.map(function(b){if(b.recordType==="msg"){b.matchedTerms;b.recordType;var c=babelHelpers.objectWithoutPropertiesLoose(b,["matchedTerms","recordType"]);return d("MAWChatJid").toThreadKeyMaybe(a.tables,c.chatJid).then(function(a){return[c,a]})}}).filter(Boolean)).then(function(a){a=e!=null?a.filter(function(a){a[0];a=a[1];return a!=null&&(h||(h=d("I64"))).equal(a,e)}):a.filter(function(a){a[0];a=a[1];return a!=null});var b=null;e!=null&&(b={"int":{numResult:a.length}});f!=null&&f.flow.qplAddPoint({annotations:babelHelpers["extends"]({},b),instanceKey:f.instanceKey,point:"search_local_result_end"});return a})});return s.apply(this,arguments)}function e(a,e,f,g){d("MAWUniversalMessageSearch").clearSecureMsgMatchCountForThread();return r(f,a,void 0,g).then(function(k){k=Object.values(c("groupBy")(k,function(a){a[0];a=a[1];return a==null?"":(h||(h=d("I64"))).to_string(a)}));g!=null&&g.flow.qplAddAnnotations({annotations:{"int":{numResult:k.length}}});return k.map(function(b){var g=b[0];if(g!==null){g=g[0];return q(g,b.length,a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD),e,f)}}).reduce(function(a,d){return(j||(j=b("Promise"))).all([a,d]).then(c("emptyFunction"))},(j||(j=b("Promise"))).resolve())})}function t(a,e,f,g,h,k){return(j||(j=b("Promise"))).all(g.map(function(b){return q(b,h,f,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE),k,a,e)})).then(c("emptyFunction"))}function u(a,e,f,g,h){return(j||(j=b("Promise"))).all(f.map(function(b){return q(b,g,e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE),h,a)})).then(c("emptyFunction"))}function v(a,e,g,m,n){return m.runInTransaction(function(b){return b.message_search_queries.put({hasNextPage:void 0,nextPageCursor:void 0,query:a,resultCount:(h||(h=d("I64"))).of_int32(0),status:(i||(i=d("LSIntEnum"))).ofNumber(c("LSSearchRequestStatusType").PENDING),threadKeyV2:e,type_:i.ofNumber(c("LSMessageSearchType").MESSAGE)})},"readwrite",void 0,void 0,f.id+":463").then(function(b){return r(m,a,e,n)}).then(function(o){var p=o.length,r=o.filter(function(a){var b=a[0];a[1];return b.msg!=null}).length,s=r,t=function(){var f=o.map(function(a){a=a[0];return a}).filter(function(a){return a.msg==null});if(f.length===0)return(j||(j=b("Promise"))).resolve();f=f.slice(0,l);n.flow.qplAddPoint({annotations:{"int":{numRequestedMessages:f.length}},instanceKey:n.instanceKey,point:"fetch_missing_messages_start"});return c("MAWMiActOnActThreadReadyDeferred")(m,e,"MWMessageSearchInput.react",function(c,e){var i=f.map(function(a){return{id:a.externalId,sortOrderMs:a.sortOrderMs}});return k.load().then(function(c){var f=c.issueQueryAsPromiseForSearchResult,k=(h||(h=d("I64"))).to_string(g);c=f(m,e,i,k);return c==null?(j||(j=b("Promise"))).resolve():c.then(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=b;if(b.length!==i.length){n.flow.qplAddPoint({annotations:{"int":{numRemainingMessages:i.length-b.length}},instanceKey:n.instanceKey,point:"fetch_missing_messages_partial"});var d=i.filter(function(a){return!c.some(function(b){return b.externalId===a.id})});if(d.length>0){d=(yield f(m,e,d,k));d!=null&&(c=[].concat(b,d))}}s=r+c.length;n.flow.qplAddPoint({annotations:{"int":{numRespondedMessages:c.length}},instanceKey:n.instanceKey,point:"fetch_missing_messages_end"});return u(m,a,c,s,g)});return function(a){return c.apply(this,arguments)}}())})})};return(j||(j=b("Promise"))).all([o.map(function(b){b=b[0];return q(b,p,a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE),g,m,void 0,c("LSSearchRequestStatusType").PENDING)}).reduce(function(a,d){return(j||(j=b("Promise"))).all([a,d]).then(c("emptyFunction"))},j.resolve()),c("isEBSearchEnabled")()?t():(j||(j=b("Promise"))).resolve()]).then(function(b){return m.runInTransaction(function(b){return b.message_search_queries.put({hasNextPage:void 0,nextPageCursor:void 0,query:a,resultCount:(h||(h=d("I64"))).of_int32(s),status:(i||(i=d("LSIntEnum"))).ofNumber(c("LSSearchRequestStatusType").COMPLETE),threadKeyV2:e,type_:i.ofNumber(c("LSMessageSearchType").MESSAGE)})},"readwrite",void 0,void 0,f.id+":618")}).then(function(a){return(j||(j=b("Promise"))).resolve()})})}g.getThreadOtherParticipantContact=a;g.searchSecureDatabaseThreads=e;g.addBridgeSearchMsgsToSearchResult=t;g.addMessagesToSearchResult=u;g.searchSecureDatabaseMessages=v}),98);
__d("addMAWBridgeSearchMessagesToUniversalSearch",["I64","LSIntEnum","LSMessageSearchType","MAWCurrentUser","MAWUniversalMessageSearch","MWContentSearchUtils","MWSearchThreadUtils","ReQL","asyncToGeneratorRuntime","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("LSIntEnum")).ofNumber(c("LSMessageSearchType").THREAD);function a(a,b,c,d,e,f){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,g,h,k,l){var m;d("MAWUniversalMessageSearch").updateSecureMsgMatchCountForThread(g,k.length);var n=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.message_search_results).getKeyRange(j,h,g))),o=n==null;m=(i||(i=d("I64"))).to_int32((m=n==null?void 0:n.matchCount)!=null?m:(i||(i=d("I64"))).zero);var p=m+k.length;m=(yield d("MWSearchThreadUtils").getThreadDataByThreadKey(a,g,i.of_string(d("MAWCurrentUser").getID()),j));if(m==null)return;var q=m.profilePicUrl,r=m.secondaryProfilePicUrl,s=m.threadDisplayName,t=m.threadType,u=n==null?void 0:n.globalIndex,v=d("MWContentSearchUtils").getGlobalIndex(k[0].sortOrderMs,n==null?void 0:n.globalIndex),w=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;yield a.message_search_results.upsert([j,h,g,u!=null?u:v],babelHelpers["extends"]({},d("MWContentSearchUtils").getContextLineAndMatches(h,p,(b=k[0].msg)==null?void 0:b.content,j),{displayName:s,globalIndex:v,matchCount:(i||(i=d("I64"))).of_int32(p),messageTimestampMs:d("MWContentSearchUtils").getMessageTimestamp(k[0].sortOrderMs),profilePicUrl:q,query:h,secondaryProfilePicUrl:r,threadKey:g,threadType:t,type_:j}));o&&(yield a.message_search_queries.put(babelHelpers["extends"]({},l,{resultCount:(i||(i=d("I64"))).add(l.resultCount,i.one)})))});return function(b){return a.apply(this,arguments)}}();c("gkx")("11537")?c("promiseDone")(a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield w(a)});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":116")):e!=null&&(yield w(e))});return k.apply(this,arguments)}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("BladeRunnerConfig",["RTISubscriptionManagerConfig","WebDriverConfig","cr:3024","gkx","isEmpty"],(function(a,b,c,d,e,f,g){var h,i="javascript-sandbox",j="OverrideServer",k="www_sandbox",l="www_tier";a=function(){function a(){}var d=a.prototype;d.patchRequestHeaders=function(a){var d={},e=c("RTISubscriptionManagerConfig").bladerunner_www_sandbox,f=c("RTISubscriptionManagerConfig").is_intern;if(!(h||(h=c("isEmpty")))(c("WebDriverConfig").auxiliaryServiceInfo)){var g;g=(g=c("WebDriverConfig").auxiliaryServiceInfo.BladeRunner)!=null?g:c("WebDriverConfig").auxiliaryServiceInfo["BladeRunner-sandcastle"];g!=null?(typeof g.ip_address==="string"?d[j]=g.ip_address+":18295":typeof g.hostname==="string"&&(d[j]=g.hostname+":18295"),typeof c("WebDriverConfig").originHost==="string"&&(d[k]="www."+c("WebDriverConfig").originHost)):e!=null&&(d[i]=e)}else e!=null&&(d[i]=e);f===!0&&(d[l]="intern");if(c("WebDriverConfig").isTestRunning&&c("gkx")("20919")){g=b("cr:3024")==null?void 0:b("cr:3024").get();g!=null&&(d.is_test="true",d.original_request_id=g)}c("gkx")("20929")&&(d["Accept-Ack"]="RSAck");for(e in a)d[e]=a[e];d.http_referer=window.location.href;return d};return a}();d=new a();e=d;g["default"]=e}),98);
__d("BladeRunnerLogger",["FBLogger","ODS"],(function(a,b,c,d,e,f,g){var h,i="bladerunner_js_client",j={info:"info",warning:"warning",exception:"exception"};a=function(){function a(){this.setFBLoggerLevel(1)}var b=a.prototype;b.info=function(a){this.$2>=2&&c("FBLogger")(i).info("BladeRunner info: %s",a),this.$3(j.info,a)};b.warn=function(a){this.$2>=1&&c("FBLogger")(i).warn("BladeRunner warn: %s",a),this.$3(j.warning,a)};b.exception=function(a,b){b===void 0&&(b="");var d=b+" "+a.toString();this.$2>=0&&c("FBLogger")(i).warn("BladeRunner exception: %s, %s",b,a.toString());this.$3(j.exception,d)};b.trimForLogging=function(a){var b=1024;return typeof a==="string"&&a.length>b?"[trimmed]:"+a.substring(0,b)+"...":a};b.bumpCounter=function(a,b){b===void 0&&(b=1),(h||(h=d("ODS"))).bumpEntityKey(2966,"BladeRunnerClient",a,b)};b.setClientSessionId=function(a){this.$1=a};b.setFBLoggerLevel=function(a){this.$2=a};b.$3=function(a,b){};return a}();b=new a();e=b;g["default"]=e}),98);
__d("BladeRunnerTypes",[],(function(a,b,c,d,e,f,g){a={REQUEST:1,DATA:2,DATA_ACK:3,STATUS_UPDATE:4,REWRITE_REQUEST:5,LOG:6};b={BLADE_RUNNER:1,GATEWAY:2};g.StreamFrameType=a;g.StreamRequestType=b}),98);
__d("BladeRunnerTypesInternal",["Base64","BladeRunnerLogger","BladeRunnerTypes"],(function(a,b,c,d,e,f,g){var h=function(){function a(){}var b=a.prototype;b.getHeaders=function(){if(this.headers!=null)return this.headers;throw new Error("Expected headers")};b.getInstrumentationData=function(){if(this.instrumentationData!=null&&this.instrumentationData.length>0)try{return JSON.parse(this.instrumentationData)}catch(a){return null}else return null};b.updateRetryRequestPayload=function(a){a!=null?this.payload=c("Base64").encode(a):this.payload=null};a.readObject=function(b){var c=new a();c.streamId=o(b.streamId);c.requestType=o(b.requestType);c.payload=r(b.payload);c.headers=u(b.headers);c.extraHeader=r(b.extraHeader);c.requestTarget=r(b.requestTarget);c.instrumentationData=r(b.instrumentationData);return c};return a}(),i=function(){function a(){}a.readObject=function(b){var c=new a();c.streamId=o(b.streamId);c.dataId=p(b.dataId);c.data=r(b.data);c.shouldAck=w(b.shouldAck);return c};var b=a.prototype;b.rawData=function(){if(this.data==null)throw new Error("Expected data");return this.data};b.rawDataSize=function(){return this.data==null?0:this.data.length};b.decodeData=function(){if(this.data==null)throw new Error("Expected data");return c("Base64").decode(this.data)};b.setData=function(a){this.data=c("Base64").encode(a)};b.getInstrumentationData=function(){if(this.instrumentationData!=null)return JSON.parse(this.instrumentationData);else return null};return a}(),j=function(){function a(){}a.readObject=function(b){var c=new a();c.streamId=o(b.streamId);c.dataId=o(b.dataId);c.success=v(b.success);c.message=r(b.message);c.code=p(b.code);return c};return a}();j.ACK_CODE_LANDED_AND_ACCEPTED=20;j.ACK_CODE_LANDED_BUT_NOT_ACCEPTED=21;j.ACK_CODE_FAILED_TO_LAND=50;var k=function(){function a(){}a.readObject=function(b){var c=new a();c.streamId=p(b.streamId);c.message=r(b.message);return c};return a}(),l=function(){function a(){}a.readObject=function(b){var c=new a();c.streamId=o(b.streamId);c.status=o(b.status);c.message=r(b.message);c.code=p(b.code);c.shouldRetry=w(b.shouldRetry);c.retryDelayMs=p(b.retryDelayMs);return c};return a}(),m=function(){function a(){}a.readObject=function(b){var c=new a();c.streamId=o(b.streamId);c.newBody=r(b.newBody);c.newExtraHeader=r(b.newExtraHeader);c.patchExtraHeader=r(b.patchExtraHeader);c.killBody=w(b.killBody);c.temporary=w(b.temporary);return c};return a}(),n=function(){function a(){}var b=a.prototype;b.getRequest=function(){if(this.type==d("BladeRunnerTypes").StreamFrameType.REQUEST&&this.request!=null)return this.request;throw new Error("Expected request")};b.getData=function(){if(this.type==d("BladeRunnerTypes").StreamFrameType.DATA&&this.data!=null)return this.data;throw new Error("Expected data")};b.getDataAck=function(){if(this.type==d("BladeRunnerTypes").StreamFrameType.DATA_ACK&&this.dataAck!=null)return this.dataAck;throw new Error("Expected dataAck")};b.getStatusUpdate=function(){if(this.type==d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE&&this.statusUpdate!=null)return this.statusUpdate;throw new Error("Expected status update")};b.getLog=function(){if(this.type==d("BladeRunnerTypes").StreamFrameType.LOG&&this.log!=null)return this.log;throw new Error("Expected log")};b.getRewriteRequest=function(){if(this.type==d("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST&&this.rewriteRequest!=null)return this.rewriteRequest;throw new Error("Expected rewrite request")};b.getStreamId=function(){if(this.type==d("BladeRunnerTypes").StreamFrameType.REQUEST&&this.request!=null)return this.request.streamId;if(this.type==d("BladeRunnerTypes").StreamFrameType.DATA&&this.data!=null)return this.data.streamId;if(this.type==d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE&&this.statusUpdate!=null)return this.statusUpdate.streamId;if(this.type==d("BladeRunnerTypes").StreamFrameType.LOG&&this.log!=null)return this.log.streamId;if(this.type==d("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST&&this.rewriteRequest!=null)return this.rewriteRequest.streamId;if(this.type==d("BladeRunnerTypes").StreamFrameType.DATA_ACK&&this.dataAck!=null)return this.dataAck.streamId;throw new Error("Frame with unexpected type")};b.isInstrumented=function(){if(this.type===d("BladeRunnerTypes").StreamFrameType.REQUEST)return this.getRequest().instrumentationData!=null;else if(this.type===d("BladeRunnerTypes").StreamFrameType.DATA)return this.getData().instrumentationData!=null;else return!1};a.readObject=function(b){var e=new a();e.type=o(b.type);switch(e.type){case d("BladeRunnerTypes").StreamFrameType.REQUEST:e.request=h.readObject(s(b.request));break;case d("BladeRunnerTypes").StreamFrameType.DATA:e.data=i.readObject(s(b.data));break;case d("BladeRunnerTypes").StreamFrameType.DATA_ACK:e.dataAck=j.readObject(s(b.dataAck));break;case d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:e.statusUpdate=l.readObject(s(b.statusUpdate));break;case d("BladeRunnerTypes").StreamFrameType.LOG:e.log=k.readObject(s(b.log));break;case d("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST:e.rewriteRequest=m.readObject(s(b.rewriteRequest));break;default:c("BladeRunnerLogger").warn("Frame with unexpected type: "+e.type);return null}return e};a.newRequestFrame=function(b){var c=new a();c.type=d("BladeRunnerTypes").StreamFrameType.REQUEST;c.request=b;return c};a.newDataFrame=function(b){var c=new a();c.type=d("BladeRunnerTypes").StreamFrameType.DATA;c.data=b;return c};a.newDataAckFrame=function(b){var c=new a();c.type=d("BladeRunnerTypes").StreamFrameType.DATA_ACK;c.dataAck=b;return c};a.newStatusUpdateFrame=function(b){var c=new a();c.type=d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE;c.statusUpdate=b;return c};a.newLogFrame=function(b){var c=new a();c.type=d("BladeRunnerTypes").StreamFrameType.LOG;c.log=b;return c};a.newRewriteRequestFrame=function(b){var c=new a();c.type=d("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST;c.rewriteRequest=b;return c};return a}();a=function(){function a(a,b,c){this.batchId=a,this.frames=b,this.instrumentationData=c}var b=a.prototype;b.getFrames=function(){if(this.frames!=null)return this.frames;throw new Error("Expected frames")};b.getInstrumentationData=function(){if(this.instrumentationData!=null)try{return JSON.parse(this.instrumentationData)}catch(a){return null}else return null};b.getInstrumentationDataDfTraceId=function(){if(this.instrumentationData!=null)try{var a=JSON.parse(this.instrumentationData);return(a=a.dataFlowTracingData)==null?void 0:a.traceId}catch(a){return null}else return null};b.write=function(){return JSON.stringify(this)};b.isInstrumented=function(){return this.getFrames().some(function(a){return a.isInstrumented()})};a.read=function(b){b=JSON.parse(b);var c=b.batchId||0,d=[];for(var e of b.frames){var f=n.readObject(e);f!=null&&d.push(f)}f=b.instrumentationData||null;return new a(c,d,f)};return a}();function o(a){if(typeof a==="number")return a;throw new Error("Expected number")}function p(a){return a==null?null:o(a)}function q(a){if(typeof a==="string")return a;throw new Error("Expected string")}function r(a){return a==null?null:q(a)}function s(a){if(typeof a==="object"&&a!=null)return a;throw new Error("Expected object")}function t(a){if(typeof a==="object"&&a!=null){var b=a,c={};Object.keys(b).forEach(function(a){var d=b[a];typeof d==="string"&&d!=null&&(c[a]=d)});return c}throw new Error("Expected string map")}function u(a){return a==null?null:t(a)}function v(a){if(typeof a==="boolean"&&a!=null)return a;throw new Error("Expected boolean")}function w(a){return a==null?null:v(a)}g.GatewayStreamRequest=h;g.GatewayStreamData=i;g.GatewayStreamDataAck=j;g.GatewayStreamLog=k;g.GatewayStreamStatusUpdate=l;g.GatewayStreamRewriteRequest=m;g.GatewayStreamFrame=n;g.GatewayStreamBatch=a}),98);
__d("RequestStreamE2EClientLoggerEvent",[],(function(a,b,c,d,e,f){a=Object.freeze({RECEIVED:"received",SENT:"sent",FAILURE:"failure",PUBACK:"puback"});f["default"]=a}),66);
__d("RequestStreamE2EClientLoggerMessageType",[],(function(a,b,c,d,e,f){a=Object.freeze({REQUEST_STREAM:"request_stream",AMENDMENT:"amendment",AMENDMENT_ACK:"amendment_ack",CANCEL:"cancel",RESPONSE:"response",RESPONSE_ACK:"response_ack",TIMED_REQUEST:"timed_request",INTERRUPT:"interrupt"});f["default"]=a}),66);
__d("BladeRunnerEventHandler",["BladeRunnerLogger","BladeRunnerStreamStatus","BladeRunnerTypes","BladeRunnerTypesInternal","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){var h=1e3;a=function(){function a(a,b,c){this.$2=a,this.$1=b,this.$3=c}var b=a.prototype;b.onProxyResponse=function(a){this.$4(a);var b=[];for(var e of a.getFrames())this.$2.witnessFrame(e)&&b.push(e);e=this.$2.getRequest();(e=e.e2eLogger)==null?void 0:e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE,c("RequestStreamE2EClientLoggerEvent").SENT,{},(e=a.getInstrumentationData())==null?void 0:e.auxId,null,a.getInstrumentationDataDfTraceId());b.length>0&&this.$5(new(d("BladeRunnerTypesInternal").GatewayStreamBatch)(a.batchId,b,a.instrumentationData))};b.onDisconnect=function(){this.$2.resetErrors();var a=new(d("BladeRunnerTypesInternal").GatewayStreamStatusUpdate)();a.streamId=this.$2.getRequest().streamId;a.status=d("BladeRunnerStreamStatus").StreamStatus.CLOSED;a.shouldRetry=!0;a.retryDelayMs=0;a=new(d("BladeRunnerTypesInternal").GatewayStreamBatch)(null,[d("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(a)]);this.onProxyResponse(a)};b.$4=function(a){var b=this;a=a.getFrames().filter(function(a){return a.type==d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE});for(a of a){var e=a.getStatusUpdate();if(e.status==d("BladeRunnerStreamStatus").StreamStatus.CLOSED||e.status==d("BladeRunnerStreamStatus").StreamStatus.REJECTED){this.$2.onError();var f=e.shouldRetry!=null&&e.shouldRetry,g=e.message!=null?e.message:"null";if(f&&this.$2.getErrorCount()<=this.$2.getRetriesAllowed()){e.status=d("BladeRunnerStreamStatus").StreamStatus.STOPPED;var i=h;e.retryDelayMs!=null&&(i=e.retryDelayMs);c("BladeRunnerLogger").info("Can retry: stream "+e.streamId+" closed with status "+e.status+", message "+g+". Error count: "+this.$2.getErrorCount()+", retryDelay "+i+"ms. Already retrying: "+this.$2.getRetryRequestScheduled().toString());this.$2.getRetryRequestScheduled()?c("BladeRunnerLogger").bumpCounter("stream_closed_already_retrying"):(c("BladeRunnerLogger").bumpCounter("stream_closed_will_retry"),this.$2.setRetryRequestScheduled(!0),i>0?c("setTimeoutAcrossTransitions")(function(){return b.$6()},i):this.$6())}else c("BladeRunnerLogger").info("Will not retry: stream "+e.streamId+" closed with status "+e.status+", message "+g+". Error count: "+this.$2.getErrorCount()+", shouldRetry "+f.toString()+". Already retrying: "+this.$2.getRetryRequestScheduled().toString()),f?c("BladeRunnerLogger").bumpCounter("stream_closed_retry_exceeded"):c("BladeRunnerLogger").bumpCounter("stream_closed_no_retry"),this.$3.removeStream(e.streamId)}}};b.$6=function(){this.$2.setRetryRequestScheduled(!1);if(this.$2.isAlive()){var a=this.$1.getUpdatedRequestBody();a!=null&&this.$2.updateRetryRequestPayload(a);this.$3.sendRetryStreamRequest(this.$2)}};b.$5=function(a){c("BladeRunnerLogger").bumpCounter("send_to_handler");var b=[];this.$1.onBatch(a);for(a of a.getFrames())try{switch(a.type){case d("BladeRunnerTypes").StreamFrameType.DATA:this.$1.onData(a.getData());b.push(a.getData());break;case d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:this.$1.onStatusUpdate(a.getStatusUpdate().status);break;case d("BladeRunnerTypes").StreamFrameType.LOG:var e=a.getLog().message;e!=null&&this.$1.onLog(e);break;case d("BladeRunnerTypes").StreamFrameType.DATA_ACK:break;default:throw new Error("Frame with unexpected type")}}catch(a){c("BladeRunnerLogger").bumpCounter("send_to_handler_error"),c("BladeRunnerLogger").exception(a,"Failed sending frame to stream handler")}this.$7(b)};b.$7=function(a){var b=[];for(a of a)if(a.shouldAck===!0&&a.dataId!=null){var c=new(d("BladeRunnerTypesInternal").GatewayStreamDataAck)();c.streamId=a.streamId;c.dataId=a.dataId;c.success=!0;b.push(c)}this.$3.sendDataAcks(b)};return a}();g["default"]=a}),98);
__d("RtiRequestStreamE2eClientBatchFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("819");b=d("FalcoLoggerInternal").create("rti_request_stream_e2e_client_batch",a);e=b;g["default"]=e}),98);
__d("RtiRequestStreamE2eClientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1857112");b=d("FalcoLoggerInternal").create("rti_request_stream_e2e_client",a);e=b;g["default"]=e}),98);
__d("RequestStreamE2ELogger",["ConstUriUtils","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","RtiRequestStreamE2eClientBatchFalcoEvent","RtiRequestStreamE2eClientFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";var h=["FBGQLS:COMMENT_CREATE_SUBSCRIBE","FBGQLS:COMMENT_LIKE_SUBSCRIBE","FBGQLS:FEEDBACK_COMMENT_PERMISSION_TOGGLE_SUBSCRIBE","FBGQLS:FEEDBACK_TYPING_SUBSCRIBE","FBLQ:comet_notifications_live_query_experimental"],i=0;function j(){var a=Date.now();i>=a?i+=1:i=a;return i.toString()}var k=function(){function a(a,b,c,e,f,g,h,i,j,k){this.$10=[];this.$11=!1;this.$1=a;this.$2=b;this.$3=c;this.$4=e;this.$5=f;this.$6=g;this.$7=h;this.$8=i;this.$9=j;this.$12=k!=null?k:!1;a=d("ConstUriUtils").getUri(window.location.href);a&&(this.$13=a.getDomain())}var b=a.prototype;b.logE2EEvent=function(a,b,c,d,e,f){c===void 0&&(c=null);d===void 0&&(d=null);e===void 0&&(e=null);f===void 0&&(f=null);if(this.$3==="Falco")return;e={request_id:this.$1,resume_id:"0",retry_id:e,transport:this.$2,method:this.$3,use_case:this.$4,request_log_context:this.$5,force_log_context:this.$6,e2e_sample_rate:this.$7,message_type:a,event:b,timestamp_ms:j(),aux_id:d,additional_data:c,dgw_stream_group_logging_id:this.$8,dgw_count_prior_streams_in_group:this.$9,domain:this.$13,df_trace_id:f};this.$14(e)};b.$14=function(a){if(!this.$12){c("RtiRequestStreamE2eClientFalcoEvent").log(function(){return a});return}this.$10.push(a);if(this.$11||a.event==c("RequestStreamE2EClientLoggerEvent").FAILURE||a.message_type==c("RequestStreamE2EClientLoggerMessageType").RESPONSE){var b={events:this.$10};c("RtiRequestStreamE2eClientBatchFalcoEvent").log(function(){return b});this.$10=[];this.$11=!0}};b.getRequestId=function(){return this.$1};return a}();function a(a,b,c){if(a==null||a.method==null)return null;var d=!1;h.includes(a.method)&&(d=!0);if(b==null||b.length==0)return null;b=JSON.parse(b);return b.requestId==null?null:new k(b.requestId,c,a.method,l(a.method,a),b.requestLogContext,b.forceLogContext,b.sampleRate,b.dgwStreamGroupLoggingId,b.dgwCountPriorStreamsInGroup,d)}function l(a,b){if(a==="FBLQ"&&b.config_id)return b.config_id;if(a==="SKY"){if(b.topic){var c=b.topic.lastIndexOf("/");return c>0?b.topic.substr(0,c):b.topic}return}return a}function b(a,b,d,e,f,g){f===void 0&&(f=null);g===void 0&&(g=null);if(a==null||a.requestId==null||a.clientLoggingDisabled!=null)return;var h={request_id:a.requestId,resume_id:"0",transport:b,e2e_sample_rate:a.sampleRate,message_type:d,event:e,timestamp_ms:j(),aux_id:a.auxId,additional_data:f,df_trace_id:g};c("RtiRequestStreamE2eClientFalcoEvent").log(function(){return h})}g.RequestStreamE2ELogger=k;g.createStreamLogger=a;g.logRequestStreamE2EEventStatic=b}),98);
__d("RequestStreamTransport",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["WEB_BR_MQTT","WEB_RS_MQTT","WEB_RS_STARGATE"]);f.RequestStreamTransport=a}),66);
__d("BladeRunnerSocket",["BladeRunnerEventHandler","BladeRunnerLogger","BladeRunnerStreamStatus","BladeRunnerTypes","BladeRunnerTypesInternal","CurrentUser","FBMqttChannel","MqttPublishListener","Promise","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","RequestStreamE2ELogger","RequestStreamTransport","justknobx","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i="Connected",j="Disconnected",k="/br_sr",l="/sr_res",m=null;function n(a){var b;switch(a.type){case d("BladeRunnerTypes").StreamFrameType.REQUEST:return(b=a.request)==null?void 0:b.getInstrumentationData();case d("BladeRunnerTypes").StreamFrameType.DATA:return(b=a.data)==null?void 0:b.getInstrumentationData()}return null}function o(a){switch(a.type){case d("BladeRunnerTypes").StreamFrameType.REQUEST:return c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM;case d("BladeRunnerTypes").StreamFrameType.DATA:return c("RequestStreamE2EClientLoggerMessageType").AMENDMENT}return null}function p(a){if(a===null)return null;switch(a){case d("BladeRunnerStreamStatus").StreamStatus.ACCEPTED:return"Accepted";case d("BladeRunnerStreamStatus").StreamStatus.REJECTED:return"Rejected";case d("BladeRunnerStreamStatus").StreamStatus.STARTED:return"Started";case d("BladeRunnerStreamStatus").StreamStatus.STOPPED:return"Stopped";case d("BladeRunnerStreamStatus").StreamStatus.CLOSED:return"Closed"}return null}function q(a){var b={};a==null?void 0:(a=a.frames)==null?void 0:a.forEach(function(a){if(a.type===d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE){a=(a=a.statusUpdate)==null?void 0:a.status;a=p(a);a!==null&&(b.flow_status=a)}});return b}function r(a,b){var c;switch(a.type){case d("BladeRunnerTypes").StreamFrameType.REQUEST:b.data_base64_size=(c=a.request)==null?void 0:(c=c.payload)==null?void 0:(c=c.length)==null?void 0:c.toString();break;case d("BladeRunnerTypes").StreamFrameType.DATA:b.data_base64_size=(c=a.data)==null?void 0:(b=c.rawDataSize())==null?void 0:b.toString();break}return null}function s(a,b,e){var f=n(a);if(f==null)return;var g=o(a);if(g==null)return;var h=null;switch(b){case d("MqttPublishListener").MqttPublishEvent.SENT:h=c("RequestStreamE2EClientLoggerEvent").SENT;break;case d("MqttPublishListener").MqttPublishEvent.ACKED:h=c("RequestStreamE2EClientLoggerEvent").PUBACK;break;case d("MqttPublishListener").MqttPublishEvent.NOT_ACKED:case d("MqttPublishListener").MqttPublishEvent.NOT_CONNECTED:case d("MqttPublishListener").MqttPublishEvent.PUBLISH_ERROR:h=c("RequestStreamE2EClientLoggerEvent").FAILURE;e.reason==null&&(e.reason=b);break}if(h==null)return;r(a,e);if(((b=a.request)==null?void 0:b.e2eLogger)!=null&&f.clientLoggingDisabled==null){(b=a.request)==null?void 0:b.e2eLogger.logE2EEvent(g,h,e,f.auxId)}else d("RequestStreamE2ELogger").logRequestStreamE2EEventStatic(f,d("RequestStreamTransport").RequestStreamTransport.WEB_BR_MQTT,g,h,e)}a=function(){function a(a){this.$1=[],this.$2=0,this.$3=0,this.$4=null,this.$5=0,this.$6=new Map(),this.$7=a!=null?a:c("FBMqttChannel"),this.$8=new Map(),c("BladeRunnerLogger").setClientSessionId(c("uuidv4")()),this.$9()}a.get=function(){m==null&&(m=new a(c("FBMqttChannel")));return m};var e=a.prototype;e.sendNewStreamRequest=function(b,d){d=new(c("BladeRunnerEventHandler"))(b,d,this);var e=b.getRequest();this.$6.set(e.streamId,d);if(!this.$10()){this.$11(d,e.streamId);return}this.getStreamCount()<=a.maxStreamCount?this.$12(e):(c("BladeRunnerLogger").bumpCounter("socket_request_throttled_max_streams"),c("BladeRunnerLogger").warn("Maximum stream count reached, will not send request: "+JSON.stringify(b.getRequest().getHeaders())),this.$11(d,e.streamId))};e.sendRetryStreamRequest=function(a){this.$12(a.getRequest())};e.sendCancel=function(a){c("BladeRunnerLogger").bumpCounter("socket_send_cancel");var b=new(d("BladeRunnerTypesInternal").GatewayStreamStatusUpdate)();b.streamId=a.streamId;b.status=d("BladeRunnerStreamStatus").StreamStatus.CLOSED;this.$13(b,a);this.removeStream(a.streamId)};e.sendAmendment=function(a,b,e){c("BladeRunnerLogger").bumpCounter("socket_send_amendment");var f=new(d("BladeRunnerTypesInternal").GatewayStreamData)();f.streamId=a;f.setData(b);e!=null&&(f.instrumentationData=e);this.$14(f)};e.sendAmendmentWithAck=function(a,e,f){var g=this;c("BladeRunnerLogger").bumpCounter("socket_send_amendment");var i=this.$15(),j=new(d("BladeRunnerTypesInternal").GatewayStreamData)();j.streamId=a;j.setData(e);j.shouldAck=!0;j.dataId=i;f!=null&&(j.instrumentationData=f);a=new(h||(h=b("Promise")))(function(a,b){g.$8.set(i,{resolve:a,reject:b})});this.$14(j);return a};e.$14=function(a){this.$1.push(d("BladeRunnerTypesInternal").GatewayStreamFrame.newDataFrame(a)),this.$16()};e.sendDataAcks=function(a){c("BladeRunnerLogger").bumpCounter("socket_send_data_ack",a.length),this.$17(a)};e.removeStream=function(a){this.$6["delete"](a)};e.getStreamCount=function(){return this.$6.size};e.getNextStreamId=function(){this.$5++;return this.$5};e.onMQTTStateChanged=function(a){this.$16();if(a!=j&&a!=i||this.$4==a)return;this.$4=a;c("BladeRunnerLogger").info("MQTTStateChanged: "+a);a==j?(c("BladeRunnerLogger").bumpCounter("mqtt_state_disconnected"),this.$18()):a==i&&c("BladeRunnerLogger").bumpCounter("mqtt_state_connected")};e.$12=function(a){c("BladeRunnerLogger").bumpCounter("socket_send_request");this.$1.push(d("BladeRunnerTypesInternal").GatewayStreamFrame.newRequestFrame(a));if(!this.$16()){(a=a.e2eLogger)==null?void 0:a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"MQTT Not Connected"})}};e.$13=function(a,b){this.$1.push(d("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(a));if(this.$16()){(a=b.e2eLogger)==null?void 0:a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").CANCEL,c("RequestStreamE2EClientLoggerEvent").SENT)}};e.$17=function(a){for(a of a)this.$1.push(d("BladeRunnerTypesInternal").GatewayStreamFrame.newDataAckFrame(a));this.$16()};e.$19=function(){this.$2++;return this.$2};e.$15=function(){this.$3++;return this.$3};e.$16=function(){var a=!1;if(this.$7.getConnectionState()===i&&this.$1.length>0)try{this.$20(this.$1),a=!0}catch(a){}finally{this.$1=[]}return a};e.$20=function(a){var b=this,e=new(d("BladeRunnerTypesInternal").GatewayStreamBatch)(this.$19(),a),f=e.write();if(f.length>this.$21()){var g=Math.floor(a.length/2);if(g===0){a.forEach(function(a){return s(a,d("MqttPublishListener").MqttPublishEvent.PUBLISH_ERROR,{reason:"too long"})});var h=new Error("Publish is too long: "+f.length);h.stack;this.$22(e,h,"Publish is too long");throw h}this.$20(a.slice(0,g));this.$20(a.slice(g,a.length))}else try{c("BladeRunnerLogger").info("send message to "+k+" ("+f.length+" bytes)");h={qos:1,skipBuffer:!1};if(e.isInstrumented()){var i=Date.now();h.listener={onEvent:function(b){var c=(Date.now()-i).toString();a.forEach(function(a){s(a,b,{latency:c})})}}}this.$7.publish(k,f,h)["catch"](function(a){b.$22(e,a,"Failed publishing to MQTT")});c("BladeRunnerLogger").bumpCounter("mqtt_publish_success")}catch(a){this.$22(e,a,"Failed publishing to MQTT");throw a}};e.$9=function(){var a=this;c("BladeRunnerLogger").info("Starting socket with endpoint "+this.$7.getEndpoint()+" useragent "+navigator.userAgent);this.onMQTTStateChanged(this.$7.getConnectionState());this.$7.subscribeChannelEvents({onMQTTStateChanged:function(b){a.onMQTTStateChanged(b)},onJSError:function(a){var b=a!=null&&typeof a.isRecoverable==="boolean"?a.isRecoverable:!1;b?c("BladeRunnerLogger").bumpCounter("mqtt_channel_recoverable_error"):(c("BladeRunnerLogger").warn("JS error in MQTTChannel: "+(typeof a=="object"&&a!=null?a.toString():"unknown error")+", "+JSON.stringify(a)),c("BladeRunnerLogger").bumpCounter("mqtt_channel_error"))}});this.$7.subscribe(k,function(a){throw new Error("Unexpected response: "+k+" "+a.toString())});this.$7.subscribe(l,function(b){a.$23(b)})};e.$23=function(a){a=d("BladeRunnerTypesInternal").GatewayStreamBatch.read(a);this.processBatch(a)};e.$22=function(a,b,e){for(a of a.getFrames())if(a.type===d("BladeRunnerTypes").StreamFrameType.REQUEST){var f=a.getRequest(),g=this.$6.get(f.streamId);g!=null&&this.$24(g,f.streamId,d("BladeRunnerStreamStatus").StreamStatus.CLOSED,!0,null)}else if(a.type===d("BladeRunnerTypes").StreamFrameType.DATA){g=a.getData();f=g.dataId;if(g.shouldAck!=null&&g.shouldAck&&f!=null){var h=new(d("BladeRunnerTypesInternal").GatewayStreamDataAck)();h.streamId=g.streamId;h.dataId=f;h.success=!1;h.code=d("BladeRunnerTypesInternal").GatewayStreamDataAck.ACK_CODE_FAILED_TO_LAND;h.message=e;this.$25(h)}}c("BladeRunnerLogger").info("Failed publishing to MQTT: "+b.message);c("BladeRunnerLogger").bumpCounter("mqtt_publish_error")};e.$25=function(a){var b=this.$8.get(a.dataId);b!=null&&(this.$8["delete"](a.dataId),a.success?b.resolve(!0):a.code===d("BladeRunnerTypesInternal").GatewayStreamDataAck.ACK_CODE_LANDED_BUT_NOT_ACCEPTED?b.resolve(!1):b.reject(a.message))};e.processBatch=function(a){try{d("RequestStreamE2ELogger").logRequestStreamE2EEventStatic(a.getInstrumentationData(),d("RequestStreamTransport").RequestStreamTransport.WEB_BR_MQTT,c("RequestStreamE2EClientLoggerMessageType").RESPONSE,c("RequestStreamE2EClientLoggerEvent").RECEIVED,q(a),a.getInstrumentationDataDfTraceId());c("BladeRunnerLogger").bumpCounter("socket_process_batch");var b=JSON.stringify(a);c("BladeRunnerLogger").info("Received batch ("+b.length+" bytes)");b=null;for(var e of a.getFrames()){var f=e.getStreamId();b==null&&(b=f);if(f!=null&&b!=f)throw new Error("Received batch with frames for multiple streams");e.type==d("BladeRunnerTypes").StreamFrameType.DATA_ACK&&this.$25(e.getDataAck())}if(b!=null){f=this.$6.get(b);f!=null?f.onProxyResponse(a):c("BladeRunnerLogger").info("Received batch with frames for unknown stream id: "+b)}else c("BladeRunnerLogger").info("Received batch with no frames")}catch(a){c("BladeRunnerLogger").exception(a,"Failed processing batch from MQTT");c("BladeRunnerLogger").bumpCounter("socket_process_batch_error");throw a}};e.$18=function(){this.$6.forEach(function(a,b,c){a.onDisconnect()})};e.$11=function(a,b){this.$24(a,b,d("BladeRunnerStreamStatus").StreamStatus.REJECTED,!1,0)};e.$24=function(a,b,c,e,f){var g=new(d("BladeRunnerTypesInternal").GatewayStreamStatusUpdate)();g.streamId=b;g.status=c;g.shouldRetry=e;g.retryDelayMs=f;b=new(d("BladeRunnerTypesInternal").GatewayStreamBatch)(null,[d("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(g)]);a.onProxyResponse(b)};e.$10=function(){if(!c("CurrentUser").isLoggedIn()){c("BladeRunnerLogger").bumpCounter("request_stream_user_logged_out");return!1}return!0};e.$21=function(){var a=1024*1024,b=512*1024;try{var d=c("justknobx")._("317");b=d*a}catch(a){}return Math.max(b-1024,0)};return a}();a.maxStreamCount=2e3;g["default"]=a}),98);
__d("BladeRunnerStream",["Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f){var g;a=function(){function a(a){this.$1=a}var c=a.prototype;c.getStreamHandler=function(){return this.$1};c.cancel=function(){};c.amendWithAck=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return!1});function c(b){return a.apply(this,arguments)}return c}();c.amendFireAndForget=function(a){};c.amendWithoutAck=function(a){};c.start=function(){return(g||(g=b("Promise"))).resolve()};c.isAlive=function(){return!1};c.canAmend=function(){return!1};c.getStatus=function(){return null};c.getStreamId=function(){return 0};return a}();f["default"]=a}),66);
__d("BladeRunnerStreamState",["BladeRunnerLogger","BladeRunnerStreamStatus","BladeRunnerTypes"],(function(a,b,c,d,e,f,g){a=function(){function a(a){this.$1=a,this.$2=null,this.$3=0,this.$4=!1,this.$5=0,this.$6=!1}var b=a.prototype;b.getRequest=function(){return this.$1};b.updateRetryRequestPayload=function(a){this.$1.updateRetryRequestPayload(a)};b.isAlive=function(){return!(this.$2==d("BladeRunnerStreamStatus").StreamStatus.CLOSED||this.$2==d("BladeRunnerStreamStatus").StreamStatus.REJECTED)};b.canAmend=function(){return this.$2==d("BladeRunnerStreamStatus").StreamStatus.ACCEPTED||this.$2==d("BladeRunnerStreamStatus").StreamStatus.STARTED||this.$2==d("BladeRunnerStreamStatus").StreamStatus.STOPPED};b.getLastStatus=function(){return this.$2};b.setLastStatus=function(a){this.$2=a};b.onError=function(){this.$3+=1};b.getErrorCount=function(){return this.$3};b.resetErrors=function(){this.$3=0};b.getRetryRequestScheduled=function(){return this.$6};b.setRetryRequestScheduled=function(a){this.$6=a};b.witnessFrame=function(a){switch(a.type){case d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:var b=a.getStatusUpdate(),c=!0;switch(b.status){case d("BladeRunnerStreamStatus").StreamStatus.ACCEPTED:c=!this.$4;this.$4||(this.$4=!0);break;case d("BladeRunnerStreamStatus").StreamStatus.STARTED:c=this.getLastStatus()!=d("BladeRunnerStreamStatus").StreamStatus.STARTED;break;case d("BladeRunnerStreamStatus").StreamStatus.STOPPED:c=this.getLastStatus()==d("BladeRunnerStreamStatus").StreamStatus.STARTED;break;case d("BladeRunnerStreamStatus").StreamStatus.CLOSED:case d("BladeRunnerStreamStatus").StreamStatus.REJECTED:default:c=!0}this.setLastStatus(b.status);return c;case d("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST:this.$7(a.getRewriteRequest());return!1;default:return!0}};b.setRetriesAllowed=function(a){this.$5=a};b.getRetriesAllowed=function(){return this.$5};b.$7=function(a){if(!(a.temporary!=null||a.temporary==!0)){a.newBody!=null&&(this.$1.payload=a.newBody);a.newExtraHeader!=null&&(this.$1.extraHeader=a.newExtraHeader,this.$1.headers=JSON.parse(a.newExtraHeader));if(a.patchExtraHeader!=null)try{var b=JSON.parse(a.patchExtraHeader),d=this.$1.extraHeader!=null?JSON.parse(this.$1.extraHeader):{};this.$1.headers==null&&(this.$1.headers={});for(var e of Object.keys(b))this.$1.headers[e]=b[e],d[e]=b[e];this.$1.extraHeader=JSON.stringify(d)}catch(b){c("BladeRunnerLogger").warn("Failed to patch header: "+a.patchExtraHeader)}a.killBody!=null&&a.killBody==!0&&(this.$1.payload=null)}};return a}();g["default"]=a}),98);
__d("BladeRunnerSocketStream",["BladeRunnerStream","BladeRunnerStreamState","BladeRunnerStreamStatus","Promise","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","asyncToGeneratorRuntime","uuidv4"],(function(a,b,c,d,e,f,g){var h,i=4,j={reason:"stream_dead"};a=function(a){babelHelpers.inheritsLoose(e,a);function e(b,d,e){b=a.call(this,b)||this;b.$BladeRunnerSocketStream$p_1=e;b.$BladeRunnerSocketStream$p_2=new(c("BladeRunnerStreamState"))(d);b.$BladeRunnerSocketStream$p_2.setRetriesAllowed(i);return b}var f=e.prototype;f.start=function(){var a=this;return new(h||(h=b("Promise")))(function(b){a.send(),b()})};f.send=function(){var a,b=this.$BladeRunnerSocketStream$p_2.getRequest();(a=b.e2eLogger)==null?void 0:a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_base64_size:(a=b.payload)==null?void 0:(b=a.length)==null?void 0:b.toString()});this.$BladeRunnerSocketStream$p_1.sendNewStreamRequest(this.$BladeRunnerSocketStream$p_2,this.getStreamHandler())};f.amendWithAck=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var d=this.$BladeRunnerSocketStream$p_2.getRequest(),e=d.getInstrumentationData();if(e){var f;e.auxId=c("uuidv4")();(f=d.e2eLogger)==null?void 0:f.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_size:a==null?void 0:(f=a.length)==null?void 0:f.toString()},e.auxId)}if(this.canAmend()){if(e){(f=d.e2eLogger)==null?void 0:f.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").SENT,{data_size:a==null?void 0:(f=a.length)==null?void 0:f.toString()},e.auxId)}return this.$BladeRunnerSocketStream$p_1.sendAmendmentWithAck(d.streamId,this.$BladeRunnerSocketStream$p_3(a),e==null?null:JSON.stringify(e))}(f=d.e2eLogger)==null?void 0:f.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").FAILURE,j,e==null?void 0:e.auxId);return(h||(h=b("Promise"))).reject("Stream is closed or not accepted")});function d(b){return a.apply(this,arguments)}return d}();f.amendFireAndForget=function(a){var b=this.$BladeRunnerSocketStream$p_2.getRequest(),d=b.getInstrumentationData();if(d){var e;d.auxId=c("uuidv4")();(e=b.e2eLogger)==null?void 0:e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_size:a==null?void 0:(e=a.length)==null?void 0:e.toString()},d.auxId)}if(this.canAmend()){this.$BladeRunnerSocketStream$p_1.sendAmendment(this.$BladeRunnerSocketStream$p_2.getRequest().streamId,this.$BladeRunnerSocketStream$p_3(a),d==null?null:JSON.stringify(d));if(d){(e=b.e2eLogger)==null?void 0:e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").SENT,{data_size:a==null?void 0:(e=a.length)==null?void 0:e.toString()},d.auxId)}}else{(a=b.e2eLogger)==null?void 0:a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").FAILURE,j,d==null?void 0:d.auxId);throw new Error("Stream is closed or not accepted")}};f.amendWithoutAck=function(a){this.amendFireAndForget(a)};f.$BladeRunnerSocketStream$p_3=function(a){return typeof a=="object"?btoa(new TextDecoder("utf8").decode(a)):a};f.cancel=function(){var a=this.$BladeRunnerSocketStream$p_2.getRequest();(a=a.e2eLogger)==null?void 0:a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").CANCEL,c("RequestStreamE2EClientLoggerEvent").RECEIVED);this.isAlive()&&(this.$BladeRunnerSocketStream$p_1.sendCancel(this.$BladeRunnerSocketStream$p_2.getRequest()),this.$BladeRunnerSocketStream$p_2.setLastStatus(d("BladeRunnerStreamStatus").StreamStatus.CLOSED),this.getStreamHandler().onClientCancel())};f.isAlive=function(){return this.$BladeRunnerSocketStream$p_2.isAlive()};f.canAmend=function(){return this.$BladeRunnerSocketStream$p_2.canAmend()};f.getStatus=function(){return this.$BladeRunnerSocketStream$p_2.getLastStatus()};f.getStreamId=function(){return this.$BladeRunnerSocketStream$p_2.getRequest().streamId};return e}(c("BladeRunnerStream"));g["default"]=a}),98);
__d("RequestStreamE2ESampling",["invariant","Random","RequestStreamE2EClientSamplingConfig","uuidv4"],(function(a,b,c,d,e,f,g,h){"use strict";function i(a){return a==null?!1:a.requestId!=null&&typeof a.requestId=="string"&&a.forceLogContext!=null&&typeof a.forceLogContext=="string"}function j(a,b){var d=c("RequestStreamE2EClientSamplingConfig").sampleRate;if(d>1&&a!=null){a=c("RequestStreamE2EClientSamplingConfig").methodToSamplingMultiplier[a];a==0?d=0:a!=null&&(d/=a)}return d==1?1:d/b}function k(a,b,d,e){var f=c("uuidv4")();(b.requestId==null||b.requestId===""||typeof b.requestId!="string")&&(a.requestId!=null&&typeof a.requestId=="string"?b.requestId=a.requestId:b.requestId=f);b.requestId+="/_"+f.substring(0,4);b.resumeId="0";d!=null?b.sampleRate=d:b.sampleRate=void 0;f="";e!=null&&e.length>0&&(f=e);f.length>0&&(b.requestLogContext!=null&&b.requestLogContext.length>0?b.requestLogContext+=":":b.requestLogContext="",b.requestLogContext+=f);(a==null?void 0:a.method)==="Falco"&&(b.clientLoggingDisabled="Falco");d={};for(e of Object.keys(b).sort())d[e]=b[e];return JSON.stringify(d)}function a(a,b,d,e){b&&(!b.requestId.includes("/")&&!b.requestId.includes("#")||h(0,41721));e=j(a.method,e!=null?e:1);if(c("Random").coinflip(e))return k(a,b||{requestId:""},e,d);return i(b)?k(a,b||{requestId:""},null,d):""}g.isForceLogged=i;g.getSampleRateForLogging=j;g.normalizeInstrumentationData=k;g.validateInstrumentationData=a}),98);
__d("BladeRunnerClient",["Base64","BladeRunnerConfig","BladeRunnerLogger","BladeRunnerSocket","BladeRunnerSocketStream","BladeRunnerTypes","BladeRunnerTypesInternal","RequestStreamE2ELogger","RequestStreamE2ESampling","RequestStreamTransport","cr:2046346"],(function(a,b,c,d,e,f,g){a=function(){function a(a,b){this.$2=d("RequestStreamTransport").RequestStreamTransport.WEB_BR_MQTT,this.$1=a!=null?a:c("BladeRunnerSocket").get(),b&&(this.$2=b)}var e=a.prototype;e.createStream=function(a,b,c,d){return this.$3(a,b,c,d)};e.requestStream=function(a,c,d,e){a=this.$3(a,c,d,e);a.send();b("cr:2046346")!=null&&b("cr:2046346").startPulsarTest();return a};e.logInfo=function(a){c("BladeRunnerLogger").info(a)};e.bumpCounter=function(a){c("BladeRunnerLogger").bumpCounter(a)};e.$3=function(a,b,e,f){var g=new(d("BladeRunnerTypesInternal").GatewayStreamRequest)();g.streamId=this.$1.getNextStreamId();g.requestType=d("BladeRunnerTypes").StreamRequestType.BLADE_RUNNER;g.headers=c("BladeRunnerConfig").patchRequestHeaders(a);g.extraHeader=JSON.stringify(g.headers);g.payload=b!=null?c("Base64").encode(b):null;f!=null&&(f.transport="WEB_RS_MQTT");g.instrumentationData=d("RequestStreamE2ESampling").validateInstrumentationData(g.headers||{},f);g.e2eLogger=d("RequestStreamE2ELogger").createStreamLogger(g.headers,g.instrumentationData,this.$2);return new(c("BladeRunnerSocketStream"))(e,g,this.$1)};return a}();g["default"]=a}),98);
__d("BootloaderEventsPerf",["invariant","Bootloader","BootloaderEvents","ResourceTimingStore","objectEntries","objectValues"],(function(a,b,c,d,e,f,g,h){var i={total_count:0,total_bytes:0,downloaded_count:0,downloaded_bytes:0,cached_count:0,cached_bytes:0,inlined_count:0,inlined_bytes:0,duration:0,missing_count:0};function j(a,b,c){return Math.max(0,(c!=null?c:0)-Math.max(a,b!=null?b:0))}function k(){return{blocking:babelHelpers["extends"]({},i),nonblocking:babelHelpers["extends"]({},i),"default":babelHelpers["extends"]({},i)}}function l(a,b,c){var e,f;if(c==null)e=0,f="downloaded";else if(c[1])e=c[0].length,f="inlined";else{c=d("ResourceTimingStore").getEntryForURL(c[0]);c?(e=c.encodedBodySize,f=c.transferSize===0?"cached":"downloaded"):(e=0,f="downloaded",a.missing_count++)}a.total_count++;a.total_bytes+=e;if(!b)return;a.duration=Math.max(a.duration,b);switch(f){case"downloaded":a.downloaded_count++;a.downloaded_bytes+=e;break;case"inlined":a.inlined_count++;a.inlined_bytes+=e;break;case"cached":a.cached_count++;a.cached_bytes+=e;break}}function m(a,b,d,e,f){var g=c("Bootloader").getResourceState(b);l(a,j(d,g.loadStart,g.loadEnd),e);g.loadError!=null&&f.add(b)}function n(a,b,d,e){var f=k();for(a of c("objectEntries")(a)){var g=a[0],i=a[1];for(i of i){var j=i[0],l=i[1],n=void 0,o=void 0;switch(l.type){case"async":o=null;n=d;break;case"js":case"css":o=[l.src,l.d===1];n=f;break;default:l,h(0,3721)}m(n[g],j,b,o,e)}}return f}function o(a,b){var e={unpredicted:d("BootloaderEvents").newResourceMapSet(),ef:d("BootloaderEvents").newResourceMapSet(),overpredicted:d("BootloaderEvents").newResourceMapSet()};for(var f of c("objectEntries")(b)){var g=f[0],h=f[1];for(h of h.entries()){var i=h[0],j=h[1];a[g].has(i)?e.ef[g].set(i,j):e.overpredicted[g].set(i,j)}}for(i of c("objectEntries")(a)){j=i[0];h=i[1];for(g of h.entries()){f=g[0];a=g[1];b[j].has(f)||e.unpredicted[j].set(f,a)}}return e}function a(a){var b=a.efData,c=a.rsrcs,d=a.startTime,e=new Set(),f;if(b){var g=o(c,b.tierOne);f=g.unpredicted;g={ef:n(g.ef,b.fetchRsrcsStart,k(),e),overpredicted:n(g.overpredicted,b.fetchRsrcsStart,k(),e)};b={ef_fetch_predictions:b.fetchPredictionsEnd-b.fetchPredictionsStart,ef_fetch_start_wait:b.fetchPredictionsEnd-b.fetchRsrcsStart,ef_head_start:d-b.fetchRsrcsStart}}else f=c,g={},b={};c=babelHelpers["extends"]({unpredicted:n(f,d,k(),e)},g);return{source:a.source,source_detail:a.sourceDetail,is_first_identical:a.isFirstIdentical,timeslice_context:(f=a.timesliceContext)==null?void 0:f.name,start_time:d,err_count:e.size,resources:c,durations:babelHelpers["extends"]({jsmods_wait:a.jsmodsStart-d,jsmods:a.jsmodsEnd-a.jsmodsStart,jsmods_done_wait:a.jsmodsEnd-d,download_done_wait:a.logTime-d},b),payloadStats:a.payloadStats}}function b(a){var b=a.startTime,e=0,f=0,g=0,h=0;for(var i of a.components){var m=c("Bootloader").getComponentTiming(i),o=m.tierTwoStart,p=m.tierTwoEnd,q=m.tierThreeStart;m=m.tierThreeEnd;e=Math.max(e,j(b,o,p));f=Math.max(f,j(b,b,p));g=Math.max(g,j(b,q,m));h=Math.max(h,j(b,b,m))}o=new Set();p=k();q=n(a.tierOne,b,p,o);m=n(a.tierTwo,b,p,o);i=n(a.tierThree,b,p,o);var r=p.blocking.downloaded_count!=0,s=k(),t=d("BootloaderEvents").newResourceMapSet(),u=new Set();for(var v of[a.tierOne,a.tierTwo,a.tierThree])for(var w of c("objectValues")(v))for(var x of w.keys())u.add(x);x=0;w=0;v=0;for(var y of a.beRequests.values()){x+=j(b,b,y.requestStart);w+=y.serverGenTime;v+=y.jsmodsEnd-y.jsmodsStart;l(s[r?"blocking":"nonblocking"],y.responseStart-y.requestStart,[y.uri,!1]);for(var z of c("objectEntries")(y.rsrcs)){var A=z[0],B=z[1];for(B of B){var C=B[0],D=B[1];u.has(C)||t[A].set(C,D)}}}C=n(t,b,p,o);return{ref:a.ref,components:a.components,timeslice_context:(D=a.timesliceContext)==null?void 0:D.name,start_time:b,err_count:o.size,resources:{t1:q,t2:m,t3:i,be:s,unpredicted:C,async:p},durations:{fetch_start_wait:a.fetchStartTime-b,be_start_wait:x,be_server_gen:w,be_jsmods:v,callback_wait:a.callbackStart-b,callback:a.callbackEnd-a.callbackStart,bootload_done_wait:a.callbackEnd-b,rdfd_requirelazy:e,rdfd_done_wait:f,rd_requirelazy:g,rd_done_wait:h}}}function e(a){a.start_time;var b=a.resources,d=a.durations;a=babelHelpers.objectWithoutPropertiesLoose(a,["start_time","resources","durations"]);for(b of c("objectEntries")(b)){var e=b[0],f=b[1];for(f of c("objectEntries")(f)){var g=f[0],h=f[1];for(h of c("objectEntries")(h)){var i=h[0],j=h[1];a[e+"_"+g+"_resources_"+i]=Math.round(Number(j))}}}for(i of c("objectEntries")(d)){j=i[0];h=i[1];a[j+"_duration"]=Math.round(Number(h))}if(a.payloadStats){for(g of c("objectEntries")(a.payloadStats)){f=g[0];e=g[1];for(b of c("objectEntries")(e)){d=b[0];j=b[1];a[f+"_"+d+"_count"]=Math.round(Number(j))}}delete a.payloadStats}return a}g.computeHRData=a;g.computeBLData=b;g.flattenData=e}),98);
__d("BootloaderLoggingStatusEnum",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["SUCCESS","TIMEOUT","ERROR"]);c=a;f["default"]=c}),66);
__d("CometBootloaderEventsTypedLoggerLite",["generateLiteTypedLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=b("generateLiteTypedLogger")("logger:CometBootloaderEventsLoggerConfig")}),null);
__d("HasteResponseFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1823926");b=d("FalcoLoggerInternal").create("haste_response",a);e=b;g["default"]=e}),98);
__d("CometBootloaderLoggerUtil",["BootloaderEvents","BootloaderEventsPerf","CometBootloaderEventsTypedLoggerLite","CometTimeSpentNavigation","HasteResponseFalcoEvent","ResourceTimingStore","SiteData","UserTimingUtils","gkx","performance","performanceNavigationStart"],(function(a,b,c,d,e,f,g){"use strict";var h,i=!1,j=c("gkx")("10211");function a(a){var b=a.bl_sample_rate,e=a.hr_sample_rate,f=a.parent_lid;if(i||!(b||e||j===!0))return;i=!0;d("ResourceTimingStore").init();var g=function(a){return{ms_since_navstart:Math.round(a-c("performanceNavigationStart")()),parent_lid:f,pkg_cohort:c("SiteData").pkg_cohort,request_path:(a=c("CometTimeSpentNavigation").getPathInfo())==null?void 0:a.name,svn_rev:c("SiteData").client_revision}};e&&d("BootloaderEvents").onHasteResponse(function(a){return c("HasteResponseFalcoEvent").log(function(){var b=d("BootloaderEventsPerf").computeHRData(a),c=d("BootloaderEventsPerf").flattenData(b);return babelHelpers["extends"]({},c,{},g(b.start_time))})});j&&(d("BootloaderEvents").onBootload(function(a){d("UserTimingUtils").measureModern("Bootloader: "+a.components.join(", "),{end:a.callbackEnd-(h||(h=c("performance"))).timeOrigin,start:a.startTime-h.timeOrigin},"Bootloader Events")}),d("BootloaderEvents").onHasteResponse(function(a){d("UserTimingUtils").measureModern("Haste: "+a.source,{end:a.jsmodsEnd-(h||(h=c("performance"))).timeOrigin,properties:[["Source Detail",a.sourceDetail]],start:a.startTime-h.timeOrigin},"Bootloader Events")}));var k=function(a,b,e){a=d("BootloaderEventsPerf").computeBLData(a);var f=d("BootloaderEventsPerf").flattenData(a);c("CometBootloaderEventsTypedLoggerLite").log(babelHelpers["extends"]({},f,{},g(a.start_time),{status:b}),{weight:e})};b&&d("BootloaderEvents").onBootload(function(a){return k(a,"SUCCESS",b)});var l=1;d("BootloaderEvents").onBootloaderCallbackTimeout(function(a){return k(a,"TIMEOUT",l)});var m=1;d("BootloaderEvents").onBootloadError(function(a){return k(a,"ERROR",m)})}g.initLogging=a}),98);
__d("CometRelayEF",["Bootloader","BootloaderEvents","ClientConsistencyEventEmitter","CometRouterSSREntrypoint","cometAsyncFetch","gkx","performanceAbsoluteNow","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Map();function j(a){if(!c("gkx")("26332"))return;a=a.filter(function(a){return!i.has(a)});if(a.length===0)return;a.forEach(function(a){d("BootloaderEvents").notifyHasteResponseEFStart("relay_3d",a)});var b=(h||(h=c("performanceAbsoluteNow")))(),e=c("cometAsyncFetch")("/ajax/relay-ef/",{data:{queries:a},method:"POST"}).then(function(a){return{fetchPredictionsEnd:(h||(h=c("performanceAbsoluteNow")))(),fetchPredictionsStart:b,payload:a}});a.forEach(function(a){return i.set(a,e)})}function a(a,b){a=d("CometRouterSSREntrypoint").processRootEntryPoint(a,b);j(a.map(function(a){a=a.name;return a}))}function k(a){if(!c("gkx")("26332"))return;j(a);var b=(h||(h=c("performanceAbsoluteNow")))();a.forEach(function(a){var e=i.get(a);e&&e!==!0&&c("promiseDone")(e,function(e){var f=e.fetchPredictionsEnd,g=e.fetchPredictionsStart;e=e.payload;if(e!=null&&typeof e==="object"){var h;c("Bootloader").loadPredictedResourceMap(e.predictions[a],{onLog:function(c){return d("BootloaderEvents").notifyHasteResponseEF("relay_3d",a,{fetchPredictionsEnd:f,fetchPredictionsStart:g,fetchRsrcsStart:b,tierOne:c})}},(h=(h=e.consistency)==null?void 0:h.rev)!=null?h:null);e.consistency!=null&&c("ClientConsistencyEventEmitter").emit("newEntry",e.consistency)}});i.set(a,!0)})}function b(a,b){a=d("CometRouterSSREntrypoint").processRootEntryPoint(a,b);b=a.map(function(a){a=a.name;return a});k(b)}e={fetchPredictedResources:b,fetchPredictedResourcesForQueries:k,fetchPredictions:a,fetchPredictionsForQueries:j};g["default"]=e}),98);
__d("CometToast.react",["fbt","ix","BaseToast.react","CometPressable.react","FDSCircleButton.react","FDSText.react","fbicon","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react")),l=j.useMemo,m={pressable:{alignItems:"x6s0dn4",display:"x78zum5",flexDirection:"x1q0g3np",width:"xh8yej3",$$css:!0}};function a(a){var b=a.action,e=a.href,f=a.icon,g=a.impressionLoggingRef,j=a.message,n=a.onDismiss,o=a.target,p=a.testid;p=p===void 0?"Toast":p;p=a.truncateText;var q=p===void 0?!0:p;p=a.withoutCloseButton;p=p===void 0?!1:p;var r=babelHelpers.objectWithoutPropertiesLoose(a,["action","href","icon","impressionLoggingRef","message","onDismiss","target","testid","truncateText","withoutCloseButton"]),s=l(function(){return e!=null?{target:o,url:e}:void 0},[e,o]);return k.jsx(c("BaseToast.react"),{action:b!=null?{label:b.label,labelRenderer:function(a){return k.jsx(c("FDSText.react"),{color:"blueLink",numberOfLines:1,type:"bodyLink3",children:a})},onPress:b.onPress,testid:b.testid}:void 0,addOnStart:f,closeButton:p!==!0&&k.jsx(c("FDSCircleButton.react"),{icon:d("fbicon")._(i("478231"),12),label:h._(/*BTDS*/"Cerrar"),onPress:n,size:24,testid:void 0}),linkWrapper:r.onPress!=null||s!=null?function(a){return k.jsx(c("CometPressable.react"),babelHelpers["extends"]({},r,{expanding:!0,linkProps:s,xstyle:m.pressable,children:a}))}:void 0,message:function(a){a=a.toastMessageId;return k.jsx(c("FDSText.react"),{color:"primary",id:a,numberOfLines:q?4:void 0,type:"body3",children:j})},onDismiss:n,testid:void 0,toastRef:g})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("ContextualConfigConstants",[],(function(a,b,c,d,e,f){"use strict";a=1e3;b=", ";c={SAME:"same",NULL:"null",NNULL:"nnull",CATCH_ALL:"catch_all",EQ:"eq",NEQ:"neq",LT:"lt",LTE:"lte",GT:"gt",GTE:"gte",COR:"cor",CONTAINS:"contains",REGEX:"regex",IN:"in",NIN:"nin"};d={DENSE:"dense",MULTI_OUTPUT_RESOLVED:"multi-output-resolved",TABLE:"table"};e=[];var g=[],h=[],i={BAD_BOOLEAN_FORMAT:"Bad boolean format",BAD_CONFIG:"Bad config",BAD_CONTEXT_IDENTIFIER:"Bad context identifier",BAD_CONTEXT_VALUE:"Bad context value",BAD_MONITORED_CONTEXTS:"Bad monitored contexts",BAD_NUMBER_FORMAT:"Bad number format",BAD_OUTPUT_NAME:"Bad output name",BAD_OUTPUT_TYPE:"Bad output type",BAD_VALUE_ORDER:"Bad values order",DUPLICATE_OUTPUT_NAME:"Duplicate output name",ILLEGAL_BOOLEAN_STRATEGY:"Illegal boolean strategy",ILLEGAL_BUCKET_VALUES:"Illegal bucket values",ILLEGAL_NUMERIC_STRATEGY:"Illegal numeric strategy",ILLEGAL_STRING_STRATEGY:"Illegal string strategy",INVALID_BOOLEAN:"Invalid boolean",INVALID_FLOAT:"Invalid float",INVALID_INTEGER:"Invalid integer",INVALID_STRING:"Invalid string",INVALID_VALUE_TYPE:"Invalid value type",MISMATCH_NUMBER_OF_VALUES:"Mismatching number of values",MISSING_BUCKETS:"Missing buckets",MISSING_BUCKET_MATCH:"Missing bucket match",MISSING_BUCKET_NAME:"Missing bucket name",MISSING_BUCKET_STRATEGY:"Missing bucket strategy",MISSING_CONTEXT_IN_CONFIG:"Missing context in config",MISSING_DEFAULT_VALUE:"Missing default value",MISSING_OUTPUTS_DEFINITION:"Missing outputs field definition",MISSING_RESULTS:"Missing results",MISSING_TABLE:"Missing table",MISSING_TABLE_ITEM_BUCKET:"Missing table item bucket",MISSING_TABLE_ITEM_VALUES:"Missing table item values",MISSING_VECTOR:"Missing vector",REGEX_SYNTAX_ERROR:"Regex syntax error",REQUESTED_PARAM_NOT_FOUND:"Requested param not found",RESULTS_VECTOR_SIZE_MISMATCH:"Results vector size mismatch",UNDECLARED_OUTPUT_PARAM:"Undeclared output param",UNKNOWN_BUCKET_DEFINITION:"Unknown bucket definition",UNKNOWN_CONFIG_TYPE:"Unknown config type",UNSUPPORTED_CONFIG_VERSION:"Unsupported config version"},j=10,k=", ",l={BOOL:"BOOL",FLOAT:"FLOAT",INT:"INT",STRING:"STRING"};f.ANALYTICS_SAMPLE_RATE=a;f.BUCKET_DELIMITER=b;f.CONTEXT_BUCKET_STRATEGY=c;f.CONFIG_TYPE=d;f.EMPTY_RESOLVED_CONTEXTS=e;f.EMPTY_RESOLVED_MONITORS=g;f.EMPTY_RESULT_PARAMS=h;f.ERROR=i;f.JSON_SUB_SAMPLE_RATE=j;f.LIST_DELIMITER=k;f.TYPE=l}),66);
__d("ContextualConfigResolvedContextsUtils",[],(function(a,b,c,d,e,f){"use strict";a=function(a){var b=[];for(a of a){var c=a.bucketIndex;if(c==void 0)break;b.push(c)}return b};b=function(a){var b=[];for(a of a){var c=a.bucketName;if(c===void 0)break;b.push(c)}return b};var g=function(a){return a.name};c=function(a){return a.map(g)};d=function(a){var b=[];for(a of a){var c=a.value;if(c===void 0)break;b.push(c)}return b};f.getBucketIndices=a;f.getBucketNames=b;f.getContextNames=c;f.getContextValues=d}),66);
__d("ContextualConfigCollateExposureData",["ContextualConfigConstants","ContextualConfigResolvedContextsUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=["cfg_ver_timestamp","policy_id","version","sample_rate"],i=function(a){return a.join(d("ContextualConfigConstants").LIST_DELIMITER)},j=function(a,b){for(var c of h)b[c]!=null&&(a[c]=b[c]);b.name&&(a.config_name=b.name)},k=function(a,b){var c=b[0],e=b[1],f=b[2];b=b[3];c!=null&&(a.exception=c.message);a.result=i(e.map(function(a){return a.value}))||"INVALID";a.context=i(d("ContextualConfigResolvedContextsUtils").getContextNames(f));a.context_value=i(d("ContextualConfigResolvedContextsUtils").getContextValues(f));a.bucket_name=i(d("ContextualConfigResolvedContextsUtils").getBucketNames(f));a.monitor=i(d("ContextualConfigResolvedContextsUtils").getContextNames(b));a.monitor_value=i(d("ContextualConfigResolvedContextsUtils").getContextValues(b))};function a(a,b,c){var e={sample_rate:d("ContextualConfigConstants").ANALYTICS_SAMPLE_RATE};j(e,a);k(e,b);c&&(e.config_contents=JSON.stringify(a));return e}g["default"]=a}),98);
__d("ContextualConfigExposureEvent",["Random"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c){this.$2=a,this.$4=d("Random").random()<1/a.sample_rate,this.$3=b,this.$1=c}var b=a.prototype;b.getData=function(){return this.$2};b.log=function(a){var b=this.$2,c=this.$3,d=this.$4;a&&c(b);d&&this.$1(b);return this};b.isSampled=function(){return this.$4};return a}();g["default"]=a}),98);
__d("ContextualConfigExposureLoggerFactory",["ContextualConfigExposureEvent"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){function a(a,b){this.$2=a,this.$1=b}var b=a.prototype;b.createEvent=function(a){var b=this.$1,d=this.$2;a=new(c("ContextualConfigExposureEvent"))(a,d,b);return a};return a}();function a(a,b){return new h(a,b)}g["default"]=a}),98);
__d("MarauderLogger",["Banzai","CacheStorage","MarauderConfig"],(function(a,b,c,d,e,f){var g="client_event",h="navigation",i=18e4,j="marauder",k="marauder_last_event_time",l="marauder_last_session_id",m={},n=[],o=!1,p=null,q=null,r=null,s=0,t,u,v=!1,w=null;function a(){F().set(k,x())}b("Banzai").subscribe(b("Banzai").SHUTDOWN,a);function x(){t=t||F().get(k)||0;return t}function y(){v||(u=F().get(l),v=!0);var a=Date.now();(!u||a-i>x())&&(u=a.toString(16)+"-"+(~~(Math.random()*16777215)).toString(16),F().set(l,u));return u}function z(){return{user_agent:window.navigator.userAgent,screen_height:window.screen.availHeight,screen_width:window.screen.availWidth,density:window.screen.devicePixelRatio||null,platform:window.navigator.platform||null,locale:window.navigator.language||null}}function A(){return{locale:navigator.language}}function B(a,b,c,d,e,f,g){var h=g!=null&&g!=0?g:Date.now();t=g!=null&&g!=0?Date.now():h;g=b!=null&&b!=""?b:p;return{name:a,time:h/1e3,module:g,obj_type:d,obj_id:e,uuid:f,extra:c}}function C(a,b,c){return B("content",null,{flags:b},null,null,a,c)}function D(a){var b=window.__mrdr;if(b)for(var c in b){var d=b[c];if(d[3]!==0){delete b[c];if(c==="1")if(r!==null)c=r;else continue;a.push(C(c,1,d[1]));a.push(C(c,2,d[2]));a.push(C(c,3,d[3]))}}}function E(a,c){D(a);if(a.length===0)return;o&&a.push(B("counters",null,m));var d=b("Banzai").BASIC;c==="vital"&&(d=b("Banzai").VITAL);var e=b("MarauderConfig").gk_enabled;s===0&&e&&(a.push(B("device_status",null,A())),d={delay:5e3});c==="signal"&&(d={signal:!0});e&&Math.random()<.01&&a.push(B("device_info",null,z()));if(r!==null)for(c=0;c<a.length;c++){e=a[c];(e.uuid===null||e.uuid===void 0)&&(e.uuid=r)}e={app_ver:b("MarauderConfig").app_version,data:a,device_id:void 0,log_type:g,seq:s++,session_id:y()};c=F().get("device_id");c&&(e.device_id=c);m={};o=!1;b("Banzai").post(j,e,d)}function F(){w||(w=new(b("CacheStorage"))("localstorage",""));return w}function c(a){m[a]||(m[a]=0),m[a]++,o=!0}function G(b,a,c,d,f,g,h,i){E([B(b,a,c,d,f,g,h)],i)}function H(a,b){p!==b&&(n.push(B(h,p,{dest_module:b,source_url:q,destination_url:a})),p=b,q=a)}function d(a,b){p!==b&&(r=null,H(a,b))}function f(a,b,c){G(b?"show_module":"hide_module",a,c)}function I(a){p=a}function J(){return p}function K(a){r===null&&(r=a,a!==null&&(E(n),n=[]))}e.exports={count:c,log:G,navigateTo:d,navigateWithinSession:H,toggleModule:f,setUUID:K,setNavigationModule:I,getNavigationModule:J}}),null);
__d("ContextualConfigExposureLogger",["ContextualConfigExposureLoggerFactory","MarauderLogger"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){};b=function(a){d("MarauderLogger").log("contextual_config_exposure","",a)};e=c("ContextualConfigExposureLoggerFactory")(a,b);g["default"]=e}),98);
__d("ContextualConfigAssert",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){if(a===!1)throw new Error(b)}f["default"]=a}),66);
__d("ContextualConfigValidators",["ContextualConfigConstants"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return Array.isArray(a)};b=function(a){return typeof a==="boolean"};c=function(a){return a!=null};e=function(a){return function(b){return Object.prototype.hasOwnProperty.call(a,b)}};f=function(a){return i(a)&&a%1===0};var h=function(a){return j(a)&&a.length>0},i=function(a){return typeof a==="number"&&!isNaN(a)&&a!==Infinity&&a!==-Infinity},j=function(a){return typeof a==="string"},k=function(a){switch(a){case d("ContextualConfigConstants").TYPE.BOOL:case d("ContextualConfigConstants").TYPE.FLOAT:case d("ContextualConfigConstants").TYPE.INT:case d("ContextualConfigConstants").TYPE.STRING:return!0;default:return!1}};g.isArray=a;g.isBoolean=b;g.isDefined=c;g.isKey=e;g.isInteger=f;g.isNonEmptyString=h;g.isNumber=i;g.isString=j;g.isType=k}),98);
__d("ContextualConfigParseBoolean",["ContextualConfigConstants"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(a.toUpperCase()){case"TRUE":return!0;case"FALSE":return!1;default:throw new Error(d("ContextualConfigConstants").ERROR.BAD_BOOLEAN_FORMAT)}}g["default"]=a}),98);
__d("ContextualConfigParsePredBoolean",["ContextualConfigConstants","ContextualConfigParseBoolean"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var e;switch(b){case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.SAME:var f=c("ContextualConfigParseBoolean")(a);e=function(a){return a===f};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NULL:e=function(a){return a==null};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NNULL:e=function(a){return a!=null};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CATCH_ALL:e=function(a){return!0};break;default:throw new Error(d("ContextualConfigConstants").ERROR.ILLEGAL_BOOLEAN_STRATEGY)}return function(a){return e(a)}}g["default"]=a}),98);
__d("ContextualConfigParseFloat",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=/^[-\+]?([1-9]\d*|0)(\.\d+)?$/,j=function(a){return i.test(a)};function a(a){(h||(h=c("ContextualConfigAssert")))(j(a),d("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT);a=parseFloat(a);h(d("ContextualConfigValidators").isNumber(a),d("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT);return a}g["default"]=a}),98);
__d("ContextualConfigParseInteger",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=/^[-\+]?([1-9]\d*|0)$/,j=function(a){return i.test(a)};function a(a){(h||(h=c("ContextualConfigAssert")))(j(a),d("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT);a=parseInt(a,10);h(d("ContextualConfigValidators").isNumber(a),d("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT);return a}g["default"]=a}),98);
__d("ContextualConfigPredAssertions",["ContextualConfigAssert","ContextualConfigConstants"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a){return(h||(h=c("ContextualConfigAssert")))(a>0,d("ContextualConfigConstants").ERROR.MISMATCH_NUMBER_OF_VALUES)};b=function(a,b){return(h||(h=c("ContextualConfigAssert")))(a===b,d("ContextualConfigConstants").ERROR.MISMATCH_NUMBER_OF_VALUES)};e=function(a,b){return(h||(h=c("ContextualConfigAssert")))(a<b,d("ContextualConfigConstants").ERROR.BAD_VALUE_ORDER)};g.assertHasValues=a;g.assertNumberOfValues=b;g.assertValueOrder=e}),98);
__d("ContextualConfigParsePredNumeric",["ContextualConfigConstants","ContextualConfigParseFloat","ContextualConfigParseInteger","ContextualConfigPredAssertions","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e,f){var g=e.map(f?c("ContextualConfigParseInteger"):h||(h=c("ContextualConfigParseFloat"))),i;switch(b){case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.SAME:var j=f?c("ContextualConfigParseInteger")(a):(h||(h=c("ContextualConfigParseFloat")))(a);i=function(a){return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a===j};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NULL:i=function(a){return a==null};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NNULL:i=function(a){return a!=null};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CATCH_ALL:i=function(a){return!0};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.COR:d("ContextualConfigPredAssertions").assertNumberOfValues(g.length,2);d("ContextualConfigPredAssertions").assertValueOrder(g[0],g[1]);i=function(a){if(typeof a!=="number")return!1;return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a>=g[0]&&a<g[1]};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.LT:d("ContextualConfigPredAssertions").assertNumberOfValues(g.length,1);i=function(a){if(typeof a!=="number")return!1;return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a<g[0]};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.LTE:d("ContextualConfigPredAssertions").assertNumberOfValues(g.length,1);i=function(a){if(typeof a!=="number")return!1;return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a<=g[0]};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.EQ:d("ContextualConfigPredAssertions").assertNumberOfValues(g.length,1);i=function(a){if(typeof a!=="number")return!1;return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a===g[0]};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NEQ:d("ContextualConfigPredAssertions").assertNumberOfValues(g.length,1);i=function(a){if(typeof a!=="number")return!1;return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a!==g[0]};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.GT:d("ContextualConfigPredAssertions").assertNumberOfValues(g.length,1);i=function(a){if(typeof a!=="number")return!1;return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a>g[0]};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.GTE:d("ContextualConfigPredAssertions").assertNumberOfValues(g.length,1);i=function(a){if(typeof a!=="number")return!1;return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a>=g[0]};break;default:throw new Error(d("ContextualConfigConstants").ERROR.ILLEGAL_NUMERIC_STRATEGY)}return function(a){return i(a)}}g["default"]=a}),98);
__d("ContextualConfigParseRegExp",["ContextualConfigConstants"],(function(a,b,c,d,e,f,g){"use strict";var h=/^\/(.+)\/(.*)$/;function a(a){try{var b=a.match(h);if(b!=null)return new RegExp(b[1],b[2]);else return new RegExp(a)}catch(a){throw new Error(d("ContextualConfigConstants").ERROR.REGEX_SYNTAX_ERROR)}}g["default"]=a}),98);
__d("ContextualConfigParsePredString",["ContextualConfigConstants","ContextualConfigParseRegExp","ContextualConfigPredAssertions"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a){if(typeof a!=="string")throw new Error(d("ContextualConfigConstants").ERROR.INVALID_VALUE_TYPE);return a},i=function(a){var b=[];for(a of a)b.push(h(a));return b};function a(a,b,e){var f=i(e),g;switch(b){case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.SAME:g=function(b){return typeof b!=="string"?!1:b===a};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NULL:g=function(a){return a==null};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NNULL:g=function(a){return a!=null};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CATCH_ALL:g=function(a){return!0};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.IN:d("ContextualConfigPredAssertions").assertHasValues(f.length);g=function(a){return typeof a!=="string"?!1:f.indexOf(a)!==-1};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NIN:d("ContextualConfigPredAssertions").assertHasValues(f.length);g=function(a){return typeof a!=="string"?!1:f.indexOf(a)===-1};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CONTAINS:d("ContextualConfigPredAssertions").assertNumberOfValues(f.length,1);g=function(a){return typeof a!=="string"?!1:a.indexOf(f[0])!==-1};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.REGEX:d("ContextualConfigPredAssertions").assertNumberOfValues(f.length,1);var h=c("ContextualConfigParseRegExp")(f[0]);g=function(a){return typeof a!=="string"?!1:h.test(a)};break;default:throw new Error(d("ContextualConfigConstants").ERROR.ILLEGAL_STRING_STRATEGY)}return function(a){return g(a)}}g["default"]=a}),98);
__d("ContextualConfigParseContextBuckets",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParsePredBoolean","ContextualConfigParsePredNumeric","ContextualConfigParsePredString","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.MISSING_BUCKETS)},j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.MISSING_BUCKETS)},k=d("ContextualConfigValidators").isKey(d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY),l=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isString(a)&&k(a.toUpperCase()),d("ContextualConfigConstants").ERROR.MISSING_BUCKET_STRATEGY)},m=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.ILLEGAL_BUCKET_VALUES)},n=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isNonEmptyString(a),d("ContextualConfigConstants").ERROR.MISSING_BUCKET_NAME)},o=function(a,b){var e=b.name;n(e);var f=b.strategy;l(f);b=b.values||[];m(b);switch(a){case d("ContextualConfigConstants").TYPE.BOOL:return c("ContextualConfigParsePredBoolean")(e,f);case d("ContextualConfigConstants").TYPE.FLOAT:return c("ContextualConfigParsePredNumeric")(e,f,b,!1);case d("ContextualConfigConstants").TYPE.INT:return c("ContextualConfigParsePredNumeric")(e,f,b,!0);case d("ContextualConfigConstants").TYPE.STRING:return c("ContextualConfigParsePredString")(e,f,b);default:throw new Error(d("ContextualConfigConstants").ERROR.UNKNOWN_BUCKET_DEFINITION)}},p=function(a,b){i(b);var c=b.name;n(c);return{name:c,pred:o(a,b)}};function a(a,b){j(b);return b.map(function(b){return p(a,b)})}g["default"]=a}),98);
__d("ContextualConfigParseContexts",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseContextBuckets","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a)&&a.length>0,d("ContextualConfigConstants").ERROR.MISSING_CONTEXT_IN_CONFIG)},k=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isNonEmptyString(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},l=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isType(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},m=function(a){i(a);var b=a.name,d=a.type;a=a.buckets;k(b);l(d);return{name:b,type:d,buckets:c("ContextualConfigParseContextBuckets")(d,a)}};function a(a){j(a);return a.map(m)}g["default"]=a}),98);
__d("ContextualConfigIsEqualParams",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c+=1){var d=a[c],e=b[c];if(d.name!==e.name||d.type!==e.type)return!1}return!0}f["default"]=a}),66);
__d("ContextualConfigParseResultParamValue",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseBoolean","ContextualConfigParseFloat","ContextualConfigParseInteger","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isString(a),d("ContextualConfigConstants").ERROR.INVALID_STRING)};function a(a,b){j(b);switch(a){case d("ContextualConfigConstants").TYPE.BOOL:return c("ContextualConfigParseBoolean")(b);case d("ContextualConfigConstants").TYPE.FLOAT:return(i||(i=c("ContextualConfigParseFloat")))(b);case d("ContextualConfigConstants").TYPE.INT:return c("ContextualConfigParseInteger")(b);case d("ContextualConfigConstants").TYPE.STRING:return b;default:throw new Error(d("ContextualConfigConstants").ERROR.INVALID_VALUE_TYPE)}}g["default"]=a}),98);
__d("ContextualConfigParseResultParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParamValue","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.MISSING_RESULTS)},k=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_VALUE)},l=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isNonEmptyString(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_VALUE)},m=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isType(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_VALUE)},n=function(a,b){for(a of a)if(a.name===b)return a.type;throw new Error(d("ContextualConfigConstants").ERROR.UNDECLARED_OUTPUT_PARAM)},o=function(a){return function(b){k(b);var d=b.name;l(d);var e=n(a,d);m(e);b=(i||(i=c("ContextualConfigParseResultParamValue")))(e,b.value);return{name:d,type:e,value:b}}};function a(a,b){j(b);return b.map(o(a))}g["default"]=a}),98);
__d("ContextualConfigParseDenseResultParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigIsEqualParams","ContextualConfigParseResultParams"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a,b){return(h||(h=c("ContextualConfigAssert")))(c("ContextualConfigIsEqualParams")(a,b),d("ContextualConfigConstants").ERROR.RESULTS_VECTOR_SIZE_MISMATCH)};function a(a,b){b=c("ContextualConfigParseResultParams")(a,b.map(function(b,c){return{name:a[c].name,value:b}}));i(a,b);return b}g["default"]=a}),98);
__d("ContextualConfigParseDenseDefaults",["ContextualConfigConstants","ContextualConfigParseDenseResultParams"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){try{return c("ContextualConfigParseDenseResultParams")(a,b)}catch(a){throw new Error(d("ContextualConfigConstants").ERROR.MISSING_DEFAULT_VALUE)}}g["default"]=a}),98);
__d("ContextualConfigParseMonitors",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.BAD_MONITORED_CONTEXTS)},k=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isNonEmptyString(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},l=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isType(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},m=function(a){i(a);var b=a.name;a=a.type;k(b);l(a);return{name:b,type:a}};function a(a){j(a);return a.map(m)}g["default"]=a}),98);
__d("ContextualConfigParseOutputParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){var h,i=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.MISSING_OUTPUTS_DEFINITION)},j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isType(a),d("ContextualConfigConstants").ERROR.BAD_OUTPUT_TYPE)},k=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isNonEmptyString(a),d("ContextualConfigConstants").ERROR.BAD_OUTPUT_NAME)},l=function(a){return(h||(h=c("ContextualConfigAssert")))(m(a),d("ContextualConfigConstants").ERROR.DUPLICATE_OUTPUT_NAME)},m=function(a){var b={};for(a of a){if(b[a.name])return!1;b[a.name]=!0}return!0},n=function(a){k(a.name);j(a.type);return a};function a(a){i(a);a=a.map(n);l(a);return a}g["default"]=a}),98);
__d("ContextualConfigParseVector",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParamValue","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.MISSING_VECTOR)},k=function(a,b){return(h||(h=c("ContextualConfigAssert")))(a===b,d("ContextualConfigConstants").ERROR.RESULTS_VECTOR_SIZE_MISMATCH)},l=function(a,b){k(a.length,b.length);for(var d=0;d<a.length;d+=1){var e=a[d].type,f=b[d];(i||(i=c("ContextualConfigParseResultParamValue")))(e,f)}},m=function(a){return a.reduce(function(a,b){b=b.buckets;return a*b.length},1)};function a(a,b,c){j(c);b=m(b);var d=a.length;k(b*d,c.length);for(var e=0;e<b;e+=1){var f=e*d;l(a,c.slice(f,f+d))}return c}g["default"]=a}),98);
__d("ContextualConfigResolveContexts",["ContextualConfigConstants"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a,b){for(var c=0;c<a.length;c+=1){var d=a[c];try{if(d.pred(b))return[d.name,c]}catch(a){return null}}return null};function a(a,b,c){var e=null;a=a.map(function(a){var f=a.name,g={name:f};if(e!=null)return g;var i;c[f]!=null?i=c[f]:b[f]!=null?i=b[f]():i=null;g.value=i;if(a.buckets!=null){f=h(a.buckets,i);if(f==null){e=new Error(d("ContextualConfigConstants").ERROR.MISSING_BUCKET_MATCH);return g}a=f[0];i=f[1];g.bucketName=a;g.bucketIndex=i}return g});return[e,a]}g["default"]=a}),98);
__d("DenseContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseContexts","ContextualConfigParseDenseDefaults","ContextualConfigParseDenseResultParams","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseVector","ContextualConfigResolveContexts","ContextualConfigResolvedContextsUtils","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.BAD_CONFIG)},j=function(a){var b=[],c=1;for(var d=a.length-1;d>=0;d-=1)b.push(c),c*=a[d].buckets.length;return b.reverse()},k=function(a,b,d,e){try{b=b.slice(d,d+a.length);return[null,c("ContextualConfigParseDenseResultParams")(a,b)]}catch(a){return[a,e]}},l=function(a,b,d){try{d=d.reduce(function(b,d,e){(h||(h=c("ContextualConfigAssert")))(e<a.length,"Auxillery index out of range.");return b+a[e]*d},0);return[null,d*b]}catch(a){return[a,-1]}};a=function(){function a(a,b){i(a);this.globalContextProviders=babelHelpers["extends"]({},b);b=c("ContextualConfigParseOutputParams")(a.outputs);var d=c("ContextualConfigParseContexts")(a.contexts);this.aux=j(d);this.contexts=d;this.defaults=c("ContextualConfigParseDenseDefaults")(b,a.vectorDefaults);this.monitors=a.monitors!=null?c("ContextualConfigParseMonitors")(a.monitors):[];this.outputs=b;this.vector=c("ContextualConfigParseVector")(b,d,a.vector)}var b=a.prototype;b.resolve=function(a){try{return this.unsafeResolve(a)}catch(a){return[a,this.defaults,d("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]}};b.unsafeResolve=function(a){var b=this.aux,e=this.globalContextProviders,f=this.contexts,g=this.defaults,h=this.monitors,i=this.outputs,j=this.vector;f=c("ContextualConfigResolveContexts")(f,e,a);var m=f[0];f=f[1];if(m!=null)return[m,g,f,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS];m=l(b,i.length,d("ContextualConfigResolvedContextsUtils").getBucketIndices(f));b=m[0];m=m[1];if(b!=null)return[b,g,f,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS];b=k(i,j,m,g);i=b[0];j=b[1];if(i!=null)return[i,j,f,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS];m=c("ContextualConfigResolveContexts")(h,e,a);g=m[0];b=m[1];return g!=null?[g,j,f,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]:[null,j,f,b]};return a}();g["default"]=a}),98);
__d("MultiOutputResolvedContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseResultParams","ContextualConfigResolveContexts","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.BAD_CONFIG)};a=function(){function a(a,b){i(a);this.globalContextProviders=babelHelpers["extends"]({},b);b=c("ContextualConfigParseOutputParams")(a.outputs);this.monitors=a.monitors!=null?c("ContextualConfigParseMonitors")(a.monitors):[];this.values=c("ContextualConfigParseResultParams")(b,a.values)}var b=a.prototype;b.resolve=function(a){try{return this.unsafeResolve(a)}catch(a){return[a,this.values,d("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]}};b.unsafeResolve=function(a){var b=this.globalContextProviders,e=this.monitors,f=this.values;e=c("ContextualConfigResolveContexts")(e,b,a);b=e[0];a=e[1];return b!=null?[b,f,d("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]:[null,f,d("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,a]};return a}();g["default"]=a}),98);
__d("ContextualConfigMergePartialResultParams",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c={};for(b of b)c[b.name]=b;b=[];for(a of a){var d=c[a.name];b.push(d!=null&&d.name===a.name&&d.type===a.type?d:a)}return b}f["default"]=a}),66);
__d("ContextualConfigParseDefaults",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigIsEqualParams","ContextualConfigParseResultParams"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a,b){return(h||(h=c("ContextualConfigAssert")))(c("ContextualConfigIsEqualParams")(a,b),d("ContextualConfigConstants").ERROR.MISSING_DEFAULT_VALUE)};function a(a,b){b=c("ContextualConfigParseResultParams")(a,b);i(a,b);return b}g["default"]=a}),98);
__d("ContextualConfigParseTable",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParams","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.MISSING_TABLE)},j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.MISSING_TABLE)},k=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isNonEmptyString(a),d("ContextualConfigConstants").ERROR.MISSING_TABLE_ITEM_BUCKET)},l=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.MISSING_TABLE_ITEM_VALUES)},m=function(a,b){j(b);var d=b.bucket;b=b.values;k(d);l(b);return{bucket:d,values:c("ContextualConfigParseResultParams")(a,b)}};function a(a,b){i(b);return b.reduce(function(b,c){c=m(a,c);b[c.bucket]=c.values;return b},{})}g["default"]=a}),98);
__d("TableContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigMergePartialResultParams","ContextualConfigParseContexts","ContextualConfigParseDefaults","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseTable","ContextualConfigResolveContexts","ContextualConfigResolvedContextsUtils","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=[],j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.BAD_CONFIG)};a=function(){function a(a,b){j(a);this.globalContextProviders=babelHelpers["extends"]({},b);b=c("ContextualConfigParseOutputParams")(a.outputs);this.contexts=c("ContextualConfigParseContexts")(a.contexts);this.defaults=c("ContextualConfigParseDefaults")(b,a.defaults);this.monitors=a.monitors!=null?c("ContextualConfigParseMonitors")(a.monitors):[];this.table=c("ContextualConfigParseTable")(b,a.table)}var b=a.prototype;b.resolve=function(a){try{return this.unsafeResolve(a)}catch(a){return[a,this.defaults,d("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]}};b.unsafeResolve=function(a){var b=this.globalContextProviders,e=this.contexts,f=this.defaults,g=this.monitors,h=this.table;e=c("ContextualConfigResolveContexts")(e,b,a);var j=e[0];e=e[1];if(j!=null)return[j,f,e,[]];j=d("ContextualConfigResolvedContextsUtils").getBucketNames(e).join(d("ContextualConfigConstants").BUCKET_DELIMITER);h=h[j]||i;j=c("ContextualConfigMergePartialResultParams")(f,h);f=c("ContextualConfigResolveContexts")(g,b,a);h=f[0];g=f[1];return h!=null?[h,j,e,[]]:[null,j,e,g]};return a}();g["default"]=a}),98);
__d("ContextualConfigParseConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators","DenseContextualConfig","MultiOutputResolvedContextualConfig","TableContextualConfig"],(function(a,b,c,d,e,f,g){"use strict";var h,i=[1],j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a)&&d("ContextualConfigValidators").isDefined(a.version),d("ContextualConfigConstants").ERROR.BAD_CONFIG)},k=function(a){return(h||(h=c("ContextualConfigAssert")))(i.indexOf(a)!==-1,d("ContextualConfigConstants").ERROR.UNSUPPORTED_CONFIG_VERSION)};function a(a,b){j(a);k(a.version);switch(a.cctype){case d("ContextualConfigConstants").CONFIG_TYPE.DENSE:return new(c("DenseContextualConfig"))(a,b);case d("ContextualConfigConstants").CONFIG_TYPE.MULTI_OUTPUT_RESOLVED:return new(c("MultiOutputResolvedContextualConfig"))(a,b);case d("ContextualConfigConstants").CONFIG_TYPE.TABLE:return new(c("TableContextualConfig"))(a,b);default:throw new Error(d("ContextualConfigConstants").ERROR.UNKNOWN_CONFIG_TYPE)}}g["default"]=a}),98);
__d("ContextualConfigWarn",[],(function(a,b,c,d,e,f){"use strict";function a(a){}f["default"]=a}),66);
__d("ContextualConfigResult",["ContextualConfigConstants","ContextualConfigWarn"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$1=a.reduce(function(a,b){var c=b.name;b=b.value;a[c]=b;return a},{}),this.$2=a}var b=a.prototype;b.get=function(a,b){try{a=this.$1[a];if(typeof a!==typeof b){c("ContextualConfigWarn")(d("ContextualConfigConstants").ERROR.REQUESTED_PARAM_NOT_FOUND);return b}return a}catch(a){c("ContextualConfigWarn")(a.message);return b}};b.getParams=function(){return this.$2};return a}();g["default"]=a}),98);
__d("ErrorContextualConfig",["ContextualConfigConstants"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.error=a}var b=a.prototype;b.resolve=function(a){return[this.error,d("ContextualConfigConstants").EMPTY_RESULT_PARAMS,d("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]};return a}();g["default"]=a}),98);
__d("ContextualConfig",["ContextualConfigCollateExposureData","ContextualConfigConstants","ContextualConfigExposureLogger","ContextualConfigParseConfig","ContextualConfigResult","ErrorContextualConfig","Random"],(function(a,b,c,d,e,f,g){"use strict";var h=1/d("ContextualConfigConstants").JSON_SUB_SAMPLE_RATE,i=1;a=function(){function a(a,b){b===void 0&&(b={}),this.isDebugLoggingEnabled=!1,this.$3=!1,this.$4=a,this.$2=b}var b=a.prototype;b.$5=function(){if(this.$1)return this.$1;var a=this.$2,b=this.$4;try{b=c("ContextualConfigParseConfig")(b,a)}catch(a){b=new(c("ErrorContextualConfig"))(a)}this.$1=b;return b};b.$6=function(a){var b=this.isDebugLoggingEnabled,e=this.$4,f=this.$3;f=!f&&d("Random").random()<h;f&&(this.$3=!0);e=c("ContextualConfigCollateExposureData")(e,a,f);a=c("ContextualConfigExposureLogger").createEvent(e);a.log(b)};b.resolve=function(a){a===void 0&&(a={});var b=this.$1||this.$5();b=b.resolve(a);this.$6(b);return new(c("ContextualConfigResult"))(b[i])};return a}();g["default"]=a}),98);
__d("DgwClientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1755537");b=d("FalcoLoggerInternal").create("dgw_client",a);e=b;g["default"]=e}),98);
__d("DGWLoggingContext",["$InternalEnum","DgwClientFalcoEvent","ODS","Random"],(function(a,b,c,d,e,f,g){"use strict";var h;a="dgw_client";var i=b("$InternalEnum")({STREAM_GROUP_COMPONENT:"WebStreamGroup",GROUPED_STREAM_COMPONENT:"GroupedWebStream",WEBSOCKET_TRANSPORT_COMPONENT:"WebSocketTransport",ACK_MANAGER_COMPONENT:"WebStreamAckManager",CODEC_COMPONENT:"WebCodec",RAW_CLIENT:"RAWDGWClient",PINGER:"DGWPinger"}),j={VERBOSE:-1,INFO:0,WARNING:1,ERROR:2,FATAL:3};function k(a){switch(a){case i.GROUPED_STREAM_COMPONENT:case i.ACK_MANAGER_COMPONENT:return!0;default:return!1}}e=function(){function a(a,b,c,d,e,f,g){f===void 0&&(f=!1),g===void 0&&(g=!1),this.$5=""+a,this.$1=b,this.$4=c,this.$3=d,this.$6=e,this.$2=f,this.$7=g}a.bumpODSKey=function(a,b,c){c===void 0&&(c=1);if(!d("Random").coinflip(c))return;a=a+"."+b;(h||(h=d("ODS"))).bumpEntityKey(3589,"dgw_web_client",a,c)};var b=a.prototype;b.bumpODSKey=function(a,b,c){c===void 0&&(c=1);if(!d("Random").coinflip(c))return;a=this.$4+"."+a+"."+b;(h||(h=d("ODS"))).bumpEntityKey(3589,"dgw_web_client",a,c)};b.logEvent=function(a,b,c,d,e){d===void 0&&(d=!1),this.$2||this.$8(a,b,null,j.INFO,c,d,e)};b.$8=function(a,b,d,e,f,g,h){var i=this;g===void 0&&(g=!1);if(g&&!this.$7)return;(k(a)&&this.$1!=null||!k(a)&&this.$6!=null)&&c("DgwClientFalcoEvent").log(function(){return{event:b,logging_id:h!=null?h:i.$1,dgw_version:i.$5,message:d,severity:e,uuid:i.$3,dgw_component:a,extra_info:f,destination_tier:i.$4,sg_transport_id:i.$6,source:2}})};b.logError=function(a,b,c,d,e,f){e===void 0&&(e=!1),this.$2||this.$8(a,b,c,j.ERROR,d,e,f)};b.logWarn=function(a,b,c,d,e){e===void 0&&(e=!1),this.$2||this.$8(a,b,c,j.WARNING,d,e)};return a}();g.DGW_MODULE=a;g.DGWLoggingComponent=i;g.DGWLoggingContext=e}),98);
__d("DGWAckManager",["DGWLoggingContext","Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(){var b=a.prototype;b.stopTracking=function(a){window.clearTimeout(this.$1),this.$3(a)};function a(a,b,c){var d=this;this.$3=c;this.sendId=a;this.$2=b;this.handleAckReceived=function(){d.stopTracking(!0)};this.$1=window.setTimeout(function(){d.stopTracking(!1)},b)}return a}();a=function(){function a(a){this.$1=new Map(),this.$2=a}var c=a.prototype;c.waitForAck=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){this.$2.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_expected");var e=this.$1;try{var f=(yield new(h||(h=b("Promise")))(function(b,d){e.set(a,new i(a,c,b))}));f===!0?this.$2.logEvent(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Received ACK","sendId:"+a,!0):(this.$2.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_timeout"),this.$2.logWarn(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ACK timeout","Request "+a+" timed out after "+c+"ms"));e["delete"](a);return f}catch(b){this.$2.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_error");e["delete"](a);throw b}});function c(b,c){return a.apply(this,arguments)}return c}();c.handleAckReceived=function(a){this.$2.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_received");var b=this.$1.get(a);if(b===void 0){this.$2.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_received.not_tracked");this.$2.logWarn(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"untracked ACK","Received ACK for ackId "+a+" which was not being tracked");return}b.handleAckReceived()};c.clearPendingAcks=function(){var a=this;this.$2.logEvent(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Clearing pending acks","ACKs cleared size: "+this.$1.size);this.$1.forEach(function(b,c,e){a.$2.logEvent(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Clearing pending ACK with ackId "+b.sendId,null,!0),b.stopTracking(!1),e["delete"](c)})};return a}();g.DGWAckManager=a}),98);
__d("DGWAuth",["$InternalEnum","err"],(function(a,b,c,d,e,f,g){"use strict";var h=b("$InternalEnum")({TEST:"0:0",FACEBOOK:"1:0",INTERNALFB:"2:0",OCULUS:"3:0",ENTERPRISEFB:"7:0",RECRUITINGFB:"8:0",INSTAGRAM:"6:0",HORIZON_WEB:"12:0",SPARK_WEB:"13:0",ABRA:"15:0"});function a(a){if(a==="TEST")return h.TEST;else if(a==="FACEBOOK")return h.FACEBOOK;else if(a==="INTERNALFB")return h.INTERNALFB;else if(a==="OCULUS")return h.OCULUS;else if(a==="ENTERPRISEFB")return h.ENTERPRISEFB;else if(a==="RECRUITINGFB")return h.RECRUITINGFB;else if(a==="INSTAGRAM")return h.INSTAGRAM;else if(a==="HORIZON_WEB")return h.HORIZON_WEB;else if(a==="SPARK_WEB")return h.SPARK_WEB;else if(a==="ABRA")return h.ABRA;else throw c("err")("failed to convert string ("+a+") to DGWAuth Type")}function d(a){if(a===h.FACEBOOK)return"FACEBOOK";else if(a===h.INTERNALFB)return"INTERNALFB";else if(a===h.OCULUS)return"OCULUS";else if(a===h.ENTERPRISEFB)return"ENTERPRISEFB";else if(a===h.RECRUITINGFB)return"RECRUITINGFB";else if(a===h.INSTAGRAM)return"INSTAGRAM";else if(a===h.HORIZON_WEB)return"HORIZON_WEB";else if(a===h.SPARK_WEB)return"SPARK_WEB";else if(a===h.ABRA)return"ABRA";else return"TEST"}g.DGWAuth=h;g.fromStringToDGWAuth=a;g.fromDGWAuthToString=d}),98);
__d("DGWStream",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";var g=b("$InternalEnum").Mirrored(["ABNORMAL_CLOSURE","GOING_AWAY","SERVER_INTERNAL_ERROR","PREMATURE_CLOSE","UNKNOWN_ERROR","KEEPALIVE_TIMEOUT","TRANSPORT_CLOSED_BEFORE_STREAM_INIT","TRANSPORT_ESTABLISHMENT_ERROR","TRANSPORT_ESTABLISHMENT_TIMEOUT","ESTABLISHMENT_TIMEOUT","UNAUTHENTICATED","UNAUTHORIZED","REJECTED","BAD_REQUEST","DGW_SERVER_ERROR","ESTABLISHMENT_ERROR"]);function a(a){switch(a){case g.UNAUTHENTICATED:case g.UNAUTHORIZED:case g.REJECTED:case g.BAD_REQUEST:case g.UNKNOWN_ERROR:case g.SERVER_INTERNAL_ERROR:return!1;default:return!0}}f.StreamError=g;f.isRetryableError=a}),66);
__d("DGWCppBridge",[],(function(l,m,n,o,p,q){var r=function(){var l=typeof document!=="undefined"&&document.currentScript?document.currentScript.src:void 0;return function(m){m=m||{};var m=typeof m!=="undefined"?m:{},n=function(){function m(){}function n(l,m){return function(){l.apply(m,arguments)}}function l(m){if(!(this instanceof l))throw new TypeError("Promises must be constructed via new");if(typeof m!=="function")throw new TypeError("not a function");this._state=0;this._handled=!1;this._value=void 0;this._deferreds=[];t(m,this)}function o(m,n){while(m._state===3)m=m._value;if(m._state===0){m._deferreds.push(n);return}m._handled=!0;l._immediateFn(function(){var l=m._state===1?n.onFulfilled:n.onRejected;if(l===null){(m._state===1?p:q)(n.promise,m._value);return}var o;try{o=l(m._value)}catch(l){q(n.promise,l);return}p(n.promise,o)})}function p(m,o){try{if(o===m)throw new TypeError("A promise cannot be resolved with itself.");if(o&&(typeof o==="object"||typeof o==="function")){var p=o.then;if(o instanceof l){m._state=3;m._value=o;r(m);return}else if(typeof p==="function"){t(n(p,o),m);return}}m._state=1;m._value=o;r(m)}catch(l){q(m,l)}}function q(l,m){l._state=2,l._value=m,r(l)}function r(m){m._state===2&&m._deferreds.length===0&&l._immediateFn(function(){m._handled||l._unhandledRejectionFn(m._value)});for(var n=0,p=m._deferreds.length;n<p;n++)o(m,m._deferreds[n]);m._deferreds=null}function s(l,m,n){this.onFulfilled=typeof l==="function"?l:null,this.onRejected=typeof m==="function"?m:null,this.promise=n}function t(l,m){var n=!1;try{l(function(l){if(n)return;n=!0;p(m,l)},function(l){if(n)return;n=!0;q(m,l)})}catch(l){if(n)return;n=!0;q(m,l)}}l.prototype["catch"]=function(l){return this.then(null,l)};l.prototype.then=function(l,n){var p=new this.constructor(m);o(this,new s(l,n,p));return p};l.all=function(m){return new l(function(l,n){if(!Array.isArray(m))return n(new TypeError("Promise.all accepts an array"));var o=Array.prototype.slice.call(m);if(o.length===0)return l([]);var p=o.length;function q(m,r){try{if(r&&(typeof r==="object"||typeof r==="function")){var s=r.then;if(typeof s==="function"){s.call(r,function(l){q(m,l)},n);return}}o[m]=r;--p===0&&l(o)}catch(l){n(l)}}for(var r=0;r<o.length;r++)q(r,o[r])})};l.resolve=function(m){return m&&typeof m==="object"&&m.constructor===l?m:new l(function(l){l(m)})};l.reject=function(m){return new l(function(l,n){n(m)})};l.race=function(m){return new l(function(n,o){if(!Array.isArray(m))return o(new TypeError("Promise.race accepts an array"));for(var p=0,q=m.length;p<q;p++)l.resolve(m[p]).then(n,o)})};l._immediateFn=typeof setImmediate==="function"&&function(l){setImmediate(l)}||function(l){setTimeout(l,0)};l._unhandledRejectionFn=function(l){typeof console!=="undefined"&&console};return l}(),o,s;m.ready=new n(function(l,m){o=l,s=m});var t={},u;for(u in m)Object.prototype.hasOwnProperty.call(m,u)&&(t[u]=m[u]);var v=[];(function(l,m){throw m});var w=!0,x=!1,y="";function z(l){return m.locateFile?m.locateFile(l,y):y+l}var A;(w||x)&&(x?y=self.location.href:typeof document!=="undefined"&&document.currentScript&&(y=document.currentScript.src),l&&(y=l),y.indexOf("blob:")!==0?y=y.substr(0,y.lastIndexOf("/")+1):y="",(function(l){try{var m=new XMLHttpRequest();m.open("GET",l,!1);m.send(null);return m.responseText}catch(n){m=ga(l);if(m)return fa(m);throw n}},x&&(A=function(l){try{var m=new XMLHttpRequest();m.open("GET",l,!1);m.responseType="arraybuffer";m.send(null);return new Uint8Array(m.response)}catch(n){m=ga(l);if(m)return m;throw n}}),function(l,m,n){var o=new XMLHttpRequest();o.open("GET",l,!0);o.responseType="arraybuffer";o.onload=function(){if(o.status==200||o.status==0&&o.response){m(o.response);return}var p=ga(l);if(p){m(p.buffer);return}n()};o.onerror=n;o.send(null)}),function(l){document.title=l});m.print||emptyFunction.bind(console);var B=m.printErr||emptyFunction.bind(console);for(u in t)Object.prototype.hasOwnProperty.call(t,u)&&(m[u]=t[u]);t=null;m.arguments&&(v=m.arguments);m.thisProgram&&m.thisProgram;m.quit&&m.quit;var C;m.wasmBinary&&(C=m.wasmBinary);m.noExitRuntime||!0;var D={Memory:function(l){this.buffer=new ArrayBuffer(l.initial*65536)},Module:function(l){},Instance:function(l,m){this.exports=function(l){function m(l){l.set=function(l,m){this[l]=m};l.get=function(l){return this[l]};return l}var n,o=new Uint8Array(123);for(var p=25;p>=0;--p)o[48+p]=52+p,o[65+p]=p,o[97+p]=26+p;o[43]=62;o[47]=63;function q(m,n,p){var q,r,l=0,s=n,t=p.length;n=n+(t*3>>2)-(p[t-2]=="=")-(p[t-1]=="=");for(;l<t;l+=4)q=o[p.charCodeAt(l+1)],r=o[p.charCodeAt(l+2)],m[s++]=o[p.charCodeAt(l)]<<2|q>>4,s<n&&(m[s++]=q<<4|r>>2),s<n&&(m[s++]=r<<6|o[p.charCodeAt(l+3)])}function r(l){q(n,1024,"U3Q5dHlwZV9pbmZvAAAAAOAEAAAABAAATjEwX19jeHhhYml2MTE2X19zaGltX3R5cGVfaW5mb0UAAAAACAUAABgEAAAQBAAATjEwX19jeHhhYml2MTE3X19jbGFzc190eXBlX2luZm9FAAAACAUAAEgEAAA8BAAATjEwX19jeHhhYml2MTE3X19wYmFzZV90eXBlX2luZm9FAAAACAUAAHgEAAA8BAAATjEwX19jeHhhYml2MTE5X19wb2ludGVyX3R5cGVfaW5mb0UACAUAAKgEAACcBAAAAAAAAGwEAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAAAAABQBQAAAQAAAAkAAAADAAAABAAAAAUAAAAKAAAACwAAAAwAAABOMTBfX2N4eGFiaXYxMjBfX3NpX2NsYXNzX3R5cGVfaW5mb0UAAAAACAUAACgFAABsBA=="),q(n,1372,"gAkQ")}function s(l){var o=l.a,p=o.buffer;o.grow=xa;var q=new Int8Array(p),s=new Int16Array(p),t=new Int32Array(p),u=new Uint8Array(p),v=new Uint16Array(p),w=new Uint32Array(p);new Float32Array(p);new Float64Array(p);var x=Math.imul;Math.fround;Math.abs;var y=Math.clz32;Math.min;Math.max;Math.floor;Math.ceil;Math.trunc;Math.sqrt;l.abort;NaN;Infinity;var z=l.b,A=1051008,B;function C(o,p,l,r,m,n){o=o|0;p=p|0;l=l|0;r=r|0;m=m|0;n=n|0;var y=0,z=0,B;y=A-80|0;A=y;t[y+72>>2]=o;t[y+68>>2]=p;t[y+64>>2]=l;t[y+60>>2]=r;t[y+56>>2]=m;t[y+52>>2]=n;a:{if(t[y+52>>2]?!t[y+56>>2]|(!t[y+72>>2]|!t[y+68>>2]|(!t[y+64>>2]|!t[y+60>>2])):1){t[y+76>>2]=5;break a}t[t[y+64>>2]>>2]=0;t[t[y+60>>2]>>2]=0;p=t[y+68>>2];l=t[y+56>>2];r=t[y+52>>2];o=A+-64|0;A=o;t[o+56>>2]=t[y+72>>2];t[o+52>>2]=p;t[o+48>>2]=l;t[o+44>>2]=r;t[o+40>>2]=0;t[o+36>>2]=t[o+56>>2];b:{c:{d:{while(1){if(!t[o+52>>2])break c;t[o+32>>2]=t[o+36>>2];q[o+31|0]=u[t[o+36>>2]];t[o+52>>2]=t[o+52>>2]-1;t[o+36>>2]=t[o+36>>2]+1;if(u[o+31|0]!=10?u[o+31|0]==2|u[o+31|0]==4|u[o+31|0]==9:1){t[o+40>>2]=t[o+40>>2]+1;continue}t[o+24>>2]=1;if(V(u[o+31|0])&1){z=o,B=X(u[o+31|0])&1,q[z+23|0]=B;t[o+16>>2]=q[o+23|0]&1?1:2;if(w[o+52>>2]<w[o+16>>2]){t[t[o+48>>2]>>2]=t[o+32>>2];t[t[o+44>>2]>>2]=t[o+52>>2]+t[o+24>>2];break b}t[o+52>>2]=t[o+52>>2]-t[o+16>>2];t[o+24>>2]=t[o+16>>2]+t[o+24>>2];t[o+36>>2]=t[o+16>>2]+t[o+36>>2];if(!(u[o+31|0]!=14?u[o+31|0]!=8:0)){t[o+40>>2]=t[o+40>>2]+1;continue}}if(w[o+52>>2]<3)break d;t[o+12>>2]=0;p=t[o+36>>2];l=u[p|0]|u[p+1|0]<<8;q[o+12|0]=l;q[o+13|0]=l>>>8;q[o+14|0]=u[p+2|0];t[o+52>>2]=t[o+52>>2]-3;t[o+24>>2]=t[o+24>>2]+3;t[o+36>>2]=t[o+36>>2]+3;if(w[o+12>>2]<=w[o+52>>2]){t[o+40>>2]=t[o+40>>2]+1;t[o+36>>2]=t[o+12>>2]+t[o+36>>2];t[o+52>>2]=t[o+52>>2]-t[o+12>>2];continue}break}t[t[o+48>>2]>>2]=t[o+32>>2];t[t[o+44>>2]>>2]=t[o+52>>2]+t[o+24>>2];break b}t[t[o+48>>2]>>2]=t[o+32>>2];t[t[o+44>>2]>>2]=t[o+52>>2]+t[o+24>>2];break b}t[t[o+44>>2]>>2]=t[o+52>>2]}t[o+60>>2]=t[o+40>>2];A=o- -64|0;t[y+48>>2]=t[o+60>>2];if(!t[y+48>>2]){t[y+76>>2]=0;break a}z=y,B=D(x(t[y+48>>2],20)),t[z+44>>2]=B;if(!t[y+44>>2]){t[y+76>>2]=3;break a}t[y+40>>2]=t[y+44>>2];t[y+36>>2]=t[y+72>>2];t[y+32>>2]=t[y+68>>2]-t[t[y+52>>2]>>2];t[y+28>>2]=0;while(1){if(w[y+28>>2]<w[y+48>>2]){if(w[y+32>>2]<1){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=1;break a}q[y+27|0]=u[t[y+36>>2]];t[y+36>>2]=t[y+36>>2]+1;t[y+32>>2]=t[y+32>>2]-1;e:{if(!u[y+27|0]|u[y+27|0]==1|(u[y+27|0]==2|u[y+27|0]==3)|(u[y+27|0]==4|u[y+27|0]==9|u[y+27|0]==10))break e;if(V(u[y+27|0])&1)break e;O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=6;break a}o=t[y+40>>2];t[o>>2]=u[y+27|0]&15|t[o>>2]&-16;f:{if(u[y+27|0]!=10?u[y+27|0]==2|u[y+27|0]==4|u[y+27|0]==9:1){o=t[y+40>>2];t[o>>2]=t[o>>2]&-268435441;t[y+40>>2]=t[y+40>>2]+20;break f}if(V(u[y+27|0])&1){o=A-48|0;A=o;t[o+40>>2]=t[y+40>>2];t[o+36>>2]=y+36;t[o+32>>2]=y+32;g:{if(!(V(t[t[o+40>>2]>>2]&15)&1)){t[o+44>>2]=1;break g}z=o,B=X(t[t[o+40>>2]>>2]&15)&1,q[z+31|0]=B;t[o+24>>2]=q[o+31|0]&1?1:2;if(w[t[o+32>>2]>>2]<w[o+24>>2]){t[o+44>>2]=1;break g}ba(t[o+40>>2]+4|0,t[t[o+36>>2]>>2],t[o+24>>2]);p=t[o+36>>2];t[p>>2]=t[o+24>>2]+t[p>>2];p=t[o+32>>2];t[p>>2]=t[p>>2]-t[o+24>>2];if((t[t[o+40>>2]>>2]&15)==8){p=t[o+40>>2];t[p>>2]=t[p>>2]&-268435441;t[o+44>>2]=0;break g}if((t[t[o+40>>2]>>2]&15)==14){p=t[o+40>>2];t[p>>2]=t[p>>2]&-268435441;t[o+44>>2]=0;break g}if(w[t[o+32>>2]>>2]<3){t[o+44>>2]=11;break g}t[o+20>>2]=0;p=t[t[o+36>>2]>>2];l=u[p|0]|u[p+1|0]<<8;q[o+20|0]=l;q[o+21|0]=l>>>8;q[o+22|0]=u[p+2|0];p=t[o+36>>2];t[p>>2]=t[p>>2]+3;p=t[o+32>>2];t[p>>2]=t[p>>2]-3;p=t[o+40>>2];t[p>>2]=t[p>>2]&-268435441|(t[o+20>>2]&16777215)<<4;if(w[t[o+32>>2]>>2]<w[o+20>>2]){t[o+44>>2]=11;break g}if((t[t[o+40>>2]>>2]&15)==15){t[t[o+40>>2]+12>>2]=t[o+20>>2];p=D(t[o+20>>2]);t[t[o+40>>2]+8>>2]=p;if(!t[t[o+40>>2]+8>>2]){t[o+44>>2]=3;break g}ba(t[t[o+40>>2]+8>>2],t[t[o+36>>2]>>2],t[o+20>>2]);p=t[o+36>>2];t[p>>2]=t[o+20>>2]+t[p>>2];p=t[o+32>>2];t[p>>2]=t[p>>2]-t[o+20>>2];t[o+44>>2]=0;break g}if((t[t[o+40>>2]>>2]&15)==5){t[t[o+40>>2]+12>>2]=t[o+20>>2];p=D(t[o+20>>2]);t[t[o+40>>2]+8>>2]=p;if(!t[t[o+40>>2]+8>>2]){t[o+44>>2]=3;break g}ba(t[t[o+40>>2]+8>>2],t[t[o+36>>2]>>2],t[o+20>>2]);p=t[o+36>>2];t[p>>2]=t[o+20>>2]+t[p>>2];p=t[o+32>>2];t[p>>2]=t[p>>2]-t[o+20>>2];t[o+44>>2]=0;break g}h:{if(!((t[t[o+40>>2]>>2]&15)!=6?(t[t[o+40>>2]>>2]&15)!=7:0)){z=o,B=Q(t[o+36>>2],t[o+32>>2],o+19|0,o+18|0),t[z+12>>2]=B;if(t[o+12>>2]){t[o+44>>2]=t[o+12>>2];break g}break h}if(!((t[t[o+40>>2]>>2]&15)!=13?(t[t[o+40>>2]>>2]&15)!=12:0)){l=t[o+32>>2];p=A-32|0;t[p+24>>2]=t[o+36>>2];t[p+20>>2]=l;t[p+16>>2]=o+19;t[p+12>>2]=o+16;s[p+10>>1]=0;i:{if(w[t[p+20>>2]>>2]<2){t[p+28>>2]=1;break i}l=t[t[p+24>>2]>>2];l=u[l|0]|u[l+1|0]<<8;q[p+10|0]=l;q[p+11|0]=l>>>8;l=t[p+24>>2];t[l>>2]=t[l>>2]+2;l=t[p+20>>2];t[l>>2]=t[l>>2]-2;q[t[p+16>>2]]=(v[p+10>>1]&32768)==32768;s[t[p+12>>2]>>1]=v[p+10>>1]&32767;t[p+28>>2]=0}t[o+12>>2]=t[p+28>>2];if(t[o+12>>2]){t[o+44>>2]=t[o+12>>2];break g}}}if((t[t[o+40>>2]>>2]&15)==12){p=t[o+40>>2];s[p+8>>1]=s[p+8>>1]&1|v[o+16>>1]<<1;t[o+44>>2]=0;break g}if((t[t[o+40>>2]>>2]&15)==7){p=t[o+40>>2];q[p+8|0]=q[p+8|0]&1|u[o+18|0]<<1;t[o+44>>2]=0;break g}if((t[t[o+40>>2]>>2]&15)==13){l=t[o+32>>2];r=t[o+20>>2];m=t[o+40>>2]+12|0;n=t[o+40>>2];p=A-32|0;A=p;t[p+24>>2]=t[o+36>>2];t[p+20>>2]=l;t[p+16>>2]=r;t[p+12>>2]=m;t[p+8>>2]=n+16;j:{if(w[p+16>>2]<2){t[p+28>>2]=9;break j}t[t[p+8>>2]>>2]=t[p+16>>2]-2;if(w[t[p+20>>2]>>2]<w[t[p+8>>2]>>2]){t[p+28>>2]=1;break j}l=D(t[t[p+8>>2]>>2]);t[t[p+12>>2]>>2]=l;if(!t[t[p+12>>2]>>2]){t[p+28>>2]=3;break j}ba(t[t[p+12>>2]>>2],t[t[p+24>>2]>>2],t[t[p+8>>2]>>2]);l=t[p+24>>2];t[l>>2]=t[t[p+8>>2]>>2]+t[l>>2];l=t[p+20>>2];t[l>>2]=t[l>>2]-t[t[p+8>>2]>>2];t[p+28>>2]=0}A=p+32|0;t[o+8>>2]=t[p+28>>2];if(t[o+8>>2]){t[o+44>>2]=t[o+8>>2];break g}p=t[o+40>>2];s[p+8>>1]=q[o+19|0]&1|v[p+8>>1]&65534;p=t[o+40>>2];s[p+8>>1]=s[p+8>>1]&1|v[o+16>>1]<<1;t[o+44>>2]=0;break g}if((t[t[o+40>>2]>>2]&15)==6){z=o,B=M(t[o+36>>2],t[o+32>>2],t[o+20>>2],t[o+40>>2]+12|0,t[o+40>>2]+16|0),t[z+4>>2]=B;if(t[o+4>>2]){t[o+44>>2]=t[o+4>>2];break g}p=t[o+40>>2];q[p+8|0]=q[o+19|0]&1|u[p+8|0]&254;p=t[o+40>>2];q[p+8|0]=q[p+8|0]&1|u[o+18|0]<<1;t[o+44>>2]=0;break g}t[o+44>>2]=1}A=o+48|0;t[y+20>>2]=t[o+44>>2];if(!t[y+20>>2]){t[y+40>>2]=t[y+40>>2]+20;break f}O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=t[y+20>>2];break a}t[y+16>>2]=0;if(w[y+32>>2]<3){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=1;break a}o=t[y+36>>2];p=u[o|0]|u[o+1|0]<<8;q[y+16|0]=p;q[y+17|0]=p>>>8;q[y+18|0]=u[o+2|0];t[y+36>>2]=t[y+36>>2]+3;t[y+32>>2]=t[y+32>>2]-3;if(!(t[y+16>>2]==1|u[y+27|0]!=1)){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=7;break a}o=t[y+40>>2];t[o>>2]=t[o>>2]&-268435441|(t[y+16>>2]&16777215)<<4;if(u[y+27|0]==3){if(t[y+16>>2]!=1){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=10;break a}q[y+15|0]=0;if(w[y+32>>2]<1){J(t[y+44>>2]);t[y+76>>2]=1;break a}q[y+15|0]=u[t[y+36>>2]];t[y+36>>2]=t[y+36>>2]+1;t[y+32>>2]=t[y+32>>2]-1;k:{if(u[y+15|0]<=4){q[t[y+40>>2]+4|0]=u[y+15|0];break k}q[t[y+40>>2]+4|0]=4}t[y+40>>2]=t[y+40>>2]+20;break f}z=y,B=Q(y+36|0,y+32|0,y+14|0,y+13|0),t[z+8>>2]=B;if(t[y+8>>2]){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=t[y+8>>2];break a}if(u[y+27|0]==1){o=t[y+40>>2];q[o+4|0]=q[o+4|0]&1|u[y+13|0]<<1;t[y+40>>2]=t[y+40>>2]+20;break f}if(!u[y+27|0]){z=y,B=M(y+36|0,y+32|0,t[y+16>>2],t[y+40>>2]+8|0,t[y+40>>2]+12|0),t[z+4>>2]=B;if(t[y+4>>2]){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=t[y+4>>2];break a}o=t[y+40>>2];q[o+4|0]=q[y+14|0]&1|u[o+4|0]&254;o=t[y+40>>2];q[o+4|0]=q[o+4|0]&1|u[y+13|0]<<1;t[y+40>>2]=t[y+40>>2]+20}}t[y+28>>2]=t[y+28>>2]+1;continue}break}if(t[y+32>>2]){O(t[y+44>>2],t[y+48>>2]);t[y+76>>2]=1;break a}t[t[y+64>>2]>>2]=t[y+44>>2];t[t[y+60>>2]>>2]=t[y+48>>2];t[y+76>>2]=0}A=y+80|0;return t[y+76>>2]}function D(o){var q=0,l=0,r=0,m=0,n=0,s=0,u=0,v,w=0,x,p;w=8;a:{b:{if(o>>>0>4294967239)break b;while(1){w=w>>>0>8?w:8;l=t[603];n=l;m=t[602];u=m;o=o>>>0>8?o+3&-4:8;c:{if(o>>>0<=127){s=(o>>>3|0)-1|0;break c}r=y(o);s=((o>>>29-r^4)-(r<<2)|0)+110|0;if(o>>>0<=4095)break c;r=((o>>>30-r^2)-(r<<1)|0)+71|0;s=r>>>0<63?r:63}q=s;r=q&31;(q&63)>>>0>=32?(q=0,l=l>>>r|0):(q=l>>>r|0,l=((1<<r)-1&l)<<32-r|u>>>r);r=q;if(l|q){while(1){n=l;q=r;d:{if(q|l){m=q-1|0;v=m+1|0;u=m;m=l-1|0;u=(m|0)!=-1?v:u;m=y(l^m)+32|0;l=y(q^u);l=(l|0)==32?m:l;q=63-l|0;0-(l>>>0>63)|0;break d}q=64}m=q;q=m;l=q&31;(q&63)>>>0>=32?(q=0,u=r>>>l|0):(q=r>>>l|0,u=((1<<l)-1&r)<<32-l|n>>>l);r=q;s=m+s|0;n=s<<4;q=t[n+1384>>2];m=n+1376|0;e:{if((q|0)!=(m|0)){l=I(q,w,o);if(l)break b;l=t[q+4>>2];t[l+8>>2]=t[q+8>>2];t[t[q+8>>2]+4>>2]=l;t[q+8>>2]=m;l=n+1380|0;t[q+4>>2]=t[l>>2];t[l>>2]=q;t[t[q+4>>2]+8>>2]=q;s=s+1|0;l=(r&1)<<31|u>>>1;r=r>>>1|0;break e}x=t[603];q=s;v=q&63;l=v;n=l&31;l>>>0>=32?(l=0,m=-1>>>n|0):(l=-1>>>n|0,m=(1<<n)-1<<32-n|-1>>>n);m=m&-2;n=v&31;v>>>0>=32?(l=m<<n,v=0):(l=(1<<n)-1&m>>>32-n|l<<n,v=m<<n);n=l;m=0-q&63;l=m;q=l&31;l>>>0>=32?(l=-1<<q,q=0):(l=(1<<q)-1&-1>>>32-q|-1<<q,q=-1<<q);p=q&-2;q=m&31;m>>>0>=32?(m=0,q=l>>>q|0):(m=l>>>q|0,q=((1<<q)-1&l)<<32-q|p>>>q);l=q|v;B=n|m;t[602]=t[602]&l;t[603]=B&x;l=u^1}if(l|r)continue;break}m=t[602];n=t[603]}f:{if(n|m){r=y(n);r=63-((r|0)==32?y(m)+32|0:r)<<4;q=r+1376|0;r=t[r+1384>>2];g:{if(!n&m>>>0<1073741824)break g;s=98;if((q|0)==(r|0))break g;while(1){l=I(r,w,o);if(l)break b;r=t[r+8>>2];if(!s)break g;s=s-1|0;if((q|0)!=(r|0))continue;break}}if(G(o+48|0))break f;if(!r|(q|0)==(r|0))break a;while(1){l=I(r,w,o);if(l)break b;r=t[r+8>>2];if((q|0)!=(r|0))continue;break}break a}if(!G(o+48|0))break a}l=0;if(o>>>0>4294967239)break b;r=w;q=0;while(1){s=q;if(r){r=r-1&r;q=q+1|0;continue}break}if(s>>>0<=1)continue;break}}return l}return 0}function E(o,p,l,r,m,n,x){o=o|0;p=p|0;l=l|0;r=r|0;m=m|0;n=n|0;x=x|0;var y=0,z=0;y=A-32|0;A=y;s[y+26>>1]=o;t[y+20>>2]=p;t[y+16>>2]=l;q[y+15|0]=r;s[y+12>>1]=m;t[y+8>>2]=n;t[y+4>>2]=x;a:{if(!(!(q[y+15|0]&1)|v[y+12>>1]<=32767)){t[y+28>>2]=4;break a}p=t[y+20>>2];l=t[y+16>>2];r=t[y+8>>2];m=t[y+4>>2];n=q[y+15|0]&1;o=A+-64|0;A=o;t[o+56>>2]=y+26;t[o+52>>2]=p;t[o+48>>2]=l;t[o+44>>2]=r;t[o+40>>2]=m;q[o+39|0]=2;q[o+38|0]=13;t[o+32>>2]=y+12;q[o+31|0]=n;q[o+30|0]=2;b:{c:{if(!(!t[o+52>>2]|(!t[o+44>>2]|!t[o+40>>2]))&&w[o+48>>2]<=16777215)break c;t[o+60>>2]=5;break b}t[o+24>>2]=t[o+48>>2]+(u[o+39|0]+(u[o+30|0]+4|0)|0);z=o,x=D(t[o+24>>2]),t[z+20>>2]=x;if(!t[o+20>>2]){t[o+60>>2]=3;break b}t[o+16>>2]=t[o+20>>2];q[t[o+16>>2]]=u[o+38|0];t[o+16>>2]=t[o+16>>2]+1;ba(t[o+16>>2],t[o+56>>2],u[o+30|0]);t[o+16>>2]=u[o+30|0]+t[o+16>>2];t[o+12>>2]=u[o+39|0]+t[o+48>>2];if(w[o+12>>2]<w[o+48>>2]){J(t[o+20>>2]);t[o+60>>2]=9;break b}p=t[o+16>>2];l=u[o+12|0]|u[o+13|0]<<8;q[p|0]=l;q[p+1|0]=l>>>8;q[p+2|0]=u[o+14|0];t[o+16>>2]=t[o+16>>2]+3;if(q[o+31|0]&1)d:{if(u[o+38|0]==6){p=t[o+32>>2];q[p|0]=u[p|0]|128;break d}e:{if(u[o+38|0]==13){p=t[o+32>>2];s[p>>1]=v[p>>1]|32768;break e}J(t[o+20>>2]);t[o+60>>2]=1;break b}}ba(t[o+16>>2],t[o+32>>2],u[o+39|0]);t[o+16>>2]=u[o+39|0]+t[o+16>>2];ba(t[o+16>>2],t[o+52>>2],t[o+48>>2]);t[t[o+44>>2]>>2]=t[o+20>>2];t[t[o+40>>2]>>2]=t[o+24>>2];t[o+60>>2]=0}A=o- -64|0;t[y+28>>2]=t[o+60>>2]}A=y+32|0;return t[y+28>>2]}function F(o,p,l,r,m){o=o|0;p=p|0;l=l|0;r=r|0;m=m|0;var n=0,v=0;n=A-32|0;A=n;s[n+30>>1]=o;t[n+24>>2]=p;t[n+20>>2]=l;t[n+16>>2]=r;t[n+12>>2]=m;p=t[n+24>>2];l=t[n+20>>2];r=t[n+16>>2];m=t[n+12>>2];o=A-48|0;A=o;t[o+40>>2]=n+30;t[o+36>>2]=p;t[o+32>>2]=l;t[o+28>>2]=r;t[o+24>>2]=m;q[o+23|0]=2;q[o+22|0]=15;a:{if(!(t[o+24>>2]?t[o+28>>2]:0)){t[o+44>>2]=5;break a}t[t[o+28>>2]>>2]=0;t[t[o+24>>2]>>2]=0;if(!(w[o+32>>2]<=16777215?t[o+36>>2]:0)){t[o+44>>2]=5;break a}t[o+16>>2]=t[o+32>>2]+(u[o+23|0]+4|0);v=o,r=D(t[o+16>>2]),t[v+12>>2]=r;if(!t[o+12>>2]){t[o+44>>2]=3;break a}t[o+8>>2]=t[o+12>>2];q[t[o+8>>2]]=u[o+22|0];t[o+8>>2]=t[o+8>>2]+1;ba(t[o+8>>2],t[o+40>>2],u[o+23|0]);t[o+8>>2]=u[o+23|0]+t[o+8>>2];p=t[o+8>>2];l=u[o+32|0]|u[o+33|0]<<8;q[p|0]=l;q[p+1|0]=l>>>8;q[p+2|0]=u[o+34|0];t[o+8>>2]=t[o+8>>2]+3;ba(t[o+8>>2],t[o+36>>2],t[o+32>>2]);t[o+8>>2]=t[o+32>>2]+t[o+8>>2];t[t[o+28>>2]>>2]=t[o+12>>2];t[t[o+24>>2]>>2]=t[o+16>>2];t[o+44>>2]=0}A=o+48|0;A=n+32|0;return t[o+44>>2]}function G(o){var p=0,l,r=0,m=0,n,s=0;r=t[343];l=o+3&-4;p=r+l|0;a:{b:{if(p>>>0<=r>>>0?l:0)break b;if(p>>>0>wa()<<16>>>0&&!(z(p|0)|0))break b;t[343]=p;break a}t[604]=48;r=-1}if((r|0)!=-1){l=o+r|0;p=l-16|0;t[p+12>>2]=16;t[p>>2]=16;o=t[600];o?s=t[o+8>>2]:s=0;c:{d:{if((s|0)==(r|0)){m=r-(t[r-4>>2]&-2)|0;n=t[m-4>>2];t[o+8>>2]=l;o=m-(n&-2)|0;l=-16;if(!(q[(o+t[o>>2]|0)-4|0]&1))break d;l=t[o+4>>2];t[l+8>>2]=t[o+8>>2];t[t[o+8>>2]+4>>2]=l;p=p-o|0;t[o>>2]=p;break c}t[r+12>>2]=16;t[r>>2]=16;t[r+8>>2]=l;t[r+4>>2]=o;t[600]=r;l=16}o=r+l|0;p=p-o|0;t[o>>2]=p}t[((p&-4)+o|0)-4>>2]=p|1;s=o;m=t[o>>2]-8|0;e:{if(m>>>0<=127){p=(m>>>3|0)-1|0;break e}n=y(m);p=((m>>>29-n^4)-(n<<2)|0)+110|0;if(m>>>0<=4095)break e;p=((m>>>30-n^2)-(n<<1)|0)+71|0;p=p>>>0<63?p:63}l=p<<4;t[s+4>>2]=l+1376;l=l+1384|0;t[o+8>>2]=t[l>>2];t[l>>2]=o;t[t[o+8>>2]+4>>2]=o;l=t[603];o=p&31;(p&63)>>>0>=32?(p=1<<o,o=0):(p=(1<<o)-1&1>>>32-o,o=1<<o);t[602]=o|t[602];t[603]=p|l}return(r|0)!=-1}function la(o,p,l,r){o=o|0;p=p|0;l=l|0;r=r|0;var m=0,n=0;m=A-16|0;A=m;s[m+10>>1]=o;s[m+8>>1]=p;t[m+4>>2]=l;t[m>>2]=r;a:{if(v[m+8>>1]>32767){t[m+12>>2]=4;break a}p=t[m+4>>2];l=t[m>>2];o=A-48|0;A=o;t[o+40>>2]=m+10;t[o+36>>2]=p;t[o+32>>2]=l;q[o+31|0]=2;q[o+30|0]=12;t[o+24>>2]=m+8;q[o+23|0]=2;b:{if(!(t[o+32>>2]?t[o+36>>2]:0)){t[o+44>>2]=5;break b}t[o+16>>2]=u[o+31|0]+(u[o+23|0]+4|0);n=o,r=D(t[o+16>>2]),t[n+12>>2]=r;if(!t[o+12>>2]){t[o+44>>2]=3;break b}t[o+8>>2]=t[o+12>>2];q[t[o+8>>2]]=u[o+30|0];t[o+8>>2]=t[o+8>>2]+1;ba(t[o+8>>2],t[o+40>>2],u[o+23|0]);t[o+8>>2]=u[o+23|0]+t[o+8>>2];t[o+4>>2]=u[o+31|0];p=t[o+8>>2];l=u[o+4|0]|u[o+5|0]<<8;q[p|0]=l;q[p+1|0]=l>>>8;q[p+2|0]=u[o+6|0];t[o+8>>2]=t[o+8>>2]+3;ba(t[o+8>>2],t[o+24>>2],u[o+31|0]);t[t[o+32>>2]>>2]=t[o+16>>2];t[t[o+36>>2]>>2]=t[o+12>>2];t[o+44>>2]=0}A=o+48|0;t[m+12>>2]=t[o+44>>2]}A=m+16|0;return t[m+12>>2]}function H(o,p,l){o=o|0;p=p|0;l=l|0;var q=0,m=0,n=0,r=0,s=0;n=A+-64|0;A=n;m=1;a:{if(R(o,p,0))break a;m=0;if(!p)break a;q=A+-64|0;A=q;m=t[p>>2];r=t[m-4>>2];s=t[m-8>>2];t[q+20>>2]=0;t[q+16>>2]=1084;t[q+12>>2]=p;t[q+8>>2]=1132;m=0;ca(q+24|0,39);p=p+s|0;b:{if(R(r,1132,0)){t[q+56>>2]=1;ka[t[t[r>>2]+20>>2]](r,q+8|0,p,p,1,0);m=t[q+32>>2]==1?p:0;break b}ka[t[t[r>>2]+24>>2]](r,q+8|0,p,1,0);c:switch(t[q+44>>2]){case 0:m=t[q+48>>2]==1?t[q+36>>2]==1?t[q+40>>2]==1?t[q+28>>2]:0:0:0;break b;case 1:break c;default:break b}if(t[q+48>>2]|t[q+36>>2]!=1|t[q+40>>2]!=1?t[q+32>>2]!=1:0)break b;m=t[q+24>>2]}A=q- -64|0;p=m;m=0;if(!p)break a;ca(n+8|4,52);t[n+56>>2]=1;t[n+20>>2]=-1;t[n+16>>2]=o;t[n+8>>2]=p;ka[t[t[p>>2]+28>>2]](p,n+8|0,t[l>>2],1);o=t[n+32>>2];(o|0)==1&&(t[l>>2]=t[n+24>>2]);m=(o|0)==1}o=m;A=n- -64|0;return o|0}function I(o,p,l){var q=0,m,n=0,r=0;q=o+4|0;m=(q+p|0)-1&0-p;p=t[o>>2];if(m+l>>>0<=(p+o|0)-4>>>0){n=t[o+4>>2];t[n+8>>2]=t[o+8>>2];t[t[o+8>>2]+4>>2]=n;(q|0)!=(m|0)&&(m=m-q|0,n=o-(t[o-4>>2]&-2)|0,q=m+t[n>>2]|0,t[n>>2]=q,t[(n+(q&-4)|0)-4>>2]=q,o=o+m|0,p=p-m|0,t[o>>2]=p);a:{if(l+24>>>0<=p>>>0){q=(o+l|0)+8|0;p=(p-l|0)-8|0;t[q>>2]=p;t[(q+(p&-4)|0)-4>>2]=p|1;r=q;n=t[q>>2]-8|0;b:{if(n>>>0<=127){m=(n>>>3|0)-1|0;break b}p=y(n);m=((n>>>29-p^4)-(p<<2)|0)+110|0;if(n>>>0<=4095)break b;p=((n>>>30-p^2)-(p<<1)|0)+71|0;m=p>>>0<63?p:63}p=m;m=p<<4;t[r+4>>2]=m+1376;m=m+1384|0;t[q+8>>2]=t[m>>2];t[m>>2]=q;t[t[q+8>>2]+4>>2]=q;m=t[603];q=p&31;(p&63)>>>0>=32?(p=1<<q,r=0):(p=(1<<q)-1&1>>>32-q,r=1<<q);t[602]=r|t[602];t[603]=p|m;p=l+8|0;t[o>>2]=p;t[((p&-4)+o|0)-4>>2]=p;break a}t[(o+p|0)-4>>2]=p}o=o+4|0}else o=0;return o}function J(o){var p=0,l,q=0,m,n=0;if(o){l=o-4|0;m=t[l>>2];q=m;p=l;n=t[o-8>>2];o=n&-2;(o|0)!=(n|0)&&(p=l-o|0,q=t[p+4>>2],t[q+8>>2]=t[p+8>>2],t[t[p+8>>2]+4>>2]=q,q=o+m|0);o=l+m|0;l=t[o>>2];(l|0)!=t[(o+l|0)-4>>2]&&(m=t[o+4>>2],t[m+8>>2]=t[o+8>>2],t[t[o+8>>2]+4>>2]=m,q=q+l|0);t[p>>2]=q;t[((q&-4)+p|0)-4>>2]=q|1;n=p;q=t[p>>2]-8|0;a:{if(q>>>0<=127){o=(q>>>3|0)-1|0;break a}m=y(q);o=((q>>>29-m^4)-(m<<2)|0)+110|0;if(q>>>0<=4095)break a;o=((q>>>30-m^2)-(m<<1)|0)+71|0;o=o>>>0<63?o:63}l=o<<4;t[n+4>>2]=l+1376;l=l+1384|0;t[p+8>>2]=t[l>>2];t[l>>2]=p;t[t[p+8>>2]+4>>2]=p;l=t[603];p=o&31;(o&63)>>>0>=32?(o=1<<p,p=0):(o=(1<<p)-1&1>>>32-p,p=1<<p);t[602]=p|t[602];t[603]=o|l}}function K(n,o,l){n=n|0;o=o|0;l=l|0;var p=0,m=0;p=A-48|0;A=p;t[p+40>>2]=n;t[p+36>>2]=o;t[p+32>>2]=l;a:{if(!(t[p+32>>2]?t[p+36>>2]:0)){t[p+44>>2]=5;break a}if(w[p+40>>2]>4){t[p+44>>2]=8;break a}t[p+28>>2]=5;m=p,l=D(t[p+28>>2]),t[m+24>>2]=l;if(!t[p+24>>2]){t[p+44>>2]=3;break a}t[p+20>>2]=t[p+24>>2];q[p+19|0]=3;q[t[p+20>>2]]=u[p+19|0];t[p+20>>2]=t[p+20>>2]+1;t[p+12>>2]=1;n=t[p+20>>2];o=u[p+12|0]|u[p+13|0]<<8;q[n|0]=o;q[n+1|0]=o>>>8;q[n+2|0]=u[p+14|0];t[p+20>>2]=t[p+20>>2]+3;q[p+11|0]=t[p+40>>2];q[t[p+20>>2]]=u[p+11|0];t[t[p+36>>2]>>2]=t[p+24>>2];t[t[p+32>>2]>>2]=t[p+28>>2];t[p+44>>2]=0}A=p+48|0;return t[p+44>>2]}function L(n,o,l,p,m){n=n|0;o=o|0;l=l|0;p=p|0;m=m|0;if(R(n,t[o+8>>2],m)){da(o,l,p);return}a:{if(R(n,t[o>>2],m)){if(!(t[o+20>>2]!=(l|0)?t[o+16>>2]!=(l|0):0)){if((p|0)!=1)break a;t[o+32>>2]=1;return}t[o+32>>2]=p;b:{if(t[o+44>>2]==4)break b;s[o+52>>1]=0;n=t[n+8>>2];ka[t[t[n>>2]+20>>2]](n,o,l,l,1,m);if(u[o+53|0]){t[o+44>>2]=3;if(!u[o+52|0])break b;break a}t[o+44>>2]=4}t[o+20>>2]=l;t[o+40>>2]=t[o+40>>2]+1;if(t[o+36>>2]!=1|t[o+24>>2]!=2)break a;q[o+54|0]=1;return}n=t[n+8>>2];ka[t[t[n>>2]+24>>2]](n,o,l,p,m)}}function M(o,p,l,q,m){var n=0;n=A-32|0;A=n;t[n+24>>2]=o;t[n+20>>2]=p;t[n+16>>2]=l;t[n+12>>2]=q;t[n+8>>2]=m;a:{if(w[n+16>>2]<1){t[n+28>>2]=9;break a}t[t[n+8>>2]>>2]=t[n+16>>2]-1;if(w[t[n+20>>2]>>2]<w[t[n+8>>2]>>2]){t[n+28>>2]=1;break a}o=D(t[t[n+8>>2]>>2]);t[t[n+12>>2]>>2]=o;if(!t[t[n+12>>2]>>2]){t[n+28>>2]=3;break a}ba(t[t[n+12>>2]>>2],t[t[n+24>>2]>>2],t[t[n+8>>2]>>2]);o=t[n+24>>2];t[o>>2]=t[t[n+8>>2]>>2]+t[o>>2];o=t[n+20>>2];t[o>>2]=t[o>>2]-t[t[n+8>>2]>>2];t[n+28>>2]=0}A=n+32|0;return t[n+28>>2]}function N(n,o,l){n=n|0;o=o|0;l=l|0;var p=0,m=0;p=A-32|0;A=p;s[p+26>>1]=n;t[p+20>>2]=o;t[p+16>>2]=l;t[t[p+16>>2]>>2]=3;m=p,l=D(t[t[p+16>>2]>>2]),t[m+12>>2]=l;a:{if(!t[p+12>>2]){t[p+28>>2]=3;break a}t[t[p+20>>2]>>2]=t[p+12>>2];q[p+11|0]=14;q[t[p+12>>2]]=u[p+11|0];t[p+12>>2]=t[p+12>>2]+1;n=t[p+12>>2];o=u[p+26|0]|u[p+27|0]<<8;q[n|0]=o;q[n+1|0]=o>>>8;t[p+28>>2]=0}A=p+32|0;return t[p+28>>2]}function O(m,n){var l=0;l=A-16|0;A=l;t[l+12>>2]=m;t[l+8>>2]=n;t[l+4>>2]=0;while(1){if(w[l+4>>2]<w[l+8>>2]){t[l>>2]=t[l+12>>2]+x(t[l+4>>2],20);a:{if(!(t[t[l>>2]>>2]&15)){J(t[t[l>>2]+8>>2]);break a}b:{if((t[t[l>>2]>>2]&15)==5){J(t[t[l>>2]+8>>2]);break b}(t[t[l>>2]>>2]&15)==6&&J(t[t[l>>2]+12>>2])}}t[l+4>>2]=t[l+4>>2]+1;continue}break}J(t[l+12>>2]);A=l+16|0}function P(m,n,l,o){q[m+53|0]=1;a:{if(t[m+4>>2]!=(l|0))break a;q[m+52|0]=1;l=t[m+16>>2];if(!l){t[m+36>>2]=1;t[m+24>>2]=o;t[m+16>>2]=n;if((o|0)!=1|t[m+48>>2]!=1)break a;q[m+54|0]=1;return}if((n|0)==(l|0)){l=t[m+24>>2];(l|0)==2&&(t[m+24>>2]=o,l=o);if(t[m+48>>2]!=1|(l|0)!=1)break a;q[m+54|0]=1;return}q[m+54|0]=1;t[m+36>>2]=t[m+36>>2]+1}}function Q(n,o,l,p){var m;m=A-32|0;t[m+24>>2]=n;t[m+20>>2]=o;t[m+16>>2]=l;t[m+12>>2]=p;q[m+11|0]=0;a:{if(w[t[m+20>>2]>>2]<1){t[m+28>>2]=1;break a}q[m+11|0]=u[t[t[m+24>>2]>>2]];n=t[m+24>>2];t[n>>2]=t[n>>2]+1;n=t[m+20>>2];t[n>>2]=t[n>>2]-1;q[t[m+16>>2]]=(u[m+11|0]&128)==128;q[t[m+12>>2]]=u[m+11|0]&127;t[m+28>>2]=0}return t[m+28>>2]}function ma(n,o,l,p,m){n=n|0;o=o|0;l=l|0;p=p|0;m=m|0;if(R(n,t[o+8>>2],m)){da(o,l,p);return}a:{if(!R(n,t[o>>2],m))break a;if(!(t[o+20>>2]!=(l|0)?t[o+16>>2]!=(l|0):0)){if((p|0)!=1)break a;t[o+32>>2]=1;return}t[o+20>>2]=l;t[o+32>>2]=p;t[o+40>>2]=t[o+40>>2]+1;t[o+36>>2]!=1|t[o+24>>2]!=2||(q[o+54|0]=1);t[o+44>>2]=4}}function R(m,n,l){var o;if(!l)return t[m+4>>2]==t[n+4>>2];if((m|0)==(n|0))return 1;l=t[m+4>>2];m=u[l|0];n=t[n+4>>2];o=u[n|0];a:{if(!m|(o|0)!=(m|0))break a;while(1){o=u[n+1|0];m=u[l+1|0];if(!m)break a;n=n+1|0;l=l+1|0;if((m|0)==(o|0))continue;break}}return(m|0)==(o|0)}function na(m,n){m=m|0;n=n|0;var l=0,o=0;l=A-32|0;A=l;t[l+24>>2]=m;t[l+20>>2]=n;o=l,m=D(1),t[o+16>>2]=m;a:{if(!t[l+16>>2]){t[l+28>>2]=3;break a}q[l+15|0]=9;q[t[l+16>>2]]=u[l+15|0];t[t[l+24>>2]>>2]=t[l+16>>2];t[t[l+20>>2]>>2]=1;t[l+28>>2]=0}A=l+32|0;return t[l+28>>2]}function S(m,n){m=m|0;n=n|0;var l=0,o=0;l=A-32|0;A=l;t[l+24>>2]=m;t[l+20>>2]=n;o=l,m=D(1),t[o+16>>2]=m;a:{if(!t[l+16>>2]){t[l+28>>2]=3;break a}q[l+15|0]=10;q[t[l+16>>2]]=u[l+15|0];t[t[l+24>>2]>>2]=t[l+16>>2];t[t[l+20>>2]>>2]=1;t[l+28>>2]=0}A=l+32|0;return t[l+28>>2]}function T(m,n){m=m|0;n=n|0;var l=0,o=0;l=A-32|0;A=l;t[l+24>>2]=m;t[l+20>>2]=n;o=l,m=D(1),t[o+16>>2]=m;a:{if(!t[l+16>>2]){t[l+28>>2]=3;break a}q[l+15|0]=2;q[t[l+16>>2]]=u[l+15|0];t[t[l+24>>2]>>2]=t[l+16>>2];t[t[l+20>>2]>>2]=1;t[l+28>>2]=0}A=l+32|0;return t[l+28>>2]}function U(m,n){m=m|0;n=n|0;var l=0,o=0;l=A-32|0;A=l;t[l+24>>2]=m;t[l+20>>2]=n;o=l,m=D(1),t[o+16>>2]=m;a:{if(!t[l+16>>2]){t[l+28>>2]=3;break a}q[l+15|0]=4;q[t[l+16>>2]]=u[l+15|0];t[t[l+24>>2]>>2]=t[l+16>>2];t[t[l+20>>2]>>2]=1;t[l+28>>2]=0}A=l+32|0;return t[l+28>>2]}function V(l){var m=0;m=A-16|0;A=m;t[m+12>>2]=l;l=1;a:{if(X(t[m+12>>2])&1)break a;l=1;if(t[m+12>>2]==15)break a;l=1;if(t[m+12>>2]==13)break a;l=1;if(t[m+12>>2]==12)break a;l=t[m+12>>2]==14}A=m+16|0;return l}function W(m,n,l){var o;o=t[m+16>>2];if(!o){t[m+36>>2]=1;t[m+24>>2]=l;t[m+16>>2]=n;return}a:{if((n|0)==(o|0)){if(t[m+24>>2]!=2)break a;t[m+24>>2]=l;return}q[m+54|0]=1;t[m+24>>2]=2;t[m+36>>2]=t[m+36>>2]+1}}function X(l){var m;m=A-16|0;t[m+12>>2]=l;l=1;a:{if(t[m+12>>2]==5)break a;l=1;if(t[m+12>>2]==6)break a;l=1;if(t[m+12>>2]==7)break a;l=t[m+12>>2]==8}return l}function Y(o,p,l,q,m,n){o=o|0;p=p|0;l=l|0;q=q|0;m=m|0;n=n|0;if(R(o,t[p+8>>2],n)){P(p,l,q,m);return}o=t[o+8>>2];ka[t[t[o>>2]+20>>2]](o,p,l,q,m,n)}function Z(){var m=0,n,l;while(1){n=m<<4;l=n+1376|0;t[n+1380>>2]=l;t[n+1384>>2]=l;m=m+1|0;if((m|0)!=64)continue;break}G(48)}function $(m,n,l,o){m=m|0;n=n|0;l=l|0;o=o|0;if(R(m,t[n+8>>2],0)){W(n,l,o);return}m=t[m+8>>2];ka[t[t[m>>2]+28>>2]](m,n,l,o)}function aa(o,p,l,q,m,n){o=o|0,p=p|0,l=l|0,q=q|0,m=m|0,n=n|0,R(o,t[p+8>>2],n)&&P(p,l,q,m)}function ba(m,n,l){if(l)while(1){q[m|0]=u[n|0];m=m+1|0;n=n+1|0;l=l-1|0;if(l)continue;break}}function ca(l,m){if(m)while(1){q[l|0]=0;l=l+1|0;m=m-1|0;if(m)continue;break}}function oa(m,n,l,o){m=m|0,n=n|0,l=l|0,o=o|0,R(m,t[n+8>>2],0)&&W(n,l,o)}function da(m,n,l){t[m+28>>2]==1|t[m+4>>2]!=(n|0)||(t[m+28>>2]=l)}function pa(l,m){l=l|0;m=m|0;return x(m,20)+l|0}function ea(l){l=l|0;return v[l+8>>1]>>>1|0}function qa(l){l=l|0;return s[l+8>>1]&1}function fa(l){l=l|0;return t[l+12>>2]}function ra(l){l=l|0;return t[l>>2]&15}function sa(l){l=l|0;return t[l+16>>2]}function ga(l){l=l|0;return v[l+4>>1]}function ha(l){l=l|0;return t[l+8>>2]}function ia(l){l=l|0;return u[l+4|0]}function ja(l){l=l|0;return l|0}function ta(l){return D(l)}function ua(l){l=l|0,J(l)}function va(l){l|0}n=u;r(l);var ka=m([null,ja,ua,va,va,H,aa,ma,oa,ua,Y,L,$]);function wa(){return p.byteLength/65536|0}function xa(l){l=l|0;var m=wa()|0;l=m+l|0;if(m<l&&l<65536){l=new ArrayBuffer(x(l,65536));var r=new Int8Array(l);r.set(q);q=new Int8Array(l);s=new Int16Array(l);t=new Int32Array(l);u=new Uint8Array(l);v=new Uint16Array(l);w=new Uint32Array(l);new Float32Array(l);new Float64Array(l);p=l;o.buffer=p;n=u}return m}return{c:Z,d:ta,e:ua,f:T,g:U,h:K,i:F,j:N,k:E,l:la,m:na,n:S,o:C,p:ra,q:ia,r:pa,s:ga,t:ha,u:fa,v:fa,w:sa,x:ea,y:qa,z:ea,A:ka}}return s(l)}(ha)},instantiate:function(l,m){return{then:function(n){var m=new D.Module(l);n({instance:new D.Instance(m)})}}},RuntimeError:Error};C=[];typeof D!=="object"&&Y("no native wasm support detected");var E,F=!1;function G(l,m){l||Y("Assertion failed: "+m)}function la(l,m){l%m>0&&(l+=m-l%m);return l}var H,I;function J(l){H=l,m.HEAP8=new Int8Array(l),m.HEAP16=new Int16Array(l),m.HEAP32=new Int32Array(l),m.HEAPU8=I=new Uint8Array(l),m.HEAPU16=new Uint16Array(l),m.HEAPU32=new Uint32Array(l),m.HEAPF32=new Float32Array(l),m.HEAPF64=new Float64Array(l)}u=m.INITIAL_MEMORY||2097152;m.wasmMemory?E=m.wasmMemory:E=new D.Memory({initial:u/65536,maximum:2147483648/65536});E&&(H=E.buffer);H.byteLength;J(H);var K,L=[],M=[],N=[];function O(){if(m.preRun){typeof m.preRun=="function"&&(m.preRun=[m.preRun]);while(m.preRun.length)ma(m.preRun.shift())}da(L)}function P(){da(M)}function Q(){if(m.postRun){typeof m.postRun=="function"&&(m.postRun=[m.postRun]);while(m.postRun.length)na(m.postRun.shift())}da(N)}function ma(l){L.unshift(l)}function R(l){M.unshift(l)}function na(l){N.unshift(l)}(!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function(l,m){var n=l>>>16;l=l&65535;var o=m>>>16;m=m&65535;return l*m+(n*m+l*o<<16)|0});if(!Math.fround){var S=new Float32Array(1);Math.fround=function(l){S[0]=l;return S[0]}}Math.clz32||(Math.clz32=function(l){var m=32,n=l>>16;n&&(m-=16,l=n);n=l>>8;n&&(m-=8,l=n);n=l>>4;n&&(m-=4,l=n);n=l>>2;n&&(m-=2,l=n);n=l>>1;return n?m-2:m-l});Math.trunc||(Math.trunc=function(l){return l<0?Math.ceil(l):Math.floor(l)});var T=0,U=null,V=null;function W(l){T++,m.monitorRunDependencies&&m.monitorRunDependencies(T)}function X(l){T--;m.monitorRunDependencies&&m.monitorRunDependencies(T);if(T==0){U!==null&&(clearInterval(U),U=null);if(V){l=V;V=null;l()}}}m.preloadedImages={};m.preloadedAudios={};function Y(l){m.onAbort&&m.onAbort(l);l+="";B(l);F=!0;l="abort("+l+"). Build with -s ASSERTIONS=1 for more info.";l=new D.RuntimeError(l);s(l);throw l}var Z="data:application/octet-stream;base64,";function $(l){return l.startsWith(Z)}var aa="dgwcppbridge.wasm";$(aa)||(aa=z(aa));function ba(l){try{if(l==aa&&C)return new Uint8Array(C);var m=ga(l);if(m)return m;if(A)return A(l);else throw"both async and sync fetching of the wasm failed"}catch(l){Y(l)}}function ca(){return!C&&(w||x)&&typeof fetch==="function"?fetch(aa,{credentials:"same-origin"}).then(function(l){if(!l.ok)throw"failed to load wasm binary file at '"+aa+"'";return l.arrayBuffer()})["catch"](function(){return ba(aa)}):n.resolve().then(function(){return ba(aa)})}function oa(){var n={a:ha};function o(n,l){l=n.exports;m.asm=l;K=m.asm.A;R(m.asm.c);X("wasm-instantiate")}W("wasm-instantiate");function r(l){o(l.instance)}function t(l){return ca().then(function(l){l=D.instantiate(l,n);return l}).then(l,function(l){B("failed to asynchronously prepare wasm: "+l),Y(l)})}function u(){if(!C&&typeof D.instantiateStreaming==="function"&&!$(aa)&&typeof fetch==="function")return fetch(aa,{credentials:"same-origin"}).then(function(l){l=D.instantiateStreaming(l,n);return l.then(r,function(l){B("wasm streaming compile failed: "+l);B("falling back to ArrayBuffer instantiation");return t(r)})});else return t(r)}if(m.instantiateWasm)try{var l=m.instantiateWasm(n,o);return l}catch(l){B("Module.instantiateWasm callback failed with error: "+l);return!1}u()["catch"](s);return{}}function da(l){while(l.length>0){var n=l.shift();if(typeof n=="function"){n(m);continue}var o=n.func;typeof o==="number"?n.arg===void 0?K.get(o)():K.get(o)(n.arg):o(n.arg===void 0?null:n.arg)}}function pa(l){try{E.grow(l-H.byteLength+65535>>>16);J(E.buffer);return 1}catch(l){}}function ea(l){var m=I.length;l=l>>>0;var n=2147483648;if(l>n)return!1;for(var o=1;o<=4;o*=2){var p=m*(1+.2/o);p=Math.min(p,l+100663296);p=Math.min(n,la(Math.max(l,p),65536));p=pa(p);if(p)return!0}return!1}var qa=!1;function fa(l){var m=[];for(var n=0;n<l.length;n++){var o=l[n];o>255&&(qa&&G(!1,"Character code "+o+" ("+String.fromCharCode(o)+")  at offset "+n+" not in 0x00-0xFF."),o&=255);m.push(String.fromCharCode(o))}return m.join("")}var ra=typeof atob==="function"?atob:function(l){var m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="",o,p,q,r,s,t=0;l=l.replace(/[^A-Za-z0-9\+\/\=]/g,"");do p=m.indexOf(l.charAt(t++)),q=m.indexOf(l.charAt(t++)),r=m.indexOf(l.charAt(t++)),s=m.indexOf(l.charAt(t++)),p=p<<2|q>>4,q=(q&15)<<4|r>>2,o=(r&3)<<6|s,n=n+String.fromCharCode(p),r!==64&&(n=n+String.fromCharCode(q)),s!==64&&(n=n+String.fromCharCode(o));while(t<l.length);return n};function sa(l){try{l=ra(l);var m=new Uint8Array(l.length);for(var n=0;n<l.length;++n)m[n]=l.charCodeAt(n);return m}catch(l){throw new Error("Converting base64 string to bytes failed.")}}function ga(l){if(!$(l))return;return sa(l.slice(Z.length))}var ha={b:ea,a:E};oa();m.___wasm_call_ctors=function(){return(m.___wasm_call_ctors=m.asm.c).apply(null,arguments)};m.__malloc=function(){return(m.__malloc=m.asm.d).apply(null,arguments)};m.__free=function(){return(m.__free=m.asm.e).apply(null,arguments)};m.__DgwCodecEncodeEmpty=function(){return(m.__DgwCodecEncodeEmpty=m.asm.f).apply(null,arguments)};m.__DgwCodecEncodeDeauth=function(){return(m.__DgwCodecEncodeDeauth=m.asm.g).apply(null,arguments)};m.__DgwCodecEncodeDrain=function(){return(m.__DgwCodecEncodeDrain=m.asm.h).apply(null,arguments)};m.__DgwCodecEncodeStreamGroup_EstabStream=function(){return(m.__DgwCodecEncodeStreamGroup_EstabStream=m.asm.i).apply(null,arguments)};m.__DgwCodecEncodeStreamGroup_EndOfData=function(){return(m.__DgwCodecEncodeStreamGroup_EndOfData=m.asm.j).apply(null,arguments)};m.__DgwCodecEncodeStreamGroup_Data=function(){return(m.__DgwCodecEncodeStreamGroup_Data=m.asm.k).apply(null,arguments)};m.__DgwCodecEncodeStreamGroup_Ack=function(){return(m.__DgwCodecEncodeStreamGroup_Ack=m.asm.l).apply(null,arguments)};m.__DgwCodecEncodePing=function(){return(m.__DgwCodecEncodePing=m.asm.m).apply(null,arguments)};m.__DgwCodecEncodePong=function(){return(m.__DgwCodecEncodePong=m.asm.n).apply(null,arguments)};m.__DgwCodecDecode=function(){return(m.__DgwCodecDecode=m.asm.o).apply(null,arguments)};m.__getFrameType=function(){return(m.__getFrameType=m.asm.p).apply(null,arguments)};m.__getDrainReasonFromDrainFrame=function(){return(m.__getDrainReasonFromDrainFrame=m.asm.q).apply(null,arguments)};m.__getDGWFramePtr=function(){return(m.__getDGWFramePtr=m.asm.r).apply(null,arguments)};m.__getStreamIdFromStreamGroupFrame=function(){return(m.__getStreamIdFromStreamGroupFrame=m.asm.s).apply(null,arguments)};m.__getEncodedParamsFromEstablishStreamFrame=function(){return(m.__getEncodedParamsFromEstablishStreamFrame=m.asm.t).apply(null,arguments)};m.__getEncodedParamsSizeFromEstablishStreamFrame=function(){return(m.__getEncodedParamsSizeFromEstablishStreamFrame=m.asm.u).apply(null,arguments)};m.__getDataFromGroupedStreamDataFrame=function(){return(m.__getDataFromGroupedStreamDataFrame=m.asm.v).apply(null,arguments)};m.__getDataSizeFromGroupedStreamDataFrame=function(){return(m.__getDataSizeFromGroupedStreamDataFrame=m.asm.w).apply(null,arguments)};m.__getAckIdFromGroupedStreamDataFrame=function(){return(m.__getAckIdFromGroupedStreamDataFrame=m.asm.x).apply(null,arguments)};m.__getRequiresAckFromGroupedStreamDataFrame=function(){return(m.__getRequiresAckFromGroupedStreamDataFrame=m.asm.y).apply(null,arguments)};m.__getAckIdFromGroupedStreamAckFrame=function(){return(m.__getAckIdFromGroupedStreamAckFrame=m.asm.z).apply(null,arguments)};var ia;V=function l(){ia||ja(),ia||(V=l)};function ja(l){l||v;if(T>0)return;O();if(T>0)return;function n(){if(ia)return;ia=!0;m.calledRun=!0;if(F)return;P();o(m);m.onRuntimeInitialized&&m.onRuntimeInitialized();Q()}m.setStatus?(m.setStatus("Running..."),setTimeout(function(){setTimeout(function(){m.setStatus("")},1),n()},1)):n()}m.run=ja;if(m.preInit){typeof m.preInit=="function"&&(m.preInit=[m.preInit]);while(m.preInit.length>0)m.preInit.pop()()}ja();return m.ready}}();typeof q==="object"&&typeof p==="object"?p.exports=r:typeof define==="function"&&define.amd?define([],function(){return r}):typeof q==="object"&&(q.Module=r)}),null);
__d("DGWUtils",["Base64","DGWConstants","DGWCppBridge","DGWLoggingContext","Promise","Random","URI","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=4;function a(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=d("Random").random()*16|0;a=a==="x"?b:b&3|8;return a.toString(16)})}function k(a){var b=new TextDecoder();b=b.decode(a);a=c("Base64").encode(b);b=a.replace(/\+/gi,"-").replace(/\//gi,"_").replace(/=/gi,"");return b}var l=null,m=null;function n(){m==null&&(m=(i||(i=b("Promise"))).resolve().then(function(){return c("DGWCppBridge")()}).then(function(a){l=a}));return m}e=function(){function a(){}a.initialize=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return n()});function c(){return a.apply(this,arguments)}return c}();a.constructConnectUrl=function(a){var b,e,f=a.appId,g=a.appVersion,i=a.authType,j=a.deviceId,l=a.dgwVersion,m=a.fbId,n=a.tier,o=a.loggingId,p=a.headers,q=a.endpoint,r=a.serviceId,s=a.regionHint,t=a.establishStreamFrame;a=a.trafficTracing;var u=(b={},b[(e=d("DGWConstants")).HEADER_CONSTANTS.HEADER_APPID]=f,b[e.HEADER_CONSTANTS.HEADER_APPVERSION]=g,b[e.HEADER_CONSTANTS.HEADER_AUTHTYPE]=i,b[e.HEADER_CONSTANTS.HEADER_DGW_VERSION]=""+l,b[e.HEADER_CONSTANTS.HEADER_UUID]=m,b[e.HEADER_CONSTANTS.HEADER_TARGET_TIER]=n,b);t!==void 0&&(u[d("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64]=k(t));o!==void 0&&(u[d("DGWConstants").HEADER_CONSTANTS.HEADER_LOGGING_ID]=o);s!==void 0&&(u[d("DGWConstants").HEADER_CONSTANTS.HEADER_REGIONHINT]=s);j!==void 0&&(u[d("DGWConstants").HEADER_CONSTANTS.HEADER_DEVICE_ID]=j);a!==void 0&&(u[d("DGWConstants").HEADER_CONSTANTS.TRAFFIC_TRACING]="debug:"+a);Object.keys(p).forEach(function(a){var b=d("DGWConstants").HEADER_CONSTANTS.APPHEADER_PREFIX+a;Object.prototype.hasOwnProperty.call(u,b)||(u[b]=p[a])});f=new(h||(h=c("URI")))(q);f.setQueryData(u);f.setPath(f.getPath()+"/"+r);f.toString().length>2e3&&(delete u[d("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64],f.setQueryData(u));return f.toStringRawQuery()};return a}();f=function(){function a(a,b,c){this.$1=null,this.$2=a,this.$3=b,this.$4=c}a.initialize=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return n()});function c(){return a.apply(this,arguments)}return c}();var c=a.prototype;c.malloc=function(a){try{a=l.__malloc(a);if(a===0){var b;(b=this.$2)==null?void 0:b.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"wasm malloc failure","malloc returned 0");return-1}return a}catch(a){(b=this.$2)==null?void 0:b.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"wasm malloc failure","exception during malloc",a.toString());return-1}};c.free=function(a){l.__free(a)};c.append=function(a){if(this.$1==null){this.$1=a;return}var b=this.$1.length,c=new Uint8Array(b+a.length);c.set(this.$1,0);c.set(a,b);this.$1=c};c.processData=function(){var a=this;if(this.$1==null)return;var b=this.$1.length,c=this.malloc(b);if(c===-1)return;var e=l.HEAPU8.subarray(c,c+b);if(this.$1)for(var f=0;f<e.length;++f)e[f]=this.$1[f];f=this.malloc(j*4);if(f===-1)return;e=f;var g=e+j,h=g+j,i=h+j;b=l.__DgwCodecDecode(c,b,e,g,h,i);this.free(c);if(b!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){this.free(f);(h=this.$2)==null?void 0:h.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Codec Decode Failure","Failed to decode Frame(s). Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(b));return}c=l.HEAPU32.subarray(i/j,i/j+1)[0];if(this.$1==null){this.free(f);return}h=this.$1.length-c;if(this.$1&&this.$1.length>h){this.$1=new Uint8Array(((b=this.$1)==null?void 0:b.subarray(h))||[])}else this.$1=null;i=l.HEAPU32.subarray(g/j,g/j+1)[0];c=l.HEAPU32.subarray(e/j,e/j+1)[0];var k=[];for(b=0;b<i;++b){var m=l.__getDGWFramePtr(c,b);h=l.__getFrameType(m);switch(h){case d("DGWConstants").DgwFrameType.DgwFrameType_Drain:g=function(){var b=l.__getDrainReasonFromDrainFrame(m),c=d("DGWConstants").drainReasonToDrainReasonString(b);(b=a.$2)==null?void 0:b.logEvent(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Received Drain Frame from server","DrainReason: "+c);k.push(function(){var b;return(b=a.$3)==null?void 0:b.receivedDrainSignal(c)});return"break"}();if(g==="break")break;case d("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_EstabStream:e=function(){var b=l.__getStreamIdFromStreamGroupFrame(m),c=l.__getEncodedParamsFromEstablishStreamFrame(m),d=new Uint8Array(l.HEAPU8.subarray(c,c+l.__getEncodedParamsSizeFromEstablishStreamFrame(m)));a.free(c);k.push(function(){var c;return(c=a.$3)==null?void 0:c.onGroupedStreamEstablishStreamReceived(b,d)});return"break"}();if(e==="break")break;case d("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_Data:h=function(){var b=l.__getStreamIdFromStreamGroupFrame(m),c=l.__getDataFromGroupedStreamDataFrame(m),d=new Uint8Array(l.HEAPU8.subarray(c,c+l.__getDataSizeFromGroupedStreamDataFrame(m)));a.free(c);var e=l.__getRequiresAckFromGroupedStreamDataFrame(m)?l.__getAckIdFromGroupedStreamDataFrame(m):null;k.push(function(){var c;return(c=a.$3)==null?void 0:c.onGroupedStreamDataReceived(b,d,e)});return"break"}();if(h==="break")break;case d("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_Ack:g=function(){var b=l.__getStreamIdFromStreamGroupFrame(m),c=l.__getAckIdFromGroupedStreamAckFrame(m);k.push(function(){var d;return(d=a.$3)==null?void 0:d.onGroupedStreamAckReceived(b,c)});return"break"}();if(g==="break")break;case d("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_EndOfData:e=function(){var b=l.__getStreamIdFromStreamGroupFrame(m);k.push(function(){var c;return(c=a.$3)==null?void 0:c.onGroupedStreamEndOfDataReceived(b)});return"break"}();if(e==="break")break;case d("DGWConstants").DgwFrameType.DgwFrameType_Ping:k.push(function(){var b;return(b=a.$3)==null?void 0:b.onPingReceived()});break;case d("DGWConstants").DgwFrameType.DgwFrameType_Pong:k.push(function(){var b;return(b=a.$3)==null?void 0:b.onPongReceived()});break;default:break}this.free(m)}this.free(f);for(h=0;h<k.length;h++)k[h]()};c.encodeData=function(a,b,c,e){var f=this.malloc(a.length);if(f===-1)return null;var g=l.HEAPU8.subarray(f,f+a.length);for(var h=0;h<g.length;++h)g[h]=a[h];a=this.malloc(j*2);h=a;var i=a+j;e=l.__DgwCodecEncodeStreamGroup_Data(e,f,g.length,b,c,h,i);this.free(f);if(e!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){(g=this.$2)==null?void 0:g.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Data Frame encode failure","Failed to decode DGW Data Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(e));return null}b=l.HEAPU32.subarray(h/j,h/j+1)[0];c=l.HEAPU32.subarray(i/j,i/j+1)[0];f=new Uint8Array(l.HEAPU8.subarray(b,b+c));this.free(b);this.free(a);return f};c.encodeAck=function(a,b){var c=this.malloc(j*2);if(c===-1)return null;var e=c,f=c+j;b=l.__DgwCodecEncodeStreamGroup_Ack(b,a,e,f);if(b!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){(a=this.$2)==null?void 0:a.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"ACK Frame encode failure","Failed to encode ACK Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(b));return null}a=l.HEAPU32.subarray(e/j,e/j+1)[0];b=l.HEAPU32.subarray(f/j,f/j+1)[0];e=new Uint8Array(l.HEAPU8.subarray(a,a+b));this.free(a);this.free(c);return e};c.encodeDrain=function(a){var b=this.malloc(j*2);if(b===-1)return null;var c=b,e=b+j;a=l.__DgwCodecEncodeDrain(a,c,e);if(a!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var f;(f=this.$2)==null?void 0:f.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Drain Frame encode failure","Failed to encode Drain Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(a));return null}f=l.HEAPU32.subarray(c/j,c/j+1)[0];a=l.HEAPU32.subarray(e/j,e/j+1)[0];c=new Uint8Array(l.HEAPU8.subarray(f,f+a));this.free(f);this.free(b);return c};c.encodeEstablishStream=function(a,b){var c=this.malloc(b.length);if(c===-1)return null;var e=l.HEAPU8.subarray(c,c+b.length);for(var f=0;f<b.length;++f)e[f]=b[f];e=this.malloc(j*2);f=e;var g=e+j;b=l.__DgwCodecEncodeStreamGroup_EstabStream(a,c,b.length,f,g);this.free(c);if(b!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){(c=this.$2)==null?void 0:c.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"EstablishStream Frame encode failure","Failed to encode EstablishStream Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(b)+" for StreamId "+a);return null}c=l.HEAPU32.subarray(f/j,f/j+1)[0];b=l.HEAPU32.subarray(g/j,g/j+1)[0];a=new Uint8Array(l.HEAPU8.subarray(c,c+b));this.free(c);this.free(e);return a};c.encodeEndOfData=function(a){var b=this.malloc(j*2);if(b===-1)return null;var c=b,e=b+j;a=l.__DgwCodecEncodeStreamGroup_EndOfData(a,c,e);if(a!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var f;(f=this.$2)==null?void 0:f.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"EndOfData Frame encode failure","Failed to encode EndOfData Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(a));return null}f=l.HEAPU32.subarray(c/j,c/j+1)[0];a=l.HEAPU32.subarray(e/j,e/j+1)[0];c=new Uint8Array(l.HEAPU8.subarray(f,f+a));this.free(f);this.free(b);return c};c.encodePing=function(){var a=this.malloc(j*2);if(a===-1)return null;var b=a,c=a+j,e=l.__DgwCodecEncodePing(b,c);if(e!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var f;(f=this.$2)==null?void 0:f.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Ping Frame encode failure","Failed to encode Ping Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(e));return null}f=l.HEAPU32.subarray(b/j,b/j+1)[0];e=l.HEAPU32.subarray(c/j,c/j+1)[0];b=new Uint8Array(l.HEAPU8.subarray(f,f+e));this.free(f);this.free(a);return b};c.encodePong=function(){if(this.$5!=null)return this.$5;var a=this.malloc(j*2);if(a===-1)return null;var b=a,c=a+j,e=l.__DgwCodecEncodePong(b,c);if(e!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var f;(f=this.$2)==null?void 0:f.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Pong Frame encode failure","Failed to encode Pong Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(e));return null}f=l.HEAPU32.subarray(b/j,b/j+1)[0];e=l.HEAPU32.subarray(c/j,c/j+1)[0];b=new Uint8Array(l.HEAPU8.subarray(f,f+e));this.free(f);this.free(a);this.$5=b;return b};return a}();g.uuidv4=a;g.Uint8ArrayToBase64UrlStr=k;g.DGWUtils=e;g.DGWCodec=f}),98);
__d("DGWExponentialBackoff",["Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";var g,h={maxRetries:5,baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)},i=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.errors=c;return a}return a}(babelHelpers.wrapNativeSuper(Error));function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b===void 0&&(b=h);try{return yield k(a,b)}catch(a){throw a.errors[a.errors.length-1]}});return j.apply(this,arguments)}function k(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=0,d=[],e=b.baseRetryInterval,f=b.backoffFactor;while(c<=b.maxRetries){try{var g=(yield a());return g}catch(a){d.push(a)}yield m(e*Math.pow(f,c));++c}throw new i("Max call count exceeded",d)});return l.apply(this,arguments)}function m(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield new(g||(g=b("Promise")))(function(b){return window.setTimeout(b,a)})});return n.apply(this,arguments)}f.callWithExponentialBackoff=a}),66);
__d("DGWPinger",["DGWLoggingContext"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c){this.$1=a,this.$4=b,this.$5=c,this.$3=!1}var b=a.prototype;b.$6=function(){var a=this;if(this.$3){var b;(b=d("DGWLoggingContext")).DGWLoggingContext.bumpODSKey(b.DGWLoggingComponent.PINGER,"timeout_fired.reset");this.$3=!1;this.$4();b.DGWLoggingContext.bumpODSKey(b.DGWLoggingComponent.PINGER,"timeout.newtimeout");this.$2=window.setTimeout(function(){a.$6()},this.$1)}else d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.PINGER,"timeout_fired.disconnect"),this.$5()};b.reset=function(){var a=this;this.$3=!0;this.$2&&(d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.PINGER,"reset"),window.clearTimeout(this.$2),this.$2=null);this.$1>0&&(d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.PINGER,"reset.newtimeout"),this.$2=window.setTimeout(function(){a.$6()},this.$1))};b.cancel=function(){this.$2&&(d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.PINGER,"canceled"),window.clearTimeout(this.$2),this.$2=null)};return a}();g.DGWPinger=a}),98);
__d("DGWStreamGroupCallbacks",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";var g=b("$InternalEnum")({TRANSPORT_SERVER_INTERNAL_ERROR:0,TRANSPORT_ABNORMAL_CLOSURE:1,TRANSPORT_GOING_AWAY:2,TRANSPORT_UNKNOWN_ERROR:3,TRANSPORT_KEEPALIVE_TIMEOUT:4,TRANSPORT_UNAUTHORIZED:5,TRANSPORT_REJECTED:6,TRANSPORT_BAD_REQUEST:7,TRANSPORT_DGW_SERVER_ERROR:8,TRANSPORT_NORMAL_CLOSURE:9});function a(a){switch(a){case g.TRANSPORT_UNAUTHORIZED:return!1;default:return!0}}c=function(){function a(){}var b=a.prototype;b.onStreamGroupError=function(){};b.onStreamGroupMustDrain=function(){};b.onStreamGroupTransportClose=function(){};return a}();f.DGWStreamGroupError=g;f.isRetryableError=a;f.NoOpDGWStreamGroupCallbacks=c}),66);
__d("DGWTransportEvents",["DGWLoggingContext","NetworkStatus"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$3=a}var b=a.prototype;b.transportEstablished=function(a){this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"open",a),this.$2=Date.now(),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_success")};b.transportPingSent=function(a){this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Ping Frame Sent",a,!0)};b.transportPongReceived=function(a){this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Pong Frame Received",a,!0)};b.transportEstablishmentPending=function(){this.$1=Date.now(),this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transportPending",null,!0),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_pending")};b.transportClosed=function(a,b,c){this.$4=Date.now(),a?(this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transport_close_graceful"),this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Transport closed gracefully",null,!0)):(this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transport_close_with_error"),this.$3.logError(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Transport closed abnormally",b,c))};b.transportEstablishmentFailure=function(a){this.$3.logError(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"WebSocket transport establishment failure","WebSocket close code: "+a.code+" reason: "+a.reason+" wasClean: "+String(a.wasClean)),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_failure")};b.streamEstablishmentTimeout=function(a,b,e){this.$3.logError(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment timeout",a,"streamId:"+b+", onLine:"+String(c("NetworkStatus").isOnline()),!1,e),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_timeout")};b.streamEstablishmentPending=function(a,b){this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment pending","streamId:"+a,!0,b),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_pending")};b.streamEstablishmentSuccess=function(a,b){this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment success","streamId:"+a,!0,b),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_success")};b.transportError=function(a,b,c){this.$3.logError(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,a,b,c)};b.receivedFrameForInactiveStream=function(a,b,c){this.$3.logWarn(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Frame received for inactive stream","frameType: "+a+", streamID: "+b,c)};b.ranOutOfStreamIds=function(a){this.$3.logWarn(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Hit max StreamId limit","Hit max StreamId limit",a)};return a}();g.DGWTransportEvents=a}),98);
__d("DGWWebSocketTransport",[],(function(a,b,c,d,e,f){"use strict";function a(a){a=new WebSocket(a);a.binaryType="arraybuffer";a.onopen=function(){};a.onclose=function(){};a.onerror=function(){};return a}f.getWebSocketConnection=a}),66);
__d("DGWStreamEvents",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b,c){this.$4=new Map(),this.$5=new Map(),this.$6=a,this.$1=b,c!=null&&(this.$8="streamId:"+c+"::")}var b=a.prototype;b.dataSent=function(a,b,c){var d=b?"sendWithAckRequested":"sendWithoutAckRequested";this.$6.logEvent(this.$1,d,((d=this.$8)!=null?d:"")+"sendId:"+c+", payloadSize:"+a,!0);this.$4.set(c,{ackRequested:b,payloadSize:a,sendTimestamp:Date.now()})};b.ackReceived=function(a){var b;this.$6.logEvent(this.$1,"AckReceived",((b=this.$8)!=null?b:"")+"sendId:"+a,!0);this.$6.bumpODSKey(this.$1,"ack_received");b=this.$4.get(a);b!=null&&(b.ackReceivedTimestamp=Date.now())};b.ackSent=function(a){var b;this.$6.bumpODSKey(this.$1,"ack_sent");this.$6.logEvent(this.$1,"ACK sent",((b=this.$8)!=null?b:"")+"ackId:"+a,!0)};b.drainSent=function(a){var b;this.$6.logEvent(this.$1,"Drain sent",((b=this.$8)!=null?b:"")+"drainReason: "+a)};b.dataReceived=function(a,b,c){var d;this.$6.bumpODSKey(this.$1,"data_received");this.$6.logEvent(this.$1,"Data received",((d=this.$8)!=null?d:"")+"sendId:"+(c!=null?c:"null")+", ackRequested:"+b.toString()+", payloadSize:"+a,!0);c!=null&&this.$5.set(c,{ackRequested:b,payloadSize:a,receiveTimestamp:Date.now()})};b.endOfDataReceived=function(){this.$6.bumpODSKey(this.$1,"end_of_data_received"),this.$6.logEvent(this.$1,"EndOfDataReceived",this.$8,!0)};b.endOfDataSent=function(){this.$6.bumpODSKey(this.$1,"end_of_data_sent"),this.$6.logEvent(this.$1,"EndOfDataSent",this.$8,!0)};b.streamClosed=function(a,b){this.$7=Date.now();var c=this.$9();if(a){this.$6.bumpODSKey(this.$1,"stream_closed_gracefully");this.$6.logEvent(this.$1,"Stream closed gracefully",""+((a=this.$8)!=null?a:"")+c)}else{this.$6.bumpODSKey(this.$1,"stream_closed_with_error");this.$6.logError(this.$1,"Stream closed abnormally",b,""+((a=this.$8)!=null?a:"")+c)}};b.connectionEstablishmentFailure=function(a){this.$6.logEvent(this.$1,"WebSocket connection establishment failure","WebSocket close code: "+a)};b.streamEstablishmentFailure=function(a,b){this.$6.logError(this.$1,"Failed to establish DGW Stream","Last seen error: "+a.toString(),""+((a=this.$8)!=null?a:"")+b);this.$6.bumpODSKey(this.$1,"stream_establishment_failure")};b.error=function(a,b){b={msg:b,state:this.$9()};this.$6.logError(this.$1,a,JSON.stringify(b),this.$8)};b.$9=function(){var a={currentNetworkCondition:window.navigator&&window.navigator.onLine===!0,establishRequestTimestamp:this.$2,establishedTimestamp:this.$3,streamClosedTimestamp:this.$7,sendHistory:JSON.stringify(Array.from(this.$4.entries())),receiveHistory:JSON.stringify(Array.from(this.$5.entries()))};return JSON.stringify(a)};return a}();f.DGWStreamEvents=a}),66);
__d("GroupedStream",["DGWAckManager","DGWConstants","DGWLoggingContext","DGWStream","DGWStreamEvents","QuickPerformanceLogger","Random","asyncToGeneratorRuntime","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("qpl")._(701242292,"2919");a=function(){function a(a,b,e,f,g,j,k){this.$1=a,this.$3=!1,this.$4=!1,this.$5=!1,this.$6=b,this.$7=e,this.$8=f,this.$2=j,this.$9=g,this.$10=new(d("DGWAckManager").DGWAckManager)(this.$9),this.$12=new(d("DGWStreamEvents").DGWStreamEvents)(this.$9,d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,this.$1),this.$11=0,this.$13=k,this.$14=Date.now()+(Math.round(d("Random").random()*1e4)+1e4),(h||(h=c("QuickPerformanceLogger"))).markerStart(i,this.$14)}var e=a.prototype;e.send=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=this.$11++%d("DGWConstants").MAX_ACK_ID;a=this.$15(a,!0,c);if(!this.$16(a,!0,c))return!1;a=(yield this.$10.waitForAck(c,b!=null?b:d("DGWConstants").DEFAULT_ACK_TIMEOUT_MS));return a});function c(b,c){return a.apply(this,arguments)}return c}();e.sendFrame=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=this.$11++%d("DGWConstants").MAX_ACK_ID;b=this.$15(b,!0,e);if(b==null)return!1;var f=new Uint8Array(a.length+b.length);f.set(a);f.set(b,a.length);if(!this.$16(f,!0,e))return!1;b=(yield this.$10.waitForAck(e,c!=null?c:d("DGWConstants").DEFAULT_ACK_TIMEOUT_MS));return b});function c(b,c,d){return a.apply(this,arguments)}return c}();e.sendAndForget=function(a){a=this.$15(a,!1,0);return this.$16(a,!1,0)};e.sendFrameAndForget=function(a,b){b=this.$15(b,!1,0);if(b==null)return!1;var c=new Uint8Array(a.length+b.length);c.set(a);c.set(b,a.length);return this.$16(c,!1,0)};e.close=function(){var a=this.$2.encodeEndOfData(this.$1);if(a==null){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to encode EndOfData","streamId: "+this.$1);return}a=this.$8.send(a);if(!a){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send EndOfData","streamId: "+this.$1+". StreamGroupTransport not open during send");return}this.$12.endOfDataSent();this.$5=!0;this.$4&&this.$17()};e.loggingContext=function(){return this.$9};e.__sendDrain=function(a){var b=d("DGWConstants").drainReasonToDrainReasonString(a);if(this.$5)return!1;a=this.$2.encodeDrain(a);if(a==null)return!1;this.$12.drainSent(b);b=this.$8.send(a);return b};e.__transportCloseHook=function(a){this.$13(),this.$10.clearPendingAcks(),a?(this.$12.error("Received StreamError","StreamErrorType: "+a),this.$6.onError(a)):this.$5&&this.$4?this.$17():(this.$12.streamClosed(!1,"Stream closed: ClosedLocally: "+this.$5.toString()+", EndOfDataReceived: "+this.$4.toString()),this.$6.onError(d("DGWStream").StreamError.PREMATURE_CLOSE))};e.$17=function(){this.$13(),this.$12.streamClosed(!0,"Graceful close"),this.$6.onClose(this)};e.__dataReceivedHook=function(a,b){this.$12.dataReceived(a.length,b!=null,b),b!=null&&this.$18(b),this.$6.onDataReceived(a)};e.__ackReceivedHook=function(a){this.$12.ackReceived(a),this.$10.handleAckReceived(a)};e.__drainReceivedHook=function(a){this.$3===!1&&(this.$6.onStreamMustDrain(this,a),this.$3=!0)};e.__endOfDataHook=function(){this.$12.endOfDataReceived(),this.$4=!0,this.$5?this.$17():this.$6.onServerHasFinishedSendingData(this)};e.__markerPoint=function(a){var b=this.$14;(h||(h=c("QuickPerformanceLogger"))).markerPoint(i,a,{instanceKey:b})};e.__markerAnnotate=function(a){var b=this.$14;(h||(h=c("QuickPerformanceLogger"))).markerAnnotate(i,a,{instanceKey:b})};e.__endMarker=function(a){(h||(h=c("QuickPerformanceLogger"))).markerEnd(i,a,this.$14)};e.$15=function(a,b,c){return this.$2.encodeData(a,b,c,this.$1)};e.$16=function(a,b,c){this.__markerPoint("send_data_start");if(this.$5){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send data","Stream closed locally");return!1}if(a==null)return!1;var e=this.$8.send(a);if(!e){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send data","ClosedLocally: "+this.$5.toString());return!1}this.__markerPoint("send_data_end");this.$12.dataSent(a.length,b,c);return!0};e.$18=function(a){var b=this.$2.encodeAck(a,this.$1);if(b==null){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to encode ACK","ackId: "+a);return!1}b=this.$8.send(b);if(!b){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send ACK","ackId: "+a);return!1}this.$12.ackSent(a);return!0};return a}();g.GroupedStream=a}),98);
__d("StreamIdGenerator",["err"],(function(a,b,c,d,e,f,g){"use strict";var h=65535;a=function(){function a(){this.$1=new Set(),this.$2=0}var b=a.prototype;b.getNextStreamId=function(){var a;if(!this.streamIdAvailable())throw c("err")("Max number of stream IDs reached");if(this.$2<=h)return this.$2++;a=(a=this.$1.values().next().value)!=null?a:0;this.$1["delete"](a);return a};b.putBackStreamId=function(a){this.$1.add(a)};b.streamIdAvailable=function(){return this.$1.size>0||this.$2<=h};return a}();g.MAX_STREAM_ID=h;g.StreamIdGeneratorImpl=a}),98);
__d("StreamGroupWebSocketTransport",["DGWConstants","DGWExponentialBackoff","DGWLoggingContext","DGWPinger","DGWStream","DGWStreamGroupCallbacks","DGWTransportEvents","DGWUtils","DGWWebSocketTransport","GroupedStream","Promise","QuickPerformanceLogger","Random","StreamIdGenerator","asyncToGeneratorRuntime","err","gkx","qex","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("qpl")._(701238781,"3037"),k=c("gkx")("12124"),l=(a=c("qex")._("4494"))!=null?a:20,m=(e=c("qex")._("4495"))!=null?e:!1,n=(f=c("qex")._("4807"))!=null?f:!1,o=function(a,b,c,e,f){var g=this;this.groupedStream=a;this.$1=window.setTimeout(function(){c(d("DGWStream").StreamError.ESTABLISHMENT_TIMEOUT)},e);this.handleEstablishFrameReceived=function(){window.clearTimeout(g.$1),b(g.groupedStream)};this.abortStream=function(a){f(),c(a)}};a=function(){function a(b,e,f,g,h,k,l,m){var n=this;this.$18=-1;this.$15=h;this.$17=this.__getStreamIdGenerator();this.$5=new Map();this.$6=new Map();this.$7=g.keepAliveMs;this.$8=!1;this.$9=!1;this.$3=!0;this.$4=!1;this.$21=!1;this.$22=!1;this.$13=f;this.$11=new TextEncoder();this.$12=new TextDecoder();this.$14=g;h={onDataReceived:function(){},handleAckReceived:function(){},receivedDrainSignal:function(a){n.$9||(n.$9=!0,n.$15(),n.$13.transportClosed(!0,""),n.$14.streamGroupCallbacks.onStreamGroupMustDrain(a),n.$5.forEach(function(b){b.__drainReceivedHook(a)}),n.onClose(d("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE))},onGroupedStreamDataReceived:function(a,b,c){if(n.$5.has(a)){var d=n.$5.get(a);d==null?void 0:d.__dataReceivedHook(b,c)}else n.$13.receivedFrameForInactiveStream("Data",a,"sendAckID: "+(c!=null?c:"null"))},onGroupedStreamAckReceived:function(a,b){if(n.$5.has(a)){var c=n.$5.get(a);c==null?void 0:c.__ackReceivedHook(b)}else n.$13.receivedFrameForInactiveStream("ACK",a,"ackId: "+(b!=null?b:"null"))},onGroupedStreamEndOfDataReceived:function(a){if(n.$5.has(a)){var b=n.$5.get(a);b==null?void 0:b.__endOfDataHook()}else n.$13.receivedFrameForInactiveStream("EndOfData",a)},onGroupedStreamEstablishStreamReceived:function(a,b){if(n.$6.has(a)){var c=n.$6.get(a);n.$6["delete"](a);b=JSON.parse(n.$12.decode(b));(b.code===void 0||b.code!==200)&&(c==null?void 0:c.abortStream(d("DGWStream").StreamError.ABNORMAL_CLOSURE));c==null?void 0:c.handleEstablishFrameReceived()}else n.$13.receivedFrameForInactiveStream("EstablishStream",a,"EstablishStream received for non-inflight stream")},onPingReceived:function(){var a=n.$2.encodePing();if(a==null)return;n.send(a)},onPongReceived:function(){n.$3=!1,n.$22||(n.$22=!0,n.__markerPoint("auth_success")),n.$13.transportPongReceived("readyState:"+n.$1.readyState+", bufferedAmount:"+n.$1.bufferedAmount)}};this.$2=new(d("DGWUtils").DGWCodec)(k,h,g.dgwVersion);this.$20=Date.now()+(Math.round(d("Random").random()*1e4)+1e4);if(g.enableFirstStreamOnWsHandshake){if(l===void 0)throw c("err")("Missing grouped stream options");if(m===void 0)throw c("err")("Missing grouped stream callbacks");var o=this.$17.getNextStreamId();f=this.createEstablishStreamFrame(o,l);h=d("DGWUtils").DGWUtils.constructConnectUrl({appId:g.appId,appVersion:g.appVersion,authType:g.authType,deviceId:(k=g.deviceId)!=null?k:void 0,dgwVersion:g.dgwVersion,fbId:g.fbId,tier:g.tier,loggingId:(h=g.loggingId)!=null?h:void 0,headers:a.__prefixAppHeaders(g.headers),endpoint:g.connectEndpoint,serviceId:g.serviceId,regionHint:(k=g.regionHint)!=null?k:void 0,establishStreamFrame:f});this.$1=e(h);if(!h.includes(d("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64))return;g=new(d("DGWLoggingContext").DGWLoggingContext)(this.$14.dgwVersion,l.loggingId,this.$14.serviceId,this.$14.fbId,this.$14.loggingId,l.disableFalcoLogging);k=this.__createGroupedStream(o,m,l,g);this.$16=this.waitForEstablishStream(o,k,l,function(a){n.$5.set(o,a)},function(){n.$17.putBackStreamId(o)})}else this.$1=e(b);(i||(i=c("QuickPerformanceLogger"))).markerStart(j,this.$20);this.__markerAnnotate({string:{serviceId:this.$14.serviceId,streamGroupId:this.$14.loggingId}})}var e=a.prototype;e.send=function(a){try{this.$1.send(a);return!0}catch(a){this.$13.transportError("Failed to send over transport","readyState: "+this.$1.readyState,a.toString());return!1}};e.close=function(){this.onClose()};e.onClose=function(a){var b;this.__markerPoint("abort");this.__markerAnnotate({"int":{abort_code:a!=null?a:0}});this.$8=!0;(b=this.$10)==null?void 0:b.cancel();this.$1.close(a)};e.abort=function(a,b,c,d,e){if(this.$8)return;this.$8=!0;this.$13.transportClosed(!1,d,e);this.$5.forEach(function(a){a.__transportCloseHook(b)});this.$6.forEach(function(a){a.abortStream(b)});this.$14.streamGroupCallbacks.onStreamGroupError(a);this.$5.clear();this.$6.clear();this.$15();this.onClose(c)};a.getTransportWithInitialStream=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,c,e,f,g,h){yield d("DGWUtils").DGWCodec.initialize();var i=new(d("DGWTransportEvents").DGWTransportEvents)(f);i.transportEstablishmentPending();var j=function(){return a.$23("",e,i,g,f,b,c)};try{j=(yield d("DGWExponentialBackoff").callWithExponentialBackoff(j,h));h=j.$16!=null?j.$16:j.establishGroupedStream(c,b,new(d("DGWLoggingContext").DGWLoggingContext)(e.dgwVersion,b.loggingId,e.serviceId,e.fbId,e.loggingId,b.disableFalcoLogging));return{transport:j,streamPromise:h}}catch(a){throw a}});function e(a,b,d,e,f,g){return c.apply(this,arguments)}return e}();a.getTransport_DEPRECATED=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,c,e,f,g){yield d("DGWUtils").DGWCodec.initialize();var h=new(d("DGWTransportEvents").DGWTransportEvents)(e);h.transportEstablishmentPending();var i=function(){return a.$23(b,c,h,f,e)};try{return yield d("DGWExponentialBackoff").callWithExponentialBackoff(i,g)}catch(a){throw a}});function e(a,b,d,e,f){return c.apply(this,arguments)}return e}();e.establishGroupedStream=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,d,e,f,g,i){var j=this;g===void 0&&(g=!0);var k=this.getStreamId(),l=this.createEstablishStreamFrame(k,d);a=this.__createGroupedStream(k,a,d,e);a.__markerAnnotate({string:{serviceId:this.$14.serviceId,streamGroupId:this.$14.loggingId,streamId:d.streamTraceId}});i!=null&&a.__markerAnnotate(i);e=this.waitForEstablishStream(k,a,d,function(a){j.$5.set(k,a)},function(){j.$17.putBackStreamId(k)});if(f!=null){a.__markerPoint("send_payload_start");a.__markerAnnotate({"int":{establishStreamPayloadSize:f.byteLength}});i=g?yield a.sendFrame(l,f):a.sendFrameAndForget(l,f);if(!i){a.__endMarker(3);return(h||(h=b("Promise"))).reject("Failed to send data when establishing stream")}a.__markerPoint("send_payload_end");a.__endMarker(2);return(h||(h=b("Promise"))).resolve(a)}a.__markerPoint("send_establish_stream_start");if(!this.send(l)){a.__endMarker(3);throw c("err")("Websocket connection closed before stream established")}a.__markerPoint("send_establish_stream_end");d=(yield e);a.__endMarker(2);return d});function d(b,c,d,e,f,g){return a.apply(this,arguments)}return d}();a.__prefixAppHeaders=function(a){return Object.keys(a).reduce(function(b,c){b[""+d("DGWConstants").HEADER_CONSTANTS.APPHEADER_PREFIX+c]=a[c];return b},{})};e.waitForEstablishStream=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,d,e,f){var g=this;this.$13.streamEstablishmentPending(a,d.loggingId);try{var i=(yield new(h||(h=b("Promise")))(function(b,d){g.$6.set(a,new o(c,b,d,3e4,function(){g.streamEndCallback(a)}))}));e(c);this.$13.streamEstablishmentSuccess(a,d.loggingId);return i}catch(b){f();this.$13.streamEstablishmentTimeout("Stream establishment timeout. readyState: "+this.$1.readyState,a,d.loggingId);throw b}});function c(b,c,d,e,f){return a.apply(this,arguments)}return c}();a.$23=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,c,e,f,g,h,i){var j=new a(b,d("DGWWebSocketTransport").getWebSocketConnection,e,c,f,g,h,i);j.$1.onmessage=a.$24(j);j.$1.onopen=function(){j.__markerPoint("onopen"),e.transportEstablished(b),j.$10!=null&&j.$10.cancel(),j.$7!=null&&(j.$10=new(d("DGWPinger").DGWPinger)(j.$7,function(){j.$25()},function(){if(n)j.abort(d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_KEEPALIVE_TIMEOUT,d("DGWStream").StreamError.KEEPALIVE_TIMEOUT,d("DGWConstants").WebsocketCloseCodes.KEEPALIVE_TIMEOUT,"Aborting transport because of keepalive timeout","readyState:"+j.$1.readyState+", bufferedAmount:"+j.$1.bufferedAmount);else if(j.$18===0&&k){var a;(a=j.$10)==null?void 0:a.reset()}else j.abort(d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_KEEPALIVE_TIMEOUT,d("DGWStream").StreamError.KEEPALIVE_TIMEOUT,d("DGWConstants").WebsocketCloseCodes.KEEPALIVE_TIMEOUT,"Aborting transport because of keepalive timeout","readyState:"+j.$1.readyState+", bufferedAmount:"+j.$1.bufferedAmount)}))};j.$1.onerror=function(){j.__markerPoint("onerror"),j.$13.transportError("onerror","readyState: "+j.$1.readyState)};j.$1.onclose=a.$26(j);c=(yield a.getTransportPromise(j));return c});function e(a,b,d,e,f,g,h){return c.apply(this,arguments)}return e}();a.getTransportPromise=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=(yield new(h||(h=b("Promise")))(function(b,c){var e=a.$1.onerror,f=a.$1.onmessage,g=a.$1.onclose;a.$19=window.setTimeout(function(){a.$15(),a.$13.transportClosed(!1,"TIMEOUT"),a.__markerPoint("connect_timeout"),a.close(),c(d("DGWStream").StreamError.TRANSPORT_ESTABLISHMENT_TIMEOUT)},l*1e3);a.$1.onerror=function(){a.$19!=null&&(window.clearTimeout(a.$19),a.$19=null),e(),m||c(d("DGWStream").StreamError.ESTABLISHMENT_ERROR)};a.$1.onclose=function(b){a.$19!=null&&(window.clearTimeout(a.$19),a.$19=null),g(b),b.code===d("DGWConstants").WebsocketCloseCodes.UNAUTHORIZED?c(d("DGWStream").StreamError.UNAUTHORIZED):c(b.code+":"+b.reason)};a.$1.onmessage=function(c){f(c),a.$19!=null&&!a.$3&&(window.clearTimeout(a.$19),a.$19=null,a.__markerPoint("connect_success"),b(a))}}));return c});function c(b){return a.apply(this,arguments)}return c}();a.$24=function(a){return function(b){var c;a.$21||(a.$21=!0,a.__markerPoint("onmessage"));(c=a.$10)==null?void 0:c.reset();if(!(b.data instanceof ArrayBuffer)){a.$13.transportError("Incorrect Data Protocol","Received "+typeof b.data+" instead of ArrayBuffer");return}a.$2.append(new Uint8Array(b.data));a.$2.processData()}};a.$26=function(a){return function(b){var c;a.__markerPoint("onclose");a.__markerAnnotate({string:{reason:b.reason},"int":{code:b.code}});a.__endMarker(b.code===d("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE?2:3);(c=a.$10)==null?void 0:c.cancel();if(a.$8===!0||a.$4)return;a.$8=!0;if(a.$3===!0){a.$13.transportEstablishmentFailure(b);a.$5.clear();a.$15();return}a.$15();a.$3=!0;if(b.code!==d("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE){a.$13.transportClosed(!1,"Websocket connection failure with code: "+b.code+" reason: "+b.reason+" wasClean: "+String(b.wasClean));c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNKNOWN_ERROR;var e=d("DGWStream").StreamError.UNKNOWN_ERROR;switch(b.code){case d("DGWConstants").WebsocketCloseCodes.NORMAL_CLOSURE:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_NORMAL_CLOSURE;e=d("DGWStream").StreamError.ABNORMAL_CLOSURE;break;case d("DGWConstants").WebsocketCloseCodes.ABNORMAL_CLOSURE:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_ABNORMAL_CLOSURE;e=d("DGWStream").StreamError.ABNORMAL_CLOSURE;break;case d("DGWConstants").WebsocketCloseCodes.SERVER_INTERNAL_ERROR:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_SERVER_INTERNAL_ERROR;e=d("DGWStream").StreamError.SERVER_INTERNAL_ERROR;break;case d("DGWConstants").WebsocketCloseCodes.GOING_AWAY:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_GOING_AWAY;e=d("DGWStream").StreamError.GOING_AWAY;break;case d("DGWConstants").WebsocketCloseCodes.UNAUTHORIZED:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNAUTHORIZED;e=d("DGWStream").StreamError.UNAUTHORIZED;break;case d("DGWConstants").WebsocketCloseCodes.REJECTED:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_REJECTED;e=d("DGWStream").StreamError.REJECTED;break;case d("DGWConstants").WebsocketCloseCodes.BAD_REQUEST:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_BAD_REQUEST;e=d("DGWStream").StreamError.BAD_REQUEST;break;case d("DGWConstants").WebsocketCloseCodes.DGW_SERVER_ERROR:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_SERVER_INTERNAL_ERROR;e=d("DGWStream").StreamError.DGW_SERVER_ERROR;c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_DGW_SERVER_ERROR;break;default:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNKNOWN_ERROR;e=d("DGWStream").StreamError.UNKNOWN_ERROR;break}a.$14.streamGroupCallbacks.onStreamGroupError(c);a.$5.forEach(function(a){a.__transportCloseHook(e)});a.$6.forEach(function(a){a.abortStream(e)})}else a.$13.transportClosed(!0,""),a.$14.streamGroupCallbacks.onStreamGroupTransportClose(),a.$5.forEach(function(a){a.__transportCloseHook()}),a.$6.forEach(function(a){a.abortStream(d("DGWStream").StreamError.TRANSPORT_CLOSED_BEFORE_STREAM_INIT)});a.$5.clear();a.$6.clear()}};e.$25=function(){var a=this.$2.encodePing();if(a==null)throw c("err")("Failed to encode Ping Frame");var b=this.send(a);this.$18=this.$1.bufferedAmount;this.$13.transportPingSent("readyState:"+this.$1.readyState+", bufferedAmount:"+this.$18+", payloadSize:"+(a==null?void 0:a.byteLength)+", sent:"+String(b))};e.isClosedLocally=function(){return this.$3||this.$8||this.$4};e.streamEndCallback=function(a){this.$5["delete"](a),this.$6["delete"](a),this.$17.putBackStreamId(a)};e.canCreateGroupedStream=function(){return this.$17.streamIdAvailable()};e.createEstablishStreamFrame=function(b,e){var f=a.__prefixAppHeaders(e.groupedStreamHeaders);e.streamTraceId!=null&&(f[d("DGWConstants").HEADER_CONSTANTS.HEADER_STREAM_TRACE_ID]=e.streamTraceId);e=this.$2.encodeEstablishStream(b,new Uint8Array(this.$11.encode(JSON.stringify(f))));if(e==null){this.$17.putBackStreamId(b);throw c("err")("Failed to encode EstablishStreamFrame")}return e};e.getStreamId=function(){try{return this.$17.getNextStreamId()}catch(a){this.$13.ranOutOfStreamIds("inFlightGroupedStreamSize: "+this.$6.size+" groupedStreamSize: "+this.$5.size);throw a}};e.__createGroupedStream=function(a,b,c,e){var f=this;return new(d("GroupedStream").GroupedStream)(a,b,c,this,e,this.$2,function(){f.streamEndCallback(a)})};e.__getStreamIdGenerator=function(){return new(d("StreamIdGenerator").StreamIdGeneratorImpl)()};e.__markerPoint=function(a){var b=this.$20;(i||(i=c("QuickPerformanceLogger"))).markerPoint(j,a,{instanceKey:b})};e.__markerAnnotate=function(a){var b=this.$20;(i||(i=c("QuickPerformanceLogger"))).markerAnnotate(j,a,{instanceKey:b})};e.__endMarker=function(a){(i||(i=c("QuickPerformanceLogger"))).markerEnd(j,a,this.$20)};return a}();g.StreamGroupWebSocketTransport=a}),98);
__d("StreamGroup",["DGWConstants","DGWLoggingContext","DGWUtils","StreamGroupWebSocketTransport","asyncToGeneratorRuntime","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h={maxRetries:c("justknobx")._("2595"),baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)};a=function(){function a(a,b,c,e,f,g,h,i,j){this.$2=j;this.$1=j.getNewStreamGroupId();j=(j=h.overrideUrl)!=null?j:f;this.$5=null;this.$3={appId:a,appVersion:b,authType:c,deviceId:h.deviceId,dgwVersion:e,headers:h.streamGroupAppHeaders,tier:(f=h.serviceTier)!=null?f:d("DGWConstants").DEFAULT_SERVICE_TIER,connectEndpoint:j,fbId:g,loggingId:h.loggingId,serviceId:h.serviceId,streamGroupCallbacks:i,keepAliveMs:h.keepAliveMs,regionHint:h.regionHint,enableFirstStreamOnWsHandshake:!1};this.$4=h;this.streamGroupLoggingContext=new(d("DGWLoggingContext").DGWLoggingContext)(this.$3.dgwVersion,null,this.$3.serviceId,this.$3.fbId,this.$4.loggingId,!1,(a=h.verboseLoggingEnabled)!=null?a:!1);this.$6=d("DGWUtils").DGWUtils.constructConnectUrl({appId:this.$3.appId,appVersion:this.$3.appVersion,authType:this.$3.authType,deviceId:(b=this.$3.deviceId)!=null?b:void 0,dgwVersion:this.$3.dgwVersion,fbId:this.$3.fbId,headers:babelHelpers["extends"]({},this.$3.headers),loggingId:(c=this.$3.loggingId)!=null?c:void 0,tier:this.$3.tier,serviceId:this.$3.serviceId,endpoint:this.$3.connectEndpoint,regionHint:(e=this.$3.regionHint)!=null?e:void 0,trafficTracing:(f=this.$4.trafficTracing)!=null?f:void 0})}var c=a.prototype;c.initTransport=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=this,a={maxRetries:0,baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)};this.$5=this.$5||d("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransport_DEPRECATED(this.$6,this.$3,this.streamGroupLoggingContext,function(){b.$2.removeStreamGroupAndTransport(b.$1)},a);var c;try{c=(yield this.$5),this.$5=null}catch(a){this.$5=null;throw a}this.$2.containsStreamGroup(this.$1)||this.$2.setStreamGroupAndTransport(this.$1,c);return c});function c(){return a.apply(this,arguments)}return c}();c.establishStream=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f){var g=this;if(this.$2.containsStreamGroup(this.$1)===!1){this.streamGroupLoggingContext.logEvent(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"createTransportWhenEstablishStream");if(!this.$3.enableFirstStreamOnWsHandshake){this.$5=this.$5||d("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransport_DEPRECATED(this.$6,this.$3,this.streamGroupLoggingContext,function(){g.$2.removeStreamGroupAndTransport(g.$1)},h);var i;try{i=(yield this.$5),this.$5=null}catch(a){this.$5=null;throw a}this.$2.containsStreamGroup(this.$1)||this.$2.setStreamGroupAndTransport(this.$1,i)}else{var j=(yield d("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransportWithInitialStream(a,b,this.$3,this.streamGroupLoggingContext,function(){g.$2.removeStreamGroupAndTransport(g.$1)},h));this.$2.setStreamGroupAndTransport(this.$1,j.transport);return j.streamPromise}}return this.establishStreamWithTransport(a,b,c,e,f)});function c(b,c,d,e,f){return a.apply(this,arguments)}return c}();c.establishStreamWithTransport=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f){var g=a.loggingId;this.streamGroupLoggingContext.logEvent(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"Establishing Grouped Stream","initialData:"+String(c!=null),!0,g);g=(yield this.$2.getStreamGroupTransport(this.$1).establishGroupedStream(b,a,new(d("DGWLoggingContext").DGWLoggingContext)(this.$3.dgwVersion,g,this.$3.serviceId,this.$3.fbId,this.$3.loggingId,a.disableFalcoLogging,(b=a.verboseLoggingEnabled)!=null?b:!1),c,e,f));return g});function c(b,c,d,e,f){return a.apply(this,arguments)}return c}();c.canCreateGroupedStream=function(){var a=!0;if(this.$2.containsStreamGroup(this.$1)!==!1){var b=this.$2.getStreamGroupTransport(this.$1);a=b.canCreateGroupedStream()}d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,a?"can_create":"cannot_create");return a};c.close=function(){var a=this.$2.getStreamGroupTransport(this.$1);a.close()};return a}();g.StreamGroup=a}),98);
__d("StreamGroupRegistry",["Random","err"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=new Map(),this.$2=new Set()}var b=a.prototype;b.setStreamGroupAndTransport=function(a,b){this.$1.set(a,b)};b.containsStreamGroup=function(a){return this.$1.has(a)};b.removeStreamGroupAndTransport=function(a){this.$1["delete"](a)};b.getStreamGroupTransport=function(a){a=this.$1.get(a);if(a==null)throw c("err")("No stream group transport");return a};b.getNewStreamGroupId=function(){var a=d("Random").uint32();while(this.$2.has(a))a=d("Random").uint32();this.$2.add(a);return a};return a}();g.StreamGroupRegistry=a}),98);
__d("RawDGWClient",["CurrentUser","DGWLoggingContext","DGWStream","StreamGroup","StreamGroupRegistry","isFastRefreshEnabledForCurrentDomain"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=a.appId,c=a.appVersion,e=a.authType,f=a.dgwVersion,g=a.endpoint;a=a.fbId;this.$1=b;this.$2=c;this.$3=e;this.$4=f;this.$5=g;this.$6=a;this.$7=new(d("StreamGroupRegistry").StreamGroupRegistry)()}var b=a.prototype;b.createStreamGroup=function(a,b){this.handleUserChecks();return new(d("StreamGroup").StreamGroup)(this.$1,this.$2,this.$3,this.$4,this.$5,this.$6,b,a,this.$7)};b.handleUserChecks=function(){if(!c("CurrentUser").isLoggedInNow()&&!c("isFastRefreshEnabledForCurrentDomain")()){d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.RAW_CLIENT,"unauthenticated");throw d("DGWStream").StreamError.UNAUTHENTICATED}};return a}();g.RawDGWClient=a}),98);
__d("DGWClient",["DGWAuth","DGWEnvUtil","DGWWebConfig","RawDGWClient","err"],(function(a,b,c,d,e,f,g){"use strict";var h=new(d("RawDGWClient").RawDGWClient)({appId:c("DGWWebConfig").appId,appVersion:c("DGWWebConfig").appVersion,authType:d("DGWAuth").fromStringToDGWAuth(c("DGWEnvUtil").getDGWAuthType()),dgwVersion:c("DGWEnvUtil").getDGWVersion(),endpoint:c("DGWEnvUtil").getDGWEndpoint(),fbId:c("DGWWebConfig").fbId});function a(){if(c("DGWEnvUtil").isDGWEnvCompatible())return h;else throw c("err")("unsupported_environment_retry_with_mqtt")}g["default"]=a}),98);
__d("DGWRequestStreamUtils",["Base64","WebDriverConfig","cr:3024","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a,d,e,f){var g={};for(a of Object.entries(a)){var h=a[0],i=a[1];typeof i=="string"?g["XRSS-"+h]=i:typeof i=="number"?g["XRSN-"+h]=i.toString():typeof i=="boolean"?g["XRSB-"+h]=i.toString():typeof i=="object"&&i!=null&&(g["XRSO-"+h]=c("Base64").encode(JSON.stringify(i)))}d&&(g["xrs-body"]="true");e!=null&&e.length>0&&(g["xrs-instrumentation"]=c("Base64").encode(e));g["XRS-Accept-Ack"]="RSAck";f!=null&&f.ackTimeoutSec!=null&&(g["XRS-SRAck-Timeout"]=f.ackTimeoutSec.toString());g["XRSS-http_referer"]=window.location.href;if(c("WebDriverConfig").isTestRunning&&c("gkx")("20919")){h=b("cr:3024")==null?void 0:b("cr:3024").get();h!=null&&(g["XRSB-is_test"]="true",g["XRSS-original_request_id"]=h)}return g}function h(a){return Object.keys(a).reduce(function(b,c){(typeof a[c]==="string"||typeof a[c]==="boolean"||typeof a[c]==="number"||typeof a[c]==="object")&&(b[c]=a[c]);return b},{})}function d(a){if(a.response&&a.response.instrumentation_data!=null&&a.response.instrumentation_data.length>0)try{a=JSON.parse(new TextDecoder("utf-8").decode(a.response.instrumentation_data));return{auxId:a.auxId,dfTraceId:(a=a.dataFlowTracingData)==null?void 0:a.traceId}}catch(a){}return null}function e(a,b){var c=a.headers;a=a.body;b.kill_body===!0&&(a=null);b.new_body!=null&&(a=b.new_body);if(b.new_headers!=null)try{c=h(JSON.parse(b.new_headers))}catch(a){}if(b.patch_headers!=null)try{c=babelHelpers["extends"]({},c,{},h(JSON.parse(b.patch_headers)))}catch(a){}return{headers:c,body:a}}g.convertHeaders=a;g.cleanHeaders=h;g.getInstrumentationDataFieldsFromPayload=d;g.transformContextWithRewriteDelta=e}),98);
__d("DGWStreamHandler",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b,c,d,e){this.$2=a,this.$3=b,this.$4=c,this.$5=d,this.$6=e,this.$1=!0}var b=a.prototype;b.onClose=function(a){if(!this.$1)return;this.$2(a)};b.onDataReceived=function(a){if(!this.$1)return;this.$3(a)};b.onError=function(a){if(!this.$1)return;this.$4(a)};b.onStreamMustDrain=function(a,b){if(!this.$1)return;this.$5(a,b)};b.onServerHasFinishedSendingData=function(a){if(!this.$1)return;this.$6(a)};b.stop=function(){this.$1=!1};b.isStopped=function(){return!this.$1};return a}();f["default"]=a}),66);
__d("InflightAmends",["Deferred","err"],(function(a,b,c,d,e,f,g){"use strict";var h="inflight_amends_timeout",i="inflight_amends_duplicate_id";a=function(){function a(a,b,c){this.$1=a,this.$3=b,this.$4=c,this.$2=new Map()}var b=a.prototype;b.add=function(a){var b=this;if(this.$2.has(a))throw c("err")(i);var d=new(c("Deferred"))(),e=Date.now(),f=setTimeout(function(){b.$2.has(a)&&b.reject(a,c("err")(h))},this.$1);this.$2.set(a,{id:a,deferred:d,createdTimestampMs:e,timeoutId:f});return d.getPromise()};b.getPromise=function(a){return(a=this.$5(a))==null?void 0:a.deferred.getPromise()};b.resolve=function(a,b){a=this.$5(a);a&&(a.deferred.resolve==null?void 0:a.deferred.resolve(b),this.$3(a.id,Date.now()-a.createdTimestampMs),this.$6(a))};b.reject=function(a,b){a=this.$5(a);a&&(a.deferred.reject==null?void 0:a.deferred.reject(b),this.$4(a.id,b),this.$6(a))};b.rejectAll=function(a){for(var b of this.$2.entries()){var c=b[0];b[1];this.reject(c,a)}};b.getSize=function(){return this.$2.size};b.getAllPromises=function(){var a=[];for(var b of this.$2.values())a.push(b.deferred.getPromise());return a};b.$6=function(a){clearTimeout(a.timeoutId),this.$2["delete"](a.id)};b.$5=function(a){return this.$2.get(a)};return a}();g["default"]=a}),98);
__d("RequestStreamCloseReason",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["UserIntention","StartStreamFailure","StreamError","RemoteTermination","ServerDataEnd","ServerDrain","ReestablishError","ClientError"]);f.RequestStreamCloseReason=a}),66);
__d("RequestStreamCommonRequestStreamCommonSerializers",["RequestStreamCommonRequestStreamCommonTypes","ThriftTypes","jsbi"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return{}}function b(){return{expected_existing_headers:"",patch_headers_if_match:""}}function e(){return{bytes:Uint8Array.of()}}function f(){return{message:""}}function i(){return{reason:d("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0)}}function j(){return{}}function k(){return{stream_id:"0",last_sequencer:0,amendment_count:0,last_status:d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0)}}function l(){return{caller_timestamp_ms:"0"}}function m(){return{original_ping_timestamp_ms:"0"}}function n(){return{}}function o(a,b){b.writeStructBegin("ResponseRewriteRequest"),a.new_headers!=null&&(b.writeFieldBegin({fname:"new_headers",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.new_headers),b.writeFieldEnd()),a.new_body!=null&&(b.writeFieldBegin({fname:"new_body",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeBinary(a.new_body),b.writeFieldEnd()),a.patch_headers!=null&&(b.writeFieldBegin({fname:"patch_headers",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeString(a.patch_headers),b.writeFieldEnd()),a.kill_body!=null&&(b.writeFieldBegin({fname:"kill_body",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:4}),b.writeBool(a.kill_body),b.writeFieldEnd()),a.temporary!=null&&(b.writeFieldBegin({fname:"temporary",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:5}),b.writeBool(a.temporary),b.writeFieldEnd()),a.conditional_patch_headers!=null&&(b.writeFieldBegin({fname:"conditional_patch_headers",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6}),p(a.conditional_patch_headers,b),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function p(a,b){b.writeStructBegin("ResponseRewriteConditionalPatchHeaders");b.writeFieldBegin({fname:"expected_existing_headers",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.expected_existing_headers!=null)b.writeString(a.expected_existing_headers);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"patch_headers_if_match",ftype:h.STRING,fid:2});if(a.patch_headers_if_match!=null)b.writeString(a.patch_headers_if_match);else{d="";b.writeString(d)}b.writeFieldEnd();a.patch_headers_otherwise!=null&&(b.writeFieldBegin({fname:"patch_headers_otherwise",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeString(a.patch_headers_otherwise),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function q(a,b){b.writeStructBegin("ResponseData");b.writeFieldBegin({fname:"bytes",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.bytes!=null)b.writeBinary(a.bytes);else{var d=Uint8Array.of();b.writeBinary(d)}b.writeFieldEnd();a.metadata!=null&&(b.writeFieldBegin({fname:"metadata",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.metadata),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function r(a,b){b.writeStructBegin("LogMessage");b.writeFieldBegin({fname:"message",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.message!=null)b.writeString(a.message);else{a="";b.writeString(a)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function s(a,b){b.writeStructBegin("Termination");b.writeFieldBegin({fname:"reason",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.reason!=null){var e;b.writeI32((e=a.reason)!=null?e:0)}else{e=d("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();a.message!=null&&(b.writeFieldBegin({fname:"message",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.message),b.writeFieldEnd());a.retry_delay_ms!=null&&(b.writeFieldBegin({fname:"retry_delay_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:3}),b.writeI64(c("jsbi").BigInt(a.retry_delay_ms)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function t(a,b){b.writeStructBegin("AmendStreamAck"),a.amendment_id!=null&&(b.writeFieldBegin({fname:"amendment_id",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1}),b.writeI64(c("jsbi").BigInt(a.amendment_id)),b.writeFieldEnd()),a.accepted!=null&&(b.writeFieldBegin({fname:"accepted",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:2}),b.writeBool(a.accepted),b.writeFieldEnd()),a.result!=null&&(b.writeFieldBegin({fname:"result",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeBinary(a.result),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function u(a,b){b.writeStructBegin("StreamCheck");b.writeFieldBegin({fname:"stream_id",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.stream_id!=null)b.writeI64(c("jsbi").BigInt(a.stream_id));else{var e="0";b.writeI64(c("jsbi").BigInt(e))}b.writeFieldEnd();b.writeFieldBegin({fname:"last_sequencer",ftype:h.I32,fid:2});if(a.last_sequencer!=null)b.writeI32(a.last_sequencer);else{e=0;b.writeI32(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"amendment_count",ftype:h.I32,fid:4});if(a.amendment_count!=null)b.writeI32(a.amendment_count);else{e=0;b.writeI32(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"last_status",ftype:h.I32,fid:3});if(a.last_status!=null){b.writeI32((e=a.last_status)!=null?e:0)}else{a=d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0);b.writeI32(a!=null?a:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function v(a,b){b.writeStructBegin("Ping");b.writeFieldBegin({fname:"caller_timestamp_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.caller_timestamp_ms!=null)b.writeI64(c("jsbi").BigInt(a.caller_timestamp_ms));else{var d="0";b.writeI64(c("jsbi").BigInt(d))}b.writeFieldEnd();if(a.streams_to_check!=null){b.writeFieldBegin({fname:"streams_to_check",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:2});b.writeListBegin({etype:h.STRUCT,size:a.streams_to_check.length});for(d of a.streams_to_check)u(d,b);b.writeListEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function w(a,b){b.writeStructBegin("Pong");b.writeFieldBegin({fname:"original_ping_timestamp_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.original_ping_timestamp_ms!=null)b.writeI64(c("jsbi").BigInt(a.original_ping_timestamp_ms));else{var d="0";b.writeI64(c("jsbi").BigInt(d))}b.writeFieldEnd();if(a.stream_ids_missing!=null){b.writeFieldBegin({fname:"stream_ids_missing",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:2});b.writeListBegin({etype:h.I64,size:a.stream_ids_missing.length});for(d of a.stream_ids_missing)b.writeI64(c("jsbi").BigInt(d));b.writeListEnd();b.writeFieldEnd()}if(a.stream_ids_behind!=null){b.writeFieldBegin({fname:"stream_ids_behind",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:3});b.writeListBegin({etype:h.I64,size:a.stream_ids_behind.length});for(d of a.stream_ids_behind)b.writeI64(c("jsbi").BigInt(d));b.writeListEnd();b.writeFieldEnd()}if(a.stream_ids_with_lost_amendments!=null){b.writeFieldBegin({fname:"stream_ids_with_lost_amendments",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:4});b.writeListBegin({etype:h.I64,size:a.stream_ids_with_lost_amendments.length});for(d of a.stream_ids_with_lost_amendments)b.writeI64(c("jsbi").BigInt(d));b.writeListEnd();b.writeFieldEnd()}if(a.stream_ids_with_wrong_status!=null){b.writeFieldBegin({fname:"stream_ids_with_wrong_status",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:5});b.writeListBegin({etype:h.I64,size:a.stream_ids_with_wrong_status.length});for(d of a.stream_ids_with_wrong_status)b.writeI64(c("jsbi").BigInt(d));b.writeListEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function x(a,b){b.writeStructBegin("StreamResponseDelta");if(a.flow_status!=null){var d;b.writeFieldBegin({fname:"flow_status",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});b.writeI32((d=a.flow_status)!=null?d:0);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.log!=null){b.writeFieldBegin({fname:"log",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2});r(a.log,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.rewrite!=null){b.writeFieldBegin({fname:"rewrite",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:3});o(a.rewrite,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.data!=null){b.writeFieldBegin({fname:"data",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:4});q(a.data,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.termination!=null){b.writeFieldBegin({fname:"termination",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:5});s(a.termination,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.amend_ack!=null){b.writeFieldBegin({fname:"amend_ack",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6});t(a.amend_ack,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}b.writeFieldStop();b.writeStructEnd()}function y(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.new_headers=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.new_body=a.readBinary():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.patch_headers=a.readString():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).BOOL?b.kill_body=a.readBool():a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).BOOL?b.temporary=a.readBool():a.skip(e);break;case 6:e===(h||(h=c("ThriftTypes"))).STRUCT?b.conditional_patch_headers=z(a):a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function z(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.expected_existing_headers=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.patch_headers_if_match=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.patch_headers_otherwise=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.expected_existing_headers===void 0&&(b.expected_existing_headers="");b.patch_headers_if_match===void 0&&(b.patch_headers_if_match="");return b}function A(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.bytes=a.readBinary():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.metadata=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.bytes===void 0&&(b.bytes=Uint8Array.of());return b}function B(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.message=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.message===void 0&&(b.message="");return b}function C(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.reason=d("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.message=a.readString():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I64?b.retry_delay_ms=a.readI64().toString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.reason===void 0&&(b.reason=d("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0));return b}function D(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.amendment_id=a.readI64().toString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).BOOL?b.accepted=a.readBool():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.result=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function E(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I64?b.stream_id=a.readI64().toString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.last_sequencer=a.readI32():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).I32?b.amendment_count=a.readI32():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.last_status=d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.stream_id===void 0&&(b.stream_id="0");b.last_sequencer===void 0&&(b.last_sequencer=0);b.amendment_count===void 0&&(b.amendment_count=0);b.last_status===void 0&&(b.last_status=d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0));return b}function F(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.caller_timestamp_ms=a.readI64().toString():a.skip(e);break;case 2:if(e===(h||(h=c("ThriftTypes"))).LIST){b.streams_to_check=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=E(a);b.streams_to_check.push(g)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.caller_timestamp_ms===void 0&&(b.caller_timestamp_ms="0");return b}function G(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.original_ping_timestamp_ms=a.readI64().toString():a.skip(e);break;case 2:if(e===(h||(h=c("ThriftTypes"))).LIST){b.stream_ids_missing=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=a.readI64().toString();b.stream_ids_missing.push(g)}}else a.skip(e);break;case 3:if(e===(h||(h=c("ThriftTypes"))).LIST){b.stream_ids_behind=[];g=a.readListBegin();for(f=0;f<g.size;f++){d=a.readI64().toString();b.stream_ids_behind.push(d)}}else a.skip(e);break;case 4:if(e===(h||(h=c("ThriftTypes"))).LIST){b.stream_ids_with_lost_amendments=[];d=a.readListBegin();for(f=0;f<d.size;f++){g=a.readI64().toString();b.stream_ids_with_lost_amendments.push(g)}}else a.skip(e);break;case 5:if(e===(h||(h=c("ThriftTypes"))).LIST){b.stream_ids_with_wrong_status=[];g=a.readListBegin();for(f=0;f<g.size;f++){d=a.readI64().toString();b.stream_ids_with_wrong_status.push(d)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.original_ping_timestamp_ms===void 0&&(b.original_ping_timestamp_ms="0");return b}function H(a){var b,e={};a.readStructBegin();while(!0){var f=a.readFieldBegin(),g=f.ftype;f=f.fid;if(g===(h||(h=c("ThriftTypes"))).STOP)break;switch(f){case 1:if(g===(h||(h=c("ThriftTypes"))).I32)if(b==null)e.flow_status=d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(a.readI32()),b="flow_status";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: flow_status, previous deserialized field: "+b);else a.skip(g);break;case 2:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.log=B(a),b="log";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: log, previous deserialized field: "+b);else a.skip(g);break;case 3:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.rewrite=y(a),b="rewrite";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: rewrite, previous deserialized field: "+b);else a.skip(g);break;case 4:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.data=A(a),b="data";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: data, previous deserialized field: "+b);else a.skip(g);break;case 5:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.termination=C(a),b="termination";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: termination, previous deserialized field: "+b);else a.skip(g);break;case 6:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.amend_ack=D(a),b="amend_ack";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: amend_ack, previous deserialized field: "+b);else a.skip(g);break;default:a.skip(g)}a.readFieldEnd()}a.readStructEnd();return e}g.ResponseRewriteRequest$DefaultConstructor=a;g.ResponseRewriteConditionalPatchHeaders$DefaultConstructor=b;g.ResponseData$DefaultConstructor=e;g.LogMessage$DefaultConstructor=f;g.Termination$DefaultConstructor=i;g.AmendStreamAck$DefaultConstructor=j;g.StreamCheck$DefaultConstructor=k;g.Ping$DefaultConstructor=l;g.Pong$DefaultConstructor=m;g.StreamResponseDelta$DefaultConstructor=n;g.serializeResponseRewriteRequest=o;g.serializeResponseRewriteConditionalPatchHeaders=p;g.serializeResponseData=q;g.serializeLogMessage=r;g.serializeTermination=s;g.serializeAmendStreamAck=t;g.serializeStreamCheck=u;g.serializePing=v;g.serializePong=w;g.serializeStreamResponseDelta=x;g.deserializeResponseRewriteRequest=y;g.deserializeResponseRewriteConditionalPatchHeaders=z;g.deserializeResponseData=A;g.deserializeLogMessage=B;g.deserializeTermination=C;g.deserializeAmendStreamAck=D;g.deserializeStreamCheck=E;g.deserializePing=F;g.deserializePong=G;g.deserializeStreamResponseDelta=H}),98);
__d("RequestStreamSingleChannelSingleChannelRequestStreamTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({Ignored:100,Success:200,Queued:250,UnknownStream:400,HandledUnknownResult:450,Failure:500});c=b("$InternalEnum")({Request_headers:"request_headers",Request_body:"request_body",Amend:"amend",Ack:"ack",Response:"response",Ping:"ping",Pong:"pong"});e.exports={Ack:a,Payload$Types:c}}),null);
__d("RequestStreamSingleChannelSingleChannelRequestStreamSerializers",["RequestStreamCommonRequestStreamCommonSerializers","RequestStreamCommonRequestStreamCommonTypes","RequestStreamSingleChannelSingleChannelRequestStreamTypes","ThriftTypes","jsbi"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return{}}function b(){return{body:Uint8Array.of()}}function e(){return{amendment:Uint8Array.of()}}function f(){return{ack:d("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0)}}function i(){return{delta:[]}}function j(){return{}}function k(a,b){b.writeStructBegin("RequestStreamHeaders"),a.headers!=null&&(b.writeFieldBegin({fname:"headers",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeBinary(a.headers),b.writeFieldEnd()),a.instrumentation_data!=null&&(b.writeFieldBegin({fname:"instrumentation_data",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeBinary(a.instrumentation_data),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function l(a,b){b.writeStructBegin("RequestStreamBody");b.writeFieldBegin({fname:"body",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.body!=null)b.writeBinary(a.body);else{a=Uint8Array.of();b.writeBinary(a)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function m(a,b){b.writeStructBegin("AmendStream");a.amendment_id!=null&&(b.writeFieldBegin({fname:"amendment_id",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1}),b.writeI64(c("jsbi").BigInt(a.amendment_id)),b.writeFieldEnd());b.writeFieldBegin({fname:"amendment",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2});if(a.amendment!=null)b.writeBinary(a.amendment);else{var d=Uint8Array.of();b.writeBinary(d)}b.writeFieldEnd();a.is_query!=null&&(b.writeFieldBegin({fname:"is_query",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:3}),b.writeBool(a.is_query),b.writeFieldEnd());a.instrumentation_data!=null&&(b.writeFieldBegin({fname:"instrumentation_data",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeBinary(a.instrumentation_data),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function n(a,b){b.writeStructBegin("StreamResponseAck");a.response_id!=null&&(b.writeFieldBegin({fname:"response_id",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1}),b.writeI64(c("jsbi").BigInt(a.response_id)),b.writeFieldEnd());b.writeFieldBegin({fname:"ack",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2});if(a.ack!=null){var e;b.writeI32((e=a.ack)!=null?e:0)}else{e=d("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();a.query_result!=null&&(b.writeFieldBegin({fname:"query_result",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeBinary(a.query_result),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function o(a,b){b.writeStructBegin("StreamResponse");a.response_id!=null&&(b.writeFieldBegin({fname:"response_id",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1}),b.writeI64(c("jsbi").BigInt(a.response_id)),b.writeFieldEnd());b.writeFieldBegin({fname:"delta",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:2});if(a.delta!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.delta.length});for(var e of a.delta)d("RequestStreamCommonRequestStreamCommonSerializers").serializeStreamResponseDelta(e,b);b.writeListEnd()}else{e=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:e.length});for(e of e)d("RequestStreamCommonRequestStreamCommonSerializers").serializeStreamResponseDelta(e,b);b.writeListEnd()}b.writeFieldEnd();if(a.ack_level!=null){b.writeFieldBegin({fname:"ack_level",ftype:(h||(h=c("ThriftTypes"))).I32,fid:3});b.writeI32((e=a.ack_level)!=null?e:0);b.writeFieldEnd()}a.query_request!=null&&(b.writeFieldBegin({fname:"query_request",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeBinary(a.query_request),b.writeFieldEnd());a.instrumentation_data!=null&&(b.writeFieldBegin({fname:"instrumentation_data",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:5}),b.writeBinary(a.instrumentation_data),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function p(a,b){b.writeStructBegin("Payload");if(a.request_headers!=null){b.writeFieldBegin({fname:"request_headers",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1});k(a.request_headers,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.request_body!=null){b.writeFieldBegin({fname:"request_body",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2});l(a.request_body,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.amend!=null){b.writeFieldBegin({fname:"amend",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:3});m(a.amend,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.ack!=null){b.writeFieldBegin({fname:"ack",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:4});n(a.ack,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.response!=null){b.writeFieldBegin({fname:"response",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:5});o(a.response,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.ping!=null){b.writeFieldBegin({fname:"ping",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6});d("RequestStreamCommonRequestStreamCommonSerializers").serializePing(a.ping,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.pong!=null){b.writeFieldBegin({fname:"pong",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:7});d("RequestStreamCommonRequestStreamCommonSerializers").serializePong(a.pong,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}b.writeFieldStop();b.writeStructEnd()}function q(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.headers=a.readBinary():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.instrumentation_data=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function r(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.body=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.body===void 0&&(b.body=Uint8Array.of());return b}function s(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.amendment_id=a.readI64().toString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.amendment=a.readBinary():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).BOOL?b.is_query=a.readBool():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.instrumentation_data=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.amendment===void 0&&(b.amendment=Uint8Array.of());return b}function t(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I64?b.response_id=a.readI64().toString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.ack=d("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(a.readI32()):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRING?b.query_result=a.readBinary():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.ack===void 0&&(b.ack=d("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0));return b}function u(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I64?b.response_id=a.readI64().toString():a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).LIST){b.delta=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=d("RequestStreamCommonRequestStreamCommonSerializers").deserializeStreamResponseDelta(a);b.delta.push(i)}}else a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.ack_level=d("RequestStreamCommonRequestStreamCommonTypes").AckLevel.cast(a.readI32()):a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.query_request=a.readBinary():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRING?b.instrumentation_data=a.readBinary():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.delta===void 0&&(b.delta=[]);return b}function v(a){var b,e={};a.readStructBegin();while(!0){var f=a.readFieldBegin(),g=f.ftype;f=f.fid;if(g===(h||(h=c("ThriftTypes"))).STOP)break;switch(f){case 1:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.request_headers=q(a),b="request_headers";else throw new Error("more than one field have been deserialized in union type: Payload; current field: request_headers, previous deserialized field: "+b);else a.skip(g);break;case 2:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.request_body=r(a),b="request_body";else throw new Error("more than one field have been deserialized in union type: Payload; current field: request_body, previous deserialized field: "+b);else a.skip(g);break;case 3:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.amend=s(a),b="amend";else throw new Error("more than one field have been deserialized in union type: Payload; current field: amend, previous deserialized field: "+b);else a.skip(g);break;case 4:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.ack=t(a),b="ack";else throw new Error("more than one field have been deserialized in union type: Payload; current field: ack, previous deserialized field: "+b);else a.skip(g);break;case 5:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.response=u(a),b="response";else throw new Error("more than one field have been deserialized in union type: Payload; current field: response, previous deserialized field: "+b);else a.skip(g);break;case 6:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.ping=d("RequestStreamCommonRequestStreamCommonSerializers").deserializePing(a),b="ping";else throw new Error("more than one field have been deserialized in union type: Payload; current field: ping, previous deserialized field: "+b);else a.skip(g);break;case 7:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.pong=d("RequestStreamCommonRequestStreamCommonSerializers").deserializePong(a),b="pong";else throw new Error("more than one field have been deserialized in union type: Payload; current field: pong, previous deserialized field: "+b);else a.skip(g);break;default:a.skip(g)}a.readFieldEnd()}a.readStructEnd();return e}g.RequestStreamHeaders$DefaultConstructor=a;g.RequestStreamBody$DefaultConstructor=b;g.AmendStream$DefaultConstructor=e;g.StreamResponseAck$DefaultConstructor=f;g.StreamResponse$DefaultConstructor=i;g.Payload$DefaultConstructor=j;g.serializeRequestStreamHeaders=k;g.serializeRequestStreamBody=l;g.serializeAmendStream=m;g.serializeStreamResponseAck=n;g.serializeStreamResponse=o;g.serializePayload=p;g.deserializeRequestStreamHeaders=q;g.deserializeRequestStreamBody=r;g.deserializeAmendStream=s;g.deserializeStreamResponseAck=t;g.deserializeStreamResponse=u;g.deserializePayload=v}),98);
__d("RequestStreamState",["RequestStreamCommonRequestStreamCommonTypes"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){switch(b){case d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted:if(a.seenAccepted)return a;return a.flowStatus===d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started?a:{flowStatus:d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted,seenAccepted:!0};default:if(!a.seenAccepted||a.flowStatus===b)return a;else return{flowStatus:b,seenAccepted:!0}}}g.getNextState=a}),98);
__d("StreamRetryState",[],(function(a,b,c,d,e,f){"use strict";var g=1e3,h=2*60*1e3;a=function(){function a(){this.$1=0}var b=a.prototype;b.resetErrorAndRetryCount=function(){this.$1=0};b.onRetry=function(){this.$1+=1};b.getRetryCount=function(){return this.$1};b.getBackoffDelayMs=function(){if(this.$1<=1)return 0;if(this.$1===2)return g*Math.random();var a=g*Math.pow(2,this.$1-3),b=a*Math.random();a=a+b;return Math.min(a,h)};return a}();f["default"]=a}),66);
__d("DGWRequestStreamRef",["CompactSerializerPolyfill","DGWRequestStreamUtils","DGWStream","DGWStreamHandler","InflightAmends","ODS","Promise","RequestStreamCloseReason","RequestStreamCommonRequestStreamCommonTypes","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","RequestStreamE2ELogger","RequestStreamE2ESampling","RequestStreamSingleChannelSingleChannelRequestStreamSerializers","RequestStreamSingleChannelSingleChannelRequestStreamTypes","RequestStreamState","RequestStreamTransport","RtiWebRequestStreamClient","StreamRetryState","asyncToGeneratorRuntime","err","gkx","justknobx","qex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=4,k=0,l=1e3,m=2,n=c("gkx")("20915")?3e4:5e3,o="dgw_stream_send_ack_failure",p=(a=c("qex")._("1382"))!=null?a:!1,q=(e=c("qex")._("2067"))!=null?e:!1;function r(a){if(!a){a=c("err")(o);a.stack;throw a}}function s(a,b){if(a==null||a.length===0)return null;a=JSON.parse(a);a.auxId=b;return new TextEncoder().encode(JSON.stringify(a))}function t(a){var b={};a=a.delta;a.forEach(function(a){if(a.flow_status){b.type=d("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Flow_status;switch(a.flow_status){case d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted:b.flow_status="Accepted";break;case d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started:b.flow_status="Started";break;case d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped:b.flow_status="Stopped";break}}else a.log?b.type=d("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Log:a.rewrite?b.type=d("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Rewrite:a.data?b.type=d("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Data:a.termination?b.type=d("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Termination:a.amend_ack&&(b.type=d("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Amend_ack)});return b}f=function(){function a(a,b,e,f,g,h){var i=this;this.$6=null;this.$7={};this.$10=!1;this.$15=new(c("StreamRetryState"))();this.$16=0;this.$17=0;this.$18=0;this.$21=0;var k=null;typeof b==="string"?k=new TextEncoder().encode(b):typeof b==="object"&&(k=b);this.$1={headers:a,body:k};this.$3=e;this.$4=f;this.$12=j;this.$9=!1;this.$14=!1;this.$20=h;k=f==null?void 0:f.serviceId;g!=null&&(this.$22()||(g.dgwStreamGroupLoggingId=this.$20.getStreamGroupLoggingId(k)),g.dgwCountPriorStreamsInGroup=this.$20.guessStreamGroupPriorStreamCount(k),g.transport="WEB_RS_STARGATE");this.$5=d("RequestStreamE2ESampling").validateInstrumentationData(a,g,f==null?void 0:f.requestLogContext,f==null?void 0:f.upsampleMultiplier);!this.$22()?this.$6=d("RequestStreamE2ELogger").createStreamLogger(a,this.$5,d("RequestStreamTransport").RequestStreamTransport.WEB_RS_STARGATE):this.$7.disableFalcoLogging=!0;(f==null?void 0:f.deviceId)!=null&&(this.$7.deviceId=f.deviceId);this.$6&&(this.$7.loggingId=this.$6.getRequestId());f&&f.overrideUrl!=null&&(this.$7.overrideUrl=f.overrideUrl);k!=null&&(this.$7.serviceId=k);this.$8={flowStatus:d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped,seenAccepted:!1};this.$19=new(c("InflightAmends"))(n,function(a,b){var d;(d=i.$6)==null?void 0:d.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT_ACK,c("RequestStreamE2EClientLoggerEvent").RECEIVED,babelHelpers["extends"]({},i.$23(),{latency:b.toString()}),a)},function(a,b){if(b.message!==o){var d;(d=i.$6)==null?void 0:d.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT_ACK,c("RequestStreamE2EClientLoggerEvent").FAILURE,babelHelpers["extends"]({},i.$23(),{reason:b.message}),a)}});(e=this.$6)==null?void 0:e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_size:(g=b==null?void 0:(h=b.length)==null?void 0:h.toString())!=null?g:"0"},"0","0")}var e=a.prototype;e.getInstrumentationData=function(){return this.$5};e.getE2EClientLogger=function(){return this.$6};e.amendWithAck=function(a){a=this.$24(a,!0);return a==null?(i||(i=b("Promise"))).resolve(!1):this.$19.getPromise(a)||(i||(i=b("Promise"))).resolve(!1)};e.amendWithoutAck=function(a){this.$24(a,!1)};e.cancel=function(){var a;(a=this.$6)==null?void 0:a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").CANCEL,c("RequestStreamE2EClientLoggerEvent").RECEIVED);this.$9=!0;this.$25(d("RequestStreamCloseReason").RequestStreamCloseReason.UserIntention,"user cancel the stream",!0)};e.start=function(a){var e=this;a===void 0&&(a=!1);var f=String(this.$16++),g=Date.now();return this.$26(f).then(function(){var a;e.$14=!1;e.$21=0;var b=(Date.now()-g).toString();(a=e.$6)==null?void 0:a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").PUBACK,{latency:b},f,String(e.$18))})["catch"](function(g){g.stack;if(g.message===o&&e.$10)return;e.$14=!1;if(g!==d("DGWStream").StreamError.ESTABLISHMENT_ERROR){var h,j=g.message;g===d("DGWStream").StreamError.UNAUTHENTICATED?j="UNAUTHENTICATED":g===d("DGWStream").StreamError.UNAUTHORIZED&&(j="UNAUTHORIZED");(h=e.$6)==null?void 0:h.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:j},f,String(e.$18));e.$25(a?d("RequestStreamCloseReason").RequestStreamCloseReason.ReestablishError:d("RequestStreamCloseReason").RequestStreamCloseReason.StartStreamFailure,j,!0);if(g===d("DGWStream").StreamError.UNAUTHENTICATED||g===d("DGWStream").StreamError.UNAUTHORIZED)return;throw g}else{(h=e.$6)==null?void 0:h.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:(j=g.message)!=null?j:g},f,String(e.$18));e.$15.onRetry();var k=c("gkx")("20916")?e.$15.getBackoffDelayMs():l*Math.pow(m,e.$21);return new(i||(i=b("Promise")))(function(a){return window.setTimeout(a,k)}).then(function(){e.$21++;e.$18++;return e.start()})}})};e.getFlowStatus=function(){return this.$8.flowStatus};e.shouldTerminateOrRetry=function(a,e,f,g){var h=this;if(this.$14)return;var j=e;this.$12||(j="cannot retry for error: "+e+" because of hit max retry limitation");if(a!==d("RequestStreamCloseReason").RequestStreamCloseReason.ClientError){(e=this.$6)==null?void 0:e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:j},null,String(this.$18))}e=f&&(c("gkx")("20916")||this.$12);this.$25(a,j,!e);if(e){var l=c("gkx")("20916")?Math.max(g!=null?g:0,this.$15.getBackoffDelayMs()):g!=null?g:k;this.$14=!0;return new(i||(i=b("Promise")))(function(a){return window.setTimeout(a,l)}).then(function(){return h.$27()})["catch"](function(a){})}};e.$28=function(){return this.$11!=null};e.$24=function(a,b){var e,f=this,g=typeof a==="string"?new TextEncoder().encode(a):a,h=String(this.$17++);(e=this.$6)==null?void 0:e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").RECEIVED,{},h);e=s(this.$5,h);g={amend:{amendment:g,instrumentation_data:e}};b&&g.amend&&(g.amend.amendment_id=h);e=d("CompactSerializerPolyfill").serialize(g,d("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload);var i=Date.now();if(this.$29()&&this.$11!=null){b&&this.$19.add(h);this.$11.send(e).then(function(a){var b;r(a);a=(Date.now()-i).toString();(b=f.$6)==null?void 0:b.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").PUBACK,{latency:a},h)})["catch"](function(a){var b;(b=f.$6)==null?void 0:b.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:a.message},h);f.$19.reject(h,a)});(g=this.$6)==null?void 0:g.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").SENT,{data_size:(e=a==null?void 0:(b=a.length)==null?void 0:b.toString())!=null?e:"0"},h);return h}else{(g=this.$6)==null?void 0:g.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"not_started"},h)}};e.$26=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this;if(!this.$9){var e=this.$2||this.$1;try{var f=this.$30();this.$13=f;var g=e.headers.graphiql_sandbox,h=babelHelpers["extends"]({},e.headers,{},this.$31());g!=null&&(h=babelHelpers["extends"]({},h,{www_sandbox:g,distillery_sandbox:g+":8086"}));g=d("DGWRequestStreamUtils").convertHeaders(h,e.body!=null,this.$5);this.$11=(yield this.$20.establishStream(g,f,this.$7))}catch(a){if(a===d("DGWStream").StreamError.ESTABLISHMENT_ERROR)throw a;if(d("DGWStream").StreamError.isValid(a)&&!d("DGWStream").isRetryableError(a))throw a;else if(d("DGWStream").StreamError.isValid(a)&&d("DGWStream").isRetryableError(a)){this.$32(a);return}throw a}if(this.$9){this.$25(d("RequestStreamCloseReason").RequestStreamCloseReason.UserIntention,"user cancel the stream",!0);return}h=new Uint8Array([]);if(e.body!=null){g={request_body:{body:e.body}};h=d("CompactSerializerPolyfill").serialize(g,d("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload)}if(!this.$11)throw new Error("dgwstream_is_null");f=this.$11.send(h).then(function(a){r(a),b.$9&&b.$25(d("RequestStreamCloseReason").RequestStreamCloseReason.UserIntention,"user cancel the stream",!0)});(e=this.$6)==null?void 0:e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").SENT,{},a,String(this.$18));this.$12=j;return f}else throw new Error("stream_already_canceled")});function e(b){return a.apply(this,arguments)}return e}();e.$29=function(){return this.$8.flowStatus===d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started||this.$8.flowStatus===d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted};e.$25=function(a,b,c){var e;this.$11&&a!==d("RequestStreamCloseReason").RequestStreamCloseReason.StreamError&&a!==d("RequestStreamCloseReason").RequestStreamCloseReason.RemoteTermination&&this.$11.close();(e=this.$13)==null?void 0:e.stop();this.$11=null;this.$10=!0;this.$33(d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped)&&this.$3.onFlowStatus(d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped);c&&!this.$9&&this.$3.onTermination("terminate stream because "+a+" with msg : "+b)};e.$33=function(a){var b=this.$8;this.$8=d("RequestStreamState").getNextState(b,a);return b!==this.$8};e.$27=function(){this.$12--;this.$18++;this.$15.onRetry();return this.start(!0)};e.$34=function(a){var b=this;a=d("CompactSerializerPolyfill").deserialize(a,d("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").deserializePayload);if(a.response){var e=d("DGWRequestStreamUtils").getInstrumentationDataFieldsFromPayload(a),f=e==null?void 0:e.auxId;e=e==null?void 0:e.dfTraceId;if(!this.$28()){var g;(g=this.$6)==null?void 0:g.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"response_received_after_close"},f,String(this.$18),e);return}(g=this.$6)==null?void 0:g.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE,c("RequestStreamE2EClientLoggerEvent").RECEIVED,t(a.response),f,String(this.$18),e);g=a.response.delta;g.forEach(function(a){if(a.data)b.$15.resetErrorAndRetryCount(),c("justknobx")._("4109")?b.$3.onData(new TextDecoder("utf-8").decode(a.data.bytes)):b.$8.flowStatus===d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started?b.$3.onData(new TextDecoder("utf-8").decode(a.data.bytes)):(h||(h=d("ODS"))).bumpEntityKey(110,"RequestStream","data_before_started_"+(b.$22()?"falco":"graphql"));else if(a.flow_status){var e=a.flow_status;e===d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started&&b.$15.resetErrorAndRetryCount();b.$33(e)&&b.$3.onFlowStatus(e)}else if(a.termination){e=(e=a.termination.message)!=null?e:"unknown termination msg";b.$2=null;b.shouldTerminateOrRetry(d("RequestStreamCloseReason").RequestStreamCloseReason.RemoteTermination,e,a.termination.reason===d("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.TryAgain,a.termination.retry_delay_ms!=null?parseInt(a.termination.retry_delay_ms,10):null)}else if(a.log)b.$3.onLog(a.log.message);else if(a.amend_ack){e=a.amend_ack.amendment_id;if(e!=null){var f=a.amend_ack.accepted||!1;b.$19.resolve(e,f)}}else if(a.rewrite){e=d("DGWRequestStreamUtils").transformContextWithRewriteDelta(b.$1,a.rewrite);a.rewrite.temporary===!0?b.$2=e:b.$1=e}});(g=this.$6)==null?void 0:g.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE,c("RequestStreamE2EClientLoggerEvent").SENT,t(a.response),f,String(this.$18),e);a.response.ack_level===d("RequestStreamCommonRequestStreamCommonTypes").AckLevel.Device&&a.response.response_id!=null&&this.$35(a.response.response_id,f)}else{(g=this.$6)==null?void 0:g.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"unexpected_payload_type"},null,String(this.$18))}};e.$35=function(a,b){a={ack:{response_id:a,ack:d("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.Success}};a=d("CompactSerializerPolyfill").serialize(a,d("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload);if(this.$11!=null){this.$11.send(a);(a=this.$6)==null?void 0:a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE_ACK,c("RequestStreamE2EClientLoggerEvent").SENT,{},b,String(this.$18))}else{(a=this.$6)==null?void 0:a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE_ACK,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"not_started"},b,String(this.$18))}};e.$22=function(){return this.$1.headers.method==="Falco"};e.$30=function(){return new(c("DGWStreamHandler"))(this.$36.bind(this),this.$37.bind(this),this.$32.bind(this),this.$38.bind(this),this.$39.bind(this))};e.$39=function(a){(a=this.$6)==null?void 0:a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"OnClose: Server Has FinishedSendingData"},null,String(this.$18));this.$25(d("RequestStreamCloseReason").RequestStreamCloseReason.ServerDataEnd,"Client receive OnServerHasFinishedSendingData and Server will not send more data",!0)};e.$36=function(a){(a=this.$6)==null?void 0:a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"OnClose: Server Close Connection"},null,String(this.$18));this.$25(d("RequestStreamCloseReason").RequestStreamCloseReason.RemoteTermination,"Client receive OnClose and Server will not send more data",!0)};e.$37=function(a){try{this.$34(a)}catch(b){(a=this.$6)==null?void 0:a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:b.message},null,String(this.$18));this.shouldTerminateOrRetry(d("RequestStreamCloseReason").RequestStreamCloseReason.ClientError,b.message,!1)}};e.$32=function(a){var b="",c=d("DGWStream").isRetryableError(a);b="StreamError: Received "+a;a=p?this.$12>0:c;c=q?l*m:void 0;this.shouldTerminateOrRetry(d("RequestStreamCloseReason").RequestStreamCloseReason.StreamError,b,a,c)};e.$38=function(a,b){this.shouldTerminateOrRetry(d("RequestStreamCloseReason").RequestStreamCloseReason.ServerDrain,b,!0)};e.$31=function(){return c("RtiWebRequestStreamClient").overrideHeaders};e.$23=function(){var a={};c("gkx")("20918")&&(a.pending_amendments_size=this.$19.getSize().toString());return a};return a}();g["default"]=f}),98);
__d("DGWStreamGroupHandler",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b,c){this.$1=a,this.$2=b,this.$3=c}var b=a.prototype;b.onStreamGroupError=function(a){this.$1(a)};b.onStreamGroupMustDrain=function(a){this.$2(a)};b.onStreamGroupTransportClose=function(){this.$3()};return a}();f["default"]=a}),66);
__d("DGWStreamFactory",["DGWClient","DGWStreamGroupHandler","Promise","gkx","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i="realtime",j=1e4,k=null;a=function(){function a(){this.$1={}}a.get=function(){k==null&&(k=new a());return k};var d=a.prototype;d.$2=function(a){var b;this.$1=(b={},b[a]={dgwStreamGroup:null,multiStreamGroupLoggingId:null,multiStreamGroupPriorStreamCountGuess:0},b)};d.getStreamGroupLoggingId=function(a){a===void 0&&(a=null);return(a=this.$1[(a=a)!=null?a:i])==null?void 0:a.multiStreamGroupLoggingId};d.guessStreamGroupPriorStreamCount=function(a){a===void 0&&(a=null);return((a=this.$1[(a=a)!=null?a:i])==null?void 0:a.multiStreamGroupPriorStreamCountGuess)||0};d.establishStream=function(a,d,e){var f,g=this,k=e.serviceId==null?i:e.serviceId;f=(f=this.$1[k])==null?void 0:f.dgwStreamGroup;if(f==null||!f.canCreateGroupedStream()){var l={deviceId:e.deviceId,serviceId:k,disableFalcoLogging:e.disableFalcoLogging,streamGroupAppHeaders:{"stream-group":"group1"}};e.overrideUrl!=null&&(l.overrideUrl=e.overrideUrl);l.keepAliveMs=j;c("gkx")("20920")&&(l.loggingId=c("uuidv4")());try{f=c("DGWClient")().createStreamGroup(new(c("DGWStreamGroupHandler"))(function(){g.$2(k)},function(){g.$2(k)},function(){g.$2(k)}),l),this.$1[k]={dgwStreamGroup:f,multiStreamGroupLoggingId:l.loggingId,multiStreamGroupPriorStreamCountGuess:0}}catch(a){return(h||(h=b("Promise"))).reject(a)}}this.$1[k].multiStreamGroupPriorStreamCountGuess++;return f.establishStream({loggingId:e.loggingId,disableFalcoLogging:e.disableFalcoLogging,groupedStreamHeaders:a},d)};return a}();g["default"]=a}),98);
__d("DGWRequestStreamClient",["DGWRequestStreamRef","DGWStreamFactory","Promise","cr:2046346"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a){this.$1=a!=null?a:c("DGWStreamFactory").get()}var d=a.prototype;d.createStream=function(a,d,e,f,g){b("cr:2046346")!=null&&b("cr:2046346").startPulsarTest();return(h||(h=b("Promise"))).resolve(new(c("DGWRequestStreamRef"))(a,d,f,g,e,this.$1))};return a}();g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("ArmadilloCutoverClientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("699");b=d("FalcoLoggerInternal").create("armadillo_cutover_client",a);e=b;g["default"]=e}),98);
__d("EBMinosWasmVerifySingleEpoch",["EBGetMinosWasm","EBMinosLogger","EBMinosWasm.pb","WACreateWasmFunction","WAResultOrError","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var c=a.getWasmModule;a=a.logger;var e=a.TAGS(["minos-verify-single-epoch"]);function f(a){a=a.valid;return d("WAResultOrError").makeResult({valid:a})}return function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.epochPublicData;a=a.signature;var g=d("WACreateWasmFunction").createWasmFunction({InputSpec:d("EBMinosWasm.pb").MinosVerifySingleEpochInputSpec,ResultSpec:d("EBMinosWasm.pb").MinosVerifySingleEpochResultSpec,cli:"minos_cli",command:"minos-verify-single-epoch",getWasmModule:c,logger:e,validateResult:f});g=(yield g({epochPublicData:b,signature:a}));return g});function g(b){return a.apply(this,arguments)}return g}()}c=a({getWasmModule:d("EBGetMinosWasm").getMinosWasm,logger:d("EBMinosLogger").minosLogger});g.verifySingleEpoch=c}),98);
__d("EBAPIMinosVerifySingleEpoch",["EBMinosLogger","EBMinosQplFlow","EBMinosTypes","EBMinosWasmVerifySingleEpoch","WAGetSafeQPLError","WALongInt","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unable to verify epoch - WASM error ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["minosVerifySingleEpoch start"]);i=function(){return a};return a}function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("EBMinosLogger").minosLogger.DEV(i());var b=d("EBMinosQplFlow").startMinosVerifySingleEpochQpl();try{var c,e=(c=d("EBMinosTypes")).unsafeCastToEpochNumber(d("WALongInt").decimalStringToLongInt(new TextDecoder().decode(a.minosEpochAnonId))),f=c.unsafeCastToMailboxAuthPK(a.minosMailboxAuthPublicKey),g=c.unsafeCastToMailboxEncryptionPK(a.minosMailboxEncryptionPublicKey),j=c.unsafeCastToMailboxSigningPK(a.minosMailboxSigningPublicKey),k=c.unsafeCastToUserFbId(a.userId);c=c.unsafeCastToEpochSignature(a.selfEpochSignature);e={epochNumber:e,mailboxAuthPk:f,mailboxEncryptionPk:g,mailboxSigningPk:j,previousEpochHead:a.previousEpochHead!=null?d("EBMinosTypes").unsafeCastToEpochHead(a.previousEpochHead):void 0,userFbid:k};b.addPoint("verify_single_epoch_start");f=(yield d("EBMinosWasmVerifySingleEpoch").verifySingleEpoch({epochPublicData:e,signature:c}));b.addPoint("verify_single_epoch_end");if(f.success){b.endSuccess();return f.value.valid}d("EBMinosLogger").minosLogger.ERROR(h(),f.error);b.endFailWithError("invalid-result",f.error);return!1}catch(a){b.endFailWithError("runtime-error",d("WAGetSafeQPLError").getSafeQPLErrorMessage(a));return!1}});return j.apply(this,arguments)}g.minosVerifySingleEpoch=a}),98);
__d("EBMinosSaveNewMailboxKey",["EBMinosDBDev","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f,g,h,i,j,k){var l=(yield d("EBMinosDBDev").getEBMinosDevDb());yield l.runInTransaction(["secure_minos_mailbox_keys"],"readwrite",function(d){return d.stores.secure_minos_mailbox_keys.bulkPut([{contact_id:a,encryption_public_key:b,epoch_anon_id:c,epoch_head:e,epoch_head_creation_time:f,epoch_signature_self:g,mailbox_auth_pub_key:h,mailbox_signing_pub_key:i,previous_epoch_head:j,public_key_fbid:k}])},"SaveNewMailboxKey")});return function(b,c,d,e,f,g,h,i,j,k){return a.apply(this,arguments)}}();g.saveNewMailboxKey=a}),98);
__d("EBMinosSecureMailboxKeysForContact",["EBMinosLoadMailboxKeys","EBMinosTypes"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("EBMinosLoadMailboxKeys").loadMailboxKeys(d("EBMinosTypes").unsafeCastToUserFbId(a))}g.getSecureMailboxKeysForContact=a}),98);
__d("EBMinosWriteKeyChangeAdminMessage",["EBMinosTypes","FBLogger","MAWAdminWriteUserDeviceMsgTxn","MAWDbThreadTxns","MAWDexieTable","MAWIndexedDb","MAWTransactionMode","Promise","WAJids","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Invalid userJid generated in writeKeyChangeAdminMessage"]);i=function(){return a};return a}function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=d("EBMinosTypes").userFbidToUserJid(a);if(f==null){c("FBLogger")("wmi_minos").MUSTFIX(i());return(h||(h=b("Promise"))).resolve()}a=(yield d("MAWIndexedDb").makeMsgrTransactor({participants:d("MAWTransactionMode").READONLY,threads:d("MAWTransactionMode").READONLY},"writeKeyChangeAdminMessage",function(a){return function(){return d("MAWDbThreadTxns").getAllThreadsForUsers(a,[f])}})());a=a.get(f);if(a==null||(a==null?void 0:a.length)===0)return(h||(h=b("Promise"))).resolve();var g=a.filter(function(a){a=d("WAJids").switchOnMsgrChatJidType(a.jid,{group:function(){return"group"},user:function(){return"one_to_one"}});return a==="one_to_one"});return d("MAWIndexedDb").makeMsgrTransactor({ftsBackloggedMessages:d("MAWTransactionMode").READWRITE,groupInfo:d("MAWTransactionMode").READONLY,messages:d("MAWTransactionMode").READWRITE,threads:d("MAWTransactionMode").READWRITE},"writeKeyChangeAdminMessage",function(a){return function(){return d("MAWDexieTable").dexieAll(g.map(function(b){return d("MAWAdminWriteUserDeviceMsgTxn").writeUserDeviceAdminMsg(a,f,b,"update",e)}))}})()});return j.apply(this,arguments)}g.writeKeyChangeAdminMessage=a}),98);
__d("EBMinosWriteSecureStorageAlert",["EBMinosTypes","FBLogger","MAWDbAddDeviceChangeAlertsTxn","MAWDbDeviceChangeAlerts","MAWIndexedDb","MAWTransactionMode","MAWUnsafeCoerce","Promise","WAJids","WASignalOther"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Invalid deviceJid generated in writeMinosSecureStorageAlert"]);i=function(){return a};return a}function a(a,e,f){var g=d("WAJids").validateDeviceJid(d("EBMinosTypes").userFbidToUserJid(d("EBMinosTypes").unsafeCastToUserFbId(a)));if(g==null){c("FBLogger")("wmi_minos").MUSTFIX(i());return(h||(h=b("Promise"))).resolve()}return d("MAWIndexedDb").makeMsgrTransactor({deviceChangeAlerts:d("MAWTransactionMode").READWRITE},"writeMinosSecureStorageAlert",function(a){return function(){return d("MAWDbAddDeviceChangeAlertsTxn").addDeviceChangeAlertsTxn(a,{action:d("MAWDbDeviceChangeAlerts").KEY_CHANGE,deviceJid:g,epochHead:e,identity:d("MAWUnsafeCoerce").unsafeCoerce(d("WASignalOther").toBytes(e,32)),isArchived:!1,model:"secure_storage",platform:"Meta",ts:f})}})()}g.writeMinosSecureStorageAlert=a}),98);
__d("EBAPIWriteMinosPublicKeysForRecipient",["EBMinosQplFlow","EBMinosSaveNewMailboxKey","EBMinosSecureMailboxKeysForContact","EBMinosTypes","EBMinosWriteKeyChangeAdminMessage","EBMinosWriteSecureStorageAlert","WAGetSafeQPLError","WALongInt","WAResultOrError","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.id,c=a.minosEncryptionPublicKey,e=a.minosEpochAnonId,f=a.minosEpochHead,g=a.minosEpochHeadCreationTime,h=a.minosEpochSignatureSelf,j=a.minosMailboxAuthPubKey,k=a.minosMailboxSigningPubKey,l=a.minosPreviousEpochHead;a=a.minosPublicKeyFBID;var m=d("EBMinosQplFlow").startMinosWritePublicKeysQpl();try{b=d("EBMinosTypes").unsafeCastToUserFbId(b);c=c!=null?d("EBMinosTypes").unsafeCastToMailboxEncryptionPK(c):void 0;e=e!=null?d("EBMinosTypes").unsafeCastToEpochNumber(d("WALongInt").decimalStringToLongInt(new TextDecoder().decode(e))):void 0;f=f!=null?d("EBMinosTypes").unsafeCastToEpochHead(f):void 0;g=g!=null?d("EBMinosTypes").unsafeCastToEpochCreationTime(g):void 0;h=h!=null?d("EBMinosTypes").unsafeCastToEpochSignature(h):void 0;j=j!=null?d("EBMinosTypes").unsafeCastToMailboxAuthPK(j):void 0;k=k!=null?d("EBMinosTypes").unsafeCastToMailboxSigningPK(k):void 0;l=l!=null?d("EBMinosTypes").unsafeCastToEpochHead(l):void 0;a=a!=null?d("EBMinosTypes").unsafeCastToMailboxFbId(d("WALongInt").decimalStringToLongInt(a)):void 0;m.addPoint("get_secure_mailbox_keys_for_contact_start");var n=(yield d("EBMinosSecureMailboxKeysForContact").getSecureMailboxKeysForContact(b));m.addPoint("get_secure_mailbox_keys_for_contact_end");if(!i(n,f,g)){m.addPoint("skip_write_mailbox_key");m.endSuccess();return d("WAResultOrError").makeResult()}m.addPoint("save_new_mailbox_key_start");yield d("EBMinosSaveNewMailboxKey").saveNewMailboxKey(b,c,e,f,g,h,j,k,l,a);m.addPoint("save_new_mailbox_key_end");f!=null&&g!=null&&(yield d("EBMinosWriteSecureStorageAlert").writeMinosSecureStorageAlert(b,f,g),yield d("EBMinosWriteKeyChangeAdminMessage").writeKeyChangeAdminMessage(b,g));m.endSuccess();return d("WAResultOrError").makeResult()}catch(a){m.endFailWithError("runtime-error",d("WAGetSafeQPLError").getSafeQPLErrorMessage(a));return d("WAResultOrError").makeError("runtime-error")}});return h.apply(this,arguments)}function i(a,b,c){if((a==null?void 0:a.epoch_head)==null||(a==null?void 0:a.epoch_head_creation_time)==null)return!0;return b==null||c==null?!1:a.epoch_head_creation_time!==c&&c>a.epoch_head_creation_time}g.writeMinosMailboxKeysForRecipient=a}),98);
__d("EBGetContactEpochHead",["EBMinosSecureMailboxKeysForContact","Promise","WAResultOrError","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.rawContactId;if(a==null)return(h||(h=b("Promise"))).reject(d("WAResultOrError").makeError("invalid-arguments"));a=(yield d("EBMinosSecureMailboxKeysForContact").getSecureMailboxKeysForContact(a));return d("WAResultOrError").makeResult({epochHead:a==null?void 0:a.epoch_head,epochHeadCreationTime:a==null?void 0:a.epoch_head_creation_time})});return i.apply(this,arguments)}g.getContactEpochHead=a}),98);
__d("EBGetMessageKeys",["EBMinosFakeData","FBLogger","MAWMpsGating","WAResultOrError","WebMps","asyncToGeneratorRuntime","getErrorSafe"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Runtime error in EBGetMessageKeys"]);h=function(){return a};return a}function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.messageId;a=a.threadId;try{if(b==null||a==null)return d("WAResultOrError").makeError("invalid-arguments");if(!d("MAWMpsGating").isMpsM3OrLater())return d("WAResultOrError").makeError("not-supported");b=(yield d("WebMps").mps().loadMessage({config:{shouldFetchSupplementals:!0,strategy:"local-only"},debug:{purpose:"get-message-keys"},messageId:b,threadId:a}));if(b.success===!1)return d("WAResultOrError").makeError(b.error);a=b.value;if(a==null)return d("WAResultOrError").makeError("no-message");var e=new Map();a.supplementalProtobufs.forEach(function(a,b){e.set(b,babelHelpers["extends"]({},a,{transportMessageSignature:d("EBMinosFakeData").FAKE_TRANSPORT_SIGNING_PUBLIC_KEY}))});b=babelHelpers["extends"]({},a.toplevelProtobuf,{transportMessageSignature:d("EBMinosFakeData").FAKE_TRANSPORT_SIGNING_PUBLIC_KEY});return d("WAResultOrError").makeResult(babelHelpers["extends"]({},a,{supplementalProtobufs:e,toplevelProtobuf:b}))}catch(a){c("FBLogger")("wmi_minos").catching(c("getErrorSafe")(a)).MUSTFIX(h());throw a}});return i.apply(this,arguments)}g.getMessageKeys=a}),98);
__d("EBgenerateMPSMessageQuery",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return{__typename:"MPSMessageQuery",ctx:{__typename:"MPSQueryContext",caller:"HISTORY_RESTORE"},query:{__typename:"MPSMessagePointQuery",include_deleted:!1,otids:b,thread_id:a}}}f.generateMPSMessageQuery=a}),66);
__d("EBMessageBulkPointQuery",["Base64Utils","EBAPIQPLPoints","EBAPISharedUtils","EBAPIWorkerCheck","EBIsEbEnabled","EBMessagePointQueryWithPersistence","EBgenerateMPSMessageQuery","I64","LSMEBTaskCreationSource","LSVec","MAWCurrentUser","QPLUserFlow","WAHashStringToNumber","WALogger","WAPushSafeTypes","WAResultOrError","WorkerRelay","asyncToGeneratorRuntime","cr:9437","handleRestoreMessagesGraphQLResponse","qpl","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] graphQL bulk point restore error ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] mandatory params of client state are null"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] No client state found - unable to restore"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Calling EBLS without EBLS being available for message bulk point query"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] GQL bulk point query called from non-worker context"]);m=function(){return a};return a}function a(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("EBAPIWorkerCheck").runningInWorker()){d("WALogger").ERROR(m());return d("WAResultOrError").makeError("called-from-main-thread")}d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.bulkpoint.search.gql");a=d("WAPushSafeTypes").unsafeNotNullable(a);var e=a.chatJid,f=a.messageIds,g=a.sortOrderMsList,n=a.source,o=a.threadId;a=a.traceId;var p=a!=null?d("WAHashStringToNumber").hashStringToNumber(a):d("WAHashStringToNumber").hashStringToNumber(c("uuidv4")()),q=c("qpl")._(521482281,"2703");try{c("QPLUserFlow").start(q,{annotations:{bool:{bulkPointQuery:!0,mainThreadRestore:!1,workerThreadRestore:!0},"int":{source:n!=null?n:c("LSMEBTaskCreationSource").UNKNOWN}},instanceKey:p});if(b("cr:9437")==null){d("WALogger").ERROR(l());c("QPLUserFlow").endFailure(q,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.EBLS_NOT_INITIALIZED,{instanceKey:p});d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.bulkpoint.search.gql.error");return d("WAResultOrError").makeError("ebls-not-initialized")}yield b("cr:9437").init();var r=(yield b("cr:9437").getLSStorage());if(!(yield d("EBIsEbEnabled").isEbEnabledLS(r.tables))){c("QPLUserFlow").addPoint(q,"eb_not_enabled",{instanceKey:p});c("QPLUserFlow").endSuccess(q,{instanceKey:p});d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.bulkpoint.search.gql.error");return d("WAResultOrError").makeError("eb-not-enabled")}var s=(yield d("handleRestoreMessagesGraphQLResponse").getClientState(r));if(s==null){d("WALogger").ERROR(k());c("QPLUserFlow").endFailure(q,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NO_CLIENT_STATE,{instanceKey:p});d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.bulkpoint.search.gql.error");return d("WAResultOrError").makeError("no-client-state")}var t=s.backupId,u=s.device_id,v=s.locally_available_epochs,w=s.mailboxRootKey;s=s.ocmfClientStateBlob;if(t==null||u==null||w==null||s==null){d("WALogger").ERROR(j());c("QPLUserFlow").endFailure(q,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_CLIENT_STATE,{instanceKey:p});d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.bulkpoint.search.gql.error");return d("WAResultOrError").makeError("invalid-client-state")}var x=d("MAWCurrentUser").getAppID();v={restore_context:{act_thread_id:o,site:"www",tam_thread_subtype:0},success:{device_context:{device_id:(h||(h=d("I64"))).to_string(u),locally_available_epochs:v,raw_tokens:{mailbox_root_key:d("Base64Utils").fromArrayBuffer(w),ocmf_client_state_blob:d("Base64Utils").fromArrayBuffer(s)}},mps_message_query:JSON.stringify(d("EBgenerateMPSMessageQuery").generateMPSMessageQuery(o,f))}};if(g!=null){w=c("LSVec").ofArray(g.map(function(a){return(h||(h=d("I64"))).of_string(""+a)}));v=babelHelpers["extends"]({},v,{sort_order_ms_list:w})}c("QPLUserFlow").addPoint(q,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.GRAPHQL_QUERY_START,{instanceKey:p});s=(yield d("WorkerRelay").createWorkerQuery(d("EBMessagePointQueryWithPersistence").pointRestoreQuery,{app_id:String(x!=null?x:"0"),restore_payload_string:JSON.stringify(v),restore_type:"MESSAGE_QUERY_RESTORE"}));f=(yield d("EBAPISharedUtils").constructEBRestoreResponse(s,!0,q,r,p,u,o,e,n,a,void 0,t));if(f.success){d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.bulkpoint.search.gql.success");return d("WAResultOrError").makeResult(f.response)}else{d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.bulkpoint.search.gql.error");return d("WAResultOrError").makeError(f.response)}}catch(a){d("WALogger").ERROR(i(),a);c("QPLUserFlow").endFailure(q,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.RUNTIME_ERROR,{error:a,instanceKey:p});d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.bulkpoint.search.gql.error");return d("WAResultOrError").DEPRECATED_makeError("runtime-error",a)}});return n.apply(this,arguments)}g.messageBulkPointQuery=a}),98);
__d("EBMessageRangeQueryForIndexing",["EBAPIQPLPoints","EBAPISharedUtils","EBAPIWorkerCheck","EBMessageRangeQueryForThreads","I64","LSDatabaseSingleton","LSMEBTaskCreationSource","LSVec","MAWEncryptedBackupUtils","MAWJobDefinitions","Promise","QPLUserFlow","WAHashStringToNumber","WAResultOrError","WATagsLogger","asyncToGeneratorRuntime","ifRequireable","qpl","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["graphQL range restore error ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Calling EBLS without EBLS being available for message range query"]);l=function(){return a};return a}var m=d("WATagsLogger").TAGS(["labyrinth_web","EBMessageRangeQueryForIndexing"]);function n(a,b,e){var f=d("MAWEncryptedBackupUtils").convertLSTypesToJSTypesForRestoreJob(a.protobuf),g=c("LSVec").toArray(a.echo).map(function(a){return d("MAWJobDefinitions").toEncodedEchoMessage(a)});return{echoMessages:g,hasMoreAfter:a.messageRangeInfo.has_more_before,hasMoreBefore:a.messageRangeInfo.has_more_after,isPointQuery:!1,mpsMessageQuery:void 0,nextMessageTimestampMsAfter:(j||(j=d("I64"))).of_string(a.messageRangeInfo.next_message_timestamp_ms_after),nextMessageTimestampMsBefore:j.of_string(a.messageRangeInfo.next_message_timestamp_ms_before),protobufMessages:f,referenceTimestamp:a.args.from[0],requestId:e,taskSource:b}}function a(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e,f=a.traceId!=null?a.traceId:c("uuidv4")(),g=d("WAHashStringToNumber").hashStringToNumber(f);e=(e=a.source)!=null?e:c("LSMEBTaskCreationSource").UNKNOWN;var j=c("qpl")._(521476367,"2704");c("QPLUserFlow").start(j,{annotations:{bool:{mainThreadRestore:!1,rangeQueryForIndexing:!0,workerThreadRestore:!0},"int":{source:e}},instanceKey:g});var o=a.chatJid;if(o==null){c("QPLUserFlow").endFailure(j,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NULL_CHAT_JID,{instanceKey:g});d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.range.search.gql.error");return d("WAResultOrError").makeError("null-chat-jid")}try{var p;if(d("EBAPIWorkerCheck").runningInWorker()){var q=new(h||(h=b("Promise")))(function(a,b){return c("ifRequireable")("EBLS",function(b){b=b.getLSStorage;return a(b())},function(){return a(null)})});q=(yield q);if(q==null){m.ERROR(l());c("QPLUserFlow").endFailure(j,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.EBLS_NOT_INITIALIZED,{instanceKey:g});d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.range.search.gql.error");return d("WAResultOrError").makeError("ebls-not-initialized")}}else q=(yield (i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton);p=(p=a.sortOrderMs)!=null?p:""+(Date.now()+6e4);a=(yield d("EBMessageRangeQueryForThreads").messageRangeQueryForThreads({instanceKey:f,qplEventObject:j,restoreType:"range",source:(a=a.source)!=null?a:c("LSMEBTaskCreationSource").UNKNOWN,storage:q,threads:[{chatJid:o,direction:"before",from:[p,void 0]}]}));if(a.success&&a.value.length>0&&a.value[0].success){q=a.value[0].value;o=n(q,e,f);d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.range.search.gql.success");return d("WAResultOrError").makeResult(o)}else{d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.range.search.gql.error");p=a.success===!1?a.error:a.value[0].error;return d("WAResultOrError").makeError(p!=null?p:"runtime-error")}}catch(a){m.ERROR(k(),a);c("QPLUserFlow").endFailure(j,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.RUNTIME_ERROR,{error:a,instanceKey:g});d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.range.search.gql.error");return d("WAResultOrError").makeError("runtime-error")}});return o.apply(this,arguments)}g.messageRangeQueryForIndexing=a}),98);
__d("EBMessageRangeQueryWithPersistenceQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="24417890567818094"}),null);
__d("EBMessageRangeQueryWithPersistenceQuery.graphql",["EBMessageRangeQueryWithPersistenceQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"app_id"},c={defaultValue:null,kind:"LocalArgument",name:"restore_payload_string"},d={defaultValue:null,kind:"LocalArgument",name:"restore_type"},e=[{kind:"Variable",name:"app_id",variableName:"app_id"},{kind:"Variable",name:"restore_payload_string",variableName:"restore_payload_string"},{kind:"Variable",name:"restore_type",variableName:"restore_type"}],f={alias:null,args:null,kind:"ScalarField",name:"encryption_version",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"epoch_anon_id",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"epoch_id",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"encrypted_protobuf_stanza",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"protobuf_timestamp_ms",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"sk_ciphertext",storageKey:null},l=[g,h];return{fragment:{argumentDefinitions:[a,c,d],kind:"Fragment",metadata:null,name:"EBMessageRangeQueryWithPersistenceQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackupMailbox",kind:"LinkedField",name:"mailbox",plural:!1,selections:[{alias:null,args:e,concreteType:"XFBEncryptedBackupMessages",kind:"LinkedField",name:"messages",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"handleRestoreMessagesGraphQLResponse_XFBEncryptedBackupMessages"}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[c,d,a],kind:"Operation",name:"EBMessageRangeQueryWithPersistenceQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackupMailbox",kind:"LinkedField",name:"mailbox",plural:!1,selections:[{alias:null,args:e,concreteType:"XFBEncryptedBackupMessages",kind:"LinkedField",name:"messages",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackupMessage",kind:"LinkedField",name:"encrypted_messages",plural:!0,selections:[{alias:null,args:null,concreteType:"XFBEchoDocument",kind:"LinkedField",name:"echo_document",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"echo_document_string",storageKey:null},f,g,h,{alias:null,args:null,kind:"ScalarField",name:"epoch_fingerprint",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"otid",storageKey:null},{alias:null,args:null,concreteType:"XFBProtobufStanzas",kind:"LinkedField",name:"protobuf_stanzas",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message_tags",storageKey:null},{alias:null,args:null,concreteType:"XFBProtobufStanza",kind:"LinkedField",name:"top_level_protobuf",plural:!1,selections:[i,f,g,h,j,k],storageKey:null},{alias:null,args:null,concreteType:"XFBProtobufStanza",kind:"LinkedField",name:"supplemental_protobufs",plural:!0,selections:[i,f,g,h,j,k,{alias:null,args:null,kind:"ScalarField",name:"supplemental_key",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"backup_id",storageKey:null},{alias:null,args:null,concreteType:"XFBMessageRangeInfo",kind:"LinkedField",name:"message_range_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_more_before",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_more_after",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"next_message_timestamp_ms_before",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"next_message_timestamp_ms_after",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_delete_mailbox",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"exception_string",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"thread_not_found",storageKey:null},{alias:null,args:null,concreteType:"XFBEpochDerivationSet",kind:"LinkedField",name:"epoch_derivation_set",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackupsEpochEdge",kind:"LinkedField",name:"epoch_edges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"backward_edge",storageKey:null},{alias:null,args:null,concreteType:"XFBEpochForwardEdge",kind:"LinkedField",name:"forward_edge",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"auth_public_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"encrypted_entropy",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entropy_fingerprint",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"epoch_storage_public_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"psk_fingerprint",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XFBEpochIds",kind:"LinkedField",name:"from_epoch",plural:!1,selections:l,storageKey:null},{alias:null,args:null,concreteType:"XFBEpochIds",kind:"LinkedField",name:"to_epoch",plural:!1,selections:l,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"from_epoch_fingerprint",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"to_epoch_fingerprint",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("EBMessageRangeQueryWithPersistenceQuery_facebookRelayOperation"),metadata:{},name:"EBMessageRangeQueryWithPersistenceQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("EBMessageRangeQueryWithPersistence",["Base64Utils","EBAPIQPLPoints","EBAPISharedUtils","EBAPIWorkerCheck","EBMessageRangeQueryUtils","EBMessageRangeQueryWithPersistenceQuery.graphql","I64","LSDatabaseSingleton","LSDecryptMessageProtobufsStoredProcedure","LSDecryptMessagesStoredProcedure","LSEncryptedBackupsMessagesRangeQueryDirection","LSFactory","LSIntEnum","LSMEBTaskCreationSource","LSShape","LSVec","MAWCurrentUser","MAWEBRestoreTrackingUtils","MAWJids","MAWJobDefinitions","MAWMiActGetThreadLifecycleState","MAWMiActThreadLifecycleState","QPLFlow","WAHashStringToNumber","WAJids","WAResultOrError","WATagsLogger","WorkerRelay","WorkerRelayNetwork","asyncToGeneratorRuntime","getErrorSafe","handleRestoreMessagesGraphQLResponse","justknobx","promiseDone","qpl","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[protobuf-only] decryptMessageProtobufs failed with error: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[protobuf-only] decryptMessageProtobufs failed with an error"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[echo-only][echo] decryptMessageEcho failed with error: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[echo-only][echo] decryptMessageEcho failed with an error."]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mixed][protobuf] decryptMessageProtobufs failed with error: ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mixed][protobuf] decryptMessageProtobufs failed with an error."]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mixed][echo] decryptMessageEcho failed with error: ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mixed][echo] decryptMessageEcho failed with an error."]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["[","] messageRangeQuery echo: "," protobuf: "," nonLsEcho: "," nonLSProtobuf: ",""]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["message range info is not complete - cannot proceed with graphQL restore"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["message range info is null - cannot proceed with graphQL restore"]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["No messages to restore"]);w=function(){return a};return a}function x(){var a=babelHelpers.taggedTemplateLiteralLoose(["graphQL range restore error ",""]);x=function(){return a};return a}function y(){var a=babelHelpers.taggedTemplateLiteralLoose(["backup_id is null during graphQL restore"]);y=function(){return a};return a}function z(){var a=babelHelpers.taggedTemplateLiteralLoose(["server side exception during graphql restore - ",""]);z=function(){return a};return a}function A(){var a=babelHelpers.taggedTemplateLiteralLoose(["GQL worker range restore query returned null for message response"]);A=function(){return a};return a}function B(){var a=babelHelpers.taggedTemplateLiteralLoose(["mandatory params of client state are null"]);B=function(){return a};return a}function C(){var a=babelHelpers.taggedTemplateLiteralLoose(["No client state found - unable to restore"]);C=function(){return a};return a}function D(){var a=babelHelpers.taggedTemplateLiteralLoose(["[","] Issuing messageRangeQuery with args: ",""]);D=function(){return a};return a}var E=c("requireDeferred")("LSEBUnifiedRestoreUtils").__setRef("EBMessageRangeQueryWithPersistence"),F=c("requireDeferred")("LSRestoreEchoBlobs.nop").__setRef("EBMessageRangeQueryWithPersistence"),G=c("requireDeferred")("LSRestoreProtobufs.nop").__setRef("EBMessageRangeQueryWithPersistence"),H=d("WATagsLogger").TAGS(["labyrinth_web","EBMessageRangeQueryWithPersistence"]),I=h!==void 0?h:h=b("EBMessageRangeQueryWithPersistenceQuery.graphql");function a(a){return J.apply(this,arguments)}function J(){J=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.chatJid,g=a.direction,h=a.includeOffset;h=h===void 0?!1:h;var k=a.numMessages,l=a.sortOrderMs,m=a.source,n=a.traceId;if(d("EBAPIWorkerCheck").runningInWorker())return d("WAResultOrError").makeError("unsupported-context");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql");var o=d("WAHashStringToNumber").hashStringToNumber(n),p=c("qpl")._(521471755,"2586"),q=d("QPLFlow").startQPLFlow(p,{annotations:{bool:{mainThreadRestore:!0,workerThreadRestore:!1},"int":{num_messages_requested:k,source:m!=null?m:c("LSMEBTaskCreationSource").UNKNOWN},string:{request_args:JSON.stringify(a)}},instanceKey:o,timeoutInMs:c("justknobx")._("2950")});try{H.LOG(D(),n,JSON.stringify(a));d("MAWEBRestoreTrackingUtils").markEBRestorePaginated(m,n,"GQL_MAIN_THREAD");var r=(yield (i||(i=d("LSDatabaseSingleton"))).getLSDatabaseSingletonPromiseOrValue()),s;yield r.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;q.addPoint("get_client_state_start");s=(yield d("handleRestoreMessagesGraphQLResponse").getClientState(r,a));d("MAWEBRestoreTrackingUtils").addQPLRestorePointWithAnnotations({annotations:{string:{device_id:(j||(j=d("I64"))).to_string((b=(b=s)==null?void 0:b.device_id)!=null?b:(j||(j=d("I64"))).zero)}},pointName:"client_state_retrieved",traceId:n});q.addPoint("get_client_state_end",{string:{device_id:j.to_string((b=(b=s)==null?void 0:b.device_id)!=null?b:(j||(j=d("I64"))).zero)}});b=(yield d("MAWMiActGetThreadLifecycleState").getThreadLifecycleStateByJid(a,d("MAWJids").convertChatJidToIntJid(e),"GQL_range_restore_eb_api_call"));if(b.type===d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.JID_MISSING_MAPPING_ROW||b.type===d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.JID_MISSING_MI_THREAD){d("MAWEBRestoreTrackingUtils").addQPLRestorePointWithAnnotations({annotations:{string:{thread_state_by_jid:b.type}},pointName:"chat_jid_not_found_in_act_mapping_table",traceId:n});q.addPoint("chat_jid_not_found_in_act_mapping_table");d("MAWEBRestoreTrackingUtils").markEBRestoreSuccess(n,!1);q.endSuccess();d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.thread.missing.error");return d("WAResultOrError").makeError("thread-not-found-in-mi-act-mapping-table")}else d("MAWEBRestoreTrackingUtils").addQPLRestorePointWithAnnotations({annotations:{string:{thread_state_by_jid:b.type}},pointName:"chat_jid_exists_in_act_mapping_table",traceId:n}),q.addPoint("chat_jid_exists_in_act_mapping_table")});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":184");if(s==null){H.ERROR(C());q.endFail(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NO_CLIENT_STATE,{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NO_CLIENT_STATE}});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(n,!1,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NO_CLIENT_STATE);d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.error");return d("WAResultOrError").makeError("no-client-state")}p=s;o=p.backupId;a=p.device_id;var t=p.locally_available_epochs,u=p.mailboxRootKey;p=p.ocmfClientStateBlob;if(o==null||a==null||u==null||p==null){H.ERROR(B());q.endFail(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_CLIENT_STATE,{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_CLIENT_STATE}});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(n,!1,"client_state_null");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.error");return d("WAResultOrError").makeError("invalid-client-state")}var v=d("MAWCurrentUser").getAppID();d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"app_id_retrieved",traceId:n});q.addPoint("app_id_retrieved");var w=d("WAJids").threadIdForChatJid(e);d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"converted_chatjid_to_threadid",traceId:n});q.addPoint("converted_chatjid_to_threadid");g=g==="before"?c("LSEncryptedBackupsMessagesRangeQueryDirection").BEFORE:c("LSEncryptedBackupsMessagesRangeQueryDirection").AFTER;t={restore_context:{act_thread_id:d("MAWJobDefinitions").toThreadJidPrimaryId(w),site:"www",tam_thread_subtype:0},success:babelHelpers["extends"]({device_context:{device_id:(j||(j=d("I64"))).to_string(a),locally_available_epochs:t,raw_tokens:{mailbox_root_key:d("Base64Utils").fromArrayBuffer(u),ocmf_client_state_blob:d("Base64Utils").fromArrayBuffer(p)}},direction:g,include_offset:h,query_num_messages:k,server_thread_key:w},l!=null?{reference_timestamp:d("EBMessageRangeQueryUtils").safeTimestampMsString(l)}:{})};q.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.GRAPHQL_QUERY_START);d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"graphql_query_start",traceId:n});var E;try{yield d("WorkerRelayNetwork").createWorkerNetworkExecute(),E=(yield d("WorkerRelay").createWorkerQuery(I,{app_id:String(v!=null?v:"0"),restore_payload_string:JSON.stringify(t),restore_type:"RANGE_QUERY_RESTORE"})),q.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.GRAPHQL_QUERY_END),d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"graphql_query_end",traceId:n})}catch(a){u=c("getErrorSafe")(a);q.endFail(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.GRAPHQL_QUERY_EXCEPTION,{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.GRAPHQL_QUERY_EXCEPTION,errorStackTrace:u.stack}});return d("WAResultOrError").makeError("invalid-graphql-response")}if(E==null||((p=E)==null?void 0:(g=p.viewer)==null?void 0:(h=g.encrypted_backup)==null?void 0:h.mailbox)==null){q.endFail(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_GRAPHQL_RESPONSE,{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_GRAPHQL_RESPONSE}});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(n,!1,"gql_range_restore_exception");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.error");return d("WAResultOrError").makeError("invalid-graphql-response")}u=(k=E)==null?void 0:(w=k.viewer)==null?void 0:(v=w.encrypted_backup)==null?void 0:(t=v.mailbox)==null?void 0:t.messages;if(u==null){H.ERROR(A());q.endFail(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_GRAPHQL_RESPONSE,{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_GRAPHQL_RESPONSE}});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(n,!1,"gql_range_restore_exception");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.error");return d("WAResultOrError").makeError("invalid-graphql-response")}p=u;if((p==null?void 0:p.encrypted_messages)==null){q.endFail(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NULL_MESSAGES,{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NULL_MESSAGES}});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(n,!1,"null_messages");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.error");return d("WAResultOrError").makeError("invalid-graphql-response")}g=p.backup_id;h=p.encrypted_messages;k=p.epoch_derivation_set;w=p.exception_string;v=p.message_range_info;t=p.should_delete_mailbox;u=p.thread_not_found;q.addAnnotations({bool:{should_delete_mailbox:t!=null?t:!1},"int":{response_messages:h.length},string:{message_range_info:JSON.stringify(v)}});if(w!=null){H.ERROR(z(),w);if(u!=null&&u){q.addPoint("thread_not_found_on_server");d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"thread_not_found_on_server",traceId:n});q.endSuccess();d("MAWEBRestoreTrackingUtils").markEBRestoreSuccess(n,!1);return d("WAResultOrError").makeError("thread-not-found-on-server")}t===!0&&(q.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DELETE_MAILBOX),d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"delete_mailbox",traceId:n}));q.endFail(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.SERVER_SIDE_EXCEPTION,{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.SERVER_SIDE_EXCEPTION,exception:w}});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(n,!1,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.SERVER_SIDE_EXCEPTION,{string:{exception:w}});d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.error");return d("WAResultOrError").makeError("server-side-exception")}q.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DERIVE_AND_STORE_EPOCHS_START);yield d("handleRestoreMessagesGraphQLResponse").deriveAndStoreEpochs(k,r,a,n);q.addAnnotations({bool:{hasEpochs:k!=null&&k.epoch_edges.length>0}});q.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DERIVE_AND_STORE_EPOCHS_END);g==null&&(H.WARN(y()),q.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.BACKUP_ID_NULL),d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"backup_id_null",traceId:n}));p=(yield K(r,e,h,g!=null?g:(j||(j=d("I64"))).to_string(o),v,n,q));if(p.success===!1)return p;M(r,e,p.value,l,m,n);return d("WAResultOrError").makeResult()}catch(a){u=c("getErrorSafe")(a);H.ERROR(x(),u);q.endFail(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.RUNTIME_ERROR,{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.RUNTIME_ERROR,errorStackTrace:(t=u.stack)!=null?t:""}});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(n,!1,"gql_range_restore_exception");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.error");return d("WAResultOrError").DEPRECATED_makeError("runtime-error",u)}});return J.apply(this,arguments)}function K(a,b,c,d,e,f,g){return L.apply(this,arguments)}function L(){L=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,g,h,i,j,k){var x=d("WAJids").threadIdForChatJid(e);e=d("WAHashStringToNumber").hashStringToNumber(j);var y=c("qpl")._(521471755,"2586");g.length===0&&(H.LOG(w()),k.addAnnotations({bool:{hasMessagesToRestore:!1}}),d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"no_messages",traceId:j}));if(i==null){H.ERROR(v());k.endFail(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.MISSING_RANGE_INFO,{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.MISSING_RANGE_INFO}});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(j,!1,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.MISSING_RANGE_INFO);d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.error");return d("WAResultOrError").makeError("missing-message-range-info")}var z=i.has_more_after,A=i.has_more_before,B=i.next_message_timestamp_ms_after;i=i.next_message_timestamp_ms_before;if(A==null||z==null||B==null||i==null){H.ERROR(u());k.endFail(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.MISSING_RANGE_INFO,{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.MISSING_RANGE_INFO}});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(j,!1,"message_range_info_null");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.error");return d("WAResultOrError").makeError("missing-message-range-info")}if(g.length===0){k.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NO_MESSAGES_TO_RESTORE);k.endSuccess();d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.success");return d("WAResultOrError").makeResult({echo:[],messageRangeInfo:{has_more_after:z,has_more_before:A,next_message_timestamp_ms_after:B,next_message_timestamp_ms_before:i},protobuf:[]})}h=d("handleRestoreMessagesGraphQLResponse").processMessageArray(g,h,y,e);var C=h.encryptedLSEchoMessages,D=h.encryptedMessagesWithProtobufs;y=h.encryptedNonLSEchoMessages;e=h.encryptedNonLSProtobufs;k.addAnnotations({bool:{hasEchoMessages:C.length>0,hasProtobufMessages:D.length>0}});g.length!==C.length+D.length&&k.addAnnotations({bool:{hasEchoProtobufCountMismatch:!0}});H.LOG(t(),j,C.length,D.length,y.length,e.length);var E,F;if(C.length>0&&D.length>0){k.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.RESTORING_MIXED_ECHO_PROTOBUF_PAYLOAD);k.addAnnotations({"int":{echoMessagesPayloadSize:C.length,protobufMessagesPayloadSize:D.length,totalRestorePayloadSize:C.length+D.length}});k.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DECRYPT_MESSAGES_ECHO_AND_PROTOBUF_START);h=(yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield c("LSDecryptMessagesStoredProcedure")(c("LSFactory")(a),{actThreadId:x,encryptedMessages:c("LSVec").ofArray(C)})),e=b[0];b=b[1];if(b!=null){var f=d("LSShape").toRecord(b);H.ERROR(s());H.WARN(r(),f.error_message);k.addAnnotations({string:{echo_decryption_error:f.error_message}});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(j,!1,"ECHO_DECRYPTION_FAILURE",{string:{error_description:f.error_message}});d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.error")}f=(yield c("LSDecryptMessageProtobufsStoredProcedure")(c("LSFactory")(a),{actThreadId:x,encryptedMessagesWithProtobufs:c("LSVec").ofArray(D)}));a=f[0];f=f[1];if(f!=null){f=d("LSShape").toRecord(f);H.ERROR(q());H.WARN(p(),f.error_message);k.endFail("PROTOBUF_DECRYPTION_FAILURE",{string:{error_description:f.error_message}});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(j,!1,"PROTOBUF_DECRYPTION_FAILURE",{string:{error_description:f.error_message}});d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.error");return d("WAResultOrError").makeError("protobuf-decryption-failure")}f=a==null?0:c("LSVec").toArray(a).length;b!=null&&f>0&&k.addAnnotations({bool:{continuedAfterEchoDecryptFailure:!0}});return{decryptedEchoMsgs:e,decryptedProtobufMsgs:a}});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":718"));g=h.decryptedEchoMsgs;y=h.decryptedProtobufMsgs;k.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DECRYPT_MESSAGES_ECHO_AND_PROTOBUF_END);var G;g!=null&&(G=c("LSVec").toArray(g).map(function(a){return d("LSShape").toRecord(a).value}));E=G;F=y==null?[]:c("LSVec").toArray(y)}else if(D.length===0){k.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DECRYPT_MESSAGES_ECHO_START);e=(yield a.runInTransaction(function(a){return c("LSDecryptMessagesStoredProcedure")(c("LSFactory")(a),{actThreadId:x,encryptedMessages:c("LSVec").ofArray(C)})},"readwrite",void 0,void 0,f.id+":822"));h=e[0];g=e[1];if(g!=null){y=d("LSShape").toRecord(g);H.ERROR(o());H.WARN(n(),y.error_message);k.endFail("ECHO_DECRYPTION_FAILURE",{string:{error_description:y.error_message}});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(j,!1,"ECHO_DECRYPTION_FAILURE",{string:{error_description:y.error_message}});d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.error");return d("WAResultOrError").makeError("echo-decryption-failure")}k.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DECRYPT_MESSAGES_ECHO_END);if(h!=null){e=c("LSVec").toArray(h).map(function(a){return d("LSShape").toRecord(a).value});E=e}}else{k.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DECRYPT_MESSAGES_PROTOBUF_START);g=(yield a.runInTransaction(function(a){return c("LSDecryptMessageProtobufsStoredProcedure")(c("LSFactory")(a),{actThreadId:x,encryptedMessagesWithProtobufs:c("LSVec").ofArray(D)})},"readwrite",void 0,void 0,f.id+":871"));y=g[0];h=g[1];if(h!=null){e=d("LSShape").toRecord(h);H.ERROR(m());H.WARN(l(),e.error_message);k.endFail("PROTOBUF_DECRYPTION_FAILURE",{string:{error_description:e.error_message}});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(j,!1,"PROTOBUF_DECRYPTION_FAILURE",{string:{error_description:e.error_message}});d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.error");return d("WAResultOrError").makeError("protobuf-decryption-failure")}k.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DECRYPT_MESSAGES_PROTOBUF_END);F=y==null?[]:c("LSVec").toArray(y)}k.endSuccess();d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.success");return d("WAResultOrError").makeResult({echo:(a=E)!=null?a:[],messageRangeInfo:{has_more_after:z,has_more_before:A,next_message_timestamp_ms_after:B,next_message_timestamp_ms_before:i},protobuf:(g=F)!=null?g:[]})});return L.apply(this,arguments)}function M(a,b,e,g,h,i){var l=e.echo,m=e.messageRangeInfo,n=e.protobuf,o=d("WAJids").threadIdForChatJid(b);l.length>0&&n.length>0?c("promiseDone")(E.load().then(function(a){return a.echoProtobufConsolidatedRestoreHelper(o,c("LSVec").ofArray(n),m.has_more_before,(j||(j=d("I64"))).of_string(m.next_message_timestamp_ms_before),m.has_more_after,j.of_string(m.next_message_timestamp_ms_after),!1,i,g,void 0,c("LSVec").ofArray(l),(k||(k=d("LSIntEnum"))).ofNumber(h!=null?h:c("LSMEBTaskCreationSource").UNKNOWN),b)})):l.length>0?c("promiseDone")(F.load().then(function(e){return a.runInTransaction(function(a){return e(a,0,(j||(j=d("I64"))).zero,c("LSVec").ofArray(l),m.has_more_before,j.of_string(m.next_message_timestamp_ms_before),m.has_more_after,j.of_string(m.next_message_timestamp_ms_after),!1,o,i,g,(k||(k=d("LSIntEnum"))).ofNumber(h!=null?h:c("LSMEBTaskCreationSource").UNKNOWN),b)},"readwrite",void 0,void 0,f.id+":960")})):c("promiseDone")(G.load().then(function(e){return a.runInTransaction(function(a){return e(a,0,o,c("LSVec").ofArray(n),m.has_more_before,(j||(j=d("I64"))).of_string(m.next_message_timestamp_ms_before),m.has_more_after,j.of_string(m.next_message_timestamp_ms_after),!1,i,g,void 0,c("LSVec").ofArray([]),(k||(k=d("LSIntEnum"))).ofNumber(h!=null?h:c("LSMEBTaskCreationSource").UNKNOWN),b)},"readwrite",void 0,void 0,f.id+":983")}))}g.query=I;g.messageRangeQueryWithPersistence=a}),98);
__d("EBParseUploadSerializationPayload",["EBLogger","MAWEBFrontendQPLLogger","WAErrorMessage","WAResultOrError"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["EB upload "," serializer error: "," in ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["parseUploadSerializationResponse: ",""]);i=function(){return a};return a}var j=d("EBLogger").EBLogger.tags(["parseUploadSerializationResponse"]);function a(a){try{a=JSON.parse(a);return d("WAResultOrError").makeResult(a)}catch(b){a=d("WAErrorMessage").maybeGetMessageFromError(b);j.MUSTFIX(i(),a);return d("WAResultOrError").makeError("parse_exception")}}function b(a,b,c,e){var f=[],g=[];a.forEach(function(a){var d=a.error_code+": "+a.error_message;j.MUSTFIX(h(),b,d,c);f.push(a.error_code);g.push(a.error_message)});if(e!=null){d("MAWEBFrontendQPLLogger").addPointEBUploadTracking(e,b+"_upload_task_serialization_failure",{int_array:(a={},a[b+"_serialization_error_codes"]=f,a),string_array:(e={},e[b+"_serialization_errors"]=g,e)})}}g.parseUploadSerializationResponse=a;g.logUploadSerializationErrors=b}),98);
__d("EBSMDBCleanupAPI",["EBMainThreadEBDBApiDeferred","EBSMDBAPI","MAWIndexedDbMetadata","Promise","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){a==null&&c("promiseDone")(d("EBMainThreadEBDBApiDeferred").clearWorkerState());a=(h||(h=b("Promise"))).all([d("EBSMDBAPI").deleteEBIDB(),d("EBSMDBAPI").deleteEBIDB(d("MAWIndexedDbMetadata").EBSM_WORKER_DB_PREFIX)]).then(function(){});return a}g.cleanupStateTables=a}),98);
__d("EBUploadDeletedMessage",["EncryptedBackupsUploadQueue","I64","MAWUserJidWrapper","WAAsMessageApplication","WAJids","WAResultOrError","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.instanceKey,c=a.msgId,e=a.sender,f=a.serverTs;a=a.sortOrderMs;try{yield d("EncryptedBackupsUploadQueue").putMsgsToEbUpload([{backupDirective:{actionType:3,originalMsgProtocolId:c},instanceKey:b,messageApplication:d("WAAsMessageApplication").castToMessageApplicationBytes(new Uint8Array(0)),msgId:c,originalMsgProtocolId:c,reportingMeta:null,senderId:(h||(h=d("I64"))).of_string(d("WAJids").authorToUserId(e,d("WAJids").extractUserId(d("MAWUserJidWrapper").getMyUserJid()))),serverTs:f,sortOrderMs:a,triggerSource:"upload-deleted-message"}])}catch(a){return d("WAResultOrError").DEPRECATED_makeError("runtime-error",a)}return d("WAResultOrError").makeResult()});return i.apply(this,arguments)}g.uploadDeletedMessage=a}),98);
__d("EBUploadMessagesFromWorkerMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9723960407697513"}),null);
__d("EBUploadMessagesFromWorkerMutation.graphql",["EBUploadMessagesFromWorkerMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"XFBTUploadMessageGQLResponse",kind:"LinkedField",name:"xfb_upload_encrypted_msg_to_backup",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"device_epoch_status",storageKey:null},{alias:null,args:null,concreteType:"XFBTUploadMessageHandlerResponse",kind:"LinkedField",name:"backup_write_result_response",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_success",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"delete_mailbox",storageKey:null},{alias:null,args:null,concreteType:"XFBTProtobufParams",kind:"LinkedField",name:"protobuf_params",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"delete_on_success",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"exception_string",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"EBUploadMessagesFromWorkerMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"EBUploadMessagesFromWorkerMutation",selections:c},params:{id:b("EBUploadMessagesFromWorkerMutation_facebookRelayOperation"),metadata:{},name:"EBUploadMessagesFromWorkerMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("LSHandleBackupWriteCompletion",["EBEnableUnifiedAttachment","LSVec","MAWEBFrontendQPLLogger","Promise","asyncToGeneratorRuntime","cr:847"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c,d){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){if(g!=null){e=c("LSVec").toArray(g);d("EBEnableUnifiedAttachment").getEbEnableUnifiedAttachment()&&e.forEach(function(a){return d("MAWEBFrontendQPLLogger").endFlowUploadAttachmentBackup(a,f,"unified")})}if(b("cr:847")!=null){e=g!=null?c("LSVec").toArray(g):[];e.length>0&&(yield b("cr:847")(a,e))}return(h||(h=b("Promise"))).resolve()});return i.apply(this,arguments)}g.call=a}),98);
__d("LSHandleBackupWriteCompletion.nop",["LSHandleBackupWriteCompletion"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,c,e){return d("LSHandleBackupWriteCompletion").call(a,b,c,e)};a.__nop_name__="LSHandleBackupWriteCompletion";g["default"]=a}),98);
__d("LSMarkBackupAsCompleted.nop",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;a=function(a,c,d,e,f,h,i){return(g||(g=b("Promise"))).resolve()};a.__nop_name__="LSMarkBackupAsCompleted";f["default"]=a}),66);
__d("LSHandleProtobufWriteResult",["LSArrayGetObjectAt","LSMarkBackupAsCompleted.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return a[3]?d[0]=!1:d[0]=!0,d[0]?c.resolve():(d[1]=a[3].get("delete_on_success"),d[1]&&a[0]&&!a[1]?(a[2]?d[2]=!1:d[2]=!0,d[2]?c.resolve():c.sequence([function(e){return d[3]=c.i64.of_float(Date.now()),d[4]=c.i64.of_int32(a[2].length),c.i64.gt(d[4],c.i64.cast([0,0]))?c.loopAsync(d[4],function(e){return d[7]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[2],d[7]).then(function(a){return a=a,d[8]=a[0],d[9]=a[1],a})},function(a){return c.filter(c.db.table(305).fetch(),function(a){return c.i64.eq(a.pendingBackupTaskId,d[8])}).next().then(function(a,d){var e=a.done;a=a.value;return e?0:(d=a.item,c.nativeOperation(b("LSMarkBackupAsCompleted.nop"),d.actThreadId,d.toplevelOfflineThreadingId,d.supplementalKey,d.messageTimestampMs,d.backupAction))})}])}):c.resolve()},function(e){return d[5]=c.i64.of_int32(a[2].length),c.i64.gt(d[5],c.i64.cast([0,0]))?c.loopAsync(d[5],function(e){return d[7]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[2],d[7]).then(function(a){return a=a,d[8]=a[0],d[9]=a[1],a})},function(a){return c.filter(c.db.table(305).fetch(),function(a){return c.i64.eq(a.pendingBackupTaskId,d[8])}).next().then(function(a,b){var e=a.done;a=a.value;return e?0:(b=a.item,d[12]=b.actThreadId,d[13]=b.toplevelOfflineThreadingId,d[11]=b.supplementalKey,d[14]=b.messageTimestampMs,d[11]!==void 0?c.forEach(c.filter(c.db.table(302).fetch(),function(a){return a.threadId===d[12]&&a.toplevelOfflineThreadingId===d[13]&&a.supplementalKey===d[11]&&c.i64.le(a.messageTimestampMs,d[14])}),function(a){return a["delete"]()}):c.forEach(c.filter(c.db.table(301).fetch(),function(a){return a.threadId===d[12]&&a.offlineThreadingId===d[13]&&c.i64.le(a.messageTimestampMs,d[14])}),function(a){return a["delete"]()}))})}])}):c.resolve()},function(e){return d[6]=c.i64.of_int32(a[2].length),c.i64.gt(d[6],c.i64.cast([0,0]))?c.loopAsync(d[6],function(e){return d[7]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[2],d[7]).then(function(a){return a=a,d[8]=a[0],d[9]=a[1],a})},function(a){return c.filter(c.db.table(305).fetch(),function(a){return c.i64.eq(a.pendingBackupTaskId,d[8])}).next().then(function(a,b){var d=a.done;a=a.value;return d?0:(b=a.item,c.forEach(c.db.table(304).fetch([[[b.toplevelOfflineThreadingId,b.actThreadId]],"offlineThreadingId"]),function(a){return a["delete"]()}))})}])}):c.resolve()}])):c.resolve())},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsHandleProtobufWriteResultStoredProcedure";a.__tables__=["pending_protobuf_backups_context","local_message_persistence_store_supplemental","local_message_persistence_store","local_message_persistence_store_tag_index"];e.exports=a}),null);
__d("LSHandleBackupWriteResultV2",["LSArrayGetObjectAt","LSDeleteBackupOnClient","LSHandleBackupWriteCompletion.nop","LSHandleProtobufWriteResult","LSLogMEBUploadSuccessEvent.nop","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsHandleBackupWriteResultV2StoredProcedure] Beginning execution."),d[1]=c.createArray(),d[2]=c.createArray(),a[3]?d[3]=!1:d[3]=!0,d[3]?c.resolve():(d[12]=c.i64.of_int32(a[3].length),c.i64.gt(d[12],c.i64.cast([0,0]))?c.loopAsync(d[12],function(e){return d[13]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[3],d[13]).then(function(a){return a=a,d[14]=a[0],d[15]=a[1],a})},function(e){return c.db.table(177).fetch([[[d[14]]],"fk_pending_tasks"]).next().then(function(e,f){var g=e.done;e=e.value;return g?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsHandleBackupWriteResultV2StoredProcedure] Pending backup task id not found!"),d[18]="Pending backup task id not found!",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsHandleBackupWriteResultV2StoredProcedure] ","",d[18]].join("")),d[17]=c.createArray(),void 0!==void 0?d[19]=(d[17].push(void 0),d[17]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsHandleBackupWriteResultV2StoredProcedure",d[18],d[17],c.i64.cast([0,3]))):(f=e.item,c.sequence([function(d){return c.i64.eq(f.contentType,c.i64.cast([0,1]))?c.nativeOperation(b("LSLogMEBUploadSuccessEvent.nop"),f.uniqueKey,f.lsTraceId,a[1]):c.resolve()},function(a){return d[17]=(d[2].push(f.persistentId),d[2])}]))})}])}):c.resolve())},function(d){return c.storedProcedure(b("LSHandleProtobufWriteResult"),a[1],a[2],a[3],a[4],!1)},function(e){return d[4]=c.i64.of_float(Date.now()),a[3]?d[5]=!1:d[5]=!0,d[5]?c.resolve():(d[12]=c.i64.of_int32(a[3].length),c.i64.gt(d[12],c.i64.cast([0,0]))?c.loopAsync(d[12],function(e){return d[13]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[3],d[13]).then(function(a){return a=a,d[14]=a[0],d[15]=a[1],a})},function(a){return c.forEach(c.filter(c.db.table(305).fetch(),function(a){return c.i64.eq(a.pendingBackupTaskId,d[14])}),function(a){return a["delete"]()})}])}):c.resolve())},function(e){return a[2]?c.sequence([function(e){return d[12]=c.i64.of_int32(a[0].length),c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[0],c.i64.cast([0,0])).then(function(a){return a=a,d[14]=a[0],d[15]=a[1],a})},function(a){return d[13]=d[14]}])},function(a){return c.storedProcedure(b("LSDeleteBackupOnClient"),void 0,void 0,!0,d[13],void 0,!0)}]):c.resolve()},function(e){return c.nativeOperation(b("LSHandleBackupWriteCompletion.nop"),a[1],a[0],d[2])},function(a){return d[6]=c.i64.of_float(Date.now()),d[7]=c.i64.random(),d[9]="Finishing execution. Execution time: ",d[10]=c.i64.to_string(c.i64.sub(d[6],d[0])),d[11]=" ms",d[8]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsHandleBackupWriteResultV2StoredProcedure] ",d[8],d[9],d[8],d[10],d[8],d[11]].join("")),c.i64.eq(c.i64.mod_(d[7],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[12]=",",d[13]=c.createArray(),void 0!==void 0?d[14]=(d[13].push(void 0),d[13]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsHandleBackupWriteResultV2StoredProcedure",[d[9],d[12],d[10],d[12],d[11]].join(""),d[13],c.i64.cast([0,4]))):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsHandleBackupWriteResultV2StoredProcedure";a.__tables__=["pending_backups_context_v2","pending_protobuf_backups_context"];e.exports=a}),null);
__d("LSHandleBackupWriteResultV2StoredProcedure",["LSHandleBackupWriteResultV2","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSHandleBackupWriteResultV2"),e.traceIds,e.isSuccess,e.deleteMailbox,e.taskIds,e.protobufParams);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSPrepareOpenEpochV2",["LSAppendDataTraceAddon","LSArrayGetObjectAt","LSIsEncryptionVersionSecure","LSIsMobileClient","LSIssueNewEbTaskAndGetTaskIDV2","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(a){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsPrepareOpenEpochV2StoredProcedure] Beginning execution."),c.filter(c.db.table(2).fetch(),function(a){return a.context==="50005"}).next().then(function(a,b){b=a.done;a=a.value;return b?d[1]=!1:(a.item,d[1]=!0)})},function(a){return c.filter(c.db.table(2).fetch(),function(a){return a.context==="320"}).next().then(function(a,b){b=a.done;a=a.value;return b?d[3]=!1:(a.item,d[3]=!0)})},function(a){return d[1]||d[3]?c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsPrepareOpenEpochV2StoredProcedure] Skipping openEpoch start because there is already an openEpoch flow in progress."),d[5]=c.i64.cast([0,1]))):c.sequence([function(a){return c.sequence([function(a){return void 0!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),void 0,c.i64.cast([0,1441]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[18]=a[0],a})},function(a){return d[18]?d[19]=!0:d[19]=!1,d[19]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[21]="LSDataTraceMciTraceLog native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",d[21]].join("")),d[20]=c.createArray(),void 0!==void 0?d[22]=(d[20].push(void 0),d[20]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",d[21],d[20],c.i64.cast([0,3]))):c.resolve()}])},function(a){return c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[18]=new c.Map(),d[18].set("error_msg","Expected a nonempty query result"),d[18].set("code",c.i64.cast([0,3])),d[18].set("src_line","MEBClientStateUtils.php:247 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),d[19]=c.createArray(),d[20]=(d[19].push(d[18]),d[19]),e=[void 0,d[19]],d[12]=e[0],d[13]=e[1],e):(b=a.item,d[18]=new c.Map(),d[18].set("backup_id",b.backupId),d[18].set("device_public_key_blob",b.devicePublicKeyBlob),d[18].set("device_private_key_blob",b.devicePrivateKeyBlob),d[18].set("epoch_storage_public_key_blob",b.epochStoragePublicKeyBlob),d[18].set("epoch_storage_private_key_blob",b.epochStoragePrivateKeyBlob),d[18].set("epoch_auth_public_key_blob",b.epochAuthPublicKeyBlob),d[18].set("epoch_auth_private_key_blob",b.epochAuthPrivateKeyBlob),d[18].set("mailbox_root_key_blob",b.mailboxRootKeyBlob),d[18].set("ocmf_client_state_blob",b.ocmfClientStateBlob),d[18].set("orf_client_state_v2_blob",void 0),d[18].set("orf_v2_authority_level",void 0),d[18].set("oblivious_validation_token_blob",b.obliviousValidationTokenBlob),d[18].set("device_id",b.deviceId),d[18].set("backup_tenancy",b.backupTenancy),d[18].set("encryption_version",b.encryptionVersion),d[18].set("revision_version",b.revisionVersion),d[18].set("initialize_restore_result",void 0),d[18].set("device_creation_timestamp_sec",void 0),d[18].set("authority_level",b.authorityLevel),e=[d[18],void 0],d[12]=e[0],d[13]=e[1],e)})},function(a){return d[15]=new c.Map(),d[15].set("value",d[12]),d[15].set("errors",d[13]),d[16]=d[15].get("value"),d[16]!==void 0?c.sequence([function(a){return d[18]=d[16].get("backup_id"),d[19]=d[16].get("device_public_key_blob"),d[20]=d[16].get("device_private_key_blob"),d[21]=d[16].get("epoch_storage_public_key_blob"),d[22]=d[16].get("epoch_storage_private_key_blob"),d[23]=d[16].get("epoch_auth_public_key_blob"),d[24]=d[16].get("epoch_auth_private_key_blob"),d[25]=d[16].get("mailbox_root_key_blob"),d[26]=d[16].get("ocmf_client_state_blob"),d[27]=d[16].get("orf_client_state_v2_blob"),d[28]=d[16].get("orf_v2_authority_level"),d[29]=d[16].get("oblivious_validation_token_blob"),d[30]=d[16].get("device_id"),d[31]=d[16].get("backup_tenancy"),d[32]=d[16].get("encryption_version"),d[33]=d[16].get("revision_version"),d[34]=d[16].get("initialize_restore_result"),d[35]=d[16].get("device_creation_timestamp_sec"),d[36]=d[16].get("authority_level"),c.i64.neq(d[30],void 0)?c.sequence([function(a){return d[38]=void 0,c.i64.neq(d[38],void 0)?c.resolve(d[39]=d[38]):c.sequence([function(a){return d[50]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[51]=a[0],a})},function(a){return d[51]?d[60]=(d[50].push(c.i64.cast([0,0])),d[50]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[52]=a[0],a})},function(a){return d[52]?d[60]=(d[50].push(c.i64.cast([0,2])),d[50]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[53]=a[0],a})},function(a){return d[53]?d[60]=(d[50].push(c.i64.cast([0,3])),d[50]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[54]=a[0],a})},function(a){return d[54]?d[60]=(d[50].push(c.i64.cast([0,4])),d[50]):0,d[55]=c.createArray(),d[56]=c.i64.of_int32(d[50].length),c.i64.gt(d[56],c.i64.cast([0,0]))?c.loopAsync(d[56],function(a){return d[60]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[50],d[60]).then(function(a){return a=a,d[61]=a[0],d[62]=a[1],a})},function(a){return d[63]=(d[55].push(d[61]),d[55])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[60]=c.createArray(),d[61]=c.i64.of_int32(d[55].length),c.i64.gt(d[61],c.i64.cast([0,0]))?c.loopAsync(d[61],function(a){return d[63]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[55],d[63]).then(function(a){return a=a,d[64]=a[0],d[65]=a[1],a})},function(a){return d[66]=(d[60].push(c.i64.to_string(d[64])),d[60])}])}):c.resolve()},function(a){return d[62]=d[60].join(","),d[57]=d[62]}])},function(a){return d[55].some(function(a){return c.i64.eq(d[32],a)})?d[58]=d[32]:d[58]=void 0,c.i64.neq(d[58],void 0)?d[59]=d[58]:d[59]=void 0,d[39]=d[59]}])},function(a){return c.i64.neq(d[39],void 0)?d[40]=d[39]:d[40]=c.i64.cast([0,0]),c.i64.neq(d[31],void 0)?d[41]=d[31]:d[41]=c.i64.cast([0,1]),c.sequence([function(a){return void 0!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),void 0,c.i64.cast([0,2821]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[50]=a[0],a})},function(a){return d[50]?d[51]=!0:d[51]=!1,d[51]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[53]="LSDataTraceMciTraceLog native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",d[53]].join("")),d[52]=c.createArray(),void 0!==void 0?d[54]=(d[52].push(void 0),d[52]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",d[53],d[52],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[42]=c.createArray(),c.forEach(c.filter(c.db.table(169).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),function(a){a=a.item;return d[50]=(d[42].push(a.epochId),d[42])})},function(a){return d[48]="Queried locally available epochs. Count: ",d[43]=c.i64.of_int32(d[42].length),d[49]=c.i64.to_string(d[43]),d[44]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][MEBEpochClientUtils] ",d[44],d[48],d[44],d[49]].join("")),c.resolve()},function(a){return d[45]=new c.Map(),d[45].set("backup_id",d[18]),d[45].set("locally_available_epochs",d[42]),d[45].set("device_id",d[30]),d[45].set("trace_id",void 0),d[46]=c.toJSON(d[45]),c.storedProcedure(b("LSIssueNewEbTaskAndGetTaskIDV2"),"messenger_request_for_asssoc_devices",c.i64.cast([0,50005]),d[46],c.i64.cast([0,0]),c.i64.cast([0,93]),c.i64.cast([0,0]),void 0,c.i64.cast([0,0])).then(function(a){return a=a,d[47]=a[0],a})},function(a){return c.sequence([function(a){return void 0!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),void 0,c.i64.cast([0,1442]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[50]=a[0],a})},function(a){return d[50]?d[51]=!0:d[51]=!1,d[51]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[53]="LSDataTraceMciTraceLog native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",d[53]].join("")),d[52]=c.createArray(),void 0!==void 0?d[54]=(d[52].push(void 0),d[52]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",d[53],d[52],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[37]=c.i64.cast([0,0])}]):c.sequence([function(a){return c.sequence([function(a){return void 0!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),void 0,c.i64.cast([0,2822]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[39]=a[0],a})},function(a){return d[39]?d[40]=!0:d[40]=!1,d[40]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[42]="LSDataTraceMciTraceLog native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",d[42]].join("")),d[41]=c.createArray(),void 0!==void 0?d[43]=(d[41].push(void 0),d[41]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",d[42],d[41],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[38]="No backup found.",d[38]!==void 0?(function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsPrepareOpenEpochV2StoredProcedure] ","",d[38]].join("")),d[39]=c.createArray(),void 0!==void 0?d[40]=(d[39].push(void 0),d[39]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsPrepareOpenEpochV2StoredProcedure",d[38],d[39],c.i64.cast([0,3]))):c.resolve()},function(a){return d[37]=c.i64.cast([0,1])}])},function(a){return d[17]=d[37]}]):c.sequence([function(a){return d[18]=d[15].get("errors"),d[19]=d[15].get("errors"),c.sequence([function(a){return void 0!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),void 0,c.i64.cast([0,2822]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[21]=a[0],a})},function(a){return d[21]?d[22]=!0:d[22]=!1,d[22]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[24]="LSDataTraceMciTraceLog native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",d[24]].join("")),d[23]=c.createArray(),void 0!==void 0?d[25]=(d[23].push(void 0),d[23]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",d[24],d[23],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[20]="No backup found.",d[20]!==void 0?(function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsPrepareOpenEpochV2StoredProcedure] ","",d[20]].join("")),d[21]=c.createArray(),void 0!==void 0?d[22]=(d[21].push(void 0),d[21]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsPrepareOpenEpochV2StoredProcedure",d[20],d[21],c.i64.cast([0,3]))):c.resolve()},function(a){return d[17]=c.i64.cast([0,1])}])},function(a){return d[5]=d[17]}])},function(a){return d[6]=c.i64.of_float(Date.now()),d[7]=c.i64.random(),d[9]="Finishing execution. Execution time: ",d[10]=c.i64.to_string(c.i64.sub(d[6],d[0])),d[11]=" ms",d[8]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsPrepareOpenEpochV2StoredProcedure] ",d[8],d[9],d[8],d[10],d[8],d[11]].join("")),c.i64.eq(c.i64.mod_(d[7],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[12]=",",d[13]=c.createArray(),void 0!==void 0?d[14]=(d[13].push(void 0),d[13]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsPrepareOpenEpochV2StoredProcedure",[d[9],d[12],d[10],d[12],d[11]].join(""),d[13],c.i64.cast([0,4]))):c.resolve()},function(a){return e[0]=d[5]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsPrepareOpenEpochV2StoredProcedure";a.__tables__=["pending_tasks","secure_encrypted_backups_client_state","secure_encrypted_backups_epochs"];e.exports=a}),null);
__d("LSPrepareOpenEpochV2StoredProcedure",["LSPrepareOpenEpochV2","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){e===void 0&&(e={});a=a.storedProcedure(c("LSPrepareOpenEpochV2"),e.backupId,e.traceId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSSyncEpochs",["LSAppendDataTraceAddon","LSArrayGetObjectAt","LSIsEncryptionVersionSecure","LSIsMobileClient","LSIssueNewEbTaskAndGetTaskIDV2","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(a){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsSyncEpochsStoredProcedure] Beginning execution."),c.sequence([function(a){return void 0!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),void 0,c.i64.cast([0,1436]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[13]=a[0],a})},function(a){return d[13]?d[14]=!0:d[14]=!1,d[14]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[16]="LSDataTraceMciTraceLog native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",d[16]].join("")),d[15]=c.createArray(),void 0!==void 0?d[17]=(d[15].push(void 0),d[15]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",d[16],d[15],c.i64.cast([0,3]))):c.resolve()}])},function(a){return c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[13]=new c.Map(),d[13].set("error_msg","Expected a nonempty query result"),d[13].set("code",c.i64.cast([0,3])),d[13].set("src_line","MEBClientStateUtils.php:247 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),d[14]=c.createArray(),d[15]=(d[14].push(d[13]),d[14]),e=[void 0,d[14]],d[1]=e[0],d[2]=e[1],e):(b=a.item,d[13]=new c.Map(),d[13].set("backup_id",b.backupId),d[13].set("device_public_key_blob",b.devicePublicKeyBlob),d[13].set("device_private_key_blob",b.devicePrivateKeyBlob),d[13].set("epoch_storage_public_key_blob",b.epochStoragePublicKeyBlob),d[13].set("epoch_storage_private_key_blob",b.epochStoragePrivateKeyBlob),d[13].set("epoch_auth_public_key_blob",b.epochAuthPublicKeyBlob),d[13].set("epoch_auth_private_key_blob",b.epochAuthPrivateKeyBlob),d[13].set("mailbox_root_key_blob",b.mailboxRootKeyBlob),d[13].set("ocmf_client_state_blob",b.ocmfClientStateBlob),d[13].set("orf_client_state_v2_blob",void 0),d[13].set("orf_v2_authority_level",void 0),d[13].set("oblivious_validation_token_blob",b.obliviousValidationTokenBlob),d[13].set("device_id",b.deviceId),d[13].set("backup_tenancy",b.backupTenancy),d[13].set("encryption_version",b.encryptionVersion),d[13].set("revision_version",b.revisionVersion),d[13].set("initialize_restore_result",void 0),d[13].set("device_creation_timestamp_sec",void 0),d[13].set("authority_level",b.authorityLevel),e=[d[13],void 0],d[1]=e[0],d[2]=e[1],e)})},function(a){return d[4]=new c.Map(),d[4].set("value",d[1]),d[4].set("errors",d[2]),d[5]=d[4].get("value"),d[5]!==void 0?c.sequence([function(a){return d[13]=d[5].get("backup_id"),d[14]=d[5].get("device_public_key_blob"),d[15]=d[5].get("device_private_key_blob"),d[16]=d[5].get("epoch_storage_public_key_blob"),d[17]=d[5].get("epoch_storage_private_key_blob"),d[18]=d[5].get("epoch_auth_public_key_blob"),d[19]=d[5].get("epoch_auth_private_key_blob"),d[20]=d[5].get("mailbox_root_key_blob"),d[21]=d[5].get("ocmf_client_state_blob"),d[22]=d[5].get("orf_client_state_v2_blob"),d[23]=d[5].get("orf_v2_authority_level"),d[24]=d[5].get("oblivious_validation_token_blob"),d[25]=d[5].get("device_id"),d[26]=d[5].get("backup_tenancy"),d[27]=d[5].get("encryption_version"),d[28]=d[5].get("revision_version"),d[29]=d[5].get("initialize_restore_result"),d[30]=d[5].get("device_creation_timestamp_sec"),d[31]=d[5].get("authority_level"),c.i64.neq(d[25],void 0)?c.sequence([function(a){return d[33]=void 0,c.i64.neq(d[33],void 0)?c.resolve(d[34]=d[33]):c.sequence([function(a){return d[41]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[42]=a[0],a})},function(a){return d[42]?d[51]=(d[41].push(c.i64.cast([0,0])),d[41]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[43]=a[0],a})},function(a){return d[43]?d[51]=(d[41].push(c.i64.cast([0,2])),d[41]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[44]=a[0],a})},function(a){return d[44]?d[51]=(d[41].push(c.i64.cast([0,3])),d[41]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[45]=a[0],a})},function(a){return d[45]?d[51]=(d[41].push(c.i64.cast([0,4])),d[41]):0,d[46]=c.createArray(),d[47]=c.i64.of_int32(d[41].length),c.i64.gt(d[47],c.i64.cast([0,0]))?c.loopAsync(d[47],function(a){return d[51]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[41],d[51]).then(function(a){return a=a,d[52]=a[0],d[53]=a[1],a})},function(a){return d[54]=(d[46].push(d[52]),d[46])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[51]=c.createArray(),d[52]=c.i64.of_int32(d[46].length),c.i64.gt(d[52],c.i64.cast([0,0]))?c.loopAsync(d[52],function(a){return d[54]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[46],d[54]).then(function(a){return a=a,d[55]=a[0],d[56]=a[1],a})},function(a){return d[57]=(d[51].push(c.i64.to_string(d[55])),d[51])}])}):c.resolve()},function(a){return d[53]=d[51].join(","),d[48]=d[53]}])},function(a){return d[46].some(function(a){return c.i64.eq(d[27],a)})?d[49]=d[27]:d[49]=void 0,c.i64.neq(d[49],void 0)?d[50]=d[49]:d[50]=void 0,d[34]=d[50]}])},function(a){return c.i64.neq(d[34],void 0)?d[35]=d[34]:d[35]=c.i64.cast([0,0]),c.i64.neq(d[26],void 0)?d[36]=d[26]:d[36]=c.i64.cast([0,1]),c.filter(c.db.table(2).fetch(),function(a){return a.context==="50013"}).next().then(function(a,b){b=a.done;a=a.value;return b?d[37]=!1:(a.item,d[37]=!0)})},function(a){return c.filter(c.db.table(2).fetch(),function(a){return a.context==="50025"}).next().then(function(a,b){b=a.done;a=a.value;return b?d[39]=!1:(a.item,d[39]=!0)})},function(a){return d[37]||d[39]?(d[41]="Another sync job is already in progress. Terminating this.",d[41]!==void 0?(function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsSyncEpochsStoredProcedure] ","",d[41]].join("")),d[42]=c.createArray(),void 0!==void 0?d[43]=(d[42].push(void 0),d[42]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsSyncEpochsStoredProcedure",d[41],d[42],c.i64.cast([0,3]))):c.resolve()):c.sequence([function(a){return c.sequence([function(a){return void 0!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),void 0,c.i64.cast([0,2849]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[49]=a[0],a})},function(a){return d[49]?d[50]=!0:d[50]=!1,d[50]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[52]="LSDataTraceMciTraceLog native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",d[52]].join("")),d[51]=c.createArray(),void 0!==void 0?d[53]=(d[51].push(void 0),d[51]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",d[52],d[51],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[41]=c.createArray(),c.forEach(c.filter(c.db.table(169).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),function(a){a=a.item;return d[49]=(d[41].push(a.epochId),d[41])})},function(a){return d[47]="Queried locally available epochs. Count: ",d[42]=c.i64.of_int32(d[41].length),d[48]=c.i64.to_string(d[42]),d[43]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][MEBEpochClientUtils] ",d[43],d[47],d[43],d[48]].join("")),c.resolve()},function(a){return d[44]=new c.Map(),d[44].set("backup_id",d[13]),d[44].set("device_id",d[25]),d[44].set("locally_available_epochs",d[41]),d[44].set("trace_id",void 0),d[45]=c.toJSON(d[44]),c.storedProcedure(b("LSIssueNewEbTaskAndGetTaskIDV2"),"messenger_encrypted_backups",c.i64.cast([0,50025]),d[45],c.i64.cast([0,0]),c.i64.cast([0,93]),c.i64.cast([0,0]),void 0,c.i64.cast([0,0])).then(function(a){return a=a,d[46]=a[0],a})}])},function(a){return d[32]=!0}]):c.sequence([function(a){return d[33]=["Failed to load client state: ","","NULL_DEVICE_ID"].join(""),d[33]!==void 0?(function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsSyncEpochsStoredProcedure] ","",d[33]].join("")),d[34]=c.createArray(),void 0!==void 0?d[35]=(d[34].push(void 0),d[34]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsSyncEpochsStoredProcedure",d[33],d[34],c.i64.cast([0,3]))):c.resolve()},function(a){return d[32]=!1}])},function(a){return d[6]=d[32]}]):c.sequence([function(a){return d[13]=d[4].get("errors"),d[14]=d[4].get("errors"),d[15]=["Failed to load client state: ","","BACKUP_NOT_FOUND"].join(""),d[15]!==void 0?(function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsSyncEpochsStoredProcedure] ","",d[15]].join("")),d[16]=c.createArray(),void 0!==void 0?d[17]=(d[16].push(void 0),d[16]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsSyncEpochsStoredProcedure",d[15],d[16],c.i64.cast([0,3]))):c.resolve()},function(a){return d[6]=!1}])},function(a){return d[7]=c.i64.of_float(Date.now()),d[8]=c.i64.random(),d[10]="Finishing execution. Execution time: ",d[11]=c.i64.to_string(c.i64.sub(d[7],d[0])),d[12]=" ms",d[9]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsSyncEpochsStoredProcedure] ",d[9],d[10],d[9],d[11],d[9],d[12]].join("")),c.i64.eq(c.i64.mod_(d[8],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[13]=",",d[14]=c.createArray(),void 0!==void 0?d[15]=(d[14].push(void 0),d[14]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsSyncEpochsStoredProcedure",[d[10],d[13],d[11],d[13],d[12]].join(""),d[14],c.i64.cast([0,4]))):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsSyncEpochsStoredProcedure";a.__tables__=["secure_encrypted_backups_client_state","pending_tasks","secure_encrypted_backups_epochs"];e.exports=a}),null);
__d("LSSyncEpochsStoredProcedure",["LSSyncEpochs","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a){a=a.storedProcedure(c("LSSyncEpochs"));return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWEBFalcoLoggerUtils",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=(f=c("requireDeferred"))("EncryptedBackupTaskFailureFalcoEvent").__setRef("MAWEBFalcoLoggerUtils"),i=f("EncryptedBackupTaskIssuedFalcoEvent").__setRef("MAWEBFalcoLoggerUtils"),j=f("EncryptedBackupTaskSkippedFalcoEvent").__setRef("MAWEBFalcoLoggerUtils"),k=f("EncryptedBackupUploadSuccessFalcoEvent").__setRef("MAWEBFalcoLoggerUtils"),l={0:"unknown",1:"upsert_top_level",2:"upsert_supplemental",3:"delete_top_level",4:"delete_top_level_with_placeholder"};function a(a,b){m(a,b)}function b(a,b,c){m(a,b,c)}function d(a,b,c){m(a,b,void 0,c)}function m(a,b,c,d){c!=null?void h.onReady(function(d){d.log(function(){var d;return{backup_action:(d=l[(d=(d=a.protoMsg)==null?void 0:d.backupActionType)!=null?d:0])!=null?d:"unknown",backup_protocol:b,failure_reason:c,labyrinth_version:0,message_id:(d=(d=a.protoMsg)==null?void 0:(d=d.msgId)==null?void 0:d.externalId)!=null?d:a.messageId,thread_id:a.threadId,trace_id:a.traceId}})}):d!=null?void j.onReady(function(c){c.log(function(){var c;return{backup_action:(c=l[(c=(c=a.protoMsg)==null?void 0:c.backupActionType)!=null?c:0])!=null?c:"unknown",backup_protocol:b,labyrinth_version:0,message_id:(c=(c=a.protoMsg)==null?void 0:(c=c.msgId)==null?void 0:c.externalId)!=null?c:a.messageId,skipped_reason:d,thread_id:a.threadId,trace_id:a.traceId}})}):void i.onReady(function(c){c.log(function(){var c;return{backup_action:(c=l[(c=(c=a.protoMsg)==null?void 0:c.backupActionType)!=null?c:0])!=null?c:"unknown",backup_protocol:b,labyrinth_version:0,message_id:(c=(c=a.protoMsg)==null?void 0:(c=c.msgId)==null?void 0:c.externalId)!=null?c:a.messageId,thread_id:a.threadId,trace_id:a.traceId}})})}function e(a){void k.onReady(function(b){b.log(function(){var b;return{labyrinth_version:0,message_id:(b=(b=a.protoMsg)==null?void 0:(b=b.msgId)==null?void 0:b.externalId)!=null?b:a.messageId,thread_id:a.threadId,trace_id:a.traceId}})})}g.BackupActionMap=l;g.logEBFalcoTaskIssued=a;g.logEBFalcoTaskFailure=b;g.logEBFalcoTaskSkipped=d;g.logEBFalcoEncryptedBackupUploadSuccess=e}),98);
__d("LSBackupContentType",[],(function(a,b,c,d,e,f){a=Object.freeze({MESSAGE:1,THREAD:2});f["default"]=a}),66);
__d("LSPendingBackupStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({NEEDS_BACKUP:1,BACKUP_IN_PROGRESS:2,BLOCKED:3});f["default"]=a}),66);
__d("LSSerializeAttachmentBackupPayloadStoredProcedure",["LSSerializeAttachmentBackupPayload","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSSerializeAttachmentBackupPayload"),e.attachmentInfos,e.messageId,e.threadId,e.productType,e.error,e.errorMessage);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWUploadPayloadGenerator",["EBLogger","EBParseUploadSerializationPayload","I64","LSBackupContentType","LSEncryptedBackupsAttachmentErrorCode","LSFactory","LSIntEnum","LSPendingBackupStatus","LSSerializeAttachmentBackupPayloadStoredProcedure","LSShape","LSTaskSerializerEncryptedBackupsUpload","LSVec","MAWBridgeUploadMessageHandler","MAWEBFrontendQPLLogger","MWEBODSUtils","Promise","Random","ReQL","WAErrorMessage","WAGetSafeQPLError","WAResultOrError","asyncToGeneratorRuntime","gkx","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["upload message is missing echo document msgType: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["EB upload serializer error: "," in ",""]);l=function(){return a};return a}var m=d("EBLogger").EBLogger.tags(["MAWUploadPayloadGenerator"]),n="0",o=new Set();function p(){for(var a=0;a<1e8;a++){var b=d("Random").uint32();if(!o.has(b))return b}throw m.mustfixThrow("Unable to generate a unique task ID after 100 million attempts")}function a(a,b,c){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){var g="unknown";c("justknobx")._("4439")&&(g=(yield x(a))?"available":"unavailable");e=e.map(function(b){try{var c=p();o.add(c);return d("WAResultOrError").makeResult({msg:b,taskMetadata:r(a,b,c)})}catch(a){c=d("WAErrorMessage").maybeGetMessageFromError(a);return d("WAResultOrError").makeError({error:c,instanceKey:b.uploadTrackingInstanceKey})}});e=(yield (j||(j=b("Promise"))).all(e.map(function(a){return a.success?a.value:null}).filter(Boolean)));e=(yield j.all(e.map(function(e){var i=e.taskMetadata;return i.then(function(i){var k;d("MAWEBFrontendQPLLogger").addPointEBUploadTracking((k=i.uploadTrackingInstanceKey)!=null?k:null,"upload_task_serialization_start",{string:{base_epoch_availability:g,execution_environment:f}});return c("LSTaskSerializerEncryptedBackupsUpload")((h||(h=d("I64"))).of_int32(i.task),c("LSFactory")(a)).then(function(g){if(g.length>0&&g[0]!=null){var h=d("EBParseUploadSerializationPayload").parseUploadSerializationResponse(g[0]);if(h.success){h=h.value;var k=!1;h.failure!=null&&(k=!0,d("EBParseUploadSerializationPayload").logUploadSerializationErrors([h.failure],"echo",f,i.uploadTrackingInstanceKey));if(h.protobuf_failures!=null){h=c("LSVec").toArray(h.protobuf_failures).filter(Boolean);h.length>0&&(k=!0,d("EBParseUploadSerializationPayload").logUploadSerializationErrors(h,"protobuf",f,i.uploadTrackingInstanceKey))}if(!k){d("MAWEBFrontendQPLLogger").addPointEBUploadTracking((h=i.uploadTrackingInstanceKey)!=null?h:null,"upload_task_serialization_success",{string:{execution_environment:f}})}}}k=i.pending_protobuf_backups_context_pk;return(j||(j=b("Promise"))).all([a.pending_backups_context_v2["delete"](i.pending_backups_context_v2_pk),k!=null?a.pending_protobuf_backups_context["delete"](k):(j||(j=b("Promise"))).resolve(null)]).then(function(){o["delete"](i.task);return d("WAResultOrError").makeResult({msg:e.msg,payload:g[0]})})})["catch"](function(a){var b,c=d("WAErrorMessage").maybeGetMessageFromError(a);d("MAWEBFrontendQPLLogger").addPointEBUploadTracking((b=i.uploadTrackingInstanceKey)!=null?b:null,"upload_task_serialization_failure",{string:{serialization_error:d("WAGetSafeQPLError").getSafeQPLErrorMessage(a)}});m.MUSTFIX(l(),d("WAGetSafeQPLError").getSafeQPLErrorMessage(a),f);return d("WAResultOrError").makeError({error:c,instanceKey:e.msg.uploadTrackingInstanceKey})})})})));return e});return q.apply(this,arguments)}function r(a,b,c){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=b.sortOrderMs.toString(),g=(h||(h=d("I64"))).of_int32(e),j=h.of_float(b.actionType),l=(yield u(a,b)),n=b.protoMsg,o=n!=null&&c("gkx")("8488");if(!o&&(b.echoDocument==null||b.echoDocument.length===0)){var p;m.MUSTFIX(k(),(p=b.messageType)!=null?p:"unknown");d("MWEBODSUtils").markODSForEB("upload","missing_echo_document."+((p=b.messageType)!=null?p:"unknown"))}j=(yield a.pending_backups_context_v2.add({actionType:j,attachmentErrorCode:w(b),attachmentPayload:l,backupStatus:(i||(i=d("LSIntEnum"))).ofNumber(c("LSPendingBackupStatus").BACKUP_IN_PROGRESS),contentType:i.ofNumber(c("LSBackupContentType").MESSAGE),echoContent:o?"":(p=b.echoDocument)!=null?p:"",listKey:b.threadId,pendingBackupTaskId:h.of_int32(e),persistentId:"",pk:g,sortKey:f,uniqueKey:b.messageId}));if(n==null)return{pending_backups_context_v2_pk:j[0],task:e,uploadTrackingInstanceKey:b.uploadTrackingInstanceKey};g=(yield a.pending_protobuf_backups_context.add({actThreadId:b.threadId,attachmentPayload:l,backupAction:h.of_float(n.backupActionType),messageTimestampMs:h.of_float(b.sortOrderMs),pendingBackupTaskId:h.of_float(e),supplementalKey:n.supplementalKey,toplevelOfflineThreadingId:n.backupActionType===4?n.msgId.externalId:(p=(o=n.originalMsgProtocolId)==null?void 0:o.externalId)!=null?p:n.msgId.externalId}));return{pending_backups_context_v2_pk:j[0],pending_protobuf_backups_context_pk:g[0],task:e,uploadTrackingInstanceKey:b.uploadTrackingInstanceKey}});return s.apply(this,arguments)}function t(a){if(a.attachmentInfos.length!==1)return[];a=a.attachmentInfos[0];return[{attachment_trace_id:a.attachmentTraceId,media_type:a.mediaType,zippy_object_id:a.zippyObjectId}]}function u(a,b){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(!c("gkx")("6956"))return void 0;var e,f,g=b.attachmentBackupContext;if(g!=null){f=d("MAWBridgeUploadMessageHandler").getMessageUploadAttachmentBackupContext({bridgeUploadAttachmentBackupContext:g,messageId:b.messageId,serverThreadKey:null,threadId:b.threadId,traceId:b.traceId});if(f!=null){a=(yield c("LSSerializeAttachmentBackupPayloadStoredProcedure")(c("LSFactory")(a),{attachmentInfos:f.attachment_infos,error:f.error,errorMessage:f.error_message,messageId:b.messageId,productType:f.product_type,threadId:b.threadId}));f=a[0];b=a[1];if(f!=null){a=d("LSShape").toRecord(f);e=JSON.stringify({success:a.payload,upload_context:t(g)})}else if(b!=null){f=d("LSShape").toRecord(b);a=f.error_code;e=JSON.stringify({failure:{error_code:(h||(h=d("I64"))).to_float(a),error_message:f.error_message,stored_procedure:f.stored_procedure},upload_context:t(g)})}}}return e});return v.apply(this,arguments)}function w(a){return!c("gkx")("6956")?void 0:(h||(h=d("I64"))).of_float(((a=a.attachmentBackupContext)==null?void 0:a.error)!=null?c("LSEncryptedBackupsAttachmentErrorCode").UNKNOWN_ERROR:c("LSEncryptedBackupsAttachmentErrorCode").NO_ERROR)}function x(a){var b=new TextDecoder();return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.secure_encrypted_backups_epochs).filter(function(a){return b.decode(a.epochAnonIdBlob)===n})).then(function(a){if(a!=null)return!0;else return!1})}g.genUploadPayload=a}),98);
__d("XFBEBDeviceEpochStatus.facebook",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["INELIGIBLE_FOR_LABYRINTH_11","NO_OPEN_EPOCH","OK","OUTDATED","RATE_LIMITED"]);c=a;f["default"]=c}),66);
__d("EBUploadMessagesFromWorkerMutation",["EBIsEbEnabled","EBLS","EBUploadMessagesFromWorkerMutation.graphql","EncryptedBackupsWriteToMPSTables","FBLogger","I64","LSEBPayloadSerializerError","LSFactory","LSHandleBackupWriteResultV2StoredProcedure","LSPrepareOpenEpochV2StoredProcedure","LSShape","LSSyncEpochsStoredProcedure","LSVec","MAWCurrentUser","MAWEBFalcoLoggerUtils","MAWEBUploadTrackingUtils","MAWUploadPayloadGenerator","MWEBODSEntityName.enum","ODS","Promise","WAErrorMessage","WALogger","WAResultOrError","asyncToGeneratorRuntime","createWorkerMutation"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Failed to upload with EBLS: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] graphqlResponse is null"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Failed to generate payload: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] backupWriteResult is null"]);o=function(){return a};return a}var p=h!==void 0?h:h=b("EBUploadMessagesFromWorkerMutation.graphql");function q(a,b){a.forEach(function(a){a.uploadTrackingInstanceKey!=null&&d("MAWEBUploadTrackingUtils").addPointWorkerOnly(a.uploadTrackingInstanceKey,b)})}function r(a,b,c){a.forEach(function(a){a.uploadTrackingInstanceKey!=null&&d("MAWEBUploadTrackingUtils").endFailWorkerOnly(a.uploadTrackingInstanceKey,b,c)})}function s(a){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.backupWriteResult,e=a.deviceEpochStatus,g=a.exception_string,h=a.inputMessages;if(b==null){r(h,"ebls_upload_failed_backup_write_result_null",{string:{error:"backupWriteResult is null"}});d("WALogger").ERROR(o());return d("WAResultOrError").makeError("backup_write_result_null")}a=(yield d("EBLS").getLSStorage());var i=b.is_success,j=b.delete_mailbox,k=(b=b.protobuf_params)==null?void 0:b.delete_on_success;if(i!=null&&j!=null){if(!i){r(h,"ebls_upload_failed",{string:{error:g}});return d("WAResultOrError").makeError("gql_upload_failed")}else c("FBLogger")("labyrinth_web").info("Worker successfully completed GQL upload batch of size %s",h.length),q(h,"ebls_upload_success");yield a.runInTransaction(function(a){return c("LSHandleBackupWriteResultV2StoredProcedure")(c("LSFactory")(a),{deleteMailbox:j,isSuccess:i,protobufParams:k!=null?d("LSShape").ofRecord({delete_on_success:k}):void 0,traceIds:c("LSVec").ofArray(h.map(function(a){return a.traceId}))})},"readwrite",void 0,void 0,f.id+":161")}if(e==null)return d("WAResultOrError").makeError("device_epoch_status_null");switch(e){case"NO_OPEN_EPOCH":q(h,"prepare_open_epoch_v2_start");yield a.runInTransaction(function(a){return c("LSPrepareOpenEpochV2StoredProcedure")(c("LSFactory")(a),{backupId:void 0})},"readwrite",void 0,void 0,f.id+":185");q(h,"prepare_open_epoch_v2_end");break;case"OUTDATED":q(h,"sync_epochs_start");yield a.runInTransaction(function(a){return c("LSSyncEpochsStoredProcedure")(c("LSFactory")(a))},"readonly",void 0,void 0,f.id+":196");q(h,"sync_epochs_start");break;case"OK":break;default:}return d("WAResultOrError").makeResult()});return t.apply(this,arguments)}function a(a){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{(k||(k=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_COUNTER,"worker_thread");q(a,"ebls_init_start");yield d("EBLS").init();var e=(yield d("EBLS").getLSStorage());q(a,"ebls_backup_tenancy_start");if(!(yield d("EBIsEbEnabled").isEbEnabledLS(e.tables))){for(var g of a)if(g.uploadTrackingInstanceKey!=null){var h=g.uploadTrackingInstanceKey;d("MAWEBUploadTrackingUtils").addPointWorkerOnly(h,"user_device_not_enrolled_invalid_gql_request");var o=g.echoDocument!=null?"dual_upload":"protobuf_only";d("MAWEBFalcoLoggerUtils").logEBFalcoTaskSkipped(g,o,"user_device_not_enrolled");d("MAWEBUploadTrackingUtils").endSuccessWorkerOnly(h,"upload_tracking_completed")}return d("WAResultOrError").makeError("ebls_not_initialized")}q(a,"ebls_upload_start");var t;try{t=(yield e.runInTransaction(function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(e){q(a,"ebls_lsdb_write_start");var f=(yield (i||(i=b("Promise"))).all(a.map(function(a){var f=a.protoMsg,g=a.threadId,h=a.uploadTrackingInstanceKey;if(f==null)return null;h=h!=null?d("MAWEBUploadTrackingUtils").makeEBWorkerQplFlowFromInstanceKey(h):null;f=f.backupActionType===1?(i||(i=b("Promise"))).all([d("EncryptedBackupsWriteToMPSTables").writeToMPSTables(e,f,g,!1,h),d("EncryptedBackupsWriteToMPSTables").writeTagsToMPSTables(e,f,g)]).then(function(a){var b=a[0];a[1];return b}):d("EncryptedBackupsWriteToMPSTables").writeToMPSTables(e,f,g,!1,h);return f.then(function(b){if(!b.success){var e=a.uploadTrackingInstanceKey;b=b.error;var f=b.errorCode;b=b.errorMsg;e!=null&&(v(f)?d("MAWEBUploadTrackingUtils").endCancelWorkerOnly(e,{"int":{errorCode:f!=null?(j||(j=d("I64"))).to_float(f):c("LSEBPayloadSerializerError").UNKNOWN},string:{error:b}}):d("MAWEBUploadTrackingUtils").endFailWorkerOnly(e,"mps_write_failed",{string:{error:b}}));return null}return a})}).filter(Boolean)).then(function(a){return a.filter(Boolean)}));q(a,"ebls_mps_write_complete");return d("MAWUploadPayloadGenerator").genUploadPayload(e,f,"worker").then(function(a){return a.map(function(a){if(!a.success){var b=a.error,c=b.error;b=b.instanceKey;b!=null&&d("MAWEBUploadTrackingUtils").endFailWorkerOnly(b,"ebls_payload_generation_failed",{string:{error:c}});return null}return a.value}).filter(Boolean)})});return function(a){return e.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":249")),q(a,"ebls_upload_payload_generated")}catch(b){o=d("WAErrorMessage").maybeGetMessageFromError(b);r(a,"ebls_upload_failed_payload",{string:{error:o}});d("WALogger").ERROR(n(),o);return d("WAResultOrError").makeError("upload_serialization_failure")}if(t.length===0){r(a,"ebls_upload_payload_empty");return d("WAResultOrError").makeResult()}h=t.map(function(a){return a.msg});h.forEach(function(b){var a=b.echoDocument!=null?"dual_upload":"protobuf_only";d("MAWEBFalcoLoggerUtils").logEBFalcoTaskIssued(b,a)});g=c("createWorkerMutation")(p);e=g[0];o=(yield e({input:{app_id_str:d("MAWCurrentUser").getAppID(),payload:{msg_payloads:t.map(function(a){return a.payload}).filter(Boolean)}}}));q(h,"ebls_received_gql_upload_response");if(o==null){r(h,"ebls_upload_failed_response_null");d("WALogger").ERROR(m());h.forEach(function(a){var b=a.echoDocument!=null?"dual_upload":"protobuf_only";d("MAWEBFalcoLoggerUtils").logEBFalcoTaskFailure(a,b,"ebls_not_initialized")});return d("WAResultOrError").makeError("gql_upload_null_response")}e=(g=o.xfb_upload_encrypted_msg_to_backup)!=null?g:{};o=e.backup_write_result_response;g=e.device_epoch_status;e=e.exception_string;var u=(yield s({backupWriteResult:o,deviceEpochStatus:g,exception_string:e,inputMessages:h}));!u.success?h.forEach(function(a){var b=a.echoDocument!=null?"dual_upload":"protobuf_only";d("MAWEBFalcoLoggerUtils").logEBFalcoTaskFailure(a,b,u.error)}):h.forEach(function(a){d("MAWEBFalcoLoggerUtils").logEBFalcoEncryptedBackupUploadSuccess(a)});return u}catch(b){o=d("WAErrorMessage").maybeGetMessageFromError(b);r(a,"ebls_upload_failed_response",{string:{error:o}});a.forEach(function(a){var b=a.echoDocument!=null?"dual_upload":"protobuf_only";d("MAWEBFalcoLoggerUtils").logEBFalcoTaskFailure(a,b,"ebls_not_initialized")});d("WALogger").ERROR(l(),b);return d("WAResultOrError").makeError("gql_upload_runtime_error")}});return u.apply(this,arguments)}function v(a){switch(a){case c("LSEBPayloadSerializerError").SKIP_MPS_WRITE_DUE_TO_HIGHER_TIMESTAMP_AVAILABILITY:case c("LSEBPayloadSerializerError").MESSAGE_ALREADY_DELETED:return!0;default:return!1}return!1}g.uploadMessagesFromWorker=a}),98);
__d("EncryptedBackupsCastToAttachmentContextMediaType",["EncryptedBackupsUploadEntity","MAWDbMedia","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Not a valid AttachmentContextMediaType: ",""]);h=function(){return a};return a}function a(a){switch(a){case d("MAWDbMedia").MEDIA_TYPE.IMAGE:return d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.IMAGE;case d("MAWDbMedia").MEDIA_TYPE.VIDEO:return d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.VIDEO;case d("MAWDbMedia").MEDIA_TYPE.PTT:return d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.PTT;case d("MAWDbMedia").MEDIA_TYPE.GIF:return d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.GIF;case d("MAWDbMedia").MEDIA_TYPE.STICKER:return d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.STICKER;case d("MAWDbMedia").MEDIA_TYPE.DOCUMENT_FILE:return d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.DOCUMENT;default:a;d("WALogger").ERROR(h(),a);return d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.INVALID}}g["default"]=a}),98);
__d("EncryptedBackupsGetAttachmentContextForReceivedMsg",["EncryptedBackupsCastToAttachmentContextMediaType","EncryptedBackupsUploadEntity","WAMediaUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b,e=new Map();if(((b=a.decodedMsg)==null?void 0:b.unstoredDbMedia)!=null){b=(b=a.decodedMsg)==null?void 0:b.unstoredDbMedia;var f=b.mediaType;b=d("WAMediaUtils").decodeMediaEntryData(b.mediaEntry);var g=b.downloadableThumbnail;b=b.objectId;g=g==null?void 0:g.objectId;f=c("EncryptedBackupsCastToAttachmentContextMediaType")(f);b!=null&&f!=null&&e.set(d("WAMediaUtils").stringToDeliveryObjectId(b),f);g!=null&&g!==b&&e.set(d("WAMediaUtils").stringToDeliveryObjectId(g),d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.MESSENGER_PREVIEW)}if(((f=a.decodedMsg)==null?void 0:f.unstoredXMA)!=null){g=(b=a.decodedMsg)==null?void 0:b.unstoredXMA;if(g.unstoredFavicon!=null){f=d("WAMediaUtils").decodeMediaEntryData(g.unstoredFavicon.mediaEntry);a=f.objectId;a!=null&&e.set(d("WAMediaUtils").stringToDeliveryObjectId(a),d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.XMA)}if(g.unstoredHeaderMedia!=null){b=d("WAMediaUtils").decodeMediaEntryData(g.unstoredHeaderMedia.mediaEntry);f=b.objectId;f!=null&&e.set(d("WAMediaUtils").stringToDeliveryObjectId(f),d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.XMA)}if(g.unstoredAssociatedMedia!=null){a=d("WAMediaUtils").decodeMediaEntryData(g.unstoredAssociatedMedia.mediaEntry);b=a.objectId;b!=null&&e.set(d("WAMediaUtils").stringToDeliveryObjectId(b),d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.XMA)}g.unstoredPreviews!=null&&g.unstoredPreviews.length>0&&g.unstoredPreviews.forEach(function(a){a=a.mediaEntry;a=d("WAMediaUtils").decodeMediaEntryData(a);a=a.objectId;a!=null&&e.set(d("WAMediaUtils").stringToDeliveryObjectId(a),d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.XMA)})}return Array.from(e.entries()).map(function(a){var b=a[0];a=a[1];return{mediaObjectId:b,mediaType:a}})}g["default"]=a}),98);
__d("MessageBackupDirectiveGenerator",["FBLogger","I64","MAWJids","MAWMsgType","MessageBackupSupplementalKeyGenerator","WAGlobals","WAJids","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){a=d("MessageBackupSupplementalKeyGenerator").createReactionSupplementalKey(a);if(a!=null)return a;throw c("FBLogger")("labyrinth_web").mustfixThrow("Failed to create reaction supplemental key")}function j(a,b){a=d("MessageBackupSupplementalKeyGenerator").createEditSupplementalKey(a,b);if(a!=null)return a;throw c("FBLogger")("labyrinth_web").mustfixThrow("Failed to create edit supplemental key")}function k(a,b){b=d("MAWJids").toUserJid((h||(h=d("I64"))).to_string(b).toString());return{actionType:2,originalMsgProtocolId:a,supplementalKey:i(b)}}function l(a,b,c){b=d("MAWJids").toUserJid((h||(h=d("I64"))).to_string(b).toString());return{actionType:2,originalMsgProtocolId:a,supplementalKey:j(b,c)}}function m(a){if(d("WAJids").isAuthorSystem(a.author))return null;if(a.reactToExternalId!=null)return{author:a.reactToAuthor===d("WAGlobals").getMyUserJid()?"@me":a.reactToAuthor,chat:a.threadJid,externalId:a.reactToExternalId};else if(a.originalMsgExternalId!=null)return{author:a.author,chat:a.threadJid,externalId:a.originalMsgExternalId};else if(a.revokedExternalId!=null)return{author:a.author,chat:a.threadJid,externalId:a.revokedExternalId};return a.externalId==null?null:{author:a.author,chat:a.threadJid,externalId:a.externalId}}function a(a){var b=(h||(h=d("I64"))).of_string(d("WAJids").authorToUserId(a.author,d("WAJids").extractUserId(d("WAGlobals").getMyUserJid()))),e=m(a);if(e==null)return null;if(a.originalMsgExternalId!=null){if(a.editTs==null){c("FBLogger")("labyrinth_web").mustfix("editTs is null for edit message during createMessageBackupDirectiveFromDbMsg");return null}return l(e,b,d("WATimeUtils").castUnixTimeToMillisTime(a.editTs))}return a.reactToExternalId!=null?k(e,b):n(e,b,a.type,null)}function n(a,b,e,f){switch(e){case d("MAWMsgType").MSG_TYPE.TEXT:case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.XMA:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:case d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:case d("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:return{actionType:1,originalMsgProtocolId:a};case d("MAWMsgType").MSG_TYPE.REACTION:return k(a,b);case d("MAWMsgType").MSG_TYPE.EDIT_ACTION:if(f==null)throw c("FBLogger")("labyrinth_web").mustfixThrow("editTs is null for edit message during createMessageBackupDirective");return l(a,b,f);case d("MAWMsgType").MSG_TYPE.REVOKED:return{actionType:4,originalMsgProtocolId:a};case d("MAWMsgType").MSG_TYPE.DELETE_FOR_ME:return{actionType:3,originalMsgProtocolId:a};default:c("FBLogger")("labyrinth_web").mustfix("Unsupported message type %s",e);return{actionType:0,originalMsgProtocolId:a}}}g.createMessageBackupDirectiveFromDbMsg=a;g.createMessageBackupDirective=n}),98);
__d("MessageBackupDirectiveTypes",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.actionType,c=a.messageId;a=a.supplementalKey;return{actionType:b,originalMsgProtocolId:{externalId:c},supplementalKey:a!=null?a:void 0}}f.getMessageBackupDirectiveFromMessageTransportBackupDirective=a}),66);
__d("EncryptedBackupsCreateUploadMessage",["EBAPIQPLPoints","EBGenerateMessageTags","EncryptedBackupsConvertToLegacyAttachmentContext","EncryptedBackupsGetAttachmentContextForReceivedMsg","I64","LSRequestId","MAWEBSwitch","MAWMessageSortOrderUtils","MAWMsgType","MessageBackupDirectiveGenerator","MessageBackupDirectiveTypes","QPLUserFlow","WAAsMessageApplication","WAByteArray","WAConsumerApplication.pb","WAGlobals","WAJids","WALogger","WAMsgApplication.pb","WATimeUtils","decodeProtobuf","encodeProtobuf","gkx","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] no result or failed for incoming stanza ",""]);i=function(){return a};return a}function j(a){if(a==null)return null;var b;if(a.unstoredDbReaction!=null)return d("MAWMsgType").MSG_TYPE.REACTION;else if(a.unstoredDbEditActionMsg!=null)return d("MAWMsgType").MSG_TYPE.EDIT_ACTION;else if(a.unstoredDbMedia!=null){var e;b=a.unstoredDbMedia.mediaType;e=(e=a.unstoredDbMsg)==null?void 0:e.ephemeralSetting}else if(a.unstoredXMA!=null){var f;b=d("MAWMsgType").MSG_TYPE.XMA;e=(f=(f=a.unstoredDbMsg)==null?void 0:f.ephemeralSetting)!=null?f:(f=a.unstoredXMA.unstoredAssociatedMsg)==null?void 0:f.ephemeralSetting}else if(a.unstoredDbMsg!=null)b=a.unstoredDbMsg.type,e=a.unstoredDbMsg.ephemeralSetting;else return null;f=c("gkx")("11820");a=f?d("MAWMsgType").isProtobufUploadSupportedMsgType(b):d("MAWMsgType").isEBSupportedMsgType(b);return a&&!(e!=null&&e.ephemeralExpirationInSec>0)?b:null}function k(a){var b,c=a.stanza.message.decrypted.id;if(((b=a.decodedMsg)==null?void 0:b.unstoredDbReaction)!=null)return{author:a.decodedMsg.unstoredDbReaction.reactToAuthor,chat:c.chat,externalId:a.decodedMsg.unstoredDbReaction.reactToExternalId};else if(((b=a.decodedMsg)==null?void 0:b.unstoredDbEditActionMsg)!=null)return{author:c.author,chat:c.chat,externalId:a.decodedMsg.unstoredDbEditActionMsg.originalMsgExternalId};return c}function l(a){var b;return d("WAAsMessageApplication").castToMessageApplicationBytes(d("encodeProtobuf").encodeProtobuf(d("WAMsgApplication.pb").MessageApplicationSpec,{metadata:a.metadata,payload:{subProtocol:(b={},b[a.subprotocolType]={payload:d("WAByteArray").uint8ArrayToBuffer(a.subprotocol),version:1},b)}}).readByteArrayView())}function m(a){if(a.subprotocolType!=="consumerMessage")return null;a=d("decodeProtobuf").decodeProtobufWithUnknowns(d("WAConsumerApplication.pb").ConsumerApplicationSpec,a.subprotocol);if(a==null)return null;a=(a=a.payload)==null?void 0:a.content;if(a==null)return null;a=a.editMessage;return a==null||a.timestampMs==null?null:d("WATimeUtils").castLongIntToMillisTime(a.timestampMs)}function n(a){var b=a.stanza.message.decrypted.id,e=a.stanza.message.details.ts;a=c("EncryptedBackupsGetAttachmentContextForReceivedMsg")(a);var f=c("EncryptedBackupsConvertToLegacyAttachmentContext")(a),g=[];f.length>0&&f.forEach(function(a){var f=a.mediaObjectId;a=a.mediaType;g.push({deliveryObjectId:f,mediaType:a,messageId:b.externalId,productType:"msgr",threadId:d("WAJids").threadIdForChatJid(b.chat),threadJid:b.chat,traceId:c("LSRequestId").generate(),ts:e})});return{attachmentContext:a,legacyUploadAttachmentArray:g}}function a(a,b,e,f){var g,o=c("qpl")._(521477113,"2698"),p=j(a.decodedMsg);if(p==null){d("WALogger").WARN(i(),a.stanza.message.decrypted.id);c("QPLUserFlow").addPoint(c("qpl")._(521477113,"2698"),d("EBAPIQPLPoints").EBUploadQueueQPLPoints.UNKNOWN_MESSAGE_TYPE,{instanceKey:f});return null}var q=a.stanza.message.decrypted.msg;if((q==null?void 0:q.version)!=="v3"||q.type!=="subprotocol"){c("QPLUserFlow").addPoint(o,d("EBAPIQPLPoints").EBUploadQueueQPLPoints.UKNOWN_MESSAGE_VERSION_OR_PROTOCOL,{instanceKey:f});return null}var r=a.stanza.message.decrypted.id,s=r.author,t=r.externalId,u=k(a),v=l(q);s=(h||(h=d("I64"))).of_string(d("WAJids").authorToUserId(s,d("WAJids").extractUserId(d("WAGlobals").getMyUserJid())));var w=a.stanza.message.details.reportingMeta,x=a.stanza.message.details.ts;c("QPLUserFlow").addPoint(o,d("EBAPIQPLPoints").EBUploadQueueQPLPoints.GENERATE_BACKUP_DIRECTIVE_START,{instanceKey:f});var y=q.backupDirective!=null?d("MessageBackupDirectiveTypes").getMessageBackupDirectiveFromMessageTransportBackupDirective(q.backupDirective):null;q=d("MessageBackupDirectiveGenerator").createMessageBackupDirective(u,s,p,p===d("MAWMsgType").MSG_TYPE.EDIT_ACTION?m(q):null);var z=c("gkx")("11820");z&&y!=null&&p===d("MAWMsgType").MSG_TYPE.FUTUREPROOF?z=y:z=q;c("QPLUserFlow").addPoint(o,d("EBAPIQPLPoints").EBUploadQueueQPLPoints.GENERATE_BACKUP_DIRECTIVE_END,{instanceKey:f});c("QPLUserFlow").addPoint(o,d("EBAPIQPLPoints").EBUploadQueueQPLPoints.GET_ATTACHMENT_CONTEXT_START,{instanceKey:f});a=n(a);var A=a.attachmentContext;a=a.legacyUploadAttachmentArray;A.length>0&&c("QPLUserFlow").addPoint(c("qpl")._(521477113,"2698"),d("EBAPIQPLPoints").EBUploadQueueQPLPoints.ADDED_ATTACHMENT_CONTEXT,{data:{"int":{attachmentCount:A.length}},instanceKey:f});a.length>0&&c("QPLUserFlow").addPoint(c("qpl")._(521477113,"2698"),d("EBAPIQPLPoints").EBUploadQueueQPLPoints.ADDED_ATTACHMENT_CONTEXT_LEGACY,{data:{"int":{legacyAttachmentCount:a.length}},instanceKey:f});c("QPLUserFlow").addPoint(o,d("EBAPIQPLPoints").EBUploadQueueQPLPoints.GET_ATTACHMENT_CONTEXT_END,{instanceKey:f});o=A.map(function(a){return d("EBGenerateMessageTags").generateEBMessageTags(a.mediaType)}).filter(Boolean);var B=!c("MAWEBSwitch").isEnabled();c("QPLUserFlow").addAnnotations(c("qpl")._(521477113,"2698"),{bool:{isRetroactiveUpload:B},"int":{attachmentCount:A.length,backupDirectiveType:z.actionType,generatedDirective_actionType:q.actionType,legacyAttachmentCount:a.length,protobufDirective_actionType:(g=y==null?void 0:y.actionType)!=null?g:-1},string:{generatedDirective_supplementalKey:(g=q.supplementalKey)!=null?g:"no_supplemental_key",protobufDirective_supplementalKey:(q=y==null?void 0:y.supplementalKey)!=null?q:"no_supplemental_key"}},{instanceKey:f});return{attachmentContext:A,backupDirective:z,dbMsgType:p,instanceKey:f,isRetroactiveUpload:B,legacyAttachmentContext:a,messageApplication:v,msgId:r,originalMsgProtocolId:u,reportingMeta:w,senderId:s,serverTs:x,sortOrderMs:e!=null?e:d("WATimeUtils").castToMillisTime(d("MAWMessageSortOrderUtils").generateAuthoritativeMessageSortOrder({externalId:t,serverTs:x,ts:x})),tags:o,triggerSource:b!=null?b:"unknown"}}g.createUploadMessage=a}),98);
__d("EBUploadReceivedMessages",["EBAPIQPLPoints","EncryptedBackupsCreateUploadMessage","EncryptedBackupsUploadQueue","MAWEBSwitch","MWEBODSEntityName.enum","MWEBODSUtils","QPLUserFlow","WAHashStringToNumber","WALogger","WAResultOrError","asyncToGeneratorRuntime","justknobx","qpl","requireDeferred","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] error generating backup directive for received message, ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] no result or failed for incoming stanza ",""]);i=function(){return a};return a}var j=c("requireDeferred")("ArmadilloReceiveWriteDbSuccessFalcoEvent").__setRef("EBUploadReceivedMessages"),k=c("justknobx")._("3874");function a(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.incomingMessages,e=a.msgResults;try{if(b.length===0)return d("WAResultOrError").makeResult();d("MWEBODSUtils").markODSForEB(c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_COUNTER,"upload.api.receive.process",b.length);a=b.map(function(a){var b=d("WAHashStringToNumber").hashStringToNumber(c("uuidv4")());c("QPLUserFlow").start(c("qpl")._(521477113,"2698"),{annotations:{bool:{received:!0}},instanceKey:b,timeoutInMs:c("justknobx")._("308")});try{var f=a.stanza.message.decrypted.id;f=e.get(f);if(f==null||!f.success){d("WALogger").EXPECTED_ERROR(i(),a.stanza.message.decrypted.id);c("QPLUserFlow").endFailure(c("qpl")._(521477113,"2698"),d("EBAPIQPLPoints").EBUploadQueueQPLPoints.MESSAGE_RESULT_FAILURE_OR_NULL,{instanceKey:b});return null}var g=d("EncryptedBackupsCreateUploadMessage").createUploadMessage(a,"upload-received-messages",void 0,b);g==null?c("QPLUserFlow").endFailure(c("qpl")._(521477113,"2698"),d("EBAPIQPLPoints").EBUploadQueueQPLPoints.UPLOAD_PAYLOAD_CREATION_FAILURE,{instanceKey:b}):c("QPLUserFlow").addPoint(c("qpl")._(521477113,"2698"),d("EBAPIQPLPoints").EBUploadQueueQPLPoints.UPLOAD_PAYLOAD_CREATED,{instanceKey:b});k&&(g==null?void 0:g.msgId)!=null&&j.onReady(function(a){var b,d={is_protobuf_only:!1,is_supplemental_upload:g.msgId.externalId!==g.originalMsgProtocolId.externalId,msg_type:(b=g.dbMsgType)!=null?b:"unknown",trigger_source:"receive"};a.log(function(){return{encrypted_backup_enable:c("MAWEBSwitch").isEnabled(),labyrinth_version:0,message_id:g.msgId.externalId,process_context:JSON.stringify(d)}})});return g}catch(a){d("WALogger").ERROR(h(),a);c("QPLUserFlow").endFailure(c("qpl")._(521477113,"2698"),d("EBAPIQPLPoints").EBUploadQueueQPLPoints.RUNTIME_ERROR,{annotations:{string:{error:a.toString()}},instanceKey:b});return null}}).filter(Boolean);if(a.length===0)return d("WAResultOrError").makeResult();d("MWEBODSUtils").markODSForEB(c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_COUNTER,"upload.api.receive.enqueue",a.length);yield d("EncryptedBackupsUploadQueue").putMsgsToEbUpload(a);return d("WAResultOrError").makeResult()}catch(a){return d("WAResultOrError").DEPRECATED_makeError("runtime-exception",a)}});return l.apply(this,arguments)}g.uploadReceivedMessages=a}),98);
__d("EBUploadReceivedMessagesRevokeUtils",["EBAPIQPLPoints","EncryptedBackupsCreateUploadMessage","MAWGetMsgForProtocolMsgIdTxn","MAWMessageSortOrderUtils","QPLUserFlow","WALogger","WATimeUtils","asyncToGeneratorRuntime","gkx","qpl","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] EBUploadReceivedMessagesProtobufOnly not uploading placeholder message - Original message not found for revoked message ",""]);h=function(){return a};return a}var i=c("requireDeferred")("EBAPI").__setRef("EBUploadReceivedMessagesRevokeUtils");function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e;if(((e=a.decodedMsg)==null?void 0:(e=e.unstoredDbMsg)==null?void 0:e.type)!=="Revoked"||!c("gkx")("8488"))return null;var f=a.stanza.message.decrypted.id,g=(yield d("MAWGetMsgForProtocolMsgIdTxn").getMsgForProtocolMsgIdTxn({author:f.author,chat:f.chat,externalId:a.decodedMsg.unstoredDbMsg.revokedExternalId}));if(!g.success){d("WALogger").WARN(h(),f.externalId);c("QPLUserFlow").endFailure(c("qpl")._(521477113,"2698"),d("EBAPIQPLPoints").EBUploadQueueQPLPoints.MESSAGE_RESULT_FAILURE_OR_NULL,{instanceKey:b});return null}var j=d("WATimeUtils").castToMillisTime((e=g.value.sortOrderMs)!=null?e:d("MAWMessageSortOrderUtils").generateAuthoritativeMessageSortOrder({externalId:g.value.externalId,serverTs:g.value.serverTs,ts:g.value.ts}));c("gkx")("11710")&&(yield i.load().then(function(a){return a.uploadDeletedMessage({instanceKey:b,msgId:{author:f.author,chat:f.chat,externalId:g.value.externalId},sender:f.author,serverTs:(a=g.value.serverTs)!=null?a:g.value.ts,sortOrderMs:j})}));return d("EncryptedBackupsCreateUploadMessage").createUploadMessage(a,"upload-received-messages",j,b)});return j.apply(this,arguments)}g.createRevokeUploadMsg=a}),98);
__d("EBUploadReceivedMessagesProtobufOnly",["EBAPIQPLPoints","EBUploadReceivedMessagesRevokeUtils","EncryptedBackupsCreateUploadMessage","EncryptedBackupsUploadQueue","MAWEBSwitch","Promise","QPLUserFlow","WAHashStringToNumber","WAResultOrError","asyncToGeneratorRuntime","justknobx","qpl","requireDeferred","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("ArmadilloReceiveWriteDbSuccessFalcoEvent").__setRef("EBUploadReceivedMessagesProtobufOnly"),j=c("justknobx")._("3874");function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.uploadArray;try{if(a.length===0)return d("WAResultOrError").makeResult();a=a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("WAHashStringToNumber").hashStringToNumber(c("uuidv4")());c("QPLUserFlow").start(c("qpl")._(521477113,"2698"),{annotations:{bool:{protobufOnly:!0,received:!0}},instanceKey:b,timeoutInMs:c("justknobx")._("308")});try{var e,f=((e=a.decodedMsg)==null?void 0:(e=e.unstoredDbMsg)==null?void 0:e.type)==="Revoked"?yield d("EBUploadReceivedMessagesRevokeUtils").createRevokeUploadMsg(a,b):d("EncryptedBackupsCreateUploadMessage").createUploadMessage(a,"upload-received-messages",void 0,b);f==null?c("QPLUserFlow").endFailure(c("qpl")._(521477113,"2698"),d("EBAPIQPLPoints").EBUploadQueueQPLPoints.UPLOAD_PAYLOAD_CREATION_FAILURE,{instanceKey:b}):c("QPLUserFlow").addPoint(c("qpl")._(521477113,"2698"),d("EBAPIQPLPoints").EBUploadQueueQPLPoints.UPLOAD_PAYLOAD_CREATED,{instanceKey:b});j&&(f==null?void 0:f.msgId)!=null&&i.onReady(function(a){var b,d={is_protobuf_only:!0,is_supplemental_upload:f.msgId.externalId!==f.originalMsgProtocolId.externalId,msg_type:(b=f.dbMsgType)!=null?b:"unknown",trigger_source:"receive"};a.log(function(){return{encrypted_backup_enable:c("MAWEBSwitch").isEnabled(),labyrinth_version:0,message_id:f.msgId.externalId,process_context:JSON.stringify(d)}})});return f}catch(a){c("QPLUserFlow").endFailure(c("qpl")._(521477113,"2698"),d("EBAPIQPLPoints").EBUploadQueueQPLPoints.UPLOAD_PAYLOAD_CREATION_FAILURE,{annotations:{string:{error:a.message}},instanceKey:b});return null}});return function(b){return a.apply(this,arguments)}}());a=(yield (h||(h=b("Promise"))).all(a));a=a.filter(Boolean);if(a.length===0)return d("WAResultOrError").makeResult();yield d("EncryptedBackupsUploadQueue").putMsgsToEbUpload(a);return d("WAResultOrError").makeResult()}catch(a){return d("WAResultOrError").DEPRECATED_makeError("runtime-exception",a)}});return k.apply(this,arguments)}g.uploadReceivedMessagesProtobufOnly=a}),98);
__d("MAWGetAllMediaIdsForXMAMsgApi",["MAWDbXMATxns","MAWDexieTable","MAWIndexedDb","MAWTransactionMode"],(function(a,b,c,d,e,f,g){"use strict";a=d("MAWIndexedDb").makeMsgrTransactor({xma:d("MAWTransactionMode").READONLY},"getAllMediaIdsForXMAMsg",function(a){return function(b){var c=new Map();b=b.map(function(b){return d("MAWDbXMATxns").maybeGetXMAFromProtocolMsgId(a,b).then(function(a){var d,e=(d=c.get(b))!=null?d:new Set();a!=null&&(a.faviconMediaId!=null&&e.add(a.faviconMediaId),a.headerMediaId!=null&&e.add(a.headerMediaId),a.previewMediaIds!=null&&a.previewMediaIds.forEach(function(a){return e.add(a)}));c.set(b,e)})});return d("MAWDexieTable").dexieAll(b).then(function(a){return c})}});g.getAllMediaIdsForXMAMsg=a}),98);
__d("EncryptedBackupsGetAttachmentContextForSentMsgXMA",["EncryptedBackupsUploadEntity","MAWDbMediaTxns","MAWGetAllMediaIdsForXMAMsgApi","MAWIndexedDb","MAWTransactionMode","WAMediaUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=d("MAWIndexedDb").makeMsgrTransactor({media:d("MAWTransactionMode").READONLY},"bulkGetRetroactiveMedia",function(a){return function(){for(var b=arguments.length,c=new Array(b),e=0;e<b;e++)c[e]=arguments[e];return d("MAWDbMediaTxns").bulkGetMedias.apply(void 0,[a].concat(c))}});function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield d("MAWGetAllMediaIdsForXMAMsgApi").getAllMediaIdsForXMAMsg([a]).then(function(b){b=b.get(a);return b!=null?h(Array.from(b)):[]}));return c.filter(Boolean).flatMap(function(a){var c=b.msgId!=null?a==null?void 0:a.mediaEntries.get(b.msgId):null;c=c!=null?d("WAMediaUtils").decodeMediaEntryData(c):null;var e=[];(c==null?void 0:c.objectId)!=null&&a.mediaType!=null&&e.push({mediaObjectId:c.objectId,mediaType:d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.XMA});c=c==null?void 0:(a=c.downloadableThumbnail)==null?void 0:a.objectId;c!=null&&e.push({isPreview:!0,mediaObjectId:d("WAMediaUtils").stringToDeliveryObjectId(c),mediaType:d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.MESSENGER_PREVIEW});return e})});return i.apply(this,arguments)}g["default"]=a}),98);
__d("EncryptedBackupsGetAttachmentContextForSentMsg",["EncryptedBackupsCastToAttachmentContextMediaType","EncryptedBackupsGetAttachmentContextForSentMsgXMA","EncryptedBackupsUploadEntity","WAMediaUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.dbMsg,e=a.isXMAMsg,f=a.media;a=a.protocolMsgIdFromArgs;if(e===!0){e=(yield c("EncryptedBackupsGetAttachmentContextForSentMsgXMA")(a,b));return e.filter(Boolean)}a=[];e=b.msgId!=null?f==null?void 0:f.mediaEntries.get(b.msgId):null;b=e!=null?d("WAMediaUtils").decodeMediaEntryData(e):null;if(f==null||b==null)return[];if(b.objectId!=null&&f.mediaType!=null){a.push({mediaObjectId:b.objectId,mediaType:c("EncryptedBackupsCastToAttachmentContextMediaType")(f.mediaType)});f=(e=b.downloadableThumbnail)==null?void 0:e.objectId;f!=null&&a.push({mediaObjectId:d("WAMediaUtils").stringToDeliveryObjectId(f),mediaType:d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.MESSENGER_PREVIEW})}return a});return h.apply(this,arguments)}g["default"]=a}),98);
__d("EncryptedBackupsGetAttachmentContextForSentMsgV2",["EncryptedBackupsCastToAttachmentContextMediaType","EncryptedBackupsUploadEntity","WAMediaUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e){var f=new Map(),g=[],h=a.msgId;if(b!=null){a=h!=null?b.mediaEntries.get(h):null;a=a!=null?d("WAMediaUtils").decodeMediaEntryData(a):null;b=c("EncryptedBackupsCastToAttachmentContextMediaType")(b.mediaType);if((a==null?void 0:a.objectId)!=null&&b!=null){var i=a.objectId;f.set(i,b)}b=a==null?void 0:(i=a.downloadableThumbnail)==null?void 0:i.objectId;b!=null&&f.set(b,d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.MESSENGER_PREVIEW)}if(e!=null){if(e.favicon!=null){a=e.favicon.objectId;a!=null&&f.set(a,d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.XMA)}if(e.header!=null){i=e.header.objectId;i!=null&&f.set(i,d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.XMA)}e.previews!=null&&e.previews.length>0&&e.previews.forEach(function(a){a=a.mediaEntries;a=h!=null?a.get(h):null;a=a!=null?d("WAMediaUtils").decodeMediaEntryData(a):null;if((a==null?void 0:a.objectId)!=null){a=a.objectId;f.set(a,d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.XMA)}})}f.forEach(function(a,b){g.push({mediaObjectId:b,mediaType:a})});return g}g["default"]=a}),98);
__d("EBUploadSentMessage",["EBAPIQPLPoints","EBEnableUnifiedAttachment","EBGenerateMessageTags","EBUnifyLegacyMediaUpload","EncryptedBackupsConvertToLegacyAttachmentContext","EncryptedBackupsGetAttachmentContextForSentMsg","EncryptedBackupsGetAttachmentContextForSentMsgV2","EncryptedBackupsUploadQueue","I64","LSRequestId","MAWEBSwitch","MAWMessageSortOrderUtils","MAWMsgType","MWEBODSEntityName.enum","MWEBODSUtils","MessageBackupDirectiveGenerator","QPLUserFlow","WAFrankingTypes","WAGenReportingMeta","WAGetSafeQPLError","WAGlobals","WAHashStringToNumber","WAJids","WALogger","WAResultOrError","WATimeUtils","asyncToGeneratorRuntime","gkx","justknobx","qpl","requireDeferred","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendWrittenMsg adding message "," attachments to EB upload queue"]);i=function(){return a};return a}var j=c("requireDeferred")("ArmadilloReceiveWriteDbSuccessFalcoEvent").__setRef("EBUploadSentMessage"),k=c("requireDeferred")("EBAPI").__setRef("EBUploadSentMessage"),l=c("justknobx")._("3874");function m(a){if(a.reactToExternalId!=null)return d("MAWMsgType").MSG_TYPE.REACTION;else if(a.editMsgHistoryId!=null)return d("MAWMsgType").MSG_TYPE.EDIT_ACTION;else if(a.type==null)return null;else return d("MAWMsgType").isProtobufUploadSupportedMsgType(a.type)&&!(a.ephemeralSetting!=null&&a.ephemeralSetting.ephemeralExpirationInSec>0)?a.type:null}function a(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.dbMsg,e=a.isXMAMsg;e=e===void 0?!1:e;var f=a.media,g=a.messageApplication,n=a.messageApplicationBytes,o=a.protocolMsgId,p=a.serverTs,q=a.triggerSource;q=q===void 0?"upload-sent-message":q;a=a.xmaPayload;var r=d("WAHashStringToNumber").hashStringToNumber(c("uuidv4")()),s=c("qpl")._(521477113,"2698");d("MWEBODSUtils").markODSForEB(c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_COUNTER,"upload.api.sent.process",1);try{if(d("WAJids").isAuthorSystem(b.author))return d("WAResultOrError").makeResult();c("QPLUserFlow").start(s,{annotations:{bool:{received:!1}},instanceKey:r,timeoutInMs:c("justknobx")._("308")});var t=m(b);if(t==null){c("QPLUserFlow").endFailure(s,d("EBAPIQPLPoints").EBUploadQueueQPLPoints.UNSUPPORTED_MESSAGE_TYPE,{instanceKey:r});return d("WAResultOrError").makeError("Unsupported EB upload message type")}c("QPLUserFlow").addPoint(s,d("EBAPIQPLPoints").EBUploadQueueQPLPoints.GENERATE_BACKUP_DIRECTIVE_START,{instanceKey:r});var u=d("MessageBackupDirectiveGenerator").createMessageBackupDirectiveFromDbMsg(b);c("QPLUserFlow").addPoint(s,d("EBAPIQPLPoints").EBUploadQueueQPLPoints.GENERATE_BACKUP_DIRECTIVE_END,{instanceKey:r});if(u==null){c("QPLUserFlow").endFailure(s,d("EBAPIQPLPoints").EBUploadQueueQPLPoints.UNABLE_TO_CREATE_BACKUP_DIRECTIVE,{instanceKey:r});return d("WAResultOrError").makeError("Unable to create backup directive")}c("QPLUserFlow").addPoint(s,d("EBAPIQPLPoints").EBUploadQueueQPLPoints.GET_ATTACHMENT_CONTEXT_START,{instanceKey:r});var v=[];d("EBUnifyLegacyMediaUpload").getEnableUnifyLegacyMediaUpload()||d("EBEnableUnifiedAttachment").getEbEnableUnifiedAttachment()?v=c("EncryptedBackupsGetAttachmentContextForSentMsgV2")(b,f,a):v=(yield c("EncryptedBackupsGetAttachmentContextForSentMsg")({dbMsg:b,isXMAMsg:e,media:f,protocolMsgIdFromArgs:o}));c("QPLUserFlow").addPoint(s,d("EBAPIQPLPoints").EBUploadQueueQPLPoints.GET_ATTACHMENT_CONTEXT_END,{instanceKey:r});a=c("EncryptedBackupsConvertToLegacyAttachmentContext")(v);var w=[];a.length>0&&a.forEach(function(a){var e=a.mediaObjectId;a=a.mediaType;w.push({deliveryObjectId:e,mediaType:a,messageId:o.externalId,productType:"msgr",threadId:d("WAJids").threadIdForChatJid(o.chat),threadJid:b.threadJid,traceId:c("LSRequestId").generate(),ts:p})});v.length>0&&c("QPLUserFlow").addPoint(c("qpl")._(521477113,"2698"),d("EBAPIQPLPoints").EBUploadQueueQPLPoints.ADDED_ATTACHMENT_CONTEXT,{instanceKey:r});w.length>0&&c("QPLUserFlow").addPoint(c("qpl")._(521477113,"2698"),d("EBAPIQPLPoints").EBUploadQueueQPLPoints.ADDED_ATTACHMENT_CONTEXT_LEGACY,{instanceKey:r});e=v.map(function(a){return d("EBGenerateMessageTags").generateEBMessageTags(a.mediaType)}).filter(Boolean);d("WALogger").LOG(i(),(f=v)==null?void 0:f.length);c("QPLUserFlow").addPoint(s,d("EBAPIQPLPoints").EBUploadQueueQPLPoints.GENERATE_REPORTING_META_START,{instanceKey:r});a=g==null?void 0:g.metadata;f=(yield d("WAGenReportingMeta").genReportingMeta(n,(a==null?void 0:a.frankingKey)?d("WAFrankingTypes").castToFrankingKey(new Uint8Array(a==null?void 0:a.frankingKey)):null,a==null?void 0:a.frankingVersion));c("QPLUserFlow").addPoint(s,d("EBAPIQPLPoints").EBUploadQueueQPLPoints.GENERATE_REPORTING_META_END,{instanceKey:r});g=!c("MAWEBSwitch").isEnabled();c("QPLUserFlow").addAnnotations(c("qpl")._(521477113,"2698"),{bool:{isRetroactiveUpload:g},"int":{attachmentCount:v.length,backupDirectiveType:u.actionType,legacyAttachmentCount:w.length}},{instanceKey:r});d("MWEBODSUtils").markODSForEB(c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_COUNTER,"upload.api.sent.enqueue",1);var x=d("WATimeUtils").castToMillisTime(d("MAWMessageSortOrderUtils").generateAuthoritativeMessageSortOrder({externalId:o.externalId,originalTs:b.originalTs,revokedExternalId:b.revokedExternalId,serverTs:p,ts:p})),y={backupDirective:u,dbMsgType:t,instanceKey:r,isRetroactiveUpload:g,messageApplication:n,msgId:o,originalMsgProtocolId:u.originalMsgProtocolId.externalId!==o.externalId?u.originalMsgProtocolId:o,reportingMeta:f,senderId:(h||(h=d("I64"))).of_string(d("WAJids").authorToUserId(o.author,d("WAJids").extractUserId(d("WAGlobals").getMyUserJid()))),serverTs:p,sortOrderMs:x,tags:e,triggerSource:q};(v.length>0||w.length>0)&&(y=babelHelpers["extends"]({},y,{attachmentContext:v,legacyAttachmentContext:w}));l&&((a=y)==null?void 0:a.msgId)!=null&&j.onReady(function(a){var b,d={is_protobuf_only:!1,is_supplemental_upload:y.msgId.externalId!==y.originalMsgProtocolId.externalId,msg_type:(b=y.dbMsgType)!=null?b:"unknown",trigger_source:"send"};a.log(function(){return{encrypted_backup_enable:c("MAWEBSwitch").isEnabled(),labyrinth_version:0,message_id:y.msgId.externalId,process_context:JSON.stringify(d)}})});yield d("EncryptedBackupsUploadQueue").putMsgsToEbUpload([y]);c("gkx")("11710")&&b.type===d("MAWMsgType").MSG_TYPE.REVOKED&&b.originalMsgExternalId==null&&b.reactToExternalId==null&&(c("QPLUserFlow").addPoint(s,d("EBAPIQPLPoints").EBUploadQueueQPLPoints.UPLOAD_DELETED_MESSAGE,{instanceKey:r}),yield k.load().then(function(a){return a.uploadDeletedMessage({instanceKey:r,msgId:{author:o.author,chat:b.threadJid,externalId:b.revokedExternalId},sender:b.author,serverTs:(a=(a=b.originalTs)!=null?a:b.serverTs)!=null?a:b.ts,sortOrderMs:x})}));return d("WAResultOrError").makeResult()}catch(a){c("QPLUserFlow").endFailure(s,d("EBAPIQPLPoints").EBUploadQueueQPLPoints.RUNTIME_ERROR,{annotations:{string:{errorDescription:d("WAGetSafeQPLError").getSafeQPLErrorMessage(a)}},instanceKey:r});return d("WAResultOrError").DEPRECATED_makeError("runtime-error",a)}});return n.apply(this,arguments)}g.uploadSentMessage=a}),98);
__d("EBWorkerEBDBApi",["EBDB","EBDBConsistencyApi","EBLS","WALogger","WAResolvable","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error on EBDB init in Worker: ",""]);h=function(){return a};return a}var i=new(d("WAResolvable").Resolvable)();function a(){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("EBLS").genLSClient());try{yield d("EBDBConsistencyApi").startListeningDeviceRegistrations(a.db,d("EBDB").EBDBEnvironment.Worker)}catch(a){d("WALogger").ERROR(h(),a)}finally{i.resolve(a.db)}});return j.apply(this,arguments)}function c(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield i.promise);yield d("EBDBConsistencyApi").addNewDevice(b,d("EBDB").EBDBEnvironment.Worker,a)});return k.apply(this,arguments)}function e(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield i.promise);void d("EBDBConsistencyApi").trackConsistency(b,d("EBDB").EBDBEnvironment.Worker,a);return d("EBDBConsistencyApi").getDeviceId()});return l.apply(this,arguments)}function f(){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("EBDB").getEBDB());a=(yield a.store("secure_encrypted_backups_client_state").readAll());return a[0]});return m.apply(this,arguments)}g.startListeningEBDeviceRegistrations=a;g.addNewDevice=c;g.trackConsistency=e;g.getSecureEBClientState=f}),98);
__d("EchoSerializationFailureFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5722");b=d("FalcoLoggerInternal").create("echo_serialization_failure",a);e=b;g["default"]=e}),98);
__d("EchoSerializationSuccessFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5723");b=d("FalcoLoggerInternal").create("echo_serialization_success",a);e=b;g["default"]=e}),98);
__d("EncryptedBackupTaskSkippedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5727");b=d("FalcoLoggerInternal").create("encrypted_backup_task_skipped",a);e=b;g["default"]=e}),98);
__d("EncryptedBackupUploadFailureFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5728");b=d("FalcoLoggerInternal").create("encrypted_backup_upload_failure",a);e=b;g["default"]=e}),98);
__d("EncryptedBackupdDYIFileSaver",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("file-saver").__setRef("EncryptedBackupdDYIFileSaver");function a(a,b){h.onReadyImmediately(function(c){c=c.saveAs;c(b,a)})}g.saveFile=a}),98);
__d("EncryptedBackupsDYIHandleMessageRestore",["EncryptedBackupsDYISingleton","I64","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Issuing next range query for thread with thread key ",", server generated next reference timestamp: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["nextTimestampMs was not supplied for thread with thread key ","."]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["handling message range query for thread with thread key ",", hasMoreBefore: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Cannot find thread key for thread id: ",""]);l=function(){return a};return a}function a(a,b,c,d,e,f,g){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f,g,m){var o=d("EncryptedBackupsDYISingleton").getSingleton(),p=o.getLogger();o=o.getThreadKeyForThreadId(b);if(o==null){p.WARN(l(),b);return}void p.LOG(k(),b,e);c.length>0&&(yield g(o,b,c));if(!e||f==null){e&&f==null&&void p.ERROR(j(),b);n(o);return}g=(h||(h=d("I64"))).to_string(f);void p.LOG(i(),b,g);void m(a,g,b)});return m.apply(this,arguments)}function n(a){var b=d("EncryptedBackupsDYISingleton").getSingleton();b.deleteThreadKeyFromThreadsRestoreInProgress(a)}g.handleMessageRangeQueryRestore=a}),98);
__d("PolarisDirectGQLAPICDNRestorationQuery_instagramRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9537377159694697"}),null);
__d("PolarisDirectGQLAPICDNRestorationQuery.graphql",["PolarisDirectGQLAPICDNRestorationQuery_instagramRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"payload"}],c=[{alias:null,args:[{kind:"Variable",name:"payload",variableName:"payload"}],concreteType:"XIGIGDirectInstamadilloRestoreCDNUrlResponse",kind:"LinkedField",name:"xig_fetch_ig_direct_restore_cdn_url",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"restoration_cdn_url",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"PolarisDirectGQLAPICDNRestorationQuery",selections:c,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"PolarisDirectGQLAPICDNRestorationQuery",selections:c},params:{id:b("PolarisDirectGQLAPICDNRestorationQuery_instagramRelayOperation"),metadata:{},name:"PolarisDirectGQLAPICDNRestorationQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("PolarisDirectGQLAPIEBUploadMessagesMutation_instagramRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9574801429307425"}),null);
__d("PolarisDirectGQLAPIEBUploadMessagesMutation.graphql",["PolarisDirectGQLAPIEBUploadMessagesMutation_instagramRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"XIGTIGUploadMessageHandlerResponse",kind:"LinkedField",name:"xig_ig_open_upload_msg_to_backup",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_success",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"delete_mailbox",storageKey:null},{alias:null,args:null,concreteType:"XIGTIGProtobufParams",kind:"LinkedField",name:"protobuf_params",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"delete_on_success",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"rtu_protocol",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"PolarisDirectGQLAPIEBUploadMessagesMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"PolarisDirectGQLAPIEBUploadMessagesMutation",selections:c},params:{id:b("PolarisDirectGQLAPIEBUploadMessagesMutation_instagramRelayOperation"),metadata:{},name:"PolarisDirectGQLAPIEBUploadMessagesMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("PolarisDirectGQLAPI",["CometRelay","CurrentUser","PolarisDirectGQLAPICDNRestorationQuery.graphql","PolarisDirectGQLAPIEBUploadMessagesMutation.graphql","PolarisRelayEnvironment","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,c){return new(j||(j=b("Promise")))(function(e,f){var g=function(a){f(a)},i=d("CurrentUser").getAppID(),j;i!=null&&(j=Number(i));d("CometRelay").commitMutation(a,{mutation:h!==void 0?h:h=b("PolarisDirectGQLAPIEBUploadMessagesMutation.graphql"),onCompleted:e,onError:g,variables:{input:{app_id:j,payload:{msg_payloads:c}}}})})}function e(a){return d("CometRelay").fetchQuery(c("PolarisRelayEnvironment"),i!==void 0?i:i=b("PolarisDirectGQLAPICDNRestorationQuery.graphql"),{payload:a}).toPromise().then(function(a){return(a=a==null?void 0:(a=a.xig_fetch_ig_direct_restore_cdn_url)==null?void 0:a.restoration_cdn_url)!=null?a:""})}g.ebUploadMessages=a;g.fetchCDNUrlWithRestoration=e}),98);
__d("IGDBridgeResignCdnUrlHandler",["MAWBridgeSendAndReceive","PolarisDirectGQLAPI","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("PolarisDirectGQLAPI").fetchCDNUrlWithRestoration(a));yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","continueMediaDownload",{cdnUrl:a,deliveryObjectId:b})});return h.apply(this,arguments)}g.call=a}),98);
__d("MebMIMediaDownloader",["FBLogger","WADirectPath","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,c){this.mediaDownloadMetadata=a;this.callbacks={onResignCdnUrlFailure:(a=c==null?void 0:c.onResignCdnUrlFailure)!=null?a:b("asyncToGeneratorRuntime").asyncToGenerator(function*(){}),onResignCdnUrlSuccess:(a=c==null?void 0:c.onResignCdnUrlSuccess)!=null?a:b("asyncToGeneratorRuntime").asyncToGenerator(function*(){})}}var e=a.prototype;e.getDownloadMetadata=function(){return this.mediaDownloadMetadata};e.handle=function(){throw c("FBLogger")("labyrinth_web").mustfixThrow("[MebMIMediaDownloader] Please don't use the base class. Instead use either MAWMIMediaDownloader or IGDMIMediaDownloader, depending on the platform.")};e["continue"]=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;yield this.callbacks.onResignCdnUrlSuccess();b=(b=this.waMediaDownloader)==null?void 0:b.getDownloadMetadata();if(b!=null){var c=b.mediaEntry;c.directPath=d("WADirectPath").unsafeCastToDirectPath(a);b.isUrlRenewed=!0;yield (c=this.waMediaDownloader)==null?void 0:c.handle()}});function a(b){return a.apply(this,arguments)}return a}();e.handleError=function(a){return this.callbacks.onResignCdnUrlFailure(a)};e.setNextHandler=function(a){this.waMediaDownloader=a};return a}();g["default"]=a}),98);
__d("MAWMIMediaDownloader",["FBLogger","I64","LSDatabaseSingleton","LSFactory","LSIntEnum","LSIssueAttachmentRestoreTaskStoredProcedure","LSMEBTaskCreationSource","MAWCastToMsgrServerMediaType","MAWLoggerUtils","MAWThreadKeyUtils","MebMIMediaDownloader","MediaDownloadMediator","Promise","WALogger","WAMediaUtils","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);l=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(e,a);function e(){return a.apply(this,arguments)||this}var g=e.prototype;g.handle=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=this,e=(yield (k||(k=d("LSDatabaseSingleton"))).LSDatabaseSingleton);d("MediaDownloadMediator").mapDeliveryObjectIdToMediaDownloader(d("WAMediaUtils").stringToDeliveryObjectId(this.mediaDownloadMetadata.deliveryObjectId),this);var g=d("MAWCastToMsgrServerMediaType").castToMsgrServerMediaType(this.mediaDownloadMetadata.mediaType);if(g==null)throw c("FBLogger")("labyrinth_web").mustfixThrow("Unsupported media type");var m=d("MAWThreadKeyUtils").stringThreadKeyToString(this.mediaDownloadMetadata.threadKey),n=new(h||(h=b("Promise")))(function(a,b){window.setTimeout(function(){b(c("err")("[labyrinth_web][MIMediaDownloader] MI Media download timed out"))},2*60*1e3)}),o=d("MAWLoggerUtils").getInstanceKey();return h.race([e.runInTransaction(function(b){return c("LSIssueAttachmentRestoreTaskStoredProcedure")(c("LSFactory")(b),{backupEntFbid:(i||(i=d("I64"))).of_string(a.mediaDownloadMetadata.backupEntFbid),deliveryObjectId:a.mediaDownloadMetadata.deliveryObjectId,mediaType:g,messageId:a.mediaDownloadMetadata.messageId,productType:a.mediaDownloadMetadata.productType,serverThreadKey:m,sortOrder:i.of_float(a.mediaDownloadMetadata.sortOrder),source:(j||(j=d("LSIntEnum"))).ofNumber(c("LSMEBTaskCreationSource").MSGR_DYI),threadId:a.mediaDownloadMetadata.threadId,traceId:o.toString()})},"readwrite",void 0,void 0,f.id+":68"),n])["catch"](function(b){d("WALogger").ERROR(l(),b.message);return a.handleError(b)})});function e(){return a.apply(this,arguments)}return e}();return e}(c("MebMIMediaDownloader"));g.MAWMIMediaDownloader=a}),98);
__d("MAWEncryptedBackupsDYIProcessProtobufMessages",["CurrentUser","EncryptedBackupsDYIMessageProcessingUtils","EncryptedBackupsDYISingleton","MAWGroupPollsDualEncryptionUtils","MAWHandleEchoProtobufsRestoreApi","MAWJids","MAWMIMediaDownloader","MAWMsgType","MebWAMediaDownloader","Promise","WAHashUtils","WAJids","WALongInt","WAMediaUtils","WAStanzaUtils","WATimeUtils","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Polls] Decryption failure when trying to decrypt poll vote update: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Polls] senderTimestampMs is null. Cannot determine the latest poll vote"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Polls] Decryption failure when trying to decrypt poll add option update: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Polls] Poll creation message key is incomplete. Skipping"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Protobuf] Group poll creation message is missing group poll info"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Explicitly dropping "," message type"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bump message is not supported in DYI"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Protobuf] XMA message doesn't have xmaData"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["Documents are not supported in DYI"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error processing protobuf: ts or messageId or senderId is null"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error processing protobuf: metadata or message type is null"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error processing protobuf. Dropping the message: ",""]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error converting protobuf to DYI format. Dropping the message"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error converting protobuf to DYI format. Dropping the message"]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["Decoded protobuf is empty"]);w=function(){return a};return a}function x(){var a=babelHelpers.taggedTemplateLiteralLoose(["Processing "," protobuf messages for thread ",""]);x=function(){return a};return a}function y(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Protobuf] Media message is missing media entry data"]);y=function(){return a};return a}function z(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Protobuf] Starting DYI media download for attachemnt with hash ",""]);z=function(){return a};return a}function A(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Protobuf] Media message is missing media data"]);A=function(){return a};return a}function a(a,b,c){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=d("EncryptedBackupsDYISingleton").getSingleton(),g=f.getLogger();void g.LOG(x(),e.length,b);var h=d("MAWJids").toUserJid(c("CurrentUser").getAccountID()),i=!0,j=!1,k;try{for(var l=babelHelpers.asyncIterator(e),e,e;e=(yield l.next()),i=e.done,e=(yield e.value),!i;i=!0){e=e;try{e=d("MAWHandleEchoProtobufsRestoreApi").decodeDecryptedMessageProtobuf(e,h,void 0,new Set(),new Set(),new Map(),new Map(),new Map(),!0);if(e==null){void g.WARN(w());return}if(e!=null&&e.metadata!=null&&e.metadata.messageId!=null){var m=d("WAStanzaUtils").toStanzaId(e.metadata.messageId);e=(yield C(a,b,e));if(e==null){void g.WARN(v());return}f.setMessagesByThreadKey(a,m,e)}else{void g.WARN(u());return}}catch(a){void g.ERROR(t(),a);return}}}catch(a){j=!0,k=a}finally{try{!i&&l["return"]!=null&&(yield l["return"]())}finally{if(j)throw k}}});return B.apply(this,arguments)}function C(a,b,c){return D.apply(this,arguments)}function D(){D=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=d("EncryptedBackupsDYISingleton").getSingleton(),f=e.getLogger(),g=c.metadata,h=c.msgType,i=c.sortOrderMs;if(g==null||h==null){void f.WARN(s());return}h=g.messageId;var j=g.senderId;g=g.timestampMs;if(g==null||typeof g!=="number"||h==null||j==null){void f.WARN(r());return}h=d("WATimeUtils").castMilliSecondsToUnixTime(g);g=d("EncryptedBackupsDYIMessageProcessingUtils").buildBaseDyiMessage(j,i);j=(j=c.decodedPayload)==null?void 0:j.text;if(c.editMsgData.length>0){var k=h;c.editMsgData.forEach(function(a){var b;if(a.ts>k&&((b=a.editMsgContent.message)==null?void 0:b.text)!=null){k=a.ts;j=(b=a.editMsgContent.message)==null?void 0:b.text}})}c.reactionData.length>0&&(g.reactions=c.reactionData.map(function(a){var b=a.reaction;a=a.senderId;return{actor:(a=e.getContactNameForContactId(a))!=null?a:"unknown",reaction:(a=b.text)!=null?a:"unknown"}}));switch(c.msgType){case d("MAWMsgType").MSG_TYPE.TEXT:g.type="text";g.text=j||"";break;case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.PTT:g.type="media";g.text=j||"";g=G(a,b,c,i,g);break;case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:void f.WARN(q());return;case d("MAWMsgType").MSG_TYPE.XMA:g.type="link";if(c.xmaData==null){void f.WARN(p());return}g.text=((h=c.xmaData)==null?void 0:h.ctas.map(function(a){return a.nativeUrl}).filter(Boolean).join("\n"))||"";break;case d("MAWMsgType").MSG_TYPE.REVOKED:g.type="placeholder";g.isUnsent=!0;g.text="User unsent a message";break;case d("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:g.type="poll";g.text=(yield E(c));break;case d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:void f.WARN(o());return;default:void f.LOG(n(),c.msgType);return}return g});return D.apply(this,arguments)}function E(a){return F.apply(this,arguments)}function F(){F=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=d("EncryptedBackupsDYISingleton").getSingleton().getLogger(),e=a.groupPollInfo;if(e==null){void c.WARN(m());return""}var f=new Map(),g=new Map();yield (h||(h=b("Promise"))).all(e.options.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("MAWGroupPollsDualEncryptionUtils").getHashForOptionName(a));f.set(b,{optionName:a,voterUserJids:[]})});return function(b){return a.apply(this,arguments)}}()));if(a.groupPollUpdateData!=null){var n=!0,o=!1,p;try{for(var q=babelHelpers.asyncIterator(a.groupPollUpdateData),r,r;r=(yield q.next()),n=r.done,r=(yield r.value),!n;n=!0){var s,t;r=r;if(((s=r.pollCreationMessageKey)==null?void 0:s.id)==null||((s=r.pollCreationMessageKey)==null?void 0:s.remoteJid)==null){c.ERROR(l());continue}s=r.pollCreationMessageKey;var u=s.id;s=s.remoteJid;s=d("WAJids").unsafeCoerceToUserJid(s);t={pollCreationMessageKey:e.encKey,pollCreationSenderJid:d("WAJids").toMsgrUserJid(((t=a.metadata)==null?void 0:t.senderId)||""),pollCreationStanzaId:d("WAStanzaUtils").toStanzaId(u),pollUpdateSenderJid:s,pollUpdateStanzaId:r.externalId};if(r.addOption!=null){u=(yield d("MAWGroupPollsDualEncryptionUtils").decryptGroupPollAddOption(r.addOption,t));if(u.success){var v=u.value,w=!0,x=!1,y;try{for(var z=babelHelpers.asyncIterator(v.pollOption),v,v;v=(yield z.next()),w=v.done,v=(yield v.value),!w;w=!0){v=v;if(v.optionName==null)continue;v=v.optionName;var A=(yield d("MAWGroupPollsDualEncryptionUtils").getHashForOptionName(v));f.has(A)||f.set(A,{optionName:v,voterUserJids:[]})}}catch(a){x=!0,y=a}finally{try{!w&&z["return"]!=null&&(yield z["return"]())}finally{if(x)throw y}}}else c.ERROR(k(),u.error)}if(r.vote!=null){A=(yield d("MAWGroupPollsDualEncryptionUtils").decryptGroupPollVote(r.vote,t));if(A.success){v=A.value;if(v.senderTimestampMs==null){c.WARN(j());continue}w=v.selectedOptions;x=v.senderTimestampMs;u=g.get(s);(u==null||u.senderTimestampMs<d("WALongInt").numberOrThrowIfTooLarge(x))&&g.set(s,{senderTimestampMs:d("WALongInt").numberOrThrowIfTooLarge(x),votes:w.map(d("MAWGroupPollsDualEncryptionUtils").getBase64EncodedHash)})}else c.ERROR(i(),A.error)}}}catch(a){o=!0,p=a}finally{try{!n&&q["return"]!=null&&(yield q["return"]())}finally{if(o)throw p}}}for(r of g){t=r[0];v=r[1];for(u of v.votes){s=f.get(u);s==null?f.set(u,{optionName:"Unknown",voterUserJids:[t]}):f.set(u,babelHelpers["extends"]({},s,{voterUserJids:[].concat(s.voterUserJids,[t])}))}}return"Question: "+e.name+"; Options: "+Array.from(f).map(function(a){a[0];a=a[1];var b=a.optionName;a=a.voterUserJids;return b+" ("+a.length+" votes"+(a.length>0?": "+a.map(function(a){return d("EncryptedBackupsDYIMessageProcessingUtils").getSenderName(d("WAJids").userIdFromJid(d("WAJids").unsafeCoerceToUserJid(a)))}).join(", "):"")+")"}).join("; ")});return F.apply(this,arguments)}function G(a,b,e,f,g){var h,i=d("EncryptedBackupsDYISingleton").getSingleton(),j=i.getLogger();if(e.mediaMetadata==null){void j.WARN(A());return g}var k=e.mediaMetadata,l=k.mediaEntryData;k=k.plaintextHash;h=(h=(h=e.metadata)==null?void 0:h.senderId)!=null?h:"0";e=d("WAStanzaUtils").toStanzaId(e.externalId);k=d("WAHashUtils").stringToPlaintextHash(k);g.media.add(k);if(!i.isAttachmentDownloadInProgressForPlaintextHash(k)&&!i.isAttachmentDownloadCompleteForPlaintextHash(k)){void j.LOG(z(),d("WAHashUtils").sanitisePlaintextHash(k));i.addPlaintextHashToAttachmentDownloadsInProgress(k);if(l==null){j.ERROR(y());i.deletePlaintextHashFromAttachmentDownloadsInProgress(k);return g}j={author:d("WAJids").toMsgrUserJid(h),chat:d("WAJids").toMsgrUserJid(b),externalId:e};if(c("gkx")("5850"))void d("EncryptedBackupsDYIMessageProcessingUtils").downloadMediaWithMediaManager(k,j,f,l);else{i=d("WAMediaUtils").decodeMediaEntryData(l);void d("EncryptedBackupsDYIMessageProcessingUtils").startMediaDownloadChain(d("MebWAMediaDownloader").MebWADownloadMediaThroughTheBridge,"-8","msgr",i,b,a,h,e,k,f,function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return babelHelpers.construct(d("MAWMIMediaDownloader").MAWMIMediaDownloader,b)})}}return g}g.processEBProtobufMessagesForDYI=a}),98);
__d("MAWEncryptedBackupsDYIHandleMessageRestore",["EncryptedBackupsDYIHandleMessageRestore","I64","LSDatabaseSingleton","LSFactory","LSIntEnum","LSIssueMessageRangeQueryTaskStoredProcedure","LSMEBTaskCreationSource","MAWEBRestoreTrackingUtils","MAWEncryptedBackupsDYIProcessProtobufMessages","asyncToGeneratorRuntime","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(h||d("LSIntEnum")).ofNumber(c("LSMEBTaskCreationSource").MSGR_DYI),l=c("justknobx")._("467"),m=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){d("MAWEBRestoreTrackingUtils").markEBRestoreDYI(c("LSMEBTaskCreationSource").MSGR_DYI),yield a.runInTransaction(function(a){return c("LSIssueMessageRangeQueryTaskStoredProcedure")(c("LSFactory")(a),{isPointQuery:!1,newerNumMessages:(i||(i=d("I64"))).zero,numMessages:i.of_int32(l),source:k,startSortKey:b,threadId:e})},"readwrite",void 0,void 0,f.id+":39")});return function(b,c,d){return a.apply(this,arguments)}}();function a(a,b,c,d){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){var f=(yield (j||(j=d("LSDatabaseSingleton"))).LSDatabaseSingleton);yield d("EncryptedBackupsDYIHandleMessageRestore").handleMessageRangeQueryRestore(f,a,b,c,e,d("MAWEncryptedBackupsDYIProcessProtobufMessages").processEBProtobufMessagesForDYI,m)});return n.apply(this,arguments)}g.taskCreationSource=k;g.MESSENGER_DYI_BATCH_SIZE=l;g.handleMAWProtobufMessageRangeQueryRestore=a}),98);
__d("MAWRestoreProtobufsFromEncryptedBackupsDeferred",["ExecutionEnvironment","I64","WAJobOrchestratorTypes","asyncToGeneratorRuntime","cr:10036","cr:21318","cr:21319","gkx","justknobx","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("MAWRestoreProtobufsFromEncryptedBackupsNOP").__setRef("MAWRestoreProtobufsFromEncryptedBackupsDeferred");function a(a,e,g,k,l,m,n,o,p,q,r,s,t,u,v){u===void 0&&(u=d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION);return j.load().then(function(){var j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(j){var w;(i||(i=c("ExecutionEnvironment"))).isInWorker&&b("cr:10036")!=null?(yield b("cr:10036").init(),w=(yield b("cr:10036").getLSStorage())):w=b("cr:21318")!=null?yield b("cr:21318").LSDatabaseSingleton:null;var x=function(b){return j.call(b,a,e,g,k,l!=null?(h||(h=d("I64"))).to_float(l):0,m,n!=null?(h||(h=d("I64"))).to_float(n):(h||(h=d("I64"))).to_float((h||(h=d("I64"))).max_int),o,p,q,r,s,t,u,v)};if(w!=null&&!c("gkx")("15400"))return w.runInTransaction(function(a){return x(a)},"readwrite",void 0,void 0,f.id+":100");return b("cr:21319")!=null&&c("justknobx")._("4404")?b("cr:21319").queueWork(function(){return x(null)}):x(null)});return function(a){return j.apply(this,arguments)}}())}g.call=a}),98);
__d("LSProtobufRestoreHandler",["CurrentUser","LSIntEnum","LSMEBTaskCreationSource","LSVec","MAWAsyncEBPendingQueryPromise","MAWEBRestoreTrackingUtils","MAWEBUnstoredDbMsgUtils","MAWEncryptedBackupUtils","MAWEncryptedBackupsDYIHandleMessageRestore","MAWJids","MAWJobDefinitions","MAWRestoreProtobufsFromEncryptedBackupsDeferred","Promise","WAErrorMessage","WATagsLogger","asyncToGeneratorRuntime","err","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["restoreProtobufs nativeop - Failed to restore protobufs, with error: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["restoreProtobufs nativeop - Failed to restore protobufs, with error: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Restoring Messenger DYI batch"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["restoreProtobufs nativeop - no messages but hasMoreBefore is true"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["restoreProtobufs nativeop - no messages but hasMoreBefore is true"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["restoreProtobufs nativeop - Failed to decode protobufs, with error: ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["restoreProtobufs nativeop - Failed to decode protobufs, with error: ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["restoreProtobufs nativeop - no decoded messages but hasMoreBefore is true, messages count after decryption: ",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["restoreProtobufs nativeop - no decoded messages but hasMoreBefore is true, messages count after decryption: ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["restoreProtobufs nativeop"]);s=function(){return a};return a}var t=d("WATagsLogger").TAGS(["labyrinth_web","protobuf_restore"]);function a(a,b,c,d,e,f,g,h,i,j,k,l,m){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,u,w,x,y,z,A,B,C,D){var E=t.TAGS([y!=null?y:"no_request_id"]);E.ERROR;E=babelHelpers.objectWithoutPropertiesLoose(E,["ERROR"]);var F=E;E=null;B!=null&&(E=v(B));F.LOG(s());d("MAWEBRestoreTrackingUtils").markEBRestoreProtobuf(C);e.type==="convertedProtobufs"?B=e.convertedProtobufs:(e.type,B=d("MAWEncryptedBackupUtils").convertLSTypesToJSTypesForRestoreJob(e.decryptedMessagesProtobufs));d("MAWEncryptedBackupUtils").logIfDuplicateMessagesFoundInRestore(B,"protobuf_restore");if(y!=null)try{d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"native_op_start",traceId:y});e=d("MAWJids").toUserJid(c("CurrentUser").getAccountID());e=d("MAWEBUnstoredDbMsgUtils").getUnstoredDbMsgFromProtobuf(B,a,void 0,e);if(f===!0&&e.length===0){d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"hasMoreBefore_decodedMessages_inconsistency",traceId:y});var G=B.length;F.WARN(r(),G);t.ERROR(q(),G)}d("MAWAsyncEBPendingQueryPromise").resolvePendingQueryIfPresent(y,{echoMessages:E,hasMoreAfter:u,hasMoreBefore:f,isPointQuery:x,messages:e,nextMessageTimestampMsBefore:g,protobufMessages:B,referenceTimestamp:z,requestId:y,restoreType:"protobuf",threadId:a})}catch(a){G=d("WAErrorMessage").maybeGetMessageFromError(a);F.WARN(p(),G);t.ERROR(o(),G);d("MAWAsyncEBPendingQueryPromise").rejectPendingQueryIfPresent(y,a instanceof Error?a:c("err")(G))}f===!0&&B.length===0&&(y!=null&&d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"hasMoreBefore_messages_inconsistency",traceId:y}),F.WARN(n()),t.ERROR(m()));e=C!=null&&(i||(i=d("LSIntEnum"))).unwrapIntEnum(C)===c("LSMEBTaskCreationSource").FTS_INDEX_EB_MESSAGES_WEB;if(e){y!=null&&d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"search_restore_end",traceId:y});d("MAWEBRestoreTrackingUtils").markEBRestoreSuccess(y);return(h||(h=b("Promise"))).resolve()}G=C!=null&&(i||(i=d("LSIntEnum"))).unwrapIntEnum(C)===c("LSMEBTaskCreationSource").MSGR_DYI;if(G){F.LOG(l());yield d("MAWEncryptedBackupsDYIHandleMessageRestore").handleMAWProtobufMessageRangeQueryRestore(a,B,f,g);y!=null&&d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"dyi_restore_end",traceId:y});d("MAWEBRestoreTrackingUtils").markEBRestoreSuccess(y);return(h||(h=b("Promise"))).resolve()}c("promiseDone")(d("MAWRestoreProtobufsFromEncryptedBackupsDeferred").call("AdvancedCrypto",d("MAWJobDefinitions").toThreadJidPrimaryId(a),B,f,g,u,w,x,y,z,A,E,C,void 0,D!=null?D:void 0),function(){y!=null&&d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"native_op_end",traceId:y})},function(a){a=d("WAErrorMessage").maybeGetMessageFromError(a);F.WARN(k(),a);t.ERROR(j(),a);a={string:{error:a}};y!=null&&d("MAWEBRestoreTrackingUtils").markEBRestoreFail(y,!1,"native_op_reject",a)});return(h||(h=b("Promise"))).resolve()});return u.apply(this,arguments)}function v(a){return c("LSVec").toArray(a).map(function(a){return d("MAWJobDefinitions").toEncodedEchoMessage(a)})}g.handleProtobufRestoreHelper=a;g.convertLSEchoMessageVecToArray=v}),98);
__d("LSEBUnifiedRestoreUtils",["CurrentUser","LSIntEnum","LSMEBTaskCreationSource","LSProtobufRestoreHandler","LSVec","MAWAsyncEBPendingQueryPromise","MAWBridgeSafeActionsWorkerAndUI","MAWEBRestoreTrackingUtils","MAWEBUnstoredDbMsgUtils","MAWEncryptedBackupUtils","MAWEncryptedBackupsDYIHandleMessageRestore","MAWJids","MAWJobDefinitions","MAWRestoreProtobufsFromEncryptedBackupsDeferred","MWEBODSEntityName.enum","MWEBODSUtils","Promise","WATagsLogger","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["eb restore nativeop - Failed to restore protobufs, with error: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Restoring Messenger DYI batch"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["eb restore nativeop - no messages but hasMoreBefore is true"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["eb restore native op - Failed to decode protobufs, with error: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["eb restore nativeop - no decoded messages but hasMoreBefore is true, messages count after decryption: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["starting eb restore - ",""]);o=function(){return a};return a}function a(a,b,c,d,e,f,g,h,i,j,k,l,m){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,p,q,r,s,t,u,v,w,x){d("WATagsLogger").TAGS(["labyrinth_web","eb_restore",s!=null?s:"no_request_id"]).LOG(o(),s!=null?s:"no_request_id");d("MWEBODSUtils").markODSForEB(c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"unified_restore");var y=[].concat(d("MAWEncryptedBackupUtils").convertLSTypesToJSTypesForRestoreJob(e));v=d("LSProtobufRestoreHandler").convertLSEchoMessageVecToArray(v);v=(yield d("MAWBridgeSafeActionsWorkerAndUI").sendAndReceiveBackendWorkerAndUIShared("convertEchoMessagesToEBProtobufs",{chatJid:x,encodedEchoMessages:v}));y.push.apply(y,v);d("MAWEncryptedBackupUtils").logIfDuplicateMessagesFoundInRestore(y,"protobuf_restore");if(s!=null)try{d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"native_op_start_unified",traceId:s});v=d("MAWJids").toUserJid(c("CurrentUser").getAccountID());v=d("MAWEBUnstoredDbMsgUtils").getUnstoredDbMsgFromProtobuf(y,a,void 0,v);if(f===!0&&v.length===0){d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"hasMoreBefore_decodedMessages_inconsistency",traceId:s});e=e!=null?c("LSVec").toArray(e).length:0;d("WATagsLogger").TAGS(["labyrinth_web","eb_restore",s!=null?s:"no_request_id"]).ERROR(n(),e)}d("MAWAsyncEBPendingQueryPromise").resolvePendingQueryIfPresent(s,{echoMessages:void 0,hasMoreAfter:p,hasMoreBefore:f,isPointQuery:r,messages:v,nextMessageTimestampMsBefore:g,protobufMessages:y,referenceTimestamp:t,requestId:s,restoreType:"protobuf",threadId:a})}catch(a){d("WATagsLogger").TAGS(["labyrinth_web","eb_restore",s!=null?s:"no_request_id"]).ERROR(m(),a.message)}f===!0&&y.length===0&&(s!=null&&d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"hasMoreBefore_messages_inconsistency",traceId:s}),d("WATagsLogger").TAGS(["labyrinth_web","eb_restore",s!=null?s:"no_request_id"]).ERROR(l()));e=w!=null&&(i||(i=d("LSIntEnum"))).unwrapIntEnum(w)===c("LSMEBTaskCreationSource").FTS_INDEX_EB_MESSAGES_WEB;if(e){s!=null&&d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"search_restore_end",traceId:s});d("MAWEBRestoreTrackingUtils").markEBRestoreSuccess(s);return(h||(h=b("Promise"))).resolve()}v=w!=null&&(i||(i=d("LSIntEnum"))).unwrapIntEnum(w)===c("LSMEBTaskCreationSource").MSGR_DYI;if(v){d("WATagsLogger").TAGS(["labyrinth_web","eb_restore",s!=null?s:"no_request_id"]).LOG(k());yield d("MAWEncryptedBackupsDYIHandleMessageRestore").handleMAWProtobufMessageRangeQueryRestore(a,y,f,g);s!=null&&d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"dyi_restore_end",traceId:s});d("MAWEBRestoreTrackingUtils").markEBRestoreSuccess(s);return(h||(h=b("Promise"))).resolve()}c("promiseDone")(d("MAWRestoreProtobufsFromEncryptedBackupsDeferred").call("AdvancedCrypto",d("MAWJobDefinitions").toThreadJidPrimaryId(a),y,f,g,p,q,r,s,t,u,void 0,w,void 0,x),function(){s!=null&&d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"native_op_end_unified",traceId:s})},function(a){d("WATagsLogger").TAGS(["labyrinth_web","eb_restore",s!=null?s:"no_request_id"]).ERROR(j(),a.message);a={string:{error:a.message}};s!=null&&d("MAWEBRestoreTrackingUtils").markEBRestoreFail(s,!1,"native_op_reject_unified",a)});return(h||(h=b("Promise"))).resolve()});return p.apply(this,arguments)}g.echoProtobufConsolidatedRestoreHelper=a}),98);
__d("MAWThreadIdToChatJidMapping",["I64","MAWAsyncEBPendingQueryPromise","MAWJidUtils","ReQL","WALogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Cannot generate ChatJid from threadKey, called from ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Cannot find thread with serverThreadKey ",", called from ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Cannot find MI ACT mapping table entry for threadId ",", called from ",""]);k=function(){return a};return a}var l=new Map();function a(a,b,c){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){if(l.has(b))return l.get(b);var e=d("MAWAsyncEBPendingQueryPromise").getJidFromThreadId(b);if(e!=null){l.set(b,e);return e}e=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.mi_act_mapping_table.index("jid")).getKeyRange((h||(h=d("I64"))).of_string(b))));if(e==null){d("WALogger").ERROR(k(),b,c);return null}var f=e.serverThreadKey;e=e.jid;a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(f)));if(a==null){d("WALogger").ERROR(j(),(h||(h=d("I64"))).to_string(f),c);return null}f=d("MAWJidUtils").LSJidtoChatJid(e,a.threadType);if(f!=null){l.set(b,f);return f}else{d("WALogger").ERROR(i(),c);return null}});return m.apply(this,arguments)}g.genChatJidFromThreadId=a}),98);
__d("LSRestoreEchoBlobs.nop",["LSVec","MAWAsyncEBPendingQueryPromise","MAWEBRestoreTrackingUtils","MAWThreadIdToChatJidMapping","MWEBODSEntityName.enum","MWEBODSUtils","Promise","WAJids","asyncToGeneratorRuntime","err","gkx","promiseDone","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("LSRestoreEchoBlobsHandler").__setRef("LSRestoreEchoBlobs.nop");a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,j,k,l,m,n,o,p,q,r,s){var t;d("MWEBODSUtils").markODSForEB(c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore_echo_blobs");s!=null?t=d("WAJids").validateChatJid(s):d("MWEBODSUtils").markODSForEB(c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore_echo_blobs.no_chat_jid_provided");t==null&&(t=(yield d("MAWThreadIdToChatJidMapping").genChatJidFromThreadId(a,o,"LSRestoreEchoBlobs.nop")));if(t==null){d("MWEBODSUtils").markODSForEB(c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore_echo_blobs.no_chat_jid");p!=null&&d("MAWAsyncEBPendingQueryPromise").rejectPendingQueryIfPresent(p,c("err")("Cannot generate ChatJid from threadKey: "+o));d("MAWEBRestoreTrackingUtils").markEBRestoreFail(p,!1,"no_chat_jid");return(h||(h=b("Promise"))).resolve([!0,c("LSVec").ofArray([]),c("LSVec").ofArray([])])}return i.load().then(function(a){if(t!=null)if(c("gkx")("14213")){c("promiseDone")(a.handleEchoBlobsRestore(g,j,k,l,m,n,o,p,q,r,t));return(h||(h=b("Promise"))).resolve([!0,c("LSVec").ofArray([]),c("LSVec").ofArray([])])}else return a.handleEchoBlobsRestore(g,j,k,l,m,n,o,p,q,r,t);return(h||(h=b("Promise"))).resolve([!0,c("LSVec").ofArray([]),c("LSVec").ofArray([])])})});function e(b,c,d,e,f,g,h,i,j,k,l,m,n,o){return a.apply(this,arguments)}return e}();a.__nop_name__="LSRestoreEchoBlobs";g["default"]=a}),98);
__d("LSRestoreEchoBlobsHandler",["LSProtobufRestoreHandler","LSVec","MAWBridgeSafeActionsWorkerAndUI","MAWEBRestoreTrackingUtils","MAWEncryptedBackupUtils","MAWJobDefinitions","Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c,d,e,f,g,h,j,k,l){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,i,j,k,l,m,n,o){var p=c("LSVec").toArray(a).map(d("MAWJobDefinitions").toEncodedEchoMessage);l!=null&&d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"echo_to_protobuf_conversion_start",traceId:l});p=(yield d("MAWBridgeSafeActionsWorkerAndUI").sendAndReceiveBackendWorkerAndUIShared("convertEchoMessagesToEBProtobufs",{chatJid:o,encodedEchoMessages:p}));l!=null&&d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"echo_to_protobuf_conversion_success",traceId:l});p=d("MAWEncryptedBackupUtils").convertJSTypesToLSTypesForRestoreJob(p);yield d("LSProtobufRestoreHandler").handleProtobufRestoreHelper(k,{decryptedMessagesProtobufs:p,type:"decryptedMessagesProtobufs"},e,f,g,i,j,l,m,"",a,n,o);return(h||(h=b("Promise"))).resolve([!0,c("LSVec").ofArray([]),c("LSVec").ofArray([])])});return i.apply(this,arguments)}g.handleEchoBlobsRestore=a}),98);
__d("LSRestoreProtobufs.nop",["LSProtobufRestoreHandler","MAWMpsGating","MAWThreadIdToChatJidMapping","MWEBODSEntityName.enum","MWEBODSUtils","WAJids","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,h,i,j,k,l,m,n,o,p,q){d("MWEBODSUtils").markODSForEB(c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore_protobufs");if(d("MAWMpsGating").isFullMpsEnabled())return;b=null;q!=null?b=d("WAJids").validateChatJid(q):d("MWEBODSUtils").markODSForEB(c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore_protobufs.no_chat_jid_provided");b==null&&(b=(yield d("MAWThreadIdToChatJidMapping").genChatJidFromThreadId(a,e,"LSRestoreProtobufs.nop")));b==null&&d("MWEBODSUtils").markODSForEB(c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore_protobufs.no_chat_jid");return d("LSProtobufRestoreHandler").handleProtobufRestoreHelper(e,{decryptedMessagesProtobufs:f,type:"decryptedMessagesProtobufs"},g,h,i,j,k,l,m,n,o,p,b)});function e(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){return a.apply(this,arguments)}return e}();a.__nop_name__="LSRestoreProtobufs";g["default"]=a}),98);
__d("MAWBridgeUpdateDYIStatusV2",["EncryptedBackupdDYIFileSaver","EncryptedBackupsDYIFileUtils","EncryptedBackupsDYITypes","FBLogger","QPLUserFlow","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){d("EncryptedBackupdDYIFileSaver").saveFile(a,b),window.setTimeout(function(){c("promiseDone")(e())},1e3)});return i.apply(this,arguments)}function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.qplEvent,f=a.qplInstanceKeyE2E;a=a.status;var g=c("FBLogger")("[labyrinth_web][dyi]");if(a===d("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.Completed)try{if(navigator.storage==null)throw g.mustfixThrow("Storage management API is not supported. Please try one of the supported browsers.");var i=d("EncryptedBackupsDYIFileUtils").DyiArchiveFilename,j=(yield d("EncryptedBackupsDYIFileUtils").getRootFolderHandle()),k=(yield d("EncryptedBackupsDYIFileUtils").readFile(j,i));yield h(i,k,b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield j.removeEntry(i)}));g.info("Saving file with filename ",i);e!=null&&f!=null&&c("QPLUserFlow").endSuccess(e,{instanceKey:f});g.info("DYI Complete")}catch(a){g.mustfix("Failed to download the DYI archive: %s",a);e!=null&&f!=null&&c("QPLUserFlow").endFailure(e,a.message,{instanceKey:f});return d("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.Failed}a===d("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.Failed&&(e!=null&&f!=null&&c("QPLUserFlow").endFailure(e,"Unknown error",{instanceKey:f}));return a});return j.apply(this,arguments)}g.call=a}),98);
__d("MAWRestoreProtobufsFromEncryptedBackupsNOP",["ExecutionEnvironment","I64","LSDataTraceCheckPoint","LSIntEnum","LSMEBTaskCreationSource","MAWBridgeTraceRecordCheckpointHandler","MAWJobDefinitions","MAWJobManager","MAWMediaGalleryM2Utils","Promise","WAJobOrchestratorTypes","asyncToGeneratorRuntime","err","ifRequireable","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function a(a,b,c,d,e,f,g,h,i,j,k,m,n,o,p,q){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,h,i,l,n,o,p,q,r,s,t,u,v){u===void 0&&(u=d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION);try{return m(e,f,s,g,h,l,o,p,q,t==null?void 0:t,void 0,u,v)}catch(e){if(p!=null){i={checkPointId:(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").FLOW_END_FOR_FAILURE),dataTraceId:p,errorMessage:e,shouldFlush:!0,syncChannel:-1,tags:void 0};if(a!=null)return d("MAWBridgeTraceRecordCheckpointHandler").call(a,i).then(function(){return(j||(j=b("Promise"))).reject(e)});void d("MAWBridgeTraceRecordCheckpointHandler").callWithoutTxn(i);return(j||(j=b("Promise"))).reject(e)}}return(j||(j=b("Promise"))).resolve()});return l.apply(this,arguments)}function m(a,e,f,g,l,m,n,o,p,q,r,s,t){s===void 0&&(s=d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION);var u;if((h||(h=c("ExecutionEnvironment"))).isInWorker)u=d("MAWJobManager").getJobManager();else{var v;c("ifRequireable")("MAWTimedJob",function(a){a=a.TimedUIJobStarters;v=a},function(){throw c("err")("MAWTimedJob is not requireable in MAWRestoreProtobufsFromEncryptedBackupsNOP")});u=c("nullthrows")(v,"ifRequireable is not sync")}if(o!=null&&q!=null&&(k||(k=d("LSIntEnum"))).unwrapIntEnum(q)===c("LSMEBTaskCreationSource").MESSENGER_MESSAGE_LIST_PAGINATION&&!(h||(h=c("ExecutionEnvironment"))).isInWorker)return u.waitUntilCompleted(d("MAWJobDefinitions").jobSerializers.restoreProtobufsFromEncryptedBackups(f,a,e,g,l,m,n,void 0,o!=null?o:void 0,p!=null?p:void 0,void 0,{priority:s},q,r,void 0,t!=null?t:void 0));return(k||(k=d("LSIntEnum"))).unwrapIntEnum(q||(i||(i=d("I64"))).zero)===c("LSMEBTaskCreationSource").MEDIA_GALLERY_RESTORE&&d("MAWMediaGalleryM2Utils").shouldSkipSyncToLSDB()&&!(h||(h=c("ExecutionEnvironment"))).isInWorker?u.waitUntilCompleted(d("MAWJobDefinitions").jobSerializers.restoreProtobufsFromEncryptedBackups(f,a,e,g,l,m,n,void 0,o!=null?o:void 0,p!=null?p:void 0,void 0,{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION},q,r,void 0,t!=null?t:void 0)):(j||(j=b("Promise"))).resolve(u.fireAndForget(d("MAWJobDefinitions").jobSerializers.restoreProtobufsFromEncryptedBackups(f,a,e,g,l,m,n,void 0,o!=null?o:void 0,p!=null?p:void 0,void 0,{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION},q,r,void 0,t!=null?t:void 0)))}g.call=a}),98);
__d("MAWSetupBridgeOfflineConsumer",["InteractionTracingMetrics","MAWBridgeInitOfflineQueueSyncCompleteHandler","MAWMIC","MAWOfflineQueueStatus","MAWSharedProtocolQueueConst","MWChatInteraction","MWFBLogger","WAMediaWasmWorkerClient","asyncToGeneratorRuntime","cr:17068","gkx","interaction-tracing","justknobx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Stats failed: expected: ",", processed: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Stats end: expected: ",", processed: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Stats: expected: ",", processed: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Stats start: ",""]);k=function(){return a};return a}var l=d("MWFBLogger").MWLogger.tags(["ServerRPC","OfflineConsumer"]),m="has_pending_or_inprogress_oq_threads";function n(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield a;d("WAMediaWasmWorkerClient").prewarmMediaWasmWorker("mp4RepairMux");c("gkx")("12220")&&d("WAMediaWasmWorkerClient").prewarmMediaWasmWorker("progressiveJpegEncode");return d("MAWBridgeInitOfflineQueueSyncCompleteHandler").call()});return o.apply(this,arguments)}function p(a){d("MAWMIC").addIntAnnotation("offlineQueueSize",a);var b=d("MWChatInteraction").get(d("MWChatInteraction").MW_AUTO_CHAT_TAB_OPEN);b!=null&&c("InteractionTracingMetrics").addAnnotationInt(b,"offlineQueueSize",a)}function q(a,b){var e=d("MWChatInteraction").get(d("MWChatInteraction").MW_AUTO_CHAT_TAB_OPEN);e!=null&&c("InteractionTracingMetrics").addSubspan(e,"offline_queue","LONGTASK",a,b,{})}function r(){c("justknobx")._("3496")&&c("interaction-tracing").InteractionTracingCore.getPendingInteractions().forEach(function(a){a.addMarkerPoint("offline_queue_start","AppTiming"),a.addAnnotationBoolean(m,!0)})}function s(){c("justknobx")._("3496")&&c("interaction-tracing").InteractionTracingCore.getPendingInteractions().forEach(function(a){a.addMarkerPoint("offline_queue_end","AppTiming"),a.addAnnotationBoolean(m,!1)})}function a(a,e){return function(f){var g=f.chatJidStatus,m=f.status,o=f.timestamp,t=f.totalExpectedCount,u=f.totalProcessedCount;switch(m){case d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Initializing:r();l.DEBUG(k(),t);p(t);b("cr:17068")&&b("cr:17068").setEstimatedOQSize(t);e({tag:"InitOfflineQueueSyncStart",value:t});d("MAWOfflineQueueStatus").markThreadWithOfflineQueueStatus(g,d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Initializing);d("MAWMIC").addPoint("process_offline_queue_start",o);d("MAWOfflineQueueStatus").resetOfflineQueueState();return;case d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Processing:l.DEBUG(j(),t,u);e({tag:"InitOfflineQueueConsumerSyncProgress",value:{chatJidStatus:g,processed:u}});d("MAWOfflineQueueStatus").markThreadWithOfflineQueueStatus(g,d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Processing);return;case d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete:l.DEBUG(i(),t,u);f.startTime!=null&&q(f.startTime,o);s();e({tag:"InitOfflineQueueSyncComplete",value:g});c("promiseDone")(n(a));d("MAWOfflineQueueStatus").markThreadWithOfflineQueueStatus(g,d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete);d("MAWMIC").addPoint("process_offline_queue_end",o);d("MAWOfflineQueueStatus").markOfflineQueueComplete();return;case d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Failed:l.DEBUG(h(),t,u);d("MAWMIC").addPoint("process_offline_queue_failed",o);e({tag:"InitOfflineQueueSyncComplete",value:void 0});c("promiseDone")(n(a));d("MAWOfflineQueueStatus").markThreadWithOfflineQueueStatus(g,d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Failed);d("MAWOfflineQueueStatus").markOfflineQueueComplete();return}}}g["default"]=a}),98);
__d("MWSimpleWorkQueue",["FBLogger","Promise","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i={first:null,last:null};function a(a){return new(h||(h=b("Promise")))(function(d,e){var f=function(){var f=new(h||(h=b("Promise")))(function(a,b){window.setTimeout(function(){b(c("err")("Work item timed out after 30 seconds"))},3e4)});return h.race([a(),f]).then(d,e)};if(i.first===null||i.last==null)i.first=i.last={next:null,value:f},j();else{var g=i.last;g.next={next:null,value:f};i.last=g.next}})}function j(){if(i.first===null)return;var a=i.first;if(a==null)return;var b=function(){i.first=a.next;if(i.first==null){i.last=null;return}j()};a.value().then(function(){b()})["catch"](function(a){c("FBLogger")("messenger_web").catching(a).mustfix("Error in MWSimpleWorkQueue"),b()})}g.queueWork=a}),98);
__d("X25519",["$InternalEnum","Promise","WACryptoCurve25519Dependencies","WASignalKeys","WASignalOther","WASignalSignatures"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("$InternalEnum").Mirrored(["Encryption","Signing"]),j=b("$InternalEnum")({PublicKey:0,PrivateKey:1,Signature:2});function k(a,b){if(b===i.Encryption)return[];b=1;switch(a){case j.PublicKey:b=1;break;case j.PrivateKey:b=2;break;case j.Signature:b=3;break}return[255,b]}function l(a,b,c){b=k(b,c);c=b.length;if(c<=0)return a;var d=new Uint8Array(c+a.byteLength);d.set(Array.from(b));d.set(a,c);return d}function m(a,b,c){b=k(b,c).length;return a.slice(b)}function n(a,b){return{privateKey:l(a.privateKey,j.PrivateKey,b),publicKey:l(a.publicKey,j.PublicKey,b)}}function a(a){a=n(d("WASignalKeys").makeKeyPair(),a);return{pk:a.publicKey,sk:a.privateKey}}function o(a,b){if(b===i.Encryption)return 32;switch(a){case j.PublicKey:case j.PrivateKey:return 32;case j.Signature:return 64}}function p(a,b,c){var d=k(b,c),e=d.length;b=o(b,c);c=b!=null?e+b:0;if(a.length!==c)return!1;var f=a.subarray(0,e);b=new Uint8Array(d);return b.length===f.length&&b.every(function(a,b){return a===f[b]})}function q(a,b){if(p(a,j.PublicKey,b))return a;return}function r(a,b){if(p(a,j.PrivateKey,b))return a;return}function c(a,b){var c=q(a.pkBytes,b);a=r(a.skBytes,b);if(c!=null&&a!=null)return{pk:c,sk:a}}function e(a,c){a=m(a,j.PrivateKey,i.Signing);return d("WASignalSignatures").signMsg(d("WASignalKeys").makeKeyPairFrom(d("WASignalOther").ensureSize(a,32)),c).then(function(a){a=l(a,j.Signature,i.Signing);return(h||(h=b("Promise"))).resolve(a)})}function f(a){if(p(a,j.Signature,i.Signing))return a}function s(a,b,c){b=m(b,j.PublicKey,i.Signing);return d("WASignalSignatures").verifyMsgSignalVariant(d("WASignalKeys").serializeIdentity(b),c,d("WASignalOther").ensureSize(m(a,j.Signature,i.Signing),64))}function t(a,c){c=c;a=a;return!p(a,j.PublicKey,i.Encryption)||!p(c,j.PrivateKey,i.Encryption)?(h||(h=b("Promise"))).resolve():d("WACryptoCurve25519Dependencies").calculateAgreement(a,c).then(function(a){return(h||(h=b("Promise"))).resolve(new Uint8Array(a))})}g.KeyPurpose=i;g.generateKeys=a;g.publicKeyFromBytes=q;g.secretKeyFromBytes=r;g.keysFromBytes=c;g.sign=e;g.signatureFromBytes=f;g.verify=s;g.exchangeKeys=t}),98);
__d("PublicKeyCrypto",["Promise","UInt8Array","X25519"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,c){return(h||(h=b("Promise"))).all([a,c]).then(function(a){return(h||(h=b("Promise"))).resolve(a[0]!=null&&a[1]!=null?d("UInt8Array").concatBytes([a[0],a[1]]):void 0)})}function a(a,b,c){return i(d("X25519").exchangeKeys(c,a),d("X25519").exchangeKeys(c,b))}function c(a,b,c){return i(d("X25519").exchangeKeys(c,a),d("X25519").exchangeKeys(b,a))}g.senderDeriveSharedSecret=a;g.receiverDeriveSharedSecret=c}),98);
__d("ReverbWriteFailureFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5829");b=d("FalcoLoggerInternal").create("reverb_write_failure",a);e=b;g["default"]=e}),98);
__d("ReverbWriteSuccessFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5831");b=d("FalcoLoggerInternal").create("reverb_write_success",a);e=b;g["default"]=e}),98);
__d("WASmaxInAbPropsIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","error");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQErrorResponseMixin=a}),98);
__d("WASmaxInAbPropsIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","bad-request");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",400);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorBadRequestMixin=a}),98);
__d("WASmaxInAbPropsIQErrorFeatureNotImplementedMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","feature-not-implemented");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",501);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorFeatureNotImplementedMixin=a}),98);
__d("WASmaxInAbPropsNoRetryErrors",["WAResultOrError","WASmaxInAbPropsIQErrorBadRequestMixin","WASmaxInAbPropsIQErrorFeatureNotImplementedMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInAbPropsIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:b.value});var c=d("WASmaxInAbPropsIQErrorFeatureNotImplementedMixin").parseIQErrorFeatureNotImplementedMixin(a);return c.success?d("WAResultOrError").makeResult({name:"IQErrorFeatureNotImplemented",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorBadRequest","IQErrorFeatureNotImplemented"],[b,c])}g.parseNoRetryErrors=a}),98);
__d("WASmaxInAbPropsGetExperimentConfigResponseErrorNoRetry",["WAResultOrError","WASmaxInAbPropsIQErrorResponseMixin","WASmaxInAbPropsNoRetryErrors","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInAbPropsIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInAbPropsNoRetryErrors").parseNoRetryErrors(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorNoRetryErrors:b.value}))}g.parseGetExperimentConfigResponseErrorNoRetry=a}),98);
__d("WASmaxInAbPropsIQErrorInternalServerErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","internal-server-error");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",500);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorInternalServerErrorMixin=a}),98);
__d("WASmaxInAbPropsGetExperimentConfigResponseErrorRetry",["WAResultOrError","WASmaxInAbPropsIQErrorInternalServerErrorMixin","WASmaxInAbPropsIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;c=d("WASmaxInAbPropsIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(c.value);if(!c.success)return c;a=d("WASmaxInAbPropsIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({errorIQErrorInternalServerErrorMixin:c.value},a.value))}g.parseGetExperimentConfigResponseErrorRetry=a}),98);
__d("WASmaxInAbPropsExperimentConfigMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"prop");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"config_code",1,void 0);if(!b.success)return b;var c=d("WASmaxParseUtils").attrString(a,"config_value");if(!c.success)return c;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"config_expo_key",0,void 0);return!a.success?a:d("WAResultOrError").makeResult({configCode:b.value,configValue:c.value,configExpoKey:a.value})}g.parseExperimentConfigMixin=a}),98);
__d("WASmaxInAbPropsSamplingConfigMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"prop");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"event_code",1,void 0);if(!b.success)return b;a=d("WASmaxParseUtils").attrIntRange(a,"sampling_weight",-1e4,1e4);return!a.success?a:d("WAResultOrError").makeResult({eventCode:b.value,samplingWeight:a.value})}g.parseSamplingConfigMixin=a}),98);
__d("WASmaxInAbPropsConfigs",["WAResultOrError","WASmaxInAbPropsExperimentConfigMixin","WASmaxInAbPropsSamplingConfigMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInAbPropsExperimentConfigMixin").parseExperimentConfigMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"ExperimentConfig",value:b.value});var c=d("WASmaxInAbPropsSamplingConfigMixin").parseSamplingConfigMixin(a);return c.success?d("WAResultOrError").makeResult({name:"SamplingConfig",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["ExperimentConfig","SamplingConfig"],[b,c])}g.parseConfigs=a}),98);
__d("WASmaxInAbPropsIQResultResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQResultResponseMixin=a}),98);
__d("WASmaxInAbPropsGetExperimentConfigResponseSuccess",["WAResultOrError","WASmaxInAbPropsConfigs","WASmaxInAbPropsIQResultResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"prop");if(!b.success)return b;b=d("WASmaxInAbPropsConfigs").parseConfigs(a);return!b.success?b:d("WAResultOrError").makeResult({configs:b.value})}function i(a){var b=d("WASmaxParseUtils").assertTag(a,"erid");if(!b.success)return b;b=d("WASmaxParseUtils").contentBytesRange(a,1,100);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"props");if(!c.success)return c;var e=d("WASmaxParseUtils").optionalChildWithTag(a,"erid",i);if(!e.success)return e;var f=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,c.value,"protocol","1");if(!f.success)return f;var g=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,c.value,"ab_key");if(!g.success)return g;var j=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,c.value,"hash");if(!j.success)return j;var k=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,c.value,"refresh",0,void 0);if(!k.success)return k;var l=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,c.value,"refresh_id",0,void 0);if(!l.success)return l;a=d("WASmaxInAbPropsIQResultResponseMixin").parseIQResultResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxParseUtils").mapChildrenWithTag(c.value,"prop",0,Infinity,h);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({propsProtocol:f.value,propsAbKey:g.value,propsHash:j.value,propsRefresh:k.value,propsRefreshId:l.value},a.value,{erid:e.value,propsProp:b.value}))}g.parseGetExperimentConfigResponseSuccessPropsProp=h;g.parseGetExperimentConfigResponseSuccessErid=i;g.parseGetExperimentConfigResponseSuccess=a}),98);
__d("WASmaxOutAbPropsBaseIQGetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"get"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseIQGetRequestMixin=a}),98);
__d("WASmaxOutAbPropsGetExperimentConfigRequest",["WASmaxAttrs","WASmaxJsx","WASmaxOutAbPropsBaseIQGetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function a(a){a=a.propsHash;a=d("WASmaxOutAbPropsBaseIQGetRequestMixin").mergeBaseIQGetRequestMixin(d("WASmaxJsx").smax("iq",{xmlns:"abt",to:d("WAWap").S_WHATSAPP_NET},d("WASmaxJsx").smax("props",{protocol:"1",hash:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,a)})));return a}g.makeGetExperimentConfigRequest=a}),98);
__d("WASmaxAbPropsGetExperimentConfigRPC",["WAComms","WASmaxInAbPropsGetExperimentConfigResponseErrorNoRetry","WASmaxInAbPropsGetExperimentConfigResponseErrorRetry","WASmaxInAbPropsGetExperimentConfigResponseSuccess","WASmaxOutAbPropsGetExperimentConfigRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=d("WASmaxOutAbPropsGetExperimentConfigRequest").makeGetExperimentConfigRequest(a);b=(yield d("WAComms").sendSmaxStanza(a,b));var c=d("WASmaxInAbPropsGetExperimentConfigResponseSuccess").parseGetExperimentConfigResponseSuccess(b,a);if(c.success)return{name:"GetExperimentConfigResponseSuccess",value:c.value};var e=d("WASmaxInAbPropsGetExperimentConfigResponseErrorNoRetry").parseGetExperimentConfigResponseErrorNoRetry(b,a);if(e.success)return{name:"GetExperimentConfigResponseErrorNoRetry",value:e.value};b=d("WASmaxInAbPropsGetExperimentConfigResponseErrorRetry").parseGetExperimentConfigResponseErrorRetry(b,a);if(b.success)return{name:"GetExperimentConfigResponseErrorRetry",value:b.value};throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("GetExperimentConfig",{Success:c,ErrorNoRetry:e,ErrorRetry:b}))});return h.apply(this,arguments)}g.sendGetExperimentConfigRPC=a}),98);
__d("WAGetAbPropsProtocol",["WALogger","WAResultOrError","WASmaxAbPropsGetExperimentConfigRPC","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["getAbPropsProtocol failed ",""]);h=function(){return a};return a}function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WASmaxAbPropsGetExperimentConfigRPC").sendGetExperimentConfigRPC({propsHash:a}));if(a.name==="GetExperimentConfigResponseSuccess"){var b=a.value,c=b.propsAbKey,e=b.propsHash,f=b.propsRefresh,g=b.propsRefreshId,i=b.propsProp;b=b.erid;i=j(i);var k=i.newProps;i=i.samplingConfigs;return d("WAResultOrError").makeResult({abKey:c,hash:e,refresh:f,refreshId:g,props:k,samplingConfigs:i,erid:b==null?void 0:b.elementValue})}d("WALogger").WARN(h(),a.value);return d("WAResultOrError").makeError()});return i.apply(this,arguments)}function j(a){var b=[],c=[];a.forEach(function(a){a=a.configs;if(a.name==="ExperimentConfig"){var d;b.push({configCode:a.value.configCode,configValue:a.value.configValue,configExpoKey:(d=a.value.configExpoKey)==null?void 0:d.toString()})}else a.name==="SamplingConfig"&&c.push({eventCode:a.value.eventCode,samplingWeight:a.value.samplingWeight})});return{newProps:b,samplingConfigs:c}}g.getAbPropsProtocol=a}),98);
__d("WAAbPropsSync",["WAAbProps","WAAbPropsHelpers","WAGetAbPropsProtocol","WALogger","WAPromiseManagement","WAResultOrError","WATimeUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["WAAbProps.update: updating ab configs"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["WAAbProps.update: detected no hash"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncAbProps: detected no hash"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["fetchAbProps failed"]);k=function(){return a};return a}c=d("WAPromiseManagement").cacheWhilePending(function(){return"abProps"},a);function a(a){var b=a.sendHash;b=b===void 0?!0:b;var c=a.eventFlow;c==null?void 0:c.addPoint("sync_ab_props",{bool:{sendHash:b}});return b==null||b===!1?l(null,c):d("WAAbProps").getHash().then(function(a){return l(a,c)})}e=a;function l(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b==null?void 0:b.addPoint("fetch_ab_props");a=(yield d("WAGetAbPropsProtocol").getAbPropsProtocol(a));if(!a.success)d("WALogger").ERROR(k());else{a=a.value;var c=a.abKey,e=a.hash,f=a.refresh;a=a.props;a=d("WAAbPropsHelpers").parseAbProps(d("WAAbProps").getConfig(),a);b==null?void 0:b.addPoint("save_ab_props");b=(yield n(c,e,f,a));b.success===!1&&(b.error,d("WALogger").LOG(j()))}c=(yield d("WAAbProps").getRefreshSecs());return{seconds:c}});return m.apply(this,arguments)}function n(a,b,c,d){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){var f=(yield d("WAAbProps").getAbProps());a={abKey:a!=null?a:f.abKey,hash:b!=null?b:f.hash,refresh:d("WAAbPropsHelpers").maybeUpdateRefresh(c),lastSyncTime:d("WATimeUtils").unixTime(),propValues:f.propValues,propExpoKeys:f.propExpoKeys,internalExpoKeys:f.internalExpoKeys,expoKeyStr:f.expoKeyStr};if(b==null){yield d("WAAbProps").setAbProps(a);d("WALogger").LOG(i());return d("WAResultOrError").makeError("noHash")}d("WALogger").LOG(h());c=e.values;b=e.expoKeys;e=d("WAAbPropsHelpers").maybeUpdatePropValues(c,f.propValues,d("WAAbProps").getConfig());c=d("WAAbPropsHelpers").maybeUpdateExpoKeys(b,f.propExpoKeys,d("WAAbProps").getConfig());b=c.propExpoKeys;c=c.expoKeysToDelete;var g,j;c=d("WAAbPropsHelpers").maybeUpdateInternalExpoKeys(c,f.internalExpoKeys);c!=null&&(g=c.internalExpoKeys,j=c.expoKeyStr);yield d("WAAbProps").setAbProps(babelHelpers["extends"]({},a,{propValues:e,propExpoKeys:b,internalExpoKeys:g,expoKeyStr:j}));return d("WAResultOrError").makeResult()});return o.apply(this,arguments)}g.syncAbProps=c;g.syncAbPropsDebug=e}),98);
__d("WABulkSetRotateSenderKeyToTrueApi",["MAWTransactionMode","WADbPersonalSenderKeyStatusTxns","WADbTransactor"],(function(a,b,c,d,e,f,g){"use strict";a=d("WADbTransactor").makeSignalTransactor({personalSenderKeyStatuses:d("MAWTransactionMode").READWRITE},"bulkSetRotateSenderKeyToTrue",function(a){return function(b,c){return d("WADbPersonalSenderKeyStatusTxns").bulkSetRotateSenderKeyToTrueTxn(a,c).then(function(){})}});g.bulkSetRotateSenderKeyToTrue=a}),98);
__d("WACheckCiphertextInServer",["WAHttpResumeCheck","WAMediaUrl","WAResultOrError","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,c,e,f){return f.run(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,f){b=d("WAMediaUrl").buildUploadUrl(a,e,c,b.domain,f,!0);f=(yield d("WAHttpResumeCheck").httpResumeCheck(b));if(f.success)return d("WAResultOrError").makeResult(f);else{b=f.error;switch(b){case"server-timeout":case"unspecified-http-error":return d("WAResultOrError").makeError({progressMade:!0});default:return d("WAResultOrError").makeResult(d("WAResultOrError").makeError(b))}}});return function(a,b){return f.apply(this,arguments)}}()).then(function(a){return a!=null?a:d("WAResultOrError").makeError("max-attempts-exceeded")})}g.checkCiphertextInServer=a}),98);
__d("WAIsMediaKeyReusable",["WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=2*d("WATimeUtils").DAY_SECONDS;function a(a){var b=Math.floor(Math.random()*d("WATimeUtils").DAY_SECONDS);return a!=null&&d("WATimeUtils").happenedWithin(a,h+b)}g.MMS_MEDIA_KEY_TTL=h;g.isMediaKeyReusable=a}),98);
__d("WAFindReusableMediaEntry",["WAIsMediaKeyReusable","WAMediaUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){if(a==null)return null;b=b.get(a);if(b==null)return null;a=d("WAMediaUtils").decodeMediaEntryData(b);b=a.fileEncSha256;var c=a.mediaKey,e=a.mediaKeyTimestamp,f=a.uploadToken;a=babelHelpers.objectWithoutPropertiesLoose(a,["fileEncSha256","mediaKey","mediaKeyTimestamp","uploadToken"]);return c!=null&&f!=null&&b!=null&&e!=null&&d("WAIsMediaKeyReusable").isMediaKeyReusable(e)?babelHelpers["extends"]({},a,{fileEncSha256:b,mediaKey:c,mediaKeyTimestamp:e,uploadToken:f}):null}g.findReusableMediaEntryForArmadillo=a}),98);
__d("WASmaxInDevicesFetchSelfResponseError",["WAResultOrError","WASmaxInDevicesIQErrorResponseMixin","WASmaxInDevicesRetryableIQErrorOrNonRetryableIQErrorRetryableIQErrorMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInDevicesIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInDevicesRetryableIQErrorOrNonRetryableIQErrorRetryableIQErrorMixinGroup").parseRetryableIQErrorOrNonRetryableIQErrorRetryableIQErrorMixinGroup(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorRetryableIQErrorOrNonRetryableIQErrorRetryableIQErrorMixinGroup:b.value}))}g.parseFetchSelfResponseError=a}),98);
__d("WASmaxInDevicesDeviceInfoMixin",["WAResultOrError","WASmaxInDevicesIdentityKeyMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"platform");if(!b.success)return b;b=d("WASmaxParseUtils").contentString(a);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}function i(a){var b=d("WASmaxParseUtils").assertTag(a,"manufacturer");if(!b.success)return b;b=d("WASmaxParseUtils").contentString(a);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}function j(a){var b=d("WASmaxParseUtils").assertTag(a,"model");if(!b.success)return b;b=d("WASmaxParseUtils").contentString(a);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}function k(a){var b=d("WASmaxParseUtils").assertTag(a,"seen");if(!b.success)return b;b=d("WASmaxParseUtils").contentInt(a);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}function l(a){var b=d("WASmaxParseUtils").assertTag(a,"creation");if(!b.success)return b;b=d("WASmaxParseUtils").contentInt(a);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}function m(a){var b=d("WASmaxParseUtils").assertTag(a,"ip");if(!b.success)return b;b=d("WASmaxParseUtils").contentString(a);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}function n(a){var b=d("WASmaxParseUtils").assertTag(a,"location");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"latitude");if(!b.success)return b;var c=d("WASmaxParseUtils").attrString(a,"longitude");if(!c.success)return c;a=d("WASmaxParseUtils").contentString(a);return!a.success?a:d("WAResultOrError").makeResult({latitude:b.value,longitude:c.value,elementValue:a.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"device");if(!b.success)return b;b=d("WASmaxParseUtils").optionalChildWithTag(a,"platform",h);if(!b.success)return b;var c=d("WASmaxParseUtils").optionalChildWithTag(a,"manufacturer",i);if(!c.success)return c;var e=d("WASmaxParseUtils").optionalChildWithTag(a,"model",j);if(!e.success)return e;var f=d("WASmaxParseUtils").optionalChildWithTag(a,"seen",k);if(!f.success)return f;var g=d("WASmaxParseUtils").optionalChildWithTag(a,"creation",l);if(!g.success)return g;var o=d("WASmaxParseUtils").optionalChildWithTag(a,"ip",m);if(!o.success)return o;var p=d("WASmaxParseUtils").optionalChildWithTag(a,"location",n);if(!p.success)return p;var q=d("WASmaxParseUtils").attrIntRange(a,"id",1,999);if(!q.success)return q;a=d("WASmaxInDevicesIdentityKeyMixin").parseIdentityKeyMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({id:q.value},a.value,{platform:b.value,manufacturer:c.value,model:e.value,seen:f.value,creation:g.value,ip:o.value,location:p.value}))}g.parseDeviceInfoPlatform=h;g.parseDeviceInfoManufacturer=i;g.parseDeviceInfoModel=j;g.parseDeviceInfoSeen=k;g.parseDeviceInfoCreation=l;g.parseDeviceInfoIp=m;g.parseDeviceInfoLocation=n;g.parseDeviceInfoMixin=a}),98);
__d("WASmaxInDevicesFetchSelfResponseSuccess",["WAResultOrError","WASmaxInDevicesDeviceInfoMixin","WASmaxInDevicesIQResultResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"device");if(!b.success)return b;b=d("WASmaxInDevicesDeviceInfoMixin").parseDeviceInfoMixin(a);return!b.success?b:b}function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"self");if(!c.success)return c;a=d("WASmaxInDevicesIQResultResponseMixin").parseIQResultResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxParseUtils").mapChildrenWithTag(c.value,"device",1,25,h);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{selfDevice:b.value}))}g.parseFetchSelfResponseSuccessSelfDevice=h;g.parseFetchSelfResponseSuccess=a}),98);
__d("WASmaxOutDevicesFetchSelfRequest",["WASmaxJsx","WASmaxOutDevicesBaseIQGetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function a(){var a=d("WASmaxOutDevicesBaseIQGetRequestMixin").mergeBaseIQGetRequestMixin(d("WASmaxJsx").smax("iq",{to:d("WAWap").S_WHATSAPP_NET,xmlns:"fbid:devices"},d("WASmaxJsx").smax("self",null)));return a}g.makeFetchSelfRequest=a}),98);
__d("WASmaxDevicesFetchSelfRPC",["WAComms","WASmaxInDevicesFetchSelfResponseError","WASmaxInDevicesFetchSelfResponseSuccess","WASmaxOutDevicesFetchSelfRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("WASmaxOutDevicesFetchSelfRequest").makeFetchSelfRequest();a=(yield d("WAComms").sendSmaxStanza(b,a));var c=d("WASmaxInDevicesFetchSelfResponseSuccess").parseFetchSelfResponseSuccess(a,b);if(c.success)return{name:"FetchSelfResponseSuccess",value:c.value};a=d("WASmaxInDevicesFetchSelfResponseError").parseFetchSelfResponseError(a,b);if(a.success)return{name:"FetchSelfResponseError",value:a.value};throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("FetchSelf",{Success:c,Error:a}))});return h.apply(this,arguments)}g.sendFetchSelfRPC=a}),98);
__d("WAGetCurrentUserDeviceList",["WAAssertUnreachable","WAGlobals","WAJids","WALogger","WAPersistedJobManager","WASignalKeys","WASmaxDevicesFetchSelfRPC","WATimeUtils","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Two devices were detected as isCurrentDevice in getCurrentUserDeviceList"]);h=function(){return a};return a}function i(a,b){if(a.isCurrentDevice&&b.isCurrentDevice){d("WALogger").ERROR(h());return 0}if(a.isCurrentDevice)return-1;if(b.isCurrentDevice)return 1;if(a.lastSeen!=null&&b.lastSeen==null)return-1;if(a.lastSeen==null&&b.lastSeen!=null)return 1;if(a.lastSeen!=null&&b.lastSeen!=null){a=a.lastSeen;b=b.lastSeen;return b.getTime()-a.getTime()}return 0}function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WASmaxDevicesFetchSelfRPC").sendFetchSelfRPC());switch(a.name){case"FetchSelfResponseError":var b=a.value.errorRetryableIQErrorOrNonRetryableIQErrorRetryableIQErrorMixinGroup;switch(b.name){case"RetryableIQError":var e=b.value.backoff;if(e!=null)throw new(d("WAPersistedJobManager").RetryOnBackoff)({algo:{delay:e,type:"constant"},jitter:0});else throw new(d("WAPersistedJobManager").RetryOnBackoff)({algo:{first:d("WATimeUtils").HOUR_MILLISECONDS/60,type:"exponential"},jitter:.1});default:b.name;e=b.value.code;throw c("err")("Failed with an error code "+e)}case"FetchSelfResponseSuccess":var f=d("WAJids").extractDeviceId(d("WAGlobals").getMyDeviceJid());return a.value.selfDevice.map(function(a){var b=a.creation,c=a.elementValue,e=a.id,g=a.ip,h=a.location,i=a.manufacturer,j=a.model,k=a.platform;a=a.seen;return{creationTime:b==null?null:d("WATimeUtils").toDate(d("WATimeUtils").castToUnixTime(b.elementValue)),id:d("WAJids").interpretAsDeviceId(e),identityKey:d("WASignalKeys").serializeIdentity(c),ipAddress:(b=g==null?void 0:g.elementValue)!=null?b:null,isCurrentDevice:e===f,lastSeen:a==null?null:d("WATimeUtils").toDate(d("WATimeUtils").castToUnixTime(a.elementValue)),latitude:h==null?null:parseFloat(h.latitude),location:(c=h==null?void 0:h.elementValue)!=null?c:null,longitude:h==null?null:parseFloat(h.longitude),manufacturer:(g=i==null?void 0:i.elementValue)!=null?g:null,model:(b=j==null?void 0:j.elementValue)!=null?b:null,platform:(e=k==null?void 0:k.elementValue)!=null?e:null}}).sort(i);default:return c("WAAssertUnreachable")(a.name)}});return j.apply(this,arguments)}g.getCurrentUserDeviceList=a}),98);
__d("WASmaxInDevicesIQErrorBadRequestOrItemNotFoundMixinGroup",["WAResultOrError","WASmaxInDevicesIQErrorBadRequestMixin","WASmaxInDevicesIQErrorItemNotFoundMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInDevicesIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:b.value});var c=d("WASmaxInDevicesIQErrorItemNotFoundMixin").parseIQErrorItemNotFoundMixin(a);return c.success?d("WAResultOrError").makeResult({name:"IQErrorItemNotFound",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorBadRequest","IQErrorItemNotFound"],[b,c])}g.parseIQErrorBadRequestOrItemNotFoundMixinGroup=a}),98);
__d("WASmaxInDevicesNonRetryableRemoveDeviceIQErrorMixin",["WAResultOrError","WASmaxInDevicesIQErrorBadRequestOrItemNotFoundMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxInDevicesIQErrorBadRequestOrItemNotFoundMixinGroup").parseIQErrorBadRequestOrItemNotFoundMixinGroup(a);return!b.success?b:d("WAResultOrError").makeResult({iQErrorBadRequestOrItemNotFoundMixinGroup:b.value})}g.parseNonRetryableRemoveDeviceIQErrorMixin=a}),98);
__d("WASmaxInDevicesRetryableOrNonRetryableRemoveDeviceIQErrorMixinGroup",["WAResultOrError","WASmaxInDevicesNonRetryableRemoveDeviceIQErrorMixin","WASmaxInDevicesRetryableIQErrorMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInDevicesRetryableIQErrorMixin").parseRetryableIQErrorMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"RetryableIQError",value:b.value});var c=d("WASmaxInDevicesNonRetryableRemoveDeviceIQErrorMixin").parseNonRetryableRemoveDeviceIQErrorMixin(a);return c.success?d("WAResultOrError").makeResult({name:"NonRetryableRemoveDeviceIQError",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["RetryableIQError","NonRetryableRemoveDeviceIQError"],[b,c])}g.parseRetryableOrNonRetryableRemoveDeviceIQErrorMixinGroup=a}),98);
__d("WASmaxInDevicesRemoveResponseError",["WAResultOrError","WASmaxInDevicesIQErrorResponseMixin","WASmaxInDevicesRetryableOrNonRetryableRemoveDeviceIQErrorMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInDevicesIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInDevicesRetryableOrNonRetryableRemoveDeviceIQErrorMixinGroup").parseRetryableOrNonRetryableRemoveDeviceIQErrorMixinGroup(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorRetryableOrNonRetryableRemoveDeviceIQErrorMixinGroup:b.value}))}g.parseRemoveResponseError=a}),98);
__d("WASmaxInDevicesRemoveResponseSuccess",["WASmaxInDevicesIQResultResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxInDevicesIQResultResponseMixin").parseIQResultResponseMixin(a,b);return!c.success?c:c}g.parseRemoveResponseSuccess=a}),98);
__d("WASmaxOutDevicesKeyDataMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.anyElementValue;a=d("WASmaxJsx").smax("smax$any",null,a);return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeKeyDataMixin=a}),98);
__d("WASmaxOutDevicesIdentityKeyMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutDevicesKeyDataMixin"],(function(a,b,c,d,e,f,g){function h(a){a=d("WASmaxJsx").smax("smax$any",null,d("WASmaxOutDevicesKeyDataMixin").mergeKeyDataMixin(d("WASmaxJsx").smax("identity",null),a));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeIdentityKeyMixin=a}),98);
__d("WASmaxOutDevicesRemoveRequest",["WASmaxJsx","WASmaxOutDevicesBaseIQSetRequestMixin","WASmaxOutDevicesIdentityKeyMixin","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b=a.removeId;a=a.identityKeyMixinArgs;b=d("WASmaxOutDevicesBaseIQSetRequestMixin").mergeBaseIQSetRequestMixin(d("WASmaxJsx").smax("iq",{to:d("WAWap").S_WHATSAPP_NET,xmlns:"fbid:devices"},d("WASmaxOutDevicesIdentityKeyMixin").mergeIdentityKeyMixin(d("WASmaxJsx").smax("remove",{id:d("WAWap").INT(b)}),a)));return b}g.makeRemoveRequest=a}),98);
__d("WASmaxDevicesRemoveRPC",["WAComms","WASmaxInDevicesRemoveResponseError","WASmaxInDevicesRemoveResponseSuccess","WASmaxOutDevicesRemoveRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=d("WASmaxOutDevicesRemoveRequest").makeRemoveRequest(a);b=(yield d("WAComms").sendSmaxStanza(a,b));var c=d("WASmaxInDevicesRemoveResponseSuccess").parseRemoveResponseSuccess(b,a);if(c.success)return{name:"RemoveResponseSuccess",value:c.value};b=d("WASmaxInDevicesRemoveResponseError").parseRemoveResponseError(b,a);if(b.success)return{name:"RemoveResponseError",value:b.value};throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("Remove",{Success:c,Error:b}))});return h.apply(this,arguments)}g.sendRemoveRPC=a}),98);
__d("WARemoveDevice",["WALogger","WAPersistedJobManager","WAPushSafeTypes","WAResultOrError","WASignalOther","WASmaxDevicesRemoveRPC","WATimeUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["removeDevice result for ",": "," "]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["removeDevice called for device "," and identity ",""]);i=function(){return a};return a}function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=d("WAPushSafeTypes").unsafeNotNullable(b);b=a.deviceId;a=a.identity;d("WALogger").DEV(i(),b,a);a=d("WASignalOther").sliceBytes(a,1,32);a=(yield d("WASmaxDevicesRemoveRPC").sendRemoveRPC({removeId:b,identityKeyMixinArgs:{anyElementValue:a}}));d("WALogger").LOG(h(),b,a);if(a.name==="RemoveResponseSuccess")return d("WAResultOrError").makeResult();else{a.name;b=a.value.errorRetryableOrNonRetryableRemoveDeviceIQErrorMixinGroup;if(b.name!=="RetryableIQError")return d("WAResultOrError").makeError();b.name;a=b.value.backoff;if(a!=null)throw new(d("WAPersistedJobManager").RetryOnBackoff)({algo:{type:"constant",delay:a},jitter:0});else throw new(d("WAPersistedJobManager").RetryOnBackoff)({algo:{type:"exponential",first:d("WATimeUtils").HOUR_MILLISECONDS/60},jitter:.1})}});return j.apply(this,arguments)}g.removeDevice=a}),98);
__d("WARemoveCurrentDevice",["WAGetCurrentUserDeviceInfoApi","WAGlobals","WALogger","WARemoveDevice","WAResultOrError","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["There is no stored user info, it was already deleted or this job was called twice, possibly from another tab"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["removeCurrentDevice called for current device"]);i=function(){return a};return a}a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").DEV(i());var b=(yield d("WAGetCurrentUserDeviceInfoApi").getCurrentUserDeviceInfo());if(b==null){d("WALogger").WARN(h());return d("WAResultOrError").makeResult()}var c=b.deviceId;b=b.identityKey;a=(yield d("WARemoveDevice").removeDevice(a,{deviceId:c,identity:b}));if(a.success){yield d("WAGlobals").getDependencies().clearSignalAndTempStores();return d("WAResultOrError").makeResult()}return d("WAResultOrError").makeResult()});return function(b){return a.apply(this,arguments)}}();g.removeCurrentDevice=a}),98);
__d("WASaveReceiptApi",["MAWTransactionMode","WADbTransactor","WAMsg"],(function(a,b,c,d,e,f,g){"use strict";a=d("WADbTransactor").makeSignalTransactor({receipts:d("MAWTransactionMode").READWRITE},"saveReceipt",function(a){return function(b){return a.receipts.put({msgId:b.id.externalId.toString(),permittedIdentitiesPerDevice:b.permittedIdentitiesPerDevice,recipientDevices:b.recipientDevices,waMsgId:d("WAMsg").craftWAMsgIdString(b.id)}).then(function(){})}});g.saveReceipt=a}),98);
__d("WASendAppDataFanoutProtocol",["WAAsMessageApplication","WABridge","WAConvertAppData","WAEncUserMsg","WAErrorMessage","WAGetCurrentUserDeviceInfoApi","WAGlobals","WAMsgApplication.pb","WAOdsEnums","WAResultOrError","WASmaxAppdataPublishPeerRPC","WATagsLogger","WATimeUtils","asyncToGeneratorRuntime","encodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to send appdata. Error: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Got phash mismatch on appdata, local[","] server[","]"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to fetch current device public identity key"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Attempting to send an appData stanza to more than the allowed "," devices"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Attempting to send an appData stanza to "," devices"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Sending appdata, externalId: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to send appdata to devices with error: ",""]);n=function(){return a};return a}var o=d("WATagsLogger").TAGS(["sendAppDataFanout"]),p=24;function a(a,b){a=b.contents;var c=b.externalId,e=b.permittedIdentitiesPerDevice;b=b.checkPhash;b=b===void 0?"checkPhash":b;return q(a,c,e,b)["catch"](function(a){a=d("WAErrorMessage").maybeGetMessageFromError(a);o.ERROR(n(),a);return d("WAResultOrError").makeError("runtime-error")})}function q(a,b,c,d){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){e===void 0&&(e="checkPhash");o.LOG(m(),b);a=d("WAConvertAppData").convertAppData(a);var f={bytes:d("WAAsMessageApplication").castToMessageApplicationBytes(d("encodeProtobuf").encodeProtobuf(d("WAMsgApplication.pb").MessageApplicationSpec,a).readByteArrayView()),version:"v3"},g=[];a=Array.from(c.entries()).map(function(a){var b=a[0];a=a[1];return{identity:a.pubKey,jid:b}});c=p;a.length>c&&(o.WARN(l(),a.length),o.ERROR(k(),c),a=a.slice(0,c));var n=[{devicesInfo:a,user:d("WAGlobals").getMyUserJid()}];c=(yield d("WAGlobals").getWaOneQueue().enqueue(function(a){a=a.cryptoManager;return d("WAEncUserMsg").encryptUserMsg(n,{messageBytes:f,type:"appdata"},{cryptoManager:a})},{operationType:"encrypt",flush:!0}));a=c.phash;var q=!1;c.participants!=null&&c.participants.forEach(function(a){a.type==="pkmsg"&&(q=!0),g.push({toJid:a.to,encTypeIndividualMixinArgs:{encType:a.type,encElementValue:a.ciphertext},encVersionFutureproofMixinArgs:{encV:parseInt(a.v,10)}})});c={appdataTo:d("WAGlobals").getMyUserJid(),toArgs:g};c={peerPeerFanout:c};var r=void 0;if(q){var s=(yield d("WAGetCurrentUserDeviceInfoApi").getCurrentUserDeviceInfo());s=s==null?void 0:s.identityKey;if(s==null){o.ERROR(j());return d("WAResultOrError").makeError("no-public-identity")}r={deviceIdentityElementValue:s}}s={appdataDeviceListCheck:e==="checkPhash"?"true":"false"};e={appdataId:b,peerMsgTypesArgs:c,deviceIdentityMixinArgs:r,withDeviceListCheckMixinArgs:s};b=(yield d("WASmaxAppdataPublishPeerRPC").sendPeerRPC(e));switch(b.name){case"PeerResponseSuccess":r=(c=b.value.deviceListStaleMixin)==null?void 0:c.phash;if(r!=null&&a!=null&&r!==a){o.LOG(i(),a,r);d("WABridge").getBridge().fireAndForget("event","odsBumpEntityKey",{entity:d("WAOdsEnums").Entity.PHASH_MISMATCH,key:"appdata"});return d("WAResultOrError").makeResult({phashMismatch:!0,serverTs:d("WATimeUtils").castToUnixTime(b.value.t)})}else return d("WAResultOrError").makeResult({phashMismatch:!1,serverTs:d("WATimeUtils").castToUnixTime(b.value.t)});default:b.name;o.ERROR(h(),b.value.error);return d("WAResultOrError").makeError("ack-failure")}});return r.apply(this,arguments)}g.MAX_APPDATA_RECIPIENTS=p;g.sendAppDataToDevicesProtocol=a}),98);
__d("WASendMsgUtilV2",["Promise","WADevicesState","WAGenReportingMeta","WAGlobals","WAJids","WALoadReceiptApi","WALogger","WAMsg","WAResultOrError","WASaveReceiptApi","WASendMsgInternal","WASentBytesCache","WATimeUtils","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error loading current device identity ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendWrittenMsg failed to save sent bytes to cache: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Trying to send a message with no recipients, but it is a self thread"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Trying to send a message with no recipients"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Trying to send a message that does not have a receipt in db"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to save receipt for message with error ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error during get devices before sending: ",""]);o=function(){return a};return a}function p(a){return(h||(h=b("Promise"))).resolve()}function q(a,b){return d("WADevicesState").getDevicesState().waitForUserDevices(Array.from(new Set([a,d("WAGlobals").getMyUserJid()])),"GetDevicesBeforeSend: "+b)}function r(a,c){a=c.chatJid;var e=c.reason;return d("WAJids").switchOnChatJidType(a,{group:function(a){return p(a)},interopUser:function(a){return q(a,e)},lidUser:function(a){return q(a,e)},msgrUser:function(a){return q(a,e)},phoneUser:function(a){return q(a,e)}})["catch"](function(a){d("WALogger").ERROR(o(),a);return(h||(h=b("Promise"))).resolve()})}function s(a,b){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a.messagePayload;a=a.loadThreadParticipants;var e={author:c.protocolMsgId.author,chat:c.protocolMsgId.chat,externalId:c.protocolMsgId.externalId},f=(yield d("WALoadReceiptApi").loadReceipt(e));if(f.success)return f;b.addPoint("get_devices_before_send_start");yield r(void 0,{chatJid:c.protocolMsgId.chat,reason:"prepareReceipt"});b.addPoint("get_devices_before_send_end");var g=(yield a(c.protocolMsgId.chat));b.addPoint("get_identities_start");f=(yield d("WAGlobals").getWaOneQueue().enqueue(function(a){a=a.cryptoManager;return a.storage.bulkLoadIdentities(g)},{flush:!1,afterInit:!0,operationType:"prepare_receipt_load_identities"}));a=[];if(f.size===0)a=[].concat(g);else for(c of f){var h=c[0],i=c[1];i.size===0&&a.push(h)}a.length>0&&(yield d("WADevicesState").getDevicesState().waitForUserDevices(a,"GetDevicesBeforeSend: prepareReceipt",!0),f=(yield d("WAGlobals").getWaOneQueue().enqueue(function(a){a=a.cryptoManager;return a.storage.bulkLoadIdentities(g)},{afterInit:!0,flush:!1,operationType:"prepare_receipt_load_identities"})));i=new Map();for(h of f){h[0];c=h[1];for(a of c){f=a[0];c=a[1];if(f===d("WAGlobals").getMyDeviceJid())continue;i.set(f,{pubKey:c})}}b.addPoint("get_identities_end");f=new Set();c={permittedIdentitiesPerDevice:i,recipientDevices:f,id:e};b.addPoint("save_receipts_start");yield d("WASaveReceiptApi").saveReceipt(c)["catch"](function(a){b.addPoint("save_receipts_fail");d("WALogger").ERROR(n(),a);return d("WAResultOrError").makeError("missing-receipt")});b.addPoint("save_receipts_end");return d("WAResultOrError").makeResult(c)});return t.apply(this,arguments)}function a(a,b,c){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){a=c.messagePayload;var f=c.loadThreadParticipants,g=c.sendIdentity;g=g===void 0?!1:g;c=c.isInstamadillo;c=c===void 0?!1:c;e.addPoint("prepare_receipt_start");f=(yield s({messagePayload:a,loadThreadParticipants:f},e));if(f.success===!1){e.addPoint("prepare_receipt_fail");d("WALogger").ERROR(m());return d("WAResultOrError").makeError({type:"missing-receipt"})}e.addPoint("prepare_receipt_end");f=f.value;var i=a.frankingKey,n=a.frankingVersion,o=a.messageBytes,p=a.backupDirective,q=a.messageType,r=a.protocolMsgId;a=v(f.permittedIdentitiesPerDevice);f=q.type==="text"&&q.invitedParticipantUserJid!=null?a.filter(function(a){return a.user===q.invitedParticipantUserJid||a.user===d("WAGlobals").getMyUserJid()}):a;e.addPoint("recipients-calculated",{"int":{recipientsCount:f.length},string:{msgType:q.type}});a=q.type==="text"&&q.invitedParticipantUserJid!=null?q.invitedParticipantUserJid:r.chat;var t=r.chat===d("WAGlobals").getMyUserJid();if(f.length===0&&!t){d("WALogger").ERROR(l());return d("WAResultOrError").makeError({type:"no-recipients",isRetriable:!1})}else if(f.length===0&&t){d("WALogger").LOG(k());return d("WAResultOrError").makeResult({baseKey:null,reportingMeta:null,serverTs:d("WATimeUtils").unixTime()})}t=g?yield d("WAGlobals").getWaOneQueue().enqueue(function(a){a=a.cryptoManager;return w(a)},{operationType:"get_my_device_identity",flush:!1,afterInit:!0}):null;g=(yield q.isRevoked===!0?(h||(h=b("Promise"))).resolve(null):d("WAGenReportingMeta").genReportingMeta(o.bytes,i,n));return d("WASendMsgInternal").sendMessage({type:"chat",messageBytes:o,chat:a,deviceIdentity:t,messageType:q,protocolMsgId:r,externalId:r.externalId,recipients:f,reportingMeta:g,backupDirective:p},e,c).then(function(a){if(a.success)return d("WASentBytesCache").sentBytesCache().saveSentBytes({ts:a.value.serverTs,frankingKey:i,frankingVersion:n,messageBytes:o,backupDirective:p,messageType:q,protocolMsgId:r,waMsgId:d("WAMsg").craftWAMsgIdString({author:r.author,chat:r.chat,externalId:r.externalId})})["catch"](function(a){d("WALogger").ERROR(j(),a)}).then(function(){return a});else return a})});return u.apply(this,arguments)}function v(a){var b=new Map();a.forEach(function(a,c){a=a.pubKey;var e=d("WAJids").extractUserJid(c);a={identity:a,jid:c};c=b.get(e)||[];c.push(a);b.set(e,c)});return Array.from(b,function(a){var b=a[0];a=a[1];return{devicesInfo:a,user:b}})}function w(a){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{a=(yield a.storage.loadIdentities(d("WAGlobals").getMyUserJid()));a=a.get(d("WAGlobals").getMyDeviceJid());if(a!=null)return a;throw c("err")("missing-identity")}catch(a){d("WALogger").ERROR(i(),a)}});return x.apply(this,arguments)}g.getDevicesBeforeSend=r;g.sendChatMessage=a}),98);
__d("WASetClockSkewApi",["WASetMetaApiV2"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){a=a.clockSkew;return d("WASetMetaApiV2").setMeta({clockSkew:a})};g.setClockSkew=a}),98);
__d("WASendPing",["WAComms","WALogger","WASetClockSkewApi","WATimeUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendPing: sending"]);h=function(){return a};return a}function a(){d("WALogger").LOG(h()),d("WAComms").sendPing()}function c(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=b.clockSkew;d("WATimeUtils").setClockSkew(a);yield d("WASetClockSkewApi").setClockSkew({clockSkew:a})});return i.apply(this,arguments)}g.sendPing=a;g.updateClockSkew=c}),98);
__d("WASyncAbProps",["WAAbPropsSync","WALogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Syncing ABProps"]);h=function(){return a};return a}function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=b.sendHash;d("WALogger").LOG(h());yield d("WAAbPropsSync").syncAbProps({sendHash:b,eventFlow:a!=null?a:void 0})});return i.apply(this,arguments)}g.syncAbProps=a}),98);
__d("WAUploadMedia",["WABase64","WABlobToArrayBuffer","WACheckCiphertextInServer","WACreateRetrier","WAEncryptAndUploadPlaintext","WAErrorMessage","WAFindReusableMediaEntry","WALogger","WAMediaUtils","WAResultOrError","WATimeUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["encryptAndUploadPlaintext: no plaintext"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["uploadMedia: media is not on the server, start uploading"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["encryptAndUploadPlaintext: no plaintext"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["uploadMedia: media is partially on the server, start uploading from byteOffset ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["uploadMedia: media is on the server"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["uploadMedia: resume/exist check exhausted available retries"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["uploadMedia: resume check unexpected runtime error: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["uploadMedia: async upload"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["encryptAndUploadPlaintext: no plaintext"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["uploadMedia: no media entry found, need to upload media"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["uploadMedia: get media entry unexpected runtime error: ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["uploadMedia: fail to gather media routes"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateMediaEntry unexpected runtime error: ",""]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["uploadMedia: unexpected runtime error: ",""]);u=function(){return a};return a}function a(a){var b=a.uploadMediaMetric;return v(babelHelpers["extends"]({},a))["catch"](function(a){a=d("WAErrorMessage").maybeGetMessageFromError(a);d("WALogger").ERROR(u(),a);return d("WAResultOrError").makeError("runtime-error")}).then(function(a){a.success?b.endSuccess():b.endFail(a.error,{string:{failReason:a.error}});return a})}function v(a){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a.chatJid;var b=a.filename,c=a.hash,e=a.mediaTypeDetails,f=a.protocolMsgId,g=a.size,t=a.uploadMediaMetric,u=a.getMediaKnownEntries,v=a.getMediaPlaintext,w=a.updateMediaEntryForMsg,y=a.updateMediaEntryForOptimisticUpload;a=a.getDownloadableThumbnailForMedia;var z;e.type==="regular"?z=e.mediaType:(z="preview",t.addAnnotations({string:{fullSizeMediaType:e.messageType}}));t.addPoint("create_upload_retrier_start");e=(yield d("WACreateRetrier").createUploadRetrier(z,t));if(!e.success){d("WALogger").WARN(s());t.addPoint("create_upload_retrier_fail");return e}t.addPoint("create_upload_retrier_end");e=e.value;w=x(f,c,w,y,t);t.addPoint("get_media_entry_start");y=(yield u(c)["catch"](function(a){d("WALogger").ERROR(r(),d("WAErrorMessage").maybeGetMessageFromError(a));t.addPoint("get_media_entry_fail");throw a}));u=d("WAFindReusableMediaEntry").findReusableMediaEntryForArmadillo(f,y);t.addPoint("get_media_entry_end");if(u==null){t.addPoint("create_media_key_start");d("WALogger").LOG(q());f=d("WAMediaUtils").createMediaKey();y=d("WAMediaUtils").createUploadToken();var A=d("WATimeUtils").unixTime();t.addPoint("create_media_key_end");t.addPoint("get_media_plaintext_start");var B=(yield v(c).then(function(a){return a==null?null:d("WABlobToArrayBuffer").blobToArrayBuffer(a)}));if(B==null){d("WALogger").ERROR(p());t.addPoint("get_media_plaintext_fail");return d("WAResultOrError").makeError("no-plaintext")}t.addPoint("get_media_plaintext_end");return d("WAEncryptAndUploadPlaintext").encryptAndUploadPlaintext({size:g,filename:b,mediaKey:f,mediaKeyTimestamp:A,serverMediaType:z,mediaUploadFlow:t,plaintext:B,plaintextHash:c,updateMediaEntry:w,uploadRetrier:e,uploadToken:y,getDownloadableThumbnailForMedia:a})}f=u.directPath;A=u.downloadableThumbnail;B=u.fileEncSha256;y=u.fileSha256;var C=u.mediaKey,D=u.mediaKeyTimestamp,E=u.objectId;u=u.uploadToken;A={directPath:f,downloadableThumbnail:A,fileEncSha256:B,filename:b,fileSha256:y||d("WABase64").decodeB64UrlSafe(c),mediaKey:C,mediaKeyTimestamp:D,objectId:E,serverMediaType:z,size:g,uploadToken:u};if(f!=null){d("WALogger").LOG(o());yield w(A);t.addAnnotations({bool:{reused_media_entry:!0}});return d("WAResultOrError").makeResult(A)}t.addPoint("resume_check_start");y=(yield d("WACheckCiphertextInServer").checkCiphertextInServer(z,B,u,e)["catch"](function(a){d("WALogger").ERROR(n(),d("WAErrorMessage").maybeGetMessageFromError(a));t.addPoint("resume_check_fail");throw a}));if(!y.success){t.addPoint("resume_check_fail");d("WALogger").WARN(m());return y}t.addPoint("resume_check_end");E=y.value;if(E.type==="media-found"){d("WALogger").LOG(l());t.addAnnotations({bool:{existingMediaFound:!0}});f=babelHelpers["extends"]({},A,{directPath:E.directPath,objectId:E.objectId});yield w(f);t.addAnnotations({bool:{reused_media_entry:!0}});return d("WAResultOrError").makeResult(f)}else if(E.type==="media-partial-found"){d("WALogger").LOG(k(),E.resumeFromBytes);B=E.resumeFromBytes;t.addPoint("get_media_plaintext_start");y=(yield v(c).then(function(a){return a==null?null:d("WABlobToArrayBuffer").blobToArrayBuffer(a)}));if(y==null){d("WALogger").ERROR(j());t.addPoint("get_media_plaintext_fail");return d("WAResultOrError").makeError("no-plaintext")}t.addPoint("get_media_plaintext_end");return d("WAEncryptAndUploadPlaintext").encryptAndUploadPlaintext({size:g,filename:b,fromOffset:B,mediaKey:C,mediaKeyTimestamp:D,serverMediaType:z,mediaUploadFlow:t,plaintext:y,plaintextHash:c,updateMediaEntry:w,uploadRetrier:e,uploadToken:u,getDownloadableThumbnailForMedia:a})}d("WALogger").LOG(i());A=d("WATimeUtils").unixTime();t.addPoint("get_media_plaintext_start");f=(yield v(c).then(function(a){return a==null?null:d("WABlobToArrayBuffer").blobToArrayBuffer(a)}));if(f==null){d("WALogger").ERROR(h());t.addPoint("get_media_plaintext_fail");return d("WAResultOrError").makeError("no-plaintext")}t.addPoint("get_media_plaintext_end");return d("WAEncryptAndUploadPlaintext").encryptAndUploadPlaintext({size:g,filename:b,mediaKey:C,mediaKeyTimestamp:A,serverMediaType:z,mediaUploadFlow:t,plaintext:f,plaintextHash:c,updateMediaEntry:w,uploadRetrier:e,uploadToken:u,getDownloadableThumbnailForMedia:a})});return w.apply(this,arguments)}function x(a,b,c,e,f){return function(g){f.addPoint("update_media_entry_start");var h=d("WAMediaUtils").encodeMediaEntryForUpload(g);g=a==null?e(b,function(){return h},g==null?void 0:g.objectId,g==null?void 0:g.serverMediaType):c(b,a,function(){return h},g==null?void 0:g.objectId,g==null?void 0:g.serverMediaType);return g.then(function(a){f.addPoint("update_media_entry_end");return a})["catch"](function(a){d("WALogger").ERROR(t(),d("WAErrorMessage").maybeGetMessageFromError(a));f.addPoint("update_media_entry_fail");throw a})}}g.uploadMedia=a}),98);/*FB_PKG_DELIM*/
__d("ACSCipherSuiteModule",[],(function(a,b,c,d,e,f){"use strict";b={hash:"SHA-512",name:"HMAC"};c={curveName:"RISTRETTO",macAlgorithm:b,value:1};var g=new Map([[c.value,c]]);function a(a){return g.has(a)?g.get(a):null}f.VOPRF_RISTRETTO_HMACSHA512=c;f.getACSCipherSuiteByValue=a}),66);
__d("ACSTokenHmacUtil",["XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){return h(a,b).then(function(a){return j(a,c)})}function h(a,b){return d("XPlatReactCrypto").subtleImportKey("raw",b,a,!1,["sign"]).then(function(b){return{algo:a,key:b}})}function i(a){return typeof a.hash==="string"?a.hash:a.hash.name}function j(a,b){var c=a.algo;a=a.key;c={hash:i(c),name:"HMAC"};return d("XPlatReactCrypto").subtleSign(c,a,b).then(function(a){return new Uint8Array(a)})}g.hmac=a}),98);
__d("LSACSExperimentCapability",[],(function(a,b,c,d,e,f){a=Object.freeze({RETRY_AFTER_TASK_SERIALIZATION_FAILURE_EXPONENTIAL_BACKOFF:0,BUMP_TOKEN_SYNC_TASK_AT_TASK_SERIALIZATION:1,INSERT_PENDING_TASK_PARENT_ROW_WHEN_NO_ACS_TOKENS_AT_TASK_INSERTION:2});f["default"]=a}),66);
__d("LSBeginHandlingFireForgetTasksForQueue",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return c[0]=b.createArray(),b.forEach(b.filter(b.db.table(5).fetch(),function(b){return b.queueName===a[0]}),function(a){a=a.item;return c[3]=new b.Map(),c[3].set("label",a.context),c[3].set("payload",a.taskValue),c[3].set("queue_name",a.queueName),c[3].set("task_id",a.taskId),c[3].set("failure_count",b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))?void 0:b.i64.cast([0,0])),c[4]=(c[0].push(c[3]),c[0])})},function(e){return c[1]=new b.Map(),c[1].set("tasks",c[0]),c[1].set("epoch_id",void 0),c[2]=new b.Map(),c[2].set("queue_name",a[0]),c[2].set("next_sync_ms",void 0),c[2].set("work_item_type",b.i64.cast([0,5])),c[2].set("network_payload",c[1]),c[2].set("http_url_override",void 0),c[2].set("skip_realtime_gateway",!1),d[0]=c[2]}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSCoreBeginHandlingFireForgetTasksForQueueStoredProcedure";a.__tables__=["pending_fire_and_forget_tasks"];e.exports=a}),null);
__d("LSBeginHandlingFireForgetTasksForQueueStoredProcedure",["LSBeginHandlingFireForgetTasksForQueue","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSBeginHandlingFireForgetTasksForQueue"),e.queueName);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSForceTaskExecutionImmediately",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.db.table(2).fetch([[[a[0]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?0:(e=d.item,c[1]=b.i64.of_float(Date.now()),b.i64.lt(c[1],e.minTimeToSyncTimestampMs)?b.forEach(b.db.table(2).fetch([[[a[0]]]]),function(a){var c=a.update;a=a.item;return c({minTimeToSyncTimestampMs:b.i64.cast([0,0]),failureCount:b.i64.add(a.failureCount,b.i64.cast([0,1]))})}):b.resolve())})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSCoreForceTaskExecutionImmediatelyStoredProcedure";a.__tables__=["pending_tasks"];e.exports=a}),null);
__d("LSRemoveUsedTokens",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(a){return b.forEach(b.filter(b.db.table(309).fetch(),function(a){return b.i64.le(a.redeemLimit,b.i64.cast([0,0]))}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSAnonymousCredentialsRemoveUsedTokensStoredProcedure";a.__tables__=["secure_acs_tokens"];e.exports=a}),null);
__d("LSGetCurrentTokenPoolState",["LSArrayGetObjectAt","LSRemoveBlindedTokens","LSRemoveUsedTokens"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){return d[0]=c.i64.of_float(Date.now()),d[1]=c.createArray(),c.count(c.filter(c.db.table(307).fetch(),function(b){return b.projectName===a[0]})).then(function(a){return d[2]=a})},function(b){return c.forEach(c.filter(c.db.table(307).fetch(),function(b){return b.projectName===a[0]}),function(a){a=a.item;return d[7]=a.configId,c.i64.gt(d[0],a.expirationTimestampMs)?c.forEach(c.db.table(307).fetch([[[d[7]]]]),function(a){return a["delete"]()}):c.resolve(d[8]=(d[1].push(d[7]),d[1]))})},function(a){return c.storedProcedure(b("LSRemoveUsedTokens"))},function(a){return d[3]=c.i64.cast([0,0]),d[4]=c.i64.of_int32(d[1].length),c.i64.gt(d[4],c.i64.cast([0,0]))?c.loopAsync(d[4],function(a){return d[7]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[1],d[7]).then(function(a){return a=a,d[8]=a[0],d[9]=a[1],a})},function(a){return c.count(c.filter(c.db.table(309).fetch(),function(a){return a.configId===d[8]})).then(function(a){return d[10]=a})},function(a){return d[3]=c.i64.add(d[10],d[3]),c.storedProcedure(b("LSRemoveBlindedTokens"),d[8])}])}):c.resolve()},function(a){return c.i64.gt(d[2],c.i64.cast([0,0]))?(d[7]=c.i64.of_int32(d[1].length),d[5]=c.i64.ge(d[7],c.i64.cast([0,1]))):d[5]=void 0,d[5]!==void 0?(d[5]?(c.i64.gt(d[3],c.i64.cast([0,0]))?d[8]=c.i64.cast([0,3]):d[8]=c.i64.cast([0,2]),d[7]=d[8]):d[7]=c.i64.cast([0,1]),d[6]=d[7]):d[6]=c.i64.cast([0,0]),a=[d[6],d[3]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSAnonymousCredentialsGetCurrentTokenPoolStateStoredProcedure";a.__tables__=["secure_acs_configurations","secure_acs_tokens"];e.exports=a}),null);
__d("LSIssueNextSync",["LSIssueNewTaskAndGetTaskID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.count(c.filter(c.db.table(310).fetch(),function(b){return b.projectName===a[1]})).then(function(a){return d[0]=a})},function(e){return c.i64.gt(d[0],c.i64.cast([0,0]))&&a[3]===!0?c.resolve(0):c.sequence([function(b){return c.forEach(c.filter(c.db.table(310).fetch(),function(b){return b.projectName===a[1]}),function(a){return a["delete"]()})},function(e){return c.i64.gt(a[2],c.i64.cast([0,0]))?(d[3]=c.i64.of_float(Date.now()),d[1]=c.i64.add(d[3],a[2])):d[1]=c.i64.cast([0,0]),c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),["acs_sync","_",a[1]].join(""),c.i64.cast([0,362]),"",void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,d[1],c.i64.cast([0,0])).then(function(a){return a=a,d[2]=a[0],a})},function(b){return c.db.table(310).add({taskId:d[2],projectName:a[1],maxClientTokenPoolSize:a[0]})}])}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSAnonymousCredentialsIssueNextSyncStoredProcedure";a.__tables__=["acs_request_context"];e.exports=a}),null);
__d("LSVoprfBlind.nop",["XPlatReactVoprf","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){a=(yield d("XPlatReactVoprf").loadXPlatReactVoprf());b=a.voprfInstance;a=b.voprfInfo;var e=b.voprfWasm;try{e=e.blind(a,new Uint8Array(c));return[e.blindedElement.buffer,e.blindingFactor.buffer]}catch(a){throw a}finally{d("XPlatReactVoprf").freeVoprfInstance(b)}});function c(b,c,d){return a.apply(this,arguments)}return c}();a.__nop_name__="LSVoprfBlind";g["default"]=a}),98);
__d("LSVoprfCreateNonce.nop",["LSSynchronousPromise","XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";var h=32;a=function(a,b){a=h;b=new Uint8Array(a);d("XPlatReactCrypto").getRandomValues(b);return d("LSSynchronousPromise").maybeMakeSynchronousPromise([b.buffer])};a.__nop_name__="LSVoprfCreateNonce";g["default"]=a}),98);
__d("LSTaskSerializerAcsIssueNextSync",["LSBase64Encode.nop","LSGetCurrentTokenPoolState","LSIssueNextSync","LSVoprfBlind.nop","LSVoprfCreateNonce.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return c.db.table(310).fetch([[[a[0]]]]).next().then(function(a,e){var f=a.done;a=a.value;return f?(function(a){c.logger(a).mustfix(a)}("Request context for the passed task_id was not found"),f=[void 0,void 0,void 0],d[0]=f[0],d[1]=f[1],d[2]=f[2],f):(e=a.item,c.sequence([function(a){return d[9]=e.projectName,d[10]=e.maxClientTokenPoolSize,c.storedProcedure(b("LSGetCurrentTokenPoolState"),d[9]).then(function(a){return a=a,d[4]=a[0],d[5]=a[1],a})},function(a){return c.i64.eq(d[4],c.i64.cast([0,0]))||c.i64.eq(d[4],c.i64.cast([0,1]))?c.resolve((d[11]=new c.Map(),d[11].set("project_name",d[9]),d[12]=c.toJSON(d[11]),a=[d[12],c.i64.cast([0,351]),void 0],d[6]=a[0],d[7]=a[1],d[8]=a[2],a)):c.sequence([function(a){return d[11]=c.i64.of_float(Date.now()),c.islc(c.sortBy(c.filter(c.db.table(307).fetch(),function(a){return a.projectName===d[9]&&c.i64.gt(a.expirationTimestampMs,d[11])}),[["expirationTimestampMs","DESC"]]),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(e,f){var a=e.done;e=e.value;return a?(function(a){c.logger(a).mustfix(a)}("A config for the passed project name was not found"),d[16]=new c.Map(),d[16].set("project_name",d[9]),d[16].set("max_client_token_pool_size",d[10]),d[17]=c.toJSON(d[16]),a=[d[17],c.i64.cast([0,362]),void 0],d[12]=a[0],d[13]=a[1],d[14]=a[2],a):(f=e.item,c.sequence([function(a){return d[24]=f.configId,d[16]=f.maxEvals,d[26]=f.tokenPollFrequencyMs,d[25]=f.maxClientTokenPoolSize,d[17]=c.i64.sub(d[10],d[5]),d[23]=c.i64.lt(d[16],d[17])?d[16]:d[17],d[18]=c.createArray(),c.i64.gt(d[23],c.i64.cast([0,0]))?c.loopAsync(d[23],function(a){return d[27]=a,c.sequence([function(a){return c.nativeOperation(b("LSVoprfCreateNonce.nop")).then(function(a){return a=a,d[28]=a[0],a})},function(a){return c.blobs.neq(d[28],void 0)?c.sequence([function(a){return c.nativeOperation(b("LSVoprfBlind.nop"),d[28]).then(function(a){return a=a,d[29]=a[0],d[30]=a[1],a})},function(a){return c.blobs.neq(d[29],void 0)?c.blobs.neq(d[30],void 0)?c.sequence([function(a){return d[31]=c.i64.cast([-1,4294967295]),c.db.table(308).peekNextAutoIncrementId().then(function(a){return d[31]=a})},function(a){return c.db.table(308).add({tokenId:void 0,blindedNonce:d[29],blindingFactor:d[30],nonce:d[28],configId:d[24]})},function(a){return c.db.table(308).fetch([[[d[31]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[32]=c.i64.cast([-1,4294967295]):(e=b.item,d[32]=e.tokenId)})},function(a){return c.i64.eq(d[32],c.i64.cast([-1,4294967295]))?c.sequence([function(a){return c.islc(c.db.table(308).fetchDesc([[[{gt:c.i64.cast([0,0])}]]]),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(b,e){var a=b.done;b=b.value;return a?d[37]=c.i64.cast([-1,4294967295]):(e=b.item,d[37]=e.tokenId)})},function(a){return d[34]=d[37]}]):c.resolve(d[34]=d[32])},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[29]).then(function(a){return a=a,d[35]=a[0],a})},function(a){return d[36]=new c.Map(),d[36].set("id",d[34]),d[36].set("data",d[35]==null?"":d[35]),d[37]=(d[18].push(d[36]),d[18])}]):c.resolve():c.resolve()}]):c.resolve()}])}):c.resolve()},function(a){return d[19]=c.i64.of_int32(d[18].length),c.i64.gt(d[19],c.i64.cast([0,0]))?c.resolve((d[27]=new c.Map(),d[27].set("project_name",d[9]),d[27].set("config_id",d[24]),d[27].set("blinded_nonces",d[18]),d[28]=c.toJSON(d[27]),a=[d[28],c.i64.cast([0,354]),void 0],d[20]=a[0],d[21]=a[1],d[22]=a[2],a)):c.sequence([function(a){return c.i64.neq(d[26],void 0)?c.sequence([function(a){return c.i64.neq(d[25],void 0)?c.sequence([function(a){return function(a){c.logger(a).info(a)}(["Already have the max number of tokens. Scheduling next ACS token sync locally for project: ",d[9]].join("")),c.storedProcedure(b("LSIssueNextSync"),d[25],d[9],d[26],!1)},function(a){return a=[void 0,void 0,void 0],d[30]=a[0],d[31]=a[1],d[32]=a[2],a}]):c.resolve((function(a){c.logger(a).info(a)}(["token_poll_frequency is nonnull but max_client_token_pool_size is null. Already have the max number of tokens. Scheduling the next ACS token sync for project: ",d[9]].join("")),d[33]=new c.Map(),d[33].set("project_name",d[9]),d[33].set("max_client_token_pool_size",d[10]),d[34]=c.toJSON(d[33]),a=[d[34],c.i64.cast([0,362]),void 0],d[30]=a[0],d[31]=a[1],d[32]=a[2],a))},function(a){return a=[d[30],d[31],d[32]],d[27]=a[0],d[28]=a[1],d[29]=a[2],a}]):c.resolve((function(a){c.logger(a).info(a)}(["Already have the max number of tokens. Scheduling the next ACS token sync for project: ",d[9]].join("")),d[30]=new c.Map(),d[30].set("project_name",d[9]),d[30].set("max_client_token_pool_size",d[10]),d[31]=c.toJSON(d[30]),a=[d[31],c.i64.cast([0,362]),void 0],d[27]=a[0],d[28]=a[1],d[29]=a[2],a))},function(a){return a=[d[27],d[28],d[29]],d[20]=a[0],d[21]=a[1],d[22]=a[2],a}])},function(a){return a=[d[20],d[21],d[22]],d[12]=a[0],d[13]=a[1],d[14]=a[2],a}]))})},function(a){return a=[d[12],d[13],d[14]],d[6]=a[0],d[7]=a[1],d[8]=a[2],a}])},function(a){return a=[d[6],d[7],d[8]],d[0]=a[0],d[1]=a[1],d[2]=a[2],a}]))})},function(a){return a=[d[0],d[1],d[2]],e[0]=a[0],e[1]=a[1],e[2]=a[2],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSAnonymousCredentialsTaskSerializerAcsIssueNextSyncStoredProcedure";a.__tables__=["acs_request_context","secure_acs_configurations","secure_acs_blinded_tokens"];e.exports=a}),null);
__d("LSTaskSerializerDeleteChatHistory",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return b.db.table(32).fetch([[[a[0]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?(c[4]=b.createArray(),c[5]=(c[4].push("taskSerializerDeleteChatHistory: Task ID not found"),c[4]),c[6]=(c[4].push(a[0]),c[4]),c[7]=b.toJSON(c[4]),function(a){b.logger(a).mustfix(a)}(c[7]),f=[void 0,void 0,void 0],c[0]=f[0],c[1]=f[1],c[2]=f[2],f):(e=d.item,b.sequence([function(a){return c[8]=e.threadKey,b.db.table(9).fetch([[[c[8]]]]).next().then(function(a,d){d=a.done;a=a.value;return d?(c[9]=b.createArray(),c[10]=(c[9].push("taskSerializerDeleteChatHistory: Thread not found"),c[9]),c[11]=(c[9].push(c[8]),c[9]),c[12]=b.toJSON(c[9]),function(a){b.logger(a).mustfix(a)}(c[12]),d=[void 0,void 0,void 0],c[4]=d[0],c[5]=d[1],c[6]=d[2],d):(a.item,b.sequence([function(a){return b.db.table(9).fetch([[[c[8]]]]).next().then(function(d,e){var a=d.done;d=d.value;return a?c[9]=b.i64.cast([0,1]):(e=d.item,c[14]=e.syncGroup,b.i64.neq(c[14],void 0)?c[13]=c[14]:c[13]=b.i64.cast([0,1]),c[9]=c[13])})},function(a){return c[11]=new b.Map(),c[11].set("thread_key",c[8]),c[11].set("sync_group",c[9]),c[12]=b.toJSON(c[11]),a=[c[12],b.i64.cast([0,903]),void 0],c[4]=a[0],c[5]=a[1],c[6]=a[2],a}]))})},function(a){return a=[c[4],c[5],c[6]],c[0]=a[0],c[1]=a[1],c[2]=a[2],a}]))})},function(a){return a=[c[0],c[1],c[2]],d[0]=a[0],d[1]=a[1],d[2]=a[2],a}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxTaskSerializerDeleteChatHistoryStoredProcedure";a.__tables__=["threads_optimistic_context","threads"];e.exports=a}),null);
__d("LSTaskSerializerE2eeMessageIntegrityCheckV2",[],(function(a,b,c,d,e,f){function a(){var a,b=arguments,c=b[b.length-1],d=[];return a=[void 0,c.i64.cast([0,705]),void 0],d[0]=a[0],d[1]=a[1],d[2]=a[2],a,c.resolve(d)}a.__sproc_name__="LSEncryptedBackupsTaskSerializerE2eeMessageIntegrityCheckV2StoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSTaskSerializerE2eeMetadataThreadIntegrityCheck",[],(function(a,b,c,d,e,f){function a(){var a,b=arguments,c=b[b.length-1],d=[];return a=[void 0,c.i64.cast([0,700]),void 0],d[0]=a[0],d[1]=a[1],d[2]=a[2],a,c.resolve(d)}a.__sproc_name__="LSE2EEMessagingMetadataMailboxTaskSerializerE2eeMetadataThreadIntegrityCheckStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSTaskSerializerEncryptedBackupAction",[],(function(a,b,c,d,e,f){function a(){var a,b=arguments,c=b[b.length-1],d=[];return a=[void 0,c.i64.cast([0,319]),void 0],d[0]=a[0],d[1]=a[1],d[2]=a[2],a,c.resolve(d)}a.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupActionStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSTaskSerializerEncryptedBackupsLoopingUpload",["LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(a){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][taskSerializerEncryptedBackupsLoopingUpload] Beginning execution."),d[1]=c.i64.of_float(Date.now()),function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsTaskSerializerEncryptedBackupsLoopingUploadStoredProcedure] LSEncryptedBackupsLoopingUploadPayloadsTable table not found"),d[3]="LSEncryptedBackupsLoopingUploadPayloadsTable table not found",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsTaskSerializerEncryptedBackupsLoopingUploadStoredProcedure] ","",d[3]].join("")),d[2]=c.createArray(),void 0!==void 0?d[10]=(d[2].push(void 0),d[2]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsTaskSerializerEncryptedBackupsLoopingUploadStoredProcedure",d[3],d[2],c.i64.cast([0,3]))},function(a){return d[4]=c.i64.of_float(Date.now()),d[5]=c.i64.random(),d[7]="Finishing execution. Execution time: ",d[8]=c.i64.to_string(c.i64.sub(d[4],d[0])),d[9]=" ms",d[6]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][taskSerializerEncryptedBackupsLoopingUpload] ",d[6],d[7],d[6],d[8],d[6],d[9]].join("")),c.i64.eq(c.i64.mod_(d[5],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[10]=",",d[11]=c.createArray(),void 0!==void 0?d[12]=(d[11].push(void 0),d[11]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"taskSerializerEncryptedBackupsLoopingUpload",[d[7],d[10],d[8],d[10],d[9]].join(""),d[11],c.i64.cast([0,4]))):c.resolve()},function(a){return a=['{"request_id":"unknown","upload_type":"FBN","payload":{"error_code":2,"operation":"","error_message":"","__typename":"MPSUploadFailurePayload"}}',c.i64.cast([0,50043]),void 0],e[0]=a[0],e[1]=a[1],e[2]=a[2],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsLoopingUploadStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSQueryLocalPersistenceStoreForBackup.nop",["Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f){c=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableDescending(a.local_message_persistence_store).filter(function(a){var b=a.offlineThreadingId;a=a.threadId;return a===e&&f===b})));if(c.length===0)return(h||(h=b("Promise"))).resolve([void 0,void 0,!1]);a=c[0];return(h||(h=b("Promise"))).resolve([a.messagePayload,a.messageTimestampMs,!1])});function c(b,c,d,e){return a.apply(this,arguments)}return c}();a.__nop_name__="LSQueryLocalPersistenceStoreForBackup";g["default"]=a}),98);
__d("LSQueryLocalPersistenceStoreSupplementalForBackup.nop",["Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f,g){c=(yield d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.local_message_persistence_store_supplemental).filter(function(a){var b=a.supplementalKey,c=a.threadId;a=a.toplevelOfflineThreadingId;return c===e&&a===f&&b===g})));return c==null?(h||(h=b("Promise"))).resolve([void 0,void 0]):(h||(h=b("Promise"))).resolve([c.messagePayload,c.messageTimestampMs])});function c(b,c,d,e,f){return a.apply(this,arguments)}return c}();a.__nop_name__="LSQueryLocalPersistenceStoreSupplementalForBackup";g["default"]=a}),98);
__d("LSQueryLocalPersistenceStoreTagsForBackup.nop",["LSVec","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=":";a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){e=(yield d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.local_message_persistence_store_tag_index.index("offlineThreadingId")).getKeyRange(g,f)));if(e==null)return(h||(h=b("Promise"))).resolve([c("LSVec").ofArray([])]);a=e.tag;return(h||(h=b("Promise"))).resolve([c("LSVec").ofArray(a.split(i))])});function e(b,c,d,e){return a.apply(this,arguments)}return e}();a.__nop_name__="LSQueryLocalPersistenceStoreTagsForBackup";g["default"]=a}),98);
__d("LSLoadUnencryptedProtobufWithInputs",["LSBase64Encode.nop","LSGetBlobFromString.nop","LSLogMebClientEvent.nop","LSQueryLocalPersistenceStoreForBackup.nop","LSQueryLocalPersistenceStoreSupplementalForBackup.nop","LSQueryLocalPersistenceStoreTagsForBackup.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][loadUnencryptedProtobufWithInputs] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.i64.eq(a[0],c.i64.cast([0,1]))?c.sequence([function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreForBackup.nop"),a[1],a[2]).then(function(a){return a=a,d[10]=a[0],d[11]=a[1],d[12]=a[2],a})},function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreTagsForBackup.nop"),a[1],a[2]).then(function(a){return a=a,d[13]=a[0],a})},function(e){return c.blobs.neq(d[10],void 0)?c.sequence([function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[10]).then(function(a){return a=a,d[16]=a[0],a})},function(b){return d[16]!==void 0?(d[13]!==void 0?(d[21]=new c.Map(),d[21].set("message_tags",d[13]),d[22]=new c.Map(),d[26]="message_tags",d[23]=d[21].get(d[26]),d[23]?d[24]=!1:d[24]=!0,d[24]?0:d[22].set(d[26],d[23]),d[25]=c.toJSON(d[22]),d[19]=d[25]):d[19]=void 0,d[20]=new c.Map(),d[20].set("backup_action",a[0]),d[20].set("protobuf_encrypted",d[16]),d[20].set("supplemental_data_encrypted",void 0),d[20].set("timestamp_ms",a[4]),d[20].set("message_tags",d[19]),b=[d[20],void 0],d[17]=b[0],d[18]=b[1],b):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_FORMATTING_FAILED"),d[19]=new c.Map(),d[19].set("error_code",c.i64.cast([0,68])),d[19].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[19].set("error_message",""),b=[void 0,d[19]],d[17]=b[0],d[18]=b[1],b),b=[d[17],d[18]],d[14]=b[0],d[15]=b[1],b}]):c.resolve((d[12]?(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_ALREADY_DELETED"),d[18]=new c.Map(),d[18].set("error_code",c.i64.cast([0,70])),d[18].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[18].set("error_message",""),e=[void 0,d[18]],d[16]=e[0],d[17]=e[1],e):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_TOPLEVEL_TABLE"),d[18]=new c.Map(),d[18].set("error_code",c.i64.cast([0,63])),d[18].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[18].set("error_message",""),e=[void 0,d[18]],d[16]=e[0],d[17]=e[1],e),e=[d[16],d[17]],d[14]=e[0],d[15]=e[1],e))},function(a){return a=[d[14],d[15]],d[2]=a[0],d[3]=a[1],a}]):c.sequence([function(e){return c.i64.eq(a[0],c.i64.cast([0,2]))?c.sequence([function(e){return a[3]!==void 0?c.sequence([function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreSupplementalForBackup.nop"),a[1],a[2],a[3]).then(function(a){return a=a,d[14]=a[0],d[15]=a[1],a})},function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreTagsForBackup.nop"),a[1],a[2]).then(function(a){return a=a,d[16]=a[0],a})},function(e){return c.blobs.neq(d[14],void 0)?c.sequence([function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),a[3]).then(function(a){return a=a,d[19]=a[0],a})},function(e){return c.blobs.neq(d[19],void 0)?c.sequence([function(a){return d[22]=new c.Map(),d[22].set("sk_ciphertext",d[19]),d[22].set("sk_hash",d[19]),c.nativeOperation(b("LSBase64Encode.nop"),d[14]).then(function(a){return a=a,d[23]=a[0],a})},function(b){return d[23]!==void 0?(d[16]!==void 0?(d[28]=new c.Map(),d[28].set("message_tags",d[16]),d[29]=new c.Map(),d[33]="message_tags",d[30]=d[28].get(d[33]),d[30]?d[31]=!1:d[31]=!0,d[31]?0:d[29].set(d[33],d[30]),d[32]=c.toJSON(d[29]),d[26]=d[32]):d[26]=void 0,d[27]=new c.Map(),d[27].set("backup_action",a[0]),d[27].set("protobuf_encrypted",d[23]),d[27].set("supplemental_data_encrypted",d[22]),d[27].set("timestamp_ms",a[4]),d[27].set("message_tags",d[26]),b=[d[27],void 0],d[24]=b[0],d[25]=b[1],b):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_FORMATTING_FAILED"),d[26]=new c.Map(),d[26].set("error_code",c.i64.cast([0,68])),d[26].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[26].set("error_message",""),b=[void 0,d[26]],d[24]=b[0],d[25]=b[1],b),b=[d[24],d[25]],d[20]=b[0],d[21]=b[1],b}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error SUPPLEMENTAL_FORMATTING_FAILED"),d[22]=new c.Map(),d[22].set("error_code",c.i64.cast([0,69])),d[22].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[22].set("error_message",""),e=[void 0,d[22]],d[20]=e[0],d[21]=e[1],e))},function(a){return a=[d[20],d[21]],d[17]=a[0],d[18]=a[1],a}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_SUPPLEMENTAL_TABLE"),d[19]=new c.Map(),d[19].set("error_code",c.i64.cast([0,64])),d[19].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[19].set("error_message",""),e=[void 0,d[19]],d[17]=e[0],d[18]=e[1],e))},function(a){return a=[d[17],d[18]],d[12]=a[0],d[13]=a[1],a}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error SUPPLEMENTAL_KEY_NOT_SET_IN_CONTEXT_TABLE"),d[14]=new c.Map(),d[14].set("error_code",c.i64.cast([0,65])),d[14].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[14].set("error_message",""),e=[void 0,d[14]],d[12]=e[0],d[13]=e[1],e))},function(a){return a=[d[12],d[13]],d[10]=a[0],d[11]=a[1],a}]):c.resolve((c.i64.eq(a[0],c.i64.cast([0,3]))?(d[14]=new c.Map(),d[14].set("backup_action",a[0]),d[14].set("protobuf_encrypted",void 0),d[14].set("supplemental_data_encrypted",void 0),d[14].set("timestamp_ms",a[4]),d[14].set("message_tags",void 0),e=[d[14],void 0],d[12]=e[0],d[13]=e[1],e):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error INVALID_BACKUP_OPERATION"),d[14]=new c.Map(),d[14].set("error_code",c.i64.cast([-1,4294967289])),d[14].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[14].set("error_message",""),e=[void 0,d[14]],d[12]=e[0],d[13]=e[1],e),e=[d[12],d[13]],d[10]=e[0],d[11]=e[1],e))},function(a){return a=[d[10],d[11]],d[2]=a[0],d[3]=a[1],a}])},function(a){return d[4]=c.i64.of_float(Date.now()),d[5]=c.i64.random(),d[7]="Finishing execution. Execution time: ",d[8]=c.i64.to_string(c.i64.sub(d[4],d[0])),d[9]=" ms",d[6]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][loadUnencryptedProtobufWithInputs] ",d[6],d[7],d[6],d[8],d[6],d[9]].join("")),c.i64.eq(c.i64.mod_(d[5],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[10]=",",d[11]=c.createArray(),void 0!==void 0?d[12]=(d[11].push(void 0),d[11]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"loadUnencryptedProtobufWithInputs",[d[7],d[10],d[8],d[10],d[9]].join(""),d[11],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[2],d[3]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSLoadUnencryptedProtobufBackupSerializedPayloadData",["LSLoadUnencryptedProtobufWithInputs","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){var e;return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][loadUnencryptedProtobufBackupSerializedPayloadData] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[18]=c.i64.mul(d[1],c.i64.cast([0,1e6])),c.sequence([function(b){return c.db.table(2).fetch([[[a[0]]]]).next().then(function(b,e){var f=b.done;b=b.value;return f?(d[30]=c.i64.of_float(Date.now()),f=[a[0],void 0,void 0,void 0,void 0,c.i64.sub(c.i64.mul(d[30],c.i64.cast([0,1e6])),d[18]),void 0],d[22]=f[0],d[23]=f[1],d[24]=f[2],d[25]=f[3],d[26]=f[4],d[27]=f[5],d[28]=f[6],f):(e=b.item,d[30]=c.i64.of_float(Date.now()),f=[a[0],e.queueName,e.enqueueTimestampMs,e.priority,e.firstExecutedTimestampMs,c.i64.sub(c.i64.mul(d[30],c.i64.cast([0,1e6])),d[18]),void 0],d[22]=f[0],d[23]=f[1],d[24]=f[2],d[25]=f[3],d[26]=f[4],d[27]=f[5],d[28]=f[6],f)})},function(a){return a=[d[22],d[23],d[24],d[25],d[26],d[27],d[28]],d[2]=a[0],d[3]=a[1],d[4]=a[2],d[5]=a[3],d[6]=a[4],d[7]=a[5],d[8]=a[6],a}])},function(e){return d[9]=new c.Map(),d[9].set("task_id",d[2]),d[9].set("queue_name",d[3]),d[9].set("enqueue_timestamp_ms",d[4]),d[9].set("priority",d[5]),d[9].set("first_executed_timestamp_ms",d[6]),d[9].set("execution_time_ns",d[7]),d[9].set("echo_encoding_execution_time_ns",d[8]),d[10]=new c.Map(),d[10].set("task_metadata",d[9]),d[10].set("action_type",void 0),d[10].set("content_type",void 0),d[10].set("identifiers",void 0),d[10].set("identifiers_v2",void 0),d[10].set("task_creation_source",void 0),d[10].set("message_payload_source",c.i64.cast([0,2])),c.filter(c.db.table(305).fetch(),function(b){return c.i64.eq(b.pendingBackupTaskId,a[0])}).next().then(function(e,f){var g=e.done;e=e.value;return g?(d[22]=new c.Map(),d[22].set("error_code",c.i64.cast([0,5])),d[22].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufBackupSerializedPayloadDataStoredProcedure"),d[22].set("error_message",""),g=[void 0,d[22],d[10]],d[11]=g[0],d[12]=g[1],d[13]=g[2],g):(f=e.item,c.sequence([function(b){var e;return d[39]=f.actThreadId,d[40]=f.toplevelOfflineThreadingId,d[23]=f.messageTimestampMs,d[22]=new c.Map(),d[22].set("backup_id","openEbUploadGenericBackupId"),d[22].set("act_thread_id",d[39]),d[22].set("server_thread_id",d[39]),d[22].set("timestamp",c.i64.to_string(d[23])),d[22].set("otid",d[40]),d[24]=new c.Map(),d[24].set("backup_id","openEbUploadGenericBackupId"),d[24].set("act_thread_id",d[39]),d[24].set("timestamp",c.i64.to_string(d[23])),d[24].set("otid",d[40]),c.sequence([function(b){return c.db.table(2).fetch([[[a[0]]]]).next().then(function(e,f){var b=e.done;e=e.value;return b?(d[49]=c.i64.of_float(Date.now()),b=[a[0],void 0,void 0,void 0,void 0,c.i64.sub(c.i64.mul(d[49],c.i64.cast([0,1e6])),d[18]),void 0],d[41]=b[0],d[42]=b[1],d[43]=b[2],d[44]=b[3],d[45]=b[4],d[46]=b[5],d[47]=b[6],b):(f=e.item,d[49]=c.i64.of_float(Date.now()),b=[a[0],f.queueName,f.enqueueTimestampMs,f.priority,f.firstExecutedTimestampMs,c.i64.sub(c.i64.mul(d[49],c.i64.cast([0,1e6])),d[18]),void 0],d[41]=b[0],d[42]=b[1],d[43]=b[2],d[44]=b[3],d[45]=b[4],d[46]=b[5],d[47]=b[6],b)})},function(a){return a=[d[41],d[42],d[43],d[44],d[45],d[46],d[47]],d[25]=a[0],d[26]=a[1],d[27]=a[2],d[28]=a[3],d[29]=a[4],d[30]=a[5],d[31]=a[6],a}])},function(a){return d[32]=new c.Map(),d[32].set("task_id",d[25]),d[32].set("queue_name",d[26]),d[32].set("enqueue_timestamp_ms",d[27]),d[32].set("priority",d[28]),d[32].set("first_executed_timestamp_ms",d[29]),d[32].set("execution_time_ns",d[30]),d[32].set("echo_encoding_execution_time_ns",d[31]),d[33]=new c.Map(),d[33].set("task_metadata",d[32]),d[33].set("action_type",void 0),d[33].set("content_type",void 0),d[33].set("identifiers",void 0),d[33].set("identifiers_v2",d[24]),d[33].set("task_creation_source",void 0),d[33].set("message_payload_source",c.i64.cast([0,2])),c.storedProcedure(b("LSLoadUnencryptedProtobufWithInputs"),f.backupAction,d[39],d[40],f.supplementalKey,d[23],d[22]).then(function(a){return a=a,d[34]=a[0],d[35]=a[1],a})},function(a){return d[34]!==void 0?(d[41]=new c.Map(),d[41].set("unencrypted_protobuf_backup_payload",d[34]),d[41].set("message_identifiers",d[22]),d[41].set("attachment_backup_payload",f.attachmentPayload),d[41].set("sender_id",f.senderId),d[41].set("extra_data_for_eb_upload",void 0),a=[d[41],void 0,d[33]],d[36]=a[0],d[37]=a[1],d[38]=a[2],a):(a=[void 0,d[35],d[33]],d[36]=a[0],d[37]=a[1],d[38]=a[2],a),a=[d[36],d[37],d[38]],d[11]=a[0],d[12]=a[1],d[13]=a[2],a}]))})},function(a){return d[15]=c.i64.of_float(Date.now()),d[16]=c.i64.random(),d[19]="Finishing execution. Execution time: ",d[20]=c.i64.to_string(c.i64.sub(d[15],d[0])),d[21]=" ms",d[17]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][loadUnencryptedProtobufBackupSerializedPayloadData] ",d[17],d[19],d[17],d[20],d[17],d[21]].join("")),c.i64.eq(c.i64.mod_(d[16],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[22]=",",d[23]=c.createArray(),void 0!==void 0?d[24]=(d[23].push(void 0),d[23]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"loadUnencryptedProtobufBackupSerializedPayloadData",[d[19],d[22],d[20],d[22],d[21]].join(""),d[23],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[11],d[12],d[13]],e[0]=a[0],e[1]=a[1],e[2]=a[2],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsLoadUnencryptedProtobufBackupSerializedPayloadDataStoredProcedure";a.__tables__=["pending_tasks","pending_protobuf_backups_context"];e.exports=a}),null);
__d("LSTaskSerializerEncryptedBackupsOpenUpload",["LSArrayGetObjectAt","LSBase64Encode.nop","LSDeserializeFromJsonIntoDictionaryV2.nop","LSLoadUnencryptedProtobufBackupSerializedPayloadData","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][taskSerializerEncryptedBackupsOpenUpload] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSLoadUnencryptedProtobufBackupSerializedPayloadData"),a[0]).then(function(a){return a=a,d[2]=a[0],d[3]=a[1],d[4]=a[2],a})},function(a){return d[2]!==void 0?c.sequence([function(a){return d[15]=d[2].get("message_identifiers"),d[16]=d[2].get("unencrypted_protobuf_backup_payload"),d[17]=d[15].get("server_thread_id"),d[18]=d[15].get("timestamp"),d[19]=d[15].get("otid"),d[20]=d[15].get("act_thread_id"),d[21]=new c.Map(),d[21].set("server_thread_key",d[17]),d[21].set("timestamp",d[18]),d[21].set("otid",d[19]),d[21].set("wa_thread_id",c.i64.from_string(d[20])),d[22]=new c.Map(),d[22].set("message_identifiers",d[21]),d[23]=d[2].get("extra_data_for_eb_upload"),d[23]!==void 0?c.sequence([function(a){return c.nativeOperation(b("LSDeserializeFromJsonIntoDictionaryV2.nop"),d[23]).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[33]=new c.Map(),d[39]="ttd",d[34]=d[32].get(d[39]),d[34]?d[35]=!1:d[35]=!0,d[35]?c.resolve():c.sequence([function(a){return d[34]?d[42]=!1:d[42]=!0,d[42]?c.resolve(d[43]=void 0):c.sequence([function(a){return d[44]=new c.Map(),d[47]="message_tags",d[45]=d[34].get(d[47]),d[45]?d[46]=!1:d[46]=!0,d[46]?c.resolve():c.sequence([function(a){return d[48]=c.createArray(),d[49]=c.i64.of_int32(d[45].length),c.i64.gt(d[49],c.i64.cast([0,0]))?c.loopAsync(d[49],function(a){return d[50]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[45],d[50]).then(function(a){return a=a,d[51]=a[0],d[52]=a[1],a})},function(a){return d[53]=(d[48].push(d[51]),d[48])}])}):c.resolve()},function(a){return d[44].set(d[47],d[48])}])},function(a){return d[43]=d[44]}])},function(a){return d[33].set(d[39],d[43])}])},function(a){return d[40]="mt",d[36]=d[32].get(d[40]),d[36]?d[37]=!1:d[37]=!0,d[37]?c.resolve():c.sequence([function(a){return d[36]?d[42]=!1:d[42]=!0,d[42]?c.resolve(d[43]=void 0):c.sequence([function(a){return d[44]=new c.Map(),d[47]="message_tags",d[45]=d[36].get(d[47]),d[45]?d[46]=!1:d[46]=!0,d[46]?c.resolve():c.sequence([function(a){return d[48]=c.createArray(),d[49]=c.i64.of_int32(d[45].length),c.i64.gt(d[49],c.i64.cast([0,0]))?c.loopAsync(d[49],function(a){return d[50]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[45],d[50]).then(function(a){return a=a,d[51]=a[0],d[52]=a[1],a})},function(a){return d[53]=(d[48].push(d[51]),d[48])}])}):c.resolve()},function(a){return d[44].set(d[47],d[48])}])},function(a){return d[43]=d[44]}])},function(a){return d[33].set(d[40],d[43])}])},function(a){return d[41]="mooos",d[38]=d[32].get(d[41]),d[38]!==void 0?d[33].set(d[41],d[38]):0,d[24]=d[33]}]):c.resolve(d[24]=void 0)},function(a){return d[24]!==void 0?(d[32]=d[24].get("mt"),d[32]!==void 0?(d[34]=new c.Map(),d[38]="message_tags",d[35]=d[32].get(d[38]),d[35]?d[36]=!1:d[36]=!0,d[36]?0:d[34].set(d[38],d[35]),d[37]=c.toJSON(d[34]),d[33]=d[37]):d[33]=void 0,d[25]=d[33]):d[25]=void 0,d[26]=d[16].get("supplemental_data_encrypted"),d[26]!==void 0?c.sequence([function(a){return d[32]=d[16].get("protobuf_encrypted"),d[33]=d[16].get("backup_action"),d[34]=d[16].get("timestamp_ms"),d[35]=d[26].get("sk_ciphertext"),c.nativeOperation(b("LSBase64Encode.nop"),d[35]).then(function(a){return a=a,d[36]=a[0],a})},function(a){return d[37]=d[26].get("sk_hash"),c.nativeOperation(b("LSBase64Encode.nop"),d[37]).then(function(a){return a=a,d[38]=a[0],a})},function(a){return d[39]=new c.Map(),d[39].set("supplementary_data_key",void 0),d[39].set("encrypted_protobuf",d[32]),d[39].set("key_value_backup_action",d[33]),d[39].set("protobuf_ts_ms",d[34]),d[39].set("supplemental_key_ciphertext",d[36]),d[39].set("supplemental_key_hash",d[38]),d[39].set("message_tags",d[25]),d[27]=d[39]}]):c.resolve((d[32]=d[16].get("protobuf_encrypted"),d[33]=d[16].get("backup_action"),d[34]=d[16].get("timestamp_ms"),d[35]=new c.Map(),d[35].set("supplementary_data_key",void 0),d[35].set("encrypted_protobuf",d[32]),d[35].set("key_value_backup_action",d[33]),d[35].set("protobuf_ts_ms",d[34]),d[35].set("message_tags",d[25]),d[27]=d[35]))},function(a){return d[22].set("key_value_backup_unencrypted_payload",d[27]),d[28]=d[2].get("sender_id"),d[22].set("sender_id",d[28]),d[29]=d[2].get("attachment_backup_payload"),d[29]!==void 0?d[22].set("attachment_backup_payload",d[29]):0,d[24]!==void 0?(d[32]=d[24].get("ttd"),d[32]!==void 0?(d[34]=new c.Map(),d[38]="message_tags",d[35]=d[32].get(d[38]),d[35]?d[36]=!1:d[36]=!0,d[36]?0:d[34].set(d[38],d[35]),d[37]=c.toJSON(d[34]),d[33]=d[37]):d[33]=void 0,d[30]=d[33]):d[30]=void 0,d[30]!==void 0?d[22].set("tags_to_delete",d[30]):0,d[31]=c.toJSON(d[22]),a=[d[31],void 0,d[4]],d[5]=a[0],d[6]=a[1],d[7]=a[2],a}]):c.resolve((d[3]?d[15]=!1:d[15]=!0,d[15]?(a=[void 0,void 0,d[4]],d[16]=a[0],d[17]=a[1],d[18]=a[2],a):(a=[void 0,d[3],d[4]],d[16]=a[0],d[17]=a[1],d[18]=a[2],a),a=[d[16],d[17],d[18]],d[5]=a[0],d[6]=a[1],d[7]=a[2],a))},function(a){return d[15]=new c.Map(),d[16]=d[15].set("success",d[5]),d[17]=d[15].set("failure",d[6]),d[18]=d[15].set("context",d[7]),d[19]=c.toJSON(d[15]),d[8]=d[19],d[9]=c.i64.of_float(Date.now()),d[10]=c.i64.random(),d[12]="Finishing execution. Execution time: ",d[13]=c.i64.to_string(c.i64.sub(d[9],d[0])),d[14]=" ms",d[11]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][taskSerializerEncryptedBackupsOpenUpload] ",d[11],d[12],d[11],d[13],d[11],d[14]].join("")),c.i64.eq(c.i64.mod_(d[10],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[15]=",",d[16]=c.createArray(),void 0!==void 0?d[17]=(d[16].push(void 0),d[16]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"taskSerializerEncryptedBackupsOpenUpload",[d[12],d[15],d[13],d[15],d[14]].join(""),d[16],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[8],c.i64.cast([0,50048])],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsOpenUploadStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSTaskSerializerEncryptedBackupsRestoreWithSerializer",[],(function(a,b,c,d,e,f){function a(){var a,b=arguments,c=b[b.length-1],d=[];return a=[void 0,void 0,void 0],d[0]=a[0],d[1]=a[1],d[2]=a[2],a,c.resolve(d)}a.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsRestoreWithSerializerStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSDeriveValueSecretRefV2",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSGetBlobFromString.nop","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][deriveValueSecretRefV2] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[2]=a[2].get("message_payload_encryption_keys"),d[3]=d[2].get("encryption_version"),d[4]=d[2].get("epoch_anon_id"),d[5]=d[2].get("epoch_root_key"),d[6]=d[2].get("payload_key"),d[7]=c.createArray(),d[41]=(d[7].push(c.i64.cast([0,6])),d[7]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_anon_id_debug").then(function(a){return a=a,d[8]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[8],void 0,d[4],d[7]).then(function(a){return a=a,d[9]=a[0],a})},function(a){return d[9]?d[10]=!1:d[10]=!0,d[10]?c.resolve(d[11]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[9],c.i64.cast([0,0])).then(function(a){return a=a,d[41]=a[0],d[42]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[41]).then(function(a){return a=a,d[43]=a[0],a})},function(a){return d[11]=d[43]==null?"":d[43]}])},function(a){return d[12]=c.createArray(),d[41]=(d[12].push(c.i64.cast([0,6])),d[12]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_root_key_debug").then(function(a){return a=a,d[13]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[13],void 0,d[5],d[12]).then(function(a){return a=a,d[14]=a[0],a})},function(a){return d[14]?d[15]=!1:d[15]=!0,d[15]?c.resolve(d[16]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[14],c.i64.cast([0,0])).then(function(a){return a=a,d[41]=a[0],d[42]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[41]).then(function(a){return a=a,d[43]=a[0],a})},function(a){return d[16]=d[43]==null?"":d[43]}])},function(a){return d[17]=c.createArray(),d[41]=(d[17].push(c.i64.cast([0,6])),d[17]),c.nativeOperation(b("LSGetBlobFromString.nop"),"message_key_debug").then(function(a){return a=a,d[18]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[18],void 0,d[6],d[17]).then(function(a){return a=a,d[19]=a[0],a})},function(a){return d[19]?d[20]=!1:d[20]=!0,d[20]?c.resolve(d[21]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[19],c.i64.cast([0,0])).then(function(a){return a=a,d[41]=a[0],d[42]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[41]).then(function(a){return a=a,d[43]=a[0],a})},function(a){return d[21]=d[43]==null?"":d[43]}])},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[5]).then(function(a){return a=a,d[22]=a[0],a})},function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),[d[22]==null?"":d[22],a[0]].join("")).then(function(a){return a=a,d[23]=a[0],a})},function(a){return d[24]=c.createArray(),d[41]=(d[24].push(c.i64.cast([0,6])),d[24]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_root_key_thread_id_debug").then(function(a){return a=a,d[25]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[25],void 0,d[23],d[24]).then(function(a){return a=a,d[26]=a[0],a})},function(a){return d[26]?d[27]=!1:d[27]=!0,d[27]?c.resolve(d[28]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[26],c.i64.cast([0,0])).then(function(a){return a=a,d[41]=a[0],d[42]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[41]).then(function(a){return a=a,d[43]=a[0],a})},function(a){return d[28]=d[43]==null?"":d[43]}])},function(a){return d[29]=":",c.blobs.neq(d[5],void 0)?c.sequence([function(a){return d[41]=c.createArray(),d[47]=(d[41].push(c.i64.cast([0,18])),d[41]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("bWViL2RlYnVnL2ZpbmdlcnByaW50L01FQkVwb2NoUm9vdEtleQ=="),void 0,d[5],d[41]).then(function(a){return a=a,d[42]=a[0],a})},function(a){return d[42]!==void 0?c.sequence([function(a){return d[47]=c.i64.of_int32(d[42].length),c.i64.ge(d[47],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[42],c.i64.cast([0,0])).then(function(a){return a=a,d[49]=a[0],d[50]=a[1],a})},function(a){return d[48]=d[49]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[50]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBFingerprint] ","",d[50]].join("")),d[49]=c.createArray(),void 0!==void 0?d[51]=(d[49].push(void 0),d[49]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint",d[50],d[49],c.i64.cast([0,3]))},function(a){return d[48]=void 0}])},function(a){return d[43]=d[48]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[48]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBFingerprint] ","",d[48]].join("")),d[47]=c.createArray(),void 0!==void 0?d[49]=(d[47].push(void 0),d[47]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint",d[48],d[47],c.i64.cast([0,3]))},function(a){return d[43]=void 0}])},function(a){return c.blobs.neq(d[43],void 0)?d[44]=!0:d[44]=!1,d[44]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),c.nativeOperation(b("LSBase64Encode.nop"),d[43]).then(function(a){return a=a,d[45]=a[0],a})},function(a){return d[45]!==void 0?d[46]=d[45]:d[46]="encodingfailed",d[30]=d[46]}]):c.resolve(d[30]="null")},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[4]).then(function(a){return a=a,d[31]=a[0],a})},function(e){return d[32]=new c.Map(),d[32].set("encryption_version",d[3]),d[32].set("epoch_anon_id",d[31]==null?"":d[31]),d[32].set("message_encryption_values",[d[11],d[29],d[16],d[29],d[21],d[29],d[28]].join("")),d[32].set("root_key_fingerprint",d[30]),d[32].set("backup_id",a[1]),d[33]=c.toJSON(d[32]),d[34]=new c.Map(),d[34].set("value_secret_ref",d[33]),d[35]=c.i64.of_float(Date.now()),d[36]=c.i64.random(),d[38]="Finishing execution. Execution time: ",d[39]=c.i64.to_string(c.i64.sub(d[35],d[0])),d[40]=" ms",d[37]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][deriveValueSecretRefV2] ",d[37],d[38],d[37],d[39],d[37],d[40]].join("")),c.i64.eq(c.i64.mod_(d[36],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[41]=",",d[42]=c.createArray(),void 0!==void 0?d[43]=(d[42].push(void 0),d[42]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"deriveValueSecretRefV2",[d[38],d[41],d[39],d[41],d[40]].join(""),d[42],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[34],void 0],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsDeriveValueSecretRefV2StoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSBinaryToHex.nop",["LSResult","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,d,e){a=Array.from(new Uint8Array(e));d=a.map(function(a){return a.toString(16).padStart(2,"0")});e=d.join("").toUpperCase();return(h||(h=b("Promise"))).resolve(c("LSResult")(e))};a.__nop_name__="LSBinaryToHex";g["default"]=a}),98);
__d("LSGetBlobFromInt64BE.nop",["I64","LSResult","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(a,e,f){var g=new Uint8Array(8);g.reduceRight(function(a,b,c){b=(i||(i=d("I64"))).to_int32(i.mod_(a,i.of_string("256")));g[c]=b;return i.div(a,i.of_string("256"))},f);return(h||(h=b("Promise"))).resolve(c("LSResult")(g.buffer))};a.__nop_name__="LSGetBlobFromInt64BE";g["default"]=a}),98);
__d("PakeCpaceUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a.buffer.slice(a.byteOffset,a.byteLength+a.byteOffset)}function b(a,b){var c=new a.VectorInt();b.forEach(function(a){c.push_back(a)});return c}f.typedArrayToBuffer=a;f.uint8ArrayToVectorInt=b}),66);
__d("OcmfClientMap",["CryptoLogger","LSCryptoUtils","Promise","XPlatReactCrypto","gkx","requireDeferred","tweetnacl"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("ristretto255").__setRef("OcmfClientMap");a=function(a,e){e=c("gkx")("13930")?d("tweetnacl").hash(d("LSCryptoUtils").bufToUint8(e)):d("XPlatReactCrypto").subtleDigest("SHA-512",e);return(h||(h=b("Promise"))).all([e,i.load()]).then(function(b){var c=b[0];b=b[1];c=b.fromHash(new Uint8Array(c));b=b.scalarMult(new Uint8Array(a),c);return b.buffer})["catch"](function(a){d("CryptoLogger").captureError(d("CryptoLogger").CryptoLogger("ocmf_client_map"),a).mustfix("Failed OcmfClientMap.");throw a})};g["default"]=a}),98);
__d("LSOcmfClientMap.nop",["LSResult","OcmfClientMap"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,d,e){return c("OcmfClientMap")(d,e).then(function(a){return c("LSResult")(a)})};a.__nop_name__="LSOcmfClientMap";g["default"]=a}),98);
__d("UInt8Array",["XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.length;if(!(b>0&&b%2===0&&/^[\da-f]+$/gi.test(a)))return;var c=[];for(var d=0,b=b/2|0;d<b;++d){var e=parseInt(a.substring(d<<1,(d<<1)+2|0),16);c.push(e)}return new Uint8Array(c)}function b(a){return d("XPlatReactCrypto").getRandomValues(new Uint8Array(a)).buffer}function c(a){a=a.filter(function(a){return a.byteLength!==0});var b=a.reduce(function(a,b){return a+b.byteLength|0},0),c=new Uint8Array(b);a.reduce(function(a,b){c.set(b,a);return a+b.byteLength|0},0);return c}g.fromHexString=a;g.getBufferWithRandomValuesFromLength=b;g.concatBytes=c}),98);
__d("OrderPreservingEncryption",["FBLogger","LSCryptoUtils","LSSynchronousPromise","Promise","UInt8Array","WACryptoHkdfSync","XPlatReactCrypto","gkx","isPromise"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(){return d("XPlatReactCrypto").getRandomValues(new Uint8Array(32)).buffer}function j(a){var b=a.length;return b%2!==0?"0"+a:a}function k(a){a=BigInt(a);var b=j(a.toString(16));a=b.length;a=a/2;var c=[];for(var d=0;d<a;++d)c.push(d*2);return new Uint8Array(c.map(function(a){var c=a+2;return b.slice(a,c)}).map(function(a){return parseInt(a,16)}))}function l(a){a=a.map(function(a){return a._0});return{_0:d("UInt8Array").concatBytes(a)}}function m(a){return"OPE key has length "+String(a)+", expected  "+String(32)}function n(a,b,e){var f=new ArrayBuffer(0);if(c("gkx")("13860"))try{var g=d("WACryptoHkdfSync").hkdf(a,d("LSCryptoUtils").bufToUint8(f),d("LSCryptoUtils").bufToUint8(b.buffer),e);return d("LSSynchronousPromise").maybeMakeSynchronousPromise({_0:g})}catch(a){c("FBLogger")("labyrinth_web").mustfix("hkdf failed at OrderPreservingEncryption");throw a}return d("XPlatReactCrypto").subtleImportKey("raw",a.buffer,"HKDF",!1,["deriveKey","deriveBits"]).then(function(a){return d("XPlatReactCrypto").subtleDeriveBits({hash:"SHA-256",info:b.buffer,name:"HKDF",salt:f},a,e*8)}).then(function(a){return{_0:d("LSCryptoUtils").bufToUint8(a)}})}function o(a,b){return{_0:d("LSCryptoUtils").modAddBytes(a._0,b)}}function p(a,e,f,g){var j=f.byteLength;if(j!==32)throw c("FBLogger")("labyrinth_web").mustfixThrow(m(j));var k=g.byteLength,p=function(a,b){var c=new Uint8Array(1+k),d=new Uint8Array(k-b).fill(0);c.set([b]);c.set(a.subarray(0,b),1);c.set(d,b+1);return c};if(k>=255)throw c("FBLogger")("labyrinth_web").mustfixThrow("Input is too large");j=Array.from(g).map(function(b,c){c=p(g,c);var e=new Uint8Array(a);e[a-1]=b;b=d("LSCryptoUtils").bufToUint8(f);return n(b,c,a).then(function(a){return o(a,e)})}).map(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise);j=(i||(i=c("isPromise")))(j[0])?(h||(h=b("Promise"))).all(j):d("LSSynchronousPromise").maybeMakeSynchronousPromise(j);return j.then(function(a){return d("UInt8Array").concatBytes([new Uint8Array([e]),l(a)._0])})}function e(a,b,c,d){d=k(d);return p(a,b,c,d)}g.keyGen=a;g.intStringToBEBytes=k;g.buildKeyLengthErrorMsg=m;g.encryptBigEndianBytes=p;g.encryptIntString=e}),98);
__d("LSOpeEncrypt.nop",["CryptoLogger","I64","LSResult","OrderPreservingEncryption"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,b,e,f,g){var i=d("CryptoLogger").CryptoLogger("ope_encrypt");return d("OrderPreservingEncryption").encryptBigEndianBytes((h||(h=d("I64"))).to_int32(g),1,e,new Uint8Array(f)).then(function(a){return c("LSResult")(a.buffer)},function(a){d("CryptoLogger").captureError(i,a).mustfix("OpeEncrypt_impl failed");throw a})};a.__nop_name__="LSOpeEncrypt";g["default"]=a}),98);
__d("LSTruncateSortKey.nop",["CryptoLogger","LSResult","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("CryptoLogger").CryptoLogger("truncate_sort_key");a=function(a,d,e){if(e.byteLength!==8)throw i.mustfixThrow("Bad length on sort key for truncation");a=new Uint8Array(e);d=a.subarray(0,2);if(d.some(function(a){return a!==0}))throw i.mustfixThrow("Bad prefix on sort key for truncation");return(h||(h=b("Promise"))).resolve(c("LSResult")(e.slice(2)))};a.__nop_name__="LSTruncateSortKey";g["default"]=a}),98);
__d("LSEncryptIdentifiersV2",["LSBase64Encode.nop","LSBinaryToHex.nop","LSGetBlobFromInt64BE.nop","LSGetBlobFromString.nop","LSHmac_v2.nop","LSLogMebClientEvent.nop","LSOcmfClientMap.nop","LSOpeEncrypt.nop","LSTruncateSortKey.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][encryptIdentifiersV2] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[2]=a[6].get("ocmf_shared_key"),c.nativeOperation(b("LSGetBlobFromString.nop"),a[2]).then(function(a){return a=a,d[3]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("bWFpbGJveF9pZF9zY29wZQ=="),d[3]).then(function(a){return a=a,d[4]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[2],d[4]).then(function(a){return a=a,d[5]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[5]).then(function(a){return a=a,d[6]=a[0],a})},function(e){return c.i64.eq(a[0],c.i64.cast([0,2]))&&c.i64.eq(a[1],c.i64.cast([0,2]))?d[7]=a[5]:d[7]=a[3],d[8]=a[6].get("ocmf_shared_key"),c.nativeOperation(b("LSGetBlobFromString.nop"),d[7]).then(function(a){return a=a,d[9]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("dGhyZWFkX2lkX3Njb3Bl"),d[9]).then(function(a){return a=a,d[10]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[8],d[10]).then(function(a){return a=a,d[11]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[11]).then(function(a){return a=a,d[12]=a[0],a})},function(e){return d[13]=a[6].get("ope_key"),c.nativeOperation(b("LSGetBlobFromInt64BE.nop"),a[4]).then(function(a){return a=a,d[14]=a[0],a})},function(a){return c.nativeOperation(b("LSTruncateSortKey.nop"),d[14]).then(function(a){return a=a,d[15]=a[0],a})},function(a){return c.nativeOperation(b("LSOpeEncrypt.nop"),d[13],d[15],c.i64.cast([0,16])).then(function(a){return a=a,d[16]=a[0],a})},function(a){return c.nativeOperation(b("LSBinaryToHex.nop"),d[16]).then(function(a){return a=a,d[17]=a[0],a})},function(e){return d[18]=a[6].get("ocmf_shared_key"),c.nativeOperation(b("LSGetBlobFromString.nop"),a[5]).then(function(a){return a=a,d[19]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("bWVzc2FnZV9pZF9zY29wZQ=="),d[19]).then(function(a){return a=a,d[20]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[18],d[20]).then(function(a){return a=a,d[21]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[21]).then(function(a){return a=a,d[22]=a[0],a})},function(a){return d[23]=new c.Map(),d[23].set("backup_id_ocmf_partial",d[6]==null?"":d[6]),d[23].set("act_thread_id_ocmf_partial",d[12]==null?"":d[12]),d[23].set("timestamp_encrypted",d[17]==null?"":d[17]),d[23].set("otid_ocmf_partial",d[22]==null?"":d[22]),d[24]=c.i64.of_float(Date.now()),d[25]=c.i64.random(),d[27]="Finishing execution. Execution time: ",d[28]=c.i64.to_string(c.i64.sub(d[24],d[0])),d[29]=" ms",d[26]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][encryptIdentifiersV2] ",d[26],d[27],d[26],d[28],d[26],d[29]].join("")),c.i64.eq(c.i64.mod_(d[25],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[30]=",",d[31]=c.createArray(),void 0!==void 0?d[32]=(d[31].push(void 0),d[31]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"encryptIdentifiersV2",[d[27],d[30],d[28],d[30],d[29]].join(""),d[31],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[23],void 0],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsEncryptIdentifiersV2StoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("SymmetricEncryptionCreateEncryptedData",["CryptoLogger","EncryptedBackupsSymmetricEncryptionUtils","HChaCha20","Promise","RetUtil","SymmetricEncryptionPaddingUtils","XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,c,e){var f=d("CryptoLogger").CryptoLogger("symmetric_encryption_create_encrypted_data"),g=d("SymmetricEncryptionPaddingUtils").padData(e),i=d("XPlatReactCrypto").getRandomValues(new Uint8Array(d("EncryptedBackupsSymmetricEncryptionUtils").totalNonceLengthInBytes));e=new(d("HChaCha20").HChaCha20)();e=e.hChaCha20Bytes(i.slice(0,d("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes).buffer,a);return d("XPlatReactCrypto").subtleImportKey("raw",e,"AES-GCM",!1,["encrypt"]).then(function(a){return d("XPlatReactCrypto").subtleEncrypt({additionalData:c,iv:new Uint8Array(i.slice(d("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes).buffer),name:"AES-GCM",tagLength:d("EncryptedBackupsSymmetricEncryptionUtils").aesGcmTagLength},a,g)}).then(function(a){var c=i.byteLength+a.byteLength;c=new Uint8Array(c);c.set(i);c.set(new Uint8Array(a),d("EncryptedBackupsSymmetricEncryptionUtils").totalNonceLengthInBytes);return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult(c.buffer))})["catch"](function(a){d("CryptoLogger").captureError(f,a).mustfix("symmetric data encryption failed");return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult())})};g["default"]=a}),98);
__d("WAErrorMessage",[],(function(a,b,c,d,e,f){"use strict";var g="NoErrorMessageProvided";function a(a){if(typeof a==="string")return a;if(a instanceof Error)return a.toString();if(typeof a==="object")if(typeof (a==null?void 0:a.description)==="string")return a.description;else if(typeof (a==null?void 0:a.message)==="string")return a.message;return g}f.NO_ERROR_MESSAGE_PROVIDED=g;f.maybeGetMessageFromError=a}),66);
__d("LSSymmetricEncryptionCreateEncryptedData.nop",["EBEncryptMessageTypes","LSSymmetricEncryptionCreateDecryptedData.nop","MWEBODSEntityName.enum","MWFBLogger","ODS","Promise","QPLUserFlow","Random","SymmetricEncryptionCreateEncryptedData","WAArrayBufferUtils","WAErrorMessage","WAGetSafeQPLError","WAResultOrError","asyncToGeneratorRuntime","cr:20303","getErrorSafe","promiseDone","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["MISMATCH - Decrypted content is not equal"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["MISMATCH - Either JS Decrypted or Rust Decrypted is null"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["MISMATCH - ciphertextFromJS is null"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["MISMATCH - ciphertextFromWasm failed with error: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["'EB symmetric encryption comparison failed with error: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["EB symmetric encryption in JS failed with error: ",""]);o=function(){return a};return a}var p=c("qpl")._(521471468,"2968"),q=d("MWFBLogger").MWLogger.tags(["LSEncryption"]);function r(a,b,e){var f=d("Random").uint32();c("QPLUserFlow").start(p,{annotations:{string:{implementation:"js",native_op_name:"LSSymmetricEncryptionCreateEncryptedData"}},instanceKey:f});return c("SymmetricEncryptionCreateEncryptedData")(a,b,e).then(function(a){c("QPLUserFlow").endSuccess(p,{instanceKey:f});return d("WAResultOrError").makeResult(a[0])})["catch"](function(a){var b=c("getErrorSafe")(a);c("QPLUserFlow").endFailure(p,"runtime-exception",{annotations:{string:{error:d("WAGetSafeQPLError").getSafeQPLErrorMessage(a)}},instanceKey:f});return d("WAResultOrError").makeError({error:b,type:"runtime-exception"})})}function s(a,e,f){if(b("cr:20303")==null)return(i||(i=b("Promise"))).resolve(d("WAResultOrError").makeError("skipped"));var g=d("Random").uint32();c("QPLUserFlow").start(p,{annotations:{string:{implementation:"rust",native_op_name:"LSSymmetricEncryptionCreateEncryptedData"}},instanceKey:g});return b("cr:20303").encryptMessage(d("EBEncryptMessageTypes").unsafeCastToSecretKey(a),d("EBEncryptMessageTypes").unsafeCastToAAD(e),d("EBEncryptMessageTypes").unsafeCastToPlaintext(f)).then(function(a){a.success===!1?c("QPLUserFlow").endFailure(p,a.error,{instanceKey:g}):c("QPLUserFlow").endSuccess(p,{instanceKey:g});return a})["catch"](function(a){c("QPLUserFlow").endFailure(p,"runtime-exception",{annotations:{string:{error:d("WAGetSafeQPLError").getSafeQPLErrorMessage(a)}},instanceKey:g});return d("WAResultOrError").makeError("runtime-exception")})}a=function(a,b,d,e,f){return r(d,e,f).then(function(g){if(g.success===!1){q.MUSTFIX(o(),String(g.error));return[void 0]}c("promiseDone")(t(d,e,f,g,a,b));return[g.value]})};function t(a,b,c,d,e,f){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f,g){c=(yield s(a,b,c));try{yield v(f,g,a,b,e,c)}catch(a){q.MUSTFIX(n(),d("WAErrorMessage").maybeGetMessageFromError(a))}});return u.apply(this,arguments)}function v(a,b,c,d,e,f){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,i){if(i.success===!1&&i.error==="skipped")return;if(i.success===!1){(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").EB_SYMMETRIC_ENCRYPTION_JS_RUST_SHADOW_TEST,"mismatch");q.MUSTFIX(m(),i.error);return}g=g.value;i=i.value;if(g==null){(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").EB_SYMMETRIC_ENCRYPTION_JS_RUST_SHADOW_TEST,"mismatch");q.MUSTFIX(l());return}g=(yield c("LSSymmetricEncryptionCreateDecryptedData.nop")(a,b,e,f,g));a=(yield c("LSSymmetricEncryptionCreateDecryptedData.nop")(a,b,e,f,i));b=g[0];e=a[0];if(b==null||e==null){(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").EB_SYMMETRIC_ENCRYPTION_JS_RUST_SHADOW_TEST,"mismatch");q.MUSTFIX(k());return}if(d("WAArrayBufferUtils").arrayBuffersEqualUNSAFE(b,e)===!1){(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").EB_SYMMETRIC_ENCRYPTION_JS_RUST_SHADOW_TEST,"mismatch");q.MUSTFIX(j());return}(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").EB_SYMMETRIC_ENCRYPTION_JS_RUST_SHADOW_TEST,"match")});return w.apply(this,arguments)}a.__nop_name__="LSSymmetricEncryptionCreateEncryptedData";g["default"]=a}),98);
__d("LSSymmetricEncryptionCreateEncryptedString.nop",["Base64Utils","CryptoLogger","LSCryptoUtils","LSSymmetricEncryptionCreateEncryptedData.nop","Promise","RetUtil"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,e,f,g,i){var j=d("CryptoLogger").CryptoLogger("symmetric_encryption_create_encrypted_string");return c("LSSymmetricEncryptionCreateEncryptedData.nop")(a,e,f,g,d("LSCryptoUtils").strToBuf(i)).then(function(a){return a[0]}).then(function(a){return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult(a?d("Base64Utils").fromArrayBuffer(a):void 0))})["catch"](function(a){d("CryptoLogger").captureError(j,a).mustfix("symmetric string encryption failed");return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult())})};a.__nop_name__="LSSymmetricEncryptionCreateEncryptedString";g["default"]=a}),98);
__d("LSEncryptMessagePayloadV2",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSGetBlobFromString.nop","LSLogMebClientEvent.nop","LSSymmetricEncryptionCreateEncryptedString.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][encryptMessagePayloadV2] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[2]=a[2].get("message_payload_encryption_keys"),d[3]=d[2].get("payload_key"),c.nativeOperation(b("LSSymmetricEncryptionCreateEncryptedString.nop"),d[3],c.blobs.of_string(["message_thread","_",a[1]].join("")),a[3]).then(function(a){return a=a,d[4]=a[0],a})},function(e){return d[4]!==void 0?c.sequence([function(a){return d[13]=d[2].get("encryption_version"),d[14]=d[2].get("epoch_anon_id"),d[15]=d[2].get("epoch_root_key"),d[16]=d[2].get("payload_key"),d[17]=c.createArray(),d[45]=(d[17].push(c.i64.cast([0,6])),d[17]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_anon_id_debug").then(function(a){return a=a,d[18]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[18],void 0,d[14],d[17]).then(function(a){return a=a,d[19]=a[0],a})},function(a){return d[19]?d[20]=!1:d[20]=!0,d[20]?c.resolve(d[21]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[19],c.i64.cast([0,0])).then(function(a){return a=a,d[45]=a[0],d[46]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[45]).then(function(a){return a=a,d[47]=a[0],a})},function(a){return d[21]=d[47]==null?"":d[47]}])},function(a){return d[22]=c.createArray(),d[45]=(d[22].push(c.i64.cast([0,6])),d[22]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_root_key_debug").then(function(a){return a=a,d[23]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[23],void 0,d[15],d[22]).then(function(a){return a=a,d[24]=a[0],a})},function(a){return d[24]?d[25]=!1:d[25]=!0,d[25]?c.resolve(d[26]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[24],c.i64.cast([0,0])).then(function(a){return a=a,d[45]=a[0],d[46]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[45]).then(function(a){return a=a,d[47]=a[0],a})},function(a){return d[26]=d[47]==null?"":d[47]}])},function(a){return d[27]=c.createArray(),d[45]=(d[27].push(c.i64.cast([0,6])),d[27]),c.nativeOperation(b("LSGetBlobFromString.nop"),"message_key_debug").then(function(a){return a=a,d[28]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[28],void 0,d[16],d[27]).then(function(a){return a=a,d[29]=a[0],a})},function(a){return d[29]?d[30]=!1:d[30]=!0,d[30]?c.resolve(d[31]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[29],c.i64.cast([0,0])).then(function(a){return a=a,d[45]=a[0],d[46]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[45]).then(function(a){return a=a,d[47]=a[0],a})},function(a){return d[31]=d[47]==null?"":d[47]}])},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[15]).then(function(a){return a=a,d[32]=a[0],a})},function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),[d[32]==null?"":d[32],a[1]].join("")).then(function(a){return a=a,d[33]=a[0],a})},function(a){return d[34]=c.createArray(),d[45]=(d[34].push(c.i64.cast([0,6])),d[34]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_root_key_thread_id_debug").then(function(a){return a=a,d[35]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[35],void 0,d[33],d[34]).then(function(a){return a=a,d[36]=a[0],a})},function(a){return d[36]?d[37]=!1:d[37]=!0,d[37]?c.resolve(d[38]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[36],c.i64.cast([0,0])).then(function(a){return a=a,d[45]=a[0],d[46]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[45]).then(function(a){return a=a,d[47]=a[0],a})},function(a){return d[38]=d[47]==null?"":d[47]}])},function(a){return d[39]=":",c.blobs.neq(d[15],void 0)?c.sequence([function(a){return d[45]=c.createArray(),d[51]=(d[45].push(c.i64.cast([0,18])),d[45]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("bWViL2RlYnVnL2ZpbmdlcnByaW50L01FQkVwb2NoUm9vdEtleQ=="),void 0,d[15],d[45]).then(function(a){return a=a,d[46]=a[0],a})},function(a){return d[46]!==void 0?c.sequence([function(a){return d[51]=c.i64.of_int32(d[46].length),c.i64.ge(d[51],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[46],c.i64.cast([0,0])).then(function(a){return a=a,d[53]=a[0],d[54]=a[1],a})},function(a){return d[52]=d[53]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[54]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBFingerprint] ","",d[54]].join("")),d[53]=c.createArray(),void 0!==void 0?d[55]=(d[53].push(void 0),d[53]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint",d[54],d[53],c.i64.cast([0,3]))},function(a){return d[52]=void 0}])},function(a){return d[47]=d[52]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[52]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBFingerprint] ","",d[52]].join("")),d[51]=c.createArray(),void 0!==void 0?d[53]=(d[51].push(void 0),d[51]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint",d[52],d[51],c.i64.cast([0,3]))},function(a){return d[47]=void 0}])},function(a){return c.blobs.neq(d[47],void 0)?d[48]=!0:d[48]=!1,d[48]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),c.nativeOperation(b("LSBase64Encode.nop"),d[47]).then(function(a){return a=a,d[49]=a[0],a})},function(a){return d[49]!==void 0?d[50]=d[49]:d[50]="encodingfailed",d[40]=d[50]}]):c.resolve(d[40]="null")},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[14]).then(function(a){return a=a,d[41]=a[0],a})},function(b){return d[42]=new c.Map(),d[42].set("encryption_version",d[13]),d[42].set("epoch_anon_id",d[41]==null?"":d[41]),d[42].set("message_encryption_values",[d[21],d[39],d[26],d[39],d[31],d[39],d[38]].join("")),d[42].set("root_key_fingerprint",d[40]),d[42].set("backup_id",a[0]),d[43]=c.toJSON(d[42]),d[44]=new c.Map(),d[44].set("encrypted_message_payload",d[4]),d[44].set("value_secret_ref",d[43]),b=[d[44],void 0],d[5]=b[0],d[6]=b[1],b}]):c.resolve((d[13]=new c.Map(),d[13].set("error_code",c.i64.cast([0,40])),d[13].set("stored_procedure","LSEncryptedBackupsEncryptMessagePayloadV2StoredProcedure"),d[13].set("error_message",""),e=[void 0,d[13]],d[5]=e[0],d[6]=e[1],e))},function(a){return d[7]=c.i64.of_float(Date.now()),d[8]=c.i64.random(),d[10]="Finishing execution. Execution time: ",d[11]=c.i64.to_string(c.i64.sub(d[7],d[0])),d[12]=" ms",d[9]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][encryptMessagePayloadV2] ",d[9],d[10],d[9],d[11],d[9],d[12]].join("")),c.i64.eq(c.i64.mod_(d[8],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[13]=",",d[14]=c.createArray(),void 0!==void 0?d[15]=(d[14].push(void 0),d[14]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"encryptMessagePayloadV2",[d[10],d[13],d[11],d[13],d[12]].join(""),d[14],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[5],d[6]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsEncryptMessagePayloadV2StoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSGetLatestEpochKeys",["LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][getLatestEpochKeys] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[2]="",d[3]=void 0,d[4]=void 0,d[5]=void 0,a[0]?c.resolve(0):(d[15]=void 0,c.i64.neq(d[15],void 0)?c.sequence([function(a){return c.count(c.db.table(169).fetch([[[d[15]]]])).then(function(a){return d[16]=a})},function(a){return c.i64.le(d[16],c.i64.cast([0,1]))?c.sequence([function(a){return c.db.table(169).fetch([[[d[15]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[26]=new c.Map(),d[26].set("error_msg","Expected a nonempty query result"),d[26].set("code",c.i64.cast([0,3])),d[26].set("src_line","MEBEpochClientUtils.php:313 MEBEpochClientUtils::requireEpochReturnShapeFromPersistentEpochsTableDirectly()"),d[27]=c.createArray(),d[28]=(d[27].push(d[26]),d[27]),e=[void 0,d[27]],d[22]=e[0],d[23]=e[1],e):(b=a.item,d[26]=new c.Map(),d[26].set("epoch_id",b.epochId),d[26].set("backup_id",b.backupId),d[26].set("epoch_anon_id_blob",b.epochAnonIdBlob),d[26].set("epoch_root_key_blob",b.epochRootKeyBlob),d[26].set("epoch_status",b.epochStatus),d[26].set("epoch_head",b.epochHead),d[26].set("authority_level",b.authorityLevel),e=[d[26],void 0],d[22]=e[0],d[23]=e[1],e)})},function(a){return d[25]=new c.Map(),d[25].set("value",d[22]),d[25].set("errors",d[23]),d[17]=d[25]}]):c.resolve((d[22]=new c.Map(),d[22].set("error_msg","Expected at most one result"),d[22].set("code",c.i64.cast([0,4])),d[22].set("src_line","MEBEpochClientUtils.php:313 MEBEpochClientUtils::requireEpochReturnShapeFromPersistentEpochsTableDirectly()"),d[23]=c.createArray(),d[25]=(d[23].push(d[22]),d[23]),d[24]=new c.Map(),d[24].set("value",void 0),d[24].set("errors",d[23]),d[17]=d[24]))},function(a){return d[18]=d[17].get("value"),d[18]!==void 0?(d[22]=d[18].get("epoch_id"),d[23]=d[18].get("backup_id"),d[24]=d[18].get("epoch_anon_id_blob"),d[25]=d[18].get("epoch_root_key_blob"),d[26]=d[18].get("epoch_status"),d[27]=d[18].get("epoch_head"),d[28]=d[18].get("authority_level"),d[29]=d[17],d[19]=d[29]):(d[22]=d[17].get("errors"),d[23]=d[17].get("errors"),d[24]=new c.Map(),d[24].set("value",void 0),d[24].set("errors",d[22]),d[19]=d[24]),d[20]=d[19].get("value"),d[20]!==void 0?(d[22]=d[20].get("epoch_id"),d[23]=d[20].get("backup_id"),d[24]=d[20].get("epoch_anon_id_blob"),d[25]=d[20].get("epoch_root_key_blob"),d[26]=d[20].get("epoch_status"),d[27]=d[20].get("epoch_head"),d[28]=d[20].get("authority_level"),d[2]=c.blobs.to_string(d[24]),d[3]=d[22],d[4]=d[25],c.blobs.neq(d[27],void 0)?d[5]=d[27]:0,d[21]=!0):(d[22]=d[19].get("errors"),d[23]=d[19].get("errors"),d[21]=!1)}]):c.resolve())},function(b){return c.i64.neq(d[3],void 0)?c.resolve(0):c.sequence([function(b){return d[15]=void 0,d[16]="",d[17]=void 0,d[18]=void 0,c.forEach(c.filter(c.db.table(169).fetch(),function(b){return a[0]||c.i64.eq(b.authorityLevel,c.i64.cast([0,80]))}),function(a){a=a.item;return d[20]=c.blobs.to_string(a.epochAnonIdBlob),c.i64.eq([0,d[20].length],[0,d[16].length])?d[19]=d[20]>d[16]:d[19]=c.i64.gt([0,d[20].length],[0,d[16].length]),d[19]?(d[15]=a.epochId,d[16]=d[20],d[17]=a.epochRootKeyBlob,d[18]=a.epochHead):0})},function(a){return c.i64.neq(d[15],void 0)?(d[2]=d[16],d[3]=d[15],d[4]=d[17],c.blobs.neq(d[18],void 0)?d[5]=d[18]:0,d[19]=c.i64.of_float(Date.now()),0):0}])},function(a){return d[11]=c.blobs.of_string(d[2]),c.i64.neq(d[3],void 0)?(c.blobs.neq(d[11],void 0)?(c.blobs.neq(d[4],void 0)?(d[19]=new c.Map(),d[19].set("epoch_id",d[3]),d[19].set("epoch_root_key",d[4]),d[19].set("epoch_anon_id",d[11]),d[19].set("epoch_head",d[5]),d[20]=new c.Map(),d[20].set("epoch_keys",d[19]),a=[d[20],void 0],d[17]=a[0],d[18]=a[1],a):(d[19]=new c.Map(),d[19].set("error_code",c.i64.cast([0,402])),d[19].set("error_message","failed to query latest epoch"),d[19].set("stored_procedure","LSEncryptedBackupsGetLatestEpochKeysStoredProcedure"),a=[void 0,d[19]],d[17]=a[0],d[18]=a[1],a),a=[d[17],d[18]],d[15]=a[0],d[16]=a[1],a):(d[17]=new c.Map(),d[17].set("error_code",c.i64.cast([0,403])),d[17].set("error_message","failed to query latest epoch"),d[17].set("stored_procedure","LSEncryptedBackupsGetLatestEpochKeysStoredProcedure"),a=[void 0,d[17]],d[15]=a[0],d[16]=a[1],a),a=[d[15],d[16]],d[6]=a[0],d[7]=a[1],a):(d[15]=new c.Map(),d[15].set("error_code",c.i64.cast([0,400])),d[15].set("error_message","failed to query latest epoch"),d[15].set("stored_procedure","LSEncryptedBackupsGetLatestEpochKeysStoredProcedure"),a=[void 0,d[15]],d[6]=a[0],d[7]=a[1],a),d[8]=c.i64.of_float(Date.now()),d[9]=c.i64.random(),d[12]="Finishing execution. Execution time: ",d[13]=c.i64.to_string(c.i64.sub(d[8],d[0])),d[14]=" ms",d[10]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][getLatestEpochKeys] ",d[10],d[12],d[10],d[13],d[10],d[14]].join("")),c.i64.eq(c.i64.mod_(d[9],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[15]=",",d[16]=c.createArray(),void 0!==void 0?d[17]=(d[16].push(void 0),d[16]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"getLatestEpochKeys",[d[12],d[15],d[13],d[15],d[14]].join(""),d[16],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[6],d[7]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsGetLatestEpochKeysStoredProcedure";a.__tables__=["secure_encrypted_backups_epochs"];e.exports=a}),null);
__d("LSLoadAndEncryptProtobufWithInputsV2",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSGetBlobFromString.nop","LSHmac_v2.nop","LSLogMebClientEvent.nop","LSQueryLocalPersistenceStoreForBackup.nop","LSQueryLocalPersistenceStoreSupplementalForBackup.nop","LSQueryLocalPersistenceStoreTagsForBackup.nop","LSSymmetricEncryptionCreateEncryptedData.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][loadAndEncryptProtobufWithInputsV2] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.i64.eq(a[0],c.i64.cast([0,1]))?c.sequence([function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreForBackup.nop"),a[1],a[2]).then(function(a){return a=a,d[10]=a[0],d[11]=a[1],d[12]=a[2],a})},function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreTagsForBackup.nop"),a[1],a[2]).then(function(a){return a=a,d[13]=a[0],a})},function(e){return d[14]=new c.Map(),d[14].set("message_tags",d[13]),d[15]=new c.Map(),d[15].set("mt",d[14]),c.blobs.neq(d[10],void 0)?c.sequence([function(e){return d[18]=a[5].get("message_payload_encryption_keys"),d[19]=d[18].get("payload_key"),c.nativeOperation(b("LSSymmetricEncryptionCreateEncryptedData.nop"),d[19],c.blobs.of_string(["message_thread","_",a[1]].join("")),d[10]).then(function(a){return a=a,d[20]=a[0],a})},function(a){return c.blobs.neq(d[20],void 0)?c.sequence([function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[20]).then(function(a){return a=a,d[24]=a[0],a})},function(a){return d[21]=d[24]}]):c.resolve(d[21]=void 0)},function(b){return d[21]!==void 0?(d[15]!==void 0?(d[27]=d[15].get("mt"),d[27]!==void 0?(d[29]=new c.Map(),d[33]="message_tags",d[30]=d[27].get(d[33]),d[30]?d[31]=!1:d[31]=!0,d[31]?0:d[29].set(d[33],d[30]),d[32]=c.toJSON(d[29]),d[28]=d[32]):d[28]=void 0,d[24]=d[28]):d[24]=void 0,d[15]!==void 0?(d[27]=d[15].get("mooos"),d[25]=d[27]):d[25]=void 0,d[26]=new c.Map(),d[26].set("backup_action",a[0]),d[26].set("protobuf_encrypted",d[21]),d[26].set("supplemental_data_encrypted",void 0),d[26].set("timestamp_ms",a[4]),d[26].set("message_tags",d[24]),d[26].set("serialized_attachment_backup_payload",void 0),d[26].set("maybe_ooo_supplemental_upload",d[25]),b=[d[26],void 0],d[22]=b[0],d[23]=b[1],b):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ENCRYPTION_FAILED"),d[24]=new c.Map(),d[24].set("error_code",c.i64.cast([0,62])),d[24].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[24].set("error_message",""),b=[void 0,d[24]],d[22]=b[0],d[23]=b[1],b),b=[d[22],d[23]],d[16]=b[0],d[17]=b[1],b}]):c.resolve((d[12]?(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ALREADY_DELETED"),d[20]=new c.Map(),d[20].set("error_code",c.i64.cast([0,70])),d[20].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[20].set("error_message",""),e=[void 0,d[20]],d[18]=e[0],d[19]=e[1],e):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_TOPLEVEL_TABLE"),d[20]=new c.Map(),d[20].set("error_code",c.i64.cast([0,63])),d[20].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[20].set("error_message",""),e=[void 0,d[20]],d[18]=e[0],d[19]=e[1],e),e=[d[18],d[19]],d[16]=e[0],d[17]=e[1],e))},function(a){return a=[d[16],d[17]],d[2]=a[0],d[3]=a[1],a}]):c.sequence([function(e){return c.i64.eq(a[0],c.i64.cast([0,2]))?c.sequence([function(e){return a[3]!==void 0?c.sequence([function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreSupplementalForBackup.nop"),a[1],a[2],a[3]).then(function(a){return a=a,d[14]=a[0],d[15]=a[1],a})},function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreTagsForBackup.nop"),a[1],a[2]).then(function(a){return a=a,d[16]=a[0],a})},function(e){return d[17]=new c.Map(),d[17].set("message_tags",d[16]),d[18]=new c.Map(),d[18].set("mt",d[17]),c.blobs.neq(d[14],void 0)?c.sequence([function(e){return a[3]!==void 0?c.sequence([function(e){return d[23]=a[5].get("mailbox_root_key_v2"),c.blobs.neq(d[23],void 0)?c.sequence([function(e){return d[26]=a[5].get("message_payload_encryption_keys"),d[27]=d[26].get("epoch_root_key"),d[28]=c.createArray(),d[41]=(d[28].push(c.i64.cast([0,32])),d[28]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleV92Mj5zdXBwbGVtZW50YWxfcHJmX2tleQ=="),void 0,d[23],d[28]).then(function(a){return a=a,d[29]=a[0],a})},function(a){return d[29]!==void 0?c.sequence([function(a){return d[41]=c.i64.of_int32(d[29].length),c.i64.ge(d[41],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[29],c.i64.cast([0,0])).then(function(a){return a=a,d[43]=a[0],d[44]=a[1],a})},function(a){return d[42]=d[43]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[44]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",d[44]].join("")),d[43]=c.createArray(),void 0!==void 0?d[45]=(d[43].push(void 0),d[43]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",d[44],d[43],c.i64.cast([0,3]))},function(a){return d[42]=void 0}])},function(a){return d[30]=d[42]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[42]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",d[42]].join("")),d[41]=c.createArray(),void 0!==void 0?d[43]=(d[41].push(void 0),d[41]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",d[42],d[41],c.i64.cast([0,3]))},function(a){return d[30]=void 0}])},function(a){return c.blobs.neq(d[30],void 0)?d[31]=!0:d[31]=!1,d[31]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),d[32]=c.createArray(),d[41]=(d[32].push(c.i64.cast([0,32])),d[32]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleV92Mj5zdXBwbGVtZW50YWxfZW5jX2tleQ=="),void 0,d[27],d[32]).then(function(a){return a=a,d[33]=a[0],a})},function(a){return d[33]!==void 0?c.sequence([function(a){return d[41]=c.i64.of_int32(d[33].length),c.i64.ge(d[41],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[33],c.i64.cast([0,0])).then(function(a){return a=a,d[43]=a[0],d[44]=a[1],a})},function(a){return d[42]=d[43]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[44]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",d[44]].join("")),d[43]=c.createArray(),void 0!==void 0?d[45]=(d[43].push(void 0),d[43]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",d[44],d[43],c.i64.cast([0,3]))},function(a){return d[42]=void 0}])},function(a){return d[34]=d[42]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[42]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",d[42]].join("")),d[41]=c.createArray(),void 0!==void 0?d[43]=(d[41].push(void 0),d[41]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",d[42],d[41],c.i64.cast([0,3]))},function(a){return d[34]=void 0}])},function(e){return c.blobs.neq(d[34],void 0)?d[35]=!0:d[35]=!1,d[35]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),c.nativeOperation(b("LSGetBlobFromString.nop"),a[3]).then(function(a){return a=a,d[36]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),d[30],d[36]).then(function(a){return a=a,d[37]=a[0],a})},function(a){return c.nativeOperation(b("LSSymmetricEncryptionCreateEncryptedData.nop"),d[34],c.blob("c3VwcGxlbWVudGFsX2VuY19hYWQ="),d[36]).then(function(a){return a=a,d[38]=a[0],a})},function(e){return c.blobs.neq(d[38],void 0)?c.sequence([function(e){return d[41]=new c.Map(),d[41].set("sk_ciphertext",d[38]),d[41].set("sk_hash",d[37]),d[42]=a[5].get("message_payload_encryption_keys"),d[43]=d[42].get("payload_key"),c.nativeOperation(b("LSSymmetricEncryptionCreateEncryptedData.nop"),d[43],c.blobs.of_string(["message_thread","_",a[1]].join("")),d[14]).then(function(a){return a=a,d[44]=a[0],a})},function(a){return c.blobs.neq(d[44],void 0)?c.sequence([function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[44]).then(function(a){return a=a,d[48]=a[0],a})},function(a){return d[45]=d[48]}]):c.resolve(d[45]=void 0)},function(b){return d[45]!==void 0?(d[18]!==void 0?(d[51]=d[18].get("mt"),d[51]!==void 0?(d[53]=new c.Map(),d[57]="message_tags",d[54]=d[51].get(d[57]),d[54]?d[55]=!1:d[55]=!0,d[55]?0:d[53].set(d[57],d[54]),d[56]=c.toJSON(d[53]),d[52]=d[56]):d[52]=void 0,d[48]=d[52]):d[48]=void 0,d[18]!==void 0?(d[51]=d[18].get("mooos"),d[49]=d[51]):d[49]=void 0,d[50]=new c.Map(),d[50].set("backup_action",a[0]),d[50].set("protobuf_encrypted",d[45]),d[50].set("supplemental_data_encrypted",d[41]),d[50].set("timestamp_ms",a[4]),d[50].set("message_tags",d[48]),d[50].set("serialized_attachment_backup_payload",void 0),d[50].set("maybe_ooo_supplemental_upload",d[49]),b=[d[50],void 0],d[46]=b[0],d[47]=b[1],b):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ENCRYPTION_FAILED"),d[48]=new c.Map(),d[48].set("error_code",c.i64.cast([0,62])),d[48].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[48].set("error_message",""),b=[void 0,d[48]],d[46]=b[0],d[47]=b[1],b),b=[d[46],d[47]],d[39]=b[0],d[40]=b[1],b}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error SUPPLEMENTAL_ENCRYPTION_FAILED"),d[41]=new c.Map(),d[41].set("error_code",c.i64.cast([0,66])),d[41].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[41].set("error_message",""),e=[void 0,d[41]],d[39]=e[0],d[40]=e[1],e))},function(a){return a=[d[39],d[40]],d[24]=a[0],d[25]=a[1],a}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error NULL_MAILBOX_ROOT_KEY_V2"),d[26]=new c.Map(),d[26].set("error_code",c.i64.cast([0,27])),d[26].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[26].set("error_message",""),e=[void 0,d[26]],d[24]=e[0],d[25]=e[1],e))},function(a){return a=[d[24],d[25]],d[21]=a[0],d[22]=a[1],a}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error SUPPLEMENTAL_KEY_NOT_SET_IN_CONTEXT_TABLE"),d[23]=new c.Map(),d[23].set("error_code",c.i64.cast([0,65])),d[23].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[23].set("error_message",""),e=[void 0,d[23]],d[21]=e[0],d[22]=e[1],e))},function(a){return a=[d[21],d[22]],d[19]=a[0],d[20]=a[1],a}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_SUPPLEMENTAL_TABLE"),d[21]=new c.Map(),d[21].set("error_code",c.i64.cast([0,64])),d[21].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[21].set("error_message",""),e=[void 0,d[21]],d[19]=e[0],d[20]=e[1],e))},function(a){return a=[d[19],d[20]],d[12]=a[0],d[13]=a[1],a}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error SUPPLEMENTAL_KEY_NOT_SET_IN_CONTEXT_TABLE"),d[14]=new c.Map(),d[14].set("error_code",c.i64.cast([0,65])),d[14].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[14].set("error_message",""),e=[void 0,d[14]],d[12]=e[0],d[13]=e[1],e))},function(a){return a=[d[12],d[13]],d[10]=a[0],d[11]=a[1],a}]):c.sequence([function(e){return c.i64.eq(a[0],c.i64.cast([0,4]))?c.sequence([function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreForBackup.nop"),a[1],a[2]).then(function(a){return a=a,d[14]=a[0],d[15]=a[1],d[16]=a[2],a})},function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreTagsForBackup.nop"),a[1],a[2]).then(function(a){return a=a,d[17]=a[0],a})},function(e){return d[18]=new c.Map(),d[18].set("message_tags",d[17]),d[19]=new c.Map(),d[19].set("mt",d[18]),c.blobs.neq(d[14],void 0)?c.sequence([function(e){return d[22]=a[5].get("message_payload_encryption_keys"),d[23]=d[22].get("payload_key"),c.nativeOperation(b("LSSymmetricEncryptionCreateEncryptedData.nop"),d[23],c.blobs.of_string(["message_thread","_",a[1]].join("")),d[14]).then(function(a){return a=a,d[24]=a[0],a})},function(a){return c.blobs.neq(d[24],void 0)?c.sequence([function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[24]).then(function(a){return a=a,d[28]=a[0],a})},function(a){return d[25]=d[28]}]):c.resolve(d[25]=void 0)},function(b){return d[25]!==void 0?(d[19]!==void 0?(d[31]=d[19].get("mt"),d[31]!==void 0?(d[33]=new c.Map(),d[37]="message_tags",d[34]=d[31].get(d[37]),d[34]?d[35]=!1:d[35]=!0,d[35]?0:d[33].set(d[37],d[34]),d[36]=c.toJSON(d[33]),d[32]=d[36]):d[32]=void 0,d[28]=d[32]):d[28]=void 0,d[19]!==void 0?(d[31]=d[19].get("mooos"),d[29]=d[31]):d[29]=void 0,d[30]=new c.Map(),d[30].set("backup_action",a[0]),d[30].set("protobuf_encrypted",d[25]),d[30].set("supplemental_data_encrypted",void 0),d[30].set("timestamp_ms",a[4]),d[30].set("message_tags",d[28]),d[30].set("serialized_attachment_backup_payload",void 0),d[30].set("maybe_ooo_supplemental_upload",d[29]),b=[d[30],void 0],d[26]=b[0],d[27]=b[1],b):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ENCRYPTION_FAILED"),d[28]=new c.Map(),d[28].set("error_code",c.i64.cast([0,62])),d[28].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[28].set("error_message",""),b=[void 0,d[28]],d[26]=b[0],d[27]=b[1],b),b=[d[26],d[27]],d[20]=b[0],d[21]=b[1],b}]):c.resolve((d[16]?(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ALREADY_DELETED"),d[24]=new c.Map(),d[24].set("error_code",c.i64.cast([0,70])),d[24].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[24].set("error_message",""),e=[void 0,d[24]],d[22]=e[0],d[23]=e[1],e):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_TOPLEVEL_TABLE"),d[24]=new c.Map(),d[24].set("error_code",c.i64.cast([0,63])),d[24].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[24].set("error_message",""),e=[void 0,d[24]],d[22]=e[0],d[23]=e[1],e),e=[d[22],d[23]],d[20]=e[0],d[21]=e[1],e))},function(a){return a=[d[20],d[21]],d[12]=a[0],d[13]=a[1],a}]):c.resolve((c.i64.eq(a[0],c.i64.cast([0,3]))?(void 0!==void 0?(d[19]=(void 0).get("mt"),d[19]!==void 0?(d[21]=new c.Map(),d[25]="message_tags",d[22]=d[19].get(d[25]),d[22]?d[23]=!1:d[23]=!0,d[23]?0:d[21].set(d[25],d[22]),d[24]=c.toJSON(d[21]),d[20]=d[24]):d[20]=void 0,d[16]=d[20]):d[16]=void 0,void 0!==void 0?(d[19]=(void 0).get("mooos"),d[17]=d[19]):d[17]=void 0,d[18]=new c.Map(),d[18].set("backup_action",a[0]),d[18].set("protobuf_encrypted",void 0),d[18].set("supplemental_data_encrypted",void 0),d[18].set("timestamp_ms",a[4]),d[18].set("message_tags",d[16]),d[18].set("serialized_attachment_backup_payload",void 0),d[18].set("maybe_ooo_supplemental_upload",d[17]),e=[d[18],void 0],d[14]=e[0],d[15]=e[1],e):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error UNKNOWN_PROTOBUF_TYPE"),d[16]=new c.Map(),d[16].set("error_code",c.i64.cast([0,60])),d[16].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[16].set("error_message",""),e=[void 0,d[16]],d[14]=e[0],d[15]=e[1],e),e=[d[14],d[15]],d[12]=e[0],d[13]=e[1],e))},function(a){return a=[d[12],d[13]],d[10]=a[0],d[11]=a[1],a}])},function(a){return a=[d[10],d[11]],d[2]=a[0],d[3]=a[1],a}])},function(a){return d[4]=c.i64.of_float(Date.now()),d[5]=c.i64.random(),d[7]="Finishing execution. Execution time: ",d[8]=c.i64.to_string(c.i64.sub(d[4],d[0])),d[9]=" ms",d[6]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][loadAndEncryptProtobufWithInputsV2] ",d[6],d[7],d[6],d[8],d[6],d[9]].join("")),c.i64.eq(c.i64.mod_(d[5],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[10]=",",d[11]=c.createArray(),void 0!==void 0?d[12]=(d[11].push(void 0),d[11]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"loadAndEncryptProtobufWithInputsV2",[d[7],d[10],d[8],d[10],d[9]].join(""),d[11],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[2],d[3]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSLoadAndEncryptProtobufV2",["LSLoadAndEncryptProtobufWithInputsV2","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][loadAndEncryptProtobufV2] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.filter(c.db.table(305).fetch(),function(b){return c.i64.eq(b.pendingBackupTaskId,a[0])}).next().then(function(e,f){var g=e.done;e=e.value;return g?(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufV2StoredProcedure] Returning error PROTOBUF_CONTEXT_ROW_NOT_FOUND"),d[11]=new c.Map(),d[11].set("error_code",c.i64.cast([0,67])),d[11].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufV2StoredProcedure"),d[11].set("error_message",""),g=[void 0,d[11]],d[2]=g[0],d[3]=g[1],g):(f=e.item,c.sequence([function(e){return c.storedProcedure(b("LSLoadAndEncryptProtobufWithInputsV2"),f.backupAction,a[2],f.toplevelOfflineThreadingId,f.supplementalKey,f.messageTimestampMs,a[1]).then(function(a){return a=a,d[11]=a[0],d[12]=a[1],a})},function(a){return a=[d[11],d[12]],d[2]=a[0],d[3]=a[1],a}]))})},function(a){return d[5]=c.i64.of_float(Date.now()),d[6]=c.i64.random(),d[8]="Finishing execution. Execution time: ",d[9]=c.i64.to_string(c.i64.sub(d[5],d[0])),d[10]=" ms",d[7]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][loadAndEncryptProtobufV2] ",d[7],d[8],d[7],d[9],d[7],d[10]].join("")),c.i64.eq(c.i64.mod_(d[6],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[11]=",",d[12]=c.createArray(),void 0!==void 0?d[13]=(d[12].push(void 0),d[12]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"loadAndEncryptProtobufV2",[d[8],d[11],d[9],d[11],d[10]].join(""),d[12],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[2],d[3]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsLoadAndEncryptProtobufV2StoredProcedure";a.__tables__=["pending_protobuf_backups_context"];e.exports=a}),null);
__d("LSSerializeBackupPayloadV2",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSDeriveValueSecretRefV2","LSEncryptIdentifiersV2","LSEncryptMessagePayloadV2","LSGetBlobFromString.nop","LSGetLatestEpochKeys","LSIsEncryptionVersionSecure","LSLoadAndEncryptProtobufV2","LSLogMebClientEvent.nop","LSLogWebQpl.nop","gkx"],(function(a,b,c,d,e,f,g){function a(){var a=arguments,d=a[a.length-1],e=[],f=[];return d.sequence([function(g){return d.sequence([function(b){return e[0]=d.i64.of_float(Date.now()),function(a){d.logger(a).info(a)}("[EncryptedBackups][serializeBackupPayloadV2] Beginning execution."),e[1]=d.i64.of_float(Date.now()),e[18]=d.i64.mul(e[1],d.i64.cast([0,1e6])),e[2]=d.i64.random(),d.db.table(2).fetch([[[a[0]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?e[3]=void 0:(b=a.item,e[3]=b.dataTraceId)})},function(a){return e[3]!==void 0?e[5]=e[3]:e[5]=void 0,d.islc(d.filter(d.db.table(168).fetch(),function(a){return d.i64.eq(a.authorityLevel,d.i64.cast([0,80]))||!1}),0,d.i64.to_float(d.i64.cast([0,1]))).next().then(function(a,b){var c=a.done;a=a.value;return c?(e[22]=new d.Map(),e[22].set("error_msg","Expected a nonempty query result"),e[22].set("code",d.i64.cast([0,3])),e[22].set("src_line","MEBClientStateUtils.php:247 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),e[23]=d.createArray(),e[24]=(e[23].push(e[22]),e[23]),c=[void 0,e[23]],e[6]=c[0],e[7]=c[1],c):(b=a.item,e[22]=new d.Map(),e[22].set("backup_id",b.backupId),e[22].set("device_public_key_blob",b.devicePublicKeyBlob),e[22].set("device_private_key_blob",b.devicePrivateKeyBlob),e[22].set("epoch_storage_public_key_blob",b.epochStoragePublicKeyBlob),e[22].set("epoch_storage_private_key_blob",b.epochStoragePrivateKeyBlob),e[22].set("epoch_auth_public_key_blob",b.epochAuthPublicKeyBlob),e[22].set("epoch_auth_private_key_blob",b.epochAuthPrivateKeyBlob),e[22].set("mailbox_root_key_blob",b.mailboxRootKeyBlob),e[22].set("ocmf_client_state_blob",b.ocmfClientStateBlob),e[22].set("orf_client_state_v2_blob",void 0),e[22].set("orf_v2_authority_level",void 0),e[22].set("oblivious_validation_token_blob",b.obliviousValidationTokenBlob),e[22].set("device_id",b.deviceId),e[22].set("backup_tenancy",b.backupTenancy),e[22].set("encryption_version",b.encryptionVersion),e[22].set("revision_version",b.revisionVersion),e[22].set("initialize_restore_result",void 0),e[22].set("device_creation_timestamp_sec",void 0),e[22].set("authority_level",b.authorityLevel),c=[e[22],void 0],e[6]=c[0],e[7]=c[1],c)})},function(f){return e[9]=new d.Map(),e[9].set("value",e[6]),e[9].set("errors",e[7]),e[10]=e[9].get("value"),e[10]!==void 0?d.sequence([function(f){return e[22]=e[10].get("backup_id"),e[23]=e[10].get("device_public_key_blob"),e[24]=e[10].get("device_private_key_blob"),e[25]=e[10].get("epoch_storage_public_key_blob"),e[26]=e[10].get("epoch_storage_private_key_blob"),e[27]=e[10].get("epoch_auth_public_key_blob"),e[28]=e[10].get("epoch_auth_private_key_blob"),e[29]=e[10].get("mailbox_root_key_blob"),e[30]=e[10].get("ocmf_client_state_blob"),e[31]=e[10].get("orf_client_state_v2_blob"),e[32]=e[10].get("orf_v2_authority_level"),e[33]=e[10].get("oblivious_validation_token_blob"),e[34]=e[10].get("device_id"),e[35]=e[10].get("backup_tenancy"),e[36]=e[10].get("encryption_version"),e[37]=e[10].get("revision_version"),e[38]=e[10].get("initialize_restore_result"),e[39]=e[10].get("device_creation_timestamp_sec"),e[40]=e[10].get("authority_level"),d.i64.neq(e[34],void 0)?d.sequence([function(a){return e[45]=void 0,d.i64.neq(e[45],void 0)?d.resolve(e[46]=e[45]):d.sequence([function(a){return e[54]=d.createArray(),d.storedProcedure(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,0])).then(function(a){return a=a,e[55]=a[0],a})},function(a){return e[55]?e[64]=(e[54].push(d.i64.cast([0,0])),e[54]):0,d.storedProcedure(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,2])).then(function(a){return a=a,e[56]=a[0],a})},function(a){return e[56]?e[64]=(e[54].push(d.i64.cast([0,2])),e[54]):0,d.storedProcedure(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,3])).then(function(a){return a=a,e[57]=a[0],a})},function(a){return e[57]?e[64]=(e[54].push(d.i64.cast([0,3])),e[54]):0,d.storedProcedure(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,4])).then(function(a){return a=a,e[58]=a[0],a})},function(a){return e[58]?e[64]=(e[54].push(d.i64.cast([0,4])),e[54]):0,e[59]=d.createArray(),e[60]=d.i64.of_int32(e[54].length),d.i64.gt(e[60],d.i64.cast([0,0]))?d.loopAsync(e[60],function(a){return e[64]=a,d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[54],e[64]).then(function(a){return a=a,e[65]=a[0],e[66]=a[1],a})},function(a){return e[67]=(e[59].push(e[65]),e[59])}])}):d.resolve()},function(a){return d.sequence([function(a){return e[64]=d.createArray(),e[65]=d.i64.of_int32(e[59].length),d.i64.gt(e[65],d.i64.cast([0,0]))?d.loopAsync(e[65],function(a){return e[67]=a,d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[59],e[67]).then(function(a){return a=a,e[68]=a[0],e[69]=a[1],a})},function(a){return e[70]=(e[64].push(d.i64.to_string(e[68])),e[64])}])}):d.resolve()},function(a){return e[66]=e[64].join(","),e[61]=e[66]}])},function(a){return e[59].some(function(a){return d.i64.eq(e[36],a)})?e[62]=e[36]:e[62]=void 0,d.i64.neq(e[62],void 0)?e[63]=e[62]:e[63]=void 0,e[46]=e[63]}])},function(f){return d.i64.neq(e[46],void 0)?e[47]=e[46]:e[47]=d.i64.cast([0,0]),d.i64.neq(e[35],void 0)?e[48]=e[35]:e[48]=d.i64.cast([0,1]),d.db.table(177).fetch([[[a[0]]],"fk_pending_tasks"]).next().then(function(f,g){var h=f.done;f=f.value;return h?d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[66]=d.i64.of_float(Date.now()),b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[66],d.i64.cast([0,1e6])),e[18]),void 0],e[54]=b[0],e[55]=b[1],e[56]=b[2],e[57]=b[3],e[58]=b[4],e[59]=b[5],e[60]=b[6],b):(f=c.item,e[66]=d.i64.of_float(Date.now()),b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[66],d.i64.cast([0,1e6])),e[18]),void 0],e[54]=b[0],e[55]=b[1],e[56]=b[2],e[57]=b[3],e[58]=b[4],e[59]=b[5],e[60]=b[6],b)})},function(a){return e[62]=new d.Map(),e[62].set("task_id",e[54]),e[62].set("queue_name",e[55]),e[62].set("enqueue_timestamp_ms",e[56]),e[62].set("priority",e[57]),e[62].set("first_executed_timestamp_ms",e[58]),e[62].set("execution_time_ns",e[59]),e[62].set("echo_encoding_execution_time_ns",e[60]),e[63]=new d.Map(),e[63].set("task_metadata",e[62]),e[63].set("action_type",void 0),e[63].set("content_type",void 0),e[63].set("identifiers",void 0),e[63].set("identifiers_v2",void 0),e[63].set("task_creation_source",void 0),e[63].set("message_payload_source",d.i64.cast([0,2])),e[64]=new d.Map(),e[64].set("error_code",d.i64.cast([0,5])),e[64].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),e[64].set("error_message","Pending backup context row not found"),e[64]!==void 0?(e[66]=e[64].get("stored_procedure"),e[67]=e[64].get("error_code"),e[68]=e[64].get("error_message"),e[69]="."):0,void 0!==void 0?(e[66]=(void 0).get("stored_procedure"),e[67]=(void 0).get("error_code"),e[68]=(void 0).get("error_message"),e[69]="."):0,e[65]=d.createArray(),a=[void 0,e[64],e[63],e[65]],e[49]=a[0],e[50]=a[1],e[51]=a[2],e[52]=a[3],a}]):(g=f.item,d.sequence([function(f){return e[59]=g.actionType,e[60]=g.contentType,e[64]=g.echoContent,e[65]=g.lsTraceId,e[63]=g.echoEncodingLatencyNs,e[62]=g.attachmentPayload,e[66]=g.tamThreadSubtype,e[67]=g.isInstamadillo,e[54]=new d.Map(),e[54].set("backup_id",d.i64.to_string(e[22])),e[54].set("act_thread_id",g.listKey),e[54].set("timestamp",g.sortKey),e[54].set("otid",g.uniqueKey),e[61]=g.error==null?d.i64.cast([0,0]):g.error,[d.i64.cast([0,0]),d.i64.cast([0,32])].some(function(a){return d.i64.eq(e[61],a)})?d.sequence([function(a){return e[68]=e[54].get("act_thread_id"),e[69]=e[54].get("otid"),d.storedProcedure(b("LSGetLatestEpochKeys"),!1).then(function(a){return a=a,e[70]=a[0],e[71]=a[1],a})},function(a){return e[70]!==void 0?d.sequence([function(a){return d.i64.eq(e[60],d.i64.cast([0,1]))?d.sequence([function(a){return e[81]=d.createArray(),e[86]=(e[81].push(d.i64.cast([0,32])),e[81]),d.nativeOperation(b("LSGetBlobFromString.nop"),["thread_ope_key","_",e[68]].join("")).then(function(a){return a=a,e[82]=a[0],a})},function(a){return d.nativeOperation(b("LSCreateDerivedKeys.nop"),e[82],void 0,e[29],e[81]).then(function(a){return a=a,e[83]=a[0],a})},function(a){return e[83]?e[84]=!1:e[84]=!0,e[84]?d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] Got null keys while deriving message list OPE key. Returning null blobish"),e[87]="Got null keys while deriving message list OPE key. Returning null blobish",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",e[87]].join("")),e[86]=d.createArray(),void 0!==void 0?e[88]=(e[86].push(void 0),e[86]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",e[87],e[86],d.i64.cast([0,3]))},function(a){return e[85]=void 0}]):d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[83],d.i64.cast([0,0])).then(function(a){return a=a,e[86]=a[0],e[87]=a[1],a})},function(a){return e[85]=e[86]}])},function(a){return e[78]=e[85]}]):d.sequence([function(a){return d.i64.eq(e[59],d.i64.cast([0,2]))?d.sequence([function(a){return e[82]=d.createArray(),e[87]=(e[82].push(d.i64.cast([0,32])),e[82]),d.nativeOperation(b("LSGetBlobFromString.nop"),["thread_ope_key","_",e[69]].join("")).then(function(a){return a=a,e[83]=a[0],a})},function(a){return d.nativeOperation(b("LSCreateDerivedKeys.nop"),e[83],void 0,e[29],e[82]).then(function(a){return a=a,e[84]=a[0],a})},function(a){return e[84]?e[85]=!1:e[85]=!0,e[85]?d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] Got null keys while deriving message list OPE key. Returning null blobish"),e[88]="Got null keys while deriving message list OPE key. Returning null blobish",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",e[88]].join("")),e[87]=d.createArray(),void 0!==void 0?e[89]=(e[87].push(void 0),e[87]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",e[88],e[87],d.i64.cast([0,3]))},function(a){return e[86]=void 0}]):d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[84],d.i64.cast([0,0])).then(function(a){return a=a,e[87]=a[0],e[88]=a[1],a})},function(a){return e[86]=e[87]}])},function(a){return e[81]=e[86]}]):d.resolve(e[81]=void 0)},function(a){return e[78]=e[81]}])},function(a){return d.blobs.neq(e[78],void 0)?d.sequence([function(a){return e[81]=e[70].get("epoch_keys"),e[82]=e[81].get("epoch_anon_id"),e[83]=e[81].get("epoch_root_key"),e[84]=d.createArray(),e[99]=(e[84].push(d.i64.cast([0,32])),e[84]),d.i64.ge(e[47],d.i64.cast([0,3]))?d.resolve(e[85]=void 0):d.sequence([function(a){return d.nativeOperation(b("LSGetBlobFromString.nop"),e[68]).then(function(a){return a=a,e[99]=a[0],a})},function(a){return e[85]=e[99]}])},function(a){return d.i64.ge(e[47],d.i64.cast([0,4]))?(e[99]="_",e[86]=["message_key_in_epoch",e[99],d.blobs.to_string(e[82]),e[99],"cipher_version",e[99],d.i64.to_string(e[47]),e[99],"thread",e[99],e[68]==null?"":e[68]].join("")):(d.i64.ge(e[47],d.i64.cast([0,3]))?(e[100]="_",e[99]=["message_key_in_epoch",e[100],d.blobs.to_string(e[82]),e[100],"cipher_version",e[100],d.i64.to_string(e[47]),e[100],"thread",e[100],e[68]==null?"":e[68]].join("")):(d.i64.ge(e[47],d.i64.cast([0,2]))?(e[101]="_",e[100]=["message_key_in_epoch",e[101],d.blobs.to_string(e[82]),e[101],"cipher_version",e[101],d.i64.to_string(e[47])].join("")):e[100]=["message_key_in_epoch","_",d.blobs.to_string(e[82])].join(""),e[99]=e[100]),e[86]=e[99]),d.nativeOperation(b("LSGetBlobFromString.nop"),e[86]).then(function(a){return a=a,e[87]=a[0],a})},function(a){return d.nativeOperation(b("LSCreateDerivedKeys.nop"),e[87],e[85],e[83],e[84]).then(function(a){return a=a,e[88]=a[0],a})},function(a){return e[88]?e[89]=!1:e[89]=!0,e[89]?d.resolve(e[90]=void 0):d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[88],d.i64.cast([0,0])).then(function(a){return a=a,e[99]=a[0],e[100]=a[1],a})},function(a){return e[90]=e[99]}])},function(a){return d.filter(d.db.table(169).fetch(),function(a){return d.blobs.eq(a.epochAnonIdBlob,d.blob("MA=="))}).next().then(function(b,c){var a=b.done;b=b.value;return a?(e[99]=new d.Map(),e[99].set("error_msg","Expected a nonempty query result"),e[99].set("code",d.i64.cast([0,3])),e[99].set("src_line","MEBEpochClientUtils.php:556 MEBEpochClientUtils::maybeEpochWithAnonIDFromPersistentEpochsTableDirectly()"),e[100]=d.createArray(),e[101]=(e[100].push(e[99]),e[100]),a=[void 0,e[100]],e[91]=a[0],e[92]=a[1],a):(c=b.item,e[99]=new d.Map(),e[99].set("epoch_id",c.epochId),e[99].set("backup_id",c.backupId),e[99].set("epoch_anon_id_blob",c.epochAnonIdBlob),e[99].set("epoch_root_key_blob",c.epochRootKeyBlob),e[99].set("epoch_status",c.epochStatus),e[99].set("epoch_head",c.epochHead),e[99].set("authority_level",c.authorityLevel),a=[e[99],void 0],e[91]=a[0],e[92]=a[1],a)})},function(a){return e[94]=new d.Map(),e[94].set("value",e[91]),e[94].set("errors",e[92]),e[95]=e[94].get("value"),e[95]!==void 0?d.sequence([function(a){return e[99]=e[95].get("epoch_id"),e[100]=e[95].get("backup_id"),e[101]=e[95].get("epoch_anon_id_blob"),e[102]=e[95].get("epoch_root_key_blob"),e[103]=e[95].get("epoch_status"),e[104]=e[95].get("epoch_head"),e[105]=e[95].get("authority_level"),e[106]=d.createArray(),e[114]=(e[106].push(d.i64.cast([0,32])),e[106]),d.nativeOperation(b("LSCreateDerivedKeys.nop"),d.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleT5zYWx0X21haWxib3hfcm9vdF9rZXlfdjI="),void 0,e[29],e[106]).then(function(a){return a=a,e[107]=a[0],a})},function(a){return e[107]!==void 0?d.sequence([function(a){return e[114]=d.i64.of_int32(e[107].length),d.i64.ge(e[114],d.i64.cast([0,1]))?d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[107],d.i64.cast([0,0])).then(function(a){return a=a,e[116]=a[0],e[117]=a[1],a})},function(a){return e[115]=e[116]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),e[117]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",e[117]].join("")),e[116]=d.createArray(),void 0!==void 0?e[118]=(e[116].push(void 0),e[116]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",e[117],e[116],d.i64.cast([0,3]))},function(a){return e[115]=void 0}])},function(a){return e[108]=e[115]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),e[115]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",e[115]].join("")),e[114]=d.createArray(),void 0!==void 0?e[116]=(e[114].push(void 0),e[114]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",e[115],e[114],d.i64.cast([0,3]))},function(a){return e[108]=void 0}])},function(a){return d.blobs.neq(e[108],void 0)?e[109]=!0:e[109]=!1,e[109]?0:(function(a){d.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),d["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),e[110]=d.createArray(),e[114]=(e[110].push(d.i64.cast([0,32])),e[110]),d.nativeOperation(b("LSCreateDerivedKeys.nop"),d.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleT5tYWlsYm94X3Jvb3Rfa2V5X3Yy"),e[108],e[102],e[110]).then(function(a){return a=a,e[111]=a[0],a})},function(a){return e[111]!==void 0?d.sequence([function(a){return e[114]=d.i64.of_int32(e[111].length),d.i64.ge(e[114],d.i64.cast([0,1]))?d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[111],d.i64.cast([0,0])).then(function(a){return a=a,e[116]=a[0],e[117]=a[1],a})},function(a){return e[115]=e[116]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),e[117]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",e[117]].join("")),e[116]=d.createArray(),void 0!==void 0?e[118]=(e[116].push(void 0),e[116]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",e[117],e[116],d.i64.cast([0,3]))},function(a){return e[115]=void 0}])},function(a){return e[112]=e[115]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),e[115]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",e[115]].join("")),e[114]=d.createArray(),void 0!==void 0?e[116]=(e[114].push(void 0),e[114]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",e[115],e[114],d.i64.cast([0,3]))},function(a){return e[112]=void 0}])},function(a){return d.blobs.neq(e[112],void 0)?e[113]=!0:e[113]=!1,e[113]?0:(function(a){d.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),d["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),e[96]=e[112]}]):d.sequence([function(a){return e[99]=e[94].get("errors"),e[100]=e[94].get("errors"),function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBEpochClientUtils] Failed to get mailbox_root_key_v2: epoch 0 is not available."),e[102]="Failed to get mailbox_root_key_v2: epoch 0 is not available.",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBEpochClientUtils] ","",e[102]].join("")),e[101]=d.createArray(),void 0!==void 0?e[103]=(e[101].push(void 0),e[101]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBEpochClientUtils",e[102],e[101],d.i64.cast([0,3]))},function(a){return e[96]=void 0}])},function(a){return d.blobs.neq(e[90],void 0)?d.sequence([function(a){return d.blobs.neq(e[96],void 0)?d.sequence([function(a){return e[105]=d.createArray(),e[109]=(e[105].push(d.i64.cast([0,32])),e[105]),d.nativeOperation(b("LSCreateDerivedKeys.nop"),d.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleV92Mj5mYWxsYmFja19rZXk="),void 0,e[96],e[105]).then(function(a){return a=a,e[106]=a[0],a})},function(a){return e[106]!==void 0?d.sequence([function(a){return e[109]=d.i64.of_int32(e[106].length),d.i64.ge(e[109],d.i64.cast([0,1]))?d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[106],d.i64.cast([0,0])).then(function(a){return a=a,e[111]=a[0],e[112]=a[1],a})},function(a){return e[110]=e[111]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),e[112]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",e[112]].join("")),e[111]=d.createArray(),void 0!==void 0?e[113]=(e[111].push(void 0),e[111]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",e[112],e[111],d.i64.cast([0,3]))},function(a){return e[110]=void 0}])},function(a){return e[107]=e[110]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),e[110]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",e[110]].join("")),e[109]=d.createArray(),void 0!==void 0?e[111]=(e[109].push(void 0),e[109]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",e[110],e[109],d.i64.cast([0,3]))},function(a){return e[107]=void 0}])},function(a){return d.blobs.neq(e[107],void 0)?e[108]=!0:e[108]=!1,e[108]?0:(function(a){d.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),d["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),e[99]=e[107]}]):d.resolve(e[99]=void 0)},function(a){return e[100]=e[81].get("epoch_root_key"),e[101]=e[81].get("epoch_anon_id"),e[102]=e[81].get("epoch_id"),e[103]=new d.Map(),e[103].set("payload_key",e[90]),e[103].set("payload_fallback_key",e[99]),e[103].set("encryption_version",e[47]),e[103].set("epoch_root_key",e[100]),e[103].set("epoch_anon_id",e[101]),e[103].set("epoch_id",e[102]),e[104]=new d.Map(),e[104].set("ope_key",e[78]),e[104].set("message_payload_encryption_keys",e[103]),e[104].set("ocmf_shared_key",e[30]),e[104].set("mailbox_base_salt",e[29]),e[104].set("mailbox_root_key_v2",e[96]),a=[e[104],void 0],e[97]=a[0],e[98]=a[1],a}]):d.resolve((e[99]=new d.Map(),e[99].set("error_code",d.i64.cast([0,26])),e[99].set("stored_procedure","MEBKeyDeriver"),e[99].set("error_message",""),a=[void 0,e[99]],e[97]=a[0],e[98]=a[1],a))},function(a){return a=[e[97],e[98]],e[79]=a[0],e[80]=a[1],a}]):d.resolve((e[81]=new d.Map(),e[81].set("error_code",d.i64.cast([0,25])),e[81].set("stored_procedure","MEBKeyDeriver"),e[81].set("error_message",""),a=[void 0,e[81]],e[79]=a[0],e[80]=a[1],a))},function(a){return a=[e[79],e[80]],e[72]=a[0],e[73]=a[1],a}]):d.resolve((a=[void 0,e[71]],e[72]=a[0],e[73]=a[1],a))},function(f){return e[72]!==void 0?d.sequence([function(a){return e[78]=e[54].get("backup_id"),e[79]=e[54].get("act_thread_id"),e[80]=e[54].get("timestamp"),e[81]=e[54].get("otid"),d.storedProcedure(b("LSEncryptIdentifiersV2"),e[59],e[60],e[78],e[79],d.i64.from_string(e[80]),e[81],e[72]).then(function(a){return a=a,e[82]=a[0],e[83]=a[1],a})},function(f){return e[82]!==void 0?d.sequence([function(c){return e[88]=e[54].get("act_thread_id"),d.storedProcedure(b("LSLoadAndEncryptProtobufV2"),a[0],e[72],e[88]).then(function(a){return a=a,e[89]=a[0],e[90]=a[1],a})},function(f){return e[95]=d.i64.eq(e[61],d.i64.cast([0,32]))||!1||c("gkx")("12541")||!1,e[96]=e[89]!==void 0,e[95]&&e[96]?d.sequence([function(a){return e[97]=e[54].get("act_thread_id"),e[98]=e[54].get("backup_id"),d.storedProcedure(b("LSDeriveValueSecretRefV2"),e[97],e[98],e[72]).then(function(a){return a=a,e[99]=a[0],e[100]=a[1],a})},function(c){return e[89]!==void 0?d.sequence([function(c){return e[99]!==void 0?d.sequence([function(a){return e[109]=e[99].get("value_secret_ref"),e[110]=e[82].get("act_thread_id_ocmf_partial"),e[111]=e[82].get("otid_ocmf_partial"),e[112]=e[82].get("timestamp_encrypted"),e[113]=new d.Map(),e[113].set("list_key",e[110]),e[113].set("unique_key",e[111]),e[113].set("sort_key",e[112]),void 0!==void 0?(e[146]=(void 0).get("encrypted_message_payload"),e[147]=(void 0).get("value_secret_ref"),e[148]=new d.Map(),e[148].set("value",e[146]),e[148].set("value_secret_ref",e[147]),e[114]=e[148]):e[114]=void 0,e[115]=new d.Map(),e[115].set("list_item_id",e[113]),e[115].set("list_item",e[114]),e[115].set("action_type",e[59]),e[116]=e[54].get("timestamp"),e[117]=e[54].get("otid"),e[118]=e[54].get("act_thread_id"),e[119]=e[54].get("supplemental_otid"),e[120]=new d.Map(),e[120].set("timestamp",e[116]),e[120].set("otid",e[117]),e[120].set("wa_thread_id",d.i64.from_string(e[118])),e[120].set("supplemental_otid",e[119]),e[121]=e[72].get("mailbox_base_salt"),d.nativeOperation(b("LSBase64Encode.nop"),e[121]).then(function(a){return a=a,e[122]=a[0],a})},function(a){return e[123]=e[72].get("ocmf_shared_key"),d.nativeOperation(b("LSBase64Encode.nop"),e[123]).then(function(a){return a=a,e[124]=a[0],a})},function(a){return e[125]=new d.Map(),e[125].set("mailbox_root_key",e[122]==null?"":e[122]),e[125].set("ocmf_client_state_blob",e[124]==null?"":e[124]),e[126]=e[82].get("backup_id_ocmf_partial"),e[127]=e[72].get("message_payload_encryption_keys"),e[128]=e[127].get("epoch_id"),e[129]=e[72].get("message_payload_encryption_keys"),e[130]=e[129].get("encryption_version"),e[145]=e[65]==null?"":e[65],e[131]=new d.Map(),e[131].set("mailbox_partial_id",e[126]),e[131].set("action",e[115]),e[131].set("device_id",e[34]),e[131].set("echo_version",d.i64.cast([0,0])),e[131].set("epoch_id",e[128]),e[131].set("trace_id",void 0),e[131].set("encryption_version",e[130]),e[131].set("is_thread",d.i64.eq(e[60],d.i64.cast([0,2]))),e[131].set("raw_identifiers",e[120]),e[131].set("raw_tokens",e[125]),e[131].set("request_id",e[145]),e[131].set("tam_thread_subtype",e[66]==null?d.i64.cast([0,0]):e[66]),e[131].set("is_instamadillo",e[67]==null?!1:e[67]),e[131].set("empty_echo_payload_reason",d.i64.cast([0,1])),e[131].set("value_secret_ref",e[109]),e[89]!==void 0?d.sequence([function(a){return e[146]=e[89].get("supplemental_data_encrypted"),e[146]!==void 0?d.sequence([function(a){return e[148]=e[89].get("protobuf_encrypted"),e[149]=e[89].get("backup_action"),e[150]=e[89].get("timestamp_ms"),e[151]=e[146].get("sk_ciphertext"),d.nativeOperation(b("LSBase64Encode.nop"),e[151]).then(function(a){return a=a,e[152]=a[0],a})},function(a){return e[153]=e[146].get("sk_hash"),d.nativeOperation(b("LSBase64Encode.nop"),e[153]).then(function(a){return a=a,e[154]=a[0],a})},function(a){return e[155]=e[89].get("message_tags"),e[156]=e[89].get("maybe_ooo_supplemental_upload"),e[157]=new d.Map(),e[157].set("supplementary_data_key",void 0),e[157].set("encrypted_protobuf",e[148]),e[157].set("key_value_backup_action",e[149]),e[157].set("protobuf_ts_ms",e[150]),e[157].set("supplemental_key_ciphertext",e[152]),e[157].set("supplemental_key_hash",e[154]),e[157].set("message_tags",e[155]),e[157].set("maybe_ooo_supplemental_upload",e[156]),e[147]=e[157]}]):d.resolve((e[148]=e[89].get("protobuf_encrypted"),e[149]=e[89].get("backup_action"),e[150]=e[89].get("timestamp_ms"),e[151]=e[89].get("message_tags"),e[152]=new d.Map(),e[152].set("supplementary_data_key",void 0),e[152].set("encrypted_protobuf",e[148]),e[152].set("key_value_backup_action",e[149]),e[152].set("protobuf_ts_ms",e[150]),e[152].set("message_tags",e[151]),e[147]=e[152]))},function(a){return e[131].set("key_value_backup_payload",e[147])}]):d.resolve()},function(a){return e[62]!==void 0?e[131].set("attachment_backup_payload",e[62]):function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure] attachment_payload is null."),e[145]!==void 0?d.nativeOperation(b("LSLogWebQpl.nop"),e[145],d.i64.cast([0,521481602]),"upload_start",d.i64.cast([0,0]),void 0,void 0):d.resolve()},function(b){return e[132]=d.toJSON(e[131]),d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[146]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[147]=void 0:e[147]=e[63],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[146],d.i64.cast([0,1e6])),e[18]),e[147]],e[133]=b[0],e[134]=b[1],e[135]=b[2],e[136]=b[3],e[137]=b[4],e[138]=b[5],e[139]=b[6],b):(f=c.item,e[146]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[147]=void 0:e[147]=e[63],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[146],d.i64.cast([0,1e6])),e[18]),e[147]],e[133]=b[0],e[134]=b[1],e[135]=b[2],e[136]=b[3],e[137]=b[4],e[138]=b[5],e[139]=b[6],b)})},function(a){return e[141]=new d.Map(),e[141].set("task_id",e[133]),e[141].set("queue_name",e[134]),e[141].set("enqueue_timestamp_ms",e[135]),e[141].set("priority",e[136]),e[141].set("first_executed_timestamp_ms",e[137]),e[141].set("execution_time_ns",e[138]),e[141].set("echo_encoding_execution_time_ns",e[139]),e[142]=new d.Map(),e[142].set("task_metadata",e[141]),e[142].set("action_type",e[59]),e[142].set("content_type",e[60]),e[142].set("identifiers",void 0),e[142].set("identifiers_v2",e[54]),e[142].set("task_creation_source",void 0),e[142].set("message_payload_source",d.i64.cast([0,2])),void 0!==void 0?(e[146]=(void 0).get("stored_procedure"),e[147]=(void 0).get("error_code"),e[148]=(void 0).get("error_message"),e[149]="."):0,void 0!==void 0?(e[146]=(void 0).get("stored_procedure"),e[147]=(void 0).get("error_code"),e[148]=(void 0).get("error_message"),e[149]="."):0,e[143]=new d.Map(),e[143].set("payload",e[132]),e[144]=d.createArray(),e[146]=(e[144].push(void 0),e[144]),a=[e[143],void 0,e[142],e[144]],e[105]=a[0],e[106]=a[1],e[107]=a[2],e[108]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[120]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[121]=void 0:e[121]=e[63],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[120],d.i64.cast([0,1e6])),e[18]),e[121]],e[109]=b[0],e[110]=b[1],e[111]=b[2],e[112]=b[3],e[113]=b[4],e[114]=b[5],e[115]=b[6],b):(f=c.item,e[120]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[121]=void 0:e[121]=e[63],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[120],d.i64.cast([0,1e6])),e[18]),e[121]],e[109]=b[0],e[110]=b[1],e[111]=b[2],e[112]=b[3],e[113]=b[4],e[114]=b[5],e[115]=b[6],b)})},function(a){return e[117]=new d.Map(),e[117].set("task_id",e[109]),e[117].set("queue_name",e[110]),e[117].set("enqueue_timestamp_ms",e[111]),e[117].set("priority",e[112]),e[117].set("first_executed_timestamp_ms",e[113]),e[117].set("execution_time_ns",e[114]),e[117].set("echo_encoding_execution_time_ns",e[115]),e[118]=new d.Map(),e[118].set("task_metadata",e[117]),e[118].set("action_type",e[59]),e[118].set("content_type",e[60]),e[118].set("identifiers",void 0),e[118].set("identifiers_v2",e[54]),e[118].set("task_creation_source",void 0),e[118].set("message_payload_source",d.i64.cast([0,2])),e[100]!==void 0?(e[120]=e[100].get("stored_procedure"),e[121]=e[100].get("error_code"),e[122]=e[100].get("error_message"),e[123]="."):0,void 0!==void 0?(e[120]=(void 0).get("stored_procedure"),e[121]=(void 0).get("error_code"),e[122]=(void 0).get("error_message"),e[123]="."):0,e[119]=d.createArray(),e[120]=(e[119].push(void 0),e[119]),a=[void 0,e[100],e[118],e[119]],e[105]=a[0],e[106]=a[1],e[107]=a[2],e[108]=a[3],a}])},function(a){return a=[e[105],e[106],e[107],e[108]],e[101]=a[0],e[102]=a[1],e[103]=a[2],e[104]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[116]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[117]=void 0:e[117]=e[63],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[116],d.i64.cast([0,1e6])),e[18]),e[117]],e[105]=b[0],e[106]=b[1],e[107]=b[2],e[108]=b[3],e[109]=b[4],e[110]=b[5],e[111]=b[6],b):(f=c.item,e[116]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[117]=void 0:e[117]=e[63],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[116],d.i64.cast([0,1e6])),e[18]),e[117]],e[105]=b[0],e[106]=b[1],e[107]=b[2],e[108]=b[3],e[109]=b[4],e[110]=b[5],e[111]=b[6],b)})},function(a){return e[113]=new d.Map(),e[113].set("task_id",e[105]),e[113].set("queue_name",e[106]),e[113].set("enqueue_timestamp_ms",e[107]),e[113].set("priority",e[108]),e[113].set("first_executed_timestamp_ms",e[109]),e[113].set("execution_time_ns",e[110]),e[113].set("echo_encoding_execution_time_ns",e[111]),e[114]=new d.Map(),e[114].set("task_metadata",e[113]),e[114].set("action_type",e[59]),e[114].set("content_type",e[60]),e[114].set("identifiers",void 0),e[114].set("identifiers_v2",e[54]),e[114].set("task_creation_source",void 0),e[114].set("message_payload_source",d.i64.cast([0,2])),void 0!==void 0?(e[116]=(void 0).get("stored_procedure"),e[117]=(void 0).get("error_code"),e[118]=(void 0).get("error_message"),e[119]="."):0,e[90]!==void 0?(e[116]=e[90].get("stored_procedure"),e[117]=e[90].get("error_code"),e[118]=e[90].get("error_message"),e[119]="."):0,e[115]=d.createArray(),e[116]=(e[115].push(e[90]),e[115]),a=[void 0,void 0,e[114],e[115]],e[101]=a[0],e[102]=a[1],e[103]=a[2],e[104]=a[3],a}])},function(a){return a=[e[101],e[102],e[103],e[104]],e[91]=a[0],e[92]=a[1],e[93]=a[2],e[94]=a[3],a}]):d.sequence([function(c){return e[95]===!0&&e[96]===!1?d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[112]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[113]=void 0:e[113]=e[63],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[112],d.i64.cast([0,1e6])),e[18]),e[113]],e[101]=b[0],e[102]=b[1],e[103]=b[2],e[104]=b[3],e[105]=b[4],e[106]=b[5],e[107]=b[6],b):(f=c.item,e[112]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[113]=void 0:e[113]=e[63],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[112],d.i64.cast([0,1e6])),e[18]),e[113]],e[101]=b[0],e[102]=b[1],e[103]=b[2],e[104]=b[3],e[105]=b[4],e[106]=b[5],e[107]=b[6],b)})},function(a){return e[109]=new d.Map(),e[109].set("task_id",e[101]),e[109].set("queue_name",e[102]),e[109].set("enqueue_timestamp_ms",e[103]),e[109].set("priority",e[104]),e[109].set("first_executed_timestamp_ms",e[105]),e[109].set("execution_time_ns",e[106]),e[109].set("echo_encoding_execution_time_ns",e[107]),e[110]=new d.Map(),e[110].set("task_metadata",e[109]),e[110].set("action_type",e[59]),e[110].set("content_type",e[60]),e[110].set("identifiers",void 0),e[110].set("identifiers_v2",e[54]),e[110].set("task_creation_source",void 0),e[110].set("message_payload_source",d.i64.cast([0,2])),void 0!==void 0?(e[112]=(void 0).get("stored_procedure"),e[113]=(void 0).get("error_code"),e[114]=(void 0).get("error_message"),e[115]="."):0,e[90]!==void 0?(e[112]=e[90].get("stored_procedure"),e[113]=e[90].get("error_code"),e[114]=e[90].get("error_message"),e[115]="."):0,e[111]=d.createArray(),e[112]=(e[111].push(e[90]),e[111]),a=[void 0,void 0,e[110],e[111]],e[97]=a[0],e[98]=a[1],e[99]=a[2],e[100]=a[3],a}]):d.sequence([function(c){return d.i64.eq(e[59],d.i64.cast([0,1]))?(e[109]=e[64]===""?void 0:e[64],e[109]!==void 0?(c=[e[109],void 0],e[107]=c[0],e[108]=c[1],c):(e[110]=new d.Map(),e[110].set("error_code",d.i64.cast([0,30])),e[110].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),e[110].set("error_message",""),c=[void 0,e[110]],e[107]=c[0],e[108]=c[1],c),c=[e[107],e[108]],e[101]=c[0],e[102]=c[1],c):(c=["",void 0],e[101]=c[0],e[102]=c[1],c),e[101]!==void 0?d.sequence([function(a){return d.i64.eq(e[59],d.i64.cast([0,1]))?d.sequence([function(a){return e[113]=e[54].get("backup_id"),e[114]=e[54].get("act_thread_id"),d.storedProcedure(b("LSEncryptMessagePayloadV2"),e[113],e[114],e[72],e[101]).then(function(a){return a=a,e[115]=a[0],e[116]=a[1],a})},function(a){return a=[e[115],e[116]],e[107]=a[0],e[108]=a[1],a}]):d.resolve((e[113]=new d.Map(),e[113].set("encrypted_message_payload",""),e[113].set("value_secret_ref",""),a=[e[113],void 0],e[107]=a[0],e[108]=a[1],a))},function(c){return e[107]!==void 0?d.sequence([function(a){return e[113]=e[82].get("act_thread_id_ocmf_partial"),e[114]=e[82].get("otid_ocmf_partial"),e[115]=e[82].get("timestamp_encrypted"),e[116]=new d.Map(),e[116].set("list_key",e[113]),e[116].set("unique_key",e[114]),e[116].set("sort_key",e[115]),e[107]!==void 0?(e[149]=e[107].get("encrypted_message_payload"),e[150]=e[107].get("value_secret_ref"),e[151]=new d.Map(),e[151].set("value",e[149]),e[151].set("value_secret_ref",e[150]),e[117]=e[151]):e[117]=void 0,e[118]=new d.Map(),e[118].set("list_item_id",e[116]),e[118].set("list_item",e[117]),e[118].set("action_type",e[59]),e[119]=e[54].get("timestamp"),e[120]=e[54].get("otid"),e[121]=e[54].get("act_thread_id"),e[122]=e[54].get("supplemental_otid"),e[123]=new d.Map(),e[123].set("timestamp",e[119]),e[123].set("otid",e[120]),e[123].set("wa_thread_id",d.i64.from_string(e[121])),e[123].set("supplemental_otid",e[122]),e[124]=e[72].get("mailbox_base_salt"),d.nativeOperation(b("LSBase64Encode.nop"),e[124]).then(function(a){return a=a,e[125]=a[0],a})},function(a){return e[126]=e[72].get("ocmf_shared_key"),d.nativeOperation(b("LSBase64Encode.nop"),e[126]).then(function(a){return a=a,e[127]=a[0],a})},function(a){return e[128]=new d.Map(),e[128].set("mailbox_root_key",e[125]==null?"":e[125]),e[128].set("ocmf_client_state_blob",e[127]==null?"":e[127]),e[129]=e[82].get("backup_id_ocmf_partial"),e[130]=e[72].get("message_payload_encryption_keys"),e[131]=e[130].get("epoch_id"),e[132]=e[72].get("message_payload_encryption_keys"),e[133]=e[132].get("encryption_version"),e[148]=e[65]==null?"":e[65],e[134]=new d.Map(),e[134].set("mailbox_partial_id",e[129]),e[134].set("action",e[118]),e[134].set("device_id",e[34]),e[134].set("echo_version",d.i64.cast([0,0])),e[134].set("epoch_id",e[131]),e[134].set("trace_id",void 0),e[134].set("encryption_version",e[133]),e[134].set("is_thread",d.i64.eq(e[60],d.i64.cast([0,2]))),e[134].set("raw_identifiers",e[123]),e[134].set("raw_tokens",e[128]),e[134].set("request_id",e[148]),e[134].set("tam_thread_subtype",e[66]==null?d.i64.cast([0,0]):e[66]),e[134].set("is_instamadillo",e[67]==null?!1:e[67]),e[89]!==void 0?d.sequence([function(a){return e[149]=e[89].get("supplemental_data_encrypted"),e[149]!==void 0?d.sequence([function(a){return e[151]=e[89].get("protobuf_encrypted"),e[152]=e[89].get("backup_action"),e[153]=e[89].get("timestamp_ms"),e[154]=e[149].get("sk_ciphertext"),d.nativeOperation(b("LSBase64Encode.nop"),e[154]).then(function(a){return a=a,e[155]=a[0],a})},function(a){return e[156]=e[149].get("sk_hash"),d.nativeOperation(b("LSBase64Encode.nop"),e[156]).then(function(a){return a=a,e[157]=a[0],a})},function(a){return e[158]=e[89].get("message_tags"),e[159]=e[89].get("maybe_ooo_supplemental_upload"),e[160]=new d.Map(),e[160].set("supplementary_data_key",void 0),e[160].set("encrypted_protobuf",e[151]),e[160].set("key_value_backup_action",e[152]),e[160].set("protobuf_ts_ms",e[153]),e[160].set("supplemental_key_ciphertext",e[155]),e[160].set("supplemental_key_hash",e[157]),e[160].set("message_tags",e[158]),e[160].set("maybe_ooo_supplemental_upload",e[159]),e[150]=e[160]}]):d.resolve((e[151]=e[89].get("protobuf_encrypted"),e[152]=e[89].get("backup_action"),e[153]=e[89].get("timestamp_ms"),e[154]=e[89].get("message_tags"),e[155]=new d.Map(),e[155].set("supplementary_data_key",void 0),e[155].set("encrypted_protobuf",e[151]),e[155].set("key_value_backup_action",e[152]),e[155].set("protobuf_ts_ms",e[153]),e[155].set("message_tags",e[154]),e[150]=e[155]))},function(a){return e[134].set("key_value_backup_payload",e[150])}]):d.resolve()},function(a){return e[62]!==void 0?e[134].set("attachment_backup_payload",e[62]):function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure] attachment_payload is null."),e[148]!==void 0?d.nativeOperation(b("LSLogWebQpl.nop"),e[148],d.i64.cast([0,521481602]),"upload_start",d.i64.cast([0,0]),void 0,void 0):d.resolve()},function(b){return e[135]=d.toJSON(e[134]),d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[149]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[150]=void 0:e[150]=e[63],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[149],d.i64.cast([0,1e6])),e[18]),e[150]],e[136]=b[0],e[137]=b[1],e[138]=b[2],e[139]=b[3],e[140]=b[4],e[141]=b[5],e[142]=b[6],b):(f=c.item,e[149]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[150]=void 0:e[150]=e[63],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[149],d.i64.cast([0,1e6])),e[18]),e[150]],e[136]=b[0],e[137]=b[1],e[138]=b[2],e[139]=b[3],e[140]=b[4],e[141]=b[5],e[142]=b[6],b)})},function(a){return e[144]=new d.Map(),e[144].set("task_id",e[136]),e[144].set("queue_name",e[137]),e[144].set("enqueue_timestamp_ms",e[138]),e[144].set("priority",e[139]),e[144].set("first_executed_timestamp_ms",e[140]),e[144].set("execution_time_ns",e[141]),e[144].set("echo_encoding_execution_time_ns",e[142]),e[145]=new d.Map(),e[145].set("task_metadata",e[144]),e[145].set("action_type",e[59]),e[145].set("content_type",e[60]),e[145].set("identifiers",void 0),e[145].set("identifiers_v2",e[54]),e[145].set("task_creation_source",void 0),e[145].set("message_payload_source",d.i64.cast([0,2])),void 0!==void 0?(e[149]=(void 0).get("stored_procedure"),e[150]=(void 0).get("error_code"),e[151]=(void 0).get("error_message"),e[152]="."):0,e[90]!==void 0?(e[149]=e[90].get("stored_procedure"),e[150]=e[90].get("error_code"),e[151]=e[90].get("error_message"),e[152]="."):0,e[146]=new d.Map(),e[146].set("payload",e[135]),e[147]=d.createArray(),e[149]=(e[147].push(e[90]),e[147]),a=[e[146],void 0,e[145],e[147]],e[109]=a[0],e[110]=a[1],e[111]=a[2],e[112]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[124]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[125]=void 0:e[125]=e[63],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[124],d.i64.cast([0,1e6])),e[18]),e[125]],e[113]=b[0],e[114]=b[1],e[115]=b[2],e[116]=b[3],e[117]=b[4],e[118]=b[5],e[119]=b[6],b):(f=c.item,e[124]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[125]=void 0:e[125]=e[63],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[124],d.i64.cast([0,1e6])),e[18]),e[125]],e[113]=b[0],e[114]=b[1],e[115]=b[2],e[116]=b[3],e[117]=b[4],e[118]=b[5],e[119]=b[6],b)})},function(a){return e[121]=new d.Map(),e[121].set("task_id",e[113]),e[121].set("queue_name",e[114]),e[121].set("enqueue_timestamp_ms",e[115]),e[121].set("priority",e[116]),e[121].set("first_executed_timestamp_ms",e[117]),e[121].set("execution_time_ns",e[118]),e[121].set("echo_encoding_execution_time_ns",e[119]),e[122]=new d.Map(),e[122].set("task_metadata",e[121]),e[122].set("action_type",e[59]),e[122].set("content_type",e[60]),e[122].set("identifiers",void 0),e[122].set("identifiers_v2",e[54]),e[122].set("task_creation_source",void 0),e[122].set("message_payload_source",d.i64.cast([0,2])),e[108]!==void 0?(e[124]=e[108].get("stored_procedure"),e[125]=e[108].get("error_code"),e[126]=e[108].get("error_message"),e[127]="."):0,e[90]!==void 0?(e[124]=e[90].get("stored_procedure"),e[125]=e[90].get("error_code"),e[126]=e[90].get("error_message"),e[127]="."):0,e[123]=d.createArray(),e[124]=(e[123].push(e[90]),e[123]),a=[void 0,e[108],e[122],e[123]],e[109]=a[0],e[110]=a[1],e[111]=a[2],e[112]=a[3],a}])},function(a){return a=[e[109],e[110],e[111],e[112]],e[103]=a[0],e[104]=a[1],e[105]=a[2],e[106]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[118]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[119]=void 0:e[119]=e[63],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[118],d.i64.cast([0,1e6])),e[18]),e[119]],e[107]=b[0],e[108]=b[1],e[109]=b[2],e[110]=b[3],e[111]=b[4],e[112]=b[5],e[113]=b[6],b):(f=c.item,e[118]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[119]=void 0:e[119]=e[63],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[118],d.i64.cast([0,1e6])),e[18]),e[119]],e[107]=b[0],e[108]=b[1],e[109]=b[2],e[110]=b[3],e[111]=b[4],e[112]=b[5],e[113]=b[6],b)})},function(a){return e[115]=new d.Map(),e[115].set("task_id",e[107]),e[115].set("queue_name",e[108]),e[115].set("enqueue_timestamp_ms",e[109]),e[115].set("priority",e[110]),e[115].set("first_executed_timestamp_ms",e[111]),e[115].set("execution_time_ns",e[112]),e[115].set("echo_encoding_execution_time_ns",e[113]),e[116]=new d.Map(),e[116].set("task_metadata",e[115]),e[116].set("action_type",e[59]),e[116].set("content_type",e[60]),e[116].set("identifiers",void 0),e[116].set("identifiers_v2",e[54]),e[116].set("task_creation_source",void 0),e[116].set("message_payload_source",d.i64.cast([0,2])),e[102]!==void 0?(e[118]=e[102].get("stored_procedure"),e[119]=e[102].get("error_code"),e[120]=e[102].get("error_message"),e[121]="."):0,e[90]!==void 0?(e[118]=e[90].get("stored_procedure"),e[119]=e[90].get("error_code"),e[120]=e[90].get("error_message"),e[121]="."):0,e[117]=d.createArray(),e[118]=(e[117].push(e[90]),e[117]),a=[void 0,e[102],e[116],e[117]],e[103]=a[0],e[104]=a[1],e[105]=a[2],e[106]=a[3],a}])},function(a){return a=[e[103],e[104],e[105],e[106]],e[97]=a[0],e[98]=a[1],e[99]=a[2],e[100]=a[3],a}])},function(a){return a=[e[97],e[98],e[99],e[100]],e[91]=a[0],e[92]=a[1],e[93]=a[2],e[94]=a[3],a}])},function(a){return a=[e[91],e[92],e[93],e[94]],e[84]=a[0],e[85]=a[1],e[86]=a[2],e[87]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[99]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[100]=void 0:e[100]=e[63],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[99],d.i64.cast([0,1e6])),e[18]),e[100]],e[88]=b[0],e[89]=b[1],e[90]=b[2],e[91]=b[3],e[92]=b[4],e[93]=b[5],e[94]=b[6],b):(f=c.item,e[99]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[100]=void 0:e[100]=e[63],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[99],d.i64.cast([0,1e6])),e[18]),e[100]],e[88]=b[0],e[89]=b[1],e[90]=b[2],e[91]=b[3],e[92]=b[4],e[93]=b[5],e[94]=b[6],b)})},function(a){return e[96]=new d.Map(),e[96].set("task_id",e[88]),e[96].set("queue_name",e[89]),e[96].set("enqueue_timestamp_ms",e[90]),e[96].set("priority",e[91]),e[96].set("first_executed_timestamp_ms",e[92]),e[96].set("execution_time_ns",e[93]),e[96].set("echo_encoding_execution_time_ns",e[94]),e[97]=new d.Map(),e[97].set("task_metadata",e[96]),e[97].set("action_type",e[59]),e[97].set("content_type",e[60]),e[97].set("identifiers",void 0),e[97].set("identifiers_v2",e[54]),e[97].set("task_creation_source",void 0),e[97].set("message_payload_source",d.i64.cast([0,2])),e[83]!==void 0?(e[99]=e[83].get("stored_procedure"),e[100]=e[83].get("error_code"),e[101]=e[83].get("error_message"),e[102]="."):0,void 0!==void 0?(e[99]=(void 0).get("stored_procedure"),e[100]=(void 0).get("error_code"),e[101]=(void 0).get("error_message"),e[102]="."):0,e[98]=d.createArray(),e[99]=(e[98].push(void 0),e[98]),a=[void 0,e[83],e[97],e[98]],e[84]=a[0],e[85]=a[1],e[86]=a[2],e[87]=a[3],a}])},function(a){return a=[e[84],e[85],e[86],e[87]],e[74]=a[0],e[75]=a[1],e[76]=a[2],e[77]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[89]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[90]=void 0:e[90]=e[63],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[89],d.i64.cast([0,1e6])),e[18]),e[90]],e[78]=b[0],e[79]=b[1],e[80]=b[2],e[81]=b[3],e[82]=b[4],e[83]=b[5],e[84]=b[6],b):(f=c.item,e[89]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[90]=void 0:e[90]=e[63],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[89],d.i64.cast([0,1e6])),e[18]),e[90]],e[78]=b[0],e[79]=b[1],e[80]=b[2],e[81]=b[3],e[82]=b[4],e[83]=b[5],e[84]=b[6],b)})},function(a){return e[86]=new d.Map(),e[86].set("task_id",e[78]),e[86].set("queue_name",e[79]),e[86].set("enqueue_timestamp_ms",e[80]),e[86].set("priority",e[81]),e[86].set("first_executed_timestamp_ms",e[82]),e[86].set("execution_time_ns",e[83]),e[86].set("echo_encoding_execution_time_ns",e[84]),e[87]=new d.Map(),e[87].set("task_metadata",e[86]),e[87].set("action_type",e[59]),e[87].set("content_type",e[60]),e[87].set("identifiers",void 0),e[87].set("identifiers_v2",e[54]),e[87].set("task_creation_source",void 0),e[87].set("message_payload_source",d.i64.cast([0,2])),e[73]!==void 0?(e[89]=e[73].get("stored_procedure"),e[90]=e[73].get("error_code"),e[91]=e[73].get("error_message"),e[92]="."):0,void 0!==void 0?(e[89]=(void 0).get("stored_procedure"),e[90]=(void 0).get("error_code"),e[91]=(void 0).get("error_message"),e[92]="."):0,e[88]=d.createArray(),e[89]=(e[88].push(void 0),e[88]),a=[void 0,e[73],e[87],e[88]],e[74]=a[0],e[75]=a[1],e[76]=a[2],e[77]=a[3],a}])},function(a){return a=[e[74],e[75],e[76],e[77]],e[55]=a[0],e[56]=a[1],e[57]=a[2],e[58]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[80]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[81]=void 0:e[81]=e[63],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[80],d.i64.cast([0,1e6])),e[18]),e[81]],e[68]=b[0],e[69]=b[1],e[70]=b[2],e[71]=b[3],e[72]=b[4],e[73]=b[5],e[74]=b[6],b):(f=c.item,e[80]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[81]=void 0:e[81]=e[63],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[80],d.i64.cast([0,1e6])),e[18]),e[81]],e[68]=b[0],e[69]=b[1],e[70]=b[2],e[71]=b[3],e[72]=b[4],e[73]=b[5],e[74]=b[6],b)})},function(a){return e[76]=new d.Map(),e[76].set("task_id",e[68]),e[76].set("queue_name",e[69]),e[76].set("enqueue_timestamp_ms",e[70]),e[76].set("priority",e[71]),e[76].set("first_executed_timestamp_ms",e[72]),e[76].set("execution_time_ns",e[73]),e[76].set("echo_encoding_execution_time_ns",e[74]),e[77]=new d.Map(),e[77].set("task_metadata",e[76]),e[77].set("action_type",e[59]),e[77].set("content_type",e[60]),e[77].set("identifiers",void 0),e[77].set("identifiers_v2",e[54]),e[77].set("task_creation_source",void 0),e[77].set("message_payload_source",d.i64.cast([0,2])),e[78]=new d.Map(),e[78].set("error_code",e[61]),e[78].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),e[78].set("error_message",""),e[78]!==void 0?(e[80]=e[78].get("stored_procedure"),e[81]=e[78].get("error_code"),e[82]=e[78].get("error_message"),e[83]="."):0,void 0!==void 0?(e[80]=(void 0).get("stored_procedure"),e[81]=(void 0).get("error_code"),e[82]=(void 0).get("error_message"),e[83]="."):0,e[79]=d.createArray(),a=[void 0,e[78],e[77],e[79]],e[55]=a[0],e[56]=a[1],e[57]=a[2],e[58]=a[3],a}])},function(a){return a=[e[55],e[56],e[57],e[58]],e[49]=a[0],e[50]=a[1],e[51]=a[2],e[52]=a[3],a}]))})},function(a){return a=[e[49],e[50],e[51],e[52]],e[41]=a[0],e[42]=a[1],e[43]=a[2],e[44]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(b,c){var f=b.done;b=b.value;return f?(e[57]=d.i64.of_float(Date.now()),f=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[57],d.i64.cast([0,1e6])),e[18]),void 0],e[45]=f[0],e[46]=f[1],e[47]=f[2],e[48]=f[3],e[49]=f[4],e[50]=f[5],e[51]=f[6],f):(c=b.item,e[57]=d.i64.of_float(Date.now()),f=[a[0],c.queueName,c.enqueueTimestampMs,void 0,c.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[57],d.i64.cast([0,1e6])),e[18]),void 0],e[45]=f[0],e[46]=f[1],e[47]=f[2],e[48]=f[3],e[49]=f[4],e[50]=f[5],e[51]=f[6],f)})},function(a){return e[53]=new d.Map(),e[53].set("task_id",e[45]),e[53].set("queue_name",e[46]),e[53].set("enqueue_timestamp_ms",e[47]),e[53].set("priority",e[48]),e[53].set("first_executed_timestamp_ms",e[49]),e[53].set("execution_time_ns",e[50]),e[53].set("echo_encoding_execution_time_ns",e[51]),e[54]=new d.Map(),e[54].set("task_metadata",e[53]),e[54].set("action_type",void 0),e[54].set("content_type",void 0),e[54].set("identifiers",void 0),e[54].set("identifiers_v2",void 0),e[54].set("task_creation_source",void 0),e[54].set("message_payload_source",d.i64.cast([0,2])),e[55]=new d.Map(),e[55].set("error_code",d.i64.cast([0,24])),e[55].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),e[55].set("error_message",""),e[55]!==void 0?(e[57]=e[55].get("stored_procedure"),e[58]=e[55].get("error_code"),e[59]=e[55].get("error_message"),e[60]="."):0,void 0!==void 0?(e[57]=(void 0).get("stored_procedure"),e[58]=(void 0).get("error_code"),e[59]=(void 0).get("error_message"),e[60]="."):0,e[56]=d.createArray(),a=[void 0,e[55],e[54],e[56]],e[41]=a[0],e[42]=a[1],e[43]=a[2],e[44]=a[3],a}])},function(a){return a=[e[41],e[42],e[43],e[44]],e[11]=a[0],e[12]=a[1],e[13]=a[2],e[14]=a[3],a}]):d.sequence([function(b){return e[22]=e[9].get("errors"),e[23]=e[9].get("errors"),d.db.table(2).fetch([[[a[0]]]]).next().then(function(b,c){var f=b.done;b=b.value;return f?(e[36]=d.i64.of_float(Date.now()),f=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[36],d.i64.cast([0,1e6])),e[18]),void 0],e[24]=f[0],e[25]=f[1],e[26]=f[2],e[27]=f[3],e[28]=f[4],e[29]=f[5],e[30]=f[6],f):(c=b.item,e[36]=d.i64.of_float(Date.now()),f=[a[0],c.queueName,c.enqueueTimestampMs,void 0,c.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[36],d.i64.cast([0,1e6])),e[18]),void 0],e[24]=f[0],e[25]=f[1],e[26]=f[2],e[27]=f[3],e[28]=f[4],e[29]=f[5],e[30]=f[6],f)})},function(a){return e[32]=new d.Map(),e[32].set("task_id",e[24]),e[32].set("queue_name",e[25]),e[32].set("enqueue_timestamp_ms",e[26]),e[32].set("priority",e[27]),e[32].set("first_executed_timestamp_ms",e[28]),e[32].set("execution_time_ns",e[29]),e[32].set("echo_encoding_execution_time_ns",e[30]),e[33]=new d.Map(),e[33].set("task_metadata",e[32]),e[33].set("action_type",void 0),e[33].set("content_type",void 0),e[33].set("identifiers",void 0),e[33].set("identifiers_v2",void 0),e[33].set("task_creation_source",void 0),e[33].set("message_payload_source",d.i64.cast([0,2])),e[34]=new d.Map(),e[34].set("error_code",d.i64.cast([0,1])),e[34].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),e[34].set("error_message",""),e[34]!==void 0?(e[36]=e[34].get("stored_procedure"),e[37]=e[34].get("error_code"),e[38]=e[34].get("error_message"),e[39]="."):0,void 0!==void 0?(e[36]=(void 0).get("stored_procedure"),e[37]=(void 0).get("error_code"),e[38]=(void 0).get("error_message"),e[39]="."):0,e[35]=d.createArray(),a=[void 0,e[34],e[33],e[35]],e[11]=a[0],e[12]=a[1],e[13]=a[2],e[14]=a[3],a}])},function(a){return e[15]=d.i64.of_float(Date.now()),e[16]=d.i64.random(),e[19]="Finishing execution. Execution time: ",e[20]=d.i64.to_string(d.i64.sub(e[15],e[0])),e[21]=" ms",e[17]="",function(a){d.logger(a).info(a)}(["[EncryptedBackups][serializeBackupPayloadV2] ",e[17],e[19],e[17],e[20],e[17],e[21]].join("")),d.i64.eq(d.i64.mod_(e[16],d.i64.cast([0,1e3])),d.i64.cast([0,0]))?(e[22]=",",e[23]=d.createArray(),void 0!==void 0?e[24]=(e[23].push(void 0),e[23]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"serializeBackupPayloadV2",[e[19],e[22],e[20],e[22],e[21]].join(""),e[23],d.i64.cast([0,4]))):d.resolve()},function(a){return a=[e[11],e[12],e[13],e[14]],f[0]=a[0],f[1]=a[1],f[2]=a[2],f[3]=a[3],a}])},function(a){return d.resolve(f)}])}a.__sproc_name__="LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure";a.__tables__=["pending_tasks","secure_encrypted_backups_client_state","pending_backups_context_v2","secure_encrypted_backups_epochs"];d=a;g["default"]=d}),98);
__d("LSTaskSerializerEncryptedBackupsUpload",["LSArrayGetObjectAt","LSLogMebClientEvent.nop","LSSerializeBackupPayloadV2"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][taskSerializerEncryptedBackupsUpload] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.forEach(c.db.table(177).fetch([[[a[0]]],"fk_pending_tasks"]),function(a){var b=a.update;a.item;return b({backupStatus:c.i64.cast([0,2])})})},function(e){return c.storedProcedure(b("LSSerializeBackupPayloadV2"),a[0]).then(function(a){return a=a,d[2]=a[0],d[3]=a[1],d[4]=a[2],d[5]=a[3],a})},function(a){return d[6]=c.createArray(),d[7]=c.i64.of_int32(d[5].length),c.i64.gt(d[7],c.i64.cast([0,0]))?c.loopAsync(d[7],function(a){return d[23]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[5],d[23]).then(function(a){return a=a,d[24]=a[0],d[25]=a[1],a})},function(a){return d[24]!==void 0?d[26]=(d[6].push(d[24]),d[6]):0}])}):c.resolve()},function(a){return d[8]=c.i64.of_int32(d[6].length),c.i64.gt(d[8],c.i64.cast([0,0]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[6],c.i64.cast([0,0])).then(function(a){return a=a,d[23]=a[0],d[24]=a[1],a})},function(a){return d[9]=d[23]}]):c.resolve(d[9]=void 0)},function(a){return d[2]?d[10]=!1:d[10]=!0,d[10]?(d[3]?d[23]=!1:d[23]=!0,d[23]?(a=[void 0,void 0,d[9],d[6],d[4]],d[24]=a[0],d[25]=a[1],d[26]=a[2],d[27]=a[3],d[28]=a[4],a):(a=[void 0,d[3],d[9],d[6],d[4]],d[24]=a[0],d[25]=a[1],d[26]=a[2],d[27]=a[3],d[28]=a[4],a),a=[d[24],d[25],d[26],d[27],d[28]],d[11]=a[0],d[12]=a[1],d[13]=a[2],d[14]=a[3],d[15]=a[4],a):(d[23]=d[2].get("payload"),a=[d[23],d[3],d[9],d[6],d[4]],d[11]=a[0],d[12]=a[1],d[13]=a[2],d[14]=a[3],d[15]=a[4],a),d[23]=new c.Map(),d[24]=d[23].set("success",d[11]),d[25]=d[23].set("failure",d[12]),d[26]=d[23].set("protobuf_failure",d[13]),d[27]=d[23].set("protobuf_failures",d[14]),d[28]=d[23].set("context",d[15]),d[29]=c.toJSON(d[23]),d[16]=d[29],d[17]=c.i64.of_float(Date.now()),d[18]=c.i64.random(),d[20]="Finishing execution. Execution time: ",d[21]=c.i64.to_string(c.i64.sub(d[17],d[0])),d[22]=" ms",d[19]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][taskSerializerEncryptedBackupsUpload] ",d[19],d[20],d[19],d[21],d[19],d[22]].join("")),c.i64.eq(c.i64.mod_(d[18],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[23]=",",d[24]=c.createArray(),void 0!==void 0?d[25]=(d[24].push(void 0),d[24]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"taskSerializerEncryptedBackupsUpload",[d[20],d[23],d[21],d[23],d[22]].join(""),d[24],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[16],c.i64.cast([0,50026])],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadStoredProcedure";a.__tables__=["pending_backups_context_v2"];e.exports=a}),null);
__d("LSTaskSerializerEncryptedBackupsUploadProtobufOnly",[],(function(a,b,c,d,e,f){function a(){var a,b=arguments,c=b[b.length-1],d=[],e=[];return d[0]=new c.Map(),d[0].set("error_code",c.i64.cast([0,802])),d[0].set("stored_procedure","LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadProtobufOnlyStoredProcedure"),d[0].set("error_message",""),d[2]=new c.Map(),d[3]=d[2].set("success",void 0),d[4]=d[2].set("failure",d[0]),d[5]=d[2].set("context",void 0),d[6]=c.toJSON(d[2]),d[1]=d[6],a=[d[1],c.i64.cast([0,50042]),void 0],e[0]=a[0],e[1]=a[1],e[2]=a[2],a,c.resolve(e)}a.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadProtobufOnlyStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSTaskSerializerEncryptedBackupsUploadSenderBackup",["LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(a){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][taskSerializerEncryptedBackupsUploadSenderBackup] Beginning execution."),d[1]=c.i64.of_float(Date.now()),function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadSenderBackupStoredProcedure] LSEncryptedBackupsMinosEncrypt native op not supported"),d[3]="LSEncryptedBackupsMinosEncrypt native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadSenderBackupStoredProcedure] ","",d[3]].join("")),d[2]=c.createArray(),void 0!==void 0?d[12]=(d[2].push(void 0),d[2]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadSenderBackupStoredProcedure",d[3],d[2],c.i64.cast([0,3]))},function(a){return d[4]=new c.Map(),d[4].set("error_code",c.i64.cast([0,3])),d[4].set("stored_procedure","taskSerializerEncryptedBackupsUploadSenderBackup"),d[4].set("error_message",""),d[12]=new c.Map(),d[13]=d[12].set("success",void 0),d[14]=d[12].set("failure",d[4]),d[15]=d[12].set("context",void 0),d[16]=c.toJSON(d[12]),d[5]=d[16],d[6]=c.i64.of_float(Date.now()),d[7]=c.i64.random(),d[9]="Finishing execution. Execution time: ",d[10]=c.i64.to_string(c.i64.sub(d[6],d[0])),d[11]=" ms",d[8]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][taskSerializerEncryptedBackupsUploadSenderBackup] ",d[8],d[9],d[8],d[10],d[8],d[11]].join("")),c.i64.eq(c.i64.mod_(d[7],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[12]=",",d[13]=c.createArray(),void 0!==void 0?d[14]=(d[13].push(void 0),d[13]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"taskSerializerEncryptedBackupsUploadSenderBackup",[d[9],d[12],d[10],d[12],d[11]].join(""),d[13],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[5],c.i64.cast([0,50057]),void 0],e[0]=a[0],e[1]=a[1],e[2]=a[2],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadSenderBackupStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSTaskSerializerMuteThreadV2",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return b.db.table(32).fetch([[[a[0]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?(c[4]=b.createArray(),c[5]=(c[4].push("TaskSerializerMuteThreadV2: Task ID not found"),c[4]),c[6]=(c[4].push(a[0]),c[4]),c[7]=b.toJSON(c[4]),function(a){b.logger(a).mustfix(a)}(c[7]),f=[void 0,void 0,void 0],c[0]=f[0],c[1]=f[1],c[2]=f[2],f):(e=d.item,b.sequence([function(a){return c[8]=e.threadKey,b.db.table(9).fetch([[[c[8]]]]).next().then(function(d,e){var a=d.done;d=d.value;return a?(c[9]=b.createArray(),c[10]=(c[9].push("TaskSerializerMuteThreadV2: Thread not found"),c[9]),c[11]=(c[9].push(c[8]),c[9]),c[12]=b.toJSON(c[9]),function(a){b.logger(a).mustfix(a)}(c[12]),a=[void 0,void 0,void 0],c[4]=a[0],c[5]=a[1],c[6]=a[2],a):(e=d.item,b.sequence([function(a){return b.db.table(9).fetch([[[c[8]]]]).next().then(function(d,e){var a=d.done;d=d.value;return a?c[9]=b.i64.cast([0,1]):(e=d.item,c[14]=e.syncGroup,b.i64.neq(c[14],void 0)?c[13]=c[14]:c[13]=b.i64.cast([0,1]),c[9]=c[13])})},function(a){return c[11]=new b.Map(),c[11].set("thread_key",c[8]),c[11].set("mailbox_type",b.i64.cast([0,0])),c[11].set("mute_expire_time_ms",e.muteExpireTimeMs),c[11].set("sync_group",c[9]),c[12]=b.toJSON(c[11]),a=[c[12],b.i64.cast([0,144]),void 0],c[4]=a[0],c[5]=a[1],c[6]=a[2],a}]))})},function(a){return a=[c[4],c[5],c[6]],c[0]=a[0],c[1]=a[1],c[2]=a[2],a}]))})},function(a){return a=[c[0],c[1]],d[0]=a[0],d[1]=a[1],a}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxTaskSerializerMuteThreadV2StoredProcedure";a.__tables__=["threads_optimistic_context","threads"];e.exports=a}),null);
__d("LSTaskSerializerRemoveThread",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return b.db.table(32).fetch([[[a[0]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?(c[4]=b.createArray(),c[5]=(c[4].push("TaskSerializerRemoveThreadV2: Task ID not found"),c[4]),c[6]=(c[4].push(a[0]),c[4]),c[7]=b.toJSON(c[4]),function(a){b.logger(a).mustfix(a)}(c[7]),f=[void 0,void 0,void 0],c[0]=f[0],c[1]=f[1],c[2]=f[2],f):(e=d.item,c[7]=e.removeType,b.i64.neq(c[7],void 0)?(c[8]=new b.Map(),c[8].set("thread_key",e.threadKey),c[8].set("remove_type",c[7]),c[8].set("sync_group",e.syncGroup==null?b.i64.cast([0,1]):e.syncGroup),c[9]=b.toJSON(c[8]),f=[c[9],b.i64.cast([0,146]),void 0],c[4]=f[0],c[5]=f[1],c[6]=f[2],f):(d=[void 0,void 0,void 0],c[4]=d[0],c[5]=d[1],c[6]=d[2],d),e=[c[4],c[5],c[6]],c[0]=e[0],c[1]=e[1],c[2]=e[2],e)})},function(a){return a=[c[0],c[1]],d[0]=a[0],d[1]=a[1],a}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxTaskSerializerRemoveThreadStoredProcedure";a.__tables__=["threads_optimistic_context"];e.exports=a}),null);
__d("LSTaskSerializerSendMessageV2",["LSSymmetricEncryptionCreateEncryptedString.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return b.db.table(31).fetch([[[a[0]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?(c[4]=b.createArray(),c[5]=(c[4].push("task ID not found"),c[4]),c[6]=(c[4].push(a[0]),c[4]),c[7]=b.toJSON(c[4]),function(a){b.logger(a).mustfix(a)}(c[7]),f=[void 0,void 0,void 0],c[0]=f[0],c[1]=f[1],c[2]=f[2],f):(e=d.item,b.sequence([function(d){return c[11]=e.offlineThreadingId,c[12]=e.messageId,c[21]=e.threadAttributionSource,c[9]=e.platformRef,c[10]=e.platformToken,c[8]=e.replySourceId,c[13]=e.replySourceType,c[20]=e.sendType,c[22]=e.markThreadRead,c[14]=e.initiatingSource,c[15]=e.skipUrlPreviewGen,c[17]=e.textHasLinks,c[18]=e.dataclassParams,c[19]=e.multitabEnv,c[16]=e.richTextFormatType,b.db.table(12).fetch([[[c[11]]],"optimistic"]).next().then(function(e,f){var d=e.done;e=e.value;return d?(c[23]=b.createArray(),c[24]=(c[23].push("OTID not found"),c[23]),c[25]=(c[23].push(c[11]),c[23]),c[26]=b.toJSON(c[23]),function(a){b.logger(a).mustfix(a)}(c[26]),d=[void 0,void 0,void 0],c[4]=d[0],c[5]=d[1],c[6]=d[2],d):(f=e.item,b.sequence([function(d){return c[31]=f.text,c[27]=f.threadKey,c[32]=f.messageId,c[40]=f.senderId,c[29]=f.stickerId,c[34]=f.mentionOffsets,c[35]=f.mentionLengths,c[28]=f.mentionIds,c[36]=f.mentionTypes,c[39]=f.replyType,c[37]=f.isForwarded,c[33]=f.forwardScore,c[38]=f.hotEmojiSize,c[30]=f.metadataDataclass,b.db.table(9).fetch([[[c[27]]]]).next().then(function(e,g){var d=e.done;e=e.value;return d?(c[41]=b.createArray(),c[42]=(c[41].push("thread not found"),c[41]),c[43]=(c[41].push(c[27]),c[41]),c[44]=b.toJSON(c[41]),function(a){b.logger(a).mustfix(a)}(c[44]),d=[void 0,void 0,void 0],c[23]=d[0],c[24]=d[1],c[25]=d[2],d):(g=e.item,b.sequence([function(d){return c[48]=g.threadName,c[47]=g.threadKey,c[49]=g.mailboxType,c[41]=g.threadType,c[50]=g.capabilities,c[51]=g.capabilities2,c[52]=g.capabilities3,c[53]=g.capabilities4,c[54]=g.capabilities5,b.db.table(2).fetch([[[a[0]]]]).next().then(function(e,f){var d=e.done;e=e.value;return d?c[42]=!1:(f=e.item,b.sequence([function(d){return b.islc(b.db.table(2).fetch([[[f.queueName]],"queueNameTaskId"]),0,b.i64.to_float(b.i64.cast([0,1]))).next().then(function(e,f){var d=e.done;e=e.value;return d?c[55]=!1:(f=e.item,c[55]=b.i64.eq(f.taskId,a[0]))})},function(a){return c[42]=c[55]}]))})},function(a){return b.i64.eq(g.authorityLevel,b.i64.cast([0,20]))&&(b.i64.eq(c[41],b.i64.cast([0,2]))||b.i64.eq(c[41],b.i64.cast([0,5]))||b.i64.eq(c[41],b.i64.cast([0,26])))&&c[42]?b.sequence([function(a){return c[58]=c[20]==null?b.i64.cast([0,1]):c[20],b.db.table(9).fetch([[[c[27]]]]).next().then(function(d,e){var a=d.done;d=d.value;return a?c[55]=b.i64.cast([0,1]):(e=d.item,c[73]=e.syncGroup,b.i64.neq(c[73],void 0)?c[72]=c[73]:c[72]=b.i64.cast([0,1]),c[55]=c[72])})},function(a){return c[57]=new b.Map(),c[57].set("thread_id",c[27]),c[57].set("otid",c[11]),c[57].set("source",c[21]==null?b.i64.cast([0,0]):c[21]),c[57].set("send_type",b.i64.cast([0,1])),c[57].set("sync_group",c[55]),c[57].set("mark_thread_read",c[22]),b.i64.eq(c[58],b.i64.cast([0,1]))?b.resolve(c[57].set("text",c[31])):b.i64.eq(c[58],b.i64.cast([0,2]))?b.resolve(b.i64.neq(c[29],void 0)?(c[57].set("sticker_id",c[29]),c[57].set("send_type",c[58])):0):b.i64.eq(c[58],b.i64.cast([0,7]))?b.sequence([function(a){return b.db.table(16).fetch([[[c[27],c[32]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?(a=[void 0,void 0],c[72]=a[0],c[73]=a[1],a):(d=b.item,a=[d.filename,d.attributionAppId],c[72]=a[0],c[73]=a[1],a)})},function(a){return c[72]!==void 0?b.i64.neq(c[73],void 0)?(c[57].set("url",c[72]),c[57].set("attribution_app_id",c[73]),c[57].set("send_type",c[58]),c[30]!==void 0?c[57].set("metadata_dataclass",c[30]):0):0:0}]):b.i64.eq(c[58],b.i64.cast([0,3]))?b.sequence([function(a){return c[57].set("text",c[31]),c[72]=b.createArray(),c[73]=b.createArray(),b.forEach(b.sortBy(b.db.table(16).fetch([[[c[27],c[32]]]]),[["attachmentIndex","ASC"]]),function(a){a=a.item;return c[74]=a.offlineAttachmentId,c[75]=(c[72].push(b.i64.from_string(a.attachmentFbid)),c[72]),c[74]!==void 0?c[75]=(c[73].push(c[74]),c[73]):0})},function(a){return c[57].set("attachment_fbids",c[72]),b.i64.eq(c[58],b.i64.cast([0,9]))?c[57].set("offline_attachment_ids",c[73]):0,c[57].set("send_type",c[58])}]):b.i64.eq(c[58],b.i64.cast([0,9]))?b.sequence([function(a){return c[57].set("text",c[31]),c[72]=b.createArray(),c[73]=b.createArray(),b.forEach(b.sortBy(b.db.table(16).fetch([[[c[27],c[32]]]]),[["attachmentIndex","ASC"]]),function(a){a=a.item;return c[74]=a.offlineAttachmentId,c[75]=(c[72].push(b.i64.from_string(a.attachmentFbid)),c[72]),c[74]!==void 0?c[75]=(c[73].push(c[74]),c[73]):0})},function(a){return c[57].set("attachment_fbids",c[72]),b.i64.eq(c[58],b.i64.cast([0,9]))?c[57].set("offline_attachment_ids",c[73]):0,c[57].set("send_type",c[58])}]):b.i64.eq(c[58],b.i64.cast([0,4]))?b.sequence([function(a){return b.db.table(16).fetch([[[c[27],c[32]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?c[72]=void 0:(d=b.item,c[72]=d.attachmentFbid)})},function(a){return b.db.table(16).fetch([[[c[27],c[32]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?c[74]=void 0:(d=b.item,c[74]=d.actionUrl)})},function(a){return c[72]!==void 0?(c[57].set("text",c[31]),c[74]!==void 0?c[57].set("url",c[74]):0,c[57].set("forwarded_share_id",c[72]),c[57].set("send_type",c[58])):0}]):b.i64.eq(c[58],b.i64.cast([0,5]))?b.resolve(c[12]!==void 0?(c[57].set("forwarded_msg_id",c[12]),c[57].set("send_type",c[58]),b.i64.neq(c[33],void 0)?c[57].set("forward_score",c[33]):0,c[57].set("strip_forwarded_msg_caption",!1)):0):b.i64.eq(c[58],b.i64.cast([0,6]))?b.sequence([function(a){return b.db.table(16).fetch([[[c[27],c[32]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?(a=[void 0,void 0],c[72]=a[0],c[73]=a[1],a):(d=b.item,a=[d.filename,d.attributionAppId],c[72]=a[0],c[73]=a[1],a)})},function(a){return c[72]!==void 0?(c[57].set("url",c[72]),c[57].set("text",c[31]),c[57].set("send_type",c[58])):0}]):b.i64.eq(c[58],b.i64.cast([0,11]))?b.sequence([function(a){return b.db.table(16).fetch([[[c[27],c[32]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?(a=[void 0,void 0],c[72]=a[0],c[73]=a[1],a):(d=b.item,a=[d.actionUrl,d.attributionAppId],c[72]=a[0],c[73]=a[1],a)})},function(a){return c[72]!==void 0?(c[57].set("url",c[72]),c[57].set("text",c[31]),c[57].set("send_type",c[58])):0}]):b.resolve(0)},function(a){return c[68]=c[8]===""?void 0:c[8],c[68]!==void 0?b.i64.neq(c[13],void 0)?(c[72]=new b.Map(),c[72].set("reply_source_id",c[68]),c[72].set("reply_source_type",c[13]),c[72].set("reply_type",c[39]==null?b.i64.cast([0,0]):c[39]),c[72].set("reply_source_attachment_id",void 0),c[57].set("reply_metadata",c[72])):0:0,c[69]=c[28]===""?void 0:c[28],c[69]!==void 0?(c[72]=c[34]===""?void 0:c[34],c[72]!==void 0?(c[73]=c[35]===""?void 0:c[35],c[73]!==void 0?(c[74]=new b.Map(),c[74].set("mention_ids",c[69]),c[74].set("mention_offsets",c[72]),c[74].set("mention_lengths",c[73]),c[74].set("mention_types",c[36]===""?void 0:c[36]),c[57].set("mention_data",c[74])):0):0):0,c[37]!==void 0?c[57].set("is_forwarded",c[37]):0,c[70]=c[9]===""?void 0:c[9],c[70]!==void 0?c[57].set("platform_ref",c[70]):0,c[71]=c[10]===""?void 0:c[10],c[71]!==void 0?c[57].set("platform_token",c[71]):0,[b.i64.cast([0,1]),b.i64.cast([0,2])].some(function(a){return b.i64.eq(c[58],a)})?b.i64.neq(c[38],void 0)?c[57].set("hot_emoji_size",c[38]):0:0,b.i64.neq(c[14],void 0)?c[57].set("initiating_source",c[14]):0,c[15]!==void 0?c[57].set("skip_url_preview_gen",c[15]):0,b.i64.neq(c[16],void 0)?c[57].set("rich_text_format_type",c[16]):0,b.resolve()},function(a){return c[17]!==void 0?c[57].set("text_has_links",c[17]):0,c[18]!==void 0?c[57].set("dataclass_params",c[18]):0,c[19]!==void 0?c[57].set("multitab_env",c[19]):0,b.filter(b.db.table(14).fetch([[[c[47],c[40]]]]),function(a){return b.i64.eq(a.threadKey,c[47])&&b.i64.eq(b.i64.cast([0,0]),c[49])&&b.i64.eq(a.contactId,c[40])}).next().then(function(d,e){var a=d.done;d=d.value;return a?c[59]=!1:(e=d.item,b.i64.eq(c[41],b.i64.cast([0,152]))?(c[73]=e.threadRoles,b.i64.lt(b.i64.cast([0,7]),b.i64.cast([0,0]))||b.i64.gt(b.i64.cast([0,7]),b.i64.cast([0,7]))?c[74]=!1:c[74]=!b.i64.eq(b.i64.and_(b.i64.lsl_(b.i64.cast([0,1]),b.i64.to_int32(b.i64.cast([0,7]))),c[73]),b.i64.cast([0,0])),c[75]=c[50],c[76]=c[51],c[77]=c[52],c[78]=c[53],c[79]=c[54],c[81]=b.i64.div(b.i64.cast([0,223]),b.i64.cast([0,64])),c[82]=b.i64.lsl_(b.i64.cast([0,1]),b.i64.to_int32(b.i64.sub(b.i64.cast([0,223]),b.i64.mul(c[81],b.i64.cast([0,64]))))),b.i64.lt(b.i64.cast([0,223]),b.i64.cast([0,0]))||b.i64.gt(b.i64.cast([0,223]),b.i64.cast([0,281]))?c[80]=!1:(b.i64.eq(c[81],b.i64.cast([0,0]))?c[83]=!b.i64.eq(b.i64.and_(c[82],c[75]),b.i64.cast([0,0])):(b.i64.eq(c[81],b.i64.cast([0,1]))?c[84]=!b.i64.eq(b.i64.and_(c[82],c[76]),b.i64.cast([0,0])):(b.i64.eq(c[81],b.i64.cast([0,2]))?c[85]=!b.i64.eq(b.i64.and_(c[82],c[77]),b.i64.cast([0,0])):(b.i64.eq(c[81],b.i64.cast([0,3]))?c[86]=!b.i64.eq(b.i64.and_(c[82],c[78]),b.i64.cast([0,0])):(b.i64.eq(c[81],b.i64.cast([0,4]))?c[87]=!b.i64.eq(b.i64.and_(c[82],c[79]),b.i64.cast([0,0])):c[87]=!1,c[86]=c[87]),c[85]=c[86]),c[84]=c[85]),c[83]=c[84]),c[80]=c[83]),c[74]===c[80]?0:(function(a){b.logger(a).mustfix(a)}("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting"),b["throw"]("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting")),c[72]=c[74]):c[72]=!1,c[59]=c[72])})},function(a){return c[59]?c[57].set("perform_action_as_page",!0):0,c[61]=b.createArray(),b.forEach(b.db.table(14).fetch([[[c[27]]]]),function(a){a=a.item;return c[72]=(c[61].push(a.contactId),c[61])})},function(a){return c[62]=new b.Map(),c[62].set("participants",c[61]),c[62].set("send_payload",c[57]),c[48]!==void 0?c[62].set("thread_name",c[48]):0,b.db.table(312).fetch([[[c[27]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?c[63]=void 0:(d=b.item,c[63]=d.metadata)})},function(a){return c[62].set("thread_metadata",c[63]),b.forEach(b.db.table(9).fetch([[[c[47]]]]),function(a){var b=a.update;a.item;return b({otidOfFirstMessage:f.offlineThreadingId})})},function(a){return c[63]===void 0||!1?(b.i64.eq(c[41],b.i64.cast([0,5]))||b.i64.eq(c[41],b.i64.cast([0,26]))?(function(a){b.logger(a).mustfix(a)}("For Marketplace & community chat subthreads, thread metadata cannot be null"),a=[void 0,void 0,void 0],c[72]=a[0],c[73]=a[1],c[74]=a[2],a):(c[75]=b.toJSON(c[62]),a=[c[75],b.i64.cast([0,130]),void 0],c[72]=a[0],c[73]=a[1],c[74]=a[2],a),a=[c[72],c[73],c[74]],c[65]=a[0],c[66]=a[1],c[67]=a[2],a):(b.i64.eq(c[41],b.i64.cast([0,5]))?(c[75]=b.toJSON(c[62]),a=[c[75],b.i64.cast([0,645]),void 0],c[72]=a[0],c[73]=a[1],c[74]=a[2],a):(b.i64.eq(c[41],b.i64.cast([0,2]))?(c[78]=b.toJSON(c[62]),a=[c[78],b.i64.cast([0,787]),void 0],c[75]=a[0],c[76]=a[1],c[77]=a[2],a):(c[78]=b.toJSON(c[62]),a=[c[78],b.i64.cast([0,645]),void 0],c[75]=a[0],c[76]=a[1],c[77]=a[2],a),a=[c[75],c[76],c[77]],c[72]=a[0],c[73]=a[1],c[74]=a[2],a),a=[c[72],c[73],c[74]],c[65]=a[0],c[66]=a[1],c[67]=a[2],a),a=[c[65],c[66],c[67]],c[44]=a[0],c[45]=a[1],c[46]=a[2],a}]):b.sequence([function(a){return c[58]=c[20]==null?b.i64.cast([0,1]):c[20],b.db.table(9).fetch([[[c[27]]]]).next().then(function(d,e){var a=d.done;d=d.value;return a?c[55]=b.i64.cast([0,1]):(e=d.item,c[67]=e.syncGroup,b.i64.neq(c[67],void 0)?c[66]=c[67]:c[66]=b.i64.cast([0,1]),c[55]=c[66])})},function(a){return c[57]=new b.Map(),c[57].set("thread_id",c[27]),c[57].set("otid",c[11]),c[57].set("source",c[21]==null?b.i64.cast([0,0]):c[21]),c[57].set("send_type",b.i64.cast([0,1])),c[57].set("sync_group",c[55]),c[57].set("mark_thread_read",c[22]),b.i64.eq(c[58],b.i64.cast([0,1]))?b.resolve(c[57].set("text",c[31])):b.i64.eq(c[58],b.i64.cast([0,2]))?b.resolve(b.i64.neq(c[29],void 0)?(c[57].set("sticker_id",c[29]),c[57].set("send_type",c[58])):0):b.i64.eq(c[58],b.i64.cast([0,7]))?b.sequence([function(a){return b.db.table(16).fetch([[[c[27],c[32]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?(a=[void 0,void 0],c[66]=a[0],c[67]=a[1],a):(d=b.item,a=[d.filename,d.attributionAppId],c[66]=a[0],c[67]=a[1],a)})},function(a){return c[66]!==void 0?b.i64.neq(c[67],void 0)?(c[57].set("url",c[66]),c[57].set("attribution_app_id",c[67]),c[57].set("send_type",c[58]),c[30]!==void 0?c[57].set("metadata_dataclass",c[30]):0):0:0}]):b.i64.eq(c[58],b.i64.cast([0,3]))?b.sequence([function(a){return c[57].set("text",c[31]),c[66]=b.createArray(),c[67]=b.createArray(),b.forEach(b.sortBy(b.db.table(16).fetch([[[c[27],c[32]]]]),[["attachmentIndex","ASC"]]),function(a){a=a.item;return c[68]=a.offlineAttachmentId,c[69]=(c[66].push(b.i64.from_string(a.attachmentFbid)),c[66]),c[68]!==void 0?c[69]=(c[67].push(c[68]),c[67]):0})},function(a){return c[57].set("attachment_fbids",c[66]),b.i64.eq(c[58],b.i64.cast([0,9]))?c[57].set("offline_attachment_ids",c[67]):0,c[57].set("send_type",c[58])}]):b.i64.eq(c[58],b.i64.cast([0,9]))?b.sequence([function(a){return c[57].set("text",c[31]),c[66]=b.createArray(),c[67]=b.createArray(),b.forEach(b.sortBy(b.db.table(16).fetch([[[c[27],c[32]]]]),[["attachmentIndex","ASC"]]),function(a){a=a.item;return c[68]=a.offlineAttachmentId,c[69]=(c[66].push(b.i64.from_string(a.attachmentFbid)),c[66]),c[68]!==void 0?c[69]=(c[67].push(c[68]),c[67]):0})},function(a){return c[57].set("attachment_fbids",c[66]),b.i64.eq(c[58],b.i64.cast([0,9]))?c[57].set("offline_attachment_ids",c[67]):0,c[57].set("send_type",c[58])}]):b.i64.eq(c[58],b.i64.cast([0,4]))?b.sequence([function(a){return b.db.table(16).fetch([[[c[27],c[32]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?c[66]=void 0:(d=b.item,c[66]=d.attachmentFbid)})},function(a){return b.db.table(16).fetch([[[c[27],c[32]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?c[68]=void 0:(d=b.item,c[68]=d.actionUrl)})},function(a){return c[66]!==void 0?(c[57].set("text",c[31]),c[68]!==void 0?c[57].set("url",c[68]):0,c[57].set("forwarded_share_id",c[66]),c[57].set("send_type",c[58])):0}]):b.i64.eq(c[58],b.i64.cast([0,5]))?b.resolve(c[12]!==void 0?(c[57].set("forwarded_msg_id",c[12]),c[57].set("send_type",c[58]),b.i64.neq(c[33],void 0)?c[57].set("forward_score",c[33]):0,c[57].set("strip_forwarded_msg_caption",!1)):0):b.i64.eq(c[58],b.i64.cast([0,6]))?b.sequence([function(a){return b.db.table(16).fetch([[[c[27],c[32]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?(a=[void 0,void 0],c[66]=a[0],c[67]=a[1],a):(d=b.item,a=[d.filename,d.attributionAppId],c[66]=a[0],c[67]=a[1],a)})},function(a){return c[66]!==void 0?(c[57].set("url",c[66]),c[57].set("text",c[31]),c[57].set("send_type",c[58])):0}]):b.i64.eq(c[58],b.i64.cast([0,11]))?b.sequence([function(a){return b.db.table(16).fetch([[[c[27],c[32]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?(a=[void 0,void 0],c[66]=a[0],c[67]=a[1],a):(d=b.item,a=[d.actionUrl,d.attributionAppId],c[66]=a[0],c[67]=a[1],a)})},function(a){return c[66]!==void 0?(c[57].set("url",c[66]),c[57].set("text",c[31]),c[57].set("send_type",c[58])):0}]):b.resolve(0)},function(a){return c[62]=c[8]===""?void 0:c[8],c[62]!==void 0?b.i64.neq(c[13],void 0)?(c[66]=new b.Map(),c[66].set("reply_source_id",c[62]),c[66].set("reply_source_type",c[13]),c[66].set("reply_type",c[39]==null?b.i64.cast([0,0]):c[39]),c[66].set("reply_source_attachment_id",void 0),c[57].set("reply_metadata",c[66])):0:0,c[63]=c[28]===""?void 0:c[28],c[63]!==void 0?(c[66]=c[34]===""?void 0:c[34],c[66]!==void 0?(c[67]=c[35]===""?void 0:c[35],c[67]!==void 0?(c[68]=new b.Map(),c[68].set("mention_ids",c[63]),c[68].set("mention_offsets",c[66]),c[68].set("mention_lengths",c[67]),c[68].set("mention_types",c[36]===""?void 0:c[36]),c[57].set("mention_data",c[68])):0):0):0,c[37]!==void 0?c[57].set("is_forwarded",c[37]):0,c[64]=c[9]===""?void 0:c[9],c[64]!==void 0?c[57].set("platform_ref",c[64]):0,c[65]=c[10]===""?void 0:c[10],c[65]!==void 0?c[57].set("platform_token",c[65]):0,[b.i64.cast([0,1]),b.i64.cast([0,2])].some(function(a){return b.i64.eq(c[58],a)})?b.i64.neq(c[38],void 0)?c[57].set("hot_emoji_size",c[38]):0:0,b.i64.neq(c[14],void 0)?c[57].set("initiating_source",c[14]):0,c[15]!==void 0?c[57].set("skip_url_preview_gen",c[15]):0,b.i64.neq(c[16],void 0)?c[57].set("rich_text_format_type",c[16]):0,b.resolve()},function(a){return c[17]!==void 0?c[57].set("text_has_links",c[17]):0,c[18]!==void 0?c[57].set("dataclass_params",c[18]):0,c[19]!==void 0?c[57].set("multitab_env",c[19]):0,b.filter(b.db.table(14).fetch([[[c[47],c[40]]]]),function(a){return b.i64.eq(a.threadKey,c[47])&&b.i64.eq(b.i64.cast([0,0]),c[49])&&b.i64.eq(a.contactId,c[40])}).next().then(function(d,e){var a=d.done;d=d.value;return a?c[59]=!1:(e=d.item,b.i64.eq(c[41],b.i64.cast([0,152]))?(c[67]=e.threadRoles,b.i64.lt(b.i64.cast([0,7]),b.i64.cast([0,0]))||b.i64.gt(b.i64.cast([0,7]),b.i64.cast([0,7]))?c[68]=!1:c[68]=!b.i64.eq(b.i64.and_(b.i64.lsl_(b.i64.cast([0,1]),b.i64.to_int32(b.i64.cast([0,7]))),c[67]),b.i64.cast([0,0])),c[69]=c[50],c[70]=c[51],c[71]=c[52],c[72]=c[53],c[73]=c[54],c[75]=b.i64.div(b.i64.cast([0,223]),b.i64.cast([0,64])),c[76]=b.i64.lsl_(b.i64.cast([0,1]),b.i64.to_int32(b.i64.sub(b.i64.cast([0,223]),b.i64.mul(c[75],b.i64.cast([0,64]))))),b.i64.lt(b.i64.cast([0,223]),b.i64.cast([0,0]))||b.i64.gt(b.i64.cast([0,223]),b.i64.cast([0,281]))?c[74]=!1:(b.i64.eq(c[75],b.i64.cast([0,0]))?c[77]=!b.i64.eq(b.i64.and_(c[76],c[69]),b.i64.cast([0,0])):(b.i64.eq(c[75],b.i64.cast([0,1]))?c[78]=!b.i64.eq(b.i64.and_(c[76],c[70]),b.i64.cast([0,0])):(b.i64.eq(c[75],b.i64.cast([0,2]))?c[79]=!b.i64.eq(b.i64.and_(c[76],c[71]),b.i64.cast([0,0])):(b.i64.eq(c[75],b.i64.cast([0,3]))?c[80]=!b.i64.eq(b.i64.and_(c[76],c[72]),b.i64.cast([0,0])):(b.i64.eq(c[75],b.i64.cast([0,4]))?c[81]=!b.i64.eq(b.i64.and_(c[76],c[73]),b.i64.cast([0,0])):c[81]=!1,c[80]=c[81]),c[79]=c[80]),c[78]=c[79]),c[77]=c[78]),c[74]=c[77]),c[68]===c[74]?0:(function(a){b.logger(a).mustfix(a)}("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting"),b["throw"]("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting")),c[66]=c[68]):c[66]=!1,c[59]=c[66])})},function(a){return c[59]?c[57].set("perform_action_as_page",!0):0,c[61]=b.toJSON(c[57]),a=[c[61],b.i64.cast([0,46]),void 0],c[44]=a[0],c[45]=a[1],c[46]=a[2],a}])},function(a){return a=[c[44],c[45],c[46]],c[23]=a[0],c[24]=a[1],c[25]=a[2],a}]))})},function(a){return a=[c[23],c[24],c[25]],c[4]=a[0],c[5]=a[1],c[6]=a[2],a}]))})},function(a){return a=[c[4],c[5],c[6]],c[0]=a[0],c[1]=a[1],c[2]=a[2],a}]))})},function(a){return a=[c[0],c[1]],d[0]=a[0],d[1]=a[1],a}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxTaskSerializerSendMessageV2StoredProcedure";a.__tables__=["messages_optimistic_context","messages","threads","pending_tasks","attachments","participants","threads_optimistic_metadata"];e.exports=a}),null);
__d("LSTaskSerializerSyncThreadCapabilities",[],(function(a,b,c,d,e,f){function a(){var a,b=arguments,c=b[b.length-1],d=[];return a=[void 0,void 0,void 0],d[0]=a[0],d[1]=a[1],d[2]=a[2],a,c.resolve(d)}a.__sproc_name__="LSMailboxTaskSerializerSyncThreadCapabilitiesStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSIsExperimentCapabilityEnabled.nop",["LSACSExperimentCapability","LSIntEnum","MetaConfig","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("MetaConfig")._("87"),k=c("MetaConfig")._("156");a=function(a,e,f,g){switch((i||(i=d("LSIntEnum"))).toNumber(f)){case c("LSACSExperimentCapability").BUMP_TOKEN_SYNC_TASK_AT_TASK_SERIALIZATION:return(h||(h=b("Promise"))).resolve([k]);case c("LSACSExperimentCapability").INSERT_PENDING_TASK_PARENT_ROW_WHEN_NO_ACS_TOKENS_AT_TASK_INSERTION:return(h||(h=b("Promise"))).resolve([!1]);case c("LSACSExperimentCapability").RETRY_AFTER_TASK_SERIALIZATION_FAILURE_EXPONENTIAL_BACKOFF:return(h||(h=b("Promise"))).resolve([j])}return(h||(h=b("Promise"))).resolve([!1])};a.__nop_name__="LSIsExperimentCapabilityEnabled";g["default"]=a}),98);
__d("LSMailboxTaskCompletionApiOnTaskCompletion",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.db.table(233).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({success:a[1]})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSCoreMailboxTaskCompletionApiOnTaskCompletionStoredProcedure";a.__tables__=["mailbox_task_completion_api_tasks"];e.exports=a}),null);
__d("LSVoprfHmac.nop",["ACSCipherSuiteModule","ACSTokenHmacUtil","Promise","XPlatReactTextEncoder","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f){a=d("ACSCipherSuiteModule").getACSCipherSuiteByValue(d("ACSCipherSuiteModule").VOPRF_RISTRETTO_HMACSHA512.value);if(!a)return(h||(h=b("Promise"))).resolve([void 0]);c=(yield d("ACSTokenHmacUtil").hmac(a.macAlgorithm,new Uint8Array(f).slice(),new(d("XPlatReactTextEncoder").TextEncoder)().encode(e)));return(h||(h=b("Promise"))).resolve([c.buffer])});function c(b,c,d,e){return a.apply(this,arguments)}return c}();a.__nop_name__="LSVoprfHmac";g["default"]=a}),98);
__d("LSTaskSerializerUnauthenticatedTask",["LSArrayGetObjectAt","LSBase64Encode.nop","LSIsExperimentCapabilityEnabled.nop","LSMailboxTaskCompletionApiOnTaskCompletion","LSRemoveUsedTokens","LSVoprfHmac.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){return c.db.table(311).fetch([[[a[0]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[0]=void 0:(b=a.item,d[0]=b.projectName)})},function(e){return d[0]!==void 0?c.sequence([function(e){return a[1]!==void 0?c.sequence([function(a){return d[9]=c.createArray(),d[10]=c.i64.of_float(Date.now()),c.forEach(c.filter(c.db.table(307).fetch(),function(a){return d[0]===a.projectName&&c.i64.gt(a.expirationTimestampMs,d[10])}),function(a){a=a.item;return d[16]=(d[9].push(a.configId),d[9])})},function(a){return c.sequence([function(a){return d[16]=c.createArray(),d[17]=c.i64.of_int32(d[9].length),c.i64.gt(d[17],c.i64.cast([0,0]))?c.loopAsync(d[17],function(a){return d[19]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[9],d[19]).then(function(a){return a=a,d[20]=a[0],d[21]=a[1],a})},function(a){return d[22]=(d[16].push(d[20]),d[16])}])}):c.resolve()},function(a){return d[18]=d[16].join(","),d[11]=d[18]}])},function(e){return c.filter(c.db.table(309).fetch(),function(a){return d[9].includes(a.configId)&&c.i64.gt(a.redeemLimit,c.i64.cast([0,0]))}).next().then(function(e,f){var g=e.done;e=e.value;return g?c.sequence([function(a){return c.nativeOperation(b("LSIsExperimentCapabilityEnabled.nop"),c.i64.cast([0,0]),d[0]).then(function(a){return a=a,d[16]=a[0],a})},function(e){return d[16]?c.sequence([function(b){return c.db.table(311).fetch([[[a[0]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[20]=c.i64.cast([0,0]):(e=b.item,d[20]=e.failureCount)})},function(b){return c.forEach(c.db.table(311).fetch([[[a[0]]]]),function(a){a=a.item;return c.forEach(c.db.table(311).fetch([[[a.taskId]]]),function(a){var b=a.update;a.item;return b({failureCount:c.i64.add(d[20],c.i64.cast([0,1]))})})})},function(a){return a=[void 0,void 0,c.i64.mul(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.mod_(d[20],c.i64.cast([0,7])))),c.i64.cast([0,500]))],d[17]=a[0],d[18]=a[1],d[19]=a[2],a}]):c.sequence([function(d){return c.storedProcedure(b("LSMailboxTaskCompletionApiOnTaskCompletion"),a[0],!1)},function(b){return d[20]=c.createArray(),d[21]=(d[20].push("Unauthenticated Task Serializer: no valid tokens"),d[20]),d[22]=(d[20].push(a[0]),d[20]),d[23]=(d[20].push(d[0]),d[20]),d[24]=c.toJSON(d[20]),function(a){c.logger(a).mustfix(a)}(d[24]),b=[void 0,void 0,void 0],d[17]=b[0],d[18]=b[1],d[19]=b[2],b}])},function(a){return a=[d[17],d[18],d[19]],d[12]=a[0],d[13]=a[1],d[14]=a[2],a}]):(f=e.item,c.sequence([function(e){return d[20]=f.tokenId,c.nativeOperation(b("LSVoprfHmac.nop"),a[2]==null?"":a[2],f.sharedSecret).then(function(a){return a=a,d[16]=a[0],a})},function(e){return c.blobs.neq(d[16],void 0)?c.sequence([function(a){return c.forEach(c.db.table(309).fetch([[[d[20]]]]),function(a){var b=a.update;a=a.item;return b({redeemLimit:c.i64.sub(a.redeemLimit,c.i64.cast([0,1]))})})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[16]).then(function(a){return a=a,d[21]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),f.nonce).then(function(a){return a=a,d[22]=a[0],a})},function(b){return d[23]=new c.Map(),d[23].set("config_id",f.configId),d[23].set("tag",d[21]==null?"":d[21]),d[23].set("aux",d[22]==null?"":d[22]),d[23].set("project_name",d[0]),d[24]=c.toJSON(d[23]),d[25]=new c.Map(),d[25].set("payload",a[2]==null?"":a[2]),d[25].set("token",d[24]),d[26]=c.toJSON(d[25]),b=[d[26],c.i64.from_string(a[1]),void 0],d[17]=b[0],d[18]=b[1],d[19]=b[2],b}]):c.sequence([function(a){return c.forEach(c.db.table(309).fetch([[[d[20]]]]),function(a){return a["delete"]()})},function(d){return c.storedProcedure(b("LSMailboxTaskCompletionApiOnTaskCompletion"),a[0],!1)},function(b){return d[21]=c.createArray(),d[22]=(d[21].push("Unauthenticated Task Serializer: hmac failed"),d[21]),d[23]=(d[21].push(a[0]),d[21]),d[24]=c.toJSON(d[21]),function(a){c.logger(a).mustfix(a)}(d[24]),b=[void 0,void 0,void 0],d[17]=b[0],d[18]=b[1],d[19]=b[2],b}])},function(a){return a=[d[17],d[18],d[19]],d[12]=a[0],d[13]=a[1],d[14]=a[2],a}]))})},function(a){return a=[d[12],d[13],d[14]],d[6]=a[0],d[7]=a[1],d[8]=a[2],a}]):c.sequence([function(d){return c.storedProcedure(b("LSMailboxTaskCompletionApiOnTaskCompletion"),a[0],!1)},function(b){return d[9]=c.createArray(),d[10]=(d[9].push("Unauthenticated Task Serializer: task has no write label"),d[9]),d[11]=(d[9].push(a[0]),d[9]),d[12]=c.toJSON(d[9]),function(a){c.logger(a).mustfix(a)}(d[12]),b=[void 0,void 0,void 0],d[6]=b[0],d[7]=b[1],d[8]=b[2],b}])},function(a){return a=[d[6],d[7],d[8]],d[2]=a[0],d[3]=a[1],d[4]=a[2],a}]):c.sequence([function(d){return c.storedProcedure(b("LSMailboxTaskCompletionApiOnTaskCompletion"),a[0],!1)},function(b){return d[6]=c.createArray(),d[7]=(d[6].push("Unauthenticated Task Serializer: anonymous_task_context row not found"),d[6]),d[8]=(d[6].push(a[0]),d[6]),d[9]=c.toJSON(d[6]),function(a){c.logger(a).mustfix(a)}(d[9]),b=[void 0,void 0,void 0],d[2]=b[0],d[3]=b[1],d[4]=b[2],b}])},function(a){return c.storedProcedure(b("LSRemoveUsedTokens"))},function(a){return d[0]!==void 0?c.sequence([function(a){return c.nativeOperation(b("LSIsExperimentCapabilityEnabled.nop"),c.i64.cast([0,1]),d[0]).then(function(a){return a=a,d[6]=a[0],a})},function(a){return d[6]?c.sequence([function(a){return c.i64.neq(d[4],void 0)?c.resolve(d[8]=!0):c.sequence([function(a){return d[10]=c.createArray(),d[11]=c.i64.of_float(Date.now()),c.forEach(c.filter(c.db.table(307).fetch(),function(a){return d[0]===a.projectName&&c.i64.gt(a.expirationTimestampMs,d[11])}),function(a){a=a.item;return d[15]=(d[10].push(a.configId),d[10])})},function(a){return c.sequence([function(a){return d[15]=c.createArray(),d[16]=c.i64.of_int32(d[10].length),c.i64.gt(d[16],c.i64.cast([0,0]))?c.loopAsync(d[16],function(a){return d[18]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[10],d[18]).then(function(a){return a=a,d[19]=a[0],d[20]=a[1],a})},function(a){return d[21]=(d[15].push(d[19]),d[15])}])}):c.resolve()},function(a){return d[17]=d[15].join(","),d[12]=d[17]}])},function(a){return c.filter(c.db.table(309).fetch(),function(a){return d[10].includes(a.configId)&&c.i64.gt(a.redeemLimit,c.i64.cast([0,0]))}).next().then(function(a,b){b=a.done;a=a.value;return b?d[13]=!0:(a.item,d[13]=!1)})},function(a){return d[8]=d[13]}])},function(a){return d[8]?c.sequence([function(a){return c.filter(c.db.table(310).fetch(),function(a){return a.projectName===d[0]}).next().then(function(a,b){var c=a.done;a=a.value;return c?d[10]=void 0:(b=a.item,d[10]=b.taskId)})},function(a){return d[9]=d[10]}]):c.resolve(d[9]=void 0)},function(a){return d[7]=d[9]}]):c.resolve(d[7]=void 0)},function(a){return d[5]=d[7]}]):c.resolve(d[5]=void 0)},function(a){return a=[d[2],d[3],d[4],d[5]],e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSAnonymousCredentialsTaskSerializerUnauthenticatedTaskStoredProcedure";a.__tables__=["anonymous_task_context","secure_acs_configurations","secure_acs_tokens","acs_request_context"];e.exports=a}),null);
__d("LSTaskSerializerUpdateThreadName",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return b.db.table(32).fetch([[[a[0]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?(c[4]=b.createArray(),c[5]=(c[4].push("taskSerializerUpdateThreadName: Task ID not found"),c[4]),c[6]=(c[4].push(a[0]),c[4]),c[7]=b.toJSON(c[4]),function(a){b.logger(a).mustfix(a)}(c[7]),f=[void 0,void 0,void 0],c[0]=f[0],c[1]=f[1],c[2]=f[2],f):(e=d.item,b.sequence([function(a){return c[8]=e.threadKey,b.db.table(9).fetch([[[c[8]]]]).next().then(function(d,e){var a=d.done;d=d.value;return a?(c[9]=b.createArray(),c[10]=(c[9].push("taskSerializerUpdateThreadName: Thread not found"),c[9]),c[11]=(c[9].push(c[8]),c[9]),c[12]=b.toJSON(c[9]),function(a){b.logger(a).mustfix(a)}(c[12]),a=[void 0,void 0,void 0],c[4]=a[0],c[5]=a[1],c[6]=a[2],a):(e=d.item,b.sequence([function(a){return b.db.table(9).fetch([[[c[8]]]]).next().then(function(d,e){var a=d.done;d=d.value;return a?c[9]=b.i64.cast([0,1]):(e=d.item,c[14]=e.syncGroup,b.i64.neq(c[14],void 0)?c[13]=c[14]:c[13]=b.i64.cast([0,1]),c[9]=c[13])})},function(a){return c[11]=new b.Map(),c[11].set("thread_key",c[8]),c[11].set("thread_name",e.threadName==null?"":e.threadName),c[11].set("sync_group",c[9]),c[12]=b.toJSON(c[11]),a=[c[12],b.i64.cast([0,32]),void 0],c[4]=a[0],c[5]=a[1],c[6]=a[2],a}]))})},function(a){return a=[c[4],c[5],c[6]],c[0]=a[0],c[1]=a[1],c[2]=a[2],a}]))})},function(a){return a=[c[0],c[1],c[2]],d[0]=a[0],d[1]=a[1],d[2]=a[2],a}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxTaskSerializerUpdateThreadNameStoredProcedure";a.__tables__=["threads_optimistic_context","threads"];e.exports=a}),null);
__d("LSSerializeTask",["LSForceTaskExecutionImmediately","LSLogMebClientEvent.nop","LSTaskSerializerAcsIssueNextSync","LSTaskSerializerDeleteChatHistory","LSTaskSerializerE2eeMessageIntegrityCheckV2","LSTaskSerializerE2eeMetadataThreadIntegrityCheck","LSTaskSerializerEncryptedBackupAction","LSTaskSerializerEncryptedBackupsLoopingUpload","LSTaskSerializerEncryptedBackupsOpenUpload","LSTaskSerializerEncryptedBackupsRestoreWithSerializer","LSTaskSerializerEncryptedBackupsUpload","LSTaskSerializerEncryptedBackupsUploadProtobufOnly","LSTaskSerializerEncryptedBackupsUploadSenderBackup","LSTaskSerializerMuteThreadV2","LSTaskSerializerRemoveThread","LSTaskSerializerSendMessageV2","LSTaskSerializerSyncThreadCapabilities","LSTaskSerializerUnauthenticatedTask","LSTaskSerializerUpdateThreadName"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return a[1]==="46"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerSendMessageV2"),a[0]).then(function(a){return a=a,d[8]=a[0],d[9]=a[1],a})},function(a){return a=[d[8],c.i64.to_string(d[9]),void 0,void 0],d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],a}]):c.sequence([function(e){return a[1]==="144"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerMuteThreadV2"),a[0]).then(function(a){return a=a,d[12]=a[0],d[13]=a[1],a})},function(a){return a=[d[12],c.i64.to_string(d[13]),void 0,void 0],d[8]=a[0],d[9]=a[1],d[10]=a[2],d[11]=a[3],a}]):c.sequence([function(e){return a[1]==="146"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerRemoveThread"),a[0]).then(function(a){return a=a,d[16]=a[0],d[17]=a[1],a})},function(a){return a=[d[16],c.i64.to_string(d[17]),void 0,void 0],d[12]=a[0],d[13]=a[1],d[14]=a[2],d[15]=a[3],a}]):c.sequence([function(e){return a[1]==="32"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerUpdateThreadName"),a[0]).then(function(a){return a=a,d[20]=a[0],d[21]=a[1],d[22]=a[2],a})},function(a){return a=[d[20],c.i64.to_string(d[21]),void 0,d[22]],d[16]=a[0],d[17]=a[1],d[18]=a[2],d[19]=a[3],a}]):c.sequence([function(e){return a[1]==="362"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerAcsIssueNextSync"),a[0]).then(function(a){return a=a,d[24]=a[0],d[25]=a[1],d[26]=a[2],a})},function(a){return a=[d[24],c.i64.to_string(d[25]),void 0,d[26]],d[20]=a[0],d[21]=a[1],d[22]=a[2],d[23]=a[3],a}]):c.sequence([function(e){return a[1]==="50015"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerEncryptedBackupsRestoreWithSerializer"),a[0]).then(function(a){return a=a,d[28]=a[0],d[29]=a[1],d[30]=a[2],a})},function(a){return a=[d[28],c.i64.to_string(d[29]),void 0,d[30]],d[24]=a[0],d[25]=a[1],d[26]=a[2],d[27]=a[3],a}]):c.sequence([function(e){return a[1]==="319"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerEncryptedBackupAction"),a[0]).then(function(a){return a=a,d[32]=a[0],d[33]=a[1],d[34]=a[2],a})},function(a){return a=[d[32],c.i64.to_string(d[33]),void 0,d[34]],d[28]=a[0],d[29]=a[1],d[30]=a[2],d[31]=a[3],a}]):c.sequence([function(e){return a[1]==="50026"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerEncryptedBackupsUpload"),a[0]).then(function(a){return a=a,d[36]=a[0],d[37]=a[1],a})},function(a){return a=[d[36],c.i64.to_string(d[37]),void 0,void 0],d[32]=a[0],d[33]=a[1],d[34]=a[2],d[35]=a[3],a}]):c.sequence([function(e){return a[1]==="50042"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerEncryptedBackupsUploadProtobufOnly"),a[0]).then(function(a){return a=a,d[40]=a[0],d[41]=a[1],d[42]=a[2],a})},function(a){return a=[d[40],c.i64.to_string(d[41]),void 0,d[42]],d[36]=a[0],d[37]=a[1],d[38]=a[2],d[39]=a[3],a}]):c.sequence([function(e){return a[1]==="700"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerE2eeMetadataThreadIntegrityCheck"),a[0]).then(function(a){return a=a,d[44]=a[0],d[45]=a[1],d[46]=a[2],a})},function(a){return a=[d[44],c.i64.to_string(d[45]),void 0,d[46]],d[40]=a[0],d[41]=a[1],d[42]=a[2],d[43]=a[3],a}]):c.sequence([function(e){return a[1]==="705"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerE2eeMessageIntegrityCheckV2"),a[0]).then(function(a){return a=a,d[48]=a[0],d[49]=a[1],d[50]=a[2],a})},function(a){return a=[d[48],c.i64.to_string(d[49]),void 0,d[50]],d[44]=a[0],d[45]=a[1],d[46]=a[2],d[47]=a[3],a}]):c.sequence([function(e){return a[1]==="50043"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerEncryptedBackupsLoopingUpload"),a[0]).then(function(a){return a=a,d[52]=a[0],d[53]=a[1],d[54]=a[2],a})},function(a){return a=[d[52],c.i64.to_string(d[53]),void 0,d[54]],d[48]=a[0],d[49]=a[1],d[50]=a[2],d[51]=a[3],a}]):c.sequence([function(e){return a[1]==="50048"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerEncryptedBackupsOpenUpload"),a[0]).then(function(a){return a=a,d[56]=a[0],d[57]=a[1],a})},function(a){return a=[d[56],c.i64.to_string(d[57]),void 0,void 0],d[52]=a[0],d[53]=a[1],d[54]=a[2],d[55]=a[3],a}]):c.sequence([function(e){return a[1]==="160013"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerSyncThreadCapabilities"),a[0]).then(function(a){return a=a,d[60]=a[0],d[61]=a[1],d[62]=a[2],a})},function(a){return a=[d[60],c.i64.to_string(d[61]),void 0,d[62]],d[56]=a[0],d[57]=a[1],d[58]=a[2],d[59]=a[3],a}]):c.sequence([function(e){return a[1]==="903"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerDeleteChatHistory"),a[0]).then(function(a){return a=a,d[64]=a[0],d[65]=a[1],d[66]=a[2],a})},function(a){return a=[d[64],c.i64.to_string(d[65]),void 0,d[66]],d[60]=a[0],d[61]=a[1],d[62]=a[2],d[63]=a[3],a}]):c.sequence([function(e){return a[1]==="50057"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerEncryptedBackupsUploadSenderBackup"),a[0]).then(function(a){return a=a,d[68]=a[0],d[69]=a[1],d[70]=a[2],a})},function(a){return a=[d[68],c.i64.to_string(d[69]),void 0,d[70]],d[64]=a[0],d[65]=a[1],d[66]=a[2],d[67]=a[3],a}]):c.resolve((e=[a[2],a[1],void 0,void 0],d[64]=e[0],d[65]=e[1],d[66]=e[2],d[67]=e[3],e))},function(a){return a=[d[64],d[65],d[66],d[67]],d[60]=a[0],d[61]=a[1],d[62]=a[2],d[63]=a[3],a}])},function(a){return a=[d[60],d[61],d[62],d[63]],d[56]=a[0],d[57]=a[1],d[58]=a[2],d[59]=a[3],a}])},function(a){return a=[d[56],d[57],d[58],d[59]],d[52]=a[0],d[53]=a[1],d[54]=a[2],d[55]=a[3],a}])},function(a){return a=[d[52],d[53],d[54],d[55]],d[48]=a[0],d[49]=a[1],d[50]=a[2],d[51]=a[3],a}])},function(a){return a=[d[48],d[49],d[50],d[51]],d[44]=a[0],d[45]=a[1],d[46]=a[2],d[47]=a[3],a}])},function(a){return a=[d[44],d[45],d[46],d[47]],d[40]=a[0],d[41]=a[1],d[42]=a[2],d[43]=a[3],a}])},function(a){return a=[d[40],d[41],d[42],d[43]],d[36]=a[0],d[37]=a[1],d[38]=a[2],d[39]=a[3],a}])},function(a){return a=[d[36],d[37],d[38],d[39]],d[32]=a[0],d[33]=a[1],d[34]=a[2],d[35]=a[3],a}])},function(a){return a=[d[32],d[33],d[34],d[35]],d[28]=a[0],d[29]=a[1],d[30]=a[2],d[31]=a[3],a}])},function(a){return a=[d[28],d[29],d[30],d[31]],d[24]=a[0],d[25]=a[1],d[26]=a[2],d[27]=a[3],a}])},function(a){return a=[d[24],d[25],d[26],d[27]],d[20]=a[0],d[21]=a[1],d[22]=a[2],d[23]=a[3],a}])},function(a){return a=[d[20],d[21],d[22],d[23]],d[16]=a[0],d[17]=a[1],d[18]=a[2],d[19]=a[3],a}])},function(a){return a=[d[16],d[17],d[18],d[19]],d[12]=a[0],d[13]=a[1],d[14]=a[2],d[15]=a[3],a}])},function(a){return a=[d[12],d[13],d[14],d[15]],d[8]=a[0],d[9]=a[1],d[10]=a[2],d[11]=a[3],a}])},function(a){return a=[d[8],d[9],d[10],d[11]],d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],a}])},function(e){return a[3]?c.sequence([function(a){return d[9]="60009"===d[1]||"60006"===d[1]||"60008"===d[1]||"60011"===d[1]||"765"===d[1]||"1006"===d[1]||"160009"===d[1]||"761"===d[1]||"1018"===d[1]||"632"===d[1]||"384"===d[1]||"384"===d[1],d[9]?d[1]!==void 0?(d[15]=["Deidentified task is being executed through the 'identified' path. Canceling task with label: ",d[1]].join(""),function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSCoreSerializeTaskStoredProcedure] ","",d[15]].join("")),d[14]=c.createArray(),void 0!==void 0?d[16]=(d[14].push(void 0),d[14]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSCoreSerializeTaskStoredProcedure",d[15],d[14],c.i64.cast([0,3]))):c.resolve():c.resolve()},function(a){return c.resolve(d[8]=!1)},function(a){return d[9]||d[8]?(a=[void 0,void 0,void 0,void 0],d[10]=a[0],d[11]=a[1],d[12]=a[2],d[13]=a[3],a):(a=[d[0],d[1],d[2],d[3]],d[10]=a[0],d[11]=a[1],d[12]=a[2],d[13]=a[3],a),a=[d[10],d[11],d[12],d[13]],d[4]=a[0],d[5]=a[1],d[6]=a[2],d[7]=a[3],a}]):c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerUnauthenticatedTask"),a[0],d[1],d[0]).then(function(a){return a=a,d[8]=a[0],d[9]=a[1],d[10]=a[2],d[11]=a[3],a})},function(a){return c.i64.neq(d[11],void 0)?c.storedProcedure(b("LSForceTaskExecutionImmediately"),d[11]):c.resolve()},function(a){return a=[d[8],c.i64.to_string(d[9]),void 0,d[10]],d[4]=a[0],d[5]=a[1],d[6]=a[2],d[7]=a[3],a}])},function(a){return a=[d[4],d[5],d[6],d[7]],e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSCoreSerializeTaskStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSSerializeTaskStoredProcedure",["LSSerializeTask","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSSerializeTask"),e.taskId,e.taskLabel,e.taskValue,e.requiresAuthentication);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSBeginHandlingPendingTasksForQueue2",["I64","LSFactory","LSIntEnum","LSPendingTasksPluginType","LSSerializeTaskStoredProcedure","LSShape","LSVec","Promise","ReQL","XPlatReactCrypto","asyncToGeneratorRuntime","gkx","isNativeTask","qex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=500,l=3e4,m=5,n=(e=c("qex")._("4835"))!=null?e:50,o=7;function p(a,b){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield a.lightspeed_task_context.get(b));return a==null||a.requiresAuthentication});return q.apply(this,arguments)}function r(a,b){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.pending_tasks.index("queueNameTaskId")).getKeyRange(b)));return a==null?{context:void 0,failureCount:(i||(i=d("I64"))).neg_one,httpUrlOverride:void 0,minTimeToSyncTimestampMs:i.neg_one,pluginType:(j||(j=d("LSIntEnum"))).ofNumber(c("LSPendingTasksPluginType").LS_BROKER),queueName:""}:a});return s.apply(this,arguments)}function t(a,b){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.network_requests).getKeyRange(b)));return a==null?0:(i||(i=d("I64"))).to_float(a.lastSyncRequestTimestampMs)});return u.apply(this,arguments)}function v(a,b,c){b=(i||(i=d("I64"))).equal(a.failureCount,(i||(i=d("I64"))).zero)||b;if(b)return 0;b=(i||(i=d("I64"))).to_float(a.failureCount)>o?(i||(i=d("I64"))).to_float(a.failureCount)-o:(i||(i=d("I64"))).to_float(a.failureCount);a=Math.min((1<<Math.min(b-1,o))*k,l);b=c+a;return Math.max(b-Date.now(),0)}function w(){var a=Array.from(d("XPlatReactCrypto").getRandomValues(new Uint32Array(2)));a[0]>>>=1;return(i||(i=d("I64"))).add(i.lsl_(i.of_float(a[0]),32),i.of_float(a[1]))}function x(){var a=(i||(i=d("I64"))).of_float(Date.now());return i.and_(i.or_(i.lsl_(a,22),i.and_(w(),i.castExn([0,4194303]))),i.castExn([2147483647,4294967295]))}function y(a,b){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=x(),e=(yield a.network_requests.get(b,(i||(i=d("I64"))).neg_one));e==null?yield a.network_requests.add({epochId:c,failureCount:(i||(i=d("I64"))).zero,lastSentTimestampMs:i.zero,lastSyncRequestTimestampMs:i.of_float(Date.now()),syncDatabaseId:i.neg_one,taskQueueName:b}):yield a.network_requests.put(babelHelpers["extends"]({},e,{epochId:c,lastSyncRequestTimestampMs:(i||(i=d("I64"))).of_float(Date.now())}));return c});return z.apply(this,arguments)}function A(a,b){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.network_requests).getKeyRange(b).filter(function(a){return a.epochId!=null})))!=null});return B.apply(this,arguments)}function C(a,b,c){var e=(i||(i=d("I64"))).to_float(a.minTimeToSyncTimestampMs),f=Date.now();e=e-f;f=e<=0;return f?v(a,b,c):e}function D(a){return a.httpUrlOverride!=null||(i||(i=d("I64"))).to_float(a.failureCount)>o}function E(a){return a.timeoutTimestampMs!=null?(i||(i=d("I64"))).to_float(a.timeoutTimestampMs)<=Date.now():!1}function F(a){return a===90..toString()||a===130..toString()||a===153..toString()}function G(a,b,c,d,e){e=e===0?void 0:e;return{failureCount:e,label:a,payload:b,queueName:c,taskId:d}}function H(a,b,c){return I.apply(this,arguments)}function I(){I=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){a=(yield c("LSSerializeTaskStoredProcedure")(c("LSFactory")(a),{requiresAuthentication:e,taskId:b.taskId,taskLabel:b.context,taskValue:b.taskValue}));e=a[0];var f=a[1];a[2];a=a[3];if(e==null){if(a!=null)return{minRetryDelayMs:a};return}return G(f,e,b.queueName,b.taskId,(i||(i=d("I64"))).to_float(b.failureCount))});return I.apply(this,arguments)}function J(a,b,c){return K.apply(this,arguments)}function K(){K=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){if(b.context==null){yield a.pending_tasks["delete"](b.taskId);return}var d=E(b);if(d){yield a.pending_tasks["delete"](b.taskId);return}return H(a,b,c)});return K.apply(this,arguments)}function L(a,b){b=b>=(c("gkx")("26373")&&a===String(207)?n:m)||F(a);return!b}function M(a,b){return N.apply(this,arguments)}function N(){N=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield a.pending_tasks.get(b.taskId));c!=null&&(i||(i=d("I64"))).equal(b.firstExecutedTimestampMs,(i||(i=d("I64"))).zero)&&(yield a.pending_tasks.put(babelHelpers["extends"]({},c,{firstExecutedTimestampMs:(i||(i=d("I64"))).of_float(Date.now())})))});return N.apply(this,arguments)}function O(a,b){return P.apply(this,arguments)}function P(){P=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){if(c.length===0)return{epochId:void 0,tasks:[]};var e=[],f=c[0].httpUrlOverride,g=(yield (h||(h=b("Promise"))).all(c.map(function(b){return p(a,b.taskId)}))).some(Boolean);for(c of c){var j=c.httpUrlOverride===f,k=(yield p(a,c.taskId))===g;yield M(a,c);if(!j||!k)break;j=(yield J(a,c,g));if(j!=null&&j.payload!=null)e.push(j);else if((j==null?void 0:j.minRetryDelayMs)!=null){k=(yield a.pending_tasks.get(c.taskId));if(k!=null){yield a.pending_tasks.put(babelHelpers["extends"]({},k,{failureCount:(i||(i=d("I64"))).add((k=k.failureCount)!=null?k:(i||(i=d("I64"))).zero,i.one),minTimeToSyncTimestampMs:i.add(j.minRetryDelayMs,i.of_float(Date.now()))}))}}else yield a.pending_tasks["delete"](c.taskId);if(!L(c.context,e.length))break}return{epochId:void 0,tasks:e}});return P.apply(this,arguments)}function Q(a,b,c,d,e){return R.apply(this,arguments)}function R(){R=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d,e){e===void 0&&(e=!0);b=(yield O(a,b));var f=b.tasks;if(f.length===0)return{httpUrlOverride:void 0,networkPayload:void 0,nextSyncMs:void 0,queueName:c,skipRealtimeGateway:!1,workItemType:4};if(e===!0){f=(yield y(a,c));b.epochId=f}e=(yield r(a,c));return{httpUrlOverride:e.httpUrlOverride,networkPayload:b,nextSyncMs:void 0,queueName:c,skipRealtimeGateway:D(e),workItemType:d}});return R.apply(this,arguments)}function S(a,b,c){return T.apply(this,arguments)}function T(){T=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=(yield r(a,b)),g=(yield t(a,b));f=C(f,e,g);e=f!==0;if(e)return[{httpUrlOverride:void 0,networkPayload:void 0,nextSyncMs:f,queueName:b,skipRealtimeGateway:!1,workItemType:3}];g=[];e=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.pending_tasks.index("queueNameTaskId")).getKeyRange(b)));f=e.filter(c("isNativeTask"));if(f.length>0){f=(yield Q(a,f,b,2,c("gkx")("4778")===!0));g.push(f)}f=e.filter(function(a){return!c("isNativeTask")(a)});if(f.length>0){e=(yield Q(a,f,b,1));g.push(e)}return g});return T.apply(this,arguments)}function U(a,b,c){return V.apply(this,arguments)}function V(){V=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var d=!(yield A(a,b));return d?S(a,b,c):[{httpUrlOverride:void 0,networkPayload:void 0,nextSyncMs:void 0,queueName:b,skipRealtimeGateway:!1,workItemType:4}]});return V.apply(this,arguments)}function a(a,b){return W.apply(this,arguments)}function W(){W=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=b.ignoreSoftDelay;b=b.queueName;a=(yield U(a,b,e));return a.map(function(a){var b;return d("LSShape").ofRecord({network_payload:d("LSShape").ofRecord({epoch_id:(b=a.networkPayload)==null?void 0:b.epochId,tasks:c("LSVec").ofArray(((b=(b=a.networkPayload)==null?void 0:b.tasks)!=null?b:[]).map(function(a){var b;return d("LSShape").ofRecord({failure_count:a.failureCount!=null?(i||(i=d("I64"))).of_float(a.failureCount):void 0,label:(b=a.label)!=null?b:void 0,payload:a.payload,queue_name:a.queueName,task_id:a.taskId})}))}),next_sync_ms:a.nextSyncMs!=null?(i||(i=d("I64"))).of_float(a.nextSyncMs):void 0,queue_name:a.queueName,skip_realtime_gateway:a.skipRealtimeGateway,work_item_type:(j||(j=d("LSIntEnum"))).ofNumber(a.workItemType)})})});return W.apply(this,arguments)}a._updateTaskIfNeeded=M;a._getHeadOfNormalQueue=r;a._lastSyncRequestTimestampForQueue=t;a._exponentialBackoffForNormalQueue=v;a._generateNewEpoch=x;a._openNewEpochForQueue=y;a._isEpochOpenForQueue=A;a._calculateDelayForNormalQueue=C;a._queueShouldSkipRealtimeGateway=D;a._isNativeTask=c("isNativeTask");a._taskIsTimedOut=E;a._taskShouldStopBatching=F;a._buildTaskPayloadExpressionForNormalTaskWithParameters=G;a._buildTaskPayloadExpressionForValidatedNormalTask=H;a._buildTaskPayloadExpressionForUnvalidatedNormalTask=J;a._workForNormalQueueWithoutDelay=Q;a._workForNormalQueueWithClosedEpoch=S;a._buildWorkForNormalQueue=U;a._buildNetworkPayloadShapeForTasks=O;a._canContinueBatchingForQueue=L;g["default"]=a}),98);
__d("LSCookie",["$InternalEnum","Cookie","CookieCore","CurrentEnvironment","CurrentMessengerUser","FBLogger","I64","LSE2EEMetadataSyncGroupUtils","LSIntEnum","MessengerLogHistory","MqttWebDeviceID","ReQL","SortedAsyncIterable","isPromise","isStringNullOrEmpty","pageID","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=b("$InternalEnum")({SYNCING:"1",NOT_SYNCING:"0"}),l=d("MessengerLogHistory").getInstance("client_init"),m=c("CurrentEnvironment").instagramdotcom?"igd_ls":"m_ls",n={c:{},d:c("MqttWebDeviceID").clientID,s:k.NOT_SYNCING,u:c("pageID")};function o(a){function b(a){d("CookieCore").setWithDomain_FOR_MESSENGER_LS_ONLY(m,JSON.stringify(a),window.location.hostname)}var e=c("Cookie").get(m);if(e==null){var f;b((f={},f[d("CurrentMessengerUser").getIDorEIMU()]=a,f));return}f=JSON.parse(e);if(f.u==null){b(babelHelpers["extends"]({},f,(e={},e[d("CurrentMessengerUser").getIDorEIMU()]=a,e)))}else{b((f={},f[d("CurrentMessengerUser").getIDorEIMU()]=a,f))}}function a(){c("Cookie").clear(m)}function p(a){if(typeof a!=="object")return null;if(a==null)return null;var b=a.c,c=a.d,d=a.s;a=a.u;d=typeof d==="string"?k.cast(d):null;b=typeof b==="object"&&b!=null?Object.entries(b).reduce(function(a,b){var c=b[0];b=b[1];if(a==null||typeof b!=="string")return null;a[c]=b;return a},{}):null;if(typeof c!=="string")return null;if(d==null)return null;if(b==null)return null;return typeof a!=="string"?null:{c:b,d:c,s:d,u:a}}function q(){var a=c("Cookie").get(m);if(c("isStringNullOrEmpty")(a))return n;a=JSON.parse(a);var b=d("CurrentMessengerUser").getIDorEIMU(),e=p(a);a=typeof a==="object"&&a!=null?p(a[b]):null;return(b=a!=null?a:e)!=null?b:n}function r(a){var b=q();if(b.u!==c("pageID"))return;var e={};a.forEach(function(a){a[0];a=a[1];var b=a.currentCursor;a=a.groupId;b!=null&&(e[(i||(i=d("I64"))).to_string(a)]=b)});l.debug("Updated sync cookie to set syncing=false, saving latest cursors");o(babelHelpers["extends"]({},b,{c:e,s:k.NOT_SYNCING}))}var s=[1,2,d("LSE2EEMetadataSyncGroupUtils").shouldAlwaysResetE2EEMetadata()?null:95];function e(a){var b=d("SortedAsyncIterable").toArray(d("ReQL").union.apply(void 0,s.map(function(b){return b==null?d("ReQL").empty():d("ReQL").fromTableAscending(a.tables.sync_groups).getKeyRange((j||(j=d("LSIntEnum"))).ofNumber(b))})));if((h||(h=c("isPromise")))(b)){c("promiseDone")(b.then(function(a){r(a)}));return}r(b)}function f(){try{var a=q();l.debug("Updated sync cookie to set syncing=true");o(babelHelpers["extends"]({},a,{s:k.SYNCING,u:c("pageID")}))}catch(a){c("FBLogger")("messenger_web").catching(a).warn("[LS] Failed to sync cookie")}}g.Status=k;g.DEFAULT_COOKIE=n;g.clear=a;g.get=q;g.syncBeforeUnload=e;g.setSyncing=f}),98);
__d("LSDataTraceFlushDeferred",["MetaConfig","Promise","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("LSDataTraceFlush").__setRef("LSDataTraceFlushDeferred");function a(a){if(!c("MetaConfig")._("62"))return(h||(h=b("Promise"))).resolve(function(){});else return i.load().then(function(b){return b.flushExpiredDataTraces(a)})}g.watchForExpiredTraces=a}),98);
__d("LSDatabaseProviderType",[],(function(a,b,c,d,e,f){"use strict";function a(a){return g(a.persistenceTypes)}function g(a){return a.includes("indexeddb")}f.isProviderPersisted=a;f.hasPersistentType=g}),66);
__d("LSDatascriptEvaluatorDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("LSDatascriptEvaluator").__setRef("LSDatascriptEvaluatorDeferred");function a(){return h.load()}g["default"]=a}),98);
__d("LSDatascriptEvaluatorMaybeDeferred",["cr:21308","cr:582"],(function(a,b,c,d,e,f,g){"use strict";c=(a=b("cr:21308"))!=null?a:b("cr:582");d=c;g["default"]=d}),98);
__d("LSTruncateTableAndSetShowError",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.sequence([function(a){return b.forEach(b.db.table(115).fetch(),function(a){return a["delete"]()})},function(d){return c[0]=b.i64.of_float(Date.now()),b.db.table(115).add({statusId:b.i64.cast([0,0]),timestampMs:c[0],errorShouldBeShown:a[0]})}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSConnectivityTruncateTableAndSetShowErrorStoredProcedure";a.__tables__=["user_visible_network_connectivity_error"];e.exports=a}),null);
__d("LSDeleteAllAndInsertConnectivityStatus",["LSTruncateTableAndSetShowError"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return c.forEach(c.db.table(114).fetch(),function(a){return a["delete"]()})},function(b){return d[0]=c.i64.of_float(Date.now()),c.db.table(114).add({statusId:void 0,timestampMs:d[0],internetConnectionState:a[0]})},function(d){return c.storedProcedure(b("LSTruncateTableAndSetShowError"),c.i64.neq(a[0],c.i64.cast([0,1])))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSConnectivityDeleteAllAndInsertConnectivityStatusStoredProcedure";a.__tables__=["connectivity_status"];e.exports=a}),null);
__d("LSDeleteAllAndInsertConnectivityStatusStoredProcedure",["LSDeleteAllAndInsertConnectivityStatus","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSDeleteAllAndInsertConnectivityStatus"),e.internetConnectionState);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSSyncStoredProcedureUtils",["I64","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){c=c!=null?(h||(h=d("I64"))).of_float(Date.now()+c):b.minTimeToSyncTimestampMs;yield a.pending_tasks.put(babelHelpers["extends"]({},b,{failureCount:(h||(h=d("I64"))).add(b.failureCount,h.one),minTimeToSyncTimestampMs:c}))});return j.apply(this,arguments)}function a(a,b,c){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.pending_tasks.index("queueNameTaskId")).getKeyRange(b)));if(b==null)return;return i(a,b,c)});return k.apply(this,arguments)}function c(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b=(yield a.network_requests.get(b,c));if(b==null)return;yield a.network_requests.put(babelHelpers["extends"]({},b,{failureCount:(h||(h=d("I64"))).add(b==null?void 0:b.failureCount,h.one)}))});return l.apply(this,arguments)}function e(a,b,c){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b=(yield a.network_requests.get(b,c));if(b==null)return;yield a.network_requests.put(babelHelpers["extends"]({},b,{epochId:void 0,networkTaskIdentifier:void 0}))});return m.apply(this,arguments)}g.incrementPendingTaskFailureCount=i;g.incrementPendingTasksTaskFailureCount=a;g.incrementNetworkRequestsTaskFailureCount=c;g.closeEpoch=e}),98);
__d("LSHandleTaskSendFailureForQueue2",["I64","LSSyncStoredProcedureUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){yield d("LSSyncStoredProcedureUtils").incrementPendingTasksTaskFailureCount(a,b,c),yield d("LSSyncStoredProcedureUtils").incrementNetworkRequestsTaskFailureCount(a,b,(h||(h=d("I64"))).neg_one),yield d("LSSyncStoredProcedureUtils").closeEpoch(a,b,h.neg_one)});return i.apply(this,arguments)}g["default"]=a}),98);
__d("LSHandleTaskSendSuccessForQueue2",["I64","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield a.network_requests.get(b,(h||(h=d("I64"))).neg_one));if(c==null||c.epochId==null)return;yield a.network_requests["delete"](b,h.neg_one)});return i.apply(this,arguments)}g["default"]=a}),98);
__d("LSPlatformDefaultUnderlyingApi",["Promise","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return c("emptyFunction")}function d(){return(h||(h=b("Promise"))).resolve()}e={cleanup:c("emptyFunction"),logEvent:function(a){},onConnectionStatusChange:a,onReconnect:a,publish:d,subscribe:a};g["default"]=e}),98);
__d("LSPlatformDeviceId",["ChannelClientID","FBLogger","LSCookie","MqttWebDeviceID","gkx"],(function(a,b,c,d,e,f,g){"use strict";function h(){if(c("gkx")("21118"))return c("MqttWebDeviceID").clientID;else return c("ChannelClientID").getID()}b=h();function a(a){a==null&&c("FBLogger")("messenger_web").info("Missed provider type for deviceId");return a==="persisted"?d("LSCookie").get().d:h()}g.deviceId=b;g.getDeviceIdForProviderType=a}),98);
__d("MessengerPWAVersionForUserAgent",["isMessengerPWA","justknobx"],(function(a,b,c,d,e,f,g){"use strict";function a(){if(!c("justknobx")._("3005"))return void 0;var a=c("isMessengerPWA")();if(!a)return void 0;a=(a=new URL(window.location.href).searchParams.get("__pwa"))!=null?a:"1.0.0";return a}g["default"]=a}),98);
__d("LSPlatformRealtimeTransport",["I64","LSDynamicDependencies","LSIntEnum","LSJson","LSMailboxInitialSyncCursor","LSShape","MessengerPWAVersionForUserAgent","Promise","clearTimeout","promiseDone","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;e="LSPlatformRealtimeTransport.NotConnected";var k="LSPlatformRealtimeTransport.Timeout";function l(a){var b=new Map();return{getAll:function(){return Array.from(b.values())},getOrStart:function(c){var d=c.toString(),e=b.get(d);e==null&&(e=a(c),b.set(d,e));return e}}}function m(){}function a(a,e,f){var g=new Map(),n={contents:m},o=new Set(),p=new Map(),q=[],r=l(function(b){b=a(b,f);q.push(b.subscribe(function(a){var b=JSON.parse(a),e=d("LSDynamicDependencies").downloadBootloaderDependencies(b.sp,b.nop,b.ntop);a=b.request_id;var f;if(a!=null){var h=g.get(a);h==null?f=!1:(c("clearTimeout")(h.timeoutId),h.resolve({downloadTask:e,payload:b,type:"taskresponse"}),g["delete"](a),f=!0)}else f=!1;if(!f){Array.from(p.entries()).forEach(function(a){return a[1](e,b)});return}}));q.push(b.onReconnect(function(){return n.contents()}));q.push(b.onConnectionStatusChange(function(a){o.forEach(function(b){return b(a)})}));return b});r.getOrStart((j||(j=d("LSIntEnum"))).unwrapIntEnum(d("LSMailboxInitialSyncCursor").syncChannel));return{cleanup:function(){q.forEach(function(a){return a()}),r.getAll().forEach(function(a){return a.cleanup()})},logEvent:function(a){r.getAll().forEach(function(b){return b.logEvent(a)})},onConnectionStatusChange:function(a){o.add(a);return function(){o["delete"](a)}},onReconnect:function(a){n.contents=a;return function(){n.contents=m}},publish:function(a){var f=a.databaseType,l=a.payload,m=a.queueName,n=a.requestId,o=a.syncChannel,p=a.type_;return new(h||(h=b("Promise")))(function(a,b){var h=r.getOrStart((j||(j=d("LSIntEnum"))).unwrapIntEnum(o));if((i||(i=d("I64"))).equal(p,(j||(j=d("LSIntEnum"))).ofNumber(3))){var q=c("setTimeout")(function(){h.logEvent("Timeout");var a=g.get(n);a!=null&&(g["delete"](n),a.reject({RE_EXN_ID:k}));return b({RE_EXN_ID:k})},3e4);g.set(n,{queueName:m,reject:b,resolve:a,timeoutId:q,timestamp:Date.now()})}q=c("MessengerPWAVersionForUserAgent")();c("promiseDone")(h.publish(d("LSJson").stringify(d("LSShape").ofRecord(babelHelpers["extends"]({app_id:e,payload:l},q!=null?{pwa_version:q}:{},{request_id:n,type:p}))),p,f),function(){if(!(i||(i=d("I64"))).equal(p,(j||(j=d("LSIntEnum"))).ofNumber(3)))return a({type:"noresponseexpected"})},function(a){b(a)})})},subscribeToNonTaskResponses:function(a){var b={};p.set(b,a);return function(){p["delete"](b)}}}}g.NotConnected=e;g.Timeout=k;g.LSPlatformRealtimeTransport=a}),98);
__d("shouldStubUnderlyingTransport",["ExecutionEnvironment"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return!(h||(h=c("ExecutionEnvironment"))).canUseDOM&&!(h||(h=c("ExecutionEnvironment"))).isInWorker}g["default"]=a}),98);
__d("LSPlatformMqttRealtimeTransport",["I64","LSIntEnum","LSPlatformDefaultUnderlyingApi","LSPlatformRealtimeTransport","Promise","promiseDone","shouldStubUnderlyingTransport"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a){return[{payload:JSON.stringify({ls_fdid:"",ls_sv:a}),qos:1,topic:"/ls_app_settings"}]}function l(a){var e={contents:a.getConnectionState()},f={contents:function(){}},g={contents:new(j||(j=b("Promise")))(function(a,b){f.contents=a})},k={onMQTTStateChanged:function(a){a==="Connected"?f.contents():a==="Disconnected"&&e.contents==="Connected"&&(g.contents=new(j||(j=b("Promise")))(function(a,b){f.contents=a})),e.contents=a}};e.contents==="Connected"&&f.contents();a.subscribeChannelEvents(k);return[function(){a.unsubscribeChannelEvents(k)},function(e,f,k){return g.contents.then(function(){return new(j||(j=b("Promise")))(function(b,g){c("promiseDone")(a.publish("/ls_req",e,{listener:{onEvent:function(a){if(a==="NOT_CONNECTED")return g({RE_EXN_ID:d("LSPlatformRealtimeTransport").NotConnected})}},qos:(h||(h=d("I64"))).equal(f,(i||(i=d("LSIntEnum"))).ofNumber(4))?0:1,skipBuffer:!1}),function(){return b()},function(a){if(a.message==="Publish Timed Out")return g({RE_EXN_ID:d("LSPlatformRealtimeTransport").Timeout});else return g(a)})})})}]}var m={contents:void 0};function a(a,b,d){if(c("shouldStubUnderlyingTransport")())return c("LSPlatformDefaultUnderlyingApi");var e=d.getInstance(b),f={getPublishMessages:function(){return k(a)}};e.registerExtraConnectPayloadProvider(f);var g={onMQTTStateChanged:function(a){var b=m.contents;if(b!=null)return b(a)}};e.subscribeChannelEvents(g);var h=e.subscribe("/ls_foreground_state",function(){});b=l(e);var i=b[0];b=b[1];return{cleanup:function(){e.unregisterExtraConnectPayloadProvider(f),d.shutdownAndClear(),e.unsubscribeChannelEvents(g),h(),i()},logEvent:function(a){},onConnectionStatusChange:function(a){m.contents=a;return function(){m.contents=void 0}},onReconnect:function(a){var b={contents:e.getConnectionState()},c={contents:b.contents==="Connected"},d={onMQTTStateChanged:function(d){d==="Connected"&&(c.contents&&b.contents!=="Connected"&&a(),c.contents=!0),b.contents=d}};e.subscribeChannelEvents(d);return function(){e.unsubscribeChannelEvents(d)}},publish:b,subscribe:function(a){return e.subscribe("/ls_resp",function(b){return a(b)})}}}g["default"]=a}),98);
__d("LSPlatformRequestId",[],(function(a,b,c,d,e,f){"use strict";var g=4;function a(){var a=g;g+=1;return a}b={generate:a};f["default"]=b}),66);
__d("LSPlatformRequestScheduler",["clearTimeout","justknobx","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h=Math.pow(2,31)-1;a=function(){function a(){this.requests=new Map()}var b=a.prototype;b.schedule=function(a,b,d){var e=this.requests.get(b);e!=null&&c("clearTimeout")(e);e=c("justknobx")._("4435")?Math.min(d,h):d;this.requests.set(b,c("setTimeout")(a,e))};b.cleanup=function(){this.requests.forEach(function(a){return c("clearTimeout")(a)})};return a}();g["default"]=a}),98);
__d("LSPlatformServerResponseHandler",["FBLogger","Promise","asyncToGeneratorRuntime","clearTimeout","nullthrows","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i="executeFirstBlockForSyncTransaction";a=function(){function a(a){this.eval=a,this.currentlyRunning=new Map()}var d=a.prototype;d.evalWhenReady=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var d;try{yield a,d=c("setTimeout")(function(){c("FBLogger")("messenger_web").mustfix("waited longer than 30 seconds to eval sync script")},3e4),yield this.eval(b)}finally{c("clearTimeout")(d)}});function d(b,c){return a.apply(this,arguments)}return d}();d.$1=function(a){var c=this.currentlyRunning.get(a);c==null&&(c=(h||(h=b("Promise"))).resolve(),this.currentlyRunning.set(a,c));return c};a.getSyncScriptType=function(a){var b;if(!((b=a.sp)==null?void 0:b.includes(i)))return{status:"non-transactional"};b=function(){try{var b;return(b=JSON.parse(a.syncScript))==null?void 0:b.step}catch(a){return null}}();if(!Array.isArray(b)){c("FBLogger")("messenger_web").warn("Sync payload appears invalid.");return{status:"non-transactional"}}b=[b];while(b.length){var d=c("nullthrows")(b.shift());for(d of d)if(Array.isArray(d)){if(d[0]===5&&d[1]===i&&Array.isArray(d[2]))return{status:"transactional",syncGroup:parseInt(d[2][1],10)};b.push(d)}}return{status:"err"}};d.maybeEvalInOrderReceived=function(b,d){var e,f=this,g=a.getSyncScriptType(d),h=0;switch(g.status){case"err":c("FBLogger")("messenger_web").warn("Sync script sync group parsing failed: employed sprocs were %s",JSON.stringify((e=d.sp)!=null?e:void 0));break;case"non-transactional":return this.evalWhenReady(b,d);case"transactional":h=g.syncGroup;break}e=this.$1(h);g=e.then(function(){return f.evalWhenReady(b,babelHelpers["extends"]({},d,{priority:"sync_script"}))})["catch"](function(a){f.currentlyRunning["delete"](h);throw a});this.currentlyRunning.set(h,g);return g};return a}();g["default"]=a}),98);
__d("LSPlatformTaskSyncGroupId",[],(function(a,b,c,d,e,f){"use strict";a=-1;b=a;f["default"]=b}),66);
__d("MWPBeginHandlingPendingTasksForQueue",["LSBeginHandlingFireForgetTasksForQueueStoredProcedure","LSBeginHandlingPendingTasksForQueue2","LSFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,d){var e=d.fireAndForgetTask,g=d.ignoreSoftDelay,h=d.queueName;d=(yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(e===!0){var b=(yield c("LSBeginHandlingFireForgetTasksForQueueStoredProcedure")(c("LSFactory")(a),{queueName:h}));b=b[0];return[b]}return c("LSBeginHandlingPendingTasksForQueue2")(a,{ignoreSoftDelay:g,queueName:h})});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":37"));return d});return h.apply(this,arguments)}g["default"]=a}),98);
__d("MWPlatformTaskUtils",["FBLogger","I64","JSScheduler","MetaConfig","Promise","ReQL","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,e){function f(){return g.apply(this,arguments)}function g(){g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{yield a(e)}catch(a){c("FBLogger")("messenger_web").catching(a).warn("Failed to calculate work for task queue %s",e.queueName)}});return g.apply(this,arguments)}if((j||(j=d("I64"))).gt(e.priority,(j||(j=d("I64"))).zero)&&c("MetaConfig")._("78")){var h=function(){f()};(i||(i=c("JSScheduler"))).scheduleLoggingPriCallback(h)}else c("promiseDone")(f())}function l(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){try{yield a(b)}catch(a){c("FBLogger")("messenger_web").catching(a).warn("Failed to calculate work for fire forget queue %s",b.queueName)}});return m.apply(this,arguments)}function a(a,c){var e=new Set(),f=[],g=[];g.push(a.tables.pending_tasks.index("queueNameTaskId").subscribe(function(a,b){var c;if(b.operation==="delete"){e.add(a[0]);return}a=b.operation==="put"&&b.prevValue==null||b.operation==="add";c=b.operation==="put"&&(j||(j=d("I64"))).compare(b.value.failureCount,(c=(c=b.prevValue)==null?void 0:c.failureCount)!=null?c:(j||(j=d("I64"))).zero)>0;(a||c)&&e.add(b.value.queueName);(b.operation==="add"&&b.value.dataTraceId==null||b.value.dataTraceId==="")&&f.push(b.value)}));g.push(a.tables.network_requests.subscribe(function(a,b){a=a[0];if(a==="")return;b.operation==="delete"?e.add(a):b.value.epochId==null&&e.add(a)}));g.push(a.subscribeToCommit(function(){var g=Array.from(e);e.clear();f=[];g.forEach(function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.pending_tasks.index("queueNameTaskId")).bounds({gte:[b]})));b!=null&&k(c,b)});return function(a){return e.apply(this,arguments)}}())}));return g}function e(a,e){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.pending_tasks))),c=new Set();for(b of b){if(c.has(b.queueName))continue;c.add(b.queueName);k(e,b)}})())}function n(a,e){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var g=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.pending_fire_and_forget_tasks)));yield (h||(h=b("Promise"))).all(g.map(function(a){return l(e,a)}));c("promiseDone")(a.runInTransaction(function(a){return(h||(h=b("Promise"))).all(g.map(function(b){return a.pending_fire_and_forget_tasks["delete"](b.taskId)}))},"readwrite","background",void 0,f.id+":196"))})())}function o(a,b){var c=!1,d=[];d.push(a.tables.pending_fire_and_forget_tasks.subscribe(function(a,b){if(b.operation==="delete")return;a=b.operation==="put"&&b.prevValue==null||b.operation==="add";a&&(c=!0)}));d.push(a.subscribeToCommit(function(){c&&n(a,b),c=!1}));return d}g.checkQueuesWhenPendingTaskTableUpdates=a;g.checkAllPendingTasksForWork=e;g.checkAllFireForgetTasksForWork=n;g.checkQueuesWhenPendingFireForgetTaskTableUpdates=o}),98);
__d("LSPlatformTaskSystemTransport",["CurrentMessengerUser","FBLogger","I64","JSResourceForInteraction","JSScheduler","LSDatabaseProviderType","LSHandleTaskSendFailureForQueue2","LSHandleTaskSendSuccessForQueue2","LSIntEnum","LSJson","LSMailboxInitialSyncCursor","LSPlatformRealtimeTransport","LSPlatformRequestId","LSPlatformRequestScheduler","LSPlatformServerResponseHandler","LSPlatformTaskSyncGroupId","LSShape","LSVec","MWPBeginHandlingPendingTasksForQueue","MWPBumpEntityKey","MWPlatformTaskUtils","Promise","ReQL","asyncToGeneratorRuntime","cr:4031","cr:6668","gkx","isInstamadillo","justknobx","promiseDone","qex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=500,m=c("JSResourceForInteraction")("publishLSPlatformDeidentifiedPayload").__setRef("LSPlatformTaskSystemTransport"),n=new Set([632,765,60011,1006,1018].map(function(a){return a.toString()}));a=function(){function a(a,e,f,g){var h=this;this.key="ls";this.$8=!1;this.$18=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=(yield c("MWPBeginHandlingPendingTasksForQueue")(h.$1,{ignoreSoftDelay:b,queueName:a}));for(a of b)yield h.$17(d("LSShape").toRecord(a))});return function(b,c){return a.apply(this,arguments)}}();this.$1=a;this.$2=e;this.$3=f;this.$4=g;this.$8=d("LSDatabaseProviderType").isProviderPersisted(a);this.$5=new(c("LSPlatformRequestScheduler"))();this.$6=new(c("LSPlatformServerResponseHandler"))(f);this.$7=this.$9();this.$10()}var e=a.prototype;e.$11=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(!(c("justknobx")._("3637")||c("isInstamadillo")())){var d=(yield this.$2.publish(b));return d}d=a.filter(function(a){return a.label!=null&&n.has(a.label)});if(d.length<a.length){d.length>0&&c("FBLogger")("maw_ohai").mustfix("Deidentifed tasks label %s sent together with normal tasks",d[0].label);a=(yield this.$2.publish(b));return a}a=d[0];d=(yield m.load());d=(yield d(babelHelpers["extends"]({},b,{taskLabel:a.label})));return d});function d(b,c){return a.apply(this,arguments)}return d}();e.$12=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield this.$1.runInTransaction(function(b){return c("LSHandleTaskSendFailureForQueue2")(b,a)},"readwrite",void 0,void 0,f.id+":157")});function d(b){return a.apply(this,arguments)}return d}();e.$13=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield this.$1.runInTransaction(function(b){return c("LSHandleTaskSendSuccessForQueue2")(b,a)},"readwrite","background",void 0,f.id+":166")});function d(b){return a.apply(this,arguments)}return d}();e.$14=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=c("LSVec").toArray(a.tasks).slice(0).map(function(a){return d("LSShape").toRecord(a)});a=a[0];if(a==null)return;a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(this.$1.tables.pending_tasks).getKeyRange(a.task_id)));return a==null?void 0:a.dataTraceId});function e(b){return a.apply(this,arguments)}return e}();e.$15=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=this;if(a.network_payload==null)return;var g=d("LSShape").toRecord(a.network_payload);(k||(k=c("JSScheduler"))).scheduleLoggingPriCallback(function(){return g&&(b("cr:6668")==null?void 0:b("cr:6668").recordTaskSending(g.tasks))});var i=this.$4;try{yield (j||(j=b("Promise"))).all(c("LSVec").toArray(g.tasks).map(function(a){return d("LSShape").toRecord(a)}).map(function(b){var g=c("LSPlatformRequestId").generate();return f.$11([b],{databaseType:c("LSPlatformTaskSyncGroupId"),payload:d("LSJson").stringify(d("LSShape").ofRecord({label:b.label,payload:b.payload,version:i})),queueName:a.queue_name,requestId:g,syncChannel:d("LSMailboxInitialSyncCursor").taskChannel,type_:(h||(h=d("I64"))).of_int32(e)})}))}catch(a){}});function e(b,c){return a.apply(this,arguments)}return e}();e.$16=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){if(a.network_payload==null)return;var f=d("LSShape").toRecord(a.network_payload),g=c("LSVec").toArray(f.tasks).map(function(a){return d("LSShape").toRecord(a)}),j=(yield this.$14(f));(k||(k=c("JSScheduler"))).scheduleLoggingPriCallback(function(){return f&&(b("cr:6668")==null?void 0:b("cr:6668").recordTaskSending(f.tasks))});var l=c("LSPlatformRequestId").generate(),m,n=c("qex")._("789");if(n!=null&&n!=="default"){var o=n+"."+(i||(i=d("LSIntEnum"))).toNumber(d("LSMailboxInitialSyncCursor").taskChannel)+"."+e.toString();d("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed",o)}try{m=(yield this.$11(g,{databaseType:c("LSPlatformTaskSyncGroupId"),payload:d("LSJson").stringify(d("LSShape").ofRecord(babelHelpers["extends"]({},f,{version_id:this.$4},j==null?{}:{data_trace_id:j}))),queueName:a.queue_name,requestId:l,syncChannel:d("LSMailboxInitialSyncCursor").taskChannel,type_:(h||(h=d("I64"))).of_int32(e)}))}catch(b){if(n!=null&&n!=="default"){o=n+"."+(i||(i=d("LSIntEnum"))).toNumber(d("LSMailboxInitialSyncCursor").taskChannel)+"."+e.toString();d("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed",o+".exception");b.RE_EXN_ID===d("LSPlatformRealtimeTransport").Timeout?d("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed",o+".exception.timeout"):b.RE_EXN_ID===d("LSPlatformRealtimeTransport").NotConnected&&d("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed",o+".exception.notconnected")}b.RE_EXN_ID===d("LSPlatformRealtimeTransport").Timeout?d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","send_fail_timeout"):b.RE_EXN_ID===d("LSPlatformRealtimeTransport").NotConnected?(d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","send_fail_notconnected"),c("FBLogger")("messenger_web").warn("Publishing a task to the server not connected")):(d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","send_fail_generic"),c("FBLogger")("messenger_web").warn("Error while publishing a task for request: %s, error %s",e,JSON.stringify(b)));yield this.$12(a.queue_name)}if(m!=null&&m.type==="taskresponse")try{j=m.downloadTask;var p=m.payload;l={experiments:p.ex,sp:p.sp,syncScript:p.payload,target:p.target,taskNames:g.map(function(a){return a.label}).filter(Boolean)};this.$8||c("gkx")("10470")?yield this.$6.evalWhenReady(j,l):yield this.$3(l);yield this.$13(a.queue_name);(k||(k=c("JSScheduler"))).scheduleLoggingPriCallback(function(){return f&&(b("cr:6668")==null?void 0:b("cr:6668").recordTaskSent(f.tasks,p.payload))})}catch(b){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","handle_task_failure"),c("FBLogger")("messenger_web").catching(b).mustfix("Encountered an error while processing a task response via realtime transport"),yield this.$12(a.queue_name)}});function e(b,c){return a.apply(this,arguments)}return e}();e.decideWhatToDoWithTask=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){var h=this,i=(yield c("MWPBeginHandlingPendingTasksForQueue")(a,{fireAndForgetTask:g,ignoreSoftDelay:!1,queueName:e,transportKey:f}));c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){for(var a of i)yield h.$17(d("LSShape").toRecord(a))})())});function e(b,c,d,e){return a.apply(this,arguments)}return e}();e.$17=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=this.$5,f=this.$18;function g(a,b){e.schedule(function(){c("promiseDone")(f(a,!1))},a,b!=null?(h||(h=d("I64"))).to_float(b):l)}var i=(h||(h=d("I64"))).to_int32(a.work_item_type);switch(i){case 1:yield this.$16(a,3);break;case 5:yield this.$15(a,4);break;case 3:g(a.queue_name,a.next_sync_ms);break;case 2:yield b("cr:4031").handleLSWork(this.$1,a,d("CurrentMessengerUser").getAccountID());break;case 4:break;default:c("FBLogger")("messenger_web").warn("Unknown Task type of %s",i)}});function e(b){return a.apply(this,arguments)}return e}();e.$9=function(){var a=this,e=this.$1;return this.$2.onReconnect(function(){c("promiseDone")(e.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.network_requests).bounds({gte:d("ReQL").key("")})));yield (j||(j=b("Promise"))).all(e.map(function(b){b=b.taskQueueName;return c("LSHandleTaskSendFailureForQueue2")(a,b)}))});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":473")),a.$10()})};e.$10=function(){var a=this;d("MWPlatformTaskUtils").checkAllPendingTasksForWork(this.$1,function(b){b=b.queueName;return a.decideWhatToDoWithTask(a.$1,b)})};e.cleanup=function(){this.$7()};return a}();g["default"]=a}),98);
__d("LSProgramTarget",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({DASM:1,JS:2,JSON:3});c=a;f["default"]=c}),66);
__d("LSVersion",[],(function(a,b,c,d,e,f){e.exports="24177151738556175"}),null);
__d("MAWUpdateThreadListItemUtils",["MAWAckLevel","MAWDbMsg","MAWDbMsgOrReaction","MAWMsgType","MAWXMAUtils","vulture"],(function(a,b,c,d,e,f,g){"use strict";function a(a){c("vulture")("OIvSKeeabHAO6MpMLvvp_BQ3McI=");return d("MAWDbMsgOrReaction").switchOnMsgOrReactionMaybeUnstored(a,{forMessage:function(a){return a.altIndex===d("MAWDbMsg").SPAM_ALT_INDEX||a.altIndex===d("MAWDbMsg").FUTUREPROOF_SPAM_ALT_INDEX},forReaction:function(){return!1}})}function b(a){c("vulture")("OtbZNEU3WqjoY7jCmVAF0MZdV-o=");return d("MAWDbMsgOrReaction").switchOnMsgOrReactionMaybeUnstored(a,{forMessage:function(a){return a.ack===d("MAWAckLevel").ACK.clock},forReaction:function(){return!1}})}function e(a){c("vulture")("SOS8C4SqDuRhPFAPvG8CmibzE_8=");return a.msgId!=null&&a.type===d("MAWMsgType").MSG_TYPE.XMA&&((a=a.msgContent)==null?void 0:a.content)===""}function f(a){return a.type===d("MAWMsgType").MSG_TYPE.XMA&&d("MAWXMAUtils").isRtcXMA(a==null?void 0:a.xmaMessageType)}g.isSpamMessage=a;g.isOptimisticMessage=b;g.isXMAThreadSnippet=e;g.isRTCXMAMessage=f}),98);
__d("MAWWormOdsLogger",["WABridge","WAOdsEnums"],(function(a,b,c,d,e,f,g){"use strict";a={log:function(a){return d("WABridge").getBridge().fireAndForget("event","odsBumpEntityKey",{entity:d("WAOdsEnums").Entity.WORM,key:a})}};g.wormOdsWorkerLogger=a}),98);
__d("MWPExecuteTaskBridge",["FBLogger","QuickPerformanceLogger","cr:6551"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,d,e){var f=d.event,g=d.taskID;(h||(h=c("QuickPerformanceLogger"))).markerPoint(f,"execute_task_through_bridge",{instanceKey:g});if(b("cr:6551")==null||b("cr:6551")[e]==null){(h||(h=c("QuickPerformanceLogger"))).markerPoint(f,"handler_not_found",{instanceKey:g});throw c("FBLogger")("messenger_web").mustfixThrow("[LS] No bridge task handler found for %s",e)}h.markerPoint(f,"bridge_api_call",{instanceKey:g});return b("cr:6551")[e](a,d)}g.executeTask=a}),98);
__d("MWPHandleNativeTaskBatched",["FBLogger","I64","LSHandleTaskSendSuccessForQueue2","LSJson","LSShape","LSSyncStoredProcedureUtils","LSVec","MWPExecuteTaskBridge","Promise","QuickPerformanceLogger","asyncToGeneratorRuntime","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=new Set();function l(a){try{var b=a.payload!==""?d("LSJson").parse(a.payload):"";return b}catch(b){throw c("FBLogger")("messenger_web").catching(b).mustfix("[LS] parseLSTaskReqType: Error parsing native task payload for queue: %s, falling back to null payload",a.queue_name)}}function m(a,b,c){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,g){if(k.has((j||(j=d("I64"))).to_string(e.task_id))){c("FBLogger")("messenger_web").warn("[LS] MWPHAndleNativeTask: Task is already being processed, skipping");return(i||(i=b("Promise"))).resolve()}k.add((j||(j=d("I64"))).to_string(e.task_id));var m=j.to_float(e.task_id),n=c("qpl")._(164763515,"1216");(h||(h=c("QuickPerformanceLogger"))).markerStart(n,m);if(e.label==null){c("FBLogger")("messenger_web").warn("[LS] MWPHandleNativeTask: Cannot find a handler for task if task label is empty");(h||(h=c("QuickPerformanceLogger"))).markerPoint(n,"null_task_label",{instanceKey:m});h.markerEnd(n,3,m);k["delete"]((j||(j=d("I64"))).to_string(e.task_id));return a.runInTransaction(function(a){return a.pending_tasks["delete"](e.task_id)},"readwrite",void 0,void 0,f.id+":81")}var o;try{(h||(h=c("QuickPerformanceLogger"))).markerPoint(n,"parse_task",{instanceKey:m}),o=l(e)}catch(a){(h||(h=c("QuickPerformanceLogger"))).markerPoint(n,"parse_task_failed",{instanceKey:m});c("FBLogger")("messenger_web").catching(a);k["delete"]((j||(j=d("I64"))).to_string(e.task_id));return}var p=e.label;h.markerAnnotate(n,{string:{source:"MWPHandleNativeTaskBatched_handleTask",taskName:p}},{instanceKey:m});try{(h||(h=c("QuickPerformanceLogger"))).markerPoint(n,"task_execute",{instanceKey:m}),yield d("MWPExecuteTaskBridge").executeTask(o,{actorID:g,event:n,source:"MWPHandleNativeTaskBatched_handleTask",taskID:(j||(j=d("I64"))).to_float(e.task_id)},p),yield a.runInTransaction(function(a){return a.pending_tasks["delete"](e.task_id)},"readwrite",void 0,void 0,f.id+":130"),h.markerEnd(n,2,m)}catch(g){yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield a.pending_tasks.get(e.task_id));if(b!=null)return d("LSSyncStoredProcedureUtils").incrementPendingTaskFailureCount(a,b)});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":141"),(h||(h=c("QuickPerformanceLogger"))).markerPoint(n,"task_execute_failed",{instanceKey:m}),h.markerEnd(n,3,m),c("FBLogger")("messenger_web").catching(g).mustfix("Error handling native task for %s.",e.label)}k["delete"](j.to_string(e.task_id))});return n.apply(this,arguments)}function a(a,b,c){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,g){var h=e.network_payload,k=e.queue_name;if(h==null){c("FBLogger")("messenger_web").warn("[LS] MWPHAndleNativeTask: network_payload is empty, there's nothing to handle");return(i||(i=b("Promise"))).resolve()}e=d("LSShape").toRecord(h);h=c("LSVec").toArray(e.tasks).map(function(a){return d("LSShape").toRecord(a)});e=h.map(function(b){return m(a,b,g)});try{yield (i||(i=b("Promise"))).all(e),yield a.runInTransaction(function(a){return c("LSHandleTaskSendSuccessForQueue2")(a,k)},"readwrite",void 0,void 0,f.id+":184")}catch(e){c("FBLogger")("messenger_web").warn("[LS] MWPHAndleNativeTask: tasks network_payload is empty, there's nothing to handle",k);try{yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("LSSyncStoredProcedureUtils").incrementNetworkRequestsTaskFailureCount(a,k,(j||(j=d("I64"))).neg_one),yield d("LSSyncStoredProcedureUtils").closeEpoch(a,k,j.neg_one)});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":194")}catch(a){c("FBLogger")("messenger_web").catching(a).mustfix("[LS] Error bumping failure cound for task")}}});return o.apply(this,arguments)}e={handleLSWork:a};g["default"]=e}),98);
__d("MWPlatformTaskSystem",["LSPlatformRequestScheduler","MWPlatformTaskUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){var e=this;this.$1=a;this.$2=b;this.$3=new(c("LSPlatformRequestScheduler"))();this.$4=d("MWPlatformTaskUtils").checkQueuesWhenPendingTaskTableUpdates(a,function(b){var c=b.queueName;b=b.transportKey;return e.$6(a,c,b,!1)});this.$5=d("MWPlatformTaskUtils").checkQueuesWhenPendingFireForgetTaskTableUpdates(a,function(b){var c=b.queueName;b=b.transportKey;return e.$6(a,c,b,!0)});this.$7()}var e=a.prototype;e.$6=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d){yield this.$2.decideWhatToDoWithTask(a,b,c,d)});function c(b,c,d,e){return a.apply(this,arguments)}return c}();e.$7=function(){var a=this;d("MWPlatformTaskUtils").checkAllPendingTasksForWork(this.$1,function(b){b=b.queueName;return a.$6(a.$1,b)})};e.cleanup=function(){this.$4.forEach(function(a){return a()}),this.$5.forEach(function(a){return a()}),this.$2.cleanup()};return a}();g["default"]=a}),98);
__d("XPlatRelayEnvironment",["CometRelayEnvironment","err"],(function(a,b,c,d,e,f,g){"use strict";function a(a){throw c("err")("RelayEnvironment is already set")}function b(){return c("CometRelayEnvironment")}g.setRelayEnvironment=a;g.getRelayEnvironment=b}),98);
__d("getMWLSRegion",["MessengerWebRegion"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("MessengerWebRegion").regionNullable;return a==null?"":a}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("EARInitType",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["EB_INIT","LS_INIT","MAW_INIT","MAW_RP_INIT","MAW_IN_UI_INIT"]);c=a;f["default"]=c}),66);
__d("EBEnableUnifiedAttachment",[],(function(a,b,c,d,e,f){"use strict";var g=!1;function a(a){g=a}function b(){return g}f.setEbEnableUnifiedAttachment=a;f.getEbEnableUnifiedAttachment=b}),66);
__d("EBLogger",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";a=c("FBLogger")("labyrinth_web").tags(["labyrinth_web"]);g.EBLogger=a}),98);
__d("MWEBUseLocalStorage",["WALogger","WebStorage","getMWEncryptedBackupsIsLocalStorageSupported"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Encrypted Backups key "," written to local storage"]);i=function(){return a};return a}function a(a,b){a=a;b=b!=null?b:"true";if(d("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var e;d("WALogger").LOG(i(),a);(e=(h||(h=c("WebStorage"))).getLocalStorage())==null?void 0:e.setItem(a,b)}}function b(a){a=a;if(d("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var b;(b=(h||(h=c("WebStorage"))).getLocalStorage())==null?void 0:b.removeItem(a)}}function e(a){if(d("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var b;a=a;return(b=(h||(h=c("WebStorage"))).getLocalStorageForRead())==null?void 0:b.getItem(a)}return null}function f(a){if(d("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var b;a=a;return((b=(h||(h=c("WebStorage"))).getLocalStorageForRead())==null?void 0:b.getItem(a))!=null}return!0}g.mwEBCreateLocalStorageEntry=a;g.mwEBDeleteLocalStorageEntry=b;g.mwEBGetLocalStorageEntryValue=e;g.mwEBGetIsLocalStorageEntryValuePresent=f}),98);
__d("EBReenrollmentTriggerHandler",["EBLogger","LSIntEnum","MWEBUseLocalStorage","MWEncryptedBackupsLocalStorageEntryEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("EBLogger").EBLogger.tags(["DefaultEBReenrollmentTriggerHandler"]);a=function(){function a(){}var b=a.prototype;b.handle=function(a){i.debug("Running default reenrollment trigger handler for reason: "+(h||(h=d("LSIntEnum"))).toNumber(a.deviceReenrollmentReason));for(a of c("MWEncryptedBackupsLocalStorageEntryEnum").members())i.debug("Clearing local storage key: "+a),a!==c("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_OPTED_OUT_OF_AUTO_RESTORE&&d("MWEBUseLocalStorage").mwEBDeleteLocalStorageEntry(a)};return a}();g.DefaultEBReenrollmentTriggerHandler=a}),98);
__d("MWEBODSCategory",[],(function(a,b,c,d,e,f){"use strict";a=7319;f["default"]=a}),66);
__d("EBReenrollmentTriggerListener",["EBReenrollmentTriggerHandler","LSIntEnum","MWEBODSCategory","MWEBODSEntityName.enum","ODS","ReQL","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=function(){function a(a){this.$1=new Map(),this.$4=new(d("EBReenrollmentTriggerHandler").DefaultEBReenrollmentTriggerHandler)(),this.$2=a,this.$5()}var b=a.prototype;b.$5=function(){var a=this;this.$3==null&&(this.$3=d("ReQL").fromTableAscending(this.$2.tables.encrypted_backups_reenrollment_trigger).take(1).subscribe(function(b,e){if(e.operation==="add"||e.operation==="put"){(h||(h=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),c("MWEBODSEntityName.enum").MW_EBSM_COUNTERS,"reenrollment_trigger");b=a.getDefaultHandler();if(e.value.deviceReenrollmentReason!=null){var g;b=(g=a.$1.get((i||(i=d("LSIntEnum"))).unwrapIntEnum(e.value.deviceReenrollmentReason)))!=null?g:b}b.handle(e.value);c("promiseDone")(a.$2.runInTransaction(function(a){return a.encrypted_backups_reenrollment_trigger["delete"](e.value.pk)},"readwrite",void 0,void 0,f.id+":77"))}}));return this.$3};b.attachHandler=function(a,b){this.$1.set(a,b)};b.getDefaultHandler=function(){return this.$4};return a}(),k;function l(a){if(k!=null)return k;k=new j(a);return k}function a(a){k==null&&l(a);return k}g.initEBReenrollmentTriggerListener=l;g.getEBReenrollmentTriggerListener_TESTING_ONLY=a}),98);
__d("EBUnifyLegacyMediaUpload",[],(function(a,b,c,d,e,f){"use strict";var g=!1;function a(a){g=a}function b(){return g}f.setEnableUnifyLegacyMediaUpload=a;f.getEnableUnifyLegacyMediaUpload=b}),66);
__d("EncryptedBackupTaskIssuedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5726");b=d("FalcoLoggerInternal").create("encrypted_backup_task_issued",a);e=b;g["default"]=e}),98);
__d("EncryptedBackupsDYITypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({NotStarted:0,InProgress:1,Completed:2,Failed:3});c=b("$InternalEnum")({Armadillo:0,Instamadillo:1});f.EncryptedBackupsDYIState=a;f.EncryptedBackupsDYIConfig=c}),66);
__d("EncryptedBackupsUtils",["FBLogger","WAJids","WAStanzaUtils","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";f=function(a){return Date.now()-a>d("WATimeUtils").DAY_MILLISECONDS*30};var h=function(a){return Date.now()-a>d("WATimeUtils").DAY_MILLISECONDS*30};function a(a,b,c,d,e){d={frankingTag:d==null?void 0:d.frankingTag,reportingTag:d==null?void 0:d.reportingTag};d={frankingMetadata:d,messageId:b,senderId:a,timestampMs:c};return{encryptedTransportMessage:e,metadata:d}}function b(a){return JSON.stringify([a.author,a.chat,a.externalId])}function e(a){a=JSON.parse(a);if(!Array.isArray(a))throw c("FBLogger")("labyrinth_web").mustfixThrow("Unable to parse msg id string as proper json");if(a.length!==3)throw c("FBLogger")("labyrinth_web").mustfixThrow("Parsed array should have 3 components");var b=d("WAJids").unsafeCoerceToUserJid(a[0]),e=d("WAJids").unsafeCoerceToChatJid(a[1]);a=d("WAStanzaUtils").toStanzaId(a[2]);return{author:b,chat:e,externalId:a}}g.entryOlderThan30Days=f;g.timestampOlderThan30Days=h;g.asBackupMessage=a;g.convertWAMsgIdToStringId=b;g.convertStringIdToWAMsgId=e}),98);
__d("MAWExtractMsFromExternalId",["I64","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to convert externalId to number: ",""]);i=function(){return a};return a}function j(a){return new Date(a).getTime()>0}var k=2199023255551;function a(a){try{a=(h||(h=d("I64"))).of_string_opt(a);if(a!=null){return(a=l(a))!=null?a:0}}catch(a){d("WALogger").ERROR(i(),a)}return 0}function l(a){a=Number((h||(h=d("I64"))).to_string(h.and_(h.lsr_(a,22),h.of_float(k))));if(j(a)){a=Math.floor(Number(a)%1e5/100);return a}}g.extractMsFromStanzaId=a;g.extractMsFromExternalId=l}),98);
__d("IGDWEBUploadMessageUtils",["I64","MAWExtractMsFromExternalId","WALogger","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[sortOrder] Could not extract ms from externalId: ",""]);i=function(){return a};return a}function a(a,b){var c=d("MAWExtractMsFromExternalId").extractMsFromExternalId((h||(h=d("I64"))).of_string(a));c==null&&d("WALogger").WARN(i(),a);return d("WATimeUtils").castToMillisTime(Number(b)*1e3+(c!=null?c:0))}g.generateProtobufServerTs=a}),98);
__d("WAArmadilloBackupCommon.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.name="Subprotocol";a.internalSpec={payload:[1,d("WAProtoConst").TYPES.BYTES],version:[2,d("WAProtoConst").TYPES.INT32]};g.SubprotocolSpec=a}),98);
__d("WAArmadilloBackupMessage.pb",["WAArmadilloBackupCommon.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};a.name="BackupMessage";a.internalSpec={metadata:[1,(e=d("WAProtoConst")).TYPES.MESSAGE,b],encryptedTransportMessage:[2,e.TYPES.BYTES],encryptedTransportEvent:[5,e.TYPES.MESSAGE,d("WAArmadilloBackupCommon.pb").SubprotocolSpec],encryptedTransportLocallyTransformedMessage:[6,e.TYPES.MESSAGE,d("WAArmadilloBackupCommon.pb").SubprotocolSpec],miTransportAdminMessage:[7,e.TYPES.MESSAGE,d("WAArmadilloBackupCommon.pb").SubprotocolSpec],__oneofs__:{payload:["encryptedTransportMessage","encryptedTransportEvent","encryptedTransportLocallyTransformedMessage","miTransportAdminMessage"]}};b.name="BackupMessage$Metadata";b.internalSpec={senderId:[1,e.TYPES.STRING],messageId:[2,e.TYPES.STRING],timestampMs:[3,e.TYPES.INT64],frankingMetadata:[4,e.TYPES.MESSAGE,c],payloadVersion:[5,e.TYPES.INT32],futureProofBehavior:[6,e.TYPES.INT32],threadTypeTag:[7,e.TYPES.INT32]};c.name="BackupMessage$Metadata$FrankingMetadata";c.internalSpec={frankingTag:[3,e.TYPES.BYTES],reportingTag:[4,e.TYPES.BYTES]};g.BackupMessageSpec=a;g.BackupMessage$MetadataSpec=b;g.BackupMessage$Metadata$FrankingMetadataSpec=c}),98);
__d("EncryptedBackupsUploadEntity",["$InternalEnum","EncryptedBackupsUtils","IGDWEBUploadMessageUtils","WAArmadilloBackupMessage.pb","WAByteArray","WAGlobals","WAJids","WATimeUtils","encodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a instanceof ArrayBuffer?new Uint8Array(a):a}var h=b("$InternalEnum").Mirrored(["NEEDS_BACKUP","COMPLETED","NEEDS_BACKUP_RETRY","PERMANENT_FAILURE","EXPIRED","THREAD_DELETED","DELETION_PURGED","MESSAGE_DELETED","UPLOADING"]);b=b("$InternalEnum")({INVALID:"-1",IMAGE:"0",PTT:"1",DOCUMENT:"3",VIDEO:"4",GIF:"5",STICKER:"6",XMA:"22",MESSENGER_PREVIEW:"25"});function c(a){return a}function i(a){var b=a.messageApplication,c=a.msgId,e=a.reportingMeta;a=a.sortOrderMs;var f=d("WAJids").authorToUserId(c.author,d("WAJids").extractUserId(d("WAGlobals").getMyUserJid()));return d("encodeProtobuf").encodeProtobuf(d("WAArmadilloBackupMessage.pb").BackupMessageSpec,d("EncryptedBackupsUtils").asBackupMessage(f,c.externalId,a,e!=null?e:{frankingKey:null,frankingTag:null,frankingVersion:null,reportingContent:null,reportingTag:null},b)).readByteArrayView()}function e(a){return d("WAByteArray").uint8ArrayToBuffer(a)}function f(a){var b=a.attachmentContext,c=a.backupDirective,e=a.dbMsgType,f=a.instanceKey,g=a.isOpenEB,j=a.isRetroactiveUpload,k=a.legacyAttachmentContext,l=a.messageApplication,m=a.msgId,n=a.originalMsgProtocolId,o=a.reportingMeta,p=a.retryCount,q=a.senderId,r=a.serverTs,s=a.sortOrderMs,t=a.tags;a=a.triggerSource;l=i({messageApplication:l,msgId:m,reportingMeta:o,sortOrderMs:c.actionType===4?d("IGDWEBUploadMessageUtils").generateProtobufServerTs(m.externalId,r):s});o={backupActionType:c.actionType,backupDirective:c,dbMsgType:e,failTsMs:d("WATimeUtils").castToMillisTime(0),instanceKey:f,isOpenEB:g,isRetroactiveUpload:j,msgId:m,msgIdKey:d("EncryptedBackupsUtils").convertWAMsgIdToStringId(m),msgType:"text",originalMsgProtocolId:n,protobuf:l,retryCount:p,senderId:q,serverTs:r,sortOrderMs:s,supplementalKey:c.supplementalKey,tags:t,triggerSource:a,uploadStatus:h.NEEDS_BACKUP,uploadTsSec:d("WATimeUtils").unixTime()};b!=null&&(o=babelHelpers["extends"]({},o,{attachmentContext:b,legacyAttachmentContext:k,msgType:"media"}));return o}g.toEbBackupMessageBytes=a;g.EbUploadStatus=h;g.AttachmentContextMediaType=b;g.castToEBQueueId=c;g.encodeBackupMessage=i;g.getEbBackupMessageBytesBuffer=e;g.asEBUploadEntity=f}),98);
__d("EphemeralMediaViewMode",[],(function(a,b,c,d,e,f){a=Object.freeze({READ_ONCE:0,REPLAYABLE:1,PERMANENT:2});f["default"]=a}),66);
__d("LSDecryptProtobuf",["LSArrayGetObjectAt","LSBase64Decode.nop","LSCreateDerivedKeys.nop","LSGetBlobFromString.nop","LSLogMebClientEvent.nop","LSSymmetricEncryptionCreateDecryptedData.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][decryptProtobuf] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[8]=a[1]==null?c.i64.cast([0,0]):a[1],d[2]=c.i64.of_int32(a[3].length),c.i64.eq(d[2],c.i64.cast([0,1]))?c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[3],c.i64.cast([0,0])).then(function(a){return a=a,d[12]=a[0],d[13]=a[1],a})},function(e){return d[14]=d[12].get("epoch_anon_id"),d[15]=d[12].get("epoch_root_key"),d[16]=c.createArray(),d[26]=(d[16].push(c.i64.cast([0,32])),d[16]),c.i64.ge(d[8],c.i64.cast([0,3]))?c.resolve(d[17]=void 0):c.sequence([function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),a[2]).then(function(a){return a=a,d[26]=a[0],a})},function(a){return d[17]=d[26]}])},function(e){return c.i64.ge(d[8],c.i64.cast([0,4]))?(d[26]="_",d[18]=["message_key_in_epoch",d[26],c.blobs.to_string(d[14]),d[26],"cipher_version",d[26],c.i64.to_string(d[8]),d[26],"thread",d[26],a[2]==null?"":a[2]].join("")):(c.i64.ge(d[8],c.i64.cast([0,3]))?(d[27]="_",d[26]=["message_key_in_epoch",d[27],c.blobs.to_string(d[14]),d[27],"cipher_version",d[27],c.i64.to_string(d[8]),d[27],"thread",d[27],a[2]==null?"":a[2]].join("")):(c.i64.ge(d[8],c.i64.cast([0,2]))?(d[28]="_",d[27]=["message_key_in_epoch",d[28],c.blobs.to_string(d[14]),d[28],"cipher_version",d[28],c.i64.to_string(d[8])].join("")):d[27]=["message_key_in_epoch","_",c.blobs.to_string(d[14])].join(""),d[26]=d[27]),d[18]=d[26]),c.nativeOperation(b("LSGetBlobFromString.nop"),d[18]).then(function(a){return a=a,d[19]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[19],d[17],d[15],d[16]).then(function(a){return a=a,d[20]=a[0],a})},function(a){return d[20]?d[21]=!1:d[21]=!0,d[21]?c.resolve(d[22]=void 0):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[20],c.i64.cast([0,0])).then(function(a){return a=a,d[26]=a[0],d[27]=a[1],a})},function(a){return d[22]=d[26]}])},function(e){return c.blobs.neq(d[22],void 0)?c.sequence([function(e){return c.nativeOperation(b("LSBase64Decode.nop"),a[0]).then(function(a){return a=a,d[26]=a[0],a})},function(e){return c.blobs.neq(d[26],void 0)?c.sequence([function(e){return c.nativeOperation(b("LSSymmetricEncryptionCreateDecryptedData.nop"),d[22],c.blobs.of_string(["message_thread","_",a[2]].join("")),d[26]).then(function(a){return a=a,d[29]=a[0],a})},function(a){return d[27]=d[29]}]):c.resolve(d[27]=void 0)},function(a){return c.blobs.neq(d[27],void 0)?c.resolve(d[28]=d[27]):c.sequence([function(a){return d[29]=["Failed to decrypt message. Epoch Anon ID: ",c.blobs.to_string(d[14]),", Encryption Version: ",c.i64.to_string(d[8])].join(""),function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsDecryptProtobufStoredProcedure] ","",d[29]].join("")),d[30]=c.createArray(),void 0!==void 0?d[31]=(d[30].push(void 0),d[30]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDecryptProtobufStoredProcedure",[d[29]].join(""),d[30],c.i64.cast([0,3]))},function(a){return d[28]=void 0}])},function(a){return d[23]=d[28]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsDecryptProtobufStoredProcedure] Decryption message key is null"),d[26]=c.createArray(),void 0!==void 0?d[27]=(d[26].push(void 0),d[26]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDecryptProtobufStoredProcedure","Decryption message key is null",d[26],c.i64.cast([0,3]))},function(a){return d[23]=void 0}])},function(a){return c.blobs.neq(d[23],void 0)?(a=[d[23],void 0],d[24]=a[0],d[25]=a[1],a):(d[26]=new c.Map(),d[26].set("error_code",c.i64.cast([0,101])),d[26].set("stored_procedure","LSEncryptedBackupsDecryptProtobufStoredProcedure"),d[26].set("error_message",""),a=[void 0,d[26]],d[24]=a[0],d[25]=a[1],a),a=[d[24],d[25]],d[3]=a[0],d[4]=a[1],a}]):c.resolve((d[12]=c.i64.of_int32(a[3].length),c.i64.eq(d[12],c.i64.cast([0,0]))?(d[15]=new c.Map(),d[15].set("error_code",c.i64.cast([0,102])),d[15].set("stored_procedure","LSEncryptedBackupsDecryptProtobufStoredProcedure"),d[15].set("error_message",""),e=[void 0,d[15]],d[13]=e[0],d[14]=e[1],e):(d[15]=new c.Map(),d[15].set("error_code",c.i64.cast([0,103])),d[15].set("stored_procedure","LSEncryptedBackupsDecryptProtobufStoredProcedure"),d[15].set("error_message",""),e=[void 0,d[15]],d[13]=e[0],d[14]=e[1],e),e=[d[13],d[14]],d[3]=e[0],d[4]=e[1],e))},function(a){return d[5]=c.i64.of_float(Date.now()),d[6]=c.i64.random(),d[9]="Finishing execution. Execution time: ",d[10]=c.i64.to_string(c.i64.sub(d[5],d[0])),d[11]=" ms",d[7]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][decryptProtobuf] ",d[7],d[9],d[7],d[10],d[7],d[11]].join("")),c.i64.eq(c.i64.mod_(d[6],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[12]=",",d[13]=c.createArray(),void 0!==void 0?d[14]=(d[13].push(void 0),d[13]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"decryptProtobuf",[d[9],d[12],d[10],d[12],d[11]].join(""),d[13],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[3],d[4]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsDecryptProtobufStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSIsMobileClient",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return c[0]=!1,b.resolve(c)}a.__sproc_name__="LSEncryptedBackupsIsMobileClientStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSMEBTaskCreationSource",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:-1,TEST_ONLY:0,TAM:1,MEM:2,RETROACTIVE_BACKUP:3,TAM_WEB:4,ACT_MESSAGE_DELETE:5,ACT_THREAD_DELETE:6,ACT_UPDATE_ATTACHMENT:7,TAM_PERSISTENCE_TASK:8,TAM_XMA_TOMBSTONE:9,MEM_RECEIVE:10,MEM_SEND:11,MEM_PEER_SYNC:12,MEM_RECEIVE_PROTOBUF:13,MEM_SEND_PROTOBUF:14,MEM_PEER_SYNC_PROTOBUF:15,EB_ADD_DEVICE:21,OPTIMISTIC_THREAD_CREATE_VIA_SHIM:22,ACT_THREAD_INSERT_VIA_SHIM:23,MI_THREAD_INSERT_VIA_SHIM:24,POINT_QUERY_FROM_EB:25,MESSENGER_SEARCH:26,ACT_MESSAGE_RANGE_TASK_HANDLER:27,POINT_QUERY_ON_FULLY_LOADED_THREAD:28,THREAD_CUTOVER:29,HYBRID_THREAD_VERIFY_OR_CREATE_VIA_SHIM:30,BURNER_INTERNAL_LOAD_TESTING_FRAMEWORK:31,THREAD_GALLERY_RESTORE:32,ACT_SURROUNDING_QUERY:33,EB_SNAPSHOT_RESTORE:34,PROTOBUF_RESTORE:39,FTS_INDEX_EB_MESSAGES:40,INSTAMADILLO_DYI:41,MESSENGER_MESSAGE_LIST_PAGINATION:45,DELTA_GENERIC_MESSAGE_SYNC:55,MEDIA_GALLERY_RESTORE:57,EB_PROTOBUF_RESTORE_NO_OP:58,NEW_MEMBER_EXPORT:59,THREAD_POINT_QUERY:76,EB_RESTORE_REPLIED_MESSAGES_AFTER_RANGE_RESTORE:35,REPL_TESTING:36,EB_POINT_QUERY_IN_ACT:37,EB_POINT_QUERY_RETRY_DECRYPTION_FAILURES:38,IGD_DYI:42,FTS_INDEX_EB_MESSAGES_WEB:43,BULK_QUERY_FOR_SEARCH_RESULT:44,MSGR_DYI:46,EB_RESTORE_ON_REGISTRATION:47,EB_RESTORE_ON_OFFLINE_QUEUE_COUNT_LIMIT:48,EB_POINT_QUERY_RESTORE_ON_ACK_DROP:49,EB_POINT_QUERY_RESTORE_ON_DECRYPTION_FAILURE:50,EB_POINT_QUERY_RESTORE_ON_UNAVAILABLE_DEVICE:51,EB_RANGE_QUERY_RESTORE_ON_THREAD_SESSION_ACTIVATE:52,EB_POINT_QUERY_PINNED_MESSAGES:53,EB_POINT_QUERY_RESTORE_PROTOBUF:54,EB_POINT_QUERY_IN_ACT_REACTIONS:56,EB_POINT_QUERY_BUMP_MESSAGES:60,EB_POINT_QUERY_IN_ACT_FOR_INCOMING_RETRY_RECEIPT:61,EB_POINT_QUERY_IN_ACT_FOR_REPORTING:62,EB_POINT_QUERY_IN_ACT_FOR_MESSAGE_STATUS_UPDATE:63,EB_POINT_QUERY_IN_ACT_FOR_REPL_TEST:64,EB_POINT_QUERY_IN_ACT_FOR_FACEBOOK_APP_NSE_NOTIFICATION_RENDERING:65,EB_POINT_QUERY_IN_ACT_FOR_MESSAGE_EXPORT_HANDLING:66,EB_POINT_QUERY_IN_ACT_FOR_TAM_ACT_PROXY:67,EB_POINT_QUERY_IN_ACT_FOR_REALTIME_INCOMING_MESSAGE:68,EB_POINT_QUERY_IN_ACT_FOR_REALTIME_INCOMING_AI_BOT_MESSAGE:69,EB_POINT_QUERY_IN_ACT_FOR_ENCRYPTED_BACKUPS_RESTORE_FOR_PERSISTENCE:70,EB_POINT_QUERY_IN_ACT_FOR_ENCRYPTED_BACKUPS_RESTORE_FOR_INDEXING:71,EB_POINT_QUERY_IN_ACT_FOR_ENCRYPTED_BACKUPS_RESTORE_FOR_NEW_MEMBER_HYDRATION:72,EB_POINT_QUERY_IN_ACT_FOR_ENCRYPTED_BACKUPS_RESTORE_FOR_ECHO_TO_PROTO_CONVERSION:73,EB_POINT_QUERY_IN_ACT_FOR_PENDING_MESSAGE_RECOVERY_HISTORICAL_FUTURE_PROOF:74,EB_POINT_QUERY_IN_ACT_FOR_PENDING_MESSAGE_RECOVERY_REALTIME_BLOCKED:75,RESONANCE_UTILS:80,MPS_RESTORE_REVERB_RESTORE:81,REPORTING:82,CLIENT_MESSAGE_TRUNCATION:83});f["default"]=a}),66);
__d("LSThreadMediaGalleryGroup",[],(function(a,b,c,d,e,f){a=Object.freeze({PHOTOS_AND_VIDEOS:0,FILES_ONLY:1,LINKS:2});f["default"]=a}),66);
__d("MAWAckLevel",["LSIntEnum","LSMessageSendStatus"],(function(a,b,c,d,e,f,g){"use strict";var h,i={clock:0,contentGone:-3,contentTooBig:-4,contentUnuploadable:-5,expired:-2,failed:-1,failedRetryable:-9,inactiveReceived:-6,partialOptimistic:-8,played:4,read:3,received:2,senderBackFillSent:-7,sent:1};function a(a){return a>0}function b(a){switch(a){case i.partialOptimistic:return(h||(h=d("LSIntEnum"))).ofNumber(0);case i.clock:return(h||(h=d("LSIntEnum"))).ofNumber(1);case i.sent:case i.received:case i.read:case i.played:return(h||(h=d("LSIntEnum"))).ofNumber(2);case i.failedRetryable:return(h||(h=d("LSIntEnum"))).ofNumber(5);default:return(h||(h=d("LSIntEnum"))).ofNumber(4)}}function e(a){switch(a){case i.partialOptimistic:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageSendStatus").NONE);case i.clock:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageSendStatus").SENDING_TO_SERVER);case i.sent:case i.received:case i.read:case i.played:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageSendStatus").SERVER_RECEIVED);case i.failedRetryable:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageSendStatus").RETRIABLE_ERROR);default:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageSendStatus").NON_RETRIABLE_ERROR)}}g.ACK=i;g.isMsgAuthoritative=a;g.levelToMessagingSendStatusV2=b;g.levelToMessagingSendStatus=e}),98);
__d("MAWAdminMsgType",[],(function(a,b,c,d,e,f){"use strict";a="currentUserAddedDevice";b="participantAddedDevice";c="currentUserRemovedDevice";d="participantRemovedDevice";e="currentUserUpdatedDevice";var g="participantUpdatedDevice",h="participantAddedYou",i="participantAddedYouAndOneUser",j="participantAddedYouAndMoreThanOneUsers",k="unknowUserAddedYou",l="unknowUserAddedYouAndOneUser",m="unknowUserAddedYouAndMoreThanOneUser",n="unknownUserAddedOneUser",o="unknownUserAddedTwoUser",p="unknownUserAddedMoreThanTwoUser",q="participantAddedOneUser",aa="participantAddedTwoUser",ba="participantAddedMoreThanTwoUser",ca="currentUserRemovedOneParticipant",da="currentUserRemovedTwoParticipant",ea="currentUserRemovedMoreThanTwoParticipant",fa="currentUserAddedOneParticipant",ga="currentUserAddedTwoParticipant",r="currentUserAddedMoreThanTwoParticipant",ha="participantRemovedYou",ia="participantRemovedYouAndOneUser",ja="participantRemovedYouAndMoreThanOneUsers",ka="unknowUserRemovedYou",la="unknowUserRemovedYouAndOneUser",ma="unknowUserRemovedYouAndMoreThanOneUser",na="unknownUserRemovedOneUser",oa="unknownUserRemovedTwoUser",pa="unknownUserRemovedMoreThanTwoUser",qa="participantRemovedOneUser",ra="participantRemovedTwoUser",sa="participantRemovedMoreThanTwoUser",ta="participantLeftGroup",ua="currentUserLeftGroup",va="participantCustomizeParticipantNickname",wa="participantClearParticipantNickname",xa="participantCustomizeCurrentUserNickname",ya="currentUserSetOwnNickname",za="currentUserClearOwnNickname",Aa="currentUserClearParticipantNickname",Ba="participantSetOwnNickname",Ca="participantClearOwnNickname",Da="participantClearCurrentUserNickname",Ea="currentUserCustomizeNickname",Fa="currentUserNamedGroup",Ga="unkonwnUserNamedGroup",Ha="participantNamedGroup",Ia="currentUserCustomizeHotlike",Ja="participantCustomizeHotlike",Ka="currentUserCustomizeTheme",La="currentUserCustomizeAITheme",Ma="currentUserCustomizePhoto",Na="participantCustomizeTheme",Oa="participantCustomizeAITheme",Pa="participantCustomizePhoto",Qa="currentUserSetAddModeAdminOnly",Ra="currentUserSetAddModeAllMembers",Sa="participantSetAddModeAdminOnly",Ta="participantSetAddModeAllMembers",Ua="serverSetAddModeAdminOnly",Va="serverSetAddModeAllMembers",s="currentUserPinnedMessage",t="currentUserUnpinnedMessage",u="participantPinnedMessage",v="participantUnpinnedMessage",w="currentUserLimitSharingDisabled",x="currentUserLimitSharingEnabled",y="participantLimitSharingDisabled",z="participantLimitSharingEnabled",A="cutoverThreadAdminMessage",B="cutoverIGDThreadAdminMessage",C="cutoverRollbackAdminMessage",D="dualThreadCutoverAdminMessage",E="e2eeThreadDescription",F="e2eeThreadUKOSAAdminMessage",Wa="debugMsg",Xa="reachabilityError",Ya="twoUsersConnected",Za="twoUsersConnectedOneMSplit",G="CurrentUserCreatedPoll",H="ParticipantCreatedPoll",I="CurrentUserAddedPollOption",J="ParticipantAddedPollOption",K="CurrentUserAddedMultiplePollOptions",L="ParticipantAddedMultiplePollOptions",M="CurrentUserAddedPollVote",N="ParticipantAddedPollVote",O="CurrentUserAddedMultiplePollVotes",P="ParticipantAddedMultiplePollVotes",Q="CurrentUserRemovedPollVote",R="ParticipantRemovedPollVote",S="CurrentUserRemovedMultiplePollVotes",T="ParticipantRemovedMultiplePollVotes",U="CurrentUserMixedPollUpdate",V="ParticipantMixedPollUpdate",W="CurrentUserChangedPollVote",X="ParticipantChangedPollVote",Y="CurrentUserChangedMultiplePollVotes",Z="ParticipantChangedMultiplePollVotes",$="PollUnsentUpdate";r={CURRENT_USER_ADDED_DEVICE:a,CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:r,CURRENT_USER_ADDED_MULTIPLE_POLL_OPTIONS:K,CURRENT_USER_ADDED_MULTIPLE_POLL_VOTES:O,CURRENT_USER_ADDED_ONE_PARTICIPANT:fa,CURRENT_USER_ADDED_POLL_OPTION:I,CURRENT_USER_ADDED_POLL_VOTE:M,CURRENT_USER_ADDED_TWO_PARTICIPANTS:ga,CURRENT_USER_CHANGED_MULTIPLE_POLL_VOTES:Y,CURRENT_USER_CHANGED_POLL_VOTE:W,CURRENT_USER_CLEAR_OWN_NICKNAME:za,CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:Aa,CURRENT_USER_CREATED_POLL:G,CURRENT_USER_CUSTOMIZE_AI_THEME:La,CURRENT_USER_CUSTOMIZE_HOTLIKE:Ia,CURRENT_USER_CUSTOMIZE_NICKNAME:Ea,CURRENT_USER_CUSTOMIZE_PHOTO:Ma,CURRENT_USER_CUSTOMIZE_THEME:Ka,CURRENT_USER_LEFT_GROUP:ua,CURRENT_USER_LIMIT_SHARING_DISABLED:w,CURRENT_USER_LIMIT_SHARING_ENABLED:x,CURRENT_USER_MIXED_POLL_UPDATE:U,CURRENT_USER_NAMED_GROUP:Fa,CURRENT_USER_PINNED_MESSAGE:s,CURRENT_USER_REMOVED_DEVICE:c,CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS:ea,CURRENT_USER_REMOVED_MULTIPLE_POLL_VOTES:S,CURRENT_USER_REMOVED_ONE_PARTICIPANT:ca,CURRENT_USER_REMOVED_POLL_VOTE:Q,CURRENT_USER_REMOVED_TWO_PARTICIPANTS:da,CURRENT_USER_SET_ADD_MODE_ADMIN_ONLY:Qa,CURRENT_USER_SET_ADD_MODE_ALL_MEMBERS:Ra,CURRENT_USER_SET_OWN_NICKNAME:ya,CURRENT_USER_UNPINNED_MESSAGE:t,CURRENT_USER_UPDATED_DEVICE:e,CUTOVER_IGD_THREAD_ADMIN_MESSAGE:B,CUTOVER_ROLLBACK_ADMIN_MESSAGE:C,CUTOVER_THREAD_ADMIN_MESSAGE:A,DEBUG_MSG:Wa,DUAL_THREAD_CUTOVER_ADMIN_MESSAGE:D,E2EE_THREAD_DESCRIPTION:E,E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:F,PARTICIPANT_ADDED_DEVICE:b,PARTICIPANT_ADDED_MORE_THAN_TWO_USER:ba,PARTICIPANT_ADDED_MULTIPLE_POLL_OPTIONS:L,PARTICIPANT_ADDED_MULTIPLE_POLL_VOTES:P,PARTICIPANT_ADDED_ONE_USER:q,PARTICIPANT_ADDED_POLL_OPTION:J,PARTICIPANT_ADDED_POLL_VOTE:N,PARTICIPANT_ADDED_TWO_USER:aa,PARTICIPANT_ADDED_YOU:h,PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:j,PARTICIPANT_ADDED_YOU_AND_ONE_USER:i,PARTICIPANT_CHANGED_MULTIPLE_POLL_VOTES:Z,PARTICIPANT_CHANGED_POLL_VOTE:X,PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:Da,PARTICIPANT_CLEAR_OWN_NICKNAME:Ca,PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:wa,PARTICIPANT_CREATED_POLL:H,PARTICIPANT_CUSTOMIZE_AI_THEME:Oa,PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:xa,PARTICIPANT_CUSTOMIZE_HOTLIKE:Ja,PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:va,PARTICIPANT_CUSTOMIZE_PHOTO:Pa,PARTICIPANT_CUSTOMIZE_THEME:Na,PARTICIPANT_LEFT_GROUP:ta,PARTICIPANT_LIMIT_SHARING_DISABLED:y,PARTICIPANT_LIMIT_SHARING_ENABLED:z,PARTICIPANT_MIXED_POLL_UPDATE:V,PARTICIPANT_NAMED_GROUP:Ha,PARTICIPANT_PINNED_MESSAGE:u,PARTICIPANT_REMOVED_DEVICE:d,PARTICIPANT_REMOVED_MORE_THAN_TWO_USER:sa,PARTICIPANT_REMOVED_MULTIPLE_POLL_VOTES:T,PARTICIPANT_REMOVED_ONE_USER:qa,PARTICIPANT_REMOVED_POLL_VOTE:R,PARTICIPANT_REMOVED_TWO_USER:ra,PARTICIPANT_REMOVED_YOU:ha,PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:ja,PARTICIPANT_REMOVED_YOU_AND_ONE_USER:ia,PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY:Sa,PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS:Ta,PARTICIPANT_SET_OWN_NICKNAME:Ba,PARTICIPANT_UNPINNED_MESSAGE:v,PARTICIPANT_UPDATED_DEVICE:g,POLL_UNSENT_UPDATE:$,REACHABILITY_ERROR:Xa,SERVER_SET_ADD_MODE_ADMIN_ONLY:Ua,SERVER_SET_ADD_MODE_ALL_MEMBERS:Va,TWO_USERS_CONNECTED:Ya,TWO_USERS_CONNECTED_ONE_MSPLIT:Za,UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER:p,UNKNOWN_USER_ADDED_ONE_USER:n,UNKNOWN_USER_ADDED_TWO_USER:o,UNKNOWN_USER_ADDED_YOU:k,UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER:m,UNKNOWN_USER_ADDED_YOU_AND_ONE_USER:l,UNKNOWN_USER_NAMED_GROUP:Ga,UNKNOWN_USER_REMOVED_MORE_THAN_TWO_USER:pa,UNKNOWN_USER_REMOVED_ONE_USER:na,UNKNOWN_USER_REMOVED_TWO_USER:oa,UNKNOWN_USER_REMOVED_YOU:ka,UNKNOWN_USER_REMOVED_YOU_AND_MORE_THAN_ONE_USER:ma,UNKNOWN_USER_REMOVED_YOU_AND_ONE_USER:la};f.CURRENT_USER_ADDED_DEVICE=a;f.CURRENT_USER_PINNED_MESSAGE=s;f.CURRENT_USER_UNPINNED_MESSAGE=t;f.PARTICIPANT_PINNED_MESSAGE=u;f.PARTICIPANT_UNPINNED_MESSAGE=v;f.CURRENT_USER_LIMIT_SHARING_DISABLED=w;f.CURRENT_USER_LIMIT_SHARING_ENABLED=x;f.PARTICIPANT_LIMIT_SHARING_DISABLED=y;f.PARTICIPANT_LIMIT_SHARING_ENABLED=z;f.CUTOVER_THREAD_ADMIN_MESSAGE=A;f.CUTOVER_IGD_THREAD_ADMIN_MESSAGE=B;f.CUTOVER_ROLLBACK_ADMIN_MESSAGE=C;f.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE=D;f.E2EE_THREAD_DESCRIPTION=E;f.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE=F;f.CURRENT_USER_CREATED_POLL=G;f.PARTICIPANT_CREATED_POLL=H;f.CURRENT_USER_ADDED_POLL_OPTION=I;f.PARTICIPANT_ADDED_POLL_OPTION=J;f.CURRENT_USER_ADDED_MULTIPLE_POLL_OPTIONS=K;f.PARTICIPANT_ADDED_MULTIPLE_POLL_OPTIONS=L;f.CURRENT_USER_ADDED_POLL_VOTE=M;f.PARTICIPANT_ADDED_POLL_VOTE=N;f.CURRENT_USER_ADDED_MULTIPLE_POLL_VOTES=O;f.PARTICIPANT_ADDED_MULTIPLE_POLL_VOTES=P;f.CURRENT_USER_REMOVED_POLL_VOTE=Q;f.PARTICIPANT_REMOVED_POLL_VOTE=R;f.CURRENT_USER_REMOVED_MULTIPLE_POLL_VOTES=S;f.PARTICIPANT_REMOVED_MULTIPLE_POLL_VOTES=T;f.CURRENT_USER_MIXED_POLL_UPDATE=U;f.PARTICIPANT_MIXED_POLL_UPDATE=V;f.CURRENT_USER_CHANGED_POLL_VOTE=W;f.PARTICIPANT_CHANGED_POLL_VOTE=X;f.CURRENT_USER_CHANGED_MULTIPLE_POLL_VOTES=Y;f.PARTICIPANT_CHANGED_MULTIPLE_POLL_VOTES=Z;f.POLL_UNSENT_UPDATE=$;f.ADMIN_MSG_TYPE=r}),66);
__d("MAWLocalizationType",["MAWAdminMsgType"],(function(a,b,c,d,e,f,g){"use strict";a="emptySnippet";b="currentUserCreatedGroup";c="participantCreatedGroup";e="unknownUserCreatedGroup";f="currentUserGotPromoted";var h="currentUserGotDemoted",i="participantGotPromoted",j="participantGotDemoted",k="participantPromotedYou",l="participantDemotedYou",m="currentUserPromotedParticipant",n="currentUserDemotedParticipant",o="participantDemotedParticipant",p="participantPromotedParticipant",q="participantSelfDemoted",r="currentUserSelfDemoted",s="currentUserSendText",t="currentUserSendImage",u="currentUserSendVideo",v="currentUserSendAudio",w="currentUserSendGif",x="currentUserSendSticker",y="participantSendText",z="participantSendTextInGroup",A="participantSendImage",B="participantSendVideo",C="participantSendAudio",D="participantSendGif",E="participantSendSticker",F="unavailableSnippet",G="unknownUserEphemeralSettingTurnedOnSeconds",H="unknownUserEphemeralSettingTurnedOnMinutes",I="unknownUserEphemeralSettingTurnedOnHours",J="unknownUserEphemeralSettingTurnedOnDays",K="youEphemeralSettingTurnedOnSeconds",L="youEphemeralSettingTurnedOnMinutes",M="youEphemeralSettingTurnedOnHours",N="youEphemeralSettingTurnedOnDays",O="participantEphemeralSettingTurnedOnSeconds",P="participantEphemeralSettingTurnedOnMinutes",Q="participantEphemeralSettingTurnedOnHours",R="participantEphemeralSettingTurnedOnDays",S="unknownUserEphemeralSettingChangeSeconds",T="unknownUserEphemeralSettingChangeMinutes",U="unknownUserEphemeralSettingChangeHours",V="unknownUserEphemeralSettingChangeDays",W="youEphemeralSettingChangeSeconds",X="youEphemeralSettingChangeMinutes",Y="youEphemeralSettingChangeHours",aa="youEphemeralSettingChangeDays",ba="participantEphemeralSettingChangeSeconds",ca="participantEphemeralSettingChangeMinutes",da="participantEphemeralSettingChangeHours",ea="participantEphemeralSettingChangeDays",fa="unknownUserEphemeralSettingTurnedOff",ga="youEphemeralSettingTurnedOff",ha="participantEphemeralSettingTurnedOff",ia="ephemeralSettingsAutoReset",ja="currentUserUnsentMessage",ka="participantUnsentMessage",la="participantReactMessage",ma="participantReactMessageInGroup",Z="unknownUserEphemeralTakeScreenshot",na="unknownUserEphemeralRecordScreen",oa="youEphemeralTakeScreenshot",pa="youEphemeralRecordScreen",qa="participantEphemeralTakeScreenshot",ra="participantEphemeralRecordScreen",sa="icdcAlertAdminMessage",ta="yourDeviceICDCAlertAdminMessage",$="currentUserSendAttachment",ua="participantSendAttachment",va="currentUserSentPost",wa="currentUserSentReel",xa="currentUserSentStory",ya="currentUserSentEvent",za="currentUserMentionedStoryIG",Aa="currentUserReceivedStoryMentionIG",Ba="participantSentPost",Ca="participantSentReel",Da="participantSentStory",Ea="participantSentEvent",Fa="currentUserSentStoryHighlight",Ga="participantSentStoryHighlight",Ha="currentUserMissedAudioCall",Ia="participantMissedAudioCall",Ja="currentUserMissedVideoCall",Ka="participantMissedVideoCall",La="currentUserAudioCalled",Ma="participantAudioCalled",Na="currentUserVideoCalled",Oa="participantVideoCalled",Pa="currentUserStartedGroupAudioCall",Qa="participantStartedGroupAudioCall",Ra="currentUserStartedGroupVideoCall",Sa="participantStartedGroupVideoCall",Ta="currentUserBumpedOwnMessage",Ua="currentUserBumpedMessage",Va="participantBumpedOwnMessage",Wa="participantBumpedParticipantMessage",Xa="participantBumpedCurrentUserMessage",Ya="userSendUnavailableMessage",Za="userSendEncryptedMessage",$a="currentUserSendUnrenderableMessage",ab="participantSendUnrenderableMessage",bb="currentUserSendLocationFallback",cb="participantSendLocation",db="currentUserSendLiveLocationFallback",eb="participantSendLiveLocation",fb="currentUserSendLocation",gb="participantSendLocation",hb="currentUserSendPollCreationFallback",ib="participantSendPollCreation",jb="currentUserSendContactShareFallback",kb="participantSendContactShareFallback",lb="currentUserSendContactShare",mb="participantSendContactShare",nb="currentUserSendAIContactShare",ob="participantSendAIContactShare",pb="currentUserSendStoryMentionFallback",qb="currentUserSendStoryMention",rb="participantSendStoryMention",sb="participantSendStoryMentionFallback",tb="currentUserSendPostMentionFallback",ub="participantSendPostMentionFallback",vb="currentUserSendMemoriesShare",wb="participantSendMemoriesShare",xb="currentUserSendPostMention",yb="participantSendPostMention",zb="currentUserSendNoteMentionFallback",Ab="participantSendNoteMentionFallback",Bb="messengerMemoryEncryptedMessageFallback",Cb="rtcXMAMessageFallback",Db="metaAISendMessageFallback",Eb="currentUserSendBumpMessageFallback",Fb="participantSendBumpMessageFallback",Gb="participantSendBumpMessageOriginalUnavailable",Hb="currentUserSendStickerReceiverFetchMessageFallback",Ib="participantSendStickerReceiverFetchMessageFallback",Jb="viewOncePhotoMessageFallback",Kb="viewOnceVideoMessageFallback",Lb="unavailableStory",Mb="currentUserLimitSharingDisabled",Nb="currentUserLimitSharingEnabled",Ob="participantLimitSharingDisabled",Pb="participantLimitSharingEnabled";d=babelHelpers["extends"]({},d("MAWAdminMsgType").ADMIN_MSG_TYPE,{CURRENT_USER_AUDIO_CALLED:La,CURRENT_USER_BUMPED_MESSAGE:Ua,CURRENT_USER_BUMPED_OWN_MESSAGE:Ta,CURRENT_USER_CREATED_GROUP:b,CURRENT_USER_DEMOTED_PARTICIPANT:n,CURRENT_USER_GOT_DEMOTED:h,CURRENT_USER_GOT_PROMOTED:f,CURRENT_USER_LIMIT_SHARING_DISABLED:Mb,CURRENT_USER_LIMIT_SHARING_ENABLED:Nb,CURRENT_USER_MENTIONED_STORY_IG:za,CURRENT_USER_MISSED_AUDIO_CALL:Ha,CURRENT_USER_MISSED_VIDEO_CALL:Ja,CURRENT_USER_PROMOTED_PARTICIPANT:m,CURRENT_USER_RECEIVED_STORY_MENTION_IG:Aa,CURRENT_USER_SELF_DEMOTED:r,CURRENT_USER_SEND_AI_CONTACT_SHARE:nb,CURRENT_USER_SEND_ATTACHMENT:$,CURRENT_USER_SEND_AUDIO:v,CURRENT_USER_SEND_BUMP_MESSAGE_FALLBACK:Eb,CURRENT_USER_SEND_CONTACT_SHARE:lb,CURRENT_USER_SEND_CONTACT_SHARE_FALLBACK:jb,CURRENT_USER_SEND_GIF:w,CURRENT_USER_SEND_IMAGE:t,CURRENT_USER_SEND_LIVE_LOCATION_FALLBACK:db,CURRENT_USER_SEND_LOCATION:fb,CURRENT_USER_SEND_LOCATION_FALLBACK:bb,CURRENT_USER_SEND_MEMORIES_SHARE:vb,CURRENT_USER_SEND_NOTE_MENTION_FALLBACK:zb,CURRENT_USER_SEND_POLL_CREATION_FALLBACK:hb,CURRENT_USER_SEND_POST_MENTION:xb,CURRENT_USER_SEND_POST_MENTION_FALLBACK:tb,CURRENT_USER_SEND_STICKER:x,CURRENT_USER_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK:Hb,CURRENT_USER_SEND_STORY_MENTION:qb,CURRENT_USER_SEND_STORY_MENTION_FALLBACK:pb,CURRENT_USER_SEND_TEXT:s,CURRENT_USER_SEND_UNRENDERABLE_MESSAGE_FALLBACK:$a,CURRENT_USER_SEND_VIDEO:u,CURRENT_USER_SENT_EVENT:ya,CURRENT_USER_SENT_POST:va,CURRENT_USER_SENT_REEL:wa,CURRENT_USER_SENT_STORY:xa,CURRENT_USER_SENT_STORY_HIGHLIGHT:Fa,CURRENT_USER_STARTED_GROUP_AUDIO_CALL:Pa,CURRENT_USER_STARTED_GROUP_VIDEO_CALL:Ra,CURRENT_USER_UNSENT_MESSAGE:ja,CURRENT_USER_VIDEO_CALLED:Na,EMPTY_SNIPPET:a,EPHEMERAL_SETTINGS_AUTO_RESET:ia,ICDC_ALERT_ADMIN_MESSAGE:sa,MESSENGER_MEMORY_ENCRYPTED_MESSAGE_FALLBACK:Bb,META_AI_SEND_MESSAGE_FALLBACK:Db,PARTICIPANT_AUDIO_CALLED:Ma,PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE:Xa,PARTICIPANT_BUMPED_OWN_MESSAGE:Va,PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE:Wa,PARTICIPANT_CREATED_GROUP:c,PARTICIPANT_DEMOTED_PARTICIPANT:o,PARTICIPANT_DEMOTED_YOU:l,PARTICIPANT_EPHEMERAL_RECORD_SCREEN:ra,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:ea,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:da,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:ca,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:ba,PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF:ha,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:R,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:Q,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:P,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:O,PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT:qa,PARTICIPANT_GOT_DEMOTED:j,PARTICIPANT_GOT_PROMOTED:i,PARTICIPANT_LIMIT_SHARING_DISABLED:Ob,PARTICIPANT_LIMIT_SHARING_ENABLED:Pb,PARTICIPANT_MISSED_AUDIO_CALL:Ia,PARTICIPANT_MISSED_VIDEO_CALL:Ka,PARTICIPANT_PROMOTED_PARTICIPANT:p,PARTICIPANT_PROMOTED_YOU:k,PARTICIPANT_REACT_MESSAGE:la,PARTICIPANT_REACT_MESSAGE_IN_GROUP:ma,PARTICIPANT_SELF_DEMOTED:q,PARTICIPANT_SEND_AI_CONTACT_SHARE:ob,PARTICIPANT_SEND_ATTACHMENT:ua,PARTICIPANT_SEND_AUDIO:C,PARTICIPANT_SEND_BUMP_MESSAGE:Fb,PARTICIPANT_SEND_BUMP_MESSAGE_ORIGINAL_UNAVAILABLE_FALLBACK:Gb,PARTICIPANT_SEND_CONTACT_SHARE:mb,PARTICIPANT_SEND_CONTACT_SHARE_FALLBACK:kb,PARTICIPANT_SEND_GIF:D,PARTICIPANT_SEND_IMAGE:A,PARTICIPANT_SEND_LIVE_LOCATION_FALLBACK:eb,PARTICIPANT_SEND_LOCATION:gb,PARTICIPANT_SEND_LOCATION_FALLBACK:cb,PARTICIPANT_SEND_MEMORIES_SHARE:wb,PARTICIPANT_SEND_NOTE_MENTION_FALLBACK:Ab,PARTICIPANT_SEND_POLL_CREATION_FALLBACK:ib,PARTICIPANT_SEND_POST_MENTION:yb,PARTICIPANT_SEND_POST_MENTION_FALLBACK:ub,PARTICIPANT_SEND_STICKER:E,PARTICIPANT_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK:Ib,PARTICIPANT_SEND_STORY_MENTION:rb,PARTICIPANT_SEND_STORY_MENTION_FALLBACK:sb,PARTICIPANT_SEND_TEXT:y,PARTICIPANT_SEND_TEXT_IN_GROUP:z,PARTICIPANT_SEND_UNRENDERABLE_MESSAGE_FALLBACK:ab,PARTICIPANT_SEND_VIDEO:B,PARTICIPANT_SENT_EVENT:Ea,PARTICIPANT_SENT_POST:Ba,PARTICIPANT_SENT_REEL:Ca,PARTICIPANT_SENT_STORY:Da,PARTICIPANT_SENT_STORY_HIGHLIGHT:Ga,PARTICIPANT_STARTED_GROUP_AUDIO_CALL:Qa,PARTICIPANT_STARTED_GROUP_VIDEO_CALL:Sa,PARTICIPANT_UNSENT_MESSAGE:ka,PARTICIPANT_VIDEO_CALLED:Oa,RTC_XMA_FALLBACK:Cb,UNAVAILABLE_SNIPPET:F,UNAVAILABLE_STORY:Lb,UNKNOWN_USER_CREATED_GROUP:e,UNKNOWN_USER_EPHEMERAL_RECORD_SCREEN:na,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS:V,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS:U,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES:T,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS:S,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF:fa,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS:J,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS:I,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES:H,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS:G,UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT:Z,USER_SEND_ENCRYPTED_MESSAGE_FALLBACK:Za,USER_SEND_UNAVAILABLE_MESSAGE_FALLBACK:Ya,VIEW_ONCE_PHOTO_MESSAGE:Jb,VIEW_ONCE_VIDEO_MESSAGE:Kb,YOU_EPHEMERAL_RECORD_SCREEN:pa,YOU_EPHEMERAL_SETTING_CHANGE_DAYS:aa,YOU_EPHEMERAL_SETTING_CHANGE_HOURS:Y,YOU_EPHEMERAL_SETTING_CHANGE_MINUTES:X,YOU_EPHEMERAL_SETTING_CHANGE_SECONDS:W,YOU_EPHEMERAL_SETTING_TURNED_OFF:ga,YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS:N,YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS:M,YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES:L,YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS:K,YOU_EPHEMERAL_TAKE_SCREENSHOT:oa,YOUR_DEVICE_ICDC_ALERT_ADMIN_MESSAGE:ta});g.CURRENT_USER_CREATED_GROUP=b;g.CURRENT_USER_SEND_TEXT=s;g.CURRENT_USER_SEND_IMAGE=t;g.CURRENT_USER_SEND_VIDEO=u;g.CURRENT_USER_SEND_AUDIO=v;g.CURRENT_USER_SEND_GIF=w;g.CURRENT_USER_SEND_STICKER=x;g.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS=G;g.UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT=Z;g.CURRENT_USER_SEND_ATTACHMENT=$;g.LOCALIZATION_TYPE=d}),98);
__d("MAWAdminMsgNormalized",["MAWLocalizationType"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){switch(a){case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PROMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_DEMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_PROMOTED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_DEMOTED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SELF_DEMOTED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_BUMPED_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_OWN_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED:return{contactIds:b,contents:[]};case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CREATED_POLL:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_MIXED_POLL_UPDATE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:a=b[0];var c=b[1];return{contactIds:[a],contents:[c]};case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:a=b[0];c=b[1];var e=b[2];return{contactIds:[a,c],contents:[e]};case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_AI_THEME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME:a=b[0];c=b[1];e=b[2];return{contactIds:[a],contents:[c,e]};case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CHANGED_POLL_VOTE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_POLL_VOTE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_VOTE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_OPTION:a=b[0];c=b[1];b[2];return{contactIds:[a],contents:[c]};case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CHANGED_MULTIPLE_POLL_VOTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MULTIPLE_POLL_VOTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_VOTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_OPTIONS:e=b[0];a=b[1];c=b[2];b[3];return{contactIds:[e],contents:[a,c]};case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CHANGED_MULTIPLE_POLL_VOTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MULTIPLE_POLL_VOTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_POLL_VOTE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MULTIPLE_POLL_VOTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_VOTE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_NAMED_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_NAMED_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CREATED_POLL:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_OPTION:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MULTIPLE_POLL_OPTIONS:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MIXED_POLL_UPDATE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CHANGED_POLL_VOTE:case d("MAWLocalizationType").LOCALIZATION_TYPE.POLL_UNSENT_UPDATE:default:return{contactIds:[],contents:b}}}g.deconstructContactIdsFromAdminContent=a}),98);
__d("MAWMediaGalleryEBTaggingUtils",["LSThreadMediaGalleryGroup","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("13725")}function b(a){return a===c("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS}g.isMediaGalleryEBTaggingRestoreEnabled=a;g.isMediaGalleryGroupSupportedForTaggedRestore=b}),98);
__d("MAWMediaGalleryM2Utils",["MAWMediaGalleryEBTaggingUtils","gkx","justknobx"],(function(a,b,c,d,e,f,g){"use strict";function h(){return c("gkx")("4219")}function a(){return c("justknobx")._("3060")&&(h()||d("MAWMediaGalleryEBTaggingUtils").isMediaGalleryEBTaggingRestoreEnabled())}function b(){return c("gkx")("4219")}g.isMediaGalleryM2Enabled=h;g.shouldSkipSyncToLSDB=a;g.isFilesEBRestoreEnabled=b}),98);
__d("getReplyContentForNoteReply",["WAJids"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var c=a.author,e=a.msgId;c=d("WAJids").authorToUserId(c,b);b=(b=a.quote)==null?void 0:(b=b.content.msgContent)==null?void 0:b.content;a=(a=a.quote)==null?void 0:a.content.expirationTs;return{isNoteReply:!0,replyMediaExpirationTimestampMs:a!=null?a*1e3:void 0,replyMessageText:b,replySourceId:e,replyToUserId:c}}g["default"]=a}),98);
__d("MAWBridgeMsg",["LSHotEmojiSize","LSIntEnum","MAWDbMsg","MAWImageUtils","MAWMediaGalleryM2Utils","MAWMsgType","MAWUserJidWrapper","MAWVault","MAWXMAUtils","MWPBumpEntityKey","WAAssertUnreachable","WAHashUtils","WAJids","WALogger","WAMsgType","WATimeUtils","getReplyContentForNoteReply","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MAWBridgeMsg] Missing content for external link share XMA message"]);i=function(){return a};return a}function j(a){var b;if(d("MAWXMAUtils").isXMAStoryMention(a.xmaMessageType))return{replyType:22};else if(d("MAWXMAUtils").isXMAStoryProducerReply(a.xmaMessageType))return{replyType:24};else if(d("MAWXMAUtils").isXMAStoryReply(a.xmaMessageType))return{replyType:2};else if(d("MAWXMAUtils").isXMAStoryShare(a.xmaMessageType))return{replyType:4};else if(d("MAWXMAUtils").isFBXMAPostMention(a.xmaMessageType))return{replyType:13};else if(d("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(a.xmaMessageType))return{replyType:14};else if(d("MAWXMAUtils").isFBXMAPostMention(a.xmaMessageType))return{replyType:25};if(a.quote==null)return;if(((b=a.quote)==null?void 0:b.content.type)===d("WAMsgType").NOTE_REPLY)return{replyType:18};if(a.quote.content.type!==d("MAWMsgType").MSG_TYPE.XMA&&a.quote.content.msgId!=null)return{replyToMsgId:a.quote.content.msgId,replyType:1}}function k(a,b,e){var f,g;f=((f=a.quote)==null?void 0:f.content.type)===d("WAMsgType").NOTE_REPLY;if(f)return c("getReplyContentForNoteReply")(a,e);f=(f=a.quote)==null?void 0:f.content;if(d("MAWXMAUtils").isXMAStoryShare(a.xmaMessageType)||d("MAWXMAUtils").isXMAStoryReaction(a.xmaMessageType)||d("MAWXMAUtils").isXMAStoryMention(a.xmaMessageType)||d("MAWXMAUtils").isXMAStoryHighlightShare(a.xmaMessageType)||d("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(a.xmaMessageType)||d("MAWXMAUtils").isFBXMAPostMention(a.xmaMessageType)){var h=a.author,i=a.mediaId,j=a.msgId,k=d("WAJids").authorToUserId(h,e);if(d("MAWXMAUtils").isXMAStoryMention(a.xmaMessageType)||d("MAWXMAUtils").isFBXMAPostMention(a.xmaMessageType)){var l=a.threadJid,m;l!=null&&(m=d("WAJids").interpretAsUserJid(l));m!=null&&(k=d("WAJids").userIdFromJid(m))}i!=null&&a.plaintextHash==null&&d("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.reply_attachment_media_missing_plaintext_hash","bridge_msg_get_reply_content");return{isFBPostMention:d("MAWXMAUtils").isFBXMAPostMention(a.xmaMessageType),isFBStoryMention:d("MAWXMAUtils").isFBXMAStoryMention(a.xmaMessageType),isIGStoryMention:d("MAWXMAUtils").isIGXMAStoryMention(a.xmaMessageType),isIGXMAStoryShare:d("MAWXMAUtils").isIGXMAStoryShare(a.xmaMessageType),isMsgHighlightsTabFriendUpdatesReply:d("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(a.xmaMessageType),isStoryHighlightShare:d("MAWXMAUtils").isXMAStoryHighlightShare(a.xmaMessageType),isStoryReaction:d("MAWXMAUtils").isXMAStoryReaction(a.xmaMessageType),isStoryReply:d("MAWXMAUtils").isXMAStoryReply(a.xmaMessageType),replyMediaExpirationTimestampMs:f==null?void 0:f.expirationTs,replyMediaId:i,replyPlaintextHash:(l=a.plaintextHash)!=null?l:void 0,replySenderIsMe:h===d("WAJids").AUTHOR_ME||k===e,replySourceId:j,replySourceTimestampMs:a.sortOrderMs,replyStatusType:i!=null?d("MAWMsgType").MSG_TYPE.IMAGE:void 0,replyToUserId:k,storyShareAuthor:b==null?void 0:b.storyShareAuthor}}if(f==null||(f==null?void 0:f.msgId)==null&&(f==null?void 0:f.sourceId)==null)return;l=f||{};h=l.author;j=l.mediaId;a=l.msgId;i=l.plaintextHash;k=l.sourceId;var n=l.specialTextSize,o=l.ts,p=l.type;l=l.xmaMessageType;o=o!=null?o*1e3:void 0;g=f.type===d("MAWMsgType").MSG_TYPE.TEXT||d("MAWXMAUtils").isXMAExternalLinkShare(l)?(g=f.msgContent)==null?void 0:g.content:void 0;var q=d("WAJids").authorToUserId(h,e),r=f.type===d("MAWMsgType").MSG_TYPE.TEXT?f.msgContent.mentionedJids:void 0;h=h===d("WAJids").AUTHOR_ME||q===e;e=b||{};b=e.replyMediaId;var s=e.replyMediaPreviewHeight,t=e.replyMediaPreviewWidth,u=e.replyMediaUrlFallback,v=e.replyPlaintextHash;e=e.replyXMAId;if(d("MAWXMAUtils").isXMAStoryReply(l)){return{isStoryProducerReply:d("MAWXMAUtils").isXMAStoryProducerReply(l),isStoryReaction:d("MAWXMAUtils").isXMAStoryReaction(l),isStoryReply:!0,replyMediaExpirationTimestampMs:f==null?void 0:f.expirationTs,replyMediaId:j,replyPlaintextHash:(f=v!=null?d("WAHashUtils").stringToPlaintextHash(v):i)!=null?f:void 0,replySenderIsMe:h,replySourceId:k,replySourceTimestampMs:o,replyStatusType:j!=null?d("MAWMsgType").MSG_TYPE.IMAGE:void 0,replyToUserId:q}}i=d("MAWImageUtils").boundHeightWidth(s,t,96*.8);f=i.height;k=i.width;return{isIGXMAPostShare:d("MAWXMAUtils").isIGXMAPostShare(l),isIGXMAStoryShare:d("MAWXMAUtils").isIGXMAStoryShare(l),isStoryReply:!1,replyMediaId:b,replyMediaPreviewHeight:p===d("MAWMsgType").MSG_TYPE.STICKER?f:s,replyMediaPreviewWidth:p===d("MAWMsgType").MSG_TYPE.STICKER?k:t,replyMediaUrlFallback:u,replyMentionedJids:r,replyMessageText:g,replyPlaintextHash:v!=null?d("WAHashUtils").stringToPlaintextHash(v):void 0,replySenderIsMe:h,replySourceId:a,replySourceTimestampMs:o,replyStatusType:n===1||n===2||n===3?d("MAWMsgType").MSG_TYPE.STICKER:p,replyToUserId:q,replyXMAId:e}}function a(a){a=a.specialTextSize;switch(a){case 1:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").SMALL);case 2:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").MEDIUM);case 3:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").LARGE);default:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").NONE)}}function b(a,b,e,f,g){var h,l,m=d("WAJids").extractUserId(d("MAWUserJidWrapper").getMyUserJid());h=((h=a.isForwarded)!=null?h:!1)&&a.type!==d("MAWMsgType").MSG_TYPE.STICKER;l=(l=a.forwardingScore)!=null?l:0;var n=d("MAWDbMsg").getCanonicalTsFromMsg(a),o=k(a,e,m),p=j(a),q=d("MAWXMAUtils").isXMAStoryShare(a.xmaMessageType),r=d("MAWXMAUtils").isXMAStoryReaction(a.xmaMessageType),s=d("MAWXMAUtils").isXMAExternalLinkShare(a.xmaMessageType),t=d("MAWXMAUtils").isIGXMAStoryMention(a.xmaMessageType),u=d("MAWXMAUtils").isFBXMAStoryMention(a.xmaMessageType),v=d("MAWXMAUtils").isXMAStoryHighlightShare(a.xmaMessageType),w=d("MAWXMAUtils").isXMAPostPrivateReply(a.xmaMessageType),x=d("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(a.xmaMessageType),y=a.messageExpirationTs!=null&&a.messageExpirationTs<=d("WATimeUtils").unixTime(),z=d("MAWDbMsg").getSortOrderWithFallback(a),A=a.externalId;f=c("justknobx")._("3424")&&d("MAWMediaGalleryM2Utils").isMediaGalleryM2Enabled()&&a.source==="media_restore"?"EncryptedBackupsMedia":f;var B=void 0;if(!c("justknobx")._("2996"))B=(e==null?void 0:e.replyPlaintextHash)!=null?d("WAHashUtils").stringToPlaintextHash(e==null?void 0:e.replyPlaintextHash):void 0;else{B=(e==null?void 0:e.replyPlaintextHash)!=null?d("WAHashUtils").stringToPlaintextHash(e==null?void 0:e.replyPlaintextHash):(e=o==null?void 0:o.replyPlaintextHash)!=null?e:void 0}switch(a.type){case d("MAWMsgType").MSG_TYPE.TEXT:e=d("MAWVault").isVaulted(a.msgContent.content)?a.msgContent.content:d("MAWVault").vault(a.msgContent.content);return babelHelpers["extends"]({},o,{ack:a.ack,applicationErrorCode:a.applicationErrorCode,chatJid:a.threadJid,commands:a.msgContent.commands,content:e,editCount:a.editCount,ephemeralDurationInSec:(e=a.ephemeralSetting)==null?void 0:e.ephemeralExpirationInSec,externalId:A,forwardingScore:l,instanceKey:g,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isExpiredMsg:y,isForwarded:h,mentionedJids:a.msgContent.mentionedJids,msgId:a.msgId,offlineMsg:b,replyContent:p,replyPlaintextHash:B,sender:d("WAJids").authorToUserId(a.author,m),sortOrderMs:z,specialTextSize:a.specialTextSize,transportKey:f,ts:n,type_:a.type});case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:case d("MAWMsgType").MSG_TYPE.RAVEN:case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:return babelHelpers["extends"]({},o,{ack:a.ack,applicationErrorCode:a.applicationErrorCode,chatJid:a.threadJid,ephemeralDurationInSec:(e=a.ephemeralSetting)==null?void 0:e.ephemeralExpirationInSec,externalId:A,forwardingScore:l,groupId:a.groupId,groupIndex:a.groupIndex,groupSize:a.groupSize,instanceKey:g,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isExpiredMsg:y,isForwarded:h,msgId:a.msgId,offlineMsg:b,replyContent:p,replyPlaintextHash:B,sender:d("WAJids").authorToUserId(a.author,m),sortOrderMs:z,transportKey:f,ts:n,type_:a.type});case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:return babelHelpers["extends"]({},o,{ack:a.ack,chatJid:a.threadJid,externalId:A,forwardingScore:l,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isExpiredMsg:y,isForwarded:h,msgId:a.msgId,offlineMsg:b,replyContent:p,replyPlaintextHash:B,sender:d("WAJids").authorToUserId(a.author,m),sortOrderMs:z,transportKey:f,ts:n,type_:a.type,unsupportedType:a.msgContent.subtype});case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:return{ack:a.ack,chatJid:a.threadJid,externalId:A,forwardingScore:l,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isExpiredMsg:y,isForwarded:h,msgId:a.msgId,offlineMsg:b,sender:d("WAJids").authorToUserId(a.author,m),sortOrderMs:z,transportKey:f,ts:n,type_:a.type};case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:return babelHelpers["extends"]({},o,{ack:a.ack,chatJid:a.threadJid,externalId:A,forwardingScore:l,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isExpiredMsg:y,isForwarded:h,msgId:a.msgId,offlineMsg:b,replyContent:p,replyPlaintextHash:B,sender:d("WAJids").authorToUserId(a.author,m),sortOrderMs:z,transportKey:f,ts:n,type_:a.type});case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:return{ack:a.ack,adminContent:[a.msgContent.authorName],adminType:a.msgContent.adminType,chatJid:a.threadJid,externalId:A,forwardingScore:l,isAdminMessage:!0,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isExpiredMsg:y,isForwarded:h,msgId:a.msgId,offlineMsg:b,sender:d("WAJids").authorToUserId(a.author,m),sortOrderMs:z,transportKey:f,ts:n,type_:a.type};case d("MAWMsgType").MSG_TYPE.ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:case d("MAWMsgType").MSG_TYPE.GROUP_POLL_UPDATE:return{ack:a.ack,adminContent:(e=a.msgContent)==null?void 0:(e=e.adminMsgContent)==null?void 0:e.map(function(a){return a==="Facebook User"?"0":a}),adminType:(e=a.msgContent)==null?void 0:e.adminType,adminVersion:(e=a.msgContent)==null?void 0:e.version,chatJid:a.threadJid,externalId:A,forwardingScore:l,isAdminMessage:!0,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isExpiredMsg:y,isForwarded:h,msgId:a.msgId,offlineMsg:b,sender:d("WAJids").authorToUserId(a.author,m),sortOrderMs:z,transportKey:f,ts:n,type_:a.type};case d("MAWMsgType").MSG_TYPE.REVOKED:return{ack:a.ack,chatJid:a.threadJid,externalId:A,forwardingScore:l,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isExpiredMsg:y,isForwarded:h,msgId:a.msgId,offlineMsg:b,originalTs:a.originalTs,sender:d("WAJids").authorToUserId(a.author,m),sortOrderMs:z,transportKey:f,ts:n,type_:a.type};case d("MAWMsgType").MSG_TYPE.XMA:var C;e=(e=a.msgContent)==null?void 0:e.content;C=e!=null?d("MAWVault").isVaulted(e)?(C=a.msgContent)==null?void 0:C.content:d("MAWVault").vault(e):void 0;s&&C==null&&d("WALogger").WARN(i());e=c("justknobx")._("1191")||r||s?C:void 0;return babelHelpers["extends"]({},o,{ack:a.ack,applicationErrorCode:a.applicationErrorCode,chatJid:a.threadJid,commands:(s=a.msgContent)==null?void 0:s.commands,content:e,ephemeralDurationInSec:(C=a.ephemeralSetting)==null?void 0:C.ephemeralExpirationInSec,externalId:A,forwardingScore:l,instanceKey:g,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isCollapsed:a.isCollapsed,isExpiredMsg:y,isExpiredXmaMsg:a.isExpiredXmaMsg,isFBPostMention:d("MAWXMAUtils").isFBXMAPostMention(a.xmaMessageType),isFBStoryMention:u,isForwarded:h,isIGStoryMention:t,isMsgHighlightsTabFriendUpdatesReply:x,isPostPrivateReply:w,isStoryHighlightShare:v,isStoryReaction:r,isStoryShare:q,mentionedJids:(o=a.msgContent)==null?void 0:o.mentionedJids,msgId:a.msgId,offlineMsg:b,replyContent:p,replyPlaintextHash:B,sender:d("WAJids").authorToUserId(a.author,m),sortOrderMs:z,transportKey:f,ts:n,type_:a.type,xmaMessageType:a.xmaMessageType});default:return c("WAAssertUnreachable")(a.type)}}g.getSpecialTextSize=a;g.createBridgeMsg=b}),98);
__d("MAWBridgeSafeActionsWorkerAndUI",["ExecutionEnvironment","FBLogger","MAWBridge","Promise","ifRequireable"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,e,f){return(i||(i=c("ExecutionEnvironment"))).isInWorker?d("MAWBridge").getBridge().sendAndReceive("backend",a,e,f==null?void 0:f.isLoggingDisabled):new(h||(h=b("Promise")))(function(b,d){return c("ifRequireable")("MAWBridgeSendAndReceive",function(c){c=c.sendAndReceive;return b(c("backend",a,e,f))},function(){return d("MAWBridgeSendAndReceive not available in UI ifRequired")})})}function e(a,b,e){return(i||(i=c("ExecutionEnvironment"))).isInWorker?d("MAWBridge").getBridge().fireAndForget("backend",a,b,e):c("ifRequireable")("MAWBridgeFireAndForget",function(c){c=c.fireAndForget;return c("backend",a,b,e)},function(){throw c("FBLogger")("messenger_web").mustfixThrow("MAWBridgeFireAndForget not available in UI ifRequired")})}g.sendAndReceiveBackendWorkerAndUIShared=a;g.fireAndForgetBackendWorkerAndUIShared=e}),98);
__d("MAWBridgeUIEventDataValidation",["FBLogger","I64"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){try{return(h||(h=d("I64"))).of_string(a)}catch(b){c("FBLogger")("messenger_web").catching(b).mustfix("Cannot convert string to i64: %s",a)}}g.stringToI64Opt=a}),98);
__d("MAWConvertExtendedContentTypeToLSXmaContentType",["LSXmaContentType","WAArmadilloXMA.pb"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a==null)return null;switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE:return c("LSXmaContentType").FB_FEED_SHARE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY:return c("LSXmaContentType").FB_STORY_REPLY;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:return c("LSXmaContentType").FB_STORY_SHARE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:return c("LSXmaContentType").FB_STORY_MENTION;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_VIDEO_SHARE:return c("LSXmaContentType").FB_FEED_VIDEO_SHARE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE:return c("LSXmaContentType").FB_GAMING_CUSTOM_UPDATE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY:return c("LSXmaContentType").FB_PRODUCER_STORY_REPLY;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT:return c("LSXmaContentType").FB_EVENT;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY:return c("LSXmaContentType").FB_FEED_POST_PRIVATE_REPLY;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY:return c("LSXmaContentType").MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT:return c("LSXmaContentType").FB_SHORT;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:return c("LSXmaContentType").MSG_LOCATION_SHARING;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:return c("LSXmaContentType").MSG_LOCATION_SHARING_V2;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION:return c("LSXmaContentType").FB_POST_MENTION;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:return c("LSXmaContentType").MSG_CONTACT;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_AI_CONTACT:return c("LSXmaContentType").MSG_AI_CONTACT;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_MEMORIES_SHARE:return c("LSXmaContentType").MSG_MEMORIES_SHARE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE:return c("LSXmaContentType").MSG_EXTERNAL_LINK_SHARE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:return c("LSXmaContentType").RTC_AUDIO_CALL;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:return c("LSXmaContentType").RTC_VIDEO_CALL;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:return c("LSXmaContentType").RTC_MISSED_AUDIO_CALL;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:return c("LSXmaContentType").RTC_MISSED_VIDEO_CALL;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PROFILE_DIRECTORY_ITEM:return c("LSXmaContentType").FB_PROFILE_DIRECTORY_ITEM;default:return null}}g.convertExtendedContentTypeToLSXmaContentType=a}),98);
__d("MAWBridgeXMAUtils",["I64","LSIntEnum","MAWBridgeUIEventDataValidation","MAWConvertExtendedContentTypeToLSXmaContentType","MAWXMAUtils","MNLSXMALayoutType","MNXMAPreviewImageDecorationType","MWPBumpEntityKey","MessagingAttachmentType","Promise","Random","ReQL","WAArmadilloXMA.pb","WAJids","asyncToGeneratorRuntime","cr:3468","gkx","vulture"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,b,c,d,e,f){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,i,k){c("vulture")("O9HqUR9Ln66booY-YJ_H00qQYSk=");var l=e.ctas,o=e.defaultCTA,s=m(e.targetId,e.targetType),t=(j||(j=d("I64"))).of_int32(d("Random").uint32());if(o!=null){var u=p(o,t,g,f,i,s,e.targetType);yield r(a,u,t,k.defaultCta)}u=d("MAWXMAUtils").isFBXMAPostMention(e.targetType)&&e.author===d("WAJids").AUTHOR_ME;e=[];l!=null&&!u&&(e=(yield (h||(h=b("Promise"))).all(l.map(function(b,d){c("vulture")("FS9rgRtQSCBgqBDmjEhGx6oF14I=");var e=n(t,d);b=q(b,e,g,f,i,s);d=d===0?k.attachmentCta1:d===1?k.attachmentCta2:d===2?k.attachmentCta3:void 0;return r(a,b,e,d)}))));return{attachmentCta1Id:e.length>0?e[0]:void 0,attachmentCta2Id:e.length>1?e[1]:void 0,attachmentCta3Id:e.length>2?e[2]:void 0,defaultCtaId:o==null?void 0:t}});return k.apply(this,arguments)}function l(a){c("vulture")("hXUTvUlLddAt4tnK51PASde0ql4=");var b="xma_web_url";switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:b="xma_rtc_audio";break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:b="xma_rtc_video";break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:b="xma_rtc_missed_audio";break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:b="xma_rtc_missed_video";break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:b="igd_web_post_share";break}return b}function m(a,b){c("vulture")("RtrQPFyKbSxp3zQ6y7mRAyIpKg0=");return d("MAWXMAUtils").isFBXMAPostMention(b)?void 0:a!=null?d("MAWBridgeUIEventDataValidation").stringToI64Opt(a):void 0}function n(a,b){c("vulture")("JeoHtr-cANPUXRFURoTT-O9wNGw=");return(j||(j=d("I64"))).add(a,j.of_int32(b+1))}function o(a,b,e,f,g,h,i){i===void 0&&(i="xma_web_url");c("vulture")("TPVjzD3W2FhHtDFXV7frriVWOF4=");var k=a.actionUrl,l=a.nativeUrl;return{actionContentBlob:void 0,actionUrl:k!=null?k:l,attachmentFbid:g,attachmentIndex:(j||(j=d("I64"))).zero,ctaId:b,enableExtensions:!1,extensionHeightType:void 0,messageId:e,nativeUrl:l!=null?l:k,platformToken:void 0,targetId:h!=null?h:void 0,threadKey:f,title:(g=a.title)!=null?g:"Tap to view status update",type_:(b=i)!=null?b:"xma_web_url",urlWebviewType:void 0}}function p(a,b,d,e,f,g,h){c("vulture")("paKBJ90wVybJw9AE17Uahus-Tcw=");h=l(h);return o(a,b,d,e,f,g,h)}function q(a,b,d,e,f,g){c("vulture")("h6hxaD-G7lwZC6MPq4LKF4PwrcQ=");var h;switch(a.ctaType){case"contact_sharing_profile":h="contact_sharing_profile";break;case"contact_sharing_message":h="contact_sharing_message";break}return o(a,b,d,e,f,g,h)}function r(a,b,c,d){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,d,e){c("vulture")("DTetya-IU_PFmX8oHIx4vTaUgK8=");e!=null?yield a.attachment_ctas.upsert([e.ctaId],b):yield a.attachment_ctas.add(b);return d});return s.apply(this,arguments)}function e(a,b,c){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){c("vulture")("yfSGZVb6sl7NxuKoaOXCME8zjEo=");var f=null,g={attachmentCta1:void 0,attachmentCta2:void 0,attachmentCta3:void 0,defaultCta:void 0};f=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.attachments).getKeyRange(b,e)));f!=null&&(g.defaultCta=(yield u(a,f.defaultCtaId)),g.attachmentCta1=(yield u(a,f.attachmentCta1Id)),g.attachmentCta2=(yield u(a,f.attachmentCta2Id)),g.attachmentCta3=(yield u(a,f.attachmentCta3Id)));return[f,g]});return t.apply(this,arguments)}function u(a,e){c("vulture")("_xth6X03My6Q_hMNqb4d6th4mqc=");return e==null?(h||(h=b("Promise"))).resolve(void 0):(a=d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.attachment_ctas).getKeyRange(e)))!=null?a:void 0}function f(a,e,f,g,h,k,l,m,n){var o,p=b("cr:3468")!=null?(j||(j=d("I64"))).of_int32(b("cr:3468").getInChatMsgIdFromMsgId(g)):(j||(j=d("I64"))).zero,q=v(a),r=d("MAWConvertExtendedContentTypeToLSXmaContentType").convertExtendedContentTypeToLSXmaContentType(a.targetType);r=r?(j||(j=d("I64"))).of_int32(r):void 0;o=(o=a==null?void 0:(o=a.defaultCTA)==null?void 0:o.actionUrl)!=null?o:a==null?void 0:(o=a.defaultCTA)==null?void 0:o.nativeUrl;a.defaultPreviewMediaId!=null&&d("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.new_xma_handler","xma_preview_media_has_plaintext_hash."+n+"."+a.targetType+"."+(a.defaultPreviewMediaPlaintextHash!=null?"true":"false"));n=c("gkx")("11351");return{accessibilitySummaryText:void 0,actionUrl:o!=null?o:void 0,attachmentCta1Id:h,attachmentCta2Id:k,attachmentCta3Id:l,attachmentFbid:f,attachmentIndex:(j||(j=d("I64"))).zero,attachmentLoggingType:void 0,attachmentType:(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA),attributionAppIcon:void 0,attributionAppIconFallback:void 0,attributionAppIconUrlExpirationTimestampMs:void 0,attributionAppId:void 0,attributionAppName:void 0,authorityLevel:j.zero,avatarCount:void 0,avatarViewAccessibilityLabel:void 0,avatarViewSize:void 0,avatarViewTitleList:void 0,avatarViewUrlExpirationTimestampList:void 0,avatarViewUrlFallbackList:void 0,avatarViewUrlList:void 0,captionBodyText:void 0,cta1Title:x(a.ctas,1),cta1Type:w(a.ctas,1),cta2Title:x(a.ctas,2),cta2Type:w(a.ctas,2),cta3Title:x(a.ctas,3),cta3Type:w(a.ctas,3),dashManifest:void 0,decryptionKey:void 0,defaultCtaId:m,defaultCtaTitle:(o=a.defaultCTA)==null?void 0:o.title,defaultCtaType:q.xmaContentType,descriptionText:void 0,ephemeralMediaState:void 0,faviconUrl:void 0,faviconUrlExpirationTimestampMs:void 0,faviconUrlFallback:void 0,filename:void 0,filesize:a.filesize!=null?(j||(j=d("I64"))).of_int32(a.filesize):void 0,gatingTitle:a.overlayTitle,gatingType:a.overlayIconGlyph!=null?String(a.overlayIconGlyph):void 0,hasMedia:a.hasMedia!=null?a.hasMedia:!1,hasXma:!0,hasXmaFavicon:n?a.faviconPlaintextHash!=null:a.faviconMediaId!=null,hasXmaHeaderImage:n?a.headerMediaPlaintextHash!=null:a.headerMediaId!=null,hasXmaPreview:n?a.defaultPreviewMediaPlaintextHash!=null:a.defaultPreviewMediaId!=null,headerImageUrl:void 0,headerImageUrlExpirationTimestampMs:void 0,headerImageUrlFallback:void 0,headerImageUrlMimeType:void 0,headerTitle:a.headerTitle,imageUrl:void 0,imageUrlExpirationTimestampMs:void 0,imageUrlFallback:void 0,imageUrlMimeType:void 0,isBorderless:void 0,isPreviewImage:void 0,isSharable:!0,listItemAccessibilityText1:void 0,listItemAccessibilityText2:void 0,listItemAccessibilityText3:void 0,listItemContactUrlExpirationTimestampList1:void 0,listItemContactUrlExpirationTimestampList2:void 0,listItemContactUrlExpirationTimestampList3:void 0,listItemContactUrlFallbackList1:void 0,listItemContactUrlFallbackList2:void 0,listItemContactUrlFallbackList3:void 0,listItemContactUrlList1:void 0,listItemContactUrlList2:void 0,listItemContactUrlList3:void 0,listItemId1:void 0,listItemId2:void 0,listItemId3:void 0,listItemProfilePictureUrl1:void 0,listItemProfilePictureUrl2:void 0,listItemProfilePictureUrl3:void 0,listItemProfilePictureUrlExpirationTimestamp1:void 0,listItemProfilePictureUrlExpirationTimestamp2:void 0,listItemProfilePictureUrlExpirationTimestamp3:void 0,listItemProfilePictureUrlFallback1:void 0,listItemProfilePictureUrlFallback2:void 0,listItemProfilePictureUrlFallback3:void 0,listItemProgressBarFilledPercentage1:void 0,listItemProgressBarFilledPercentage2:void 0,listItemProgressBarFilledPercentage3:void 0,listItemsDescriptionSubtitleText:void 0,listItemsDescriptionText:void 0,listItemsId:void 0,listItemsSecondaryDescriptionText:void 0,listItemTitleText1:void 0,listItemTitleText2:void 0,listItemTitleText3:void 0,localPlayableUrl:void 0,maxSubtitleNumOfLines:a.maxSubtitleNumOfLines!=null?(j||(j=d("I64"))).of_int32(a.maxSubtitleNumOfLines):void 0,maxTitleNumOfLines:a.maxTitleNumOfLines!=null?(j||(j=d("I64"))).of_int32(a.maxTitleNumOfLines):void 0,messageId:g,miniPreview:void 0,offlineAttachmentId:(h=a.offlineAttachmentId)!=null?h:f,originalFileHash:void 0,originalPageSenderId:void 0,playableDurationMs:void 0,playableUrl:void 0,playableUrlExpirationTimestampMs:void 0,playableUrlFallback:void 0,playableUrlMimeType:void 0,preheaderText:void 0,previewHeight:q.height,previewHeightLarge:a.previewHeightLarge!=null?(j||(j=d("I64"))).of_int32(a.previewHeightLarge):void 0,previewImageDecorationType:z(a.targetType),previewUrl:void 0,previewUrlExpirationTimestampMs:void 0,previewUrlFallback:void 0,previewUrlLarge:void 0,previewUrlMimeType:void 0,previewWidth:q.width,previewWidthLarge:a.previewWidthLarge!=null?(j||(j=d("I64"))).of_int32(a.previewWidthLarge):void 0,samplingFrequencyHz:void 0,shouldAutoplayVideo:void 0,shouldHighlightHeaderTitleInTitle:void 0,shouldRespectServerPreviewSize:void 0,sourceText:void 0,subtitleIconUrl:void 0,subtitleText:a.subtitleText,targetId:void 0,threadKey:e,timestampMs:p,titleText:a.titleText,transportKey:"WhatsApp",viewerSeenTimestampMs:void 0,waveformData:void 0,xmaContentType:r,xmaDataclass:a.xmaDataclass,xmaFaviconFbid:n?a.faviconPlaintextHash:c("gkx")("8162")?(k=a.faviconPlaintextHash)!=null?k:(l=a.faviconMediaId)==null?void 0:l.toString():(m=a.faviconMediaId)==null?void 0:m.toString(),xmaHeaderImageFbid:n?a.headerMediaPlaintextHash:c("gkx")("8162")?(o=a.headerMediaPlaintextHash)!=null?o:(g=a.headerMediaId)==null?void 0:g.toString():(h=a.headerMediaId)==null?void 0:h.toString(),xmaLayoutType:a.xmaLayoutType!=null?y(a.xmaLayoutType):void 0,xmaPreviewFbid:n?a.defaultPreviewMediaPlaintextHash:c("gkx")("8162")?(f=a.defaultPreviewMediaPlaintextHash)!=null?f:(q=a.defaultPreviewMediaId)==null?void 0:q.toString():(e=a.defaultPreviewMediaId)==null?void 0:e.toString(),xmasTemplateType:a.xmaLayoutType!=null?y(a.xmaLayoutType):void 0}}function v(a){c("vulture")("jDkoucRq29lspjqv5EoQ6AgFAd0=");var b;switch(a.targetType){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:b={height:(j||(j=d("I64"))).of_int32(108),width:(j||(j=d("I64"))).of_int32(72),xmaContentType:"xma_montage_share"};break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:b={xmaContentType:"xma_rtc_audio"};break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:b={xmaContentType:"xma_rtc_video"};break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:b={xmaContentType:"xma_rtc_missed_audio"};break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:b={xmaContentType:"xma_rtc_missed_video"};break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:b={xmaContentType:"xma_rtc_missed_group_audio"};break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:b={xmaContentType:"xma_rtc_missed_group_video"};break;default:b={height:a.previewHeight!=null?(j||(j=d("I64"))).of_int32(a.previewHeight):void 0,width:a.previewWidth!=null?(j||(j=d("I64"))).of_int32(a.previewWidth):void 0,xmaContentType:"xma_web_url"};break}return b}function w(a,b){c("vulture")("TheQVa9Nd4XKW6zs8pdW_r3R5dg=");if(a==null)return;a=a[b-1];if(a==null)return;b=a.buttonType;a=a.ctaType;switch(a){case"contact_sharing_profile":return"contact_sharing_profile";case"contact_sharing_message":return"contact_sharing_message";default:return b===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_VIDEO_POST_SHARE?"xma_open_native":void 0}}function x(a,b){if(a==null)return;a=a[b-1];if(a!=null)return a.title}function y(a){c("vulture")("3qCMJv9X6w87pBTl2ps2SOMJ2wI=");return a===0||a!==3?(i||(i=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").SINGLE):(i||(i=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").PORTRAIT)}function z(a){c("vulture")("al4CANl8TA9Z0WUMhchfaDG4SLk=");switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:return(i||(i=d("LSIntEnum"))).ofNumber(c("MNXMAPreviewImageDecorationType").COLLAGE);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:return(i||(i=d("LSIntEnum"))).ofNumber(c("MNXMAPreviewImageDecorationType").REEL);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_MENTION:return(i||(i=d("LSIntEnum"))).ofNumber(c("MNXMAPreviewImageDecorationType").INSTAGRAM_ICON);default:return(i||(i=d("LSIntEnum"))).ofNumber(c("MNXMAPreviewImageDecorationType").DEFAULT)}}g.addAttachmentCtas=a;g.maybeBridgeToLSTargetId=m;g.getCtaIdFromDefaultCtaId=n;g.composeDefaultAttachmentCta=p;g.composeAttachmentCta=q;g.getExistingAttachmentAndAttachmentCtas=e;g.composeAttachmentXMA=f}),98);
__d("MAWCastToMsgrServerMediaType",["EncryptedBackupsUploadEntity","MAWDbMedia","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["invalid attachment mediaType: "," for castMediaAttachmentTypeToServerMediaType method"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["invalid client mediaType: "," for castClientMediaTypeToServerMediaType method"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["invalid mediaType: "," for castToMsgrServerMediaType method"]);j=function(){return a};return a}function a(a,b){b===void 0&&(b=!1);if(b&&a==="image")return"xma";switch(a){case"image":case"video":case"gif":case"sticker":return a;case"document":return"file";case"ptt":return"audio";case"xma-image":return"xma";case"preview":return"preview";default:d("WALogger").ERROR(j(),a);return null}}function b(a,b){b===void 0&&(b=!1);if(b&&a===d("MAWDbMedia").MEDIA_TYPE.IMAGE)return"xma";switch(a){case"Image":return"image";case"Video":return"video";case"Gif":return"gif";case"Sticker":return"sticker";case"DocumentFile":return"file";case"Ptt":return"audio";default:d("WALogger").ERROR(i(),a);return null}}function c(a){switch(a){case d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.IMAGE:return"image";case d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.VIDEO:return"video";case d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.GIF:return"gif";case d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.STICKER:return"sticker";case d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.DOCUMENT:return"file";case d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.PTT:return"audio";case d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.XMA:return"xma";case d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.MESSENGER_PREVIEW:return"preview";default:d("WALogger").ERROR(h(),a);return null}}g.castToMsgrServerMediaType=a;g.castClientMediaTypeToServerMediaType=b;g.castMediaAttachmentTypeToServerMediaType=c}),98);
__d("MAWDbEditMsgHistory",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return a}function b(a){return(h||(h=d("I64"))).of_float(a)}function c(a){return(h||(h=d("I64"))).to_float(a)}g.unsafeCoerceToEditMsgHistoryId=a;g.convertToEditMsgHistoryId64=b;g.convertToEditMsgHistoryId=c}),98);
__d("MAWDbPoll",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a}function b(a){return a}function c(a,b){a=(a+b).split("");return Math.abs(a.reduce(function(a,b){b=b.charCodeAt(0);a=(a<<5)-a+b;a&=a;return a},0))}f.convertStringToOptionHash=a;f.convertOptionHashToString=b;f.generateStableIdFromOptionHash=c}),66);
__d("MAWEBRestoreTrackingUtils",["LSIntEnum","LSMEBTaskCreationSource","MAWQplProxy","MWEBODSEntityName.enum","ODS","QPLUserFlow","WAHashStringToNumber","justknobx","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j={dyi:c("justknobx")._("467"),frontloaded:20,initial:20,paginated:c("justknobx")._("3177"),point:1,search:c("justknobx")._("2477")};function a(a,b,e,f){b!=null&&p({querySource:e,runningInWorker:f!=null?f:!1,taskSource:a,traceId:b,triggerType:"paginated"}),(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.paginated")}function b(a){var b=a.querySource,e=a.runningInWorker,f=a.taskSource;a=a.traceId;a!=null&&p({querySource:b,runningInWorker:e!=null?e:!1,taskSource:f,traceId:a,triggerType:"initial"});(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.initial")}function e(a,b,e){b!=null&&p({querySource:"LS",runningInWorker:e!=null?e:!1,taskSource:a,traceId:b,triggerType:"dyi"}),(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.dyi")}function f(a,b,e){b!=null&&p({querySource:"LS",runningInWorker:e!=null?e:!1,taskSource:a,traceId:b,triggerType:"frontloaded"}),(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.frontloaded")}function k(a,b,e,f){b!=null&&p({querySource:e,runningInWorker:f!=null?f:!1,taskSource:a,traceId:b,triggerType:"point"}),(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.point")}function l(a){var b=a.querySource,e=a.runningInWorker;a=a.traceId;a!=null&&p({querySource:b,runningInWorker:e!=null?e:!1,taskSource:c("LSMEBTaskCreationSource").FTS_INDEX_EB_MESSAGES_WEB,traceId:a,triggerType:"search"});(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.search")}function m(a,b){a!=null&&(b!=null&&b?d("MAWQplProxy").sendQPLSuccessThroughBridge(c("qpl")._(521476165,"2432"),void 0,d("WAHashStringToNumber").hashStringToNumber(a)):c("QPLUserFlow").endSuccess(c("qpl")._(521476165,"2432"),{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)})),(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.decryption.success")}function n(a,b,e,f){e===void 0&&(e="restore_failure"),a!=null&&(b!=null&&b?d("MAWQplProxy").sendQPLFailThroughBridge(c("qpl")._(521476165,"2432"),e,f,d("WAHashStringToNumber").hashStringToNumber(a)):c("QPLUserFlow").endFailure(c("qpl")._(521476165,"2432"),e,{annotations:f,instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)})),(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.decryption.failure")}function o(a){u("protobuf",a)}function p(a){var b=a.querySource,e=a.runningInWorker,f=a.taskSource,g=a.traceId;a=a.triggerType;if(e!=null&&e){var h;d("MAWQplProxy").startQplUserFlow(c("qpl")._(521476165,"2432"),{bool:{runningInWorker:e!=null?e:!1},"int":{requestedMessagesCount:(h=j[a])!=null?h:10},string:{querySource:b,taskSource:v(f),traceId:g,triggerType:a}},{providedInstanceKey:d("WAHashStringToNumber").hashStringToNumber(g),providedTimeoutInMs:c("justknobx")._("2950")})}else{c("QPLUserFlow").start(c("qpl")._(521476165,"2432"),{annotations:{bool:{runningInWorker:e!=null?e:!1},"int":{requestedMessagesCount:(h=j[a])!=null?h:10},string:{querySource:b,taskSource:v(f),traceId:g,triggerType:a}},instanceKey:d("WAHashStringToNumber").hashStringToNumber(g),timeoutInMs:c("justknobx")._("2950")})}}function q(a){var b=a.pointName;a=a.traceId;c("QPLUserFlow").addPoint(c("qpl")._(521476165,"2432"),b,{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)})}function r(a){var b=a.annotations,e=a.pointName;a=a.traceId;c("QPLUserFlow").addAnnotations(c("qpl")._(521476165,"2432"),b,{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)});c("QPLUserFlow").addPoint(c("qpl")._(521476165,"2432"),e,{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)})}function s(a){var b=a.annotations,e=a.pointName;a=a.traceId;a!=null&&d("MAWQplProxy").sendQplPointThroughBridge(c("qpl")._(521476165,"2432"),e,{annotations:b,instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)})}function t(a){var b=a.pointName;a=a.traceId;d("MAWQplProxy").sendQplPointThroughBridge(c("qpl")._(521476165,"2432"),b,{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)})}function u(a,b){b=b?(i||(i=d("LSIntEnum"))).unwrapIntEnum(b):null;(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore."+a+"."+v(b))}function v(a){return(a=a==null?void 0:a.toString())!=null?a:"unknown"}g.markEBRestorePaginated=a;g.markEBRestoreInitial=b;g.markEBRestoreDYI=e;g.markEBRestoreFrontloaded=f;g.markEBRestorePoint=k;g.markEBRestoreSearch=l;g.markEBRestoreSuccess=m;g.markEBRestoreFail=n;g.markEBRestoreProtobuf=o;g.addQPLRestorePoint=q;g.addQPLRestorePointWithAnnotations=r;g.addQPLRestorePointWithAnnotationsWorker=s;g.addQPLRestorePointWorker=t}),98);
__d("MWEBODSEntityKey.enum",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({START:"start",SUCCESS:"success",FAIL:"fail",INCORRECT_PIN_CODE:"incorrect_pin_code",INCORRECT_RECOVERY_CODE:"incorrect_recovery_code",TIMEOUT:"timeout",CANCEL:"cancel"});c=a;f["default"]=c}),66);
__d("MWEBODSUtils",["CurrentMessengerUser","MWEBODSCategory","ODS"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e){var f=d("CurrentMessengerUser").getAppID();f=f!=null?f.toString():"unknown";f=a+"."+f;(h||(h=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),f,b,e!=null?e:1);h.bumpEntityKey(c("MWEBODSCategory"),a,b,e!=null?e:1)}function b(a,b,c){b===void 0&&(b=100);c===void 0&&(c=5);if(a===0)return"zero";if(a<0)return"negative";if(c<=0)return"invalidIncrement";if(a>b)return"greaterThanLimit";a=Math.floor((a-1)/c)*c+1;c=Math.min(a+c-1,b);return a+"-"+c}g.markODSForEB=a;g.getBucketName=b}),98);
__d("WAGetHashFromProtocolMsgId",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a.externalId+"_"+a.author+"_"+a.chat}f.getHashFromProtocolMsgId=a}),66);
__d("WAWaitForComms",["WACommsConnectionState","WAResolvable"],(function(a,b,c,d,e,f,g){"use strict";var h=new(d("WAResolvable").Resolvable)();function a(){return h.promise}function b(){d("WACommsConnectionState").WACommsConnectionState.set(!1),h.isSettled&&(h=new(d("WAResolvable").Resolvable)())}function c(){d("WACommsConnectionState").WACommsConnectionState.set(!0),h.resolve()}function e(){return!h.resolveWasCalled()}function f(a){return h.reject(a)}g.waitForComms=a;g.commsConnectionLost=b;g.unblockComms=c;g.isStillWaitingForComms=e;g.failComms=f}),98);
__d("WANetworkConnectionUtils",["ExecutionEnvironment","Promise","WATagsLogger","WAWaitForComms"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["waitForNetworkConnection is only supported in the shared worker. Returning a hard-coded resolved promise."]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["hasNetworkConnection is only supported in the shared worker. Returning hard-coded true."]);k=function(){return a};return a}var l=d("WATagsLogger").TAGS(["WANetworkConnectionUtils"]);function a(){if((i||(i=c("ExecutionEnvironment"))).isInSharedWorker!==!0){l.ERROR(k());return!0}return!d("WAWaitForComms").isStillWaitingForComms()}function e(){if((i||(i=c("ExecutionEnvironment"))).isInSharedWorker!==!0){l.ERROR(j());return(h||(h=b("Promise"))).resolve()}return d("WAWaitForComms").waitForComms()}g.hasNetworkConnection=a;g.waitForNetworkConnection=e}),98);
__d("MAWEBUploadTrackingUtils",["MAWAckLevel","MAWEBSwitch","MAWExternalId","MAWMsgType","MWEBODSEntityKey.enum","MWEBODSEntityName.enum","MWEBODSUtils","ODS","QPLUserFlow","QuickPerformanceLogger","WAExceededStorageQuota","WAGetHashFromProtocolMsgId","WAGlobals","WAHashStringToNumber","WANetworkConnectionUtils","justknobx","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j={ERROR_FETCHING_DB_MESSAGE:"error_fetching_db_message",FAILED_TO_ACK_MESSAGE:"failed_to_ack_message",FAILED_TO_CONSTRUCT_ECHO_MESSAGE:"failed_to_construct_echo_message",MESSAGE_UPLOAD_TIMEOUT:"message_upload_timeout",RUNTIME_ERROR:"runtime_error"};function a(a,b,e,f,g,h,j,k,m){g===void 0&&(g=!1);h===void 0&&(h=!1);k===void 0&&(k="unknown");m===void 0&&(m=0);if(!c("MAWEBSwitch").isEnabled())return;c("QPLUserFlow").start(c("qpl")._(521481602,"829"),{annotations:{bool:{eb_switch:c("MAWEBSwitch").isEnabled(),eb_upload_queue:!0,fromUploadQueue:g,is_retroactive_upload:h,middleware_init:!1},"int":{attachmentsSize:j!=null?j:0,instanceKey:f,retryCount:m},string:{comms_status:d("WANetworkConnectionUtils").hasNetworkConnection()===!0?"connected":"disconnected",externalId:a,msgType:b,payloadType:k,triggerType:e}},instanceKey:f,timeoutInMs:c("justknobx")._("1405")});l(f,"upload_tracking_started");(i||(i=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_TRACKING,c("MWEBODSEntityKey.enum").START);d("MWEBODSUtils").markODSForEB(c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_COUNTER,"upload."+(b!=null?b:"unknown"));g=d("MAWMsgType").isMAWSupportedMediaType(b!=null?b:"Text")?"media":"non-media";d("MWEBODSUtils").markODSForEB(c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_COUNTER,"upload."+g)}function k(a){return a==null?{string:{comms_status_on_failure:d("WANetworkConnectionUtils").hasNetworkConnection()===!0?"connected":"disconnected"}}:babelHelpers["extends"]({},a,{string:babelHelpers["extends"]({},a.string,{comms_status_on_failure:d("WANetworkConnectionUtils").hasNetworkConnection()===!0?"connected":"disconnected"})})}function b(a,b,c,d){switch(a){case"success":n(b,c,d);break;case"fail":m(b,c,d);break;case"point":l(b,c,d);break}}function l(a,b,d){d&&c("QPLUserFlow").addAnnotations(c("qpl")._(521481602,"829"),d,{instanceKey:a}),c("QPLUserFlow").addPoint(c("qpl")._(521481602,"829"),b,{instanceKey:a})}function e(a,b){c("QPLUserFlow").addAnnotations(c("qpl")._(521481602,"829"),k(b),{instanceKey:a});c("QPLUserFlow").endCancel(c("qpl")._(521481602,"829"),{annotations:{bool:{exceededStorageQuota:d("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0},string:{threadID:b==null?void 0:(b=b.string)==null?void 0:b.jid}},instanceKey:a});(i||(i=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_TRACKING,c("MWEBODSEntityKey.enum").CANCEL)}function m(a,b,e){c("QPLUserFlow").addAnnotations(c("qpl")._(521481602,"829"),k(e),{instanceKey:a});c("QPLUserFlow").endFailure(c("qpl")._(521481602,"829"),b,{annotations:{bool:{exceededStorageQuota:d("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0},string:{threadID:e==null?void 0:(b=e.string)==null?void 0:b.jid}},instanceKey:a});(i||(i=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_TRACKING,c("MWEBODSEntityKey.enum").FAIL)}function n(a,b,c){l(a,b),o(a,c)}function o(a,b){b&&c("QPLUserFlow").addAnnotations(c("qpl")._(521481602,"829"),b,{instanceKey:a}),c("QPLUserFlow").endSuccess(c("qpl")._(521481602,"829"),{annotations:{bool:{exceededStorageQuota:d("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0}},instanceKey:a}),(i||(i=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_TRACKING,c("MWEBODSEntityKey.enum").SUCCESS)}function f(a,b,e){l(a,b);e&&c("QPLUserFlow").addAnnotations(c("qpl")._(521481602,"829"),e,{instanceKey:a});c("QPLUserFlow").endTimeout(c("qpl")._(521481602,"829"),{annotations:{bool:{exceededStorageQuota:d("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0},string:{threadID:e==null?void 0:(b=e.string)==null?void 0:b.jid}},instanceKey:a});(i||(i=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_TRACKING,c("MWEBODSEntityKey.enum").TIMEOUT)}function p(a,b,d){var e=c("qpl")._(521481602,"829");l(a,b);d&&(h||(h=c("QuickPerformanceLogger"))).markerAnnotate(e,d,{instanceKey:a});(h||(h=c("QuickPerformanceLogger"))).markerEnd(e,52,a,h.currentTimestamp())}function q(){return d("WAHashStringToNumber").hashStringToNumber(d("MAWExternalId").generateExternalId())}function r(a,b){b===void 0&&(b=0);return d("WAHashStringToNumber").hashStringToNumber(d("WAGetHashFromProtocolMsgId").getHashFromProtocolMsgId(a)+"_"+d("WAGlobals").getMyDeviceJid()+"_"+b)}function s(a){return c("MAWEBSwitch").isEnabled()&&d("MAWMsgType").isEBSupportedMsgType(a.type)&&a.ack>=d("MAWAckLevel").ACK.sent&&a.serverTs!=null&&!(a.ephemeralSetting!=null&&a.ephemeralSetting.ephemeralExpirationInSec>0)}function t(a){return{addAnnotations:function(b){u(a,b)},addPoint:function(b,c){l(a,b,c)},endFail:function(b,c){m(a,b,c)},endSuccess:function(b){o(a,b)},getQPLAttrs:function(){return{event:c("qpl")._(521481602,"829"),instanceKey:a}},isActive:function(){return!0}}}function u(a,b){}function v(a,b){return a.get(b)}function w(a,b,c,d,e){b=v(b,c);if(b!=null)switch(a){case"success":n(b,d,e);break;case"fail":m(b,d,e);break;case"point":l(b,d,e);break}}g.EBUploadTrackingWorkerFailurePoints=j;g.startUploadTracking=a;g.handleBridgeEbUploadTrackingQPL=b;g.addPointWorkerOnly=l;g.endCancelWorkerOnly=e;g.endFailWorkerOnly=m;g.endSuccessWorkerOnly=n;g.endTimeoutWorkerOnly=f;g.endRetryWorkerOnly=p;g.genInstanceKeyOnly=q;g.genInstanceKeyForUploadQueue=r;g.isUploadSupported=s;g.makeEBWorkerQplFlowFromInstanceKey=t;g.getUploadTrackingInstanceKey=v;g.addUploadTrackingByType=w}),98);
__d("MAWEncryptedBackupsStateManager",["MAWEBSwitch"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(a){case 1:return;case 3:c("MAWEBSwitch").set(!0);return;case 2:case 4:default:c("MAWEBSwitch").set(!1);return}}function b(a){return a===4||a===3}g.setEncryptedBackupsState=a;g.eligibleForEBUX=b}),98);
__d("MAWIndexedDBDeletion",["CurrentMessengerUser","FBLogger","MAWIndexedDbMetadata","Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,d){return indexedDB==null||a==null?(h||(h=b("Promise"))).resolve():new(h||(h=b("Promise")))(function(b,e){var f=indexedDB.deleteDatabase(a);f.onsuccess=function(){c("FBLogger")("maw_db").warn("%s db was deleted",d),b()};f.onblocked=function(){c("FBLogger")("maw_db").mustfix("Cannot delete %s db: blocked. Make sure DB is closed.",d)};f.onerror=function(){c("FBLogger")("maw_db").mustfix("Cannot delete %s db",d),e(f.error)}})}function a(){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("CurrentMessengerUser").getID();yield (h||(h=b("Promise"))).all([i(d("MAWIndexedDbMetadata").dbName(a),"maw_v1"),i(d("MAWIndexedDbMetadata").restoreDbName2(a),"maw_v3"),i(d("MAWIndexedDbMetadata").jobsDbName(a),"signal"),i(d("MAWIndexedDbMetadata").logDbName(a),"logDb")])});return j.apply(this,arguments)}g.deleteDB=i;g.deleteMAWPersistence=a}),98);
__d("MAWLocalStorage",["LocalStorageWrapper","MWLocalStorageErrorHandler","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["not storage found"]);h=function(){return a};return a}function i(a){d("WALogger").LOG([a])}function j(a){d("WALogger").ERROR([a])}function a(){return d("LocalStorageWrapper").getStorage(i)}function b(){return d("LocalStorageWrapper").isLocalStorageAvailable(i)}function c(a,b,c){return d("LocalStorageWrapper").setItemGuarded(a,b,c,j,d("MWLocalStorageErrorHandler").onQuotaExceeded)}function e(a,b){a==null?d("WALogger").ERROR(h()):a.removeItem(b)}g.getStorage=a;g.isLocalStorageAvailable=b;g.setItemGuarded=c;g.removeItemGuarded=e}),98);
__d("MWTabCommunicationChannel",["MAWLocalStorage"],(function(a,b,c,d,e,f,g){"use strict";var h=typeof window!=="undefined"?window:self;function i(a){var b=d("MAWLocalStorage").getStorage(),c=function(c){d("MAWLocalStorage").setItemGuarded(b,a,JSON.stringify(c))},e=function(c){window.removeEventListener("storage",c),d("MAWLocalStorage").removeItemGuarded(b,a)},f=function(a){window.addEventListener("storage",a)},g=function(b){return b!=null&&b.key===a&&typeof b.newValue==="string"?JSON.parse(b.newValue):null};return{getMessage:g,onRequestReceived:function(a){var b=function(b){b=g(b);b!=null&&a(b)};f(b);return{release:function(){e(b)}}},sendMessage:c,stopWaitingForReply:e,waitForReply:f}}function j(a){var b=new h.BroadcastChannel(a),c=new Set();b.addEventListener("message",function(a){c.forEach(function(b){b(a)})});var d=function(a){c.add(a)},e=function(a){c["delete"](a)};a=function(a){b.postMessage(JSON.stringify(a))};var f=function(a){return a!=null&&typeof a.data==="string"?JSON.parse(a.data):null};return{getMessage:f,onRequestReceived:function(a){var b=function(b){b=f(b);b!=null&&a(b)};d(b);return{release:function(){e(b)}}},sendMessage:a,stopWaitingForReply:e,waitForReply:d}}function a(a){return h.BroadcastChannel!=null?j(a):i(a)}g.getChannel=a}),98);
__d("MWTabCommunication",["MWTabCommunicationChannel","Promise","clearTimeout","pageID","promiseDone","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a,b){var c=this;this.$2=null;this.$5=function(a){a=c.$4.getMessage(a);a!=null&&a.a==="sb"&&a.t!==c.tabID()&&a.r===c.tabID()&&a.k!=null&&(c.$2&&c.$2(a.k),c.$4.stopWaitingForReply(c.$5),c.$2=null)};this.$1=a;this.$3=b!=null?b:500;this.$4=d("MWTabCommunicationChannel").getChannel(a)}var e=a.prototype;e.tabID=function(){return c("pageID")};e.$6=function(){var a={a:"r",t:this.tabID()};this.$4.sendMessage(a)};e.listenToRequest=function(a){return this.listenToRequestAsync(function(){return(h||(h=b("Promise"))).resolve(a())})};e.listenToRequestAsync=function(a){var b=this,d=function(d){d.a==="r"&&d.t!==b.tabID()&&c("promiseDone")(a().then(function(a){a={a:"sb",k:a,r:d.t,t:b.tabID()};b.$4.sendMessage(a)}))};return this.$4.onRequestReceived(d)};e.$7=function(){var a=this;return new(h||(h=b("Promise")))(function(b){a.$2=b,a.$4.waitForReply(a.$5),a.$6()})};e.request=function(a,d){var e=this,f,g=function(){f!=null&&c("clearTimeout")(f)};return(h||(h=b("Promise"))).race([this.$7().then(function(b){e.$4.stopWaitingForReply(e.$5);return a(b)}),new h(function(a){f=c("setTimeout")(function(){a(d()),e.$4.stopWaitingForReply(e.$5)},e.$3)})]).then(function(a){g();return a})};return a}();g.MWTabCommunication=a}),98);
__d("MWEARKeychainV3",["$InternalEnum","Deferred","ExecutionEnvironment","FBLogger","LSPlatformLsInitLog","MAWCryptoConsts","MAWCurrentUser","MAWEARGenNewKeychainCryptoKey","MAWGenKeychainCryptoKeyWithVersion","MAWQplProxy","MAWReliabilityMonitor","MWEARKeychainV3Errors","MWTabCommunication","Promise","QPLUserFlow","Random","ReStoreTabNotifier","WAArrayBufferUtils","WAResultOrError","WATimeUtils","asyncToGeneratorRuntime","getErrorSafe","gkx","memoizeOneWithArgs","promiseDone","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=function(){return{accountKey:null,databaseEncryptionKeys:new Map(),dbReady:new(c("Deferred"))(),latestVersion:d("MAWCryptoConsts").VERSION}},k={global_ear:j(),maw_ear:j()},l=null,m=function(){var a=Object.keys(k).reduce(function(a,b){a[b]="none";return a},{});return{get:function(b){return a[b]},is:function(b,c){return a[b]===c},set:function(b,c){a[b]=c;(b=l)==null?void 0:b.updateState()}}}();function a(a){k[a]=j(),m.set(a,"none")}function e(a,b){m.set(a,b)}function n(a){var b=d("Random").uint32();while(a.some(function(a){return a.randomisedVersion===b}))b=d("Random").uint32();return b}var o={global_ear:function(){return null},maw_ear:function(){return null}},p=function(a){return o[a]()},q=function(a,b){o[a]=function(){return b}},r=function(a,b){q(a,b),x(a).dbReady.resolve()},s={global_ear:"browserEncryptionMetaV2",maw_ear:"encryptionMetaV3"},t=c("memoizeOneWithArgs")(function(a,b){return new(d("MWTabCommunication").MWTabCommunication)("ear_keys_"+b+"_"+a)});function f(a,b,c){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f;e===void 0&&(e=N);c("gkx")("9396")&&c("FBLogger")("messenger_web").info("Initialise EAR keychain: %s",a);l=K(a);if(m.is(a,"success")&&x(a).databaseEncryptionKeys.size!==0)return d("WAResultOrError").makeResult(w(a));var g=d("MAWCurrentUser").getID(),h=c("ReStoreTabNotifier")("channel-ear-keychain-v3-"+g);h.onEventReceive("notifyEarKeychainV2",G);var j=(i||(i=c("ExecutionEnvironment"))).isInWorker?"Worker":"UI";e(a+"_ear_init_start",{string:(f={},f["initFlow_"+a+"_"+j]=b,f)});try{b=(yield L(h,a,void 0,e));e(a+"_ear_import_end");for(f of b)x(a).databaseEncryptionKeys.set(f.result.version,{dbEntry:f.entry,keys:f.result.keys});F(a);t(a,g).listenToRequest(function(){return JSON.stringify(Array.from(x(a).databaseEncryptionKeys.entries()).map(function(a){var b=a[0];a=a[1];var c=a.dbEntry;a=a.keys;return[b,{dbEntry:c,keys:a.map(function(a){return d("WAArrayBufferUtils").arrayBufferToString(a)})}]}))});e(a+"_ear_init_end",{string_array:(h={},h[a+"_randomisedVersionKeys"+j]=v(a).map(function(a){a[0];a=a[1].dbEntry;return String(a.randomisedVersion)}),h)});m.set(a,"success");return d("WAResultOrError").makeResult(w(a))}catch(b){m.set(a,"failure");e(a+"_ear_init_error");c("gkx")("9396")&&c("FBLogger")("messenger_web").catching(c("getErrorSafe")(b)).mustfix("Failed to setup EAR Keychain V3. Namespace: %s",a);return d("WAResultOrError").DEPRECATED_makeError("keychain-setup-failure",b)}});return u.apply(this,arguments)}function v(a){return Array.from(x(a).databaseEncryptionKeys.entries())}function w(a){return x(a).latestVersion}function x(a){return k[a]}function y(a,b){var e=b!=null?b:w(a);b=x(a).databaseEncryptionKeys.get(e);if(b==null){c("promiseDone")(C(a).then(function(a){var b=a.map(function(a){return a.version}).includes(e);c("FBLogger")("messenger_web").info("EAR Keychain DB match found: %s. Version = %s. NumberVersions = %s",b,e,a.length)}));var f=w(a),g=Array.from(x(a).databaseEncryptionKeys.keys());c("FBLogger")("messenger_web").mustfix("EAR Key v%s was null. Latest version: %s has key: %s, keychain length: %s, currentLatestVersion: %s, init status %s, in worker %s",e,f,x(a).databaseEncryptionKeys.get(f)==null,x(a).databaseEncryptionKeys.size,Math.max.apply(Math,g),m.get(a),(i||(i=c("ExecutionEnvironment"))).isInWorker);throw new(d("MWEARKeychainV3Errors").EARKeychainNotFoundError)("EAR Key "+e+" was null.")}return{dbEntry:b.dbEntry,keys:b.keys,randomisedVersion:b.dbEntry.randomisedVersion,version:e}}function z(a){return c("MAWGenKeychainCryptoKeyWithVersion")(a.key,a.seed,a.version,a.formatVersion,a.accountKeyString,a.userKeyBaseString,a.appIdOrigin)}var A=b("$InternalEnum")({UNKNOWN:-1,NO_KEY:0,EBSM_EARV2_UPGRADE:1,RANDOMISED_VERSION_UPGRADE:2,EXPIRED_KEY:3,FORCE_KEY_ROTATION:4});function B(a){if(a.length===0)return{reason:A.NO_KEY,result:!0};a=a[a.length-1];return!d("WATimeUtils").isInFuture(a.expiration)?{reason:A.EXPIRED_KEY,result:!0}:{result:!1}}function C(a){var c=E(a,"readonly");return new(h||(h=b("Promise")))(function(b,d){c.onabort=function(){return d(c.error)};c.onerror=function(){return d(c.error)};var e=c.objectStore(s[a]).getAll();e.onsuccess=function(){return b(e.result)};e.onerror=function(){return d(e.error)}}).then(D)}function D(a){var b=a.find(function(a){return a.version==null});b!=null&&c("FBLogger")("messenger_web").mustfix("EAR Keychain Rotation null version: fields nonnull: %s %s %s %s %s %s",b.id==null,b.key==null,b.seed==null,b.formatVersion==null,b.accountKeyString==null,b.userKeyBaseString==null);b=a.filter(function(a){return a.version!=null});return b.sort(function(a,b){return a.version-b.version})}function E(a,b){var d=p(a);if(d==null)throw c("FBLogger")("messenger_web").mustfixThrow("Encryption IndexDB should've been initialized. Namespace: %s",a);return d.transaction(s[a],b,{durability:"strict"})}var F=function(a){var b=Array.from(x(a).databaseEncryptionKeys.keys());b.length>0?x(a).latestVersion=Math.max.apply(Math,b):c("FBLogger")("messenger_web").mustfix("EAR latest version does not exist")},G=function(a){var d=a.namespace,e=a.version;c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{c("FBLogger")("messenger_web").info("Received key rotation notification. Namespace: %s",d);yield x(d).dbReady.getPromise();var a=(yield C(d)).find(function(a){return a.version===e});if(a==null)throw c("FBLogger")("messenger_web").mustfixThrow("Notified new Ear Key but missing in DB");var b=(yield z(a));x(d).databaseEncryptionKeys.set(b.version,{dbEntry:a,keys:b.keys});F(d);c("FBLogger")("messenger_web").info("Rotated key successfully. Namespace: %s",d)}catch(a){return c("FBLogger")("messenger_web").catching(a).mustfix("Failed to handleNewVersion. In worker %s. Namespace: %s.",(i||(i=c("ExecutionEnvironment"))).isInWorker,d)}})())};function H(a){return m.get(a)!=="none"}function I(a){return m.get(a)}function J(a){if(m.is(a,"success")){x(a).databaseEncryptionKeys.size===0&&c("FBLogger")("messenger_web").mustfix("Keychain initialised but no keys present");return!0}return!1}function K(a){return d("MAWReliabilityMonitor").MAWReliabilityMonitorSingleton.startMonitoring("EARv3",function(){return{extra:{isKeychainInitialised:J(a).toString(),latestVersion:w(a).toString()},reason:m.get(a),state:function(){switch(m.get(a)){case"none":return d("MAWReliabilityMonitor").HealthReportState.PENDING;case"success":return d("MAWReliabilityMonitor").HealthReportState.OK;case"failure":return d("MAWReliabilityMonitor").HealthReportState.ERROR;default:return d("MAWReliabilityMonitor").HealthReportState.UNKNOWN}}()}})}function L(a,b,c,d){return M.apply(this,arguments)}function M(){M=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,d,e,f){var g=(yield c("MAWEARGenNewKeychainCryptoKey")());f(d+"_ear_raw_key_generated");var j=(yield new(h||(h=b("Promise")))(function(b,h){var j=E(d,"readwrite");j.onerror=function(){return h(j.error)};j.onabort=function(){return h(j.error)};var k=j.objectStore(s[d]).getAll();k.onerror=function(){return h(k.error)};k.onsuccess=function(){var l;f(d+"_ear_keys_fetched");var m=D(k.result),o=B(m),p=o.reason;o=o.result;if((e==null?void 0:e.forceKeyRotation)!==!0&&!o)return b(m);o=(e==null?void 0:e.forceKeyRotation)===!0?A.FORCE_KEY_ROTATION:p!=null?p:A.UNKNOWN;p=m.map(function(a){return a.version});l=(l=p[p.length-1])!=null?l:0;c("FBLogger")("messenger_web").info("Key rotation. EAR versions: %s. Latest version: %s. Namespace: %s, Worker: %s",p.toString(),l,d,(i||(i=c("ExecutionEnvironment"))).isInWorker);var q=babelHelpers["extends"]({},g,{randomisedVersion:n(m),source:o,version:l+1});f(d+"_ear_adding_new_key");j.oncomplete=function(){m.push(babelHelpers["extends"]({},q,{id:q.version})),a.postMessage("notifyEarKeychainV2",{namespace:d,version:q.version}),f(d+"_ear_gen_key_end"),b(m)};var r=j.objectStore(s[d]).add(q);r.onerror=function(){return h(c("FBLogger")("messenger_web").catching(r.error).mustfixThrow("Failed to rotate EAR key"))}}}));f(d+"_ear_import_start");j=(yield h.allSettled(j.map(function(a){return z(a).then(function(b){return{entry:a,result:b}})})));var k=j[j.length-1];if(k.status==="rejected"){var l;l=(l=e==null?void 0:e.corruptedEARRetryCount)!=null?l:0;if(l>=1)throw k.reason;return L(a,d,{corruptedEARRetryCount:l+1,forceKeyRotation:!0},f)}return j.map(function(a){if(a.status==="fulfilled")return a.value}).filter(Boolean)});return M.apply(this,arguments)}var N=function(a,b){d("LSPlatformLsInitLog").addPoint(a,b),O(a,b)},O=function(a,b){var e=c("qpl")._(25310776,"6155");(i||(i=c("ExecutionEnvironment"))).isInWorker?d("MAWQplProxy").sendQplPointThroughBridge(e,"backend_"+a,{annotations:b}):(c("QPLUserFlow").addPoint(e,"ui_"+a),b!=null&&c("QPLUserFlow").addAnnotations(e,b))},P=function(a,b){return t(a,b).request(function(b){b=JSON.parse(b);b.forEach(function(b){var c=b[0];b=b[1];var e=b.keys.map(d("WAArrayBufferUtils").stringToArrayBuffer);x(a).databaseEncryptionKeys.set(c,{dbEntry:b.dbEntry,keys:e})});F(a);m.set(a,"success");return!0},function(){return!1})};g.InitStatus=m;g.resetKeychain__TEST_ONLY_DO_NOT_USE=a;g.setInitStatus__TEST_ONLY_DO_NOT_USE=e;g.generateNewRandomisedVersionNumber=n;g.setNamespaceSourceDbWithoutMarkingDbReady=q;g.setNamespaceSourceDbAndMarkAsReady=r;g.getEncryptionKeysTabCommunication=t;g.init=f;g.getLatestVersion=w;g.getKeychain=x;g.getDbEncryptionKey=y;g.isKeychainSettled=H;g.getKeychainInitStatus=I;g.isKeychainInitialised=J;g.logMawInitPoint=O;g.importKeysFromOtherTab=P}),98);
__d("WAWorkerGlobalScope",[],(function(a,b,c,d,e,f){"use strict";a=function(){if(typeof window!=="undefined")return window;return typeof globalThis!=="undefined"?globalThis:self}();f.workerGlobalScope=a}),66);
__d("MAWEncryptionIndexedDbV2",["BrowserLockManager","EARInitType","ExecutionEnvironment","FBLogger","IndexedDbPolyfills","MAWCurrentUser","MAWIndexedDBDeletion","MAWIndexedDbMetadata","MAWQplProxy","MWEARKeychainV3","Promise","QPLUserFlow","WALogger","WAWorkerGlobalScope","err","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Armadillo Web Remote Presence] MAW RP Initialising EAR"]);j=function(){return a};return a}b("IndexedDbPolyfills");var k="browserEncryptionMetaV2",l="version",m=1,n=6e4,o=null,p=null,q=null;function a(){return o}function e(){return o!=null}var r=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(babelHelpers.wrapNativeSuper(Error));function s(a,e){e===void 0&&(e=0);var f=d("MAWCurrentUser").getID();if(e>m){v(a,"ear_idb_retry_failed_max_reached");return(i||(i=b("Promise"))).reject(new r())}if(o!=null){v(a,"ear_db_exists");return(i||(i=b("Promise"))).resolve()}if(indexedDB==null){v(a,"ear_idb_unavailable");return(i||(i=b("Promise"))).reject(c("err")("IndexedDB API not available"))}v(a,"ear_db_open_start",{bool:{browserLockEnabled:c("BrowserLockManager")!=null}});return new(i||(i=b("Promise")))(function(b,g){var i=function(c){s(a,e+1).then(b)["catch"](function(a){if(a instanceof r)return g(c);g(a)})};try{q=d("MAWIndexedDbMetadata").encryptionDbName(f);var j=indexedDB.open(q),m=d("WAWorkerGlobalScope").workerGlobalScope.setTimeout(function(){g(c("err")("IndexedDB initialisation timeout in %s flow, isInWorker: %s, openRequest: %s",String(a),(h||(h=c("ExecutionEnvironment"))).isInWorker?"true":"false",j.readyState))},n);j.onupgradeneeded=function(b){d("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m);v(a,"ear_db_upgrade_start");b=b.target.result;if(!b.objectStoreNames.contains(k)){b=b.createObjectStore(k,{autoIncrement:!0,keyPath:"id"});b.createIndex(l,l,{unique:!0})}v(a,"ear_db_upgrade_end")};j.onblocked=function(){v(a,"ear_db_open_blocked"),d("WAWorkerGlobalScope").workerGlobalScope.setTimeout(function(){g(c("err")("EAR Open timed out while blocked"))},2e3)};j.onsuccess=function(e){d("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m);var f=e.target.result;if(!f.objectStoreNames.contains(k)){e=j.result.objectStoreNames.contains(k);c("FBLogger")("messenger_web").warn("Missing encryption meta table. Is store present: %s",e);d("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m);return t(f,"missing_encryption_meta_table").then(function(){i(c("err")("Malformed encryption DB"))})["catch"](function(b){v(a,"ear_idb_retry_failed_delete_failed");return g(c("err")("Failed to delete malformed encryption DB: "+b.message))})}f.onversionchange=function(){f.close(),c("FBLogger")("messenger_web").info("EAR onversionchange triggered"),d("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m),p==null?void 0:p()};v(a,"ear_db_open_end");o=f;d("MWEARKeychainV3").setNamespaceSourceDbAndMarkAsReady("global_ear",o);b()};j.onerror=function(){d("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m);if(j.error.name==="UnknownError"){v(a,"ear_db_open_error_unknown_error");return i(j.error)}v(a,"ear_db_open_error");g(j.error)}}catch(b){v(a,"ear_db_error"),g(b)}})}function f(a){p=p==null?a:p}function t(a,b){a===void 0&&(a=o);c("FBLogger")("messenger_web").warn("EAR DB deletion triggered: %s",b);a!=null&&a.close();return d("MAWIndexedDBDeletion").deleteDB(q,"ear")}function u(a){switch(a){case c("EARInitType").EB_INIT:return c("qpl")._(521477507,"1406");case c("EARInitType").MAW_INIT:return c("qpl")._(25310776,"6155");case c("EARInitType").MAW_RP_INIT:d("WALogger").DEV(j());return c("qpl")._(25310776,"6155");case c("EARInitType").LS_INIT:return c("qpl")._(25305590,"1127");case c("EARInitType").MAW_IN_UI_INIT:return null}}function v(a,b,e){a=u(a);if(a==null)return;(h||(h=c("ExecutionEnvironment"))).isInWorker?d("MAWQplProxy").sendQplPointThroughBridge(a,"worker_"+b,{annotations:e}):(c("QPLUserFlow").addPoint(a,b),e!=null&&c("QPLUserFlow").addAnnotations(a,e))}g.storeName=k;g.ENCRYPTION_MAW_STORES_INDEX=l;g.getEncryptionDB=a;g.isEncryptionDBInited=e;g.makeEncryptionDB=s;g.maybeSetEncryptionDbOnVersionChange=f;g.deleteEncryptionDB_UNSAFE=t}),98);
__d("MAWEphemeralConsts",["WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";a=300;b=600;c=900;e=1800;d=Math.imul((f=d("WATimeUtils")).HOUR_SECONDS,6);var h=Math.imul(f.HOUR_SECONDS,12),i=Math.imul(f.DAY_SECONDS,14),j=1e3,k=5,l=10,m=30,n=60,o=d;g.fiveMinutesInSeconds=a;g.tenMinutesInSeconds=b;g.fifteenMinutesInSeconds=c;g.thirtyMinutesInSeconds=e;g.oneHourInSeconds=f.HOUR_SECONDS;g.sixHoursInSeconds=d;g.twelveHoursInSeconds=h;g.oneDayInSeconds=f.DAY_SECONDS;g.ephemeralMaxDelectionWindowForUnseenMessage=i;g.msPerSec=j;g.fiveSeconds=k;g.tenSeconds=l;g.thirtySeconds=m;g.oneMinuteInSeconds=n;g.ephemeralReportingWindowInSeconds=o}),98);
__d("MAWKeychain",["MWEARKeychainV3"],(function(a,b,c,d,e,f,g){"use strict";a={getDbEncryptionKey:d("MWEARKeychainV3").getDbEncryptionKey,getLatestVersion:d("MWEARKeychainV3").getLatestVersion,init:d("MWEARKeychainV3").init};g["default"]=a}),98);
__d("MAWMainTraceUtils",["I64","LSRequestId","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return c("LSRequestId").generate()}function e(a,b,c,d,e,f,g){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f,g,i){yield a.data_trace_meta.add({contextOne:f,contextThree:i,contextTwo:g,foregroundTimestampMs:(h||(h=d("I64"))).zero,initTimestampMs:b,predefinedId:void 0,shouldFlush:!1,traceId:c,traceType:e})});return i.apply(this,arguments)}g.createTraceId=a;g.startTraceWithTxn=e}),98);
__d("MAWMediaDownloadStatus",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["DOWNLOADING","SUCCESS","NOT_MANUAL_RETRYABLE_FAILURE","MANUAL_RETRYABLE_FAILURE","MISSING_FILE","RETRYING","AUTOMATICALLY_RETRYABLE_TIMEOUT_FAILURE"]);c=a;f["default"]=c}),66);
__d("MAWMsg",["$InternalEnum","I64","LSBitFlag","LSIntEnum","LSMessagingThreadTypeUtil","LSReplyMessageAttachmentType","MAWMsgType","WAArmadilloXMA.pb"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,b,c,e,f,g){if(a===d("MAWMsgType").MSG_TYPE.TEXT)if(b)return(i||(i=d("LSIntEnum"))).ofNumber(8192);else return(i||(i=d("LSIntEnum"))).ofNumber(1);else if(a===d("MAWMsgType").MSG_TYPE.IMAGE||a===d("MAWMsgType").MSG_TYPE.VIDEO||a===d("MAWMsgType").MSG_TYPE.RAVEN)return(i||(i=d("LSIntEnum"))).ofNumber(2);else if(a===d("MAWMsgType").MSG_TYPE.PTT)return(i||(i=d("LSIntEnum"))).ofNumber(4);else if(a===d("MAWMsgType").MSG_TYPE.FUTUREPROOF)return k(f);else if(a===d("MAWMsgType").MSG_TYPE.CIPHERTEXT)return(i||(i=d("LSIntEnum"))).ofNumber(65536);else if(a===d("MAWMsgType").MSG_TYPE.UNAVAILABLE)return(i||(i=d("LSIntEnum"))).ofNumber(262144);else if(a===d("MAWMsgType").MSG_TYPE.GIF)return(i||(i=d("LSIntEnum"))).ofNumber(16384);else if(a===d("MAWMsgType").MSG_TYPE.STICKER)return(i||(i=d("LSIntEnum"))).ofNumber(4096);else if(a===d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE)return(i||(i=d("LSIntEnum"))).ofNumber(64);else if(a===d("MAWMsgType").MSG_TYPE.XMA)if(c!=null&&c)return(i||(i=d("LSIntEnum"))).ofNumber(256);else return g===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH?(i||(i=d("LSIntEnum"))).ofNumber(536870912):(i||(i=d("LSIntEnum"))).ofNumber(1024);else if(a===d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE)if(!e)return(i||(i=d("LSIntEnum"))).ofNumber(33554432);else return(i||(i=d("LSIntEnum"))).ofNumber(1);else if(a===d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH)return(i||(i=d("LSIntEnum"))).ofNumber(134217728);else return(i||(i=d("LSIntEnum"))).ofNumber(1)}function k(a){switch(a){case"liveLocationMessage":return(i||(i=d("LSIntEnum"))).ofNumber(4294967296);case"locationMessage":return(i||(i=d("LSIntEnum"))).ofNumber(524288);case"pollCreationMessage":return(i||(i=d("LSIntEnum"))).ofNumber(1048576);case"contactShareMessage":return(i||(i=d("LSIntEnum"))).ofNumber(2097152);case"storyMentionMessage":return(i||(i=d("LSIntEnum"))).ofNumber(4194304);case"postMentionMessage":return(i||(i=d("LSIntEnum"))).ofNumber(2147483648);case"metaAiMessage":return(i||(i=d("LSIntEnum"))).ofNumber(8388608);case"bumpMessage":return(i||(i=d("LSIntEnum"))).ofNumber(16777216);case"stickerReceiverFetchMessage":return(i||(i=d("LSIntEnum"))).ofNumber(67108864);case"noteMention":return(i||(i=d("LSIntEnum"))).ofNumber(1073741824);case"messengerMemory":return(i||(i=d("LSIntEnum"))).ofNumber(8589934592);case"rtcMessage":return(i||(i=d("LSIntEnum"))).ofNumber(17179869184);default:return(i||(i=d("LSIntEnum"))).ofNumber(131072)}}function e(a){a=a.displayedContentTypes;return(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(2))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(4))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(16384))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(16))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(64))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(4096))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(134217728))}function f(a,b){var e=a.replyAttachmentType;if(e==null)return!1;b=d("LSMessagingThreadTypeUtil").isArmadilloSecure(b);return b&&a.replyAttachmentId==null?!1:(j||(j=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").PHOTO))||(j||(j=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").GIF))||(j||(j=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").AUDIO))||(j||(j=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").STICKER))||(j||(j=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").VIDEO))}function l(a){return(j||(j=d("I64"))).equal(a.displayedContentTypes,(i||(i=d("LSIntEnum"))).ofNumber(134217728))}function m(a){return d("LSBitFlag").has((i||(i=d("LSIntEnum"))).ofNumber(536870912),a.displayedContentTypes)}function n(a){a=a.displayedContentTypes;if((j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(32)))return!0;else return!1}function o(a){return(j||(j=d("I64"))).lt(a.sendStatusV2,(i||(i=d("LSIntEnum"))).ofNumber(2))}function p(a){a=a.displayedContentTypes;return d("LSBitFlag").has((i||(i=d("LSIntEnum"))).ofNumber(1024),a)||d("LSBitFlag").has((i||(i=d("LSIntEnum"))).ofNumber(536870912),a)}function q(a){a=a.displayedContentTypes;return(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(65536))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(131072))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(524288))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(4294967296))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(1048576))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(2097152))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(4194304))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(2147483648))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(8388608))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(16777216))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(1073741824))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(8589934592))?!0:(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(262144))}var r=(b=b("$InternalEnum"))({PLAYED:0,SCREENSHOTTED:1,FORCE_DISABLED:2}),s=b({PERMANENT:0,UNSEEN:1,SEEN:2,REPLAYED:3,EXPIRED:4}),t=b({VIEW_ONCE:0,ALLOW_REPLAY:1,KEEP_IN_CHAT:2});b=b({IMAGE:0,VIDEO:1});g.text=(h=d("MAWMsgType")).MSG_TYPE.TEXT;g.image=h.MSG_TYPE.IMAGE;g.video=h.MSG_TYPE.VIDEO;g.ptt=h.MSG_TYPE.PTT;g.unsent=h.MSG_TYPE.REVOKED;g.gif=h.MSG_TYPE.GIF;g.bumpExistingMessage=h.MSG_TYPE.BUMP_EXISTING_MESSAGE;g.getDisplayedContentTypes=a;g.isMediaMsg=e;g.isMediaReplyAttachmentType=f;g.isReceiverFetchMsg=l;g.isReceiverFetchXMAMsg=m;g.isAdminMsg=n;g.isOptimistic=o;g.isXMAMsg=p;g.isPlaceholder=q;g.MAWRavenActionNotifType=r;g.MAWRavenMsgEphemeralMediaState=s;g.MAWRavenMsgEphemeralType=t;g.MAWRavenMsgMediaType=b}),98);
__d("MAWSharedProtocolQueueConst",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({Initializing:"initializing",Failed:"failed",Processing:"processing",Complete:"complete"});f.OfflineConsumerStatus=a}),66);
__d("MAWOfflineQueueStatus",["FBLogger","MAWSharedProtocolQueueConst"],(function(a,b,c,d,e,f,g){"use strict";var h=new Map(),i=!1;function j(a,b){h.set(a,b),h.size>5e3&&c("FBLogger")("labyrinth_web").warn("Offline queue status map size (%s) is too large",h.size)}function k(a){return h.get(a)}function a(){h=new Map(),i=!1}function b(){return i}function e(){i=!0}function f(a,b){a=Object.keys(a);a.map(function(a){j(a,b)})}function l(a){return k(a)===d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete}function m(){return Array.from(h.entries()).filter(function(a){a[0];a=a[1];return a!==d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete&&a!==d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Failed}).map(function(a){a=a[0];return a})}g.setOfflineQueueStatus=j;g.getOfflineQueueStatus=k;g.resetOfflineQueueState=a;g.isOfflineQueueComplete=b;g.markOfflineQueueComplete=e;g.markThreadWithOfflineQueueStatus=f;g.isOfflineQueueDoneForThread=l;g.getAllThreadsWithOfflineQueueIncomplete=m}),98);
__d("WAArmadilloApplication.pb",["WAArmadilloXMA.pb","WACommon.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){var h,i;a={ES_OPEN:1,ES_CLOSE:2};b={PAYMENT_UNKNOWN:-1,REQUEST_INITED:4,REQUEST_DECLINED:5,REQUEST_TRANSFER_INITED:6,REQUEST_TRANSFER_COMPLETED:7,REQUEST_TRANSFER_FAILED:8,REQUEST_CANCELED:9,REQUEST_EXPIRED:10,TRANSFER_INITED:11,TRANSFER_PENDING:12,TRANSFER_PENDING_RECIPIENT_VERIFICATION:13,TRANSFER_CANCELED:14,TRANSFER_COMPLETED:15,TRANSFER_NO_RECEIVER_CREDENTIAL_NO_RTS_PENDING_CANCELED:16,TRANSFER_NO_RECEIVER_CREDENTIAL_NO_RTS_PENDING_OTHER:17,TRANSFER_REFUNDED:18,TRANSFER_PARTIAL_REFUND:19,TRANSFER_CHARGED_BACK:20,TRANSFER_EXPIRED:21,TRANSFER_DECLINED:22,TRANSFER_UNAVAILABLE:23};c={SCREENSHOT_IMAGE:1,SCREEN_RECORDING:2};e={PLAYED:0,SCREENSHOT:1,FORCE_DISABLE:2};f={VIEW_ONCE:0,ALLOW_REPLAY:1,KEEP_IN_CHAT:2};var j={SMALL_LIKE:1,MEDIUM_LIKE:2,LARGE_LIKE:3},k={},l={},m={},n={},o={},p={},q={},r={},s={},t={},u={},v={},w={},x={},y={},z={},A={},B={},C={},D={},E={},F={},G={},H={},I={},J={},K={},L={},M={},N={},O={};k.name="Armadillo";k.internalSpec={payload:[1,(h=d("WAProtoConst")).TYPES.MESSAGE,m],metadata:[2,h.TYPES.MESSAGE,l]};l.name="Armadillo$Metadata";l.internalSpec={};m.name="Armadillo$Payload";m.internalSpec={content:[1,h.TYPES.MESSAGE,E],applicationData:[2,h.TYPES.MESSAGE,r],signal:[3,h.TYPES.MESSAGE,o],subProtocol:[4,h.TYPES.MESSAGE,n],__oneofs__:{payload:["content","applicationData","signal","subProtocol"]}};n.name="Armadillo$SubProtocolPayload";n.internalSpec={futureProof:[1,h.TYPES.ENUM,(i=d("WACommon.pb")).FUTURE_PROOF_BEHAVIOR]};o.name="Armadillo$Signal";o.internalSpec={encryptedBackupsSecrets:[1,h.TYPES.MESSAGE,p],__oneofs__:{signal:["encryptedBackupsSecrets"]}};p.name="Armadillo$Signal$EncryptedBackupsSecrets";p.internalSpec={backupId:[1,h.TYPES.UINT64],serverDataId:[2,h.TYPES.UINT64],epoch:[3,h.FLAGS.REPEATED|h.TYPES.MESSAGE,q],tempOcmfClientState:[4,h.TYPES.BYTES],mailboxRootKey:[5,h.TYPES.BYTES],obliviousValidationToken:[6,h.TYPES.BYTES]};q.name="Armadillo$Signal$EncryptedBackupsSecrets$Epoch";q.internalSpec={id:[1,h.TYPES.UINT64],anonId:[2,h.TYPES.BYTES],rootKey:[3,h.TYPES.BYTES],status:[4,h.TYPES.ENUM,a]};r.name="Armadillo$ApplicationData";r.internalSpec={metadataSync:[1,h.TYPES.MESSAGE,D],aiBotResponse:[2,h.TYPES.MESSAGE,t],messageHistoryDocumentMessage:[3,h.TYPES.MESSAGE,s],__oneofs__:{applicationData:["metadataSync","aiBotResponse","messageHistoryDocumentMessage"]}};s.name="Armadillo$ApplicationData$MessageHistoryDocumentMessage";s.internalSpec={document:[1,h.TYPES.MESSAGE,i.SubProtocolSpec]};t.name="Armadillo$ApplicationData$AIBotResponseMessage";t.internalSpec={summonToken:[1,h.TYPES.STRING],messageText:[2,h.TYPES.STRING],serializedExtras:[3,h.TYPES.STRING]};u.name="Armadillo$ApplicationData$MetadataSyncAction";u.internalSpec={actionTimestamp:[1,h.TYPES.INT64],chatAction:[101,h.TYPES.MESSAGE,x],messageAction:[102,h.TYPES.MESSAGE,v],__oneofs__:{actionType:["chatAction","messageAction"]}};v.name="Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction";v.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec],messageDelete:[101,h.TYPES.MESSAGE,w],__oneofs__:{action:["messageDelete"]}};w.name="Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction$ActionMessageDelete";w.internalSpec={};x.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction";x.internalSpec={chatId:[1,h.TYPES.STRING],chatArchive:[101,h.TYPES.MESSAGE,A],chatDelete:[102,h.TYPES.MESSAGE,z],chatRead:[103,h.TYPES.MESSAGE,y],__oneofs__:{action:["chatArchive","chatDelete","chatRead"]}};y.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatRead";y.internalSpec={messageRange:[1,h.TYPES.MESSAGE,C],read:[2,h.TYPES.BOOL]};z.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatDelete";z.internalSpec={messageRange:[1,h.TYPES.MESSAGE,C]};A.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatArchive";A.internalSpec={messageRange:[1,h.TYPES.MESSAGE,C],archived:[2,h.TYPES.BOOL]};B.name="Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessage";B.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec],timestamp:[2,h.TYPES.INT64]};C.name="Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageRange";C.internalSpec={lastMessageTimestamp:[1,h.TYPES.INT64],lastSystemMessageTimestamp:[2,h.TYPES.INT64],messages:[3,h.FLAGS.REPEATED|h.TYPES.MESSAGE,B]};D.name="Armadillo$ApplicationData$MetadataSyncNotification";D.internalSpec={actions:[2,h.FLAGS.REPEATED|h.TYPES.MESSAGE,u]};E.name="Armadillo$Content";E.internalSpec={commonSticker:[1,h.TYPES.MESSAGE,O],screenshotAction:[3,h.TYPES.MESSAGE,K],extendedContentMessage:[4,h.TYPES.MESSAGE,d("WAArmadilloXMA.pb").ExtendedContentMessageSpec],ravenMessage:[5,h.TYPES.MESSAGE,N],ravenActionNotifMessage:[6,h.TYPES.MESSAGE,M],extendedMessageContentWithSear:[7,h.TYPES.MESSAGE,L],imageGalleryMessage:[8,h.TYPES.MESSAGE,J],paymentsTransactionMessage:[10,h.TYPES.MESSAGE,F],bumpExistingMessage:[11,h.TYPES.MESSAGE,I],noteReplyMessage:[13,h.TYPES.MESSAGE,H],ravenMessageMsgr:[14,h.TYPES.MESSAGE,N],networkVerificationMessage:[15,h.TYPES.MESSAGE,G],__oneofs__:{content:["commonSticker","screenshotAction","extendedContentMessage","ravenMessage","ravenActionNotifMessage","extendedMessageContentWithSear","imageGalleryMessage","paymentsTransactionMessage","bumpExistingMessage","noteReplyMessage","ravenMessageMsgr","networkVerificationMessage"]}};F.name="Armadillo$Content$PaymentsTransactionMessage";F.internalSpec={transactionId:[1,h.TYPES.UINT64],amount:[2,h.TYPES.STRING],currency:[3,h.TYPES.STRING],paymentStatus:[4,h.TYPES.ENUM,b],extendedContentMessage:[5,h.TYPES.MESSAGE,d("WAArmadilloXMA.pb").ExtendedContentMessageSpec]};G.name="Armadillo$Content$NetworkVerificationMessage";G.internalSpec={codeText:[1,h.TYPES.STRING]};H.name="Armadillo$Content$NoteReplyMessage";H.internalSpec={noteId:[1,h.TYPES.STRING],noteText:[2,h.TYPES.MESSAGE,i.MessageTextSpec],noteTimestampMs:[3,h.TYPES.INT64],textContent:[4,h.TYPES.MESSAGE,i.MessageTextSpec],stickerContent:[5,h.TYPES.MESSAGE,i.SubProtocolSpec],videoContent:[6,h.TYPES.MESSAGE,i.SubProtocolSpec],__oneofs__:{noteReplyContent:["textContent","stickerContent","videoContent"]}};I.name="Armadillo$Content$BumpExistingMessage";I.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec]};J.name="Armadillo$Content$ImageGalleryMessage";J.internalSpec={images:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,i.SubProtocolSpec]};K.name="Armadillo$Content$ScreenshotAction";K.internalSpec={screenshotType:[1,h.TYPES.ENUM,c]};L.name="Armadillo$Content$ExtendedContentMessageWithSear";L.internalSpec={searId:[1,h.TYPES.STRING],payload:[2,h.TYPES.BYTES],nativeUrl:[3,h.TYPES.STRING],searAssociatedMessage:[4,h.TYPES.MESSAGE,i.SubProtocolSpec],searSentWithMessageId:[5,h.TYPES.STRING]};M.name="Armadillo$Content$RavenActionNotifMessage";M.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec],actionTimestamp:[2,h.TYPES.INT64],actionType:[3,h.TYPES.ENUM,e]};N.name="Armadillo$Content$RavenMessage";N.internalSpec={ephemeralType:[1,h.TYPES.ENUM,f],imageMessage:[2,h.TYPES.MESSAGE,i.SubProtocolSpec],videoMessage:[3,h.TYPES.MESSAGE,i.SubProtocolSpec],__oneofs__:{mediaContent:["imageMessage","videoMessage"]}};O.name="Armadillo$Content$CommonSticker";O.internalSpec={stickerType:[1,h.TYPES.ENUM,j]};g.ARMADILLO_SIGNAL_ENCRYPTED_BACKUPS_SECRETS_EPOCH_EPOCH_STATUS=a;g.ARMADILLO_CONTENT_PAYMENTS_TRANSACTION_MESSAGE_PAYMENT_STATUS=b;g.ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE=c;g.ARMADILLO_CONTENT_RAVEN_ACTION_NOTIF_MESSAGE_ACTION_TYPE=e;g.ARMADILLO_CONTENT_RAVEN_MESSAGE_EPHEMERAL_TYPE=f;g.ARMADILLO_CONTENT_COMMON_STICKER_STICKER_TYPE=j;g.ArmadilloSpec=k;g.Armadillo$MetadataSpec=l;g.Armadillo$PayloadSpec=m;g.Armadillo$SubProtocolPayloadSpec=n;g.Armadillo$SignalSpec=o;g.Armadillo$Signal$EncryptedBackupsSecretsSpec=p;g.Armadillo$Signal$EncryptedBackupsSecrets$EpochSpec=q;g.Armadillo$ApplicationDataSpec=r;g.Armadillo$ApplicationData$MessageHistoryDocumentMessageSpec=s;g.Armadillo$ApplicationData$AIBotResponseMessageSpec=t;g.Armadillo$ApplicationData$MetadataSyncActionSpec=u;g.Armadillo$ApplicationData$MetadataSyncAction$SyncMessageActionSpec=v;g.Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction$ActionMessageDeleteSpec=w;g.Armadillo$ApplicationData$MetadataSyncAction$SyncChatActionSpec=x;g.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatReadSpec=y;g.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatDeleteSpec=z;g.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatArchiveSpec=A;g.Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageSpec=B;g.Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageRangeSpec=C;g.Armadillo$ApplicationData$MetadataSyncNotificationSpec=D;g.Armadillo$ContentSpec=E;g.Armadillo$Content$PaymentsTransactionMessageSpec=F;g.Armadillo$Content$NetworkVerificationMessageSpec=G;g.Armadillo$Content$NoteReplyMessageSpec=H;g.Armadillo$Content$BumpExistingMessageSpec=I;g.Armadillo$Content$ImageGalleryMessageSpec=J;g.Armadillo$Content$ScreenshotActionSpec=K;g.Armadillo$Content$ExtendedContentMessageWithSearSpec=L;g.Armadillo$Content$RavenActionNotifMessageSpec=M;g.Armadillo$Content$RavenMessageSpec=N;g.Armadillo$Content$CommonStickerSpec=O}),98);
__d("WAArmadilloLocallyTransformedMessage.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};a.name="LocallyTransformedMessage";a.internalSpec={pollUpdateMessage:[1,d("WAProtoConst").TYPES.MESSAGE,b],__oneofs__:{content:["pollUpdateMessage"]}};b.name="LocallyTransformedMessage$PollUpdateAdminMessage";b.internalSpec={pollCreationMessageId:[1,d("WAProtoConst").TYPES.STRING],pollUpdateMessageId:[2,d("WAProtoConst").TYPES.STRING]};g.LocallyTransformedMessageSpec=a;g.LocallyTransformedMessage$PollUpdateAdminMessageSpec=b}),98);
__d("WAArmadilloMiTransportAdminMessage.pb",["$InternalEnum","WAProtoConst"],(function(a,b,c,d,e,f,g){c=(a=b("$InternalEnum"))({UNSET:0,DISABLED:1,ENABLED:2});e=a({UNSET:0,CHANGED:1,REMOVED:2});f=a({UNSET:0,PINNED:1,UNPINNED:2});b=a({UNSET:0,ALL_MEMBERS:1,ADMINS_ONLY:2});var h=a({UNSET:0,ADDED:1,REMOVED:2});a=a({UNSET:0,ADDED:1,REMOVED:2});var i={},j={},k={},l={},m={},n={},o={},p={},q={},r={},s={},t={},u={},v={},w={};i.name="MiTransportAdminMessage";i.internalSpec={chatThemeChanged:[1,(d=d("WAProtoConst")).TYPES.MESSAGE,w],nicknameChanged:[2,d.TYPES.MESSAGE,v],groupParticipantChanged:[3,d.TYPES.MESSAGE,u],groupAdminChanged:[4,d.TYPES.MESSAGE,t],groupNameChanged:[5,d.TYPES.MESSAGE,s],groupMembershipAddModeChanged:[6,d.TYPES.MESSAGE,r],messagePinned:[7,d.TYPES.MESSAGE,q],groupImageChanged:[8,d.TYPES.MESSAGE,p],quickReactionChanged:[9,d.TYPES.MESSAGE,o],linkCta:[10,d.TYPES.MESSAGE,m],iconChanged:[11,d.TYPES.MESSAGE,l],disappearingSettingChanged:[12,d.TYPES.MESSAGE,k],limitSharingChanged:[13,d.TYPES.MESSAGE,j],__oneofs__:{content:["chatThemeChanged","nicknameChanged","groupParticipantChanged","groupAdminChanged","groupNameChanged","groupMembershipAddModeChanged","messagePinned","groupImageChanged","quickReactionChanged","linkCta","iconChanged","disappearingSettingChanged","limitSharingChanged"]}};j.name="MiTransportAdminMessage$LimitSharingChanged";j.internalSpec={sharingType:[1,d.TYPES.ENUM,c]};k.name="MiTransportAdminMessage$DisappearingSettingChanged";k.internalSpec={disappearingSettingDurationSeconds:[1,d.TYPES.INT32],oldDisappearingSettingDurationSeconds:[2,d.TYPES.INT32]};l.name="MiTransportAdminMessage$IconChanged";l.internalSpec={threadIcon:[1,d.TYPES.STRING]};m.name="MiTransportAdminMessage$LinkCta";m.internalSpec={ukOsaAdminText:[1,d.TYPES.MESSAGE,n],__oneofs__:{content:["ukOsaAdminText"]}};n.name="MiTransportAdminMessage$LinkCta$UkOsaAdminText";n.internalSpec={initiatorUserId:[2,d.TYPES.STRING]};o.name="MiTransportAdminMessage$QuickReactionChanged";o.internalSpec={emojiName:[1,d.TYPES.STRING]};p.name="MiTransportAdminMessage$GroupImageChanged";p.internalSpec={action:[1,d.TYPES.ENUM,e]};q.name="MiTransportAdminMessage$MessagePinned";q.internalSpec={action:[1,d.TYPES.ENUM,f]};r.name="MiTransportAdminMessage$GroupMembershipAddModeChanged";r.internalSpec={mode:[1,d.TYPES.ENUM,b]};s.name="MiTransportAdminMessage$GroupNameChanged";s.internalSpec={groupName:[1,d.TYPES.STRING]};t.name="MiTransportAdminMessage$GroupAdminChanged";t.internalSpec={targetUserId:[1,d.FLAGS.REPEATED|d.TYPES.STRING],action:[2,d.TYPES.ENUM,h]};u.name="MiTransportAdminMessage$GroupParticipantChanged";u.internalSpec={targetUserId:[1,d.FLAGS.REPEATED|d.TYPES.STRING],action:[2,d.TYPES.ENUM,a]};v.name="MiTransportAdminMessage$NicknameChanged";v.internalSpec={targetUserId:[1,d.TYPES.STRING],nickname:[2,d.TYPES.STRING]};w.name="MiTransportAdminMessage$ChatThemeChanged";w.internalSpec={themeName:[1,d.TYPES.STRING],themeEmoji:[2,d.TYPES.STRING],themeType:[3,d.TYPES.INT32]};g.MiTransportAdminMessage$LimitSharingChanged$SharingType=c;g.MiTransportAdminMessage$GroupImageChanged$Action=e;g.MiTransportAdminMessage$MessagePinned$Action=f;g.MiTransportAdminMessage$GroupMembershipAddModeChanged$Mode=b;g.MiTransportAdminMessage$GroupAdminChanged$Action=h;g.MiTransportAdminMessage$GroupParticipantChanged$Action=a;g.MiTransportAdminMessageSpec=i;g.MiTransportAdminMessage$LimitSharingChangedSpec=j;g.MiTransportAdminMessage$DisappearingSettingChangedSpec=k;g.MiTransportAdminMessage$IconChangedSpec=l;g.MiTransportAdminMessage$LinkCtaSpec=m;g.MiTransportAdminMessage$LinkCta$UkOsaAdminTextSpec=n;g.MiTransportAdminMessage$QuickReactionChangedSpec=o;g.MiTransportAdminMessage$GroupImageChangedSpec=p;g.MiTransportAdminMessage$MessagePinnedSpec=q;g.MiTransportAdminMessage$GroupMembershipAddModeChangedSpec=r;g.MiTransportAdminMessage$GroupNameChangedSpec=s;g.MiTransportAdminMessage$GroupAdminChangedSpec=t;g.MiTransportAdminMessage$GroupParticipantChangedSpec=u;g.MiTransportAdminMessage$NicknameChangedSpec=v;g.MiTransportAdminMessage$ChatThemeChangedSpec=w}),98);
__d("WAArmadilloTransportEvent.pb",["$InternalEnum","WAProtoConst"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({NONE:0,DETECTED:1,CLEARED:2});c=b("$InternalEnum")({NONE:0,ADDED:1,REMOVED:2,REPLACED:3});e=b("$InternalEnum")({DECRYPTION_FAILURE:1,UNAVAILABLE_MESSAGE:2});f={};b={};var h={},i={},j={};f.name="TransportEvent";f.internalSpec={placeholder:[1,(d=d("WAProtoConst")).TYPES.MESSAGE,j],event:[2,d.TYPES.MESSAGE,b],__oneofs__:{content:["placeholder","event"]}};b.name="TransportEvent$Event";b.internalSpec={deviceChange:[1,d.TYPES.MESSAGE,i],icdcAlert:[2,d.TYPES.MESSAGE,h],__oneofs__:{event:["deviceChange","icdcAlert"]}};h.name="TransportEvent$Event$IcdcAlert";h.internalSpec={type:[1,d.TYPES.ENUM,a]};i.name="TransportEvent$Event$DeviceChange";i.internalSpec={type:[1,d.TYPES.ENUM,c],deviceName:[2,d.TYPES.STRING],devicePlatform:[3,d.TYPES.STRING],deviceModel:[4,d.TYPES.STRING]};j.name="TransportEvent$Placeholder";j.internalSpec={type:[1,d.TYPES.ENUM,e]};g.TransportEvent$Event$IcdcAlert$Type=a;g.TransportEvent$Event$DeviceChange$Type=c;g.TransportEvent$Placeholder$Type=e;g.TransportEventSpec=f;g.TransportEvent$EventSpec=b;g.TransportEvent$Event$IcdcAlertSpec=h;g.TransportEvent$Event$DeviceChangeSpec=i;g.TransportEvent$PlaceholderSpec=j}),98);
__d("WAConsumerApplication.pb",["WACommon.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){var h;a={SMALL:1,MEDIUM:2,LARGE:3};b={SANS_SERIF:0,SERIF:1,NORICAN_REGULAR:2,BRYNDAN_WRITE:3,BEBASNEUE_REGULAR:4,OSWALD_HEAVY:5};c={NONE:0,VIDEO:1};e={};f={};var i={},j={},k={},l={},m={},n={},o={},p={},q={},r={},s={},t={},u={},v={},w={},x={},y={},z={},A={},B={},C={},D={},E={},F={},G={},H={},I={},J={},K={},L={},M={};e.name="ConsumerApplication";e.internalSpec={payload:[1,(h=d("WAProtoConst")).TYPES.MESSAGE,f],metadata:[2,h.TYPES.MESSAGE,j]};f.name="ConsumerApplication$Payload";f.internalSpec={content:[1,h.TYPES.MESSAGE,m],applicationData:[2,h.TYPES.MESSAGE,l],signal:[3,h.TYPES.MESSAGE,k],subProtocol:[4,h.TYPES.MESSAGE,i],__oneofs__:{payload:["content","applicationData","signal","subProtocol"]}};i.name="ConsumerApplication$SubProtocolPayload";i.internalSpec={futureProof:[1,h.TYPES.ENUM,(d=d("WACommon.pb")).FUTURE_PROOF_BEHAVIOR]};j.name="ConsumerApplication$Metadata";j.internalSpec={specialTextSize:[1,h.TYPES.ENUM,a]};k.name="ConsumerApplication$Signal";k.internalSpec={};l.name="ConsumerApplication$ApplicationData";l.internalSpec={revoke:[1,h.TYPES.MESSAGE,v],__oneofs__:{applicationContent:["revoke"]}};m.name="ConsumerApplication$Content";m.internalSpec={messageText:[1,h.TYPES.MESSAGE,d.MessageTextSpec],imageMessage:[2,h.TYPES.MESSAGE,I],contactMessage:[3,h.TYPES.MESSAGE,A],locationMessage:[4,h.TYPES.MESSAGE,D],extendedTextMessage:[5,h.TYPES.MESSAGE,C],statusTextMessage:[6,h.TYPES.MESSAGE,B],documentMessage:[7,h.TYPES.MESSAGE,F],audioMessage:[8,h.TYPES.MESSAGE,H],videoMessage:[9,h.TYPES.MESSAGE,G],contactsArrayMessage:[10,h.TYPES.MESSAGE,z],liveLocationMessage:[11,h.TYPES.MESSAGE,y],stickerMessage:[12,h.TYPES.MESSAGE,E],groupInviteMessage:[13,h.TYPES.MESSAGE,x],viewOnceMessage:[14,h.TYPES.MESSAGE,w],reactionMessage:[16,h.TYPES.MESSAGE,u],pollCreationMessage:[17,h.TYPES.MESSAGE,s],pollUpdateMessage:[18,h.TYPES.MESSAGE,r],editMessage:[19,h.TYPES.MESSAGE,n],__oneofs__:{content:["messageText","imageMessage","contactMessage","locationMessage","extendedTextMessage","statusTextMessage","documentMessage","audioMessage","videoMessage","contactsArrayMessage","liveLocationMessage","stickerMessage","groupInviteMessage","viewOnceMessage","reactionMessage","pollCreationMessage","pollUpdateMessage","editMessage"]}};n.name="ConsumerApplication$EditMessage";n.internalSpec={key:[1,h.TYPES.MESSAGE,d.MessageKeySpec],message:[2,h.TYPES.MESSAGE,d.MessageTextSpec],timestampMs:[3,h.TYPES.INT64]};o.name="ConsumerApplication$PollAddOptionMessage";o.internalSpec={pollOption:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,t]};p.name="ConsumerApplication$PollVoteMessage";p.internalSpec={selectedOptions:[1,h.FLAGS.REPEATED|h.TYPES.BYTES],senderTimestampMs:[2,h.TYPES.INT64]};q.name="ConsumerApplication$PollEncValue";q.internalSpec={encPayload:[1,h.TYPES.BYTES],encIv:[2,h.TYPES.BYTES]};r.name="ConsumerApplication$PollUpdateMessage";r.internalSpec={pollCreationMessageKey:[1,h.TYPES.MESSAGE,d.MessageKeySpec],vote:[2,h.TYPES.MESSAGE,q],addOption:[3,h.TYPES.MESSAGE,q]};s.name="ConsumerApplication$PollCreationMessage";s.internalSpec={encKey:[1,h.TYPES.BYTES],name:[2,h.TYPES.STRING],options:[3,h.FLAGS.REPEATED|h.TYPES.MESSAGE,t],selectableOptionsCount:[4,h.TYPES.UINT32]};t.name="ConsumerApplication$Option";t.internalSpec={optionName:[1,h.TYPES.STRING]};u.name="ConsumerApplication$ReactionMessage";u.internalSpec={key:[1,h.TYPES.MESSAGE,d.MessageKeySpec],text:[2,h.TYPES.STRING],groupingKey:[3,h.TYPES.STRING],senderTimestampMs:[4,h.TYPES.INT64],reactionMetadataDataclassData:[5,h.TYPES.STRING],style:[6,h.TYPES.INT32]};v.name="ConsumerApplication$RevokeMessage";v.internalSpec={key:[1,h.TYPES.MESSAGE,d.MessageKeySpec]};w.name="ConsumerApplication$ViewOnceMessage";w.internalSpec={imageMessage:[1,h.TYPES.MESSAGE,I],videoMessage:[2,h.TYPES.MESSAGE,G],__oneofs__:{viewOnceContent:["imageMessage","videoMessage"]}};x.name="ConsumerApplication$GroupInviteMessage";x.internalSpec={groupJid:[1,h.TYPES.STRING],inviteCode:[2,h.TYPES.STRING],inviteExpiration:[3,h.TYPES.INT64],groupName:[4,h.TYPES.STRING],jpegThumbnail:[5,h.TYPES.BYTES],caption:[6,h.TYPES.MESSAGE,d.MessageTextSpec]};y.name="ConsumerApplication$LiveLocationMessage";y.internalSpec={location:[1,h.TYPES.MESSAGE,L],accuracyInMeters:[2,h.TYPES.UINT32],speedInMps:[3,h.TYPES.FLOAT],degreesClockwiseFromMagneticNorth:[4,h.TYPES.UINT32],caption:[5,h.TYPES.MESSAGE,d.MessageTextSpec],sequenceNumber:[6,h.TYPES.INT64],timeOffset:[7,h.TYPES.UINT32]};z.name="ConsumerApplication$ContactsArrayMessage";z.internalSpec={displayName:[1,h.TYPES.STRING],contacts:[2,h.FLAGS.REPEATED|h.TYPES.MESSAGE,A]};A.name="ConsumerApplication$ContactMessage";A.internalSpec={contact:[1,h.TYPES.MESSAGE,d.SubProtocolSpec]};B.name="ConsumerApplication$StatusTextMesage";B.internalSpec={text:[1,h.TYPES.MESSAGE,C],textArgb:[6,h.TYPES.FIXED32],backgroundArgb:[7,h.TYPES.FIXED32],font:[8,h.TYPES.ENUM,b]};C.name="ConsumerApplication$ExtendedTextMessage";C.internalSpec={text:[1,h.TYPES.MESSAGE,d.MessageTextSpec],matchedText:[2,h.TYPES.STRING],canonicalUrl:[3,h.TYPES.STRING],description:[4,h.TYPES.STRING],title:[5,h.TYPES.STRING],thumbnail:[6,h.TYPES.MESSAGE,d.SubProtocolSpec],previewType:[7,h.TYPES.ENUM,c]};D.name="ConsumerApplication$LocationMessage";D.internalSpec={location:[1,h.TYPES.MESSAGE,L],address:[2,h.TYPES.STRING]};E.name="ConsumerApplication$StickerMessage";E.internalSpec={sticker:[1,h.TYPES.MESSAGE,d.SubProtocolSpec]};F.name="ConsumerApplication$DocumentMessage";F.internalSpec={document:[1,h.TYPES.MESSAGE,d.SubProtocolSpec],fileName:[2,h.TYPES.STRING]};G.name="ConsumerApplication$VideoMessage";G.internalSpec={video:[1,h.TYPES.MESSAGE,d.SubProtocolSpec],caption:[2,h.TYPES.MESSAGE,d.MessageTextSpec]};H.name="ConsumerApplication$AudioMessage";H.internalSpec={audio:[1,h.TYPES.MESSAGE,d.SubProtocolSpec],ptt:[2,h.TYPES.BOOL]};I.name="ConsumerApplication$ImageMessage";I.internalSpec={image:[1,h.TYPES.MESSAGE,d.SubProtocolSpec],caption:[2,h.TYPES.MESSAGE,d.MessageTextSpec]};J.name="ConsumerApplication$InteractiveAnnotation";J.internalSpec={polygonVertices:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,K],location:[2,h.TYPES.MESSAGE,L],__oneofs__:{action:["location"]}};K.name="ConsumerApplication$Point";K.internalSpec={x:[1,h.TYPES.DOUBLE],y:[2,h.TYPES.DOUBLE]};L.name="ConsumerApplication$Location";L.internalSpec={degreesLatitude:[1,h.TYPES.DOUBLE],degreesLongitude:[2,h.TYPES.DOUBLE],name:[3,h.TYPES.STRING]};M.name="ConsumerApplication$MediaPayload";M.internalSpec={protocol:[1,h.TYPES.MESSAGE,d.SubProtocolSpec]};g.CONSUMER_APPLICATION_METADATA_SPECIAL_TEXT_SIZE=a;g.CONSUMER_APPLICATION_STATUS_TEXT_MESAGE_FONT_TYPE=b;g.CONSUMER_APPLICATION_EXTENDED_TEXT_MESSAGE_PREVIEW_TYPE=c;g.ConsumerApplicationSpec=e;g.ConsumerApplication$PayloadSpec=f;g.ConsumerApplication$SubProtocolPayloadSpec=i;g.ConsumerApplication$MetadataSpec=j;g.ConsumerApplication$SignalSpec=k;g.ConsumerApplication$ApplicationDataSpec=l;g.ConsumerApplication$ContentSpec=m;g.ConsumerApplication$EditMessageSpec=n;g.ConsumerApplication$PollAddOptionMessageSpec=o;g.ConsumerApplication$PollVoteMessageSpec=p;g.ConsumerApplication$PollEncValueSpec=q;g.ConsumerApplication$PollUpdateMessageSpec=r;g.ConsumerApplication$PollCreationMessageSpec=s;g.ConsumerApplication$OptionSpec=t;g.ConsumerApplication$ReactionMessageSpec=u;g.ConsumerApplication$RevokeMessageSpec=v;g.ConsumerApplication$ViewOnceMessageSpec=w;g.ConsumerApplication$GroupInviteMessageSpec=x;g.ConsumerApplication$LiveLocationMessageSpec=y;g.ConsumerApplication$ContactsArrayMessageSpec=z;g.ConsumerApplication$ContactMessageSpec=A;g.ConsumerApplication$StatusTextMesageSpec=B;g.ConsumerApplication$ExtendedTextMessageSpec=C;g.ConsumerApplication$LocationMessageSpec=D;g.ConsumerApplication$StickerMessageSpec=E;g.ConsumerApplication$DocumentMessageSpec=F;g.ConsumerApplication$VideoMessageSpec=G;g.ConsumerApplication$AudioMessageSpec=H;g.ConsumerApplication$ImageMessageSpec=I;g.ConsumerApplication$InteractiveAnnotationSpec=J;g.ConsumerApplication$PointSpec=K;g.ConsumerApplication$LocationSpec=L;g.ConsumerApplication$MediaPayloadSpec=M}),98);
__d("WAMediaTransport.pb",["WACommon.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){var h;a={NONE:0,LQ_4K:1,HQ_4K:2};b={NONE:0,GIPHY:1,TENOR:2};c={TALKING_A:0,IDLE_A:1,TALKING_B:2,IDLE_B:3,BACKGROUND:4};e={UNKNOWN:0,OPUS:1};f={};var i={},j={},k={},l={},m={},n={},o={},p={},q={},r={},s={},t={},u={},v={},w={},x={},y={},z={},A={},B={},C={},D={},E={},F={};f.name="WAMediaTransport";f.internalSpec={integral:[1,(h=d("WAProtoConst")).TYPES.MESSAGE,l],ancillary:[2,h.TYPES.MESSAGE,i]};i.name="WAMediaTransport$Ancillary";i.internalSpec={fileLength:[1,h.TYPES.UINT64],mimetype:[2,h.TYPES.STRING],thumbnail:[3,h.TYPES.MESSAGE,j],objectId:[4,h.TYPES.STRING]};j.name="WAMediaTransport$Ancillary$Thumbnail";j.internalSpec={jpegThumbnail:[1,h.TYPES.BYTES],downloadableThumbnail:[2,h.TYPES.MESSAGE,k],thumbnailWidth:[3,h.TYPES.UINT32],thumbnailHeight:[4,h.TYPES.UINT32]};k.name="WAMediaTransport$Ancillary$Thumbnail$DownloadableThumbnail";k.internalSpec={fileSha256:[1,h.TYPES.BYTES],fileEncSha256:[2,h.TYPES.BYTES],directPath:[3,h.TYPES.STRING],mediaKey:[4,h.TYPES.BYTES],mediaKeyTimestamp:[5,h.TYPES.INT64],objectId:[6,h.TYPES.STRING],thumbnailScansSidecar:[7,h.TYPES.BYTES],thumbnailScanLengths:[8,h.FLAGS.REPEATED|h.TYPES.UINT32]};l.name="WAMediaTransport$Integral";l.internalSpec={fileSha256:[1,h.TYPES.BYTES],mediaKey:[2,h.TYPES.BYTES],fileEncSha256:[3,h.TYPES.BYTES],directPath:[4,h.TYPES.STRING],mediaKeyTimestamp:[5,h.TYPES.INT64]};m.name="ImageTransport";m.internalSpec={integral:[1,h.TYPES.MESSAGE,o],ancillary:[2,h.TYPES.MESSAGE,n]};n.name="ImageTransport$Ancillary";n.internalSpec={height:[1,h.TYPES.UINT32],width:[2,h.TYPES.UINT32],scansSidecar:[3,h.TYPES.BYTES],scanLengths:[4,h.FLAGS.REPEATED|h.TYPES.UINT32],midQualityFileSha256:[5,h.TYPES.BYTES],hdType:[6,h.TYPES.ENUM,a],memoriesConceptScores:[7,h.FLAGS.REPEATED|h.FLAGS.PACKED|h.TYPES.FLOAT],memoriesConceptIds:[8,h.FLAGS.REPEATED|h.FLAGS.PACKED|h.TYPES.UINT32]};o.name="ImageTransport$Integral";o.internalSpec={transport:[1,h.TYPES.MESSAGE,f]};p.name="VideoTransport";p.internalSpec={integral:[1,h.TYPES.MESSAGE,r],ancillary:[2,h.TYPES.MESSAGE,q]};q.name="VideoTransport$Ancillary";q.internalSpec={seconds:[1,h.TYPES.UINT32],caption:[2,h.TYPES.MESSAGE,d("WACommon.pb").MessageTextSpec],gifPlayback:[3,h.TYPES.BOOL],height:[4,h.TYPES.UINT32],width:[5,h.TYPES.UINT32],sidecar:[6,h.TYPES.BYTES],gifAttribution:[7,h.TYPES.ENUM,b],accessibilityLabel:[8,h.TYPES.STRING],isHd:[9,h.TYPES.BOOL]};r.name="VideoTransport$Integral";r.internalSpec={transport:[1,h.TYPES.MESSAGE,f]};s.name="AudioTransport";s.internalSpec={integral:[1,h.TYPES.MESSAGE,w],ancillary:[2,h.TYPES.MESSAGE,t]};t.name="AudioTransport$Ancillary";t.internalSpec={seconds:[1,h.TYPES.UINT32],avatarAudio:[2,h.TYPES.MESSAGE,u]};u.name="AudioTransport$Ancillary$AvatarAudio";u.internalSpec={poseId:[1,h.TYPES.UINT32],avatarAnimations:[2,h.FLAGS.REPEATED|h.TYPES.MESSAGE,v]};v.name="AudioTransport$Ancillary$AvatarAudio$DownloadableAvatarAnimations";v.internalSpec={fileSha256:[1,h.TYPES.BYTES],fileEncSha256:[2,h.TYPES.BYTES],directPath:[3,h.TYPES.STRING],mediaKey:[4,h.TYPES.BYTES],mediaKeyTimestamp:[5,h.TYPES.INT64],objectId:[6,h.TYPES.STRING],animationsType:[7,h.TYPES.ENUM,c]};w.name="AudioTransport$Integral";w.internalSpec={transport:[1,h.TYPES.MESSAGE,f],audioFormat:[2,h.TYPES.ENUM,e]};x.name="DocumentTransport";x.internalSpec={integral:[1,h.TYPES.MESSAGE,z],ancillary:[2,h.TYPES.MESSAGE,y]};y.name="DocumentTransport$Ancillary";y.internalSpec={pageCount:[1,h.TYPES.UINT32]};z.name="DocumentTransport$Integral";z.internalSpec={transport:[1,h.TYPES.MESSAGE,f]};A.name="StickerTransport";A.internalSpec={integral:[1,h.TYPES.MESSAGE,C],ancillary:[2,h.TYPES.MESSAGE,B]};B.name="StickerTransport$Ancillary";B.internalSpec={pageCount:[1,h.TYPES.UINT32],height:[2,h.TYPES.UINT32],width:[3,h.TYPES.UINT32],firstFrameLength:[4,h.TYPES.UINT32],firstFrameSidecar:[5,h.TYPES.BYTES],mustacheText:[6,h.TYPES.STRING],isThirdParty:[7,h.TYPES.BOOL],receiverFetchId:[8,h.TYPES.STRING],accessibilityLabel:[9,h.TYPES.STRING]};C.name="StickerTransport$Integral";C.internalSpec={transport:[1,h.TYPES.MESSAGE,f],isAnimated:[2,h.TYPES.BOOL],receiverFetchId:[3,h.TYPES.STRING]};D.name="ContactTransport";D.internalSpec={integral:[1,h.TYPES.MESSAGE,F],ancillary:[2,h.TYPES.MESSAGE,E]};E.name="ContactTransport$Ancillary";E.internalSpec={displayName:[1,h.TYPES.STRING]};F.name="ContactTransport$Integral";F.internalSpec={vcard:[1,h.TYPES.STRING],downloadableVcard:[2,h.TYPES.MESSAGE,f],__oneofs__:{contact:["vcard","downloadableVcard"]}};g.IMAGE_TRANSPORT_ANCILLARY_HD_TYPE=a;g.VIDEO_TRANSPORT_ANCILLARY_ATTRIBUTION=b;g.AUDIO_TRANSPORT_ANCILLARY_AVATAR_AUDIO_ANIMATIONS_TYPE=c;g.AUDIO_TRANSPORT_INTEGRAL_AUDIO_FORMAT=e;g.WAMediaTransportSpec=f;g.WAMediaTransport$AncillarySpec=i;g.WAMediaTransport$Ancillary$ThumbnailSpec=j;g.WAMediaTransport$Ancillary$Thumbnail$DownloadableThumbnailSpec=k;g.WAMediaTransport$IntegralSpec=l;g.ImageTransportSpec=m;g.ImageTransport$AncillarySpec=n;g.ImageTransport$IntegralSpec=o;g.VideoTransportSpec=p;g.VideoTransport$AncillarySpec=q;g.VideoTransport$IntegralSpec=r;g.AudioTransportSpec=s;g.AudioTransport$AncillarySpec=t;g.AudioTransport$Ancillary$AvatarAudioSpec=u;g.AudioTransport$Ancillary$AvatarAudio$DownloadableAvatarAnimationsSpec=v;g.AudioTransport$IntegralSpec=w;g.DocumentTransportSpec=x;g.DocumentTransport$AncillarySpec=y;g.DocumentTransport$IntegralSpec=z;g.StickerTransportSpec=A;g.StickerTransport$AncillarySpec=B;g.StickerTransport$IntegralSpec=C;g.ContactTransportSpec=D;g.ContactTransport$AncillarySpec=E;g.ContactTransport$IntegralSpec=F}),98);
__d("WAMsgApplication.pb",["WACommon.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){var h;a={DEFAULT:0,VANISH_MODE:1,DISAPPEARING_MESSAGES:2};b={UNKNOWN:0,SEEN_ONCE:1,SEEN_BASED_WITH_TIMER:2,SEND_BASED_WITH_TIMER:3};c={};e={};f={};var i={},j={},k={},l={},m={},n={},o={};c.name="MessageApplication";c.internalSpec={payload:[1,(h=d("WAProtoConst")).TYPES.MESSAGE,j],metadata:[2,h.TYPES.MESSAGE,e]};e.name="MessageApplication$Metadata";e.internalSpec={forwardingScore:[5,h.TYPES.UINT32],isForwarded:[6,h.TYPES.BOOL],businessMetadata:[7,h.TYPES.MESSAGE,(d=d("WACommon.pb")).SubProtocolSpec],frankingKey:[8,h.TYPES.BYTES],frankingVersion:[9,h.TYPES.INT32],quotedMessage:[10,h.TYPES.MESSAGE,f],threadType:[11,h.TYPES.ENUM,a],readonlyMetadataDataclass:[12,h.TYPES.STRING],groupId:[13,h.TYPES.STRING],groupSize:[14,h.TYPES.UINT32],groupIndex:[15,h.TYPES.UINT32],botResponseId:[16,h.TYPES.STRING],collapsibleId:[17,h.TYPES.STRING],secondaryOtid:[18,h.TYPES.STRING],chatEphemeralSetting:[1,h.TYPES.MESSAGE,o],ephemeralSettingList:[2,h.TYPES.MESSAGE,i],ephemeralSharedSecret:[3,h.TYPES.BYTES],__oneofs__:{ephemeral:["chatEphemeralSetting","ephemeralSettingList","ephemeralSharedSecret"]}};f.name="MessageApplication$Metadata$QuotedMessage";f.internalSpec={stanzaId:[1,h.TYPES.STRING],remoteJid:[2,h.TYPES.STRING],participant:[3,h.TYPES.STRING],payload:[4,h.TYPES.MESSAGE,j]};i.name="MessageApplication$Metadata$EphemeralSettingMap";i.internalSpec={chatJid:[1,h.TYPES.STRING],ephemeralSetting:[2,h.TYPES.MESSAGE,o]};j.name="MessageApplication$Payload";j.internalSpec={coreContent:[1,h.TYPES.MESSAGE,n],signal:[2,h.TYPES.MESSAGE,m],applicationData:[3,h.TYPES.MESSAGE,l],subProtocol:[4,h.TYPES.MESSAGE,k],__oneofs__:{content:["coreContent","signal","applicationData","subProtocol"]}};k.name="MessageApplication$SubProtocolPayload";k.internalSpec={futureProof:[1,h.TYPES.ENUM,d.FUTURE_PROOF_BEHAVIOR],consumerMessage:[2,h.TYPES.MESSAGE,d.SubProtocolSpec],businessMessage:[3,h.TYPES.MESSAGE,d.SubProtocolSpec],paymentMessage:[4,h.TYPES.MESSAGE,d.SubProtocolSpec],multiDevice:[5,h.TYPES.MESSAGE,d.SubProtocolSpec],voip:[6,h.TYPES.MESSAGE,d.SubProtocolSpec],armadillo:[7,h.TYPES.MESSAGE,d.SubProtocolSpec],__oneofs__:{subProtocol:["consumerMessage","businessMessage","paymentMessage","multiDevice","voip","armadillo"]}};l.name="MessageApplication$ApplicationData";l.internalSpec={};m.name="MessageApplication$Signal";m.internalSpec={};n.name="MessageApplication$Content";n.internalSpec={};o.name="MessageApplication$EphemeralSetting";o.internalSpec={ephemeralExpiration:[2,h.TYPES.UINT32],ephemeralSettingTimestamp:[3,h.TYPES.INT64],ephemeralityType:[5,h.TYPES.ENUM,b],isEphemeralSettingReset:[4,h.TYPES.BOOL]};g.MESSAGE_APPLICATION_METADATA_THREAD_TYPE=a;g.MESSAGE_APPLICATION_EPHEMERAL_SETTING_EPHEMERALITY_TYPE=b;g.MessageApplicationSpec=c;g.MessageApplication$MetadataSpec=e;g.MessageApplication$Metadata$QuotedMessageSpec=f;g.MessageApplication$Metadata$EphemeralSettingMapSpec=i;g.MessageApplication$PayloadSpec=j;g.MessageApplication$SubProtocolPayloadSpec=k;g.MessageApplication$ApplicationDataSpec=l;g.MessageApplication$SignalSpec=m;g.MessageApplication$ContentSpec=n;g.MessageApplication$EphemeralSettingSpec=o}),98);
__d("WAParseMessageApplication",["decodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b,c,e=a.payload;if(e==null)return{version:"v3",type:"error",error:"The messageApplication has no payload"};if(d("decodeProtobuf").getUnknownFields(a.payload)!=null)return{version:"v3",type:"error",error:"There are unknown fields in the message application payload"};e=e.subProtocol;if(e==null)return{version:"v3",type:"error",error:"The messageApplication payload has no subProtocol"};if(d("decodeProtobuf").getUnknownFields(e)!=null)return{version:"v3",type:"error",error:"messageApplication subProtocol has unknown fields",futureProof:e.futureProof};e=[];b=(b=a.payload)==null?void 0:(b=b.subProtocol)==null?void 0:b.consumerMessage;c=(c=a.payload)==null?void 0:(c=c.subProtocol)==null?void 0:c.armadillo;a=(a=a.payload)==null?void 0:(a=a.subProtocol)==null?void 0:a.multiDevice;if(b!=null){if(b.payload==null)return{version:"v3",type:"error",error:"subprotocol of type consumerMessage has no payload"};e.push({payload:new Uint8Array(b.payload),type:"success",subprotocolType:"consumerMessage"})}if(c!=null){if(c.payload==null)return{version:"v3",type:"error",error:"subprotocol of type armadillo has no payload"};e.push({payload:new Uint8Array(c.payload),type:"success",subprotocolType:"armadillo"})}if(a!=null){if(a.payload==null)return{version:"v3",type:"error",error:"subprotocol of type multiDevice has no payload"};e.push({payload:new Uint8Array(a.payload),type:"success",subprotocolType:"multiDevice"})}return e.length!==1?{version:"v3",type:"error",error:"Wrong number of subprotocols: "+e.length}:e[0]}g.parseMessageApplication=a}),98);
__d("lastx",["invariant"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){var b=null;if(Array.isArray(a))a.length&&(b={value:a[a.length-1]});else for(a of a)b=b||{},b.value=a;if(b)return b.value;h(0,1145)}g["default"]=a}),98);
__d("MultiKeyMap",["invariant","lastx"],(function(a,b,c,d,e,f,g,h){"use strict";var i=typeof WeakMap==="function";a=function(){function a(){this.$1=this.$2(),this.$3=null}var b=a.prototype;b.set=function(a,b){this.$4(a);var c=this.$1;for(var d=0;d<a.length-1;d++){var e=a[d],f=this.$5(c,e).get(e);f==null&&(f=this.$2(),this.$5(c,e).set(e,f));f.type==="map"||h(0,1732);c=f}e=a[a.length-1];this.$5(c,e).set(e,{type:"value",value:b})};b.get=function(a){this.$4(a);var b=this.$6(a);b=b&&b.get(c("lastx")(a));return b==null||b.type!=="value"?void 0:b.value};b["delete"]=function(a){this.$4(a);var b=this.$6(a);return b?b["delete"](c("lastx")(a)):!1};b.$5=function(a,b){return j(b)?a.cache:a.weakCache};b.$6=function(a){var b=this.$1;for(var d=0;d<a.length-1;d++){var e,f=a[d];if(((e=b)==null?void 0:e.type)==="map")b=this.$5(b,f).get(f);else return void 0}e=c("lastx")(a);f=b&&this.$5(b,e);return f};b.$2=function(){return{type:"map",cache:new Map(),weakCache:i?new WeakMap():new Map()}};b.$4=function(a){this.$3==null&&(this.$3=a.length);if(this.$3!==a.length)throw new Error("MultiKeyMap called with different number of keys");if(a.length<1)throw new Error("MultiKeyMap called with empty array of keys")};return a}();function j(a){var b=typeof a;return b==="number"||b==="string"||b==="boolean"||a==null}g["default"]=a}),98);
__d("memoizeWithArgsWeak",["MultiKeyMap"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b===void 0;var d=new(c("MultiKeyMap"))();return function(){for(var b=arguments.length,c=new Array(b),e=0;e<b;e++)c[e]=arguments[e];var f=d.get(c);if(f!==void 0)return f;var g=a.apply(void 0,c);d.set(c,g);return g}}g["default"]=a}),98);
__d("MAWProtobufDeserializers",["FBLogger","WAArmadilloApplication.pb","WAArmadilloBackupMessage.pb","WAArmadilloLocallyTransformedMessage.pb","WAArmadilloMiTransportAdminMessage.pb","WAArmadilloTransportEvent.pb","WAByteArray","WAConsumerApplication.pb","WAMediaTransport.pb","WAMsgApplication.pb","WAParseMessageApplication","decodeProtobuf","memoize","memoizeWithArgsWeak","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";function h(a){if(a instanceof ArrayBuffer)return a;else return d("WAByteArray").uint8ArrayToBuffer(a)}var i=function(a){var b;this.kind="imageTransport";this.payload=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").ImageTransportSpec,(b=a.image)==null?void 0:b.payload);this.caption=a.caption},j=function(a){var b;this.kind="audioTransport";this.payload=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").AudioTransportSpec,(b=a.audio)==null?void 0:b.payload);this.ptt=a.ptt},k=function(a){var b;this.kind="videoTransport";this.payload=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").VideoTransportSpec,(b=a.video)==null?void 0:b.payload);this.caption=a.caption},l=function(a){var b;this.kind="documentTransport";this.payload=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").DocumentTransportSpec,(b=a.document)==null?void 0:b.payload);this.fileName=a.fileName},m=function(a){this.kind="stickerTransport";this.payload=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").StickerTransportSpec,(a=a.sticker)==null?void 0:a.payload)},n=function(a){var b=this;this.kind="extendedContentMessage";this.favicon=c("memoize")(function(){var a;return((a=b.payload)==null?void 0:(a=a.favicon)==null?void 0:a.payload)==null?null:d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").ImageTransportSpec,(a=b.payload)==null?void 0:(a=a.favicon)==null?void 0:a.payload)});this.headerImage=c("memoize")(function(){var a;return((a=b.payload)==null?void 0:(a=a.headerImage)==null?void 0:a.payload)==null?null:d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").ImageTransportSpec,(a=b.payload)==null?void 0:(a=a.headerImage)==null?void 0:a.payload)});this.previews=c("memoize")(function(){var a;return(a=(a=b.payload)==null?void 0:(a=a.previews)==null?void 0:a.map(function(a){return d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").ImageTransportSpec,a.payload)}))!=null?a:[]});this.payload=a},o=function(){function a(a){this.kind="armadillo",this.bytes=h(a),this.proto=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloApplication.pb").ArmadilloSpec,a),this.payload=this.proto.payload,this.metadata=this.proto.metadata}var b=a.prototype;b.extendedContentMessage=function(){var a;a=(a=this.payload)==null?void 0:(a=a.content)==null?void 0:a.extendedContentMessage;return a==null?null:new n(a)};return a}(),p=function(a){var b=this,e;this.kind="consumerApplication";this.imageMessage=(e=c("memoize"))(function(){var a;a=(a=b.payload)==null?void 0:(a=a.content)==null?void 0:a.imageMessage;if(a==null)return;return new i(a)});this.audioMessage=e(function(){var a;a=(a=b.payload)==null?void 0:(a=a.content)==null?void 0:a.audioMessage;if(a==null)return;return new j(a)});this.videoMessage=e(function(){var a;a=(a=b.payload)==null?void 0:(a=a.content)==null?void 0:a.videoMessage;if(a==null)return;return new k(a)});this.documentMessage=e(function(){var a;a=(a=b.payload)==null?void 0:(a=a.content)==null?void 0:a.documentMessage;if(a==null)return;return new l(a)});this.stickerMessage=e(function(){var a;a=(a=b.payload)==null?void 0:(a=a.content)==null?void 0:a.stickerMessage;if(a==null)return;return new m(a)});this.bytes=h(a);this.proto=d("decodeProtobuf").decodeProtobuf(d("WAConsumerApplication.pb").ConsumerApplicationSpec,a);this.payload=this.proto.payload;this.metadata=this.proto.metadata},q=function(){function a(a){var b=this;this.kind="messageApplication";this.subProtocol=c("memoize")(function(){var a=d("WAParseMessageApplication").parseMessageApplication(b.proto);if(a.payload!=null){var c=a.payload;switch(a.subprotocolType){case"consumerMessage":return new p(c);case"armadillo":return new o(c);case"businessMessage":case"paymentMessage":case"multiDevice":case"voip":break;default:a.subprotocolType}}});this.bytes=h(a);this.proto=d("decodeProtobuf").decodeProtobuf(d("WAMsgApplication.pb").MessageApplicationSpec,a)}var b=a.prototype;b.consumerMessage=function(){var a=this.subProtocol();return(a==null?void 0:a.kind)!=="consumerApplication"?null:a};b.armadillo=function(){var a=this.subProtocol();return(a==null?void 0:a.kind)!=="armadillo"?null:a};return a}(),r=function(a){this.kind="transportEvent",this.proto=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloTransportEvent.pb").TransportEventSpec,a)},s=function(a){this.kind="locallyTransformedMessage",this.proto=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloLocallyTransformedMessage.pb").LocallyTransformedMessageSpec,a)},t=function(a){this.kind="adminMessage",this.proto=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessageSpec,a)},u="SKIP_CACHE",v=function(){function a(a,b){var e=this;this.payload=c("memoize")(function(){if(e.proto.encryptedTransportEvent!=null)return new r(c("nullthrows")(e.proto.encryptedTransportEvent.payload));else if(e.proto.encryptedTransportLocallyTransformedMessage!=null)return new s(c("nullthrows")(e.proto.encryptedTransportLocallyTransformedMessage.payload));else if(e.proto.encryptedTransportMessage!=null)return new q(c("nullthrows")(e.proto.encryptedTransportMessage));else if(e.proto.miTransportAdminMessage!=null)return new t(c("nullthrows")(e.proto.miTransportAdminMessage.payload));throw c("FBLogger")("messenger_web").mustfixThrow("BackupMessage proto has no payload")});this.proto=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloBackupMessage.pb").BackupMessageSpec,a)}var b=a.prototype;b.encryptedTransportMessage=function(){var a=this.payload();if(a.kind!=="messageApplication")return;return a};b.encryptedTransportEvent=function(){var a=this.payload();if(a.kind!=="transportEvent")return;return a};b.locallyTransformedMessage=function(){var a=this.payload();if(a.kind!=="locallyTransformedMessage")return;return a};b.adminMessage=function(){var a=this.payload();if(a.kind!=="adminMessage")return;return a};return a}();v.create=c("memoizeWithArgsWeak")(function(a){return new v(a,u)});g.DeserializedExtendedContentMessage=n;g.DeserializedConsumerApplication=p;g.DeserializedMessageApplication=q;g.DeserializedTransportEvent=r;g.DeserializedLocallyTransformedMessage=s;g.DeserializedAdminMessage=t;g.DeserializedBackupMessage=v}),98);
__d("RavenMessagingState",[],(function(a,b,c,d,e,f){a=Object.freeze({PERMANENT:0,UNSEEN:1,SEEN:2,REPLAYED:3,EXPIRED:4});f["default"]=a}),66);
__d("MAWRavenUtils",["EphemeralMediaViewMode","MAWMsg","RavenMessagingState"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a){switch(a){case d("MAWMsg").MAWRavenMsgEphemeralMediaState.PERMANENT:return c("RavenMessagingState").PERMANENT;case d("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN:return c("RavenMessagingState").UNSEEN;case d("MAWMsg").MAWRavenMsgEphemeralMediaState.SEEN:return c("RavenMessagingState").SEEN;case d("MAWMsg").MAWRavenMsgEphemeralMediaState.REPLAYED:return c("RavenMessagingState").REPLAYED;case d("MAWMsg").MAWRavenMsgEphemeralMediaState.EXPIRED:return c("RavenMessagingState").EXPIRED}},i=function(a){switch(a){case d("MAWMsg").MAWRavenMsgEphemeralType.KEEP_IN_CHAT:return c("EphemeralMediaViewMode").PERMANENT;case d("MAWMsg").MAWRavenMsgEphemeralType.ALLOW_REPLAY:return c("EphemeralMediaViewMode").REPLAYABLE;case d("MAWMsg").MAWRavenMsgEphemeralType.VIEW_ONCE:return c("EphemeralMediaViewMode").READ_ONCE}};b=function(a,b){return{ephemeralMediaState:b,ephemeralMediaViewMode:i(a)}};function a(a,b){switch(b){case d("MAWMsg").MAWRavenMsgEphemeralType.VIEW_ONCE:return a===d("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN?c("RavenMessagingState").SEEN:h(a);case d("MAWMsg").MAWRavenMsgEphemeralType.ALLOW_REPLAY:if(a===d("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN)return c("RavenMessagingState").SEEN;else if(a===d("MAWMsg").MAWRavenMsgEphemeralMediaState.SEEN)return c("RavenMessagingState").REPLAYED;return h(a);case d("MAWMsg").MAWRavenMsgEphemeralType.KEEP_IN_CHAT:return h(a)}}g.getEphemeralMediaState=h;g.getEphemeralMediaViewMode=i;g.deriveRavenSettings=b;g.getNextRavenMessageEphemeralState=a}),98);
__d("MAWThreadBumpType",[],(function(a,b,c,d,e,f){"use strict";a="NO_UPDATE";b="LOCAL_ONLY";c="LOCAL_AND_SERVER";d=Object.freeze({LOCAL_AND_SERVER:c,LOCAL_ONLY:b,NO_UPDATE:a});f.THREAD_BUMP_TYPE=d}),66);
__d("MAWThreadUpdateType",[],(function(a,b,c,d,e,f){"use strict";a=0;b=1;c=2;d=3;e=Object.freeze({BUMP_THREAD:c,MARK_THREAD_AS_UNREAD:d,NO_SNIPPET_OR_ACTIVITY_TS_UPDATE:a,SNIPPET_ONLY:b});f.THREAD_UPDATE_TYPE=e}),66);
__d("MAWVaultMaterialsStorage",["FBLogger","MAWVaultMaterials","Promise","WebAsyncStorage"],(function(a,b,c,d,e,f,g){"use strict";var h,i="mw_exchange_vm";function j(){var a=d("MAWVaultMaterials").generateNewVaultMaterials(),e="newly-generated";return new(h||(h=b("Promise")))(function(b){c("WebAsyncStorage").getOrSetItem(i,a,function(f,g){if(f!=null){var h=c("FBLogger")("messenger_web");if(f instanceof Error)throw h.catching(f).mustfixThrow("Failed to store Vaulting Materials. %s",f.toString());else h.mustfix("Failed to store Vaulting Materials.")}g!==null&&(a=g,e="storage");b(d("MAWVaultMaterials").initializeVaultMaterials(a,e))})})}function a(){return d("MAWVaultMaterials").hasVaultBeenSetup()?(h||(h=b("Promise"))).resolve(d("MAWVaultMaterials").getVaultMaterials()):j()}g.setupVaultMaterials=a}),98);
__d("MWSetupDBEncryption",["BrowserLockManager","ExecutionEnvironment","FBLogger","MAWEncryptionIndexedDbV2","MAWKeychain","MWEARKeychainV3","Promise","WAResultOrError","asyncToGeneratorRuntime","getErrorSafe","justknobx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=function(a,b){return b()};function a(a){j=a}var k="mw_ear_db";function l(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{yield d("MAWEncryptionIndexedDbV2").makeEncryptionDB(a);return yield j("init_setup_keychain",function(){return c("MAWKeychain").init("global_ear",a)})}catch(e){var b=e instanceof Error?e:c("getErrorSafe")(e);c("FBLogger")("messenger_web").catching(b).mustfix("[%s] EAR setup error",String(a));return d("WAResultOrError").DEPRECATED_makeError("keychain-setup-failure",b)}});return m.apply(this,arguments)}function n(a){if(d("MAWEncryptionIndexedDbV2").getEncryptionDB()!=null&&d("MWEARKeychainV3").isKeychainInitialised("global_ear"))return(i||(i=b("Promise"))).resolve(d("WAResultOrError").makeResult(d("MWEARKeychainV3").getLatestVersion("global_ear")));if(c("BrowserLockManager")!=null)return new(i||(i=b("Promise")))(function(d,e){c("promiseDone")(c("BrowserLockManager").request(k,b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var b=(yield l(a));d(b)}catch(a){e(a)}})),function(a){},function(a){e(a)})});else return l(a)}function e(a,c){c===void 0&&(c=function(a){return!0});var d=null;return function(e){d==null&&(d=a(e).then(function(a){d=c(a)?(i||(i=b("Promise"))).resolve(a):null;return a})["catch"](function(a){d=null;throw a}));return d}}f=e(function(a){return n(a)},function(a){return(a==null?void 0:a.success)===!0});e=c("justknobx")._("2804")||(h||(h=c("ExecutionEnvironment"))).isInWorker?f:n;g.setPerformanceMeasurementTool=a;g.init=e}),98);
__d("MpsTypes",["$InternalEnum","WAStanzaUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a}function c(a){return a}function e(a){return a}function f(a){return d("WAStanzaUtils").toStanzaId(a)}function h(a){return a}function i(a){return a}function j(a){return a}var k=b("$InternalEnum").Mirrored(["Send","Receive"]);b=b("$InternalEnum")({Unknown:0,Noop:1,UpsertTopLevel:2,UpsertSupplemental:3,DeleteTopLevel:4,DeleteTopLevelWithPlaceholder:5,Preprocess:6,DeleteSupplemental:7,DeleteThread:8});g.toBytes=a;g.toTimestamp=c;g.toMessageId=e;g.messageIdToStanzaId=f;g.toThreadId=h;g.toSupplementalKey=i;g.fromSupplementalKey=j;g.InsertionSource=k;g.ActionType=b}),98);
__d("MpsToBridgeMessageId",["MAWDbMsg","MpsTypes","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return c("nullthrows")(d("MAWDbMsg").toMsgId(a+"_"+b+"_m"))}function b(a){a=a.split("_");var b=a[0];a=a[1];return{messageId:d("MpsTypes").toMessageId(a),threadId:d("MpsTypes").toThreadId(b)}}g.mpsToBridgeMsgId=a;g.bridgeMsgIdToMps=b}),98);
__d("MpsMessageToBridgeWrapper",["MAWProtobufDeserializers","MAWUserJidWrapper","MpsToBridgeMessageId","WAJids","WATimeUtils","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h=d("WAJids").createJidUtils({platform:"msgr"});a=function(){function a(a,b){this.message=a,this.topLevel=b}a.fromTopLevel=function(b){return new a(b,b)};a.fromSupplemental=function(b,e){var f=d("MAWProtobufDeserializers").DeserializedBackupMessage.create(b.payload);f={messageId:b.messageId,payload:b.payload,senderId:c("nullthrows")((f=f.proto.metadata)==null?void 0:f.senderId),threadId:e.threadId,timestampMs:b.timestampMs};return new a(f,e)};var b=a.prototype;b.getChatJid=function(){return d("WAJids").unsafeCoerceToChatJid(this.message.threadId)};b.getExternalId=function(){return this.message.messageId};b.getMsgId=function(){return d("MpsToBridgeMessageId").mpsToBridgeMsgId(this.message.threadId,this.message.messageId)};b.getSenderJid=function(){return h.toUserJid(this.message.senderId)};b.topLevelMetadata=function(){return a.fromTopLevel(this.topLevel)};b.isAuthorMe=function(){return d("WAJids").userIdFromJid(d("MAWUserJidWrapper").getMyUserJid())===this.message.senderId};b.getAuthor=function(){return this.isAuthorMe()?d("WAJids").AUTHOR_ME:this.getSenderJid()};b.getUnixTs=function(){return d("WATimeUtils").castMilliSecondsToUnixTime(this.message.timestampMs)};b.deserialize=function(){return d("MAWProtobufDeserializers").DeserializedBackupMessage.create(this.message.payload)};return a}();g.MpsMessageToBridgeWrapper=a}),98);
__d("MpsOverBridge",["MAWBridgeSendAndReceive"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){this.loadMessage=function(a){return d("MAWBridgeSendAndReceive").sendAndReceive("mps","mpsLoadMessage",a)},this.loadMessages=function(a){return d("MAWBridgeSendAndReceive").sendAndReceive("mps","mpsLoadMessages",a)},this.batchLoadMessages=function(a){return d("MAWBridgeSendAndReceive").sendAndReceive("mps","mpsBatchLoadMessages",a)},this.debugDbDump=function(){return d("MAWBridgeSendAndReceive").sendAndReceive("mps","mpsDebugDbDump")}},i;function a(){i==null&&(i=new h());return i}g.mps=a}),98);
__d("WAMapWithDefault",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,b!=null?this.$2=new Map(b):this.$2=new Map()}var b=a.prototype;b.size=function(){return this.$2.size};b.clear=function(){this.$2.clear()};b["delete"]=function(a){return this.$2["delete"](a)};b.get=function(a){var b=this.$2.get(a);if(b!=null)return b;else{b=this.$1(a);this.$2.set(a,b);return b}};b.keys=function(){return this.$2.keys()};b.entries=function(){return this.$2.entries()};b.update=function(b,c){c=new Map(this.$2).set(b,c(this.get(b)));return new a(this.$1,c)};b.toMap=function(){return new Map(this.$2)};return a}();f.MapWithDefault=a}),66);
__d("WAMediaHdType",[],(function(a,b,c,d,e,f,g){"use strict";a=0;b=1;c=2;d={HD_TYPE_NONE:a,HD_TYPE_LQ_4K:b,HD_TYPE_HQ_4K:c};g.HD_TYPE_NONE=a;g.HD_TYPE_LQ_4K=b;g.HD_TYPE_HQ_4K=c;g.HD_TYPE=d}),98);
__d("WAMediaQplHelper",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a==null||a<0||a>1e3*1024*1024)return"invalid_size";else if(a===0)return"size equal to 0KB";else if(a<=1*1024)return"size lower than 1 KB";else if(a<=50*1024)return"size between 1 KB and 50 KB";else if(a<=100*1024)return"size between 50 KB and 100 KB";else if(a<=500*1024)return"size between 100 KB and 500 KB";else if(a<=1*1024*1024)return"size between 500 KB and 1 MB";else if(a<=2*1024*1024)return"size between 1 MB and 2 MB";else if(a<=5*1024*1024)return"size between 2 MB and 5 MB";else if(a<=10*1024*1024)return"size between 5 MB and 10 MB";else if(a<=20*1024*1024)return"size between 10 MB and 20 MB";else if(a<=25*1024*1024)return"size between 20 MB and 25 MB";else if(a<=30*1024*1024)return"size between 25 MB and 30 MB";else if(a<=50*1024*1024)return"size between 30 MB and 50 MB";else if(a<=75*1024*1024)return"size between 50 MB and 75 MB";else if(a<=100*1024*1024)return"size between 75 MB and 100 MB";else return"size above 100 MB"}f.convertIntegerSizeToStringBucket=a}),66);
__d("getMediaTypeFromConsumerMessage",["WAMediaTransport.pb","decodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=a==null?void 0:(a=a.payload)==null?void 0:a.content;if((a==null?void 0:a.audioMessage)!=null)return"ptt";if((a==null?void 0:a.videoMessage)!=null){var b,c;b=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").VideoTransportSpec,a==null?void 0:(b=a.videoMessage)==null?void 0:(b=b.video)==null?void 0:b.payload);return(b==null?void 0:(c=b.ancillary)==null?void 0:c.gifPlayback)===!0||(b==null?void 0:(c=b.ancillary)==null?void 0:c.gifAttribution)!=null?"gif":"video"}if((a==null?void 0:a.documentMessage)!=null)return"document";if((a==null?void 0:a.stickerMessage)!=null)return"sticker";if((a==null?void 0:a.imageMessage)!=null)return"image";return}g.getMediaTypeFromConsumerMessage=a}),98);
__d("isInstamadilloEB",["qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("qex")._("670")===!0}g["default"]=a}),98);
__d("maybeConvertMessageTextMentionsV2ToV1",["WACommon.pb"],(function(a,b,c,d,e,f,g){function a(a){if(a==null||a.text==null||a.mentions==null||a.mentions.length===0)return a;var b=a.text,c=[],e=[],f=0;for(var g of a.mentions){var h=g.offset,i=g.length,j=g.mentionedJid,k=g.mentionType;if(k!==d("WACommon.pb").MENTION_MENTION_TYPE.PROFILE||h==null||i==null||j==null)continue;e.push(j+"@msgr");c.push(b.substring(f,h));c.push("@"+j+"@msgr");f=h+i}if(e.length===0)return a;c.push(b.substring(f));return babelHelpers["extends"]({},a,{text:c.join(""),mentionedJid:e,mentions:[]})}g["default"]=a}),98);
__d("updateAndFlushLSDataTrace",["FBLogger","I64","LSAppendDataTraceAddonStoredProcedure","LSDataTraceCheckPoint","LSFactory","LSIntEnum","Promise","ReQLTable","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=c("requireDeferred")("LSDataTraceFlush").__setRef("updateAndFlushLSDataTrace");function a(a,e){return e==null?(j||(j=b("Promise"))).resolve():c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").CLIENT_READY_TO_FLUSH),dataTraceId:e,syncChannel:(i||(i=d("I64"))).neg_one}).then(function(){return d("ReQLTable").update(a.data_trace_meta,[e],function(a){if(a!=null)return{contextOne:a.contextOne,contextThree:a.contextThree,contextTwo:a.contextTwo,foregroundTimestampMs:a.foregroundTimestampMs,initTimestampMs:a.initTimestampMs,predefinedId:a.predefinedId,shouldFlush:!0,traceId:a.traceId,traceType:a.traceType};else throw c("FBLogger")("messenger_web").mustfixThrow('Data trace is missing, id: "%s"',e)}).then(function(){return k.load().then(function(b){return b.flush(a,e)})})})}g["default"]=a}),98);/*FB_PKG_DELIM*/
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("core-util-is-1.0.2",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){function a(a){return Array.isArray?Array.isArray(a):p(a)==="[object Array]"}g.isArray=a;function b(a){return typeof a==="boolean"}g.isBoolean=b;function c(a){return a===null}g.isNull=c;function d(a){return a==null}g.isNullOrUndefined=d;function e(a){return typeof a==="number"}g.isNumber=e;function f(a){return typeof a==="string"}g.isString=f;function h(a){return typeof a==="symbol"}g.isSymbol=h;function i(a){return a===void 0}g.isUndefined=i;function j(a){return p(a)==="[object RegExp]"}g.isRegExp=j;function k(a){return typeof a==="object"&&a!==null}g.isObject=k;function l(a){return p(a)==="[object Date]"}g.isDate=l;function m(a){return p(a)==="[object Error]"||a instanceof Error}g.isError=m;function n(a){return typeof a==="function"}g.isFunction=n;function o(a){return a===null||typeof a==="boolean"||typeof a==="number"||typeof a==="string"||typeof a==="symbol"||typeof a==="undefined"}g.isPrimitive=o;g.isBuffer=Buffer.isBuffer;function p(a){return Object.prototype.toString.call(a)}}var j=!1;function k(){j||(j=!0,i());return h.exports}function a(a){switch(a){case void 0:return k()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("immediate-3.0.6",[],(function(a,b,c,d,e,f){"use strict";c={};var g={exports:c};function h(){var b=a.MutationObserver||a.WebKitMutationObserver,c;if(process.browser)if(b){var d=0;b=new b(j);var e=a.document.createTextNode("");b.observe(e,{characterData:!0});c=function(){e.data=d=++d%2}}else if(!a.setImmediate&&typeof a.MessageChannel!=="undefined"){var f=new a.MessageChannel();f.port1.onmessage=j;c=function(){f.port2.postMessage(0)}}else"document"in a&&"onreadystatechange"in a.document.createElement("script")?c=function(){var b=a.document.createElement("script");b.onreadystatechange=function(){j(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null};a.document.documentElement.appendChild(b)}:c=function(){setTimeout(j,0)};else c=function(){process.nextTick(j)};var h,i=[];function j(){h=!0;var a,b,c=i.length;while(c){b=i;i=[];a=-1;while(++a<c)b[a]();c=i.length}h=!1}g.exports=k;function k(a){i.push(a)===1&&!h&&c()}}var i=!1;function j(){i||(i=!0,h());return g.exports}function b(a){switch(a){case void 0:return j()}}e.exports=b}),null);
/**
 * License: https://www.facebook.com/legal/license/Hnt8PzozZpk/
 */
__d("inherits-2.0.3",[],(function(a,b,c,d,e,f){"use strict";b={};var g={exports:b};function h(){typeof Object.create==="function"?g.exports=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:g.exports=function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype;a.prototype=new c();a.prototype.constructor=a}}var i=!1;function j(){i||(i=!0,h());return g.exports}c={};var k={exports:c};function l(){try{var a={};if(typeof a.inherits!=="function")throw"";k.exports=a.inherits}catch(a){k.exports=j()}}var m=!1;function n(){m||(m=!0,l());return k.exports}function a(a){switch(a){case void 0:return n()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("isarray-1.0.0",[],(function(a,b,c,d,e,f){"use strict";b={};var g={exports:b};function h(){var a={}.toString;g.exports=Array.isArray||function(b){return a.call(b)=="[object Array]"}}var i=!1;function j(){i||(i=!0,h());return g.exports}function a(a){switch(a){case void 0:return j()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("lie-3.3.0",["immediate-3.0.6"],(function(a,b,c,d,e,f){"use strict";function a(a){return a&&typeof a==="object"&&"default"in a?a["default"]:a}var g=a(b("immediate-3.0.6"));d={};var h={exports:d};function i(){var a=g();function b(){}var c={},d=["REJECTED"],e=["FULFILLED"],f=["PENDING"];if(!process.browser)var i=["UNHANDLED"];h.exports=j;function j(a){if(typeof a!=="function")throw new TypeError("resolver must be a function");this.state=f;this.queue=[];this.outcome=void 0;process.browser||(this.handled=i);a!==b&&n(this,a)}j.prototype["finally"]=function(c){if(typeof c!=="function")return this;var d=this.constructor;return this.then(a,b);function a(a){function b(){return a}return d.resolve(c()).then(b)}function b(a){function b(){throw a}return d.resolve(c()).then(b)}};j.prototype["catch"]=function(a){return this.then(null,a)};j.prototype.then=function(a,c){if(typeof a!=="function"&&this.state===e||typeof c!=="function"&&this.state===d)return this;var g=new this.constructor(b);process.browser||this.handled===i&&(this.handled=null);if(this.state!==f){var h=this.state===e?a:c;l(g,h,this.outcome)}else this.queue.push(new k(g,a,c));return g};function k(a,b,c){this.promise=a,typeof b==="function"&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),typeof c==="function"&&(this.onRejected=c,this.callRejected=this.otherCallRejected)}k.prototype.callFulfilled=function(a){c.resolve(this.promise,a)};k.prototype.otherCallFulfilled=function(a){l(this.promise,this.onFulfilled,a)};k.prototype.callRejected=function(a){c.reject(this.promise,a)};k.prototype.otherCallRejected=function(a){l(this.promise,this.onRejected,a)};function l(b,d,e){a(function(){var a;try{a=d(e)}catch(a){return c.reject(b,a)}a===b?c.reject(b,new TypeError("Cannot resolve promise with itself")):c.resolve(b,a)})}c.resolve=function(a,b){var d=o(m,b);if(d.status==="error")return c.reject(a,d.value);d=d.value;if(d)n(a,d);else{a.state=e;a.outcome=b;d=-1;var f=a.queue.length;while(++d<f)a.queue[d].callFulfilled(b)}return a};c.reject=function(b,c){b.state=d;b.outcome=c;process.browser||b.handled===i&&a(function(){b.handled===i&&process.emit("unhandledRejection",c,b)});var e=-1,f=b.queue.length;while(++e<f)b.queue[e].callRejected(c);return b};function m(a){var b=a&&a.then;if(a&&(typeof a==="object"||typeof a==="function")&&typeof b==="function")return function(){b.apply(a,arguments)}}function n(a,b){var d=!1;function e(b){if(d)return;d=!0;c.reject(a,b)}function f(b){if(d)return;d=!0;c.resolve(a,b)}function g(){b(f,e)}g=o(g);g.status==="error"&&e(g.value)}function o(a,b){var c={};try{c.value=a(b),c.status="success"}catch(a){c.status="error",c.value=a}return c}j.resolve=p;function p(a){return a instanceof this?a:c.resolve(new this(b),a)}j.reject=q;function q(a){var d=new this(b);return c.reject(d,a)}j.all=r;function r(a){var d=this;if(Object.prototype.toString.call(a)!=="[object Array]")return this.reject(new TypeError("must be an array"));var e=a.length,f=!1;if(!e)return this.resolve([]);var g=new Array(e),h=0,i=-1,j=new this(b);while(++i<e)k(a[i],i);return j;function k(b,a){d.resolve(b).then(i,function(a){f||(f=!0,c.reject(j,a))});function i(b){g[a]=b,++h===e&&!f&&(f=!0,c.resolve(j,g))}}}j.race=s;function s(a){var d=this;if(Object.prototype.toString.call(a)!=="[object Array]")return this.reject(new TypeError("must be an array"));var e=a.length,f=!1;if(!e)return this.resolve([]);var g=-1,h=new this(b);while(++g<e)i(a[g]);return h;function i(a){d.resolve(a).then(function(a){f||(f=!0,c.resolve(h,a))},function(a){f||(f=!0,c.reject(h,a))})}}}var j=!1;function k(){j||(j=!0,i());return h.exports}function c(a){switch(a){case void 0:return k()}}e.exports=c}),null);
/**
 * License: https://www.facebook.com/legal/license/cr2jmG-CdKo/
 */
__d("pako-1.0.8",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){var a=typeof Uint8Array!=="undefined"&&typeof Uint16Array!=="undefined"&&typeof Int32Array!=="undefined";function b(a,b){return Object.prototype.hasOwnProperty.call(a,b)}g.assign=function(a){var c=Array.prototype.slice.call(arguments,1);while(c.length){var d=c.shift();if(!d)continue;if(typeof d!=="object")throw new TypeError(d+"must be non-object");for(var e in d)b(d,e)&&(a[e]=d[e])}return a};g.shrinkBuf=function(a,b){if(a.length===b)return a;if(a.subarray)return a.subarray(0,b);a.length=b;return a};var c={arraySet:function(a,b,c,d,e){if(b.subarray&&a.subarray){a.set(b.subarray(c,c+d),e);return}for(var f=0;f<d;f++)a[e+f]=b[c+f]},flattenChunks:function(a){var b,c,d,e,f;d=0;for(b=0,c=a.length;b<c;b++)d+=a[b].length;d=new Uint8Array(d);e=0;for(b=0,c=a.length;b<c;b++)f=a[b],d.set(f,e),e+=f.length;return d}},d={arraySet:function(a,b,c,d,e){for(var f=0;f<d;f++)a[e+f]=b[c+f]},flattenChunks:function(a){return[].concat.apply([],a)}};g.setTyped=function(a){a?(g.Buf8=Uint8Array,g.Buf16=Uint16Array,g.Buf32=Int32Array,g.assign(g,c)):(g.Buf8=Array,g.Buf16=Array,g.Buf32=Array,g.assign(g,d))};g.setTyped(a)}var j=!1;function k(){j||(j=!0,i());return h.exports}var l={},m={exports:l};function n(){var a=k(),b=4,c=0,d=1,e=2;function f(a){var b=a.length;while(--b>=0)a[b]=0}var g=0,h=1,i=2,j=3,m=258,n=29,o=256,p=o+1+n,q=30,r=19,aa=2*p+1,s=15,t=16,u=7,v=256,w=16,x=17,y=18,z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],A=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ba=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ca=512,C=new Array((p+2)*2);f(C);var da=new Array(q*2);f(da);var D=new Array(ca);f(D);var ea=new Array(m-j+1);f(ea);var fa=new Array(n);f(fa);var E=new Array(q);f(E);function ga(a,b,c,d,e){this.static_tree=a,this.extra_bits=b,this.extra_base=c,this.elems=d,this.max_length=e,this.has_stree=a&&a.length}var ha,F,G;function H(a,b){this.dyn_tree=a,this.max_code=0,this.stat_desc=b}function ia(a){return a<256?D[a]:D[256+(a>>>7)]}function ja(a,b){a.pending_buf[a.pending++]=b&255,a.pending_buf[a.pending++]=b>>>8&255}function I(a,b,c){a.bi_valid>t-c?(a.bi_buf|=b<<a.bi_valid&65535,ja(a,a.bi_buf),a.bi_buf=b>>t-a.bi_valid,a.bi_valid+=c-t):(a.bi_buf|=b<<a.bi_valid&65535,a.bi_valid+=c)}function J(a,b,c){I(a,c[b*2],c[b*2+1])}function ka(a,b){var c=0;do c|=a&1,a>>>=1,c<<=1;while(--b>0);return c>>>1}function la(a){a.bi_valid===16?(ja(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):a.bi_valid>=8&&(a.pending_buf[a.pending++]=a.bi_buf&255,a.bi_buf>>=8,a.bi_valid-=8)}function ma(a,b){var c=b.dyn_tree,d=b.max_code,e=b.stat_desc.static_tree,f=b.stat_desc.has_stree,g=b.stat_desc.extra_bits,h=b.stat_desc.extra_base;b=b.stat_desc.max_length;var i,j,k,l,m,n=0;for(k=0;k<=s;k++)a.bl_count[k]=0;c[a.heap[a.heap_max]*2+1]=0;for(i=a.heap_max+1;i<aa;i++){j=a.heap[i];k=c[c[j*2+1]*2+1]+1;k>b&&(k=b,n++);c[j*2+1]=k;if(j>d)continue;a.bl_count[k]++;l=0;j>=h&&(l=g[j-h]);m=c[j*2];a.opt_len+=m*(k+l);f&&(a.static_len+=m*(e[j*2+1]+l))}if(n===0)return;do{k=b-1;while(a.bl_count[k]===0)k--;a.bl_count[k]--;a.bl_count[k+1]+=2;a.bl_count[b]--;n-=2}while(n>0);for(k=b;k!==0;k--){j=a.bl_count[k];while(j!==0){m=a.heap[--i];if(m>d)continue;c[m*2+1]!==k&&(a.opt_len+=(k-c[m*2+1])*c[m*2],c[m*2+1]=k);j--}}}function na(a,b,c){var d=new Array(s+1),e=0,f;for(f=1;f<=s;f++)d[f]=e=e+c[f-1]<<1;for(f=0;f<=b;f++){c=a[f*2+1];if(c===0)continue;a[f*2]=ka(d[c]++,c)}}function K(){var a,b,c,d=new Array(s+1);b=0;for(c=0;c<n-1;c++){fa[c]=b;for(a=0;a<1<<z[c];a++)ea[b++]=c}ea[b-1]=c;b=0;for(c=0;c<16;c++){E[c]=b;for(a=0;a<1<<A[c];a++)D[b++]=c}b>>=7;for(;c<q;c++){E[c]=b<<7;for(a=0;a<1<<A[c]-7;a++)D[256+b++]=c}for(c=0;c<=s;c++)d[c]=0;a=0;while(a<=143)C[a*2+1]=8,a++,d[8]++;while(a<=255)C[a*2+1]=9,a++,d[9]++;while(a<=279)C[a*2+1]=7,a++,d[7]++;while(a<=287)C[a*2+1]=8,a++,d[8]++;na(C,p+1,d);for(a=0;a<q;a++)da[a*2+1]=5,da[a*2]=ka(a,5);ha=new ga(C,z,o+1,p,s);F=new ga(da,A,0,q,s);G=new ga(new Array(0),B,0,r,u)}function oa(a){var b;for(b=0;b<p;b++)a.dyn_ltree[b*2]=0;for(b=0;b<q;b++)a.dyn_dtree[b*2]=0;for(b=0;b<r;b++)a.bl_tree[b*2]=0;a.dyn_ltree[v*2]=1;a.opt_len=a.static_len=0;a.last_lit=a.matches=0}function L(a){a.bi_valid>8?ja(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0}function pa(b,c,d,e){L(b),e&&(ja(b,d),ja(b,~d)),a.arraySet(b.pending_buf,b.window,c,d,b.pending),b.pending+=d}function qa(a,b,c,d){var e=b*2,f=c*2;return a[e]<a[f]||a[e]===a[f]&&d[b]<=d[c]}function M(a,b,c){var d=a.heap[c],e=c<<1;while(e<=a.heap_len){e<a.heap_len&&qa(b,a.heap[e+1],a.heap[e],a.depth)&&e++;if(qa(b,d,a.heap[e],a.depth))break;a.heap[c]=a.heap[e];c=e;e<<=1}a.heap[c]=d}function ra(a,b,c){var d,e,f=0,g,h;if(a.last_lit!==0)do d=a.pending_buf[a.d_buf+f*2]<<8|a.pending_buf[a.d_buf+f*2+1],e=a.pending_buf[a.l_buf+f],f++,d===0?J(a,e,b):(g=ea[e],J(a,g+o+1,b),h=z[g],h!==0&&(e-=fa[g],I(a,e,h)),d--,g=ia(d),J(a,g,c),h=A[g],h!==0&&(d-=E[g],I(a,d,h)));while(f<a.last_lit);J(a,v,b)}function N(a,b){var c=b.dyn_tree,d=b.stat_desc.static_tree,e=b.stat_desc.has_stree,f=b.stat_desc.elems,g,h=-1,i;a.heap_len=0;a.heap_max=aa;for(g=0;g<f;g++)c[g*2]!==0?(a.heap[++a.heap_len]=h=g,a.depth[g]=0):c[g*2+1]=0;while(a.heap_len<2)i=a.heap[++a.heap_len]=h<2?++h:0,c[i*2]=1,a.depth[i]=0,a.opt_len--,e&&(a.static_len-=d[i*2+1]);b.max_code=h;for(g=a.heap_len>>1;g>=1;g--)M(a,c,g);i=f;do g=a.heap[1],a.heap[1]=a.heap[a.heap_len--],M(a,c,1),e=a.heap[1],a.heap[--a.heap_max]=g,a.heap[--a.heap_max]=e,c[i*2]=c[g*2]+c[e*2],a.depth[i]=(a.depth[g]>=a.depth[e]?a.depth[g]:a.depth[e])+1,c[g*2+1]=c[e*2+1]=i,a.heap[1]=i++,M(a,c,1);while(a.heap_len>=2);a.heap[--a.heap_max]=a.heap[1];ma(a,b);na(c,h,a.bl_count)}function O(a,b,c){var d,e=-1,f,g=b[0*2+1],h=0,i=7,j=4;g===0&&(i=138,j=3);b[(c+1)*2+1]=65535;for(d=0;d<=c;d++){f=g;g=b[(d+1)*2+1];if(++h<i&&f===g)continue;else h<j?a.bl_tree[f*2]+=h:f!==0?(f!==e&&a.bl_tree[f*2]++,a.bl_tree[w*2]++):h<=10?a.bl_tree[x*2]++:a.bl_tree[y*2]++;h=0;e=f;g===0?(i=138,j=3):f===g?(i=6,j=3):(i=7,j=4)}}function P(a,b,c){var d,e=-1,f,g=b[0*2+1],h=0,i=7,j=4;g===0&&(i=138,j=3);for(d=0;d<=c;d++){f=g;g=b[(d+1)*2+1];if(++h<i&&f===g)continue;else if(h<j)do J(a,f,a.bl_tree);while(--h!==0);else f!==0?(f!==e&&(J(a,f,a.bl_tree),h--),J(a,w,a.bl_tree),I(a,h-3,2)):h<=10?(J(a,x,a.bl_tree),I(a,h-3,3)):(J(a,y,a.bl_tree),I(a,h-11,7));h=0;e=f;g===0?(i=138,j=3):f===g?(i=6,j=3):(i=7,j=4)}}function Q(a){var b;O(a,a.dyn_ltree,a.l_desc.max_code);O(a,a.dyn_dtree,a.d_desc.max_code);N(a,a.bl_desc);for(b=r-1;b>=3;b--)if(a.bl_tree[ba[b]*2+1]!==0)break;a.opt_len+=3*(b+1)+5+5+4;return b}function sa(a,b,c,d){var e;I(a,b-257,5);I(a,c-1,5);I(a,d-4,4);for(e=0;e<d;e++)I(a,a.bl_tree[ba[e]*2+1],3);P(a,a.dyn_ltree,b-1);P(a,a.dyn_dtree,c-1)}function R(a){var b=4093624447,e;for(e=0;e<=31;e++,b>>>=1)if(b&1&&a.dyn_ltree[e*2]!==0)return c;if(a.dyn_ltree[9*2]!==0||a.dyn_ltree[10*2]!==0||a.dyn_ltree[13*2]!==0)return d;for(e=32;e<o;e++)if(a.dyn_ltree[e*2]!==0)return d;return c}var ta=!1;function S(a){ta||(K(),ta=!0),a.l_desc=new H(a.dyn_ltree,ha),a.d_desc=new H(a.dyn_dtree,F),a.bl_desc=new H(a.bl_tree,G),a.bi_buf=0,a.bi_valid=0,oa(a)}function T(a,b,c,d){I(a,(g<<1)+(d?1:0),3),pa(a,b,c,!0)}function U(a){I(a,h<<1,3),J(a,v,C),la(a)}function V(a,c,d,f){var g,j,k=0;a.level>0?(a.strm.data_type===e&&(a.strm.data_type=R(a)),N(a,a.l_desc),N(a,a.d_desc),k=Q(a),g=a.opt_len+3+7>>>3,j=a.static_len+3+7>>>3,j<=g&&(g=j)):g=j=d+5;d+4<=g&&c!==-1?T(a,c,d,f):a.strategy===b||j===g?(I(a,(h<<1)+(f?1:0),3),ra(a,C,da)):(I(a,(i<<1)+(f?1:0),3),sa(a,a.l_desc.max_code+1,a.d_desc.max_code+1,k+1),ra(a,a.dyn_ltree,a.dyn_dtree));oa(a);f&&L(a)}function W(a,b,c){a.pending_buf[a.d_buf+a.last_lit*2]=b>>>8&255;a.pending_buf[a.d_buf+a.last_lit*2+1]=b&255;a.pending_buf[a.l_buf+a.last_lit]=c&255;a.last_lit++;b===0?a.dyn_ltree[c*2]++:(a.matches++,b--,a.dyn_ltree[(ea[c]+o+1)*2]++,a.dyn_dtree[ia(b)*2]++);return a.last_lit===a.lit_bufsize-1}l._tr_init=S;l._tr_stored_block=T;l._tr_flush_block=V;l._tr_tally=W;l._tr_align=U}var o=!1;function p(){o||(o=!0,n());return m.exports}b={};var q={exports:b};function r(){function a(a,b,c,d){var e=a&65535|0;a=a>>>16&65535|0;var f;while(c!==0){f=c>2e3?2e3:c;c-=f;do e=e+b[d++]|0,a=a+e|0;while(--f);e%=65521;a%=65521}return e|a<<16|0}q.exports=a}var aa=!1;function s(){aa||(aa=!0,r());return q.exports}c={};var t={exports:c};function u(){function a(){var a,b=[];for(var c=0;c<256;c++){a=c;for(var d=0;d<8;d++)a=a&1?3988292384^a>>>1:a>>>1;b[c]=a}return b}var b=a();function c(a,c,d,e){var f=b;d=e+d;a^=-1;for(e=e;e<d;e++)a=a>>>8^f[(a^c[e])&255];return a^-1}t.exports=c}var v=!1;function w(){v||(v=!0,u());return t.exports}d={};var x={exports:d};function y(){x.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}}var z=!1;function A(){z||(z=!0,y());return x.exports}var B={},ba={exports:B};function ca(){var a=k(),b=p(),c=s(),d=w(),e=A(),f=0,g=1,h=3,i=4,j=5,l=0,m=1,n=-2,o=-3,q=-5,r=-1,aa=1,t=2,u=3,v=4,x=0,y=2,z=8,ba=9,ca=15,C=8,da=29,D=256,ea=D+1+da,fa=30,E=19,ga=2*ea+1,ha=15,F=3,G=258,H=G+F+1,ia=32,ja=42,I=69,J=73,ka=91,la=103,ma=113,na=666,K=1,oa=2,L=3,pa=4,qa=3;function M(a,b){a.msg=e[b];return b}function ra(a){return(a<<1)-(a>4?9:0)}function N(a){var b=a.length;while(--b>=0)a[b]=0}function O(b){var c=b.state,d=c.pending;d>b.avail_out&&(d=b.avail_out);if(d===0)return;a.arraySet(b.output,c.pending_buf,c.pending_out,d,b.next_out);b.next_out+=d;c.pending_out+=d;b.total_out+=d;b.avail_out-=d;c.pending-=d;c.pending===0&&(c.pending_out=0)}function P(a,c){b._tr_flush_block(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,c),a.block_start=a.strstart,O(a.strm)}function Q(a,b){a.pending_buf[a.pending++]=b}function sa(a,b){a.pending_buf[a.pending++]=b>>>8&255,a.pending_buf[a.pending++]=b&255}function R(b,e,f,g){var h=b.avail_in;h>g&&(h=g);if(h===0)return 0;b.avail_in-=h;a.arraySet(e,b.input,b.next_in,h,f);b.state.wrap===1?b.adler=c(b.adler,e,h,f):b.state.wrap===2&&(b.adler=d(b.adler,e,h,f));b.next_in+=h;b.total_in+=h;return h}function ta(a,b){var c=a.max_chain_length,d=a.strstart,e,f=a.prev_length,g=a.nice_match,h=a.strstart>a.w_size-H?a.strstart-(a.w_size-H):0,i=a.window,j=a.w_mask,k=a.prev,l=a.strstart+G,m=i[d+f-1],n=i[d+f];a.prev_length>=a.good_match&&(c>>=2);g>a.lookahead&&(g=a.lookahead);do{e=b;if(i[e+f]!==n||i[e+f-1]!==m||i[e]!==i[d]||i[++e]!==i[d+1])continue;d+=2;e++;do;while(i[++d]===i[++e]&&i[++d]===i[++e]&&i[++d]===i[++e]&&i[++d]===i[++e]&&i[++d]===i[++e]&&i[++d]===i[++e]&&i[++d]===i[++e]&&i[++d]===i[++e]&&d<l);e=G-(l-d);d=l-G;if(e>f){a.match_start=b;f=e;if(e>=g)break;m=i[d+f-1];n=i[d+f]}}while((b=k[b&j])>h&&--c!==0);return f<=a.lookahead?f:a.lookahead}function S(b){var c=b.w_size,d,e,f,g;do{g=b.window_size-b.lookahead-b.strstart;if(b.strstart>=c+(c-H)){a.arraySet(b.window,b.window,c,c,0);b.match_start-=c;b.strstart-=c;b.block_start-=c;e=b.hash_size;d=e;do f=b.head[--d],b.head[d]=f>=c?f-c:0;while(--e);e=c;d=e;do f=b.prev[--d],b.prev[d]=f>=c?f-c:0;while(--e);g+=c}if(b.strm.avail_in===0)break;e=R(b.strm,b.window,b.strstart+b.lookahead,g);b.lookahead+=e;if(b.lookahead+b.insert>=F){f=b.strstart-b.insert;b.ins_h=b.window[f];b.ins_h=(b.ins_h<<b.hash_shift^b.window[f+1])&b.hash_mask;while(b.insert){b.ins_h=(b.ins_h<<b.hash_shift^b.window[f+F-1])&b.hash_mask;b.prev[f&b.w_mask]=b.head[b.ins_h];b.head[b.ins_h]=f;f++;b.insert--;if(b.lookahead+b.insert<F)break}}}while(b.lookahead<H&&b.strm.avail_in!==0)}function T(a,b){var c=65535;c>a.pending_buf_size-5&&(c=a.pending_buf_size-5);for(;;){if(a.lookahead<=1){S(a);if(a.lookahead===0&&b===f)return K;if(a.lookahead===0)break}a.strstart+=a.lookahead;a.lookahead=0;var d=a.block_start+c;if(a.strstart===0||a.strstart>=d){a.lookahead=a.strstart-d;a.strstart=d;P(a,!1);if(a.strm.avail_out===0)return K}if(a.strstart-a.block_start>=a.w_size-H){P(a,!1);if(a.strm.avail_out===0)return K}}a.insert=0;if(b===i){P(a,!0);return a.strm.avail_out===0?L:pa}if(a.strstart>a.block_start){P(a,!1);if(a.strm.avail_out===0)return K}return K}function U(a,c){var d;for(;;){if(a.lookahead<H){S(a);if(a.lookahead<H&&c===f)return K;if(a.lookahead===0)break}d=0;a.lookahead>=F&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+F-1])&a.hash_mask,d=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);d!==0&&a.strstart-d<=a.w_size-H&&(a.match_length=ta(a,d));if(a.match_length>=F){d=b._tr_tally(a,a.strstart-a.match_start,a.match_length-F);a.lookahead-=a.match_length;if(a.match_length<=a.max_lazy_match&&a.lookahead>=F){a.match_length--;do a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+F-1])&a.hash_mask,a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(--a.match_length!==0);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+1])&a.hash_mask}else d=b._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(d){P(a,!1);if(a.strm.avail_out===0)return K}}a.insert=a.strstart<F-1?a.strstart:F-1;if(c===i){P(a,!0);return a.strm.avail_out===0?L:pa}if(a.last_lit){P(a,!1);if(a.strm.avail_out===0)return K}return oa}function V(a,c){var d,e;for(;;){if(a.lookahead<H){S(a);if(a.lookahead<H&&c===f)return K;if(a.lookahead===0)break}d=0;a.lookahead>=F&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+F-1])&a.hash_mask,d=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);a.prev_length=a.match_length;a.prev_match=a.match_start;a.match_length=F-1;d!==0&&a.prev_length<a.max_lazy_match&&a.strstart-d<=a.w_size-H&&(a.match_length=ta(a,d),a.match_length<=5&&(a.strategy===aa||a.match_length===F&&a.strstart-a.match_start>4096)&&(a.match_length=F-1));if(a.prev_length>=F&&a.match_length<=a.prev_length){d=a.strstart+a.lookahead-F;e=b._tr_tally(a,a.strstart-1-a.prev_match,a.prev_length-F);a.lookahead-=a.prev_length-1;a.prev_length-=2;do++a.strstart<=d&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+F-1])&a.hash_mask,a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(--a.prev_length!==0);a.match_available=0;a.match_length=F-1;a.strstart++;if(e){P(a,!1);if(a.strm.avail_out===0)return K}}else if(a.match_available){e=b._tr_tally(a,0,a.window[a.strstart-1]);e&&P(a,!1);a.strstart++;a.lookahead--;if(a.strm.avail_out===0)return K}else a.match_available=1,a.strstart++,a.lookahead--}a.match_available&&(b._tr_tally(a,0,a.window[a.strstart-1]),a.match_available=0);a.insert=a.strstart<F-1?a.strstart:F-1;if(c===i){P(a,!0);return a.strm.avail_out===0?L:pa}if(a.last_lit){P(a,!1);if(a.strm.avail_out===0)return K}return oa}function W(a,c){var d,e,g,h=a.window;for(;;){if(a.lookahead<=G){S(a);if(a.lookahead<=G&&c===f)return K;if(a.lookahead===0)break}a.match_length=0;if(a.lookahead>=F&&a.strstart>0){e=a.strstart-1;d=h[e];if(d===h[++e]&&d===h[++e]&&d===h[++e]){g=a.strstart+G;do;while(d===h[++e]&&d===h[++e]&&d===h[++e]&&d===h[++e]&&d===h[++e]&&d===h[++e]&&d===h[++e]&&d===h[++e]&&e<g);a.match_length=G-(g-e);a.match_length>a.lookahead&&(a.match_length=a.lookahead)}}a.match_length>=F?(d=b._tr_tally(a,1,a.match_length-F),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(d=b._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++);if(d){P(a,!1);if(a.strm.avail_out===0)return K}}a.insert=0;if(c===i){P(a,!0);return a.strm.avail_out===0?L:pa}if(a.last_lit){P(a,!1);if(a.strm.avail_out===0)return K}return oa}function X(a,c){var d;for(;;){if(a.lookahead===0){S(a);if(a.lookahead===0){if(c===f)return K;break}}a.match_length=0;d=b._tr_tally(a,0,a.window[a.strstart]);a.lookahead--;a.strstart++;if(d){P(a,!1);if(a.strm.avail_out===0)return K}}a.insert=0;if(c===i){P(a,!0);return a.strm.avail_out===0?L:pa}if(a.last_lit){P(a,!1);if(a.strm.avail_out===0)return K}return oa}function ua(a,b,c,d,e){this.good_length=a,this.max_lazy=b,this.nice_length=c,this.max_chain=d,this.func=e}var va;va=[new ua(0,0,0,0,T),new ua(4,4,8,4,U),new ua(4,5,16,8,U),new ua(4,6,32,32,U),new ua(4,4,16,16,V),new ua(8,16,32,32,V),new ua(8,16,128,128,V),new ua(8,32,128,256,V),new ua(32,128,258,1024,V),new ua(32,258,258,4096,V)];function wa(a){a.window_size=2*a.w_size,N(a.head),a.max_lazy_match=va[a.level].max_lazy,a.good_match=va[a.level].good_length,a.nice_match=va[a.level].nice_length,a.max_chain_length=va[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=F-1,a.match_available=0,a.ins_h=0}function Y(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=z,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(ga*2),this.dyn_dtree=new a.Buf16((2*fa+1)*2),this.bl_tree=new a.Buf16((2*E+1)*2),N(this.dyn_ltree),N(this.dyn_dtree),N(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(ha+1),this.heap=new a.Buf16(2*ea+1),N(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*ea+1),N(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function xa(a){var c;if(!a||!a.state)return M(a,n);a.total_in=a.total_out=0;a.data_type=y;c=a.state;c.pending=0;c.pending_out=0;c.wrap<0&&(c.wrap=-c.wrap);c.status=c.wrap?ja:ma;a.adler=c.wrap===2?0:1;c.last_flush=f;b._tr_init(c);return l}function Z(a){var b=xa(a);b===l&&wa(a.state);return b}function $(a,b){if(!a||!a.state)return n;if(a.state.wrap!==2)return n;a.state.gzhead=b;return l}function ya(b,c,d,e,f,g){if(!b)return n;var h=1;c===r&&(c=6);e<0?(h=0,e=-e):e>15&&(h=2,e-=16);if(f<1||f>ba||d!==z||e<8||e>15||c<0||c>9||g<0||g>v)return M(b,n);e===8&&(e=9);var i=new Y();b.state=i;i.strm=b;i.wrap=h;i.gzhead=null;i.w_bits=e;i.w_size=1<<i.w_bits;i.w_mask=i.w_size-1;i.hash_bits=f+7;i.hash_size=1<<i.hash_bits;i.hash_mask=i.hash_size-1;i.hash_shift=~~((i.hash_bits+F-1)/F);i.window=new a.Buf8(i.w_size*2);i.head=new a.Buf16(i.hash_size);i.prev=new a.Buf16(i.w_size);i.lit_bufsize=1<<f+6;i.pending_buf_size=i.lit_bufsize*4;i.pending_buf=new a.Buf8(i.pending_buf_size);i.d_buf=1*i.lit_bufsize;i.l_buf=(1+2)*i.lit_bufsize;i.level=c;i.strategy=g;i.method=d;return Z(b)}function za(a,b){return ya(a,b,z,ca,C,x)}function Aa(a,c){var e,k;if(!a||!a.state||c>j||c<0)return a?M(a,n):n;k=a.state;if(!a.output||!a.input&&a.avail_in!==0||k.status===na&&c!==i)return M(a,a.avail_out===0?q:n);k.strm=a;e=k.last_flush;k.last_flush=c;if(k.status===ja)if(k.wrap===2)a.adler=0,Q(k,31),Q(k,139),Q(k,8),!k.gzhead?(Q(k,0),Q(k,0),Q(k,0),Q(k,0),Q(k,0),Q(k,k.level===9?2:k.strategy>=t||k.level<2?4:0),Q(k,qa),k.status=ma):(Q(k,(k.gzhead.text?1:0)+(k.gzhead.hcrc?2:0)+(k.gzhead.extra?4:0)+(k.gzhead.name?8:0)+(k.gzhead.comment?16:0)),Q(k,k.gzhead.time&255),Q(k,k.gzhead.time>>8&255),Q(k,k.gzhead.time>>16&255),Q(k,k.gzhead.time>>24&255),Q(k,k.level===9?2:k.strategy>=t||k.level<2?4:0),Q(k,k.gzhead.os&255),k.gzhead.extra&&k.gzhead.extra.length&&(Q(k,k.gzhead.extra.length&255),Q(k,k.gzhead.extra.length>>8&255)),k.gzhead.hcrc&&(a.adler=d(a.adler,k.pending_buf,k.pending,0)),k.gzindex=0,k.status=I);else{var o=z+(k.w_bits-8<<4)<<8,p;k.strategy>=t||k.level<2?p=0:k.level<6?p=1:k.level===6?p=2:p=3;o|=p<<6;k.strstart!==0&&(o|=ia);o+=31-o%31;k.status=ma;sa(k,o);k.strstart!==0&&(sa(k,a.adler>>>16),sa(k,a.adler&65535));a.adler=1}if(k.status===I)if(k.gzhead.extra){p=k.pending;while(k.gzindex<(k.gzhead.extra.length&65535)){if(k.pending===k.pending_buf_size){k.gzhead.hcrc&&k.pending>p&&(a.adler=d(a.adler,k.pending_buf,k.pending-p,p));O(a);p=k.pending;if(k.pending===k.pending_buf_size)break}Q(k,k.gzhead.extra[k.gzindex]&255);k.gzindex++}k.gzhead.hcrc&&k.pending>p&&(a.adler=d(a.adler,k.pending_buf,k.pending-p,p));k.gzindex===k.gzhead.extra.length&&(k.gzindex=0,k.status=J)}else k.status=J;if(k.status===J)if(k.gzhead.name){p=k.pending;do{if(k.pending===k.pending_buf_size){k.gzhead.hcrc&&k.pending>p&&(a.adler=d(a.adler,k.pending_buf,k.pending-p,p));O(a);p=k.pending;if(k.pending===k.pending_buf_size){o=1;break}}k.gzindex<k.gzhead.name.length?o=k.gzhead.name.charCodeAt(k.gzindex++)&255:o=0;Q(k,o)}while(o!==0);k.gzhead.hcrc&&k.pending>p&&(a.adler=d(a.adler,k.pending_buf,k.pending-p,p));o===0&&(k.gzindex=0,k.status=ka)}else k.status=ka;if(k.status===ka)if(k.gzhead.comment){p=k.pending;do{if(k.pending===k.pending_buf_size){k.gzhead.hcrc&&k.pending>p&&(a.adler=d(a.adler,k.pending_buf,k.pending-p,p));O(a);p=k.pending;if(k.pending===k.pending_buf_size){o=1;break}}k.gzindex<k.gzhead.comment.length?o=k.gzhead.comment.charCodeAt(k.gzindex++)&255:o=0;Q(k,o)}while(o!==0);k.gzhead.hcrc&&k.pending>p&&(a.adler=d(a.adler,k.pending_buf,k.pending-p,p));o===0&&(k.status=la)}else k.status=la;k.status===la&&(k.gzhead.hcrc?(k.pending+2>k.pending_buf_size&&O(a),k.pending+2<=k.pending_buf_size&&(Q(k,a.adler&255),Q(k,a.adler>>8&255),a.adler=0,k.status=ma)):k.status=ma);if(k.pending!==0){O(a);if(a.avail_out===0){k.last_flush=-1;return l}}else if(a.avail_in===0&&ra(c)<=ra(e)&&c!==i)return M(a,q);if(k.status===na&&a.avail_in!==0)return M(a,q);if(a.avail_in!==0||k.lookahead!==0||c!==f&&k.status!==na){p=k.strategy===t?X(k,c):k.strategy===u?W(k,c):va[k.level].func(k,c);(p===L||p===pa)&&(k.status=na);if(p===K||p===L){a.avail_out===0&&(k.last_flush=-1);return l}if(p===oa){c===g?b._tr_align(k):c!==j&&(b._tr_stored_block(k,0,0,!1),c===h&&(N(k.head),k.lookahead===0&&(k.strstart=0,k.block_start=0,k.insert=0)));O(a);if(a.avail_out===0){k.last_flush=-1;return l}}}if(c!==i)return l;if(k.wrap<=0)return m;k.wrap===2?(Q(k,a.adler&255),Q(k,a.adler>>8&255),Q(k,a.adler>>16&255),Q(k,a.adler>>24&255),Q(k,a.total_in&255),Q(k,a.total_in>>8&255),Q(k,a.total_in>>16&255),Q(k,a.total_in>>24&255)):(sa(k,a.adler>>>16),sa(k,a.adler&65535));O(a);k.wrap>0&&(k.wrap=-k.wrap);return k.pending!==0?l:m}function Ba(a){var b;if(!a||!a.state)return n;b=a.state.status;if(b!==ja&&b!==I&&b!==J&&b!==ka&&b!==la&&b!==ma&&b!==na)return M(a,n);a.state=null;return b===ma?M(a,o):l}function Ca(b,d){var e=d.length,f,g,h,i,j;if(!b||!b.state)return n;f=b.state;g=f.wrap;if(g===2||g===1&&f.status!==ja||f.lookahead)return n;g===1&&(b.adler=c(b.adler,d,e,0));f.wrap=0;e>=f.w_size&&(g===0&&(N(f.head),f.strstart=0,f.block_start=0,f.insert=0),j=new a.Buf8(f.w_size),a.arraySet(j,d,e-f.w_size,f.w_size,0),d=j,e=f.w_size);j=b.avail_in;h=b.next_in;i=b.input;b.avail_in=e;b.next_in=0;b.input=d;S(f);while(f.lookahead>=F){e=f.strstart;d=f.lookahead-(F-1);do f.ins_h=(f.ins_h<<f.hash_shift^f.window[e+F-1])&f.hash_mask,f.prev[e&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=e,e++;while(--d);f.strstart=e;f.lookahead=F-1;S(f)}f.strstart+=f.lookahead;f.block_start=f.strstart;f.insert=f.lookahead;f.lookahead=0;f.match_length=f.prev_length=F-1;f.match_available=0;b.next_in=h;b.input=i;b.avail_in=j;f.wrap=g;return l}B.deflateInit=za;B.deflateInit2=ya;B.deflateReset=Z;B.deflateResetKeep=xa;B.deflateSetHeader=$;B.deflate=Aa;B.deflateEnd=Ba;B.deflateSetDictionary=Ca;B.deflateInfo="pako deflate (from Nodeca project)"}var C=!1;function da(){C||(C=!0,ca());return ba.exports}var D={},ea={exports:D};function fa(){var a=k(),b=!0,c=!0;try{String.fromCharCode.apply(null,[0])}catch(a){b=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(a){c=!1}var d=new a.Buf8(256);for(var e=0;e<256;e++)d[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;d[254]=d[254]=1;D.string2buf=function(b){var c,d,e,f,g,h=b.length,i=0;for(f=0;f<h;f++)d=b.charCodeAt(f),(d&64512)===55296&&f+1<h&&(e=b.charCodeAt(f+1),(e&64512)===56320&&(d=65536+(d-55296<<10)+(e-56320),f++)),i+=d<128?1:d<2048?2:d<65536?3:4;c=new a.Buf8(i);for(g=0,f=0;g<i;f++)d=b.charCodeAt(f),(d&64512)===55296&&f+1<h&&(e=b.charCodeAt(f+1),(e&64512)===56320&&(d=65536+(d-55296<<10)+(e-56320),f++)),d<128?c[g++]=d:d<2048?(c[g++]=192|d>>>6,c[g++]=128|d&63):d<65536?(c[g++]=224|d>>>12,c[g++]=128|d>>>6&63,c[g++]=128|d&63):(c[g++]=240|d>>>18,c[g++]=128|d>>>12&63,c[g++]=128|d>>>6&63,c[g++]=128|d&63);return c};function f(d,e){if(e<65534&&(d.subarray&&c||!d.subarray&&b))return String.fromCharCode.apply(null,a.shrinkBuf(d,e));var f="";for(var g=0;g<e;g++)f+=String.fromCharCode(d[g]);return f}D.buf2binstring=function(a){return f(a,a.length)};D.binstring2buf=function(b){var c=new a.Buf8(b.length);for(var d=0,e=c.length;d<e;d++)c[d]=b.charCodeAt(d);return c};D.buf2string=function(a,b){var c,e,g,h;b=b||a.length;var i=new Array(b*2);for(e=0,c=0;c<b;){g=a[c++];if(g<128){i[e++]=g;continue}h=d[g];if(h>4){i[e++]=65533;c+=h-1;continue}g&=h===2?31:h===3?15:7;while(h>1&&c<b)g=g<<6|a[c++]&63,h--;if(h>1){i[e++]=65533;continue}g<65536?i[e++]=g:(g-=65536,i[e++]=55296|g>>10&1023,i[e++]=56320|g&1023)}return f(i,e)};D.utf8border=function(a,b){var c;b=b||a.length;b>a.length&&(b=a.length);c=b-1;while(c>=0&&(a[c]&192)===128)c--;if(c<0)return b;return c===0?b:c+d[a[c]]>b?c:b}}var E=!1;function ga(){E||(E=!0,fa());return ea.exports}f={};var ha={exports:f};function F(){function a(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}ha.exports=a}var G=!1;function H(){G||(G=!0,F());return ha.exports}var ia={},ja={exports:ia};function I(){var a=da(),b=k(),c=ga(),d=A(),e=H(),f=Object.prototype.toString,g=0,h=4,i=0,j=1,l=2,m=-1,n=0,o=8;function p(g){if(!(this instanceof p))return new p(g);this.options=b.assign({level:m,method:o,chunkSize:16384,windowBits:15,memLevel:8,strategy:n,to:""},g||{});g=this.options;g.raw&&g.windowBits>0?g.windowBits=-g.windowBits:g.gzip&&g.windowBits>0&&g.windowBits<16&&(g.windowBits+=16);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new e();this.strm.avail_out=0;var h=a.deflateInit2(this.strm,g.level,g.method,g.windowBits,g.memLevel,g.strategy);if(h!==i)throw new Error(d[h]);g.header&&a.deflateSetHeader(this.strm,g.header);if(g.dictionary){var j;typeof g.dictionary==="string"?j=c.string2buf(g.dictionary):f.call(g.dictionary)==="[object ArrayBuffer]"?j=new Uint8Array(g.dictionary):j=g.dictionary;h=a.deflateSetDictionary(this.strm,j);if(h!==i)throw new Error(d[h]);this._dict_set=!0}}p.prototype.push=function(d,e){var k=this.strm,m=this.options.chunkSize;if(this.ended)return!1;e=e===~~e?e:e===!0?h:g;typeof d==="string"?k.input=c.string2buf(d):f.call(d)==="[object ArrayBuffer]"?k.input=new Uint8Array(d):k.input=d;k.next_in=0;k.avail_in=k.input.length;do{k.avail_out===0&&(k.output=new b.Buf8(m),k.next_out=0,k.avail_out=m);d=a.deflate(k,e);if(d!==j&&d!==i){this.onEnd(d);this.ended=!0;return!1}(k.avail_out===0||k.avail_in===0&&(e===h||e===l))&&(this.options.to==="string"?this.onData(c.buf2binstring(b.shrinkBuf(k.output,k.next_out))):this.onData(b.shrinkBuf(k.output,k.next_out)))}while((k.avail_in>0||k.avail_out===0)&&d!==j);if(e===h){d=a.deflateEnd(this.strm);this.onEnd(d);this.ended=!0;return d===i}if(e===l){this.onEnd(i);k.avail_out=0;return!0}return!0};p.prototype.onData=function(a){this.chunks.push(a)};p.prototype.onEnd=function(a){a===i&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=b.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};function q(a,b){b=new p(b);b.push(a,!0);if(b.err)throw b.msg||d[b.err];return b.result}function r(a,b){b=b||{};b.raw=!0;return q(a,b)}function aa(a,b){b=b||{};b.gzip=!0;return q(a,b)}ia.Deflate=p;ia.deflate=q;ia.deflateRaw=r;ia.gzip=aa}var J=!1;function ka(){J||(J=!0,I());return ja.exports}b={};var la={exports:b};function ma(){var a=30,b=12;la.exports=function(c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,aa,s,t,u,v,w,x,y,z,A;e=c.state;f=c.next_in;z=c.input;g=f+(c.avail_in-5);h=c.next_out;A=c.output;d=h-(d-c.avail_out);i=h+(c.avail_out-257);j=e.dmax;k=e.wsize;l=e.whave;m=e.wnext;n=e.window;o=e.hold;p=e.bits;q=e.lencode;r=e.distcode;aa=(1<<e.lenbits)-1;s=(1<<e.distbits)-1;top:do{p<15&&(o+=z[f++]<<p,p+=8,o+=z[f++]<<p,p+=8);t=q[o&aa];dolen:for(;;){u=t>>>24;o>>>=u;p-=u;u=t>>>16&255;if(u===0)A[h++]=t&65535;else if(u&16){v=t&65535;u&=15;u&&(p<u&&(o+=z[f++]<<p,p+=8),v+=o&(1<<u)-1,o>>>=u,p-=u);p<15&&(o+=z[f++]<<p,p+=8,o+=z[f++]<<p,p+=8);t=r[o&s];dodist:for(;;){u=t>>>24;o>>>=u;p-=u;u=t>>>16&255;if(u&16){w=t&65535;u&=15;p<u&&(o+=z[f++]<<p,p+=8,p<u&&(o+=z[f++]<<p,p+=8));w+=o&(1<<u)-1;if(w>j){c.msg="invalid distance too far back";e.mode=a;break top}o>>>=u;p-=u;u=h-d;if(w>u){u=w-u;if(u>l&&e.sane){c.msg="invalid distance too far back";e.mode=a;break top}x=0;y=n;if(m===0){x+=k-u;if(u<v){v-=u;do A[h++]=n[x++];while(--u);x=h-w;y=A}}else if(m<u){x+=k+m-u;u-=m;if(u<v){v-=u;do A[h++]=n[x++];while(--u);x=0;if(m<v){u=m;v-=u;do A[h++]=n[x++];while(--u);x=h-w;y=A}}}else{x+=m-u;if(u<v){v-=u;do A[h++]=n[x++];while(--u);x=h-w;y=A}}while(v>2)A[h++]=y[x++],A[h++]=y[x++],A[h++]=y[x++],v-=3;v&&(A[h++]=y[x++],v>1&&(A[h++]=y[x++]))}else{x=h-w;do A[h++]=A[x++],A[h++]=A[x++],A[h++]=A[x++],v-=3;while(v>2);v&&(A[h++]=A[x++],v>1&&(A[h++]=A[x++]))}}else if((u&64)===0){t=r[(t&65535)+(o&(1<<u)-1)];continue dodist}else{c.msg="invalid distance code";e.mode=a;break top}break}}else if((u&64)===0){t=q[(t&65535)+(o&(1<<u)-1)];continue dolen}else if(u&32){e.mode=b;break top}else{c.msg="invalid literal/length code";e.mode=a;break top}break}}while(f<g&&h<i);v=p>>3;f-=v;p-=v<<3;o&=(1<<p)-1;c.next_in=f;c.next_out=h;c.avail_in=f<g?5+(g-f):5-(f-g);c.avail_out=h<i?257+(i-h):257-(h-i);e.hold=o;e.bits=p;return}}var na=!1;function K(){na||(na=!0,ma());return la.exports}c={};var oa={exports:c};function L(){var a=k(),b=15,c=852,d=592,e=0,f=1,g=2,h=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],j=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];oa.exports=function(k,m,n,o,p,q,r,aa){var s=aa.bits,t,u,v,w,x,y,z,A,B,ba,ca,C,da,D,ea=0,fa,E=new a.Buf16(b+1),ga=new a.Buf16(b+1),ha=0,F,G,H;for(t=0;t<=b;t++)E[t]=0;for(u=0;u<o;u++)E[m[n+u]]++;s=s;for(w=b;w>=1;w--)if(E[w]!==0)break;s>w&&(s=w);if(w===0){p[q++]=1<<24|64<<16|0;p[q++]=1<<24|64<<16|0;aa.bits=1;return 0}for(v=1;v<w;v++)if(E[v]!==0)break;s<v&&(s=v);z=1;for(t=1;t<=b;t++){z<<=1;z-=E[t];if(z<0)return-1}if(z>0&&(k===e||w!==1))return-1;ga[1]=0;for(t=1;t<b;t++)ga[t+1]=ga[t]+E[t];for(u=0;u<o;u++)m[n+u]!==0&&(r[ga[m[n+u]]++]=u);k===e?(ga=o=r,fa=19):k===f?(ga=h,ea-=257,o=i,ha-=257,fa=256):(ga=j,o=l,fa=-1);B=0;u=0;t=v;D=q;x=s;y=0;C=-1;A=1<<s;da=A-1;if(k===f&&A>c||k===g&&A>d)return 1;for(;;){F=t-y;r[u]<fa?(G=0,H=r[u]):r[u]>fa?(G=o[ha+r[u]],H=ga[ea+r[u]]):(G=32+64,H=0);ba=1<<t-y;ca=1<<x;v=ca;do ca-=ba,p[D+(B>>y)+ca]=F<<24|G<<16|H|0;while(ca!==0);ba=1<<t-1;while(B&ba)ba>>=1;ba!==0?(B&=ba-1,B+=ba):B=0;u++;if(--E[t]===0){if(t===w)break;t=m[n+r[u]]}if(t>s&&(B&da)!==C){y===0&&(y=s);D+=v;x=t-y;z=1<<x;while(x+y<w){z-=E[x+y];if(z<=0)break;x++;z<<=1}A+=1<<x;if(k===f&&A>c||k===g&&A>d)return 1;C=B&da;p[C]=s<<24|x<<16|D-q|0}}B!==0&&(p[D+B]=t-y<<24|64<<16|0);aa.bits=s;return 0}}var pa=!1;function qa(){pa||(pa=!0,L());return oa.exports}var M={},ra={exports:M};function N(){var a=k(),b=s(),c=w(),d=K(),e=qa(),f=0,g=1,h=2,i=4,j=5,l=6,m=0,n=1,o=2,p=-2,q=-3,r=-4,aa=-5,t=8,u=1,v=2,x=3,y=4,z=5,A=6,B=7,ba=8,ca=9,C=10,da=11,D=12,ea=13,fa=14,E=15,ga=16,ha=17,F=18,G=19,H=20,ia=21,ja=22,I=23,J=24,ka=25,la=26,ma=27,na=28,oa=29,L=30,pa=31,ra=32,N=852,O=592,P=15,Q=P;function sa(a){return(a>>>24&255)+(a>>>8&65280)+((a&65280)<<8)+((a&255)<<24)}function R(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ta(b){var c;if(!b||!b.state)return p;c=b.state;b.total_in=b.total_out=c.total=0;b.msg="";c.wrap&&(b.adler=c.wrap&1);c.mode=u;c.last=0;c.havedict=0;c.dmax=32768;c.head=null;c.hold=0;c.bits=0;c.lencode=c.lendyn=new a.Buf32(N);c.distcode=c.distdyn=new a.Buf32(O);c.sane=1;c.back=-1;return m}function S(a){var b;if(!a||!a.state)return p;b=a.state;b.wsize=0;b.whave=0;b.wnext=0;return ta(a)}function T(a,b){var c,d;if(!a||!a.state)return p;d=a.state;b<0?(c=0,b=-b):(c=(b>>4)+1,b<48&&(b&=15));if(b&&(b<8||b>15))return p;d.window!==null&&d.wbits!==b&&(d.window=null);d.wrap=c;d.wbits=b;return S(a)}function U(a,b){var c;if(!a)return p;c=new R();a.state=c;c.window=null;c=T(a,b);c!==m&&(a.state=null);return c}function V(a){return U(a,Q)}var W=!0,X,ua;function va(b){if(W){var c;X=new a.Buf32(512);ua=new a.Buf32(32);c=0;while(c<144)b.lens[c++]=8;while(c<256)b.lens[c++]=9;while(c<280)b.lens[c++]=7;while(c<288)b.lens[c++]=8;e(g,b.lens,0,288,X,0,b.work,{bits:9});c=0;while(c<32)b.lens[c++]=5;e(h,b.lens,0,32,ua,0,b.work,{bits:5});W=!1}b.lencode=X;b.lenbits=9;b.distcode=ua;b.distbits=5}function wa(b,c,d,e){var f;b=b.state;b.window===null&&(b.wsize=1<<b.wbits,b.wnext=0,b.whave=0,b.window=new a.Buf8(b.wsize));e>=b.wsize?(a.arraySet(b.window,c,d-b.wsize,b.wsize,0),b.wnext=0,b.whave=b.wsize):(f=b.wsize-b.wnext,f>e&&(f=e),a.arraySet(b.window,c,d-e,f,b.wnext),e-=f,e?(a.arraySet(b.window,c,d-e,e,0),b.wnext=e,b.whave=b.wsize):(b.wnext+=f,b.wnext===b.wsize&&(b.wnext=0),b.whave<b.wsize&&(b.whave+=f)));return 0}function Y(k,s){var w,K,qa,M,N,O,P,Q,R,ta,S,T,U,V,W,X,ua,Y,xa,Z=new a.Buf8(4),$,ya,za=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!k||!k.state||!k.output||!k.input&&k.avail_in!==0)return p;w=k.state;w.mode===D&&(w.mode=ea);N=k.next_out;qa=k.output;P=k.avail_out;M=k.next_in;K=k.input;O=k.avail_in;Q=w.hold;R=w.bits;ta=O;S=P;xa=m;inf_leave:for(;;)switch(w.mode){case u:if(w.wrap===0){w.mode=ea;break}while(R<16){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}if(w.wrap&2&&Q===35615){w.check=0;Z[0]=Q&255;Z[1]=Q>>>8&255;w.check=c(w.check,Z,2,0);Q=0;R=0;w.mode=v;break}w.flags=0;w.head&&(w.head.done=!1);if(!(w.wrap&1)||(((Q&255)<<8)+(Q>>8))%31){k.msg="incorrect header check";w.mode=L;break}if((Q&15)!==t){k.msg="unknown compression method";w.mode=L;break}Q>>>=4;R-=4;Y=(Q&15)+8;if(w.wbits===0)w.wbits=Y;else if(Y>w.wbits){k.msg="invalid window size";w.mode=L;break}w.dmax=1<<Y;k.adler=w.check=1;w.mode=Q&512?C:D;Q=0;R=0;break;case v:while(R<16){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.flags=Q;if((w.flags&255)!==t){k.msg="unknown compression method";w.mode=L;break}if(w.flags&57344){k.msg="unknown header flags set";w.mode=L;break}w.head&&(w.head.text=Q>>8&1);w.flags&512&&(Z[0]=Q&255,Z[1]=Q>>>8&255,w.check=c(w.check,Z,2,0));Q=0;R=0;w.mode=x;case x:while(R<32){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.head&&(w.head.time=Q);w.flags&512&&(Z[0]=Q&255,Z[1]=Q>>>8&255,Z[2]=Q>>>16&255,Z[3]=Q>>>24&255,w.check=c(w.check,Z,4,0));Q=0;R=0;w.mode=y;case y:while(R<16){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.head&&(w.head.xflags=Q&255,w.head.os=Q>>8);w.flags&512&&(Z[0]=Q&255,Z[1]=Q>>>8&255,w.check=c(w.check,Z,2,0));Q=0;R=0;w.mode=z;case z:if(w.flags&1024){while(R<16){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.length=Q;w.head&&(w.head.extra_len=Q);w.flags&512&&(Z[0]=Q&255,Z[1]=Q>>>8&255,w.check=c(w.check,Z,2,0));Q=0;R=0}else w.head&&(w.head.extra=null);w.mode=A;case A:if(w.flags&1024){T=w.length;T>O&&(T=O);T&&(w.head&&(Y=w.head.extra_len-w.length,w.head.extra||(w.head.extra=new Array(w.head.extra_len)),a.arraySet(w.head.extra,K,M,T,Y)),w.flags&512&&(w.check=c(w.check,K,T,M)),O-=T,M+=T,w.length-=T);if(w.length)break inf_leave}w.length=0;w.mode=B;case B:if(w.flags&2048){if(O===0)break inf_leave;T=0;do Y=K[M+T++],w.head&&Y&&w.length<65536&&(w.head.name+=String.fromCharCode(Y));while(Y&&T<O);w.flags&512&&(w.check=c(w.check,K,T,M));O-=T;M+=T;if(Y)break inf_leave}else w.head&&(w.head.name=null);w.length=0;w.mode=ba;case ba:if(w.flags&4096){if(O===0)break inf_leave;T=0;do Y=K[M+T++],w.head&&Y&&w.length<65536&&(w.head.comment+=String.fromCharCode(Y));while(Y&&T<O);w.flags&512&&(w.check=c(w.check,K,T,M));O-=T;M+=T;if(Y)break inf_leave}else w.head&&(w.head.comment=null);w.mode=ca;case ca:if(w.flags&512){while(R<16){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}if(Q!==(w.check&65535)){k.msg="header crc mismatch";w.mode=L;break}Q=0;R=0}w.head&&(w.head.hcrc=w.flags>>9&1,w.head.done=!0);k.adler=w.check=0;w.mode=D;break;case C:while(R<32){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}k.adler=w.check=sa(Q);Q=0;R=0;w.mode=da;case da:if(w.havedict===0){k.next_out=N;k.avail_out=P;k.next_in=M;k.avail_in=O;w.hold=Q;w.bits=R;return o}k.adler=w.check=1;w.mode=D;case D:if(s===j||s===l)break inf_leave;case ea:if(w.last){Q>>>=R&7;R-=R&7;w.mode=ma;break}while(R<3){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.last=Q&1;Q>>>=1;R-=1;switch(Q&3){case 0:w.mode=fa;break;case 1:va(w);w.mode=H;if(s===l){Q>>>=2;R-=2;break inf_leave}break;case 2:w.mode=ha;break;case 3:k.msg="invalid block type",w.mode=L}Q>>>=2;R-=2;break;case fa:Q>>>=R&7;R-=R&7;while(R<32){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}if((Q&65535)!==(Q>>>16^65535)){k.msg="invalid stored block lengths";w.mode=L;break}w.length=Q&65535;Q=0;R=0;w.mode=E;if(s===l)break inf_leave;case E:w.mode=ga;case ga:T=w.length;if(T){T>O&&(T=O);T>P&&(T=P);if(T===0)break inf_leave;a.arraySet(qa,K,M,T,N);O-=T;M+=T;P-=T;N+=T;w.length-=T;break}w.mode=D;break;case ha:while(R<14){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.nlen=(Q&31)+257;Q>>>=5;R-=5;w.ndist=(Q&31)+1;Q>>>=5;R-=5;w.ncode=(Q&15)+4;Q>>>=4;R-=4;if(w.nlen>286||w.ndist>30){k.msg="too many length or distance symbols";w.mode=L;break}w.have=0;w.mode=F;case F:while(w.have<w.ncode){while(R<3){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.lens[za[w.have++]]=Q&7;Q>>>=3;R-=3}while(w.have<19)w.lens[za[w.have++]]=0;w.lencode=w.lendyn;w.lenbits=7;$={bits:w.lenbits};xa=e(f,w.lens,0,19,w.lencode,0,w.work,$);w.lenbits=$.bits;if(xa){k.msg="invalid code lengths set";w.mode=L;break}w.have=0;w.mode=G;case G:while(w.have<w.nlen+w.ndist){for(;;){U=w.lencode[Q&(1<<w.lenbits)-1];V=U>>>24;W=U>>>16&255;X=U&65535;if(V<=R)break;if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}if(X<16)Q>>>=V,R-=V,w.lens[w.have++]=X;else{if(X===16){ya=V+2;while(R<ya){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}Q>>>=V;R-=V;if(w.have===0){k.msg="invalid bit length repeat";w.mode=L;break}Y=w.lens[w.have-1];T=3+(Q&3);Q>>>=2;R-=2}else if(X===17){ya=V+3;while(R<ya){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}Q>>>=V;R-=V;Y=0;T=3+(Q&7);Q>>>=3;R-=3}else{ya=V+7;while(R<ya){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}Q>>>=V;R-=V;Y=0;T=11+(Q&127);Q>>>=7;R-=7}if(w.have+T>w.nlen+w.ndist){k.msg="invalid bit length repeat";w.mode=L;break}while(T--)w.lens[w.have++]=Y}}if(w.mode===L)break;if(w.lens[256]===0){k.msg="invalid code -- missing end-of-block";w.mode=L;break}w.lenbits=9;$={bits:w.lenbits};xa=e(g,w.lens,0,w.nlen,w.lencode,0,w.work,$);w.lenbits=$.bits;if(xa){k.msg="invalid literal/lengths set";w.mode=L;break}w.distbits=6;w.distcode=w.distdyn;$={bits:w.distbits};xa=e(h,w.lens,w.nlen,w.ndist,w.distcode,0,w.work,$);w.distbits=$.bits;if(xa){k.msg="invalid distances set";w.mode=L;break}w.mode=H;if(s===l)break inf_leave;case H:w.mode=ia;case ia:if(O>=6&&P>=258){k.next_out=N;k.avail_out=P;k.next_in=M;k.avail_in=O;w.hold=Q;w.bits=R;d(k,S);N=k.next_out;qa=k.output;P=k.avail_out;M=k.next_in;K=k.input;O=k.avail_in;Q=w.hold;R=w.bits;w.mode===D&&(w.back=-1);break}w.back=0;for(;;){U=w.lencode[Q&(1<<w.lenbits)-1];V=U>>>24;W=U>>>16&255;X=U&65535;if(V<=R)break;if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}if(W&&(W&240)===0){Y=V;$=W;ua=X;for(;;){U=w.lencode[ua+((Q&(1<<Y+$)-1)>>Y)];V=U>>>24;W=U>>>16&255;X=U&65535;if(Y+V<=R)break;if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}Q>>>=Y;R-=Y;w.back+=Y}Q>>>=V;R-=V;w.back+=V;w.length=X;if(W===0){w.mode=la;break}if(W&32){w.back=-1;w.mode=D;break}if(W&64){k.msg="invalid literal/length code";w.mode=L;break}w.extra=W&15;w.mode=ja;case ja:if(w.extra){ya=w.extra;while(R<ya){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.length+=Q&(1<<w.extra)-1;Q>>>=w.extra;R-=w.extra;w.back+=w.extra}w.was=w.length;w.mode=I;case I:for(;;){U=w.distcode[Q&(1<<w.distbits)-1];V=U>>>24;W=U>>>16&255;X=U&65535;if(V<=R)break;if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}if((W&240)===0){Y=V;$=W;ua=X;for(;;){U=w.distcode[ua+((Q&(1<<Y+$)-1)>>Y)];V=U>>>24;W=U>>>16&255;X=U&65535;if(Y+V<=R)break;if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}Q>>>=Y;R-=Y;w.back+=Y}Q>>>=V;R-=V;w.back+=V;if(W&64){k.msg="invalid distance code";w.mode=L;break}w.offset=X;w.extra=W&15;w.mode=J;case J:if(w.extra){ya=w.extra;while(R<ya){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.offset+=Q&(1<<w.extra)-1;Q>>>=w.extra;R-=w.extra;w.back+=w.extra}if(w.offset>w.dmax){k.msg="invalid distance too far back";w.mode=L;break}w.mode=ka;case ka:if(P===0)break inf_leave;T=S-P;if(w.offset>T){T=w.offset-T;if(T>w.whave&&w.sane){k.msg="invalid distance too far back";w.mode=L;break}T>w.wnext?(T-=w.wnext,U=w.wsize-T):U=w.wnext-T;T>w.length&&(T=w.length);$=w.window}else $=qa,U=N-w.offset,T=w.length;T>P&&(T=P);P-=T;w.length-=T;do qa[N++]=$[U++];while(--T);w.length===0&&(w.mode=ia);break;case la:if(P===0)break inf_leave;qa[N++]=w.length;P--;w.mode=ia;break;case ma:if(w.wrap){while(R<32){if(O===0)break inf_leave;O--;Q|=K[M++]<<R;R+=8}S-=P;k.total_out+=S;w.total+=S;S&&(k.adler=w.check=w.flags?c(w.check,qa,S,N-S):b(w.check,qa,S,N-S));S=P;if((w.flags?Q:sa(Q))!==w.check){k.msg="incorrect data check";w.mode=L;break}Q=0;R=0}w.mode=na;case na:if(w.wrap&&w.flags){while(R<32){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}if(Q!==(w.total&4294967295)){k.msg="incorrect length check";w.mode=L;break}Q=0;R=0}w.mode=oa;case oa:xa=n;break inf_leave;case L:xa=q;break inf_leave;case pa:return r;case ra:default:return p}k.next_out=N;k.avail_out=P;k.next_in=M;k.avail_in=O;w.hold=Q;w.bits=R;if((w.wsize||S!==k.avail_out&&w.mode<L&&(w.mode<ma||s!==i))&&wa(k,k.output,k.next_out,S-k.avail_out)){w.mode=pa;return r}ta-=k.avail_in;S-=k.avail_out;k.total_in+=ta;k.total_out+=S;w.total+=S;w.wrap&&S&&(k.adler=w.check=w.flags?c(w.check,qa,S,k.next_out-S):b(w.check,qa,S,k.next_out-S));k.data_type=w.bits+(w.last?64:0)+(w.mode===D?128:0)+(w.mode===H||w.mode===E?256:0);(ta===0&&S===0||s===i)&&xa===m&&(xa=aa);return xa}function xa(a){if(!a||!a.state)return p;var b=a.state;b.window&&(b.window=null);a.state=null;return m}function Z(a,b){if(!a||!a.state)return p;a=a.state;if((a.wrap&2)===0)return p;a.head=b;b.done=!1;return m}function $(a,c){var d=c.length,e,f;if(!a||!a.state)return p;e=a.state;if(e.wrap!==0&&e.mode!==da)return p;if(e.mode===da){f=1;f=b(f,c,d,0);if(f!==e.check)return q}f=wa(a,c,d,d);if(f){e.mode=pa;return r}e.havedict=1;return m}M.inflateReset=S;M.inflateReset2=T;M.inflateResetKeep=ta;M.inflateInit=V;M.inflateInit2=U;M.inflate=Y;M.inflateEnd=xa;M.inflateGetHeader=Z;M.inflateSetDictionary=$;M.inflateInfo="pako inflate (from Nodeca project)"}var O=!1;function P(){O||(O=!0,N());return ra.exports}d={};var Q={exports:d};function sa(){Q.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}}var R=!1;function ta(){R||(R=!0,sa());return Q.exports}f={};var S={exports:f};function T(){function a(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}S.exports=a}var U=!1;function V(){U||(U=!0,T());return S.exports}var W={},X={exports:W};function ua(){var a=P(),b=k(),c=ga(),d=ta(),e=A(),f=H(),g=V(),h=Object.prototype.toString;function i(j){if(!(this instanceof i))return new i(j);this.options=b.assign({chunkSize:16384,windowBits:0,to:""},j||{});var k=this.options;k.raw&&k.windowBits>=0&&k.windowBits<16&&(k.windowBits=-k.windowBits,k.windowBits===0&&(k.windowBits=-15));k.windowBits>=0&&k.windowBits<16&&!(j&&j.windowBits)&&(k.windowBits+=32);k.windowBits>15&&k.windowBits<48&&((k.windowBits&15)===0&&(k.windowBits|=15));this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new f();this.strm.avail_out=0;j=a.inflateInit2(this.strm,k.windowBits);if(j!==d.Z_OK)throw new Error(e[j]);this.header=new g();a.inflateGetHeader(this.strm,this.header);if(k.dictionary){typeof k.dictionary==="string"?k.dictionary=c.string2buf(k.dictionary):h.call(k.dictionary)==="[object ArrayBuffer]"&&(k.dictionary=new Uint8Array(k.dictionary));if(k.raw){j=a.inflateSetDictionary(this.strm,k.dictionary);if(j!==d.Z_OK)throw new Error(e[j])}}}i.prototype.push=function(e,f){var g=this.strm,i=this.options.chunkSize,j=this.options.dictionary,k,l,m,n=!1;if(this.ended)return!1;f=f===~~f?f:f===!0?d.Z_FINISH:d.Z_NO_FLUSH;typeof e==="string"?g.input=c.binstring2buf(e):h.call(e)==="[object ArrayBuffer]"?g.input=new Uint8Array(e):g.input=e;g.next_in=0;g.avail_in=g.input.length;do{g.avail_out===0&&(g.output=new b.Buf8(i),g.next_out=0,g.avail_out=i);e=a.inflate(g,d.Z_NO_FLUSH);e===d.Z_NEED_DICT&&j&&(e=a.inflateSetDictionary(this.strm,j));e===d.Z_BUF_ERROR&&n===!0&&(e=d.Z_OK,n=!1);if(e!==d.Z_STREAM_END&&e!==d.Z_OK){this.onEnd(e);this.ended=!0;return!1}g.next_out&&((g.avail_out===0||e===d.Z_STREAM_END||g.avail_in===0&&(f===d.Z_FINISH||f===d.Z_SYNC_FLUSH))&&(this.options.to==="string"?(k=c.utf8border(g.output,g.next_out),l=g.next_out-k,m=c.buf2string(g.output,k),g.next_out=l,g.avail_out=i-l,l&&b.arraySet(g.output,g.output,k,l,0),this.onData(m)):this.onData(b.shrinkBuf(g.output,g.next_out))));g.avail_in===0&&g.avail_out===0&&(n=!0)}while((g.avail_in>0||g.avail_out===0)&&e!==d.Z_STREAM_END);e===d.Z_STREAM_END&&(f=d.Z_FINISH);if(f===d.Z_FINISH){e=a.inflateEnd(this.strm);this.onEnd(e);this.ended=!0;return e===d.Z_OK}if(f===d.Z_SYNC_FLUSH){this.onEnd(d.Z_OK);g.avail_out=0;return!0}return!0};i.prototype.onData=function(a){this.chunks.push(a)};i.prototype.onEnd=function(a){a===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=b.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};function j(a,b){b=new i(b);b.push(a,!0);if(b.err)throw b.msg||e[b.err];return b.result}function l(a,b){b=b||{};b.raw=!0;return j(a,b)}W.Inflate=i;W.inflate=j;W.inflateRaw=l;W.ungzip=j}var va=!1;function wa(){va||(va=!0,ua());return X.exports}b={};var Y={exports:b};function xa(){var a=k().assign,b=ka(),c=wa(),d=ta(),e={};a(e,b,c,d);Y.exports=e}var Z=!1;function $(){Z||(Z=!0,xa());return Y.exports}function a(a){switch(a){case void 0:return $()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("process-nextick-args-2.0.0",[],(function(a,b,c,d,e,f){"use strict";b={};var g={exports:b};function h(){!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?g.exports={nextTick:a}:g.exports=process;function a(a,b,c,d){if(typeof a!=="function")throw new TypeError('"callback" argument must be a function');var e=arguments.length,f,g;switch(e){case 0:case 1:return process.nextTick(a);case 2:return process.nextTick(function(){a.call(null,b)});case 3:return process.nextTick(function(){a.call(null,b,c)});case 4:return process.nextTick(function(){a.call(null,b,c,d)});default:f=new Array(e-1);g=0;while(g<f.length)f[g++]=arguments[g];return process.nextTick(function(){a.apply(null,f)})}}}var i=!1;function j(){i||(i=!0,h());return g.exports}function a(a){switch(a){case void 0:return j()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("safe-buffer-5.1.2",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){var a={},b=a.Buffer;function c(a,b){for(var c in a)b[c]=a[c]}b.from&&b.alloc&&b.allocUnsafe&&b.allocUnsafeSlow?h.exports=a:(c(a,g),g.Buffer=d);function d(a,c,d){return b(a,c,d)}c(b,d);d.from=function(a,c,d){if(typeof a==="number")throw new TypeError("Argument must not be a number");return b(a,c,d)};d.alloc=function(a,c,d){if(typeof a!=="number")throw new TypeError("Argument must be a number");a=b(a);c!==void 0?typeof d==="string"?a.fill(c,d):a.fill(c):a.fill(0);return a};d.allocUnsafe=function(a){if(typeof a!=="number")throw new TypeError("Argument must be a number");return b(a)};d.allocUnsafeSlow=function(b){if(typeof b!=="number")throw new TypeError("Argument must be a number");return a.SlowBuffer(b)}}var j=!1;function k(){j||(j=!0,i());return h.exports}function a(a){switch(a){case void 0:return k()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("util-deprecate-1.0.2",[],(function(a,b,c,d,e,f){"use strict";b={};var g={exports:b};function h(){g.exports={}.deprecate}var i=!1;function j(){i||(i=!0,h());return g.exports}function a(a){switch(a){case void 0:return j()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("readable-stream-2.3.6",["safe-buffer-5.1.2","process-nextick-args-2.0.0","core-util-is-1.0.2","inherits-2.0.3","util-deprecate-1.0.2","isarray-1.0.0"],(function(a,b,c,d,e,f){"use strict";function c(a){return a&&typeof a==="object"&&"default"in a?a["default"]:a}var g=c(b("safe-buffer-5.1.2")),h=c(b("process-nextick-args-2.0.0")),i=c(b("core-util-is-1.0.2")),j=c(b("inherits-2.0.3")),k=c(b("util-deprecate-1.0.2")),l=c(b("isarray-1.0.0"));c={};var m={exports:c};function n(){m.exports={}}var o=!1;function p(){o||(o=!0,n());return m.exports}b={};var q={exports:b};function r(){function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var b=g().Buffer,c={};function d(a,b,c){a.copy(b,c)}q.exports=function(){function c(){a(this,c),this.head=null,this.tail=null,this.length=0}c.prototype.push=function(a){a={data:a,next:null};this.length>0?this.tail.next=a:this.head=a;this.tail=a;++this.length};c.prototype.unshift=function(a){a={data:a,next:this.head};this.length===0&&(this.tail=a);this.head=a;++this.length};c.prototype.shift=function(){if(this.length===0)return;var a=this.head.data;this.length===1?this.head=this.tail=null:this.head=this.head.next;--this.length;return a};c.prototype.clear=function(){this.head=this.tail=null,this.length=0};c.prototype.join=function(a){if(this.length===0)return"";var b=this.head,c=""+b.data;while(b=b.next)c+=a+b.data;return c};c.prototype.concat=function(a){if(this.length===0)return b.alloc(0);if(this.length===1)return this.head.data;a=b.allocUnsafe(a>>>0);var c=this.head,e=0;while(c)d(c.data,a,e),e+=c.data.length,c=c.next;return a};return c}();c&&c.inspect&&c.inspect.custom&&(q.exports.prototype[c.inspect.custom]=function(){var a=c.inspect({length:this.length});return this.constructor.name+" "+a})}var s=!1;function t(){s||(s=!0,r());return q.exports}c={};var u={exports:c};function v(){var a=h();function b(b,c){var e=this,f=this._readableState&&this._readableState.destroyed,g=this._writableState&&this._writableState.destroyed;if(f||g){c?c(b):b&&(!this._writableState||!this._writableState.errorEmitted)&&a.nextTick(d,this,b);return this}this._readableState&&(this._readableState.destroyed=!0);this._writableState&&(this._writableState.destroyed=!0);this._destroy(b||null,function(b){!c&&b?(a.nextTick(d,e,b),e._writableState&&(e._writableState.errorEmitted=!0)):c&&c(b)});return this}function c(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function d(a,b){a.emit("error",b)}u.exports={destroy:b,undestroy:c}}var w=!1;function x(){w||(w=!0,v());return u.exports}b={};var y={exports:b};function z(){var b=h();y.exports=w;function c(a){var b=this;this.next=null;this.entry=null;this.finish=function(){Q(b,a)}}var d=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:b.nextTick,e;w.WritableState=u;var f=i();f.inherits=j();var l={deprecate:k()},m=p(),n=g().Buffer,o=a.Uint8Array||function(){};function q(a){return n.from(a)}function r(a){return n.isBuffer(a)||a instanceof o}var s=x();f.inherits(w,m);function t(){}function u(a,b){e=e||F();a=a||{};var d=b instanceof e;this.objectMode=!!a.objectMode;d&&(this.objectMode=this.objectMode||!!a.writableObjectMode);var f=a.highWaterMark,g=a.writableHighWaterMark,h=this.objectMode?16:16*1024;f||f===0?this.highWaterMark=f:d&&(g||g===0)?this.highWaterMark=g:this.highWaterMark=h;this.highWaterMark=Math.floor(this.highWaterMark);this.finalCalled=!1;this.needDrain=!1;this.ending=!1;this.ended=!1;this.finished=!1;this.destroyed=!1;f=a.decodeStrings===!1;this.decodeStrings=!f;this.defaultEncoding=a.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(a){H(b,a)};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=!1;this.errorEmitted=!1;this.bufferedRequestCount=0;this.corkedRequestsFree=new c(this)}u.prototype.getBuffer=function(){var a=this.bufferedRequest,b=[];while(a)b.push(a),a=a.next;return b};(function(){try{Object.defineProperty(u.prototype,"buffer",{get:l.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(a){}})();var v;typeof Symbol==="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]==="function"?(v=Function.prototype[Symbol.hasInstance],Object.defineProperty(w,Symbol.hasInstance,{value:function(a){if(v.call(this,a))return!0;return this!==w?!1:a&&a._writableState instanceof u}})):v=function(a){return a instanceof this};function w(a){e=e||F();if(!v.call(w,this)&&!(this instanceof e))return new w(a);this._writableState=new u(a,this);this.writable=!0;a&&(typeof a.write==="function"&&(this._write=a.write),typeof a.writev==="function"&&(this._writev=a.writev),typeof a.destroy==="function"&&(this._destroy=a.destroy),typeof a["final"]==="function"&&(this._final=a["final"]));m.call(this)}w.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function z(a,c){var d=new Error("write after end");a.emit("error",d);b.nextTick(c,d)}function A(a,c,d,e){var f=!0,g=!1;d===null?g=new TypeError("May not write null values to stream"):typeof d!=="string"&&d!==void 0&&!c.objectMode&&(g=new TypeError("Invalid non-string/buffer chunk"));g&&(a.emit("error",g),b.nextTick(e,g),f=!1);return f}w.prototype.write=function(a,b,c){var d=this._writableState,e=!1,f=!d.objectMode&&r(a);f&&!n.isBuffer(a)&&(a=q(a));typeof b==="function"&&(c=b,b=null);f?b="buffer":b||(b=d.defaultEncoding);typeof c!=="function"&&(c=t);d.ended?z(this,c):(f||A(this,d,a,c))&&(d.pendingcb++,e=C(this,d,f,a,b,c));return e};w.prototype.cork=function(){var a=this._writableState;a.corked++};w.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,!a.writing&&!a.corked&&!a.finished&&!a.bufferProcessing&&a.bufferedRequest&&K(this,a))};w.prototype.setDefaultEncoding=function(a){typeof a==="string"&&(a=a.toLowerCase());if(!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((a+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+a);this._writableState.defaultEncoding=a;return this};function B(a,b,c){!a.objectMode&&a.decodeStrings!==!1&&typeof b==="string"&&(b=n.from(b,c));return b}Object.defineProperty(w.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function C(a,b,c,d,e,f){if(!c){var g=B(b,d,e);d!==g&&(c=!0,e="buffer",d=g)}g=b.objectMode?1:d.length;b.length+=g;var h=b.length<b.highWaterMark;h||(b.needDrain=!0);if(b.writing||b.corked){var i=b.lastBufferedRequest;b.lastBufferedRequest={chunk:d,encoding:e,isBuf:c,callback:f,next:null};i?i.next=b.lastBufferedRequest:b.bufferedRequest=b.lastBufferedRequest;b.bufferedRequestCount+=1}else D(a,b,!1,g,d,e,f);return h}function D(a,b,c,d,e,f,g){b.writelen=d,b.writecb=g,b.writing=!0,b.sync=!0,c?a._writev(e,b.onwrite):a._write(e,f,b.onwrite),b.sync=!1}function E(a,c,d,e,f){--c.pendingcb,d?(b.nextTick(f,e),b.nextTick(O,a,c),a._writableState.errorEmitted=!0,a.emit("error",e)):(f(e),a._writableState.errorEmitted=!0,a.emit("error",e),O(a,c))}function G(a){a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0}function H(a,b){var c=a._writableState,e=c.sync,f=c.writecb;G(c);if(b)E(a,c,e,b,f);else{b=L(c);!b&&!c.corked&&!c.bufferProcessing&&c.bufferedRequest&&K(a,c);e?d(I,a,c,b,f):I(a,c,b,f)}}function I(a,b,c,d){c||J(a,b),b.pendingcb--,d(),O(a,b)}function J(a,b){b.length===0&&b.needDrain&&(b.needDrain=!1,a.emit("drain"))}function K(a,b){b.bufferProcessing=!0;var d=b.bufferedRequest;if(a._writev&&d&&d.next){var e=b.bufferedRequestCount;e=new Array(e);var f=b.corkedRequestsFree;f.entry=d;var g=0,h=!0;while(d)e[g]=d,d.isBuf||(h=!1),d=d.next,g+=1;e.allBuffers=h;D(a,b,!0,b.length,e,"",f.finish);b.pendingcb++;b.lastBufferedRequest=null;f.next?(b.corkedRequestsFree=f.next,f.next=null):b.corkedRequestsFree=new c(b);b.bufferedRequestCount=0}else{while(d){g=d.chunk;h=d.encoding;e=d.callback;f=b.objectMode?1:g.length;D(a,b,!1,f,g,h,e);d=d.next;b.bufferedRequestCount--;if(b.writing)break}d===null&&(b.lastBufferedRequest=null)}b.bufferedRequest=d;b.bufferProcessing=!1}w.prototype._write=function(a,b,c){c(new Error("_write() is not implemented"))};w.prototype._writev=null;w.prototype.end=function(a,b,c){var d=this._writableState;typeof a==="function"?(c=a,a=null,b=null):typeof b==="function"&&(c=b,b=null);a!==null&&a!==void 0&&this.write(a,b);d.corked&&(d.corked=1,this.uncork());!d.ending&&!d.finished&&P(this,d,c)};function L(a){return a.ending&&a.length===0&&a.bufferedRequest===null&&!a.finished&&!a.writing}function M(a,b){a._final(function(c){b.pendingcb--,c&&a.emit("error",c),b.prefinished=!0,a.emit("prefinish"),O(a,b)})}function N(a,c){!c.prefinished&&!c.finalCalled&&(typeof a._final==="function"?(c.pendingcb++,c.finalCalled=!0,b.nextTick(M,a,c)):(c.prefinished=!0,a.emit("prefinish")))}function O(a,b){var c=L(b);c&&(N(a,b),b.pendingcb===0&&(b.finished=!0,a.emit("finish")));return c}function P(a,c,d){c.ending=!0,O(a,c),d&&(c.finished?b.nextTick(d):a.once("finish",d)),c.ended=!0,a.writable=!1}function Q(a,b,c){var d=a.entry;a.entry=null;while(d){var e=d.callback;b.pendingcb--;e(c);d=d.next}b.corkedRequestsFree?b.corkedRequestsFree.next=a:b.corkedRequestsFree=a}Object.defineProperty(w.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(a){if(!this._writableState)return;this._writableState.destroyed=a}});w.prototype.destroy=s.destroy;w.prototype._undestroy=s.undestroy;w.prototype._destroy=function(a,b){this.end(),b(a)}}var A=!1;function B(){A||(A=!0,z());return y.exports}c={};var C={exports:c};function D(){var a=h(),b=Object.keys||function(a){var b=[];for(a in a)b.push(a);return b};C.exports=g;var c=i();c.inherits=j();var d=O(),e=B();c.inherits(g,d);c=b(e.prototype);for(b=0;b<c.length;b++){var f=c[b];g.prototype[f]||(g.prototype[f]=e.prototype[f])}function g(a){if(!(this instanceof g))return new g(a);d.call(this,a);e.call(this,a);a&&a.readable===!1&&(this.readable=!1);a&&a.writable===!1&&(this.writable=!1);this.allowHalfOpen=!0;a&&a.allowHalfOpen===!1&&(this.allowHalfOpen=!1);this.once("end",k)}Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function k(){if(this.allowHalfOpen||this._writableState.ended)return;a.nextTick(l,this)}function l(a){a.end()}Object.defineProperty(g.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(a){if(this._readableState===void 0||this._writableState===void 0)return;this._readableState.destroyed=a;this._writableState.destroyed=a}});g.prototype._destroy=function(b,c){this.push(null),this.end(),a.nextTick(c,b)}}var E=!1;function F(){E||(E=!0,D());return C.exports}var G={},H={exports:G};function I(){var a=g().Buffer,b=a.isEncoding||function(a){a=""+a;switch(a&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function c(a){if(!a)return"utf8";var b;while(!0)switch(a){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return a;default:if(b)return;a=(""+a).toLowerCase();b=!0}}function d(d){var e=c(d);if(typeof e!=="string"&&(a.isEncoding===b||!b(d)))throw new Error("Unknown encoding: "+d);return e||d}G.StringDecoder=e;function e(b){this.encoding=d(b);var c;switch(this.encoding){case"utf16le":this.text=m;this.end=n;c=4;break;case"utf8":this.fillLast=j;c=4;break;case"base64":this.text=o;this.end=p;c=3;break;default:this.write=q;this.end=r;return}this.lastNeed=0;this.lastTotal=0;this.lastChar=a.allocUnsafe(c)}e.prototype.write=function(a){if(a.length===0)return"";var b,c;if(this.lastNeed){b=this.fillLast(a);if(b===void 0)return"";c=this.lastNeed;this.lastNeed=0}else c=0;return c<a.length?b?b+this.text(a,c):this.text(a,c):b||""};e.prototype.end=l;e.prototype.text=k;e.prototype.fillLast=function(a){if(this.lastNeed<=a.length){a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal)}a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length);this.lastNeed-=a.length};function f(a){if(a<=127)return 0;else if(a>>5===6)return 2;else if(a>>4===14)return 3;else if(a>>3===30)return 4;return a>>6===2?-1:-2}function h(a,b,c){var d=b.length-1;if(d<c)return 0;var e=f(b[d]);if(e>=0){e>0&&(a.lastNeed=e-1);return e}if(--d<c||e===-2)return 0;e=f(b[d]);if(e>=0){e>0&&(a.lastNeed=e-2);return e}if(--d<c||e===-2)return 0;e=f(b[d]);if(e>=0){e>0&&(e===2?e=0:a.lastNeed=e-3);return e}return 0}function i(a,b,c){if((b[0]&192)!==128){a.lastNeed=0;return"\ufffd"}if(a.lastNeed>1&&b.length>1){if((b[1]&192)!==128){a.lastNeed=1;return"\ufffd"}if(a.lastNeed>2&&b.length>2&&(b[2]&192)!==128){a.lastNeed=2;return"\ufffd"}}}function j(a){var b=this.lastTotal-this.lastNeed,c=i(this,a,b);if(c!==void 0)return c;if(this.lastNeed<=a.length){a.copy(this.lastChar,b,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal)}a.copy(this.lastChar,b,0,a.length);this.lastNeed-=a.length}function k(a,b){var c=h(this,a,b);if(!this.lastNeed)return a.toString("utf8",b);this.lastTotal=c;c=a.length-(c-this.lastNeed);a.copy(this.lastChar,0,c);return a.toString("utf8",b,c)}function l(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+"\ufffd":a}function m(a,b){if((a.length-b)%2===0){var c=a.toString("utf16le",b);if(c){var d=c.charCodeAt(c.length-1);if(d>=55296&&d<=56319){this.lastNeed=2;this.lastTotal=4;this.lastChar[0]=a[a.length-2];this.lastChar[1]=a[a.length-1];return c.slice(0,-1)}}return c}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=a[a.length-1];return a.toString("utf16le",b,a.length-1)}function n(a){a=a&&a.length?this.write(a):"";if(this.lastNeed){var b=this.lastTotal-this.lastNeed;return a+this.lastChar.toString("utf16le",0,b)}return a}function o(a,b){var c=(a.length-b)%3;if(c===0)return a.toString("base64",b);this.lastNeed=3-c;this.lastTotal=3;c===1?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]);return a.toString("base64",b,a.length-c)}function p(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+this.lastChar.toString("base64",0,3-this.lastNeed):a}function q(a){return a.toString(this.encoding)}function r(a){return a&&a.length?this.write(a):""}}var J=!1;function K(){J||(J=!0,I());return H.exports}b={};var L={exports:b};function M(){var b=h();L.exports=A;var c=l(),d;A.ReadableState=z;var e=function(a,b){return a.listeners(b).length},f=p(),k=g().Buffer,m=a.Uint8Array||function(){};function n(a){return k.from(a)}function o(a){return k.isBuffer(a)||a instanceof m}var q=i();q.inherits=j();var r={},s=void 0;r&&r.debuglog?s=r.debuglog("stream"):s=function(){};var u=t();r=x();var v;q.inherits(A,f);var w=["error","close","destroy","pause","resume"];function y(a,b,d){if(typeof a.prependListener==="function")return a.prependListener(b,d);!a._events||!a._events[b]?a.on(b,d):c(a._events[b])?a._events[b].unshift(d):a._events[b]=[d,a._events[b]]}function z(a,b){d=d||F();a=a||{};b=b instanceof d;this.objectMode=!!a.objectMode;b&&(this.objectMode=this.objectMode||!!a.readableObjectMode);var c=a.highWaterMark,e=a.readableHighWaterMark,f=this.objectMode?16:16*1024;c||c===0?this.highWaterMark=c:b&&(e||e===0)?this.highWaterMark=e:this.highWaterMark=f;this.highWaterMark=Math.floor(this.highWaterMark);this.buffer=new u();this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=!1;this.endEmitted=!1;this.reading=!1;this.sync=!0;this.needReadable=!1;this.emittedReadable=!1;this.readableListening=!1;this.resumeScheduled=!1;this.destroyed=!1;this.defaultEncoding=a.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.decoder=null;this.encoding=null;a.encoding&&(v||(v=K("/").StringDecoder),this.decoder=new v(a.encoding),this.encoding=a.encoding)}function A(a){d=d||F();if(!(this instanceof A))return new A(a);this._readableState=new z(a,this);this.readable=!0;a&&(typeof a.read==="function"&&(this._read=a.read),typeof a.destroy==="function"&&(this._destroy=a.destroy));f.call(this)}Object.defineProperty(A.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(a){if(!this._readableState)return;this._readableState.destroyed=a}});A.prototype.destroy=r.destroy;A.prototype._undestroy=r.undestroy;A.prototype._destroy=function(a,b){this.push(null),b(a)};A.prototype.push=function(a,b){var c=this._readableState,d;!c.objectMode?typeof a==="string"&&(b=b||c.defaultEncoding,b!==c.encoding&&(a=k.from(a,b),b=""),d=!0):d=!0;return B(this,a,b,!1,d)};A.prototype.unshift=function(a){return B(this,a,null,!0,!1)};function B(a,b,c,d,e){var f=a._readableState;if(b===null)f.reading=!1,J(a,f);else{var g;e||(g=D(f,b));g?a.emit("error",g):f.objectMode||b&&b.length>0?(typeof b!=="string"&&!f.objectMode&&Object.getPrototypeOf(b)!==k.prototype&&(b=n(b)),d?f.endEmitted?a.emit("error",new Error("stream.unshift() after end event")):C(a,f,b,!0):f.ended?a.emit("error",new Error("stream.push() after EOF")):(f.reading=!1,f.decoder&&!c?(b=f.decoder.write(b),f.objectMode||b.length!==0?C(a,f,b,!1):O(a,f)):C(a,f,b,!1))):d||(f.reading=!1)}return E(f)}function C(a,b,c,d){b.flowing&&b.length===0&&!b.sync?(a.emit("data",c),a.read(0)):(b.length+=b.objectMode?1:c.length,d?b.buffer.unshift(c):b.buffer.push(c),b.needReadable&&M(a)),O(a,b)}function D(a,b){var c;!o(b)&&typeof b!=="string"&&b!==void 0&&!a.objectMode&&(c=new TypeError("Invalid non-string/buffer chunk"));return c}function E(a){return!a.ended&&(a.needReadable||a.length<a.highWaterMark||a.length===0)}A.prototype.isPaused=function(){return this._readableState.flowing===!1};A.prototype.setEncoding=function(a){v||(v=K("/").StringDecoder);this._readableState.decoder=new v(a);this._readableState.encoding=a;return this};var G=8388608;function H(a){a>=G?a=G:(a--,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a++);return a}function I(a,b){if(a<=0||b.length===0&&b.ended)return 0;if(b.objectMode)return 1;if(a!==a)if(b.flowing&&b.length)return b.buffer.head.data.length;else return b.length;a>b.highWaterMark&&(b.highWaterMark=H(a));if(a<=b.length)return a;if(!b.ended){b.needReadable=!0;return 0}return b.length}A.prototype.read=function(a){s("read",a);a=parseInt(a,10);var b=this._readableState,c=a;a!==0&&(b.emittedReadable=!1);if(a===0&&b.needReadable&&(b.length>=b.highWaterMark||b.ended)){s("read: emitReadable",b.length,b.ended);b.length===0&&b.ended?Z(this):M(this);return null}a=I(a,b);if(a===0&&b.ended){b.length===0&&Z(this);return null}var d=b.needReadable;s("need readable",d);(b.length===0||b.length-a<b.highWaterMark)&&(d=!0,s("length less than watermark",d));b.ended||b.reading?(d=!1,s("reading or ended",d)):d&&(s("do read"),b.reading=!0,b.sync=!0,b.length===0&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1,b.reading||(a=I(c,b)));a>0?d=V(a,b):d=null;d===null?(b.needReadable=!0,a=0):b.length-=a;b.length===0&&(b.ended||(b.needReadable=!0),c!==a&&b.ended&&Z(this));d!==null&&this.emit("data",d);return d};function J(a,b){if(b.ended)return;if(b.decoder){var c=b.decoder.end();c&&c.length&&(b.buffer.push(c),b.length+=b.objectMode?1:c.length)}b.ended=!0;M(a)}function M(a){var c=a._readableState;c.needReadable=!1;c.emittedReadable||(s("emitReadable",c.flowing),c.emittedReadable=!0,c.sync?b.nextTick(N,a):N(a))}function N(a){s("emit readable"),a.emit("readable"),U(a)}function O(a,c){c.readingMore||(c.readingMore=!0,b.nextTick(P,a,c))}function P(a,b){var c=b.length;while(!b.reading&&!b.flowing&&!b.ended&&b.length<b.highWaterMark){s("maybeReadMore read 0");a.read(0);if(c===b.length)break;else c=b.length}b.readingMore=!1}A.prototype._read=function(a){this.emit("error",new Error("_read() is not implemented"))};A.prototype.pipe=function(a,c){var d=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=a;break;case 1:f.pipes=[f.pipes,a];break;default:f.pipes.push(a);break}f.pipesCount+=1;s("pipe count=%d opts=%j",f.pipesCount,c);c=(!c||c.end!==!1)&&a!==process.stdout&&a!==process.stderr;c=c?h:q;f.endEmitted?b.nextTick(c):d.once("end",c);a.on("unpipe",g);function g(a,b){s("onunpipe"),a===d&&(b&&b.hasUnpiped===!1&&(b.hasUnpiped=!0,k()))}function h(){s("onend"),a.end()}var i=Q(d);a.on("drain",i);var j=!1;function k(){s("cleanup"),a.removeListener("close",o),a.removeListener("finish",p),a.removeListener("drain",i),a.removeListener("error",n),a.removeListener("unpipe",g),d.removeListener("end",h),d.removeListener("end",q),d.removeListener("data",m),j=!0,f.awaitDrain&&(!a._writableState||a._writableState.needDrain)&&i()}var l=!1;d.on("data",m);function m(b){s("ondata");l=!1;b=a.write(b);!1===b&&!l&&((f.pipesCount===1&&f.pipes===a||f.pipesCount>1&&aa(f.pipes,a)!==-1)&&!j&&(s("false write response, pause",d._readableState.awaitDrain),d._readableState.awaitDrain++,l=!0),d.pause())}function n(b){s("onerror",b),q(),a.removeListener("error",n),e(a,"error")===0&&a.emit("error",b)}y(a,"error",n);function o(){a.removeListener("finish",p),q()}a.once("close",o);function p(){s("onfinish"),a.removeListener("close",o),q()}a.once("finish",p);function q(){s("unpipe"),d.unpipe(a)}a.emit("pipe",d);f.flowing||(s("pipe resume"),d.resume());return a};function Q(a){return function(){var b=a._readableState;s("pipeOnDrain",b.awaitDrain);b.awaitDrain&&b.awaitDrain--;b.awaitDrain===0&&e(a,"data")&&(b.flowing=!0,U(a))}}A.prototype.unpipe=function(a){var b=this._readableState,c={hasUnpiped:!1};if(b.pipesCount===0)return this;if(b.pipesCount===1){if(a&&a!==b.pipes)return this;a||(a=b.pipes);b.pipes=null;b.pipesCount=0;b.flowing=!1;a&&a.emit("unpipe",this,c);return this}if(!a){var d=b.pipes,e=b.pipesCount;b.pipes=null;b.pipesCount=0;b.flowing=!1;for(var f=0;f<e;f++)d[f].emit("unpipe",this,c);return this}d=aa(b.pipes,a);if(d===-1)return this;b.pipes.splice(d,1);b.pipesCount-=1;b.pipesCount===1&&(b.pipes=b.pipes[0]);a.emit("unpipe",this,c);return this};A.prototype.on=function(a,c){c=f.prototype.on.call(this,a,c);if(a==="data")this._readableState.flowing!==!1&&this.resume();else if(a==="readable"){a=this._readableState;!a.endEmitted&&!a.readableListening&&(a.readableListening=a.needReadable=!0,a.emittedReadable=!1,!a.reading?b.nextTick(R,this):a.length&&M(this))}return c};A.prototype.addListener=A.prototype.on;function R(a){s("readable nexttick read 0"),a.read(0)}A.prototype.resume=function(){var a=this._readableState;a.flowing||(s("resume"),a.flowing=!0,S(this,a));return this};function S(a,c){c.resumeScheduled||(c.resumeScheduled=!0,b.nextTick(T,a,c))}function T(a,b){b.reading||(s("resume read 0"),a.read(0)),b.resumeScheduled=!1,b.awaitDrain=0,a.emit("resume"),U(a),b.flowing&&!b.reading&&a.read(0)}A.prototype.pause=function(){s("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(s("pause"),this._readableState.flowing=!1,this.emit("pause"));return this};function U(a){var b=a._readableState;s("flow",b.flowing);while(b.flowing&&a.read()!==null);}A.prototype.wrap=function(a){var b=this,c=this._readableState,d=!1;a.on("end",function(){s("wrapped end");if(c.decoder&&!c.ended){var a=c.decoder.end();a&&a.length&&b.push(a)}b.push(null)});a.on("data",function(e){s("wrapped data");c.decoder&&(e=c.decoder.write(e));if(c.objectMode&&(e===null||e===void 0))return;else if(!c.objectMode&&(!e||!e.length))return;e=b.push(e);e||(d=!0,a.pause())});for(var e in a)this[e]===void 0&&typeof a[e]==="function"&&(this[e]=function(b){return function(){return a[b].apply(a,arguments)}}(e));for(e=0;e<w.length;e++)a.on(w[e],this.emit.bind(this,w[e]));this._read=function(b){s("wrapped _read",b),d&&(d=!1,a.resume())};return this};Object.defineProperty(A.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});A._fromList=V;function V(a,b){if(b.length===0)return null;var c;b.objectMode?c=b.buffer.shift():!a||a>=b.length?(b.decoder?c=b.buffer.join(""):b.buffer.length===1?c=b.buffer.head.data:c=b.buffer.concat(b.length),b.buffer.clear()):c=W(a,b.buffer,b.decoder);return c}function W(a,b,c){var d;a<b.head.data.length?(d=b.head.data.slice(0,a),b.head.data=b.head.data.slice(a)):a===b.head.data.length?d=b.shift():d=c?X(a,b):Y(a,b);return d}function X(a,b){var c=b.head,d=1,e=c.data;a-=e.length;while(c=c.next){var f=c.data,g=a>f.length?f.length:a;g===f.length?e+=f:e+=f.slice(0,a);a-=g;if(a===0){g===f.length?(++d,c.next?b.head=c.next:b.head=b.tail=null):(b.head=c,c.data=f.slice(g));break}++d}b.length-=d;return e}function Y(a,b){var c=k.allocUnsafe(a),d=b.head,e=1;d.data.copy(c);a-=d.data.length;while(d=d.next){var f=d.data,g=a>f.length?f.length:a;f.copy(c,c.length-a,0,g);a-=g;if(a===0){g===f.length?(++e,d.next?b.head=d.next:b.head=b.tail=null):(b.head=d,d.data=f.slice(g));break}++e}b.length-=e;return c}function Z(a){var c=a._readableState;if(c.length>0)throw new Error('"endReadable()" called on non-empty stream');c.endEmitted||(c.ended=!0,b.nextTick($,c,a))}function $(a,b){!a.endEmitted&&a.length===0&&(a.endEmitted=!0,b.readable=!1,b.emit("end"))}function aa(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1}}var N=!1;function O(){N||(N=!0,M());return L.exports}c={};var P={exports:c};function Q(){P.exports=d;var a=F(),b=i();b.inherits=j();b.inherits(d,a);function c(a,b){var c=this._transformState;c.transforming=!1;var d=c.writecb;if(!d)return this.emit("error",new Error("write callback called multiple times"));c.writechunk=null;c.writecb=null;b!=null&&this.push(b);d(a);c=this._readableState;c.reading=!1;(c.needReadable||c.length<c.highWaterMark)&&this._read(c.highWaterMark)}function d(b){if(!(this instanceof d))return new d(b);a.call(this,b);this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;b&&(typeof b.transform==="function"&&(this._transform=b.transform),typeof b.flush==="function"&&(this._flush=b.flush));this.on("prefinish",e)}function e(){var a=this;typeof this._flush==="function"?this._flush(function(b,c){f(a,b,c)}):f(this,null,null)}d.prototype.push=function(b,c){this._transformState.needTransform=!1;return a.prototype.push.call(this,b,c)};d.prototype._transform=function(a,b,c){throw new Error("_transform() is not implemented")};d.prototype._write=function(a,b,c){var d=this._transformState;d.writecb=c;d.writechunk=a;d.writeencoding=b;if(!d.transforming){c=this._readableState;(d.needTransform||c.needReadable||c.length<c.highWaterMark)&&this._read(c.highWaterMark)}};d.prototype._read=function(a){a=this._transformState;a.writechunk!==null&&a.writecb&&!a.transforming?(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform)):a.needTransform=!0};d.prototype._destroy=function(b,c){var d=this;a.prototype._destroy.call(this,b,function(a){c(a),d.emit("close")})};function f(a,b,c){if(b)return a.emit("error",b);c!=null&&a.push(c);if(a._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(a._transformState.transforming)throw new Error("Calling transform done when still transforming");return a.push(null)}}var R=!1;function S(){R||(R=!0,Q());return P.exports}b={};var T={exports:b};function U(){T.exports=c;var a=S(),b=i();b.inherits=j();b.inherits(c,a);function c(b){if(!(this instanceof c))return new c(b);a.call(this,b)}c.prototype._transform=function(a,b,c){c(null,a)}}var V=!1;function W(){V||(V=!0,U());return T.exports}d={};var X={exports:d};function Y(){var a={};process.env.READABLE_STREAM==="disable"&&a?(X.exports=a,d=X.exports=a.Readable,d.Readable=a.Readable,d.Writable=a.Writable,d.Duplex=a.Duplex,d.Transform=a.Transform,d.PassThrough=a.PassThrough,d.Stream=a):(d=X.exports=O(),d.Stream=a||d,d.Readable=d,d.Writable=B(),d.Duplex=F(),d.Transform=S(),d.PassThrough=W())}var Z=!1;function $(){Z||(Z=!0,Y());return X.exports}function f(a){switch(a){case void 0:return $()}}e.exports=f}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("set-immediate-shim-1.0.1",[],(function(a,b,c,d,e,f){"use strict";b={};var g={exports:b};function h(){g.exports=typeof setImmediate==="function"?setImmediate:function(){var a=[].slice.apply(arguments);a.splice(1,0,0);setTimeout.apply(null,a)}}var i=!1;function j(){i||(i=!0,h());return g.exports}function a(a){switch(a){case void 0:return j()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/cr2jmG-CdKo/
 */
__d("jszip-3.2.0",["readable-stream-2.3.6","set-immediate-shim-1.0.1","lie-3.3.0","pako-1.0.8"],(function(a,b,c,d,e,f){"use strict";var g=b("readable-stream-2.3.6"),h=b("set-immediate-shim-1.0.1"),i=b("lie-3.3.0"),j=b("pako-1.0.8"),k={},l={exports:k};function m(){k.base64=!0;k.array=!0;k.string=!0;k.arraybuffer=typeof ArrayBuffer!=="undefined"&&typeof Uint8Array!=="undefined";k.nodebuffer=typeof Buffer!=="undefined";k.uint8array=typeof Uint8Array!=="undefined";if(typeof ArrayBuffer==="undefined")k.blob=!1;else{var a=new ArrayBuffer(0);try{k.blob=new Blob([a],{type:"application/zip"}).size===0}catch(c){try{var b=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder;b=new b();b.append(a);k.blob=b.getBlob("application/zip").size===0}catch(a){k.blob=!1}}}try{k.nodestream=!!g().Readable}catch(a){k.nodestream=!1}}var n=!1;function o(){n||(n=!0,m());return l.exports}var p={},q={exports:p};function r(){var a=E(),b=o(),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";p.encode=function(b){var d=[],e,f,g,h,i=0,j=b.length,k=j,l=a.getTypeOf(b)!=="string";while(i<b.length)k=j-i,!l?(e=b.charCodeAt(i++),f=i<j?b.charCodeAt(i++):0,g=i<j?b.charCodeAt(i++):0):(e=b[i++],f=i<j?b[i++]:0,g=i<j?b[i++]:0),h=e>>2,e=(e&3)<<4|f>>4,f=k>1?(f&15)<<2|g>>6:64,g=k>2?g&63:64,d.push(c.charAt(h)+c.charAt(e)+c.charAt(f)+c.charAt(g));return d.join("")};p.decode=function(a){var d,e,f,g,h=0,i=0,j="data:";if(a.substr(0,j.length)===j)throw new Error("Invalid base64 input, it looks like a data url.");a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");j=a.length*3/4;a.charAt(a.length-1)===c.charAt(64)&&j--;a.charAt(a.length-2)===c.charAt(64)&&j--;if(j%1!==0)throw new Error("Invalid base64 input, bad content length.");var k;b.uint8array?k=new Uint8Array(j|0):k=new Array(j|0);while(h<a.length)j=c.indexOf(a.charAt(h++)),e=c.indexOf(a.charAt(h++)),f=c.indexOf(a.charAt(h++)),g=c.indexOf(a.charAt(h++)),j=j<<2|e>>4,e=(e&15)<<4|f>>2,d=(f&3)<<6|g,k[i++]=j,f!==64&&(k[i++]=e),g!==64&&(k[i++]=d);return k}}var s=!1;function t(){s||(s=!0,r());return q.exports}c={};var u={exports:c};function v(){u.exports={isNode:typeof Buffer!=="undefined",newBufferFrom:function(a,b){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,b);else{if(typeof a==="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,b)}},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);else{a=new Buffer(a);a.fill(0);return a}},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on==="function"&&typeof a.pause==="function"&&typeof a.resume==="function"}}}var w=!1;function x(){w||(w=!0,v());return u.exports}d={};var y={exports:d};function z(){var a;typeof Promise!=="undefined"?a=Promise:a=i();y.exports={Promise:a}}var A=!1;function B(){A||(A=!0,z());return y.exports}var C={},aa={exports:C};function ba(){var a=o(),b=t(),c=x(),d=h(),e=B();function f(b){var c;a.uint8array?c=new Uint8Array(b.length):c=new Array(b.length);return i(b,c)}C.newBlob=function(a,b){C.checkSupport("blob");try{return new Blob([a],{type:b})}catch(d){try{var c=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder;c=new c();c.append(a);return c.getBlob(b)}catch(a){throw new Error("Bug : can't construct the Blob.")}}};function g(a){return a}function i(a,b){for(var c=0;c<a.length;++c)b[c]=a.charCodeAt(c)&255;return b}var j={stringifyByChunk:function(a,b,c){var d=[],e=0,f=a.length;if(f<=c)return String.fromCharCode.apply(null,a);while(e<f)b==="array"||b==="nodebuffer"?d.push(String.fromCharCode.apply(null,a.slice(e,Math.min(e+c,f)))):d.push(String.fromCharCode.apply(null,a.subarray(e,Math.min(e+c,f)))),e+=c;return d.join("")},stringifyByChar:function(a){var b="";for(var c=0;c<a.length;c++)b+=String.fromCharCode(a[c]);return b},applyCanBeUsed:{uint8array:function(){try{return a.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch(a){return!1}}(),nodebuffer:function(){try{return a.nodebuffer&&String.fromCharCode.apply(null,c.allocBuffer(1)).length===1}catch(a){return!1}}()}};function k(a){var b=65536,c=C.getTypeOf(a),d=!0;c==="uint8array"?d=j.applyCanBeUsed.uint8array:c==="nodebuffer"&&(d=j.applyCanBeUsed.nodebuffer);if(d)while(b>1)try{return j.stringifyByChunk(a,c,b)}catch(a){b=Math.floor(b/2)}return j.stringifyByChar(a)}C.applyFromCharCode=k;function l(a,b){for(var c=0;c<a.length;c++)b[c]=a[c];return b}var m={};m.string={string:g,array:function(a){return i(a,new Array(a.length))},arraybuffer:function(a){return m.string.uint8array(a).buffer},uint8array:function(a){return i(a,new Uint8Array(a.length))},nodebuffer:function(a){return i(a,c.allocBuffer(a.length))}};m.array={string:k,array:g,arraybuffer:function(a){return new Uint8Array(a).buffer},uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return c.newBufferFrom(a)}};m.arraybuffer={string:function(a){return k(new Uint8Array(a))},array:function(a){return l(new Uint8Array(a),new Array(a.byteLength))},arraybuffer:g,uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return c.newBufferFrom(new Uint8Array(a))}};m.uint8array={string:k,array:function(a){return l(a,new Array(a.length))},arraybuffer:function(a){return a.buffer},uint8array:g,nodebuffer:function(a){return c.newBufferFrom(a)}};m.nodebuffer={string:k,array:function(a){return l(a,new Array(a.length))},arraybuffer:function(a){return m.nodebuffer.uint8array(a).buffer},uint8array:function(a){return l(a,new Uint8Array(a.length))},nodebuffer:g};C.transformTo=function(a,b){b||(b="");if(!a)return b;C.checkSupport(a);var c=C.getTypeOf(b);c=m[c][a](b);return c};C.getTypeOf=function(b){if(typeof b==="string")return"string";if(Object.prototype.toString.call(b)==="[object Array]")return"array";if(a.nodebuffer&&c.isBuffer(b))return"nodebuffer";if(a.uint8array&&b instanceof Uint8Array)return"uint8array";if(a.arraybuffer&&b instanceof ArrayBuffer)return"arraybuffer"};C.checkSupport=function(b){var c=a[b.toLowerCase()];if(!c)throw new Error(b+" is not supported by this platform")};C.MAX_VALUE_16BITS=65535;C.MAX_VALUE_32BITS=-1;C.pretty=function(a){var b="",c,d;for(d=0;d<(a||"").length;d++)c=a.charCodeAt(d),b+="\\x"+(c<16?"0":"")+c.toString(16).toUpperCase();return b};C.delay=function(a,b,c){d(function(){a.apply(c||null,b||[])})};C.inherits=function(a,b){var c=function(){};c.prototype=b.prototype;a.prototype=new c()};C.extend=function(){var a={},b,c;for(b=0;b<arguments.length;b++)for(c in arguments[b])arguments[b].hasOwnProperty(c)&&typeof a[c]==="undefined"&&(a[c]=arguments[b][c]);return a};C.prepareContent=function(c,d,g,h,i){d=e.Promise.resolve(d).then(function(b){var c=a.blob&&(b instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(b))!==-1);if(c&&typeof FileReader!=="undefined")return new e.Promise(function(a,c){var d=new FileReader();d.onload=function(b){a(b.target.result)};d.onerror=function(a){c(a.target.error)};d.readAsArrayBuffer(b)});else return b});return d.then(function(a){var d=C.getTypeOf(a);if(!d)return e.Promise.reject(new Error("Can't read the data of '"+c+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"));d==="arraybuffer"?a=C.transformTo("uint8array",a):d==="string"&&(i?a=b.decode(a):g&&(h!==!0&&(a=f(a))));return a})}}var D=!1;function E(){D||(D=!0,ba());return aa.exports}f={};var F={exports:f};function ca(){function a(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){if(this.isFinished)return!1;this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp());return!0},on:function(a,b){this._listeners[a].push(b);return this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,b){if(this._listeners[a])for(var c=0;c<this._listeners[a].length;c++)this._listeners[a][c].call(this,b)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo;this.mergeStreamInfo();this.previous=a;var b=this;a.on("data",function(a){b.processChunk(a)});a.on("end",function(){b.end()});a.on("error",function(a){b.error(a)});return this},pause:function(){if(this.isPaused||this.isFinished)return!1;this.isPaused=!0;this.previous&&this.previous.pause();return!0},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var a=!1;this.generatedError&&(this.error(this.generatedError),a=!0);this.previous&&this.previous.resume();return!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,b){this.extraStreamInfo[a]=b;this.mergeStreamInfo();return this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo){if(!this.extraStreamInfo.hasOwnProperty(a))continue;this.streamInfo[a]=this.extraStreamInfo[a]}},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0;this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;if(this.previous)return this.previous+" -> "+a;else return a}};F.exports=a}var G=!1;function H(){G||(G=!0,ca());return F.exports}var I={},da={exports:I};function ea(){var a=E(),b=o(),c=x(),d=H(),e=new Array(256);for(var f=0;f<256;f++)e[f]=f>=252?6:f>=248?5:f>=240?4:f>=224?3:f>=192?2:1;e[254]=e[254]=1;var g=function(c){var d,e,f,g,a,h=c.length,i=0;for(g=0;g<h;g++)e=c.charCodeAt(g),(e&64512)===55296&&g+1<h&&(f=c.charCodeAt(g+1),(f&64512)===56320&&(e=65536+(e-55296<<10)+(f-56320),g++)),i+=e<128?1:e<2048?2:e<65536?3:4;b.uint8array?d=new Uint8Array(i):d=new Array(i);for(a=0,g=0;a<i;g++)e=c.charCodeAt(g),(e&64512)===55296&&g+1<h&&(f=c.charCodeAt(g+1),(f&64512)===56320&&(e=65536+(e-55296<<10)+(f-56320),g++)),e<128?d[a++]=e:e<2048?(d[a++]=192|e>>>6,d[a++]=128|e&63):e<65536?(d[a++]=224|e>>>12,d[a++]=128|e>>>6&63,d[a++]=128|e&63):(d[a++]=240|e>>>18,d[a++]=128|e>>>12&63,d[a++]=128|e>>>6&63,d[a++]=128|e&63);return d},h=function(a,b){var c;b=b||a.length;b>a.length&&(b=a.length);c=b-1;while(c>=0&&(a[c]&192)===128)c--;if(c<0)return b;return c===0?b:c+e[a[c]]>b?c:b},i=function(c){var b,d,f,g,h=c.length,i=new Array(h*2);for(d=0,b=0;b<h;){f=c[b++];if(f<128){i[d++]=f;continue}g=e[f];if(g>4){i[d++]=65533;b+=g-1;continue}f&=g===2?31:g===3?15:7;while(g>1&&b<h)f=f<<6|c[b++]&63,g--;if(g>1){i[d++]=65533;continue}f<65536?i[d++]=f:(f-=65536,i[d++]=55296|f>>10&1023,i[d++]=56320|f&1023)}i.length!==d&&(i.subarray?i=i.subarray(0,d):i.length=d);return a.applyFromCharCode(i)};I.utf8encode=function(a){return b.nodebuffer?c.newBufferFrom(a,"utf-8"):g(a)};I.utf8decode=function(c){if(b.nodebuffer)return a.transformTo("nodebuffer",c).toString("utf-8");c=a.transformTo(b.uint8array?"uint8array":"array",c);return i(c)};function j(){d.call(this,"utf-8 decode"),this.leftOver=null}a.inherits(j,d);j.prototype.processChunk=function(c){var d=a.transformTo(b.uint8array?"uint8array":"array",c.data);if(this.leftOver&&this.leftOver.length){if(b.uint8array){var e=d;d=new Uint8Array(e.length+this.leftOver.length);d.set(this.leftOver,0);d.set(e,this.leftOver.length)}else d=this.leftOver.concat(d);this.leftOver=null}e=h(d);var f=d;e!==d.length&&(b.uint8array?(f=d.subarray(0,e),this.leftOver=d.subarray(e,d.length)):(f=d.slice(0,e),this.leftOver=d.slice(e,d.length)));this.push({data:I.utf8decode(f),meta:c.meta})};j.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:I.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)};I.Utf8DecodeWorker=j;function k(){d.call(this,"utf-8 encode")}a.inherits(k,d);k.prototype.processChunk=function(a){this.push({data:I.utf8encode(a.data),meta:a.meta})};I.Utf8EncodeWorker=k}var J=!1;function K(){J||(J=!0,ea());return da.exports}b={};var L={exports:b};function fa(){var a=H(),b=E();function c(b){a.call(this,"ConvertWorker to "+b),this.destType=b}b.inherits(c,a);c.prototype.processChunk=function(a){this.push({data:b.transformTo(this.destType,a.data),meta:a.meta})};L.exports=c}var M=!1;function ga(){M||(M=!0,fa());return L.exports}c={};var N={exports:c};function ha(){var a=g().Readable,b=E();b.inherits(c,a);function c(b,c,d){a.call(this,c);this._helper=b;var e=this;b.on("data",function(a,b){e.push(a)||e._helper.pause(),d&&d(b)}).on("error",function(a){e.emit("error",a)}).on("end",function(){e.push(null)})}c.prototype._read=function(){this._helper.resume()};N.exports=c}var O=!1;function ia(){O||(O=!0,ha());return N.exports}d={};var P={exports:d};function ja(){var a=E(),b=ga(),c=H(),d=t(),e=o(),f=B(),g=null;if(e.nodestream)try{g=ia()}catch(a){}function h(b,c,e){switch(b){case"blob":return a.newBlob(a.transformTo("arraybuffer",c),e);case"base64":return d.encode(c);default:return a.transformTo(b,c)}}function i(a,b){var c,d=0,e=null,f=0;for(c=0;c<b.length;c++)f+=b[c].length;switch(a){case"string":return b.join("");case"array":return Array.prototype.concat.apply([],b);case"uint8array":e=new Uint8Array(f);for(c=0;c<b.length;c++)e.set(b[c],d),d+=b[c].length;return e;case"nodebuffer":return Buffer.concat(b);default:throw new Error("concat : unsupported type '"+a+"'")}}function j(a,b){return new f.Promise(function(c,d){var e=[],f=a._internalType,g=a._outputType,j=a._mimeType;a.on("data",function(a,c){e.push(a),b&&b(c)}).on("error",function(a){e=[],d(a)}).on("end",function(){try{var a=h(g,i(f,e),j);c(a)}catch(a){d(a)}e=[]}).resume()})}function k(d,e,f){var g=e;switch(e){case"blob":case"arraybuffer":g="uint8array";break;case"base64":g="string";break}try{this._internalType=g,this._outputType=e,this._mimeType=f,a.checkSupport(g),this._worker=d.pipe(new b(g)),d.lock()}catch(a){this._worker=new c("error"),this._worker.error(a)}}k.prototype={accumulate:function(a){return j(this,a)},on:function(b,c){var d=this;b==="data"?this._worker.on(b,function(a){c.call(d,a.data,a.meta)}):this._worker.on(b,function(){a.delay(c,arguments,d)});return this},resume:function(){a.delay(this._worker.resume,[],this._worker);return this},pause:function(){this._worker.pause();return this},toNodejsStream:function(b){a.checkSupport("nodestream");if(this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new g(this,{objectMode:this._outputType!=="nodebuffer"},b)}};P.exports=k}var Q=!1;function R(){Q||(Q=!0,ja());return P.exports}var S={},ka={exports:S};function la(){S.base64=!1,S.binary=!1,S.dir=!1,S.createFolders=!0,S.date=null,S.compression=null,S.compressionOptions=null,S.comment=null,S.unixPermissions=null,S.dosPermissions=null}var T=!1;function U(){T||(T=!0,la());return ka.exports}f={};var V={exports:f};function ma(){var a=E(),b=H(),c=16*1024;function d(c){b.call(this,"DataWorker");var d=this;this.dataIsReady=!1;this.index=0;this.max=0;this.data=null;this.type="";this._tickScheduled=!1;c.then(function(b){d.dataIsReady=!0,d.data=b,d.max=b&&b.length||0,d.type=a.getTypeOf(b),d.isPaused||d._tickAndRepeat()},function(a){d.error(a)})}a.inherits(d,b);d.prototype.cleanUp=function(){b.prototype.cleanUp.call(this),this.data=null};d.prototype.resume=function(){if(!b.prototype.resume.call(this))return!1;!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this));return!0};d.prototype._tickAndRepeat=function(){this._tickScheduled=!1;if(this.isPaused||this.isFinished)return;this._tick();this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0)};d.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var a=c,b=null;a=Math.min(this.max,this.index+a);if(this.index>=this.max)return this.end();else{switch(this.type){case"string":b=this.data.substring(this.index,a);break;case"uint8array":b=this.data.subarray(this.index,a);break;case"array":case"nodebuffer":b=this.data.slice(this.index,a);break}this.index=a;return this.push({data:b,meta:{percent:this.max?this.index/this.max*100:0}})}};V.exports=d}var na=!1;function oa(){na||(na=!0,ma());return V.exports}b={};var pa={exports:b};function qa(){var a=E(),b=H();function c(a){b.call(this,"DataLengthProbe for "+a),this.propName=a,this.withStreamInfo(a,0)}a.inherits(c,b);c.prototype.processChunk=function(a){if(a){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+a.data.length}b.prototype.processChunk.call(this,a)};pa.exports=c}var ra=!1;function sa(){ra||(ra=!0,qa());return pa.exports}c={};var ta={exports:c};function ua(){var a=E();function b(){var a,b=[];for(var c=0;c<256;c++){a=c;for(var d=0;d<8;d++)a=a&1?3988292384^a>>>1:a>>>1;b[c]=a}return b}var c=b();function d(a,b,d,e){var f=c;d=e+d;a=a^-1;for(e=e;e<d;e++)a=a>>>8^f[(a^b[e])&255];return a^-1}function e(a,b,d,e){var f=c;d=e+d;a=a^-1;for(e=e;e<d;e++)a=a>>>8^f[(a^b.charCodeAt(e))&255];return a^-1}ta.exports=function(b,c){if(typeof b==="undefined"||!b.length)return 0;var f=a.getTypeOf(b)!=="string";if(f)return d(c|0,b,b.length,0);else return e(c|0,b,b.length,0)}}var va=!1;function W(){va||(va=!0,ua());return ta.exports}d={};var wa={exports:d};function xa(){var a=H(),b=W(),c=E();function d(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}c.inherits(d,a);d.prototype.processChunk=function(a){this.streamInfo.crc32=b(a.data,this.streamInfo.crc32||0),this.push(a)};wa.exports=d}var ya=!1;function za(){ya||(ya=!0,xa());return wa.exports}f={};var Aa={exports:f};function Ba(){var a=B(),b=oa(),c=sa(),d=za(),c=sa();function e(a,b,c,d,e){this.compressedSize=a,this.uncompressedSize=b,this.crc32=c,this.compression=d,this.compressedContent=e}e.prototype={getContentWorker:function(){var d=new b(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),e=this;d.on("end",function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")});return d},getCompressedWorker:function(){return new b(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}};e.createWorkerFrom=function(a,b,e){return a.pipe(new d()).pipe(new c("uncompressedSize")).pipe(b.compressWorker(e)).pipe(new c("compressedSize")).withStreamInfo("compression",b)};Aa.exports=e}var Ca=!1;function X(){Ca||(Ca=!0,Ba());return Aa.exports}b={};var Da={exports:b};function Ea(){var a=R(),b=oa(),c=K(),d=X(),e=H(),f=function(a,b,c){this.name=a,this.dir=c.dir,this.date=c.date,this.comment=c.comment,this.unixPermissions=c.unixPermissions,this.dosPermissions=c.dosPermissions,this._data=b,this._dataBinary=c.binary,this.options={compression:c.compression,compressionOptions:c.compressionOptions}};f.prototype={internalStream:function(b){var d=null,f="string";try{if(!b)throw new Error("No output type specified.");f=b.toLowerCase();b=f==="string"||f==="text";(f==="binarystring"||f==="text")&&(f="string");d=this._decompressWorker();var g=!this._dataBinary;g&&!b&&(d=d.pipe(new c.Utf8EncodeWorker()));!g&&b&&(d=d.pipe(new c.Utf8DecodeWorker()))}catch(a){d=new e("error"),d.error(a)}return new a(d,f,"")},async:function(a,b){return this.internalStream(a).accumulate(b)},nodeStream:function(a,b){return this.internalStream(a||"nodebuffer").toNodejsStream(b)},_compressWorker:function(a,b){if(this._data instanceof d&&this._data.compression.magic===a.magic)return this._data.getCompressedWorker();else{var e=this._decompressWorker();this._dataBinary||(e=e.pipe(new c.Utf8EncodeWorker()));return d.createWorkerFrom(e,a,b)}},_decompressWorker:function(){if(this._data instanceof d)return this._data.getContentWorker();else if(this._data instanceof e)return this._data;else return new b(this._data)}};var g=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")};for(var i=0;i<g.length;i++)f.prototype[g[i]]=h;Da.exports=f}var Fa=!1;function Ga(){Fa||(Fa=!0,Ea());return Da.exports}var Y={},Ha={exports:Y};function Ia(){var a=typeof Uint8Array!=="undefined"&&typeof Uint16Array!=="undefined"&&typeof Uint32Array!=="undefined",b=j(),c=E(),d=H(),e=a?"uint8array":"array";Y.magic="\b\0";function f(a,b){d.call(this,"FlateWorker/"+a),this._pako=null,this._pakoAction=a,this._pakoOptions=b,this.meta={}}c.inherits(f,d);f.prototype.processChunk=function(a){this.meta=a.meta,this._pako===null&&this._createPako(),this._pako.push(c.transformTo(e,a.data),!1)};f.prototype.flush=function(){d.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)};f.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this._pako=null};f.prototype._createPako=function(){this._pako=new b[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var a=this;this._pako.onData=function(b){a.push({data:b,meta:a.meta})}};Y.compressWorker=function(a){return new f("Deflate",a)};Y.uncompressWorker=function(){return new f("Inflate",{})}}var Ja=!1;function Ka(){Ja||(Ja=!0,Ia());return Ha.exports}var Z={},La={exports:Z};function Ma(){var a=H();Z.STORE={magic:"\0\0",compressWorker:function(b){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}};Z.DEFLATE=Ka()}var Na=!1;function Oa(){Na||(Na=!0,Ma());return La.exports}var $={},Pa={exports:$};function Qa(){$.LOCAL_FILE_HEADER="PK\x03\x04",$.CENTRAL_FILE_HEADER="PK\x01\x02",$.CENTRAL_DIRECTORY_END="PK\x05\x06",$.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",$.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",$.DATA_DESCRIPTOR="PK\x07\b"}var Ra=!1;function Sa(){Ra||(Ra=!0,Qa());return Pa.exports}c={};var Ta={exports:c};function Ua(){var a=E(),b=H(),c=K(),d=W(),e=Sa(),f=function(a,b){var c="",d;for(d=0;d<b;d++)c+=String.fromCharCode(a&255),a=a>>>8;return c},g=function(a,b){var c=a;a||(c=b?16893:33204);return(c&65535)<<16},h=function(a,b){return(a||0)&63},i=function(b,i,j,k,l,m){var n=b.file,o=b.compression,p=m!==c.utf8encode,q=a.transformTo("string",m(n.name)),r=a.transformTo("string",c.utf8encode(n.name)),s=n.comment;m=a.transformTo("string",m(s));var t=a.transformTo("string",c.utf8encode(s)),u=r.length!==n.name.length;s=t.length!==s.length;var v="",w="",x="",y=n.dir,z=n.date,A={crc32:0,compressedSize:0,uncompressedSize:0};(!i||j)&&(A.crc32=b.crc32,A.compressedSize=b.compressedSize,A.uncompressedSize=b.uncompressedSize);j=0;i&&(j|=8);!p&&(u||s)&&(j|=2048);b=0;i=0;y&&(b|=16);l==="UNIX"?(i=798,b|=g(n.unixPermissions,y)):(i=20,b|=h(n.dosPermissions));p=z.getUTCHours();p=p<<6;p=p|z.getUTCMinutes();p=p<<5;p=p|z.getUTCSeconds()/2;l=z.getUTCFullYear()-1980;l=l<<4;l=l|z.getUTCMonth()+1;l=l<<5;l=l|z.getUTCDate();u&&(w=f(1,1)+f(d(q),4)+r,v+="up"+f(w.length,2)+w);s&&(x=f(1,1)+f(d(m),4)+t,v+="uc"+f(x.length,2)+x);y="";y+="\n\0";y+=f(j,2);y+=o.magic;y+=f(p,2);y+=f(l,2);y+=f(A.crc32,4);y+=f(A.compressedSize,4);y+=f(A.uncompressedSize,4);y+=f(q.length,2);y+=f(v.length,2);n=e.LOCAL_FILE_HEADER+y+q+v;z=e.CENTRAL_FILE_HEADER+f(i,2)+y+f(m.length,2)+"\0\0\0\0"+f(b,4)+f(k,4)+q+v+m;return{fileRecord:n,dirRecord:z}},j=function(b,c,d,g,h){h=a.transformTo("string",h(g));g=e.CENTRAL_DIRECTORY_END+"\0\0\0\0"+f(b,2)+f(b,2)+f(c,4)+f(d,4)+f(h.length,2)+h;return g},k=function(a){a=e.DATA_DESCRIPTOR+f(a.crc32,4)+f(a.compressedSize,4)+f(a.uncompressedSize,4);return a};function l(a,c,d,e){b.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=c,this.zipPlatform=d,this.encodeFileName=e,this.streamFiles=a,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(l,b);l.prototype.push=function(a){var c=a.meta.percent||0,d=this.entriesCount,e=this._sources.length;this.accumulate?this.contentBuffer.push(a):(this.bytesWritten+=a.data.length,b.prototype.push.call(this,{data:a.data,meta:{currentFile:this.currentFile,percent:d?(c+100*(d-e-1))/d:100}}))};l.prototype.openedSource=function(a){this.currentSourceOffset=this.bytesWritten;this.currentFile=a.file.name;var b=this.streamFiles&&!a.file.dir;if(b){a=i(a,b,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:a.fileRecord,meta:{percent:0}})}else this.accumulate=!0};l.prototype.closedSource=function(a){this.accumulate=!1;var b=this.streamFiles&&!a.file.dir,c=i(a,b,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.dirRecords.push(c.dirRecord);if(b)this.push({data:k(a),meta:{percent:100}});else{this.push({data:c.fileRecord,meta:{percent:0}});while(this.contentBuffer.length)this.push(this.contentBuffer.shift())}this.currentFile=null};l.prototype.flush=function(){var a=this.bytesWritten;for(var b=0;b<this.dirRecords.length;b++)this.push({data:this.dirRecords[b],meta:{percent:100}});b=this.bytesWritten-a;b=j(this.dirRecords.length,b,a,this.zipComment,this.encodeFileName);this.push({data:b,meta:{percent:100}})};l.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()};l.prototype.registerPrevious=function(a){this._sources.push(a);var b=this;a.on("data",function(a){b.processChunk(a)});a.on("end",function(){b.closedSource(b.previous.streamInfo),b._sources.length?b.prepareNextSource():b.end()});a.on("error",function(a){b.error(a)});return this};l.prototype.resume=function(){if(!b.prototype.resume.call(this))return!1;if(!this.previous&&this._sources.length){this.prepareNextSource();return!0}if(!this.previous&&!this._sources.length&&!this.generatedError){this.end();return!0}};l.prototype.error=function(a){var c=this._sources;if(!b.prototype.error.call(this,a))return!1;for(var d=0;d<c.length;d++)try{c[d].error(a)}catch(a){}return!0};l.prototype.lock=function(){b.prototype.lock.call(this);var a=this._sources;for(var c=0;c<a.length;c++)a[c].lock()};Ta.exports=l}var Va=!1;function Wa(){Va||(Va=!0,Ua());return Ta.exports}var Xa={},Ya={exports:Xa};function Za(){var a=Oa(),b=Wa(),c=function(b,c){b=b||c;c=a[b];if(!c)throw new Error(b+" is not a valid compression method !");return c};Xa.generateWorker=function(a,d,e){var f=new b(d.streamFiles,e,d.platform,d.encodeFileName),g=0;try{a.forEach(function(a,b){g++;var e=c(b.options.compression,d.compression),h=b.options.compressionOptions||d.compressionOptions||{},i=b.dir,j=b.date;b._compressWorker(e,h).withStreamInfo("file",{name:a,dir:i,date:j,comment:b.comment||"",unixPermissions:b.unixPermissions,dosPermissions:b.dosPermissions}).pipe(f)}),f.entriesCount=g}catch(a){f.error(a)}return f}}var $a=!1;function ab(){$a||($a=!0,Za());return Ya.exports}d={};var bb={exports:d};function cb(){var a=E(),b=H();function c(a,c){b.call(this,"Nodejs stream input adapter for "+a),this._upstreamEnded=!1,this._bindStream(c)}a.inherits(c,b);c.prototype._bindStream=function(a){var b=this;this._stream=a;a.pause();a.on("data",function(a){b.push({data:a,meta:{percent:0}})}).on("error",function(a){b.isPaused?this.generatedError=a:b.error(a)}).on("end",function(){b.isPaused?b._upstreamEnded=!0:b.end()})};c.prototype.pause=function(){if(!b.prototype.pause.call(this))return!1;this._stream.pause();return!0};c.prototype.resume=function(){if(!b.prototype.resume.call(this))return!1;this._upstreamEnded?this.end():this._stream.resume();return!0};bb.exports=c}var db=!1;function eb(){db||(db=!0,cb());return bb.exports}f={};var fb={exports:f};function gb(){var a=K(),b=E(),c=H(),d=R(),e=U(),f=X(),g=Ga(),h=ab(),i=x(),j=eb(),k=function(a,d,h){var k=b.getTypeOf(d),o,p=b.extend(h||{},e);p.date=p.date||new Date();p.compression!==null&&(p.compression=p.compression.toUpperCase());typeof p.unixPermissions==="string"&&(p.unixPermissions=parseInt(p.unixPermissions,8));p.unixPermissions&&p.unixPermissions&16384&&(p.dir=!0);p.dosPermissions&&p.dosPermissions&16&&(p.dir=!0);p.dir&&(a=m(a));p.createFolders&&(o=l(a))&&n.call(this,o,!0);var q=k==="string"&&p.binary===!1&&p.base64===!1;(!h||typeof h.binary==="undefined")&&(p.binary=!q);h=d instanceof f&&d.uncompressedSize===0;(h||p.dir||!d||d.length===0)&&(p.base64=!1,p.binary=!0,d="",p.compression="STORE",k="string");d instanceof f||d instanceof c?q=d:i.isNode&&i.isStream(d)?q=new j(a,d):q=b.prepareContent(a,d,p.binary,p.optimizedBinaryString,p.base64);h=new g(a,q,p);this.files[a]=h},l=function(a){a.slice(-1)==="/"&&(a=a.substring(0,a.length-1));var b=a.lastIndexOf("/");return b>0?a.substring(0,b):""},m=function(a){a.slice(-1)!=="/"&&(a+="/");return a},n=function(a,b){b=typeof b!=="undefined"?b:e.createFolders;a=m(a);this.files[a]||k.call(this,a,null,{dir:!0,createFolders:b});return this.files[a]};function o(a){return Object.prototype.toString.call(a)==="[object RegExp]"}var p={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(a){var b,c,d;for(b in this.files){if(!this.files.hasOwnProperty(b))continue;d=this.files[b];c=b.slice(this.root.length,b.length);c&&b.slice(0,this.root.length)===this.root&&a(c,d)}},filter:function(a){var b=[];this.forEach(function(c,d){a(c,d)&&b.push(d)});return b},file:function(a,b,c){if(arguments.length===1)if(o(a)){var d=a;return this.filter(function(a,b){return!b.dir&&d.test(a)})}else{var e=this.files[this.root+a];if(e&&!e.dir)return e;else return null}else a=this.root+a,k.call(this,a,b,c);return this},folder:function(a){if(!a)return this;if(o(a))return this.filter(function(b,c){return c.dir&&a.test(b)});var b=this.root+a;b=n.call(this,b);var c=this.clone();c.root=b.name;return c},remove:function(a){a=this.root+a;var b=this.files[a];b||(a.slice(-1)!=="/"&&(a+="/"),b=this.files[a]);if(b&&!b.dir)delete this.files[a];else{b=this.filter(function(c,b){return b.name.slice(0,a.length)===a});for(var c=0;c<b.length;c++)delete this.files[b[c].name]}return this},generate:function(a){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var f,g={};try{g=b.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode});g.type=g.type.toLowerCase();g.compression=g.compression.toUpperCase();g.type==="binarystring"&&(g.type="string");if(!g.type)throw new Error("No output type specified.");b.checkSupport(g.type);(g.platform==="darwin"||g.platform==="freebsd"||g.platform==="linux"||g.platform==="sunos")&&(g.platform="UNIX");g.platform==="win32"&&(g.platform="DOS");e=g.comment||this.comment||"";f=h.generateWorker(this,g,e)}catch(a){f=new c("error"),f.error(a)}return new d(f,g.type||"string",g.mimeType)},generateAsync:function(a,b){return this.generateInternalStream(a).accumulate(b)},generateNodeStream:function(a,b){a=a||{};a.type||(a.type="nodebuffer");return this.generateInternalStream(a).toNodejsStream(b)}};fb.exports=p}var hb=!1;function ib(){hb||(hb=!0,gb());return fb.exports}b={};var jb={exports:b};function kb(){var a=E();function b(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}b.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(a){},readInt:function(a){var b=0,c;this.checkOffset(a);for(c=this.index+a-1;c>=this.index;c--)b=(b<<8)+this.byteAt(c);this.index+=a;return b},readString:function(b){return a.transformTo("string",this.readData(b))},readData:function(a){},lastIndexOfSignature:function(a){},readAndCheckSignature:function(a){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC((a>>25&127)+1980,(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(a&31)<<1))}};jb.exports=b}var lb=!1;function mb(){lb||(lb=!0,kb());return jb.exports}c={};var nb={exports:c};function ob(){var a=mb(),b=E();function c(b){a.call(this,b);for(var c=0;c<this.data.length;c++)b[c]=b[c]&255}b.inherits(c,a);c.prototype.byteAt=function(a){return this.data[this.zero+a]};c.prototype.lastIndexOfSignature=function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1),d=a.charCodeAt(2);a=a.charCodeAt(3);for(var e=this.length-4;e>=0;--e)if(this.data[e]===b&&this.data[e+1]===c&&this.data[e+2]===d&&this.data[e+3]===a)return e-this.zero;return-1};c.prototype.readAndCheckSignature=function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1),d=a.charCodeAt(2);a=a.charCodeAt(3);var e=this.readData(4);return b===e[0]&&c===e[1]&&d===e[2]&&a===e[3]};c.prototype.readData=function(a){this.checkOffset(a);if(a===0)return[];var b=this.data.slice(this.zero+this.index,this.zero+this.index+a);this.index+=a;return b};nb.exports=c}var pb=!1;function qb(){pb||(pb=!0,ob());return nb.exports}d={};var rb={exports:d};function sb(){var a=mb(),b=E();function c(b){a.call(this,b)}b.inherits(c,a);c.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)};c.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero};c.prototype.readAndCheckSignature=function(a){var b=this.readData(4);return a===b};c.prototype.readData=function(a){this.checkOffset(a);var b=this.data.slice(this.zero+this.index,this.zero+this.index+a);this.index+=a;return b};rb.exports=c}var tb=!1;function ub(){tb||(tb=!0,sb());return rb.exports}f={};var vb={exports:f};function wb(){var a=qb(),b=E();function c(b){a.call(this,b)}b.inherits(c,a);c.prototype.readData=function(a){this.checkOffset(a);if(a===0)return new Uint8Array(0);var b=this.data.subarray(this.zero+this.index,this.zero+this.index+a);this.index+=a;return b};vb.exports=c}var xb=!1;function yb(){xb||(xb=!0,wb());return vb.exports}b={};var zb={exports:b};function Ab(){var a=yb(),b=E();function c(b){a.call(this,b)}b.inherits(c,a);c.prototype.readData=function(a){this.checkOffset(a);var b=this.data.slice(this.zero+this.index,this.zero+this.index+a);this.index+=a;return b};zb.exports=c}var Bb=!1;function Cb(){Bb||(Bb=!0,Ab());return zb.exports}c={};var Db={exports:c};function Eb(){var a=E(),b=o(),c=qb(),d=ub(),e=Cb(),f=yb();Db.exports=function(g){var h=a.getTypeOf(g);a.checkSupport(h);if(h==="string"&&!b.uint8array)return new d(g);if(h==="nodebuffer")return new e(g);return b.uint8array?new f(a.transformTo("uint8array",g)):new c(a.transformTo("array",g))}}var Fb=!1;function Gb(){Fb||(Fb=!0,Eb());return Db.exports}d={};var Hb={exports:d};function Ib(){var a=Gb(),b=E(),c=X(),d=W(),e=K(),f=Oa(),g=o(),h=0,i=3,j=function(a){for(var b in f){if(!f.hasOwnProperty(b))continue;if(f[b].magic===a)return f[b]}return null};function k(a,b){this.options=a,this.loadOptions=b}k.prototype={isEncrypted:function(){return(this.bitFlag&1)===1},useUTF8:function(){return(this.bitFlag&2048)===2048},readLocalPart:function(a){var d;a.skip(22);this.fileNameLength=a.readInt(2);d=a.readInt(2);this.fileName=a.readData(this.fileNameLength);a.skip(d);if(this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");d=j(this.compressionMethod);if(d===null)throw new Error("Corrupted zip : compression "+b.pretty(this.compressionMethod)+" unknown (inner file : "+b.transformTo("string",this.fileName)+")");this.decompressed=new c(this.compressedSize,this.uncompressedSize,this.crc32,d,a.readData(this.compressedSize))},readCentralPart:function(a){this.versionMadeBy=a.readInt(2);a.skip(2);this.bitFlag=a.readInt(2);this.compressionMethod=a.readString(2);this.date=a.readDate();this.crc32=a.readInt(4);this.compressedSize=a.readInt(4);this.uncompressedSize=a.readInt(4);var b=a.readInt(2);this.extraFieldsLength=a.readInt(2);this.fileCommentLength=a.readInt(2);this.diskNumberStart=a.readInt(2);this.internalFileAttributes=a.readInt(2);this.externalFileAttributes=a.readInt(4);this.localHeaderOffset=a.readInt(4);if(this.isEncrypted())throw new Error("Encrypted zip are not supported");a.skip(b);this.readExtraFields(a);this.parseZIP64ExtraField(a);this.fileComment=a.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null;this.dosPermissions=null;var a=this.versionMadeBy>>8;this.dir=this.externalFileAttributes&16?!0:!1;a===h&&(this.dosPermissions=this.externalFileAttributes&63);a===i&&(this.unixPermissions=this.externalFileAttributes>>16&65535);!this.dir&&this.fileNameStr.slice(-1)==="/"&&(this.dir=!0)},parseZIP64ExtraField:function(c){if(!this.extraFields[1])return;c=a(this.extraFields[1].value);this.uncompressedSize===b.MAX_VALUE_32BITS&&(this.uncompressedSize=c.readInt(8));this.compressedSize===b.MAX_VALUE_32BITS&&(this.compressedSize=c.readInt(8));this.localHeaderOffset===b.MAX_VALUE_32BITS&&(this.localHeaderOffset=c.readInt(8));this.diskNumberStart===b.MAX_VALUE_32BITS&&(this.diskNumberStart=c.readInt(4))},readExtraFields:function(a){var b=a.index+this.extraFieldsLength,c,d,e;this.extraFields||(this.extraFields={});while(a.index<b)c=a.readInt(2),d=a.readInt(2),e=a.readData(d),this.extraFields[c]={id:c,length:d,value:e}},handleUTF8:function(){var a=g.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=e.utf8decode(this.fileName),this.fileCommentStr=e.utf8decode(this.fileComment);else{var c=this.findExtraFieldUnicodePath();if(c!==null)this.fileNameStr=c;else{c=b.transformTo(a,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(c)}c=this.findExtraFieldUnicodeComment();if(c!==null)this.fileCommentStr=c;else{c=b.transformTo(a,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(c)}}},findExtraFieldUnicodePath:function(){var b=this.extraFields[28789];if(b){var c=a(b.value);if(c.readInt(1)!==1)return null;return d(this.fileName)!==c.readInt(4)?null:e.utf8decode(c.readData(b.length-5))}return null},findExtraFieldUnicodeComment:function(){var b=this.extraFields[25461];if(b){var c=a(b.value);if(c.readInt(1)!==1)return null;return d(this.fileComment)!==c.readInt(4)?null:e.utf8decode(c.readData(b.length-5))}return null}};Hb.exports=k}var Jb=!1;function Kb(){Jb||(Jb=!0,Ib());return Hb.exports}f={};var Lb={exports:f};function Mb(){var a=Gb(),b=E(),c=Sa(),d=Kb();K();var e=o();function f(a){this.files=[],this.loadOptions=a}f.prototype={checkSignature:function(a){if(!this.reader.readAndCheckSignature(a)){this.reader.index-=4;var c=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+b.pretty(c)+", expected "+b.pretty(a)+")")}},isSignature:function(a,b){var c=this.reader.index;this.reader.setIndex(a);a=this.reader.readString(4);a=a===b;this.reader.setIndex(c);return a},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2);this.diskWithCentralDirStart=this.reader.readInt(2);this.centralDirRecordsOnThisDisk=this.reader.readInt(2);this.centralDirRecords=this.reader.readInt(2);this.centralDirSize=this.reader.readInt(4);this.centralDirOffset=this.reader.readInt(4);this.zipCommentLength=this.reader.readInt(2);var a=this.reader.readData(this.zipCommentLength),c=e.uint8array?"uint8array":"array";c=b.transformTo(c,a);this.zipComment=this.loadOptions.decodeFileName(c)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8);this.reader.skip(4);this.diskNumber=this.reader.readInt(4);this.diskWithCentralDirStart=this.reader.readInt(4);this.centralDirRecordsOnThisDisk=this.reader.readInt(8);this.centralDirRecords=this.reader.readInt(8);this.centralDirSize=this.reader.readInt(8);this.centralDirOffset=this.reader.readInt(8);this.zip64ExtensibleData={};var a=this.zip64EndOfCentralSize-44,b=0,c,d,e;while(b<a)c=this.reader.readInt(2),d=this.reader.readInt(4),e=this.reader.readData(d),this.zip64ExtensibleData[c]={id:c,length:d,value:e}},readBlockZip64EndOfCentralLocator:function(){this.diskWithZip64CentralDirStart=this.reader.readInt(4);this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8);this.disksCount=this.reader.readInt(4);if(this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var a,b;for(a=0;a<this.files.length;a++)b=this.files[a],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(c.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var a;this.reader.setIndex(this.centralDirOffset);while(this.reader.readAndCheckSignature(c.CENTRAL_FILE_HEADER))a=new d({zip64:this.zip64},this.loadOptions),a.readCentralPart(this.reader),this.files.push(a);if(this.centralDirRecords!==this.files.length&&(this.centralDirRecords!==0&&this.files.length===0))throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var a=this.reader.lastIndexOfSignature(c.CENTRAL_DIRECTORY_END);if(a<0){var d=!this.isSignature(0,c.LOCAL_FILE_HEADER);if(d)throw new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");else throw new Error("Corrupted zip: can't find end of central directory")}this.reader.setIndex(a);d=a;this.checkSignature(c.CENTRAL_DIRECTORY_END);this.readBlockEndOfCentral();if(this.diskNumber===b.MAX_VALUE_16BITS||this.diskWithCentralDirStart===b.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===b.MAX_VALUE_16BITS||this.centralDirRecords===b.MAX_VALUE_16BITS||this.centralDirSize===b.MAX_VALUE_32BITS||this.centralDirOffset===b.MAX_VALUE_32BITS){this.zip64=!0;a=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR);if(a<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");this.reader.setIndex(a);this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR);this.readBlockZip64EndOfCentralLocator();if(!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,c.ZIP64_CENTRAL_DIRECTORY_END)){this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_END);if(this.relativeOffsetEndOfZip64CentralDir<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory")}this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir);this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_END);this.readBlockZip64EndOfCentral()}a=this.centralDirOffset+this.centralDirSize;this.zip64&&(a+=20,a+=12+this.zip64EndOfCentralSize);a=d-a;if(a>0)this.isSignature(d,c.CENTRAL_FILE_HEADER)||(this.reader.zero=a);else if(a<0)throw new Error("Corrupted zip: missing "+Math.abs(a)+" bytes.")},prepareReader:function(b){this.reader=a(b)},load:function(a){this.prepareReader(a),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}};Lb.exports=f}var Nb=!1;function Ob(){Nb||(Nb=!0,Mb());return Lb.exports}b={};var Pb={exports:b};function Qb(){var a=E(),b=B(),c=K(),a=E(),d=Ob(),e=za(),f=x();function g(a){return new b.Promise(function(b,c){var d=a.decompressed.getContentWorker().pipe(new e());d.on("error",function(a){c(a)}).on("end",function(){d.streamInfo.crc32!==a.decompressed.crc32?c(new Error("Corrupted zip : CRC32 mismatch")):b()}).resume()})}Pb.exports=function(e,h){var i=this;h=a.extend(h||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:c.utf8decode});return f.isNode&&f.isStream(e)?b.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",e,!0,h.optimizedBinaryString,h.base64).then(function(a){var b=new d(h);b.load(a);return b}).then(function(a){var c=[b.Promise.resolve(a)];a=a.files;if(h.checkCRC32)for(var d=0;d<a.length;d++)c.push(g(a[d]));return b.Promise.all(c)}).then(function(a){a=a.shift();var b=a.files;for(var c=0;c<b.length;c++){var d=b[c];i.file(d.fileNameStr,d.decompressed,{binary:!0,optimizedBinaryString:!0,date:d.date,dir:d.dir,comment:d.fileCommentStr.length?d.fileCommentStr:null,unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions,createFolders:h.createFolders})}a.zipComment.length&&(i.comment=a.zipComment);return i})}}var Rb=!1;function Sb(){Rb||(Rb=!0,Qb());return Pb.exports}c={};var Tb={exports:c};function Ub(){function a(){if(!(this instanceof a))return new a();if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={};this.comment=null;this.root="";this.clone=function(){var b=new a();for(var c in this)typeof this[c]!=="function"&&(b[c]=this[c]);return b}}a.prototype=ib();a.prototype.loadAsync=Sb();a.support=o();a.defaults=U();a.version="3.2.0";a.loadAsync=function(b,c){return new a().loadAsync(b,c)};a.external=B();Tb.exports=a}var Vb=!1;function Wb(){Vb||(Vb=!0,Ub());return Tb.exports}function a(a){switch(a){case void 0:return Wb()}}e.exports=a}),null);
__d("jszip",["jszip-3.2.0"],(function(a,b,c,d,e,f){e.exports=b("jszip-3.2.0")()}),null);
/**
 * License: https://www.facebook.com/legal/license/CCT5pM3qiNk/
 */
__d("tweetnacl-auth-1.0.1",["tweetnacl-1.0.3"],(function(a,b,c,d,e,f){"use strict";var g=b("tweetnacl-1.0.3");c={};var h={exports:c};function i(){(function(a,b){typeof h!=="undefined"&&h.exports?h.exports=b(g()):a.nacl.auth=b(a.nacl)})(this,function(a){if(!a)throw new Error("tweetnacl not loaded");var b=128,c=64;function d(d,e){var f=new Uint8Array(b+Math.max(c,d.length)),g;e.length>b&&(e=a.hash(e));for(g=0;g<b;g++)f[g]=54;for(g=0;g<e.length;g++)f[g]^=e[g];f.set(d,b);d=a.hash(f.subarray(0,b+d.length));for(g=0;g<b;g++)f[g]=92;for(g=0;g<e.length;g++)f[g]^=e[g];f.set(d,b);return a.hash(f.subarray(0,b+d.length))}function e(a,b){var c=new Uint8Array(32);c.set(d(a,b).subarray(0,32));return c}e.full=function(a,b){return d(a,b)};e.authLength=32;e.authFullLength=64;e.keyLength=32;return e})}var j=!1;function k(){j||(j=!0,i());return h.exports}function a(a){switch(a){case void 0:return k()}}e.exports=a}),null);
__d("tweetnacl-auth",["tweetnacl-auth-1.0.1"],(function(a,b,c,d,e,f){e.exports=b("tweetnacl-auth-1.0.1")()}),null);/*FB_PKG_DELIM*/
__d("CPXComposerConstants",[],(function(a,b,c,d,e,f){"use strict";a=120;b=68;c=90;d=160;e=10;var g=4;f.THUMBNAIL_WIDTH=a;f.THUMBNAIL_HEIGHT=b;f.REEL_THUMBNAIL_WIDTH=c;f.REEL_THUMBNAIL_HEIGHT=d;f.NUM_OF_THUMBNAILS=e;f.MAX_NUM_THUMBNAILS=g}),66);
__d("CanvasToBlobImpl",["BlobFactory"],(function(a,b,c,d,e,f){function a(a,c){a=atob(a.substr(a.indexOf(",")+1));var d=new Uint8Array(a.length);for(var e=0;e<a.length;e++)d[e]=a.charCodeAt(e);return b("BlobFactory").getBlob([d],{type:c})}e.exports={getBlob:a}}),null);
__d("VideoThumbnail_UNTYPED",["invariant","vulture"],(function(a,b,c,d,e,f,g){a=function(){"use strict";function a(a){this.$1=a}var c=a.prototype;c.getURL=function(){return this.$1};c.getData=function(){b("vulture")("a1B5XUEMmGR-xYeKTjqzsKYluSg="),g(0,4844)};a.addTextToCanvasContext=function(a,c,d,e,f,g,h,i,j){b("vulture")("qikNWy_gjGUk0GFVslGmB8bCVwk=");a.fillStyle=i;a.textAlign=j;a.font=g+"px "+h;i=j==="center"?e+f/2:e;h=1;j=c.split("\n");for(e of j){c="";j="";var k=e.split(" ");for(k of k){j+=k;var l=a.measureText(j).width,m=a.measureText(k).width;if(m>f){c.length>0&&(a.fillText(c,i,d+g*h),h++);m="";var n="";for(var o of k){n+=o;var p=a.measureText(n).width;p>f?(a.fillText(m,i,d+g*h),m=o,n=o,h++):m=n}c=m+" ";j=m+" "}else l>f?(a.fillText(c,i,d+g*h),c=k+" ",j=k+" ",h++):(j+=" ",c=j)}a.fillText(c,i,d+g*h);h++}return a};return a}();e.exports=a}),null);
__d("dataURLToBlob",["BlobFactory","CanvasToBlobImpl","CanvasToBlobResource","Promise","WebWorker"],(function(a,b,c,d,e,f,g){var h,i=a.URL||a.webkitURL||{};function e(a,e){if(!i.createObjectURL||!c("BlobFactory").isSupported)return(h||(h=b("Promise"))).reject("Browser doesn't support this feature");if(c("WebWorker").isSupported())return new(h||(h=b("Promise")))(function(b,d){var f=new(c("WebWorker"))(c("CanvasToBlobResource")).setMessageHandler(function(a){b(a),f.terminate()}).setErrorHandler(function(a){d(a.message),f.terminate()}).execute().postMessage({dataURL:a,fileType:e})});else return(h||(h=b("Promise"))).resolve(d("CanvasToBlobImpl").getBlob(a,e))}g["default"]=e}),98);
__d("canvasToBlob",["Promise","dataURLToBlob","promiseDone"],(function(a,b,c,d,e,f,g){var h;function a(a,d,e){return new(h||(h=b("Promise")))(function(b,f){if(a.toBlob)a.toBlob(b,d,e);else{var g=a.toDataURL(d,e);c("promiseDone")(c("dataURLToBlob")(g,d).then(function(a){b(a)},f))}})}g["default"]=a}),98);
__d("CanvasVideoThumbnail",["EventListener","Promise","VideoThumbnail_UNTYPED","canvasToBlob","promiseDone"],(function(a,b,c,d,e,f,g){var h;a=function(a){babelHelpers.inheritsLoose(d,a);function d(b,c,d,e,f,g,h){var i;e===void 0&&(e=null);f===void 0&&(f=null);g===void 0&&(g=0);h===void 0&&(h=0);i=a.call(this,null)||this;i.$CanvasVideoThumbnail$p_1=b;i.$CanvasVideoThumbnail$p_2=c;i.$CanvasVideoThumbnail$p_3=d;i.$CanvasVideoThumbnail$p_4=e;i.$CanvasVideoThumbnail$p_5=f;i.$CanvasVideoThumbnail$p_6=g;i.$CanvasVideoThumbnail$p_7=h;i.$CanvasVideoThumbnail$p_8=i.$CanvasVideoThumbnail$p_1.toDataURL("image/jpeg");return i}var e=d.prototype;e.getCanvas=function(){return this.$CanvasVideoThumbnail$p_1};e.getTime=function(){return this.$CanvasVideoThumbnail$p_3?this.$CanvasVideoThumbnail$p_3:0};e.getURL=function(){this.$CanvasVideoThumbnail$p_8||(this.$CanvasVideoThumbnail$p_8=this.$CanvasVideoThumbnail$p_1.toDataURL("image/jpeg"));return this.$CanvasVideoThumbnail$p_8};e.getData=function(){var a=this,d=document.createElement("canvas"),e=d.getContext("2d"),f=this.$CanvasVideoThumbnail$p_2;return new(h||(h=b("Promise")))(function(b,g){var h=c("EventListener").listen(f,"seeked",function(){h.remove(),a.$CanvasVideoThumbnail$p_9(d,e),c("promiseDone")(c("canvasToBlob")(d,"image/jpeg").then(b,g))});f.currentTime=a.$CanvasVideoThumbnail$p_3})};e.getDataWithText=function(a,d,e,f,g,i,j,k){var l=this,m=document.createElement("canvas"),n=m.getContext("2d"),o=this.$CanvasVideoThumbnail$p_2;return new(h||(h=b("Promise")))(function(b,h){var p=c("EventListener").listen(o,"seeked",function(){p.remove(),n.fillStyle=j,n.textAlign=k,l.$CanvasVideoThumbnail$p_9(m,n),n=c("VideoThumbnail_UNTYPED").addTextToCanvasContext(n,a,d,e,f,g,i,j,k),c("promiseDone")(c("canvasToBlob")(m,"image/jpeg").then(b,h))});o.currentTime=l.$CanvasVideoThumbnail$p_3})};e.$CanvasVideoThumbnail$p_9=function(a,b){var c=this.$CanvasVideoThumbnail$p_2;this.$CanvasVideoThumbnail$p_4||this.$CanvasVideoThumbnail$p_5?(a.width=this.$CanvasVideoThumbnail$p_4?this.$CanvasVideoThumbnail$p_4:c.videoWidth,a.height=this.$CanvasVideoThumbnail$p_5?this.$CanvasVideoThumbnail$p_5:c.videoHeight,this.$CanvasVideoThumbnail$p_10(a,b)):(a.width=c.videoWidth,a.height=c.videoHeight,b.drawImage(c,0,0,a.width,a.height))};e.$CanvasVideoThumbnail$p_10=function(a,b){var c=this.$CanvasVideoThumbnail$p_2,d=this.$CanvasVideoThumbnail$p_6,e=this.$CanvasVideoThumbnail$p_7,f=this.$CanvasVideoThumbnail$p_4?this.$CanvasVideoThumbnail$p_4:a.width,g=this.$CanvasVideoThumbnail$p_5?this.$CanvasVideoThumbnail$p_5:a.height;b.drawImage(c,d,e,f,g,0,0,a.width,a.height)};return d}(c("VideoThumbnail_UNTYPED"));g["default"]=a}),98);
__d("HTMLMediaElementReadyStates",[],(function(a,b,c,d,e,f){a={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4};b=a;f["default"]=b}),66);
__d("IGDComposerEmojiPicker.react",["IGDSBox.react","IGDSPopover.react","JSResourceForInteraction","WebUXLoggingSurfaceContextProvider","lazyLoadComponent","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("lazyLoadComponent")(c("JSResourceForInteraction")("IGDSEmojiTray.react").__setRef("IGDComposerEmojiPicker.react"));function a(a){var b=d("react-compiler-runtime").c(10),e=a.closeAfterSelect,f=a.onClose,g=a.onSelect,h=a.showPopoverArrow;a=a.threadKey;var k;b[0]!==e||b[1]!==f||b[2]!==g?(k=function(a,b){g(a),(e===!0||(b==null?void 0:b.type)==="keydown")&&f()},b[0]=e,b[1]=f,b[2]=g,b[3]=k):k=b[3];var l;b[4]!==k||b[5]!==a?(l=i.jsx(c("IGDSBox.react"),{width:340,children:i.jsx(d("WebUXLoggingSurfaceContextProvider").WebUXSurfaceLoggingContext.Provider,{value:"thread_chat_emoji_picker_sheet",children:i.jsx(j,{onClick:k,threadKey:a,width:"auto"})})}),b[4]=k,b[5]=a,b[6]=l):l=b[6];k=l;b[7]!==k||b[8]!==h?(a=i.jsx(c("IGDSPopover.react"),{align:"end",popoverContent:k,popoverName:"emojiTray",position:"above",withArrow:h}),b[7]=k,b[8]=h,b[9]=a):a=b[9];return a}g["default"]=a}),98);
__d("useIGDBroadcastChannelImpressionLoggerWithCheck",["MWCMThreadTypes.react","promiseDone","react","react-compiler-runtime","useIGDBroadcastChannelLogger","useSinglePartialViewImpression"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(a,b,e){var f=d("react-compiler-runtime").c(6),g=c("useIGDBroadcastChannelLogger")(a);f[0]!==g||f[1]!==e||f[2]!==b?(a=function(){b!=null&&d("MWCMThreadTypes.react").isIGBroadcastChannelThread(b)&&c("promiseDone")(g(e))},f[0]=g,f[1]=e,f[2]=b,f[3]=a):a=f[3];a=a;var h;f[4]!==a?(h={onImpressionStart:a},f[4]=a,f[5]=h):h=f[5];return c("useSinglePartialViewImpression")(h)}g["default"]=a}),98);
__d("IGDSEditPanoOutline24Icon.react",["IGDSSVGIconBase.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(4),e,f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsx("path",{d:"M6.172 22H2v-4.172L17.291 2.536a1.831 1.831 0 0 1 2.59 0l1.583 1.583a1.831 1.831 0 0 1 0 2.59Z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),f=i.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",x1:"15.018",x2:"19.191",y1:"4.809",y2:"8.982"}),b[0]=e,b[1]=f):(e=b[0],f=b[1]);b[2]!==a?(e=i.jsxs(c("IGDSSVGIconBase.react"),babelHelpers["extends"]({},a,{viewBox:"0 0 24 24",children:[e,f]})),b[2]=a,b[3]=e):e=b[3];return e}b=i.memo(a);g["default"]=b}),98);
__d("useIGDTriggerEditAction.react",["MAWEditMessageContext.react","MWPReplyContext.react","MessengerWebUXLogger","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.useContext;function a(a,b,e){var f=d("react-compiler-runtime").c(10),g=c("MessengerWebUXLogger").useInteractionLogger(),h=i(d("MAWEditMessageContext.react").Context),j=h.setEditMessageData;h=i(d("MWPReplyContext.react").MWPReplyContext);var k=h.clearReply,l=h.reply;f[0]!==k||f[1]!==g||f[2]!==a.messageId||f[3]!==a.threadKey||f[4]!==a.timestampMs||f[5]!==e||f[6]!==l||f[7]!==j||f[8]!==b?(h=function(){l!=null&&k(a.threadKey,!0),j({messageId:a.messageId,threadKey:a.threadKey,threadType:b,timestampMs:a.timestampMs}),g==null?void 0:g({eventName:"edit_message_tap"}),e==null?void 0:e()},f[0]=k,f[1]=g,f[2]=a.messageId,f[3]=a.threadKey,f[4]=a.timestampMs,f[5]=e,f[6]=l,f[7]=j,f[8]=b,f[9]=h):h=f[9];return h}g["default"]=a}),98);
__d("useMWIsContactRestricted",["LSContactBitOffset"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=a!=null&&d("LSContactBitOffset").has(66,a);return a}g["default"]=a}),98);
__d("useMWPCanUserEditMessage",["I64","LSAuthorityLevel","LSContactBitOffset","LSContactTypeExact","LSHotEmojiSize","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","MAWThreadCutover","MWMessageDeliveryStatus","MWPActor.react","ReQL","ReQLSuspense","URLMatcher","getIsMessageTimeBelowEditThreshold","gkx","isDeliveryStatusErrorState","isMWBumpMessage","isStringNullOrEmpty","mwCMIsAnyCMThread","mwCMIsCMSubthread","useMWGetOtherUserContact","useMWIsContactRestricted","useReStore","useServerTime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=5;function a(a,b,e){var g,m,n,o=d("MWPActor.react").useActor(),p=(j||(j=c("useReStore")))(),q=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(p.tables.attachments).getKeyRange(a.threadKey,a.messageId)},[p,a.messageId,a.threadKey],f.id+":68"),r=c("useMWGetOtherUserContact")(a.threadKey,b.threadType,["contactTypeExact"].concat(d("LSContactBitOffset").contactCapabilityFields)),s=r!=null&&(h||(h=d("I64"))).equal(r.contactTypeExact,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactTypeExact").MESSENGER_KID));r=c("useMWIsContactRestricted")(r);e=d("MAWThreadCutover").useIsCutoverOpenThread(e);var t=c("useServerTime")();if(c("isDeliveryStatusErrorState")(d("MWMessageDeliveryStatus").getFromSendStatus(a.sendStatusV2)))return!1;if(b==null)return!1;g=(h||(h=d("I64"))).to_int32((g=a.editCount)!=null?g:(h||(h=d("I64"))).zero)<k;t=d("getIsMessageTimeBelowEditThreshold").getIsMessageTimeBelowEditThreshold(h.of_float(t.getTime()),a.timestampMs);o=h.equal(a.senderId,o);m=(m=a.isForwarded)!=null?m:!1;var u=a.text!=null&&a.text!=="",v=a.text!=null&&c("URLMatcher").match(a.text)!=null;n=h.equal((n=a.hotEmojiSize)!=null?n:(h||(h=d("I64"))).zero,(i||(i=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").NONE));q=((q=q==null?void 0:q.hasXma)!=null?q:!1)||!c("isStringNullOrEmpty")(a.mentionIds);var w=a.isUnsent===!1&&(h||(h=d("I64"))).equal(a.authorityLevel,(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE)),x=c("isMWBumpMessage")(a.replyType);return g&&t&&o&&u&&!v&&n&&!m&&!e&&!q&&w&&!r&&!x&&!s&&l(b)}function l(a){var b=a.threadType;if(d("LSMessagingThreadTypeUtil").isWorkThread(a.threadSubtype))return!1;if(d("LSMessagingThreadTypeUtil").isArmadilloSecure(b))return!0;if(d("LSMessagingThreadTypeUtil").isJoinedDiscoverablePublicBroadcastChannel(b))return!0;if(c("mwCMIsAnyCMThread")(b)||c("mwCMIsCMSubthread")(b))return d("LSThreadBitOffset").has(194,a)&&c("gkx")("7675");return d("LSMessagingThreadTypeUtil").isOpenFnFThread(a)?!0:!1}g["default"]=a}),98);
__d("useIGDEditMessageMenuItem.react",["fbt","I64","IGDMessageContextMenuItem.react","IGDSEditPanoOutline24Icon.react","MWPActor.react","react","react-compiler-runtime","useIGDTriggerEditAction.react","useMWPCanUserEditMessage"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||d("react");function a(a,b,e){var f=d("react-compiler-runtime").c(4),g=d("MWPActor.react").useActor(),i=a.senderId;i=(j||(j=d("I64"))).equal(i,g);var l=c("useIGDTriggerEditAction.react")(a,e.threadType,b);g=c("useMWPCanUserEditMessage")(a,e);if(!i||!g)return null;f[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=h._(/*BTDS*/"Editar"),f[0]=b):b=f[0];a=b;f[1]===Symbol["for"]("react.memo_cache_sentinel")?(e=k.jsx(c("IGDSEditPanoOutline24Icon.react"),{alt:a,size:18}),f[1]=e):e=f[1];f[2]!==l?(i=k.jsx(c("IGDMessageContextMenuItem.react"),{icon:e,label:a,onClick:function(){l()},testid:void 0}),f[2]=l,f[3]=i):i=f[3];return i}g["default"]=a}),226);
__d("IGDSCircleCheckOutlineIcon.react",["IGDSCircleCheckPanoOutlineIcon.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(2),e;b[0]!==a?(e=i.jsx(c("IGDSCircleCheckPanoOutlineIcon.react"),babelHelpers["extends"]({},a)),b[0]=a,b[1]=e):e=b[1];return e}b=i.memo(a);g["default"]=b}),98);
__d("IGDSCopyPanoOutline24Icon.react",["IGDSSVGIconBase.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(3),e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsx("path",{d:"m20.12 4.707-2.826-2.828A3.026 3.026 0 0 0 15.17 1h-5.167A3.007 3.007 0 0 0 7 4.004V5h-.996A3.007 3.007 0 0 0 3 8.004v11.992A3.007 3.007 0 0 0 6.004 23h7.992A3.007 3.007 0 0 0 17 19.996V19h.996A3.007 3.007 0 0 0 21 15.996V6.83a2.98 2.98 0 0 0-.88-2.123ZM18.586 6 16 6.001V3.414L18.586 6ZM15 19.996C15 20.55 14.55 21 13.996 21H6.004C5.45 21 5 20.55 5 19.996V8.004C5 7.45 5.45 7 6.004 7H7v8.996A3.007 3.007 0 0 0 10.004 19H15v.996ZM17.996 17h-7.992C9.45 17 9 16.55 9 15.996V4.004C9 3.45 9.45 3 10.004 3H14v3.001A2 2 0 0 0 15.999 8H19v7.996C19 16.55 18.55 17 17.996 17Z"}),b[0]=e):e=b[0];b[1]!==a?(e=i.jsx(c("IGDSSVGIconBase.react"),babelHelpers["extends"]({},a,{viewBox:"0 0 24 24",children:e})),b[1]=a,b[2]=e):e=b[2];return e}b=i.memo(a);g["default"]=b}),98);
__d("useIGDMessageCopyMenuItem.react",["fbt","Clipboard","I64","IGDMessageContextMenuItem.react","IGDSCircleCheckOutlineIcon.react","IGDSCopyPanoOutline24Icon.react","IGDThreadListNewMessageLoggingDataContext","Int64Hooks","LSIntEnum","LSMessageReplySourceTypeV2","MWPActor.react","MessengerWebUXLogger","getInstamadilloLoggingExtraData","promiseDone","react","react-compiler-runtime","requireDeferred","useIGDSToaster","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=l||d("react"),n=c("requireDeferred")("MWLogMessageAction").__setRef("useIGDMessageCopyMenuItem.react");function a(a,b,e){var f=d("react-compiler-runtime").c(27),g=(i||(i=c("useReStore")))(),l=d("MWPActor.react").useActor(),o=c("MessengerWebUXLogger").useInteractionLogger(),p=d("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext(),q=a.displayedContentTypes,r=a.replySourceTypeV2!=null&&(j||(j=d("LSIntEnum"))).toNumber(a.replySourceTypeV2)===c("LSMessageReplySourceTypeV2").FORWARD;q=(k||(k=d("I64"))).equal(q,(j||(j=d("LSIntEnum"))).ofNumber(1))||(k||(k=d("I64"))).equal(q,(j||(j=d("LSIntEnum"))).ofNumber(1033));q=q||r&&!!a.text;var s=c("useIGDSToaster")();f[0]!==l||f[1]!==g||f[2]!==p||f[3]!==o||f[4]!==a.messageId||f[5]!==a.senderId||f[6]!==a.text||f[7]!==a.threadKey||f[8]!==b||f[9]!==e||f[10]!==s?(r=function(){var f;o==null?void 0:o({eventName:"message_copy",extraData:c("getInstamadilloLoggingExtraData")(e),flowInstanceId:p});d("Clipboard").copy((f=a.text)!=null?f:"");b();s.add({icon:m.jsx(c("IGDSCircleCheckOutlineIcon.react"),{alt:h._(/*BTDS*/"Icono de marca de verificaci\u00f3n")}),message:h._(/*BTDS*/"Se ha copiado")});n.onReady(function(b){return c("promiseDone")(b.log(g,a.messageId,a.threadKey,"message_dot_menu","copy",void 0,void 0,void 0,a.senderId,void 0,l))})},f[0]=l,f[1]=g,f[2]=p,f[3]=o,f[4]=a.messageId,f[5]=a.senderId,f[6]=a.text,f[7]=a.threadKey,f[8]=b,f[9]=e,f[10]=s,f[11]=r):r=f[11];var t;f[12]!==l||f[13]!==g||f[14]!==p||f[15]!==o||f[16]!==a.messageId||f[17]!==a.senderId||f[18]!==a.text||f[19]!==a.threadKey||f[20]!==b||f[21]!==e?(t=[l,g,p,o,a.messageId,a.senderId,a.text,a.threadKey,b,e],f[12]=l,f[13]=g,f[14]=p,f[15]=o,f[16]=a.messageId,f[17]=a.senderId,f[18]=a.text,f[19]=a.threadKey,f[20]=b,f[21]=e,f[22]=t):t=f[22];r=d("Int64Hooks").useCallbackInt64(r,t);if(!q)return null;f[23]===Symbol["for"]("react.memo_cache_sentinel")?(t=h._(/*BTDS*/"Copiar"),f[23]=t):t=f[23];q=t;f[24]===Symbol["for"]("react.memo_cache_sentinel")?(t=m.jsx(c("IGDSCopyPanoOutline24Icon.react"),{alt:q,size:18}),f[24]=t):t=f[24];f[25]!==r?(t=m.jsx(c("IGDMessageContextMenuItem.react"),{icon:t,label:q,onClick:r}),f[25]=r,f[26]=t):t=f[26];return t}g["default"]=a}),226);
__d("MAWDocumentPreProcess",["Promise","WABlobToArrayBuffer","WATagsLogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["start document preprocess"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["start optimistic document preprocess"]);j=function(){return a};return a}var k=d("WATagsLogger").TAGS(["MAWDocumentPreProcess"]);function c(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){k.DEV(i());return(h||(h=b("Promise"))).resolve({file:a,filename:a.name,plaintext:yield d("WABlobToArrayBuffer").blobToArrayBuffer(a),type:"document"})});return l.apply(this,arguments)}function e(c){k.DEV(j());var d=a.URL.createObjectURL(c);return(h||(h=b("Promise"))).resolve({file:c,filename:c.name,type:"document",url:d})}g.documentPreprocess=c;g.optimisticDocumentPreprocess=e}),98);
__d("MAWFetchXMADataUtils",["FBLogger","LSXmaContentType","MAWFetchXMABlob","MAWGetImageSpec","MAWParseXMAFBConfig","Promise","WAArmadilloXMA.pb","asyncToGeneratorRuntime","sendToSentQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i={failed_to_fetch_blob_for_xma_share:"Failed to fetch blob xma data for MAWShareAttachent",failed_to_fetch_json_for_xma_share:"Failed execute MAWShareAttachment_LinkPreviewQuery for MAWShareAttachent",failed_to_parse_json_for_xma_share:"Failed to fetch blob xma data for MAWShareAttachent"};function a(a){var b=Object.entries(c("LSXmaContentType")).find(function(b){var c=b[0];b=b[1];return a===b&&d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE[c]!=null});b=b!=null?d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE[b[0]]:void 0;if(b===void 0)return void 0;if(!d("MAWParseXMAFBConfig").isFBSupportedTargetType({fbTargetType:b,silentExposure:!0})){c("FBLogger")("messenger_web_sharing").mustfix("Unsupported XMA Target Type in sending path: "+b);return d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE}return b}function e(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=a.favicon_blob,f=a.header_image_blob,g=a.overlayIconGlyph;a=a.preview_blob;a=a==null?void 0:new File([a],"preview",{type:a.type});e=e==null?void 0:new File([e],"favicon",{type:e.type});f=f==null?void 0:new File([f],"header",{type:f.type});d("sendToSentQPLLogger").markSendToSentPoint(c,"preview_favicon_spec_start");g=g===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.PRIVATE?(h||(h=b("Promise"))).resolve({height:2,width:2}):a!=null?d("MAWGetImageSpec").getImageSpec_DEPRECATED(a):(h||(h=b("Promise"))).resolve();var i=e!=null?d("MAWGetImageSpec").getImageSpec_DEPRECATED(e):(h||(h=b("Promise"))).resolve(),j=f!=null?d("MAWGetImageSpec").getImageSpec_DEPRECATED(f):(h||(h=b("Promise"))).resolve();g=(yield (h||(h=b("Promise"))).all([g,i,j]));i=g[0];j=g[1];g=g[2];d("sendToSentQPLLogger").markSendToSentPoint(c,"preview_favicon_spec_ready");c=a==null||i==null?void 0:{file:a,height:i.height,width:i.width};a=e==null||j==null?void 0:{file:e,height:j.height,width:j.width};i=f==null||g==null?void 0:{file:f,height:g.height,width:g.width};return{faviconFileArgs:a,headerImageFileArgs:i,previewFileArgs:c}});return j.apply(this,arguments)}function f(a,b,c,d,e,f){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,j,k){a=(yield (h||(h=b("Promise"))).all([[(a==null?void 0:a.startsWith("ls"))===!0?null:a,"favicon"],[e,"image"],[f,"preview"],[g,"header_image"]].map(function(a){return d("MAWFetchXMABlob").fetchBlob({descriptionForLogging:"MAWFetchXMAData_"+a[1],url:a[0],xmaContentType:k}).then(function(a){return a!=null?a:void 0})}))["catch"](function(a){j.forEach(function(a){d("sendToSentQPLLogger").markSendToSentFail(a,"failed_to_fetch_blob_for_xma_share")});c("FBLogger")("messenger_web_sharing").catching(a).mustfix(i.failed_to_fetch_blob_for_xma_share);return[void 0,void 0,void 0,void 0]}));e=a[0];f=a[1];g=a[2];a=a[3];return[e,f,g,a]});return k.apply(this,arguments)}g.XMA_DATA_ERRORS=i;g.convertXmaContentTypeToMessageType=a;g.makeXMAFileArgs=e;g.getPreviewBlobs=f}),98);
__d("MAWFetchXMAData_LinkPreviewQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="29582612381352117"}),null);
__d("MAWFetchXMAData_LinkPreviewQuery.graphql",["MAWFetchXMAData_LinkPreviewQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"maxPreviewHeight"},c={defaultValue:null,kind:"LocalArgument",name:"maxPreviewWidth"},d={defaultValue:null,kind:"LocalArgument",name:"url"},e=[{alias:null,args:[{fields:[{kind:"Variable",name:"maxPreviewHeight",variableName:"maxPreviewHeight"},{kind:"Variable",name:"maxPreviewWidth",variableName:"maxPreviewWidth"},{kind:"Variable",name:"url",variableName:"url"}],kind:"ObjectValue",name:"params"}],kind:"ScalarField",name:"post_reshare_xma",storageKey:null}];return{fragment:{argumentDefinitions:[a,c,d],kind:"Fragment",metadata:null,name:"MAWFetchXMAData_LinkPreviewQuery",selections:e,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[d,c,a],kind:"Operation",name:"MAWFetchXMAData_LinkPreviewQuery",selections:e},params:{id:b("MAWFetchXMAData_LinkPreviewQuery_facebookRelayOperation"),metadata:{},name:"MAWFetchXMAData_LinkPreviewQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MAWFetchXMAData_fetchXmaPreviewDataQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9840669832713841"}),null);
__d("MAWFetchXMAData_fetchXmaPreviewDataQuery.graphql",["MAWFetchXMAData_fetchXmaPreviewDataQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"url"}],c=[{alias:null,args:[{fields:[{kind:"Variable",name:"url",variableName:"url"}],kind:"ObjectValue",name:"params"}],concreteType:"XFBXMAPreviewData",kind:"LinkedField",name:"xma_preview_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_receiver_fetch_supported",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_public",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"post_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"default_cta_title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"header_title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subtitle_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"xma_content_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"favicon_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"header_image_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"preview_url",storageKey:null},{alias:null,args:null,concreteType:"XFBXMAPreviewDataCtaDataConnection",kind:"LinkedField",name:"cta_data",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBXMACtaData",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"cta_title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cta_action_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cta_native_url",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MAWFetchXMAData_fetchXmaPreviewDataQuery",selections:c,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MAWFetchXMAData_fetchXmaPreviewDataQuery",selections:c},params:{id:b("MAWFetchXMAData_fetchXmaPreviewDataQuery_facebookRelayOperation"),metadata:{},name:"MAWFetchXMAData_fetchXmaPreviewDataQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MAWUnshimUrl",["CometLinkShimUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a==null)return void 0;var b=d("CometLinkShimUtils").getLinkShimInfo(a,void 0,void 0,void 0,void 0,!0);return!b.shimmed?a:b.unshimmedHref}g.unshimUrl=a}),98);
__d("isReceiverFetchSenderSideEnabled",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("13708")===!0}g["default"]=a}),98);
__d("MAWFetchXMAData",["fbt","CometRelay","ConstUriUtils","FBLogger","LSXmaContentType","MAWFetchXMADataUtils","MAWFetchXMAData_LinkPreviewQuery.graphql","MAWFetchXMAData_fetchXmaPreviewDataQuery.graphql","MAWUnshimUrl","MSGDataclassTypes.flow","WAArmadilloXMA.pb","asyncToGeneratorRuntime","getJSEnumSafe","isReceiverFetchSenderSideEnabled","isStringNullOrEmpty","justknobx","sendToSentQPLLogger"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;function k(a,b){b.forEach(function(a){d("sendToSentQPLLogger").addSendToSentAnnotations(a,{string:{xma_data_result:"private"}})});return{defaultCTA:{actionUrl:d("MAWUnshimUrl").unshimUrl(a),buttonType:(b=d("WAArmadilloXMA.pb")).EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE.OPEN_NATIVE,nativeUrl:d("MAWUnshimUrl").unshimUrl(a),title:h._(/*BTDS*/"_j[\"Publicaci\\u00f3n privada\",\"599d20d959e0009397c73fb9edb426dd\",1]").toString()},linkType:"internal",overlayIconGlyph:b.EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.PRIVATE,preview_blob:void 0,title_text:h._(/*BTDS*/"Facebook").toString(),transportLayerForLogging:"sender_copy",xma_message_type:b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE,xmaTargetTypeForLogging:b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE}}function l(a,e){return d("CometRelay").fetchQuery(a,i!==void 0?i:i=b("MAWFetchXMAData_LinkPreviewQuery.graphql"),{maxPreviewHeight:c("justknobx")._("1769"),maxPreviewWidth:c("justknobx")._("1769"),url:e}).toPromise()}function m(a,b,c){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f;try{f=JSON.parse(b)}catch(a){throw c("FBLogger")("messenger_web_sharing").catching(a).mustfixThrow(d("MAWFetchXMADataUtils").XMA_DATA_ERRORS.failed_to_parse_json_for_xma_share)}b=f;var g=b.action_url,h=b.ctas,i=b.default_cta_title,j=b.favicon_url,k=b.header_image_url,l=b.header_title,m=b.image_url,n=b.preview_url,o=b.subtitle_text,p=b.title_text;b=b.xma_content_type;b=b;j=(yield d("MAWFetchXMADataUtils").getPreviewBlobs(j,m,n,k,e,b));m=j[0];n=j[1];k=j[2];e=j[3];j=h;h=d("MAWFetchXMADataUtils").convertXmaContentTypeToMessageType(b);b=j==null?void 0:j[0];g=d("MAWUnshimUrl").unshimUrl((g=g!=null?g:b==null?void 0:b.action_url)!=null?g:a);a=d("MAWUnshimUrl").unshimUrl((b==null?void 0:b.native_url)!=null&&(b==null?void 0:b.native_url)!==""?b==null?void 0:b.native_url:g);b={actionUrl:g,buttonType:d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE.OPEN_NATIVE,nativeUrl:a,title:i!=null?i:void 0};return{ctas:j==null?void 0:j.map(function(a){return{actionUrl:d("MAWUnshimUrl").unshimUrl(a.action_url!=null&&a.action_url!==""?a.action_url:void 0),buttonType:d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE.OPEN_NATIVE,nativeUrl:d("MAWUnshimUrl").unshimUrl(a.native_url!=null&&a.native_url!==""?a.native_url:void 0),title:(a=a.title)!=null?a:void 0}}),defaultCTA:b,favicon_blob:m!=null?m:void 0,header_image_blob:e!=null?e:void 0,header_title:l!=null?l:void 0,image_blob:n!=null?n:void 0,linkType:"internal",preview_blob:k!=null?k:void 0,subtitle_text:o!=null?o:void 0,title_text:p!=null?p:void 0,transportLayerForLogging:"sender_copy",xma_message_type:h,xmaTargetTypeForLogging:h}});return n.apply(this,arguments)}function o(a,c){return d("CometRelay").fetchQuery(a,j!==void 0?j:j=b("MAWFetchXMAData_fetchXmaPreviewDataQuery.graphql"),{url:c}).toPromise()}function p(a,b,c){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){a=(yield o(a,b)["catch"](function(a){e.forEach(function(b){d("sendToSentQPLLogger").markSendToSentFail(b,"failed_to_fetch_json_for_xma_share",a)}),c("FBLogger")("messenger_web_sharing").catching(a).mustfix(d("MAWFetchXMADataUtils").XMA_DATA_ERRORS.failed_to_fetch_json_for_xma_share)}));e.forEach(function(a){d("sendToSentQPLLogger").markSendToSentPoint(a,"fetch_json_for_xma_share_end")});a=a==null?void 0:a.xma_preview_data;if(a==null){e.forEach(function(a){d("sendToSentQPLLogger").addSendToSentAnnotations(a,{string:{xma_data_result:"empty"}})});return k(b,e)}if(a.is_public!==!0)return k(b,e);e.forEach(function(a){d("sendToSentQPLLogger").addSendToSentAnnotations(a,{string:{xma_data_result:"public"}})});b={defaultCTA:{actionUrl:d("MAWUnshimUrl").unshimUrl(b),buttonType:d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE.OPEN_NATIVE,nativeUrl:d("MAWUnshimUrl").unshimUrl(b),title:(b=a.default_cta_title)!=null?b:void 0},linkType:"internal",title_text:(b=(b=a.title_text)!=null?b:a.header_title)!=null?b:void 0};var f=c("getJSEnumSafe")(c("LSXmaContentType"),a.xma_content_type),g=d("MAWFetchXMADataUtils").convertXmaContentTypeToMessageType(f),h=a.post_id,i=a.is_receiver_fetch_supported===!0;if(i&&h!=null){i={__typename:"XMSGMsgrXmaContentRefDataclass",action_type:d("MSGDataclassTypes.flow").XmsgMsgrXmaActionType.Share,content_type:d("MSGDataclassTypes.flow").XmsgMsgrReceiverFetchContentType.Statusupdate,fetch_params:{__typename:"XMSGMsgrReceiverFetchXmaStatusUpdateFetchParams",post_id:h},xma_content_type:c("getJSEnumSafe")(c("LSXmaContentType"),a.xma_content_type),xma_layout_type:d("MSGDataclassTypes.flow").XmsgMsgrReceiverFetchXmaLayoutType.Single};return babelHelpers["extends"]({},b,{contentRef:JSON.stringify(i),transportLayerForLogging:"receiver_fetch",xma_message_type:d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH,xmaTargetTypeForLogging:g})}h=(yield d("MAWFetchXMADataUtils").getPreviewBlobs(a.favicon_url,null,a.preview_url,a.header_image_url,e,f));i=h[0];h[1];f=h[2];h=h[3];return babelHelpers["extends"]({},b,{ctas:(b=a.cta_data)==null?void 0:(b=b.nodes)==null?void 0:b.map(function(a){var b=d("MAWUnshimUrl").unshimUrl(c("isStringNullOrEmpty")(a.cta_action_url)?void 0:a.cta_action_url),e=d("MAWUnshimUrl").unshimUrl(c("isStringNullOrEmpty")(a.cta_native_url)?void 0:a.cta_native_url);return{actionUrl:b,buttonType:d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE.OPEN_NATIVE,ctaType:"xma_web_url",nativeUrl:e,title:(b=a.cta_title)!=null?b:void 0}}),favicon_blob:i!=null?i:void 0,header_image_blob:h!=null?h:void 0,header_title:c("isStringNullOrEmpty")(a.title_text)?void 0:(b=a.header_title)!=null?b:void 0,preview_blob:f!=null?f:void 0,subtitle_text:(i=a.subtitle_text)!=null?i:void 0,transportLayerForLogging:"sender_copy",xma_message_type:g,xmaTargetTypeForLogging:g})});return q.apply(this,arguments)}function a(a,b,c){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){b=d("ConstUriUtils").getUri(b);b=b==null?void 0:(b=b.setSubDomain("www"))==null?void 0:b.toString();if(b==null)return{linkType:"unknown",transportLayerForLogging:"sender_copy",xmaTargetTypeForLogging:null};var f=c("isReceiverFetchSenderSideEnabled")();e.forEach(function(a){d("sendToSentQPLLogger").markSendToSentPoint(a,"fetch_json_for_xma_share_start"),d("sendToSentQPLLogger").addSendToSentAnnotations(a,{bool:{is_rf_enabled:f}})});if(f)return p(a,b,e);a=(yield l(a,b)["catch"](function(a){e.forEach(function(b){d("sendToSentQPLLogger").markSendToSentFail(b,"failed_to_fetch_json_for_xma_share",a)}),c("FBLogger")("messenger_web_sharing").catching(a).mustfix(d("MAWFetchXMADataUtils").XMA_DATA_ERRORS.failed_to_fetch_json_for_xma_share)}));e.forEach(function(a){d("sendToSentQPLLogger").markSendToSentPoint(a,"fetch_json_for_xma_share_end")});if(a==null){e.forEach(function(a){d("sendToSentQPLLogger").addSendToSentAnnotations(a,{string:{xma_data_result:"empty"}})});return{linkType:"unknown",transportLayerForLogging:"sender_copy",xmaTargetTypeForLogging:null}}a=a.post_reshare_xma;if(a==null){e.forEach(function(a){d("sendToSentQPLLogger").addSendToSentAnnotations(a,{string:{xma_data_result:"external"}})});return{linkType:"external",transportLayerForLogging:"sender_copy",xmaTargetTypeForLogging:null}}if(a==="private")return k(b,e);e.forEach(function(a){d("sendToSentQPLLogger").addSendToSentAnnotations(a,{string:{xma_data_result:"public"}})});return m(b,a,e)});return r.apply(this,arguments)}g.fetchXMAData=a}),226);
__d("MAWGetProtocolMsgIdByMsgIdInUI",["I64","LSDatabaseSingleton","MAWBridgeSendAndReceive","MAWMpsGating","MAWThreadMappingUtils","WAJids","WAStanzaUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=d("WAJids").createJidUtils({platform:"msgr"});function k(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=(yield (h||(h=d("LSDatabaseSingleton"))).getLSDatabaseSingletonPromiseOrValue());return c.runInTransaction(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=(yield b.messages.index("messageId").get(a));if(c==null)return null;b=(yield d("MAWThreadMappingUtils").getChatJidFromMappingTable(b,c.threadKey));if(b!=null)return{author:j.toUserJid((i||(i=d("I64"))).to_float(c.senderId).toString()),chat:b,externalId:d("WAStanzaUtils").toStanzaId(c.offlineThreadingId)}});return function(a){return c.apply(this,arguments)}}(),"readonly",void 0,void 0,f.id+":32")});return l.apply(this,arguments)}a=function(a){return d("MAWMpsGating").isFullMpsEnabled()?k(a):m(a)};var m=function(a){return d("MAWBridgeSendAndReceive").sendAndReceive("backend","getProtocolMsgIdByMsgId",{msgId:a})};g.getProtocolMsgIdByMsgIdUI=a}),98);
__d("LSOnSendMessageFailure.nop",["MWChatInteraction","Promise","err","justknobx","promiseDone","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("sendToSentQPLLogger").__setRef("LSOnSendMessageFailure.nop");function a(a,d,e,f){if(!c("justknobx")._("1414"))return(h||(h=b("Promise"))).resolve();if(e==null)return(h||(h=b("Promise"))).resolve();var g=j(e);if(g==null)return(h||(h=b("Promise"))).resolve();c("promiseDone")(i.load().then(function(a){return a.markSendToSentFail(g,"send_message_server_error",c("err")("send_message_server_error: %s",f))}));return(h||(h=b("Promise"))).resolve()}function j(a){a=d("MWChatInteraction").get(d("MWChatInteraction").s2sKey(a));return a==null?null:Number(a)}a.__nop_name__="LSOnSendMessageFailure";g["default"]=a}),98);
__d("LSMarkOptimisticMessageFailed",["LSOnSendMessageFailure.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return a[2]===!0?d[0]=c.i64.cast([0,5]):d[0]=c.i64.cast([0,4]),a[2]===!0?d[1]=c.i64.cast([0,5]):d[1]=c.i64.cast([0,4]),a[2]===!0?d[2]=c.i64.cast([0,5]):d[2]=c.i64.cast([0,4]),c.nativeOperation(b("LSOnSendMessageFailure.nop"),a[0],a[1])},function(b){return c.forEach(c.filter(c.db.table(12).fetch([[[a[0]]],"optimistic"]),function(b){return b.offlineThreadingId===a[0]&&c.i64.eq(b.authorityLevel,c.i64.cast([0,20]))}),function(a){var b=a.update;a.item;return b({sendStatus:d[0],sendStatusV2:d[1]})})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxMarkOptimisticMessageFailedStoredProcedure";a.__tables__=["messages"];e.exports=a}),null);
__d("LSMarkOptimisticMessageFailedStoredProcedure",["LSMarkOptimisticMessageFailed","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSMarkOptimisticMessageFailed"),e.optimisticMid,e.errorMessage,e.isRetryable);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWMarkMessageSendAsFailedLSDB",["LSFactory","LSMarkOptimisticMessageFailedStoredProcedure","Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,d,e,g,i){return(d=g==null?void 0:g.runInTransaction(function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){yield c("LSMarkOptimisticMessageFailedStoredProcedure")(c("LSFactory")(b),{errorMessage:e,isRetryable:i,optimisticMid:a})});return function(a){return d.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":29"))!=null?d:(h||(h=b("Promise"))).resolve()}g.markMessageSendAsFailed=a}),98);
__d("MAWMessageSendReporter",["FBLogger","MAWMarkMessageSendAsFailedLSDB","MAWReportSendMessageSuccessResult","MAWSetupWorkerAuxStateForLogging","MWLogSendToSentFailedError","QPLUserFlow","WAGetSafeQPLError","asyncToGeneratorRuntime","justknobx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,d){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){var g=e.qplEventType;e=e.qplInstanceKey;try{b=(yield b);if(b==null)return;if(b.success)b.value!=null?d("MAWReportSendMessageSuccessResult").reportSendMessageSuccessResultFn(b.value):c("QPLUserFlow").addPoint(g,"no-op",{instanceKey:e}),c("QPLUserFlow").endSuccess(g,{instanceKey:e});else{var h,j=b.error.isRetriable===!0;c("MWLogSendToSentFailedError")({qplEventType:g,qplInstanceKey:e},b.error.type,void 0,b.error.errorCode,b.error.applicationErrorCode);c("QPLUserFlow").endFailure(g,b.error.type,{annotations:{bool:{isRetriable:(h=b.error.isRetriable)!=null?h:!1,workerTerminatedPermanently:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently},"int":{errorCode:(h=b.error.errorCode)!=null?h:0},string:{details:(h=b.error.details)!=null?h:""},string_array:{worker_restart_msgs:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,worker_restart_reasons:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}},instanceKey:e});i(a,j,f)}}catch(k){c("MWLogSendToSentFailedError")({qplEventType:g,qplInstanceKey:e},"runtime-failure",k);c("QPLUserFlow").endFailure(g,"runtime-failure",{annotations:{bool:{workerTerminatedPermanently:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently},string:{errorDescription:d("WAGetSafeQPLError").getSafeQPLErrorMessage(k)},string_array:{worker_restart_msgs:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,worker_restart_reasons:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}},instanceKey:e});i(a,!1,f,k);c("FBLogger")("messenger_web").catching(k).mustfix("MAWMessageSendReporter");if(c("justknobx")._("4010")&&typeof k==="object"){b=String(k==null?void 0:k.message);h=String(k==null?void 0:k.messageParams);j=String(k==null?void 0:k.stack);c("FBLogger")("messenger_web").mustfix("Failed to send, e: %s. error params: %s. call stack: %s",b,h,j)}}});return h.apply(this,arguments)}function i(a,b,e,f){if(a==null)return;var g=a.chatJid;a=a.externalId;c("promiseDone")(d("MAWMarkMessageSendAsFailedLSDB").markMessageSendAsFailed(a,g,d("WAGetSafeQPLError").getSafeQPLErrorMessage(f),e,b))}g.MAWMessageSendReporter=a}),98);
__d("MAWMessageSendReporterUtils",["WAResultOrError"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(!Array.isArray(a))return a.success===!0?d("WAResultOrError").makeResult([a.value]):a;else{var b=[];for(a of a){if((a==null?void 0:a.success)===!1)return a;(a==null?void 0:a.value)!=null&&b.push(a.value)}return d("WAResultOrError").makeResult(b)}}function b(a){for(var b of a)switch(b.messageType){case"sendMsg":case"editMsg":case"reactionMsg":case"revokeMsg":case"bumpMsg":case"sendPoll":case"noteReplyMsg":continue;case"fixMe":return!0;default:b.messageType}return a.length===0}g.maybeCombineMultipleSendResults=a;g.getWasOverallOperationANoOp=b}),98);
__d("MAWMessageSendReporterV2",["FBLogger","LSIntEnum","LSMessagingThreadAttributionType","LSMessagingThreadTypeUtil","LSThreadAttributionTypeUtil","MAWMarkMessageSendAsFailedLSDB","MAWMessageSendReporterUtils","MAWMiActGetMappingWithMawTypes","MAWReportSendMessageSuccessResult","MWMsgMediaTypeLogUtils","MWSharedMsgLogUtils","MWSharedS2SBaseAnnotations","ReQL","WAGetSafeQPLError","asyncToGeneratorRuntime","mergeDeep","promiseDone","qex","sendToSentQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b;a===void 0&&(a="exposure_logging_enabled");switch(a){case"exposure_logging_disabled":return(b=c("qex")._("404"))!=null?b:!1;case"exposure_logging_enabled":return(b=c("qex")._("408"))!=null?b:!1;default:a;return!1}}function e(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=a.composerEntrypoint,g=a.extraAnnotations;g=g===void 0?{}:g;var i=a.lsSource,k=a.messageTypeParamsArgs,l=a.s2sInstanceKey,m=a.thread,n=a.externalId,o,p=[],q=(yield d("MWSharedS2SBaseAnnotations").queryMediaStagingAndGetMessageTypeParams(babelHelpers["extends"]({},k,{db:e,threadKey:m==null?void 0:m.threadKey})));o=q.messageTypeParams;p=q.mediaStagings;q=d("MWMsgMediaTypeLogUtils").getAttachmentType({hasFile:o.hasFile,hasGif:o.hasGif,hasHotEmoji:o.hasHotEmoji,hasImage:o.hasImage,hasLinks:o.hasLinks,hasShare:o.hasShare,hasSticker:o.hasSticker,hasVideo:o.hasVideo,hasVoiceClip:o.hasVoiceClip,isAttachmentsGrouped:o.isAttachmentsGrouped,numberOfAttachments:o.numberOfAttachments,numberOfGroupedAttachments:o.numberOfGroupedAttachments});l=l!=null?l:d("sendToSentQPLLogger").markSendToSentStart(void 0,q);q=(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").UNKNOWN);m!=null?(q=d("LSThreadAttributionTypeUtil").getSourceAndResetAttribution(m.threadKey,i),i=(yield d("MWSharedMsgLogUtils").getSendToSentAnnotations(m,o,(h||(h=d("LSIntEnum"))).unwrapIntEnum(q),f,n))):(o=d("MWSharedS2SBaseAnnotations").getMessageTypeParams(babelHelpers["extends"]({},k)),i=(yield d("MWSharedS2SBaseAnnotations").getSendToSentBaseAnnotations(o,c("LSMessagingThreadAttributionType").UNKNOWN,f,n)));m=c("mergeDeep")(i,g);d("sendToSentQPLLogger").addSendToSentAnnotations(l,m);try{k=(yield b(l,o,p,q));if(k==null)return;f=d("MAWMessageSendReporterUtils").maybeCombineMultipleSendResults(k);if(f.success)d("MAWMessageSendReporterUtils").getWasOverallOperationANoOp(f.value)?(d("sendToSentQPLLogger").markSendToSentPoint(l,"no-op"),d("sendToSentQPLLogger").markSendToSentSuccess(l)):(f.value.forEach(d("MAWReportSendMessageSuccessResult").reportSendMessageSuccessResultFn),d("sendToSentQPLLogger").markSendToSentSuccess(l));else{n=f.error.isRetriable===!0;d("sendToSentQPLLogger").addSendToSentAnnotations(l,{bool:{isRetriable:(i=f.error.isRetriable)!=null?i:!1},"int":{errorCode:(g=f.error.errorCode)!=null?g:0},string:{details:(m=f.error.details)!=null?m:""}});d("sendToSentQPLLogger").markSendToSentFail(l,"runtime-failure",void 0,f.error);j(a,n,e)}}catch(b){d("sendToSentQPLLogger").markSendToSentFail(l,"runtime-failure",b),j(a,!1,e,b),c("FBLogger")("messenger_web").catching(b).mustfix("MAWMessageSendReporterV2")}});return i.apply(this,arguments)}function j(a,e,f,g){if(f==null)return;var h=a.externalId,i=a.thread;if(i==null||h==null)return;c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableAscending(f.tables.mi_act_mapping_table).getKeyRange(i.threadKey)),function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a!=null){a=c("MAWMiActGetMappingWithMawTypes")(a,d("LSMessagingThreadTypeUtil").isGroup(i.threadType));a=a.jid;yield d("MAWMarkMessageSendAsFailedLSDB").markMessageSendAsFailed(h,a,d("WAGetSafeQPLError").getSafeQPLErrorMessage(g),f,e)}});return function(b){return a.apply(this,arguments)}}())}g.isMessageSendReporterV2Enabled=a;g.MAWMessageSendReporterV2=e}),98);
__d("MAWSendFileMsgTypes",["WAStanzaUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a}function b(a){return d("WAStanzaUtils").toStanzaId(a)}g.toOfflineAttachmentIDFromStanzaId=a;g.toOfflineAttachmentIDFromString=b}),98);
__d("MAWSecureAttachmentGroupingUtils",["I64","LSIntEnum","MAWSendFileMsgTypes","MessagingAttachmentType","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){a=a.reduce(function(a,b){(h||(h=d("I64"))).equal(b.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))?a.mediaStagingsImage.push(b):a.mediaStagingsOther.push(b);return a},{mediaStagingsImage:[],mediaStagingsOther:[]});var b=a.mediaStagingsImage;a=a.mediaStagingsOther;return[].concat(b,a)}function b(a){var b=new Map();a=a.filter(function(a){return(h||(h=d("I64"))).equal(a.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))});var e=a.length;if(e>1){var f=c("uuidv4")();a.forEach(function(a,c){b.set(d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromString(a.offlineAttachmentId),{groupId:f,groupIndex:c,groupSize:e})})}return b}function e(a){var b=new Map(),d=a.length;if(d>1){var e=c("uuidv4")();a.forEach(function(a,c){b.set(a,{groupId:e,groupIndex:c,groupSize:d})})}return b}g.orderMediaStagingsForGrouping=a;g.generateMediaGroupMetadataForMediaStagings=b;g.generateMediaGroupMetadataForMessageIds=e}),98);
__d("MAWThreadId",["LSMessagingThreadTypeUtil","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(b)));return a==null?void 0:a.threadType});return i.apply(this,arguments)}function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield h(a,b));return a==null?!1:d("LSMessagingThreadTypeUtil").isArmadilloSecure(a)});return j.apply(this,arguments)}function c(a,b){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(b))}g.isSecureThreadKey=a;g.getThread=c}),98);
__d("MAWForwardMessage",["MAWBridgeSendAndReceive","MAWCreateOneToOneThread","MAWExternalId","MAWGetEphemeralSettings","MAWGetProtocolMsgIdByMsgIdInUI","MAWMessageSendReporter","MAWMessageSendReporterV2","MAWMiActOnActThreadReady","MAWSecureAttachmentGroupingUtils","MAWThreadId","Promise","WAResultOrError","asyncToGeneratorRuntime","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,b,c,d){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){var f=(yield d("MAWThreadId").isSecureThreadKey(a.tables,b));if(!f){f=(yield d("MAWCreateOneToOneThread").call(a,b,void 0,"MAWForwardMessage",e));e=f.jid;return c(e,!0)}f=(yield d("MAWMiActOnActThreadReady").waitForACTThreadReady(a.tables,b,"MAWForwardMessage"));e=f.chatJid;return c(e,!1)});return j.apply(this,arguments)}function a(a,b,c,d,e,f){return l(a,b,c,d,e,void 0,f)}function e(a,b,c,d,e){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f,g){var i=d("MAWSecureAttachmentGroupingUtils").generateMediaGroupMetadataForMessageIds(e);if(d("MAWMessageSendReporterV2").isMessageSendReporterV2Enabled())return(h||(h=b("Promise"))).all(e.map(function(b){return l(a,c,b,f,g,i.get(b))})).then(function(a){var b=a.find(function(a){return(a==null?void 0:a.success)===!1});return b!=null?[b]:a});else yield (h||(h=b("Promise"))).allSettled([e.map(function(b){return l(a,c,b,f,g,i.get(b))})])});return k.apply(this,arguments)}function l(a,b,e,f,g,h,j){var k=d("MAWExternalId").generateExternalId();return i(a,b,function(i,l){return d("MAWGetProtocolMsgIdByMsgIdInUI").getProtocolMsgIdByMsgIdUI(e).then(function(e){if(e!=null)return d("MAWGetEphemeralSettings").getEphemeralSetting(i,b).then(function(b){b=d("MAWBridgeSendAndReceive").sendAndReceive("backend","forwardMsg",{args:{args:{mediaGroupMetadata:h,source:f},chatJid:i,ephemeralSetting:b!=null?b:void 0,externalId:k,isFirstMsg:l,protocolMsgId:e,textWithSubstitutions:j},qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:g});return d("MAWMessageSendReporterV2").isMessageSendReporterV2Enabled()?b:d("MAWMessageSendReporter").MAWMessageSendReporter({chatJid:i,externalId:k},b,{qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:g},a)});else return d("WAResultOrError").makeResult({description:"unexpected null protocolMsgId",messageType:"fixMe"})})},g)}g.maybeCreateNewThreadAndCallback=i;g.forwardMessage=a;g.forwardMessageBatch=e}),98);
__d("VideoFrameBuffer",["HTMLMediaElementReadyStates"],(function(a,b,c,d,e,f,g){a=function(){function a(a,b,c,d,e,f,g){d===void 0&&(d=null),e===void 0&&(e=null),f===void 0&&(f=null),g===void 0&&(g=null),this.$2=b,this.$1=a,this.$3=c||"contain",this.$6=d,this.$7=e,this.$8=f,this.$9=g}var b=a.prototype;b.updateFrameBuffer=function(){this.$4&&(this.$1.width=this.$4,this.$4=null);this.$5&&(this.$1.height=this.$5,this.$5=null);if(this.$2.readyState<c("HTMLMediaElementReadyStates").HAVE_CURRENT_DATA)return;var a=this.$1.clientWidth||this.$1.width,b=this.$1.clientHeight||this.$1.height,d=a,e=b,f=this.$2.videoWidth/this.$2.videoHeight,g=d/e;this.$3==="cover"&&(g*=-1,f*=-1);g>f?d=e*f:g<f&&(e=d/f);g=this.$1.getContext("2d");if(!(g instanceof window.CanvasRenderingContext2D))return;try{if(this.$6||this.$7){g.drawImage(this.$2,(f=this.$8)!=null?f:0,(f=this.$9)!=null?f:0,(f=this.$6)!=null?f:a,(f=this.$7)!=null?f:b,0,0,a,b)}else g.drawImage(this.$2,(a-d)/2,(b-e)/2,d,e)}catch(a){if(a.name!=="NS_ERROR_NOT_AVAILABLE")throw a}};b.getDOMNode=function(){return this.$1};b.updateDimensions=function(a,b){this.$4=a,this.$5=b};return a}();g["default"]=a}),98);
__d("generateVideoThumbnails",["CPXComposerConstants","CanvasVideoThumbnail","HTMLMediaElementReadyStates","Promise","VideoFrameBuffer","cr:909281"],(function(a,b,c,d,e,f,g){var h,i=.5625;function a(a,d,e,f,g,i,o,p,q,r){g===void 0&&(g="contain");i===void 0&&(i=0);o===void 0&&(o=null);p===void 0&&(p=null);q===void 0&&(q=null);r===void 0&&(r=null);return new(h||(h=b("Promise")))(function(h,s){var t=document.createElement("canvas"),u=[],v=0,w=a.duration-i;r!=null&&(w=Math.min(w,r));var x=w/f,y=null,z=null,A,B=(w=p)!=null?w:j(o,d),C=(w=q)!=null?w:k(o,e),D=l(o,d),E=m(o,e);t.width=B!=null?B:d;t.height=C!=null?C:e;var F=new(c("VideoFrameBuffer"))(t,a,g,B,C,D,E);F.updateFrameBuffer();var G=function(){F.updateFrameBuffer();var b=new(c("CanvasVideoThumbnail"))(t,a,i+(v-1)*x,B,C,D,E);u.push(b);(!y||b.getURL().length>y.getURL().length)&&(y=b,z=n(o,a));I()},H=function(){if(a.readyState>=c("HTMLMediaElementReadyStates").HAVE_CURRENT_DATA)G();else if(b("cr:909281")!==null)var d=b("cr:909281").listen(a,"loadeddata",function(){d.remove(),G()});else a.addEventListener("loadeddata",G,{once:!0})},I=function(){v===0&&(b("cr:909281")!==null?A=b("cr:909281").listen(a,"seeked",H):a.addEventListener("seeked",H)),v<f?(a.currentTime=i+v*x,v++):(b("cr:909281")!==null?A&&A.remove():a.removeEventListener("seeked",H),h({thumbnails:u,selectedThumbnail:y,croppedThumbnailUri:z}))};if(a.videoWidth===0||a.videoHeight===0){s();return}I()})}function j(a,b){if(a&&a.spherical){if(a.stereoMode==="left-right")return b/2;if(a.projectionType==="cubemap")return b/3}return null}function k(a,b){return a&&a.spherical&&(a.stereoMode==="top-bottom"||a.projectionType==="cubemap")?b/2:null}function l(a,b){return a&&a.spherical&&a.projectionType==="cubemap"?b/3:0}function m(a,b){return a&&a.spherical&&a.projectionType==="cubemap"?b/2:0}function n(a,b){var c=b.videoWidth!=null&&b.videoHeight!=null?b.videoWidth/b.videoHeight:i,e=c<1;if(a==null&&!e){a=document.createElement("canvas");e=a.getContext("2d");var f=b.videoWidth,g=b.videoHeight;a.width=f;a.height=g;e.drawImage(b,0,0,f,g);e=document.createElement("canvas");c>=1&&c<1.2?(b=f*(d("CPXComposerConstants").REEL_THUMBNAIL_WIDTH/d("CPXComposerConstants").REEL_THUMBNAIL_HEIGHT),c=g):(b=g,c=f);e.width=b;e.height=c;var h=e.getContext("2d");h.drawImage(a,0,0,f,g,0,0,b,c);return e.toDataURL("image/jpeg")}return null}g["default"]=a}),98);
__d("MAWVideoUtils",["FBLogger","MAWImageUtils","Promise","generateVideoThumbnails"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var e=document.body;if(!e)return new(h||(h=b("Promise")))(function(a,b){return b("Unable to find DOM body, please use this util only in DOM environment.")});var f=document.createElement("video");return new(h||(h=b("Promise")))(function(d,g){f.setAttribute("style","display: none"),f.setAttribute("src",URL.createObjectURL(a)),f.addEventListener("loadedmetadata",function(a){a=a.currentTarget;if(a instanceof HTMLVideoElement){var e=a.duration,i=a.videoHeight;a=a.videoWidth;var j=c("generateVideoThumbnails")(f,a,i,1);d((h||(h=b("Promise"))).all([j,a,i,Math.ceil(e)]))}else g("EventTarget returned for event should be HTMLVideoElement")}),f.addEventListener("error",function(a){g("Unable to load video")}),e.appendChild(f)}).then(function(a){var b=a[0],c=a[1],g=a[2],h=a[3];e.removeChild(f);return d("MAWImageUtils").canvasToBlob(b.thumbnails[0].getCanvas(),d("MAWImageUtils").TYPE_JPEG,!0).then(function(a){return a.arrayBuffer().then(function(a){return{duration:h,height:g,jpegThumbnail:a,width:c}})})})["catch"](function(a){e.removeChild(f);throw c("FBLogger")("messenger_web").mustfixThrow(a)})}function e(a){var d=document.body;if(!d)return new(h||(h=b("Promise")))(function(a,b){return b("Unable to find DOM body, please use this util only in DOM environment.")});var e=document.createElement("video");return new(h||(h=b("Promise")))(function(b,c){e.setAttribute("style","display: none"),e.setAttribute("src",URL.createObjectURL(a)),e.addEventListener("loadedmetadata",function(a){a=a.currentTarget;if(a instanceof HTMLVideoElement){var d=a.duration,e=a.videoHeight;a=a.videoWidth;b({duration:Math.ceil(d),height:e,width:a})}else c("EventTarget returned for event should be HTMLVideoElement")}),e.addEventListener("error",function(a){c("Unable to load video")}),d.appendChild(e)})["catch"](function(a){d.removeChild(e);throw c("FBLogger")("messenger_web").mustfixThrow(a)})}g.getVideoThumbnailUrlAndSpec=a;g.getVideoThumbnailSpec=e}),98);
__d("MAWFowardMessageFromOpenThread",["FBLogger","I64","LSIntEnum","MAWBridgeSendAndReceive","MAWDocumentPreProcess","MAWFetchXMABlob","MAWFetchXMAData","MAWFetchXMADataUtils","MAWForwardMessage","MAWGetEphemeralSettings","MAWGetImageSpec","MAWImagePreProcess","MAWMessageSendReporter","MAWMessageSendReporterV2","MAWUnshimUrl","MAWVideoUtils","MessagingAttachmentType","Promise","ReQL","WAArmadilloXMA.pb","WABlobToArrayBuffer","asyncToGeneratorRuntime","qpl","sendToSentQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k="369239263222822",l="369239343222814",m="369239383222810";function n(a){return a===k||a===l||a===m}function o(a,c){return(j||(j=b("Promise"))).all([d("MAWGetImageSpec").getImageSpec_DEPRECATED(a),j.resolve(a),c.arrayBuffer(),d("MAWGetImageSpec").getImageSpec_DEPRECATED(c)]).then(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a[0],c=a[1],e=a[2];a=a[3];return{file:c,imageSpec:b,plaintext:yield d("WABlobToArrayBuffer").blobToArrayBuffer(c),thumbnailUrlAndSpec:{duration:void 0,height:a.height,jpegThumbnail:e,width:a.width},type:"image"}});return function(b){return a.apply(this,arguments)}}())}function p(a){return d("MAWVideoUtils").getVideoThumbnailUrlAndSpec(a).then(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){return{file:a,plaintext:yield d("WABlobToArrayBuffer").blobToArrayBuffer(a),thumbnailUrlAndSpec:b,type:"video"}});return function(a){return c.apply(this,arguments)}}())}function q(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("MAWFetchXMABlob").fetchBlob({descriptionForLogging:"MAWFowardMessageFromOpenThread",url:a}));b=a==null?void 0:new File([a],b,{type:a.type});a=b!=null?yield d("MAWGetImageSpec").getImageSpec_DEPRECATED(b):null;return b!=null&&a!=null?{file:b,height:a.height,width:a.width}:void 0});return r.apply(this,arguments)}function s(a,b,c){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){c=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(c.tables.attachment_ctas).getKeyRange(a)));return c==null||b==null&&c.actionUrl==null?null:{actionUrl:(a=c==null?void 0:c.actionUrl)!=null?a:void 0,buttonType:d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE.OPEN_NATIVE,nativeUrl:(a=c==null?void 0:c.actionUrl)!=null?a:void 0,title:b!=null?b:void 0}});return t.apply(this,arguments)}function u(a,b,c,d){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){var g=(yield w(b,e));if((g==null?void 0:g.actionUrl)==null){d("MAWMessageSendReporterV2").isMessageSendReporterV2Enabled()||d("sendToSentQPLLogger").markSendToSentFail(f,"null_xma_url");throw c("FBLogger")("messenger_web_sharing").mustfixThrow("Cannot forward XMA to secure threads without a defaultCTA and actionUrl")}a=(yield d("MAWFetchXMAData").fetchXMAData(a,g.actionUrl,[f]));if(a.linkType==="unknown"){d("MAWMessageSendReporterV2").isMessageSendReporterV2Enabled()||d("sendToSentQPLLogger").markSendToSentFail(f,"unknown_xma_link_type");throw c("FBLogger")("messenger_web_sharing").mustfixThrow("Cannot forward XMA to secure threads with an unknown link type")}if(a.linkType==="external")return A(b,g,e,a);else return y(a,f)});return v.apply(this,arguments)}function w(a,b){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a.actionUrl,e=a.defaultCtaId;a=a.defaultCtaTitle;if(e==null)return null;e=(yield s(e,a,b));return e!=null?e:{actionUrl:c!=null?c:void 0,buttonType:d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE.OPEN_NATIVE,nativeUrl:c!=null?c:void 0,title:a!=null?a:void 0}});return x.apply(this,arguments)}function y(a,b){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=(yield d("MAWFetchXMADataUtils").makeXMAFileArgs(a,b));var c=a.contentRef,e=a.ctas,f=a.defaultCTA,g=a.overlayIconGlyph,h=a.subtitle_text,i=a.title_text;a=a.xma_message_type;c={contentRef:c,ctas:e,defaultCTA:f,overlayIconGlyph:g,subtitleText:h,titleText:i};return babelHelpers["extends"]({},b,{xmaArgs:c,xmaMessageType:a!=null?a:d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE})});return z.apply(this,arguments)}function A(a,b,c,d){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f){var g=a.attachmentCta1Id,i=a.attachmentCta2Id,k=a.attachmentCta3Id,l=a.cta1Title,m=a.cta2Title,n=a.cta3Title,o=a.faviconUrl,p=a.headerImageUrl,r=a.headerTitle,t=a.maxSubtitleNumOfLines,u=a.maxTitleNumOfLines,v=a.previewUrl,w=a.subtitleText;a=a.titleText;o=(yield (j||(j=b("Promise"))).all([[o,"favicon"],[p,"headerImage"],[v,"preview"]].map(function(a){return q(a[0],a[1])})));p=o[0];v=o[1];o=o[2];var x=[];if(g!=null){g=(yield s(g,l,e));g!=null&&x.push(g)}if(i!=null){l=(yield s(i,m,e));l!=null&&x.push(l)}if(k!=null){g=(yield s(k,n,e));g!=null&&x.push(g)}i={contentRef:f.contentRef,ctas:x.map(function(a){return babelHelpers["extends"]({},a,{actionUrl:d("MAWUnshimUrl").unshimUrl(a.actionUrl),nativeUrl:d("MAWUnshimUrl").unshimUrl(a.nativeUrl)})}),defaultCTA:babelHelpers["extends"]({},c,{actionUrl:d("MAWUnshimUrl").unshimUrl(c.actionUrl),nativeUrl:d("MAWUnshimUrl").unshimUrl(c.nativeUrl)}),headerTitle:r,maxSubtitleNumOfLines:(h||(h=d("I64"))).to_int32(t!=null?t:(h||(h=d("I64"))).zero),maxTitleNumOfLines:h.to_int32(u!=null?u:(h||(h=d("I64"))).zero),overlayIconGlyph:d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.NONE,subtitleText:w,titleText:a};return{faviconFileArgs:p,headerFileArgs:v,previewFileArgs:o,xmaArgs:i,xmaMessageType:f.xma_message_type}});return B.apply(this,arguments)}function C(a){var e=a.attachmentType,f=a.filename,g=a.playableDurationMs,k=a.playableUrl,l=a.playableUrlMimeType,m=a.previewUrl,n=a.previewUrlMimeType;if((h||(h=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))||(h||(h=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO))||(h||(h=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE))||(h||(h=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").FILE))){if(k==null)throw c("FBLogger")("messenger_web_sharing").mustfixThrow("If you see this error, there is no playableUrl for this attachment");var q=(h||(h=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE));if(m!=null){a=q?m+"&":k;var r=q?m+"&":m;return(j||(j=b("Promise"))).all([window.fetch(a).then(function(a){return a.blob()}),window.fetch(r).then(function(a){return a.blob()})]).then(function(a){var b=a[0];a=a[1];b=new File([b],"mediaForwardedFromOpenThread",{type:q?n:l});a=new File([a],"previewForwardedFromOpenThread",{type:n});if((h||(h=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE)))return o(b,a);if((h||(h=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)))return p(b);if((h||(h=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE)))return o(b,a);throw c("FBLogger")("messenger_web_sharing").mustfixThrow("shouldn't have this error in forward message from open thread")})}a=q?k+"&":k;return window.fetch(a).then(function(a){return a.blob()}).then(function(a){if(q&&l==="video/mp4")throw c("FBLogger")("messenger_web_sharing").mustfixThrow("If you see this error, there is only mp4 url for gif");a=new File([a],f!=null?f:"mediaForwardedFromOpenThread",{type:l});if((h||(h=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE)))return d("MAWImagePreProcess").imagePreprocess(a,!1);if((h||(h=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)))return p(a);if((h||(h=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").FILE)))return d("MAWDocumentPreProcess").documentPreprocess(a);if((h||(h=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE)))return(j||(j=b("Promise"))).all([d("MAWImagePreProcess").getJpegThumbnailInfo(a,400),d("MAWGetImageSpec").getImageSpec_DEPRECATED(a),j.resolve(a)]).then(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a[0],c=a[1];a=a[2];return{file:a,imageSpec:c,plaintext:yield d("WABlobToArrayBuffer").blobToArrayBuffer(a),thumbnailUrlAndSpec:b,type:"image"}});return function(b){return a.apply(this,arguments)}}());throw c("FBLogger")("messenger_web_sharing").mustfixThrow("shouldn't have this error in forward message from open thread")})}if((h||(h=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO))){if(k!=null)return window.fetch(k+"&").then(function(a){return a.blob()}).then(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=new File([a],"mediaForwardedFromOpenThread",{type:l});return{durations:(h||(h=d("I64"))).to_int32(g!=null?g:(h||(h=d("I64"))).zero)/1e3,file:a,isPtt:!0,plaintext:yield d("WABlobToArrayBuffer").blobToArrayBuffer(a),type:"audio"}});return function(b){return a.apply(this,arguments)}}());throw c("FBLogger")("messenger_web_sharing").mustfixThrow("If you see this error, there is no playableUrl for this audio attachment")}if((h||(h=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER))){if(k==null&&m==null)throw c("FBLogger")("messenger_web_sharing").mustfixThrow("If you see this error, there is no url for this sticker");return k!=null?m!=null?(j||(j=b("Promise"))).all([window.fetch(k).then(function(a){return a.blob()}),window.fetch(m).then(function(a){return a.blob()})]).then(function(a){var b=a[0];a=a[1];b=new File([b],"mediaForwardedFromOpenThread",{type:l});a=new File([a],"previewForwardedFromOpenThread",{type:n});return o(b,a)}):window.fetch(k).then(function(a){return a.blob()}).then(function(a){a=new File([a],"mediaForwardedFromOpenThread",{type:l});return o(a,a)}):window.fetch(m).then(function(a){return a.blob()}).then(function(a){return d("MAWImagePreProcess").imagePreprocess(new File([a],"previewForwardedFromOpenThread",{type:n}),!0)})}throw c("FBLogger")("messenger_web_sharing").mustfixThrow("We do not support forwarding other media types. Received attachment %d",(i||(i=d("LSIntEnum"))).toNumber(e))}function a(a,e,f,g,j,k,l,m,o){return d("MAWForwardMessage").maybeCreateNewThreadAndCallback(e,f,function(p,q){var r=d("MAWGetEphemeralSettings").getEphemeralSetting(p,f),s=q;return r.then(function(f){if(k!=null){if(n(k.attachmentFbid)){var q=d("MAWBridgeSendAndReceive").sendAndReceive("backend","sendMsg",{args:{content:"\ud83d\udc4d",ephemeralSetting:f!=null?f:void 0,isFirstMsg:s,isForwarded:j,source:l,specialTextSize:1},chatJid:p,externalId:o,qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:m});return d("MAWMessageSendReporterV2").isMessageSendReporterV2Enabled()?q:d("MAWMessageSendReporter").MAWMessageSendReporter({chatJid:p,externalId:o},q,{qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:m},e)}return(h||(h=d("I64"))).equal(k.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA))?u(a,k,e,m).then(function(a){var b=a.faviconFileArgs,h=a.headerFileArgs,i=a.previewFileArgs,j=a.xmaArgs;a=a.xmaMessageType;a=d("MAWBridgeSendAndReceive").sendAndReceive("backend","sendXMAShareMsg",{args:{content:g.text,ephemeralSetting:f!=null?f:void 0,isFirstMsg:s,isForwarded:!0,xmaMessageType:a!=null?a:d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE},chatJid:p,faviconFile:b,headerFile:h,previewFile:i,qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:m,xmaArgs:j,xmaMsgExternalId:o});return d("MAWMessageSendReporterV2").isMessageSendReporterV2Enabled()?a:d("MAWMessageSendReporter").MAWMessageSendReporter({chatJid:p,externalId:o},a,{qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:m},e)}):C(k).then(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;switch(a.type){case"image":var g=a.imageSpec,h=a.thumbnailUrlAndSpec;b={args:{ephemeralSetting:f!=null?f:void 0,height:g.height,isFirstMsg:s,isForwarded:j,jpegThumbnail:h==null?void 0:h.jpegThumbnail,jpegThumbnailHeight:h==null?void 0:h.height,jpegThumbnailWidth:h==null?void 0:h.width,source:l,width:g.width},attachmentType:"image",chatJid:p,externalId:o};break;case"video":h=a.thumbnailUrlAndSpec;b={args:{duration:h.duration,ephemeralSetting:f!=null?f:void 0,height:h.height,isFirstMsg:s,isForwarded:j,jpegThumbnail:h.jpegThumbnail,jpegThumbnailHeight:h.height,jpegThumbnailWidth:h.width,source:l,width:h.width},attachmentType:"video",chatJid:p,externalId:o};break;case"audio":g=a.durations;h=a.isPtt;b={args:{duration:Math.round(g),ephemeralSetting:f!=null?f:void 0,isFirstMsg:s,isForwarded:j,isPtt:h,source:l},attachmentType:"audio",chatJid:p,externalId:o};break;case"document":b={args:{ephemeralSetting:f!=null?f:void 0,filename:a.filename,isFirstMsg:s,isForwarded:j,source:l},attachmentType:"application",chatJid:p,externalId:o};break}if(b==null)throw c("FBLogger")("messenger_web_sharing").mustfixThrow("We do not support forwarding this attachment type: %s",a.type);h=d("MAWBridgeSendAndReceive").sendAndReceive("backend","sendMediaMsgV2",babelHelpers["extends"]({},b,{mimeType:a.file.type,plaintext:(g=a.plaintext)!=null?g:yield d("WABlobToArrayBuffer").blobToArrayBuffer(a.file),qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:m}));return d("MAWMessageSendReporterV2").isMessageSendReporterV2Enabled()?h:d("MAWMessageSendReporter").MAWMessageSendReporter({chatJid:p,externalId:o},h,{qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:m},e)});return function(b){return a.apply(this,arguments)}}())}q=g.text;if(q!=null){q=d("MAWBridgeSendAndReceive").sendAndReceive("backend","sendMsg",{args:{content:g.text,ephemeralSetting:f!=null?f:void 0,isFirstMsg:s,isForwarded:j,source:l},chatJid:p,externalId:o,qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:m});return d("MAWMessageSendReporterV2").isMessageSendReporterV2Enabled()?q:d("MAWMessageSendReporter").MAWMessageSendReporter({chatJid:p,externalId:o},q,{qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:m},e)}throw c("FBLogger")("messenger_web_sharing").mustfixThrow("We do not support forwarding this types")})},m)}g.downloadMediaByUrl=C;g.forwardMessage=a}),98);
__d("LSLocalApplyOptimisticMessageWithAttachments",["LSArrayGetObjectAt","LSLocalApplyOptimisticMessage","LSSetMessageDisplayedContentTypes"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return c.storedProcedure(b("LSLocalApplyOptimisticMessage"),a[0],a[1],a[2],a[3],a[4],a[5],a[6],void 0,a[7],a[8],a[9],a[10],void 0,a[12],!0).then(function(a){return a=a,d[0]=a[0],d[1]=a[1],a})},function(e){return d[2]=c.i64.of_int32(a[11].length),c.i64.gt(d[2],c.i64.cast([0,0]))?c.loopAsync(d[2],function(e){return d[3]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[11],d[3]).then(function(a){return a=a,d[4]=a[0],d[5]=a[1],a})},function(b){return d[6]=d[4].get("attachment_fbid"),d[7]=d[4].get("offline_attachment_id"),d[8]=d[4].get("attachment_type"),d[9]=d[4].get("filename"),d[10]=d[4].get("filesize"),d[11]=d[4].get("attachment_index"),d[12]=d[4].get("has_media"),d[13]=d[4].get("has_xma"),d[14]=d[4].get("playable_url"),d[15]=d[4].get("playable_url_mime_type"),d[16]=d[4].get("playable_duration_ms"),d[17]=d[4].get("preview_url"),d[18]=d[4].get("preview_url_mime_type"),d[19]=d[4].get("mini_preview"),d[20]=d[4].get("preview_width"),d[21]=d[4].get("preview_height"),d[22]=d[4].get("xma_layout_type"),d[23]=d[4].get("xmas_template_type"),d[24]=d[4].get("cta1_title"),d[25]=d[4].get("cta2_title"),d[26]=d[4].get("cta3_title"),d[27]=d[4].get("image_url"),d[28]=d[4].get("action_url"),d[29]=d[4].get("title_text"),d[30]=d[4].get("subtitle_text"),d[31]=d[4].get("description_text"),d[32]=d[4].get("source_text"),d[33]=d[4].get("original_file_hash"),d[34]=d[4].get("sound_bite_client_sound_key"),d[35]=d[4].get("sound_bite_visual"),d[36]=d[4].get("ephemeral_media_state"),d[37]=d[4].get("waveform_data"),d[38]=d[4].get("sampling_frequency_hz"),d[17]!==void 0?d[39]=d[17]:d[39]=d[14],c.filter(c.db.table(16).fetch([[[a[1],d[0],d[6]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&b.messageId===d[0]&&b.attachmentFbid===d[6]&&c.i64.gt(b.authorityLevel,c.i64.cast([0,20]))}).next().then(function(b){var e=b.done;b.value;return e?c.db.table(16).put({threadKey:a[1],messageId:d[0],attachmentFbid:d[6],timestampMs:d[1],offlineAttachmentId:d[7],attachmentType:d[8],filename:d[9],filesize:d[10],attachmentIndex:d[11],hasMedia:d[12],hasXma:d[13],isSharable:!1,playableUrl:d[14],playableUrlMimeType:d[15],playableDurationMs:d[16],previewUrl:d[39],previewUrlMimeType:d[18],miniPreview:d[19],previewWidth:d[20],previewHeight:d[21],xmaLayoutType:d[22],xmasTemplateType:d[23],cta1Title:d[24],cta2Title:d[25],cta3Title:d[26],imageUrl:d[27],actionUrl:d[28],titleText:d[29],subtitleText:d[30],descriptionText:d[31],sourceText:d[32],ephemeralMediaState:d[36],originalFileHash:d[33],authorityLevel:c.i64.cast([0,20]),samplingFrequencyHz:d[38],waveformData:d[37]}):0})}])}):c.resolve()},function(e){return d[2]=c.i64.of_int32(a[11].length),c.i64.gt(d[2],c.i64.cast([0,0]))?c.storedProcedure(b("LSSetMessageDisplayedContentTypes"),a[1],d[0],d[1],a[3],!1,c.i64.neq(a[6],void 0)):c.resolve()},function(a){return a=[d[0],d[1]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxLocalApplyOptimisticMessageWithAttachmentsStoredProcedure";a.__tables__=["attachments"];e.exports=a}),null);
__d("LSLocalApplyOptimisticMessageWithAttachmentsStoredProcedure",["LSLocalApplyOptimisticMessageWithAttachments","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSLocalApplyOptimisticMessageWithAttachments"),e.senderId,e.threadKey,e.threadType,e.text,e.snippet,e.snippetHasEmoji,e.stickerId,e.replySourceId,e.replySourceType,e.replySourceTypeV2,e.isForwarded,e.attachments,e.mentionData);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSOptimisticSendXMAMessageForwardFromSecureThread",["LSArrayGetObjectAt","LSIssueNewTaskWithExtraOperationsAndGetTaskID","LSLocalApplyOptimisticMessage","LSSetMessageDisplayedContentTypes","LSUpdateOptimisticAttachmentPreview"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return c.storedProcedure(b("LSLocalApplyOptimisticMessage"),a[0],a[1],a[2],a[3],void 0,void 0,void 0,void 0,void 0,void 0,c.i64.cast([0,3]),a[4],void 0,void 0,!0).then(function(a){return a=a,d[0]=a[0],d[1]=a[1],a})},function(e){return d[3]=c.i64.of_int32(a[6].length),c.i64.gt(d[3],c.i64.cast([0,0]))?c.loopAsync(d[3],function(e){return d[4]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[6],d[4]).then(function(a){return a=a,d[5]=a[0],d[6]=a[1],a})},function(e){return d[7]=d[5].get("attachment_fbid"),d[8]=d[5].get("offline_attachment_id"),d[9]=d[5].get("attachment_type"),d[10]=d[5].get("filename"),d[11]=d[5].get("filesize"),d[12]=d[5].get("attachment_index"),d[13]=d[5].get("has_media"),d[14]=d[5].get("has_xma"),d[15]=d[5].get("playable_url"),d[16]=d[5].get("playable_url_mime_type"),d[17]=d[5].get("playable_duration_ms"),d[18]=d[5].get("preview_url"),d[19]=d[5].get("preview_url_mime_type"),d[20]=d[5].get("mini_preview"),d[21]=d[5].get("preview_width"),d[22]=d[5].get("preview_height"),d[23]=d[5].get("xma_layout_type"),d[24]=d[5].get("xmas_template_type"),d[25]=d[5].get("cta1_title"),d[26]=d[5].get("cta2_title"),d[27]=d[5].get("cta3_title"),d[28]=d[5].get("image_url"),d[29]=d[5].get("action_url"),d[30]=d[5].get("title_text"),d[31]=d[5].get("subtitle_text"),d[32]=d[5].get("description_text"),d[33]=d[5].get("source_text"),d[34]=d[5].get("original_file_hash"),d[35]=d[5].get("sound_bite_client_sound_key"),d[36]=d[5].get("sound_bite_visual"),d[37]=d[5].get("ephemeral_media_state"),c.sequence([function(b){return c.forEach(c.filter(c.db.table(16).fetch([[[a[1],d[0],d[7]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&b.messageId===d[0]&&b.attachmentFbid===d[7]&&c.i64.lt(b.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(b){return c.db.table(16).add({threadKey:a[1],messageId:d[0],attachmentFbid:d[7],timestampMs:d[1],offlineAttachmentId:d[8],attachmentType:d[9],filename:d[10],filesize:d[11],attachmentIndex:d[12],hasMedia:d[13],hasXma:d[14],isSharable:!1,playableUrl:d[15],playableUrlMimeType:d[16],playableDurationMs:d[17],previewUrl:d[18],previewUrlMimeType:d[19],miniPreview:d[20],previewWidth:d[21],previewHeight:d[22],xmaLayoutType:d[23],xmasTemplateType:d[24],cta1Title:d[25],cta2Title:d[26],cta3Title:d[27],imageUrl:d[28],actionUrl:d[29],titleText:d[30],subtitleText:d[31],descriptionText:d[32],sourceText:d[33],ephemeralMediaState:d[37],originalFileHash:d[34],authorityLevel:c.i64.cast([0,20])})},function(e){return c.storedProcedure(b("LSSetMessageDisplayedContentTypes"),a[1],d[0],d[1],a[3],!1,!1)},function(e){return c.storedProcedure(b("LSUpdateOptimisticAttachmentPreview"),a[1],d[0],d[7],d[15],void 0,void 0,d[16],d[18],void 0,void 0,d[19],d[21],d[22],d[30])}])}])}):c.resolve()},function(e){return c.storedProcedure(b("LSIssueNewTaskWithExtraOperationsAndGetTaskID"),c.i64.to_string(a[1]),c.i64.cast([0,46]),"",void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),c.i64.cast([0,1]),void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0])).then(function(a){return a=a,d[2]=a[0],a})},function(b){return c.db.table(31).add({taskId:d[2],threadKey:a[1],offlineThreadingId:d[0],threadAttributionSource:a[5],sendType:c.i64.cast([0,11]),markThreadRead:!1})},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticSendXMAMessageForwardFromSecureThreadStoredProcedure";a.__tables__=["attachments","messages_optimistic_context"];e.exports=a}),null);
__d("LSOptimisticSendXMAMessageForwardFromSecureThreadStoredProcedure",["LSOptimisticSendXMAMessageForwardFromSecureThread","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSOptimisticSendXMAMessageForwardFromSecureThread"),e.senderId,e.threadKey,e.threadType,e.text,e.isForwarded,e.source,e.attachments);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWForwardMessageFromSecureThread.react",["FBLogger","I64","LSFactory","LSHotEmojiSize","LSInsertNewMediaSendStoredProcedure","LSIntEnum","LSLocalApplyOptimisticMessageWithAttachmentsStoredProcedure","LSMailboxType","LSMarkSubJobCompletedV2StoredProcedure","LSOptimisticSendMessageV2StoredProcedure","LSOptimisticSendXMAMessageForwardFromSecureThreadStoredProcedure","LSShape","LSVec","MAWBridgeSendAndReceive","MAWDbMedia","MWPComposerMediaUploadUtil","MWPOpenComposerUtils","MessagePowerUp","MessagingAttachmentType","OfflineThreadingId","Promise","ReQL","WAHashUtils","asyncToGeneratorRuntime","cr:2472","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,b,c){return{action_url:void 0,attachment_fbid:b,attachment_index:(j||(j=d("I64"))).zero,attachment_type:a.attachmentType,cta1_title:void 0,cta2_title:void 0,cta3_title:void 0,description_text:void 0,filename:a.filename,filesize:void 0,has_media:!0,has_xma:!1,image_url:void 0,mini_preview:void 0,offline_attachment_id:b,original_file_hash:void 0,playable_duration_ms:a.playableDurationMs,playable_url:URL.createObjectURL(c),playable_url_mime_type:c.type,preview_height:void 0,preview_url:void 0,preview_url_mime_type:void 0,preview_width:void 0,source_text:void 0,subtitle_text:void 0,title_text:void 0,xma_layout_type:void 0,xmas_template_type:void 0}}function l(a,b,c,e){var f;return{action_url:(f=b==null?void 0:b.actionUrl)!=null?f:b==null?void 0:b.nativeUrl,attachment_fbid:c,attachment_index:(j||(j=d("I64"))).zero,attachment_type:a.attachmentType,cta1_title:a.cta1Title,cta2_title:a.cta2Title,cta3_title:a.cta3Title,description_text:a.descriptionText,filename:a.filename,filesize:a.filesize,has_media:!1,has_xma:!0,image_url:void 0,mini_preview:void 0,offline_attachment_id:c,original_file_hash:void 0,playable_duration_ms:void 0,playable_url:e!=null?URL.createObjectURL(e):void 0,playable_url_mime_type:e==null?void 0:e.type,preview_height:void 0,preview_url:e!=null?URL.createObjectURL(e):void 0,preview_url_mime_type:e==null?void 0:e.type,preview_width:void 0,source_text:a.sourceText,subtitle_text:a.subtitleText,title_text:a.titleText,xma_layout_type:a.xmaLayoutType,xmas_template_type:a.xmasTemplateType}}function m(a,e,f,g,i,j,k,l){l=c("LSFactory")(l);return c("LSOptimisticSendXMAMessageForwardFromSecureThreadStoredProcedure")(l,{attachments:c("LSVec").ofArray([d("LSShape").ofRecord(j)]),isForwarded:i,senderId:a,source:k,text:g!=null?g:void 0,threadKey:e,threadType:f}).then(function(){return(h||(h=b("Promise"))).resolve()})}function n(a,b){return a==null||b==null?void 0:{amplitudes:b.split(",").map(parseFloat),sampling_freq:a}}function o(a,e,g,k,l,m,o,p,q){var r=c("LSFactory")(p);return c("LSLocalApplyOptimisticMessageWithAttachmentsStoredProcedure")(r,{attachments:c("LSVec").ofArray([d("LSShape").ofRecord(e)]),isForwarded:m,senderId:o,threadKey:l,threadType:k}).then(function(a){var c=a[0];a[1];return p.messages_optimistic_context.add({externalAttachmentUrl:void 0,initiatingSource:void 0,markThreadRead:!1,messageId:void 0,offlineThreadingId:c,platformRef:void 0,platformToken:void 0,replySourceId:void 0,replySourceType:void 0,sendType:void 0,skipUrlPreviewGen:void 0,taskId:(j||(j=d("I64"))).of_string(c),threadAttributionSource:q,threadKey:l}).then(function(){return(h||(h=b("Promise"))).resolve(c)})}).then(function(a){var f=e.attachment_fbid;return c("LSInsertNewMediaSendStoredProcedure")(r,{attachmentType:e.attachment_type,inMessageIndex:(j||(j=d("I64"))).zero,isSecure:!1,offlineAttachmentId:f,offlineThreadingId:a,sendByServer:!1,shouldTranscode:!1,useDoublePhase:!1}).then(function(){return(h||(h=b("Promise"))).resolve([a,f])})}).then(function(b){var h=b[0],k=b[1];b=function(b,e){if(e==null||e.length===0)return;c("promiseDone")(a.runInTransaction(function(a){var b=c("LSFactory")(a);return c("LSMarkSubJobCompletedV2StoredProcedure")(b,{fbid:(j||(j=d("I64"))).of_string(e),offlineAttachmentId:k}).then(function(){return d("MWPOpenComposerUtils").resumeSendJob(b,h)})},"readwrite",void 0,void 0,f.id+":220"))};return d("MWPComposerMediaUploadUtil").startUpload(void 0,void 0,b,void 0,(j||(j=d("I64"))).equal(e.attachment_type,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO)),[g],[k],void 0,void 0,n(e.sampling_frequency_hz,e.waveform_data),void 0,void 0)})}function a(a,b,c,d,e,f,g,h,i){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,g,p,q,r,s,t,u){if(r!=null){var v=r.attachmentType;if(!((j||(j=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO))||(j||(j=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))||(j||(j=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO))||(j||(j=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE))||(j||(j=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").FILE))||(j||(j=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA))))throw c("FBLogger")("messenger_web_sharing").mustfixThrow("We do not support forwarding this type");var w=null;if(!(j||(j=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA))){isFinite(r.attachmentFbid)?w=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByMediaId",{description:"MAWForwardMessageFromSecureThread",mediaId:d("MAWDbMedia").convertNumberToMediaId(Number.parseInt(r.attachmentFbid,10))})):w=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByHashedPlaintextHash",{description:"MAWForwardMessageFromSecureThread",plaintextHash:d("WAHashUtils").stringToPlaintextHash(r.attachmentFbid)}));if(w==null)return}yield a.runInTransaction(function(f){switch(!0){case(j||(j=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO)):if(w==null)throw c("FBLogger")("messenger_web_sharing").mustfixThrow("Blob can not be null for MessagingAttachmentType.AUDIO");var x=new File([w],"mediaForwardedFromSecureThread",{type:w.type}),y=d("OfflineThreadingId").createOfflineThreadingID();y=d("MWPComposerMediaUploadUtil").getAudioAttachment(y,x,(j||(j=d("I64"))).to_int32((y=r.playableDurationMs)!=null?y:(j||(j=d("I64"))).zero)/1e3,n(r.samplingFrequencyHz!=null?(j||(j=d("I64"))).to_int32(r.samplingFrequencyHz):void 0,r.waveformData));return o(a,y,x,g,e,q,s,f,t);case(j||(j=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA)):return d("ReQL").firstAsync(d("ReQL").fromTableDescending(f.attachment_ctas).getKeyRange((y=r.defaultCtaId)!=null?y:(j||(j=d("I64"))).zero)).then(function(a){var e,f=r.xmaPreviewFbid;if(f==null){c("FBLogger")("messenger_web_sharing").mustfix("XMA preview fbid is null when forwarding XMA");return(h||(h=b("Promise"))).resolve([a,void 0])}if(c("gkx")("11351"))e=d("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByHashedPlaintextHash",{description:"MAWForwardMessageFromSecureThread",plaintextHash:d("WAHashUtils").stringToPlaintextHash(f)});else if(c("gkx")("7858"))isFinite(r.xmaPreviewFbid)?(c("FBLogger")("messenger_web_sharing").warn("XMA preview fbid is not a plaintextHash when forwarding XMA"),e=d("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByMediaId",{description:"MAWForwardMessageFromSecureThread",mediaId:d("MAWDbMedia").convertNumberToMediaId(Number.parseInt(f,10))})):e=d("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByHashedPlaintextHash",{description:"MAWForwardMessageFromSecureThread",plaintextHash:d("WAHashUtils").stringToPlaintextHash(f)});else try{e=d("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByMediaId",{description:"MAWForwardMessageFromSecureThread",mediaId:d("MAWDbMedia").convertNumberToMediaId(Number.parseInt(f,10))})}catch(d){c("FBLogger")("messenger_web_sharing").mustfix("XMA preview fbid is not a valid mediaId when forwarding XMA %s",d);return(h||(h=b("Promise"))).resolve([a,void 0])}return e.then(function(c){return(h||(h=b("Promise"))).resolve([a,c])})["catch"](function(d){c("FBLogger")("messenger_web_sharing").catching(d).warn("Unable to getBlobDataUrlByXMAId, from MAWForwardMessageFromSecureThread");return(h||(h=b("Promise"))).resolve([a,void 0])})}).then(function(a){var c=a[0];a=a[1];var h=null;a!=null&&(h=new File([a],"xmaForwardedFromSecureThread",{type:a.type}));a=d("OfflineThreadingId").createOfflineThreadingID();c=l(r,c,a,h);a=p.text;h=b("cr:2472")==null||a==null?a:b("cr:2472").unvault(a);return m(s,e,g,u!=null?u:h,q,c,t,f)});case(j||(j=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").FILE)):case(j||(j=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE)):case(j||(j=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)):case(j||(j=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE)):if(w==null)throw c("FBLogger")("messenger_web_sharing").mustfixThrow("Blob can not be null for MessagingAttachmentType.AUDIO");y=new File([w],(x=r.filename)!=null?x:"mediaForwardedFromSecureThread",{type:w.type});x=d("OfflineThreadingId").createOfflineThreadingID();x=k(r,x,y);return o(a,x,y,g,e,q,s,f,t);default:throw c("FBLogger")("messenger_web_sharing").mustfixThrow("We do not support forwarding this type")}},"readwrite",void 0,void 0,f.id+":327")}else{var x=p.text;if(x==null)throw c("FBLogger")("messenger_web_sharing").mustfixThrow("We do not support forwarding this type");var y=b("cr:2472")==null?x:b("cr:2472").unvault(x),z=y==="\ud83d\udc4d"&&p.hotEmojiSize!=null&&(j||(j=d("I64"))).equal(p.hotEmojiSize,(i||(i=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").SMALL)),A=z?(j||(j=d("I64"))).of_string("369239263222822"):void 0;yield a.runInTransaction(function(a){return c("LSOptimisticSendMessageV2StoredProcedure")(c("LSFactory")(a),{extraSendMessageParams:d("LSShape").ofRecord({calculate_denormalizations:!1,is_forwarded:q,mark_read:!1,power_up_style:(i||(i=d("LSIntEnum"))).ofNumber(c("MessagePowerUp").NONE),source:t,sticker_id:A}),mailboxType:i.ofNumber(c("LSMailboxType").MESSENGER),senderId:s,text:z?void 0:u!=null?u:y,threadKey:e,threadType:g})},"readwrite",void 0,void 0,f.id+":556")}});return p.apply(this,arguments)}g.getMediaAttachment=k;g.uploadAndSendMediaToOpenThread=o;g.forwardMessage=a}),98);
__d("forwardAttachmentFromInstamadilloToOpen",["I64","LSIntEnum","MAWForwardMessageFromSecureThread.react","OfflineThreadingId","asyncToGeneratorRuntime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("LSDatabaseSingletonLazyWrapper").__setRef("forwardAttachmentFromInstamadilloToOpen");function a(a,b,c,d,e,f){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f,g){var k=(yield j.load()),l=(yield k());k=d("OfflineThreadingId").createOfflineThreadingID();var m={attachment_fbid:k,attachment_index:(h||(h=d("I64"))).zero,attachment_type:a.attachmentType,filename:a.filename,has_media:!0,has_xma:!1,offline_attachment_id:k,playable_duration_ms:a.playableDurationMs,playable_url:URL.createObjectURL(b),playable_url_mime_type:b.type,preview_height:a.previewHeight,preview_url:URL.createObjectURL(b),preview_width:a.previewWidth};yield l.runInTransaction(function(a){return d("MAWForwardMessageFromSecureThread.react").uploadAndSendMediaToOpenThread(l,m,b,(i||(i=d("LSIntEnum"))).ofNumber(e),(h||(h=d("I64"))).of_string(c),!0,f,a,g)},"readwrite")});return k.apply(this,arguments)}g["default"]=a}),98);
__d("forwardAttachmentToInstamadillo",["I64","IGDBridgedAPI","LSFactory","LSIntEnum","LSLocalApplyOptimisticMessageWithAttachmentsV2StoredProcedure","LSPendingTasksPluginType","LSShape","LSVec","OfflineThreadingId","asyncToGeneratorRuntime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("LSDatabaseSingletonLazyWrapper").__setRef("forwardAttachmentToInstamadillo");function a(a,b,c,d,e,f,g){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,k,l,m){var n=(yield j.load());n=(yield n());var o=d("OfflineThreadingId").createOfflineThreadingID(),p={attachment_fbid:o,attachment_index:(h||(h=d("I64"))).zero,attachment_type:a.attachmentType,filename:a.filename,has_media:!0,has_xma:!1,offline_attachment_id:o,playable_duration_ms:a.playableDurationMs,playable_url:URL.createObjectURL(e),playable_url_mime_type:e.type,preview_height:a.previewHeight,preview_url:URL.createObjectURL(e),preview_width:a.previewWidth};o=(yield n.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield c("LSLocalApplyOptimisticMessageWithAttachmentsV2StoredProcedure")(c("LSFactory")(a),{extraSendMessageParams:d("LSShape").ofRecord({attachments:c("LSVec").ofArray([d("LSShape").ofRecord(p)]),is_forwarded:!0,mark_read:!1,plugin_type:(i||(i=d("LSIntEnum"))).ofNumber(c("LSPendingTasksPluginType").IGD_INSTAMADILLO),source:l}),senderId:k,threadKey:(h||(h=d("I64"))).of_string(f),threadType:i.ofNumber(g)}));b=b[0];yield a.messages_optimistic_context.add({markThreadRead:!1,offlineThreadingId:b,openEb:m,taskId:h.of_string(b),threadAttributionSource:l,threadKey:h.of_string(f)});return b});return function(b){return a.apply(this,arguments)}}(),"readwrite"));yield c("IGDBridgedAPI").sendMediaMessage({offlineThreadingId:o});return o});return k.apply(this,arguments)}g["default"]=a}),98);
__d("LSOptimisticSendAttachmentForward",["LSInsertOptimisticAttachment","LSIssueNewTaskWithExtraOperationsAndGetTaskID","LSLocalApplyOptimisticMessage","LSUpdateOptimisticAttachmentPreview"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[1]=a[3]===""?void 0:a[3],d[1]!==void 0?c.sequence([function(b){return c.forEach(c.filter(c.db.table(16).fetch([[[a[1],d[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===d[1]&&c.i64.eq(b.authorityLevel,c.i64.cast([0,20]))}),function(b){var d=b.update;b.item;return d({attachmentFbid:c.i64.to_string(a[7])})})},function(a){return d[0]=d[1]}]):c.sequence([function(e){return c.storedProcedure(b("LSLocalApplyOptimisticMessage"),a[0],a[1],a[2],a[4],a[5],a[6],void 0,void 0,void 0,void 0,c.i64.cast([0,3]),void 0,void 0,void 0,!0).then(function(a){return a=a,d[2]=a[0],d[3]=a[1],a})},function(e){return c.filter(c.db.table(16).fetch(),function(b){return b.attachmentFbid===c.i64.to_string(a[7])}).next().then(function(e,f){var g=e.done;e=e.value;return g?c.storedProcedure(b("LSInsertOptimisticAttachment"),a[1],d[3],d[2],d[2],c.i64.to_string(a[7]),c.i64.cast([0,2]),void 0,void 0,!0,!1):(f=e.item,c.sequence([function(e){return c.storedProcedure(b("LSInsertOptimisticAttachment"),a[1],d[3],d[2],d[2],c.i64.to_string(a[7]),f.attachmentType,f.filename,f.attributionAppId,!0,!1)},function(e){return c.storedProcedure(b("LSUpdateOptimisticAttachmentPreview"),a[1],d[2],c.i64.to_string(a[7]),f.playableUrl,f.playableUrlFallback,f.playableUrlExpirationTimestampMs,f.playableUrlMimeType,f.previewUrl,f.previewUrlFallback,f.previewUrlExpirationTimestampMs,f.previewUrlMimeType,f.previewWidth,f.previewHeight,f.titleText)}]))})},function(a){return d[0]=d[2]}])},function(e){return c.sequence([function(b){return d[2]=c.createArray(),d[6]=(d[2].push(a[7]),d[2]),c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[3]=c.i64.cast([0,1]):(b=a.item,d[7]=b.syncGroup,c.i64.neq(d[7],void 0)?d[6]=d[7]:d[6]=c.i64.cast([0,1]),d[3]=d[6])})},function(e){return c.storedProcedure(b("LSIssueNewTaskWithExtraOperationsAndGetTaskID"),c.i64.to_string(a[1]),c.i64.cast([0,46]),"",void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),d[3],void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0])).then(function(a){return a=a,d[5]=a[0],a})},function(b){return c.db.table(31).add({taskId:d[5],threadKey:a[1],offlineThreadingId:d[0],threadAttributionSource:a[8],sendType:c.i64.cast([0,4]),markThreadRead:!1,initiatingSource:a[9]})}])},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticSendAttachmentForwardStoredProcedure";a.__tables__=["attachments","threads","messages_optimistic_context"];e.exports=a}),null);
__d("LSOptimisticSendAttachmentForwardStoredProcedure",["LSOptimisticSendAttachmentForward","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSOptimisticSendAttachmentForward"),e.senderId,e.threadKey,e.threadType,e.offlineThreadingId,e.text,e.snippet,e.snippetHasEmoji,e.forwardedAttachmentFbid,e.source,e.initiatingSource);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("forwardAttachmentToOpen",["I64","LSFactory","LSIntEnum","LSOptimisticSendAttachmentForwardStoredProcedure","asyncToGeneratorRuntime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("LSDatabaseSingletonLazyWrapper").__setRef("forwardAttachmentToOpen");function a(a,b,c,d,e){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g){var k=(yield j.load());k=(yield k());k=(yield k.runInTransaction(function(j){return c("LSOptimisticSendAttachmentForwardStoredProcedure")(c("LSFactory")(j),{forwardedAttachmentFbid:(h||(h=d("I64"))).of_string(a.attachmentFbid),senderId:f,source:g,threadKey:h.of_string(b),threadType:(i||(i=d("LSIntEnum"))).ofNumber(e)})},"readwrite"));k=k[0];return k});return k.apply(this,arguments)}g["default"]=a}),98);
__d("forwardAttachment",["FBLogger","I64","MAWDbMedia","MAWFowardMessageFromOpenThread","Promise","asyncToGeneratorRuntime","forwardAttachmentFromInstamadilloToOpen","forwardAttachmentToInstamadillo","forwardAttachmentToOpen","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("LSDatabaseSingletonLazyWrapper").__setRef("forwardAttachment");function a(a,b,c,d,e,f){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,k,l){var m=(yield j.load());m=(yield m());var n=(yield m.tables.e2ee_media.get(d("MAWDbMedia").convertToMediaId64((i||(i=d("I64"))).of_float(Number.parseInt(a.attachmentFbid,10))))),o=!1;if(n!=null){m=(yield m.tables.e2ee_chunk.index("hashedPlaintextHash").get(n.hashedPlaintextHash));if(m!=null){n=new Blob([m.blobData],{type:m.mimetype});m=new File([n],"IGDForwardFromSecureThread-"+a.attachmentFbid,{type:n.type});o=!0}else{c("FBLogger")("igd_web").mustfix("Missing chunk for e2ee media when forwarding an E2EE media message");return(h||(h=b("Promise"))).resolve()}}else{n=(yield d("MAWFowardMessageFromOpenThread").downloadMediaByUrl(a));m=n.file}if(Boolean(l==null?void 0:l.useInstamadilloTransport))return c("forwardAttachmentToInstamadillo")(a,m,e,f,g,k,Boolean(l==null?void 0:l.useOpenEb));else if(o)return c("forwardAttachmentFromInstamadilloToOpen")(a,m,e,f,g,k);else return c("forwardAttachmentToOpen")(a,e,f,g,k)});return k.apply(this,arguments)}g["default"]=a}),98);
__d("forwardText",["I64","LSFactory","LSIntEnum","LSMailboxType","LSOptimisticSendMessageV2StoredProcedure","LSPendingTasksPluginType","LSShape","MessagePowerUp","asyncToGeneratorRuntime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("LSDatabaseSingletonLazyWrapper").__setRef("forwardText"),k={calculate_denormalizations:!1,is_forwarded:!0,mark_read:!1,power_up_style:(h||(h=d("LSIntEnum"))).ofNumber(c("MessagePowerUp").NONE)};function a(a,b,c,d,e,f){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,l){var m=(yield j.load());m=(yield m());m=(yield m.runInTransaction(function(j){return c("LSOptimisticSendMessageV2StoredProcedure")(c("LSFactory")(j),{extraSendMessageParams:d("LSShape").ofRecord(babelHelpers["extends"]({},k,{openEb:l==null?void 0:l.useOpenEb,plugin_type:(l==null?void 0:l.useInstamadilloTransport)?(h||(h=d("LSIntEnum"))).ofNumber(c("LSPendingTasksPluginType").IGD_INSTAMADILLO):void 0,source:g})),mailboxType:(h||(h=d("LSIntEnum"))).ofNumber(c("LSMailboxType").MESSENGER),senderId:f,text:a.text,threadKey:(i||(i=d("I64"))).of_string(b),threadType:h.ofNumber(e)})},"readwrite"));m=m[0];return m});return l.apply(this,arguments)}g["default"]=a}),98);
__d("forwardXMAFromInstamadillo",["asyncToGeneratorRuntime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("getSendPostToInstamadilloRecipient").__setRef("forwardXMAFromInstamadillo"),i=c("requireDeferred")("getSendProfileToInstamadilloRecipient").__setRef("forwardXMAFromInstamadillo"),j=c("requireDeferred")("getSendReelToInstamadilloRecipient").__setRef("forwardXMAFromInstamadillo");function a(a,b,c,d){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d){if(b==null)return;b=JSON.parse(b);switch(b.__typename){case"XMSGIgReceiverFetchXmaFeedFetchParams":var e=(yield h.load());e=e(b.media_igid,void 0,c,d,!0);yield e(a.id,a.isDisappearingModeSettingOn,a.isTTLCMediaShareEnabled);break;case"XMSGIgReceiverFetchXmaClipFetchParams":e=(yield j.load());e=e(b.media_igid,void 0,c,d,!0);yield e(a.id,a.isDisappearingModeSettingOn,a.isTTLCMediaShareEnabled);break;case"XMSGIgReceiverFetchXmaProfileFetchParams":e=(yield i.load());e=e(b.igid,void 0,c,d,!0);yield e(a.id,a.isDisappearingModeSettingOn,a.isTTLCGenericXMAShareEnabled);break}});return k.apply(this,arguments)}g["default"]=a}),98);
__d("forwardXMAUtils",["FBLogger","IGDInstamadilloUtils","IGDThreadTTLCUtils","URI","isLinkshimURI"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){a=new(h||(h=c("URI")))(a);c("isLinkshimURI")(a)&&(a=new(h||(h=c("URI")))(a.getQueryData().u));return a.toString()}function j(a,b){return a==="igd_web_post_share"&&b.includes("instagram.com/p/")}function k(a,b){return a==="xma_open_native"&&b.includes("https://www.instagram.com")}function a(a,b,e,f){if(a==null)return!1;var g=d("IGDInstamadilloUtils").isInstamadilloMessage(b);if(g&&b.xmaReceiverFetchParams!=null){var h;try{h=JSON.parse(b.xmaReceiverFetchParams)}catch(a){c("FBLogger")("igd_web").mustfix("forwardXMAUtils: failed to parse message xmaReceiverFetchParams with error %s.",a);return!1}return d("IGDThreadTTLCUtils").isXmaReceiverFetchTTLCEnabled(h,a)}if(f==null||(f==null?void 0:f.actionUrl)==null)return!1;g=i(f.actionUrl);if(j(e==null?void 0:e.defaultCtaType,g))return d("IGDThreadTTLCUtils").isInstamadilloTTLCMediaShareEnabled(a);return k(e==null?void 0:e.defaultCtaType,g)?d("IGDThreadTTLCUtils").isInstamadilloTTLCGenericXmaEnabled(a):!1}g.linkshimDecode=i;g.isFeedXma=j;g.isProfileXma=k;g.shouldForwardXMAViaTTLC=a}),98);
__d("forwardXMAFromOpenToInstamadillo",["FBLogger","I64","PolarisDirectAPI","PolarisLinkshimURI","URI","asyncToGeneratorRuntime","forwardXMAUtils","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("getSendPostToInstamadilloRecipient").__setRef("forwardXMAFromOpenToInstamadillo"),k=c("requireDeferred")("getSendProfileToInstamadilloRecipient").__setRef("forwardXMAFromOpenToInstamadillo"),l=function(a){var b=new(i||(i=c("URI")))(a);d("PolarisLinkshimURI").shouldSkipLinkShim(a)&&(b=new(i||(i=c("URI")))(b.getQueryData().u));return b.toString()};function a(a,b,c,d,e,f){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,i){g=l(g);if(d("forwardXMAUtils").isFeedXma(b.defaultCtaType,g)&&e!=null){var m=(yield j.load());m=m((h||(h=d("I64"))).to_string(e),void 0,f,g,!0);yield m(a.id,a.isDisappearingModeSettingOn,i)}if(d("forwardXMAUtils").isProfileXma(b.defaultCtaType,g)){if(f==null)return;try{e=(yield d("PolarisDirectAPI").getUserProfile(f));if(e.status==="ok"){m=(m=e.data)==null?void 0:(b=m.user)==null?void 0:b.id;b=(b=e.data)==null?void 0:(e=b.user)==null?void 0:e.eimu_id;if(m!=null&&b!=null){e=(yield k.load());e=e(m,b,f,g,!0);yield e(a.id,a.isDisappearingModeSettingOn,i)}}}catch(a){c("FBLogger")("igd_web").mustfix("forwardXMAFromOpenToInstamadillo: failed to call getUserProfile Django API",a);return}}});return m.apply(this,arguments)}g["default"]=a}),98);
__d("LSOptimisticSendMessageForward",["LSInsertOptimisticAttachment","LSIssueNewTaskWithExtraOperationsAndGetTaskID","LSLocalApplyOptimisticMessage","LSPredefineTraceForTask","LSUpdateOptimisticAttachmentPreview","gkx"],(function(a,b,c,d,e,f,g){function a(){var a=arguments,d=a[a.length-1],e=[],f=[];return d.sequence([function(g){return d.sequence([function(f){return d.filter(d.db.table(12).fetch([[[a[3],a[4],a[5]]]]),function(b){return d.i64.eq(b.threadKey,a[3])&&d.i64.eq(d.i64.cast([0,0]),d.i64.cast([0,0]))&&d.i64.eq(b.timestampMs,a[4])&&b.messageId===a[5]&&d.i64.eq(b.authorityLevel,d.i64.cast([0,80]))}).next().then(function(f,g){var h=f.done;f=f.value;return h?(e[3]=d.createArray(),e[4]=(e[3].push("optimisticSendMessageForward msg not found"),e[3]),e[5]=(e[3].push(a[5]),e[3]),e[6]=d.toJSON(e[3]),function(a){d.logger(a).mustfix(a)}(e[6]),h=["",d.i64.cast([-1,4294967295])],e[0]=h[0],e[1]=h[1],h):(g=f.item,d.sequence([function(f){return e[11]=g.forwardScore,e[3]=g.text,c("gkx")("24141")?(d.i64.neq(e[11],void 0)?e[12]=d.i64.lt(e[11],d.i64.cast([0,127])):e[12]=!0,d.i64.eq(a[0],g.senderId)||!e[12]?e[13]=e[11]:(d.i64.neq(e[11],void 0)?e[14]=d.i64.add(e[11],d.i64.cast([0,1])):e[14]=d.i64.cast([0,1]),e[13]=e[14]),e[4]=e[13]):e[4]=e[11],d.storedProcedure(b("LSLocalApplyOptimisticMessage"),a[0],a[1],a[2],e[3],void 0,void 0,g.stickerId,g.hotEmojiSize,void 0,void 0,d.i64.cast([0,3]),void 0,e[4],void 0,!0).then(function(a){return a=a,e[5]=a[0],e[6]=a[1],a})},function(c){return d.forEach(d.db.table(16).fetch([[[g.threadKey,g.messageId]]]),function(c){var f=c.item;return d.sequence([function(c){return e[16]=f.attachmentFbid,e[12]=d.createArray(),e[13]=(e[12].push(e[16]),e[12]),e[14]=(e[12].push(e[5]),e[12]),e[15]=d.toJSON(e[12]),d.storedProcedure(b("LSInsertOptimisticAttachment"),a[1],e[6],e[5],e[16],e[15],f.attachmentType,f.filename,void 0,f.hasMedia,f.hasXma)},function(c){return d.storedProcedure(b("LSUpdateOptimisticAttachmentPreview"),a[1],e[5],e[15],f.playableUrl,f.playableUrlFallback,f.playableUrlExpirationTimestampMs,f.playableUrlMimeType,f.previewUrl,f.previewUrlFallback,f.previewUrlExpirationTimestampMs,f.previewUrlMimeType,f.previewWidth,f.previewHeight,f.titleText)}])})},function(b){return d.db.table(9).fetch([[[a[1]]]]).next().then(function(b,c){var a=b.done;b=b.value;return a?e[7]=d.i64.cast([0,1]):(c=b.item,e[13]=c.syncGroup,d.i64.neq(e[13],void 0)?e[12]=e[13]:e[12]=d.i64.cast([0,1]),e[7]=e[12])})},function(c){return d.storedProcedure(b("LSIssueNewTaskWithExtraOperationsAndGetTaskID"),d.i64.to_string(a[1]),d.i64.cast([0,46]),"",void 0,void 0,d.i64.cast([0,0]),d.i64.cast([0,0]),e[7],void 0,d.i64.cast([0,0]),void 0,d.i64.cast([0,0])).then(function(a){return a=a,e[9]=a[0],a})},function(a){return void 0!==void 0?d.storedProcedure(b("LSPredefineTraceForTask"),void 0,e[9],d.i64.to_string(d.i64.cast([0,46])),e[5]):d.resolve()},function(b){return d.db.table(31).add({taskId:e[9],threadKey:a[1],offlineThreadingId:e[5],messageId:a[5],threadAttributionSource:a[6],sendType:d.i64.cast([0,5]),markThreadRead:!1,initiatingSource:a[7]})},function(b){return e[12]=new d.Map(),e[13]=e[12].set("optimisticSendMessageForward",a[1]),e[14]=e[12].set("fwdMsgID",a[5]),e[15]=d.toJSON(e[12]),e[10]=e[15],function(a){d.logger(a).info(a)}(e[10]),b=[e[5],e[9]],e[0]=b[0],e[1]=b[1],b}]))})},function(a){return f[0]=e[0]}])},function(a){return d.resolve(f)}])}a.__sproc_name__="LSMailboxOptimisticSendMessageForwardStoredProcedure";a.__tables__=["messages","attachments","threads","messages_optimistic_context"];d=a;g["default"]=d}),98);
__d("LSOptimisticSendMessageForwardStoredProcedure",["LSOptimisticSendMessageForward","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSOptimisticSendMessageForward"),e.senderId,e.threadKey,e.threadType,e.forwardedMsgThreadKey,e.forwardedMsgTimestampMs,e.forwardedMsgId,e.source,e.initiatingSource);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("forwardXMAOpenToOpen",["I64","LSFactory","LSIntEnum","LSOptimisticSendMessageForwardStoredProcedure","asyncToGeneratorRuntime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("LSDatabaseSingletonLazyWrapper").__setRef("forwardXMAOpenToOpen");function a(a,b,c,d,e){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g){var k=(yield j.load());k=(yield k());k=(yield k.runInTransaction(function(j){return c("LSOptimisticSendMessageForwardStoredProcedure")(c("LSFactory")(j),{forwardedMsgId:a.messageId,forwardedMsgThreadKey:a.threadKey,forwardedMsgTimestampMs:a.timestampMs,senderId:f,source:g,threadKey:(h||(h=d("I64"))).of_string(b),threadType:(i||(i=d("LSIntEnum"))).ofNumber(e)})},"readwrite"));k=k[0];return k});return k.apply(this,arguments)}g["default"]=a}),98);
__d("MWChatThreadId",["FBLogger","I64","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){switch(a.NAME){case"Group":case"User":case"Page":case"UserSecret":return a.VAL}}function b(a){switch(a.NAME){case"Group":return"g."+a.VAL;case"Page":return"p."+a.VAL;case"User":return"u."+a.VAL;case"UserSecret":throw c("FBLogger")("messenger_web").mustfixThrow("MWChatThreadIdType Not supported")}}function e(a){switch(a.targetType){case"GROUP":return{NAME:"Group",VAL:a.targetID};case"PAGE":return{NAME:"Page",VAL:a.targetID};case"USER":return{NAME:"User",VAL:a.targetID};default:throw c("FBLogger")("messenger_web").mustfixThrow("Invalid id")}}function f(a){return a.NAME==="User"}function j(a){return a.NAME==="UserSecret"}function k(a){if(a==null)return;a=a.split(":");if(a.length!==2)return;var b=a[0];a=a[1];switch(b){case"thread":return{NAME:"Group",VAL:a};case"user":return{NAME:"User",VAL:a};default:return}}function l(a){a=a.NAME;if(a==="Group")return(h||(h=d("LSIntEnum"))).ofNumber(2);return a==="User"||a==="Page"?(h||(h=d("LSIntEnum"))).ofNumber(1):(h||(h=d("LSIntEnum"))).ofNumber(7)}function m(a){return(i||(i=d("I64"))).of_string(a.VAL)}g.getFBID=a;g.serializeFuture=b;g.fromJs=e;g.isUser=f;g.isSecret=j;g.deserializeFromLegacyThreadId=k;g.getMessagingThreadType=l;g.toThreadKey=m}),98);
__d("useGetForwardSource",["LSIntEnum","LSMessagingThreadAttributionType","MWLSThreadDisplayContext"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();if(a!=null)if(a==="Inbox")return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_FORWARD);else if(a==="ChatTab")return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_CHAT_FORWARD);else return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_BROADCAST_FLOW);else return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_BROADCAST_FLOW)}g["default"]=a}),98);
__d("WorkChatMessageType",[],(function(a,b,c,d,e,f){"use strict";a="text";b="gif";c="sticker";d="audio";e="file";f.text=a;f.gif=b;f.sticker=c;f.audio=d;f.file=e}),66);
__d("useMWLSSendStickerMessage",["I64","Int64Hooks","LSFactory","LSIntEnum","LSMailboxType","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSOptimisticSendMessageV2StoredProcedure","LSShape","LSThreadAttributionTypeUtil","MWPActor.react","MessagePowerUp","WorkChatMessageType","promiseDone","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,b,e){var g=(j||(j=c("useReStore")))(),k=d("MWPActor.react").useActor();return d("Int64Hooks").useCallbackInt64(function(j,l,m){c("promiseDone")(g.runInTransaction(function(e){var f=d("LSThreadAttributionTypeUtil").getSourceAndResetAttribution(j,a!=null?a:"unknown");return c("LSOptimisticSendMessageV2StoredProcedure")(c("LSFactory")(e),{extraSendMessageParams:d("LSShape").ofRecord({calculate_denormalizations:!0,initiating_source:b,mark_read:!0,optimistic_attachment_preview:d("LSShape").ofRecord({playable_url:void 0,playable_url_expiration_timestamp_ms:void 0,playable_url_fallback:void 0,playable_url_mime_type:void 0,preview_height:(h||(h=d("I64"))).zero,preview_url:m,preview_url_expiration_timestamp_ms:void 0,preview_url_fallback:void 0,preview_url_mime_type:void 0,preview_width:h.zero}),power_up_style:(i||(i=d("LSIntEnum"))).ofNumber(c("MessagePowerUp").NONE),reply_source_id:void 0,reply_source_type:i.ofNumber(c("LSMessageReplySourceType").MESSAGE),reply_source_type_v2:i.ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE),snippet_has_emoji:!1,source:f,sticker_id:h.of_string(l)}),mailboxType:i.ofNumber(c("LSMailboxType").MESSENGER),senderId:k,threadKey:j,threadType:i.ofNumber(1)})},"readwrite",void 0,void 0,f.id+":49").then(function(a){e==null?void 0:e(d("WorkChatMessageType").sticker,1,a[0])}))},[g,k,b,a,e])}g["default"]=a}),98);
__d("MWLSForwardMessage",["I64","Int64Hooks","LSFactory","LSMediaUrlAttachment","LSOptimisticSendAttachmentForwardStoredProcedure","LSOptimisticSendMessageForwardStoredProcedure","MWChatThreadId","MWPActor.react","ODS","Promise","ReQL","promiseDone","useGetForwardSource","useLSMessagingInitiatingSource","useLSMessagingSource","useMWLSSendStickerMessage","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function a(){var a=(k||(k=c("useReStore")))(),e=d("MWPActor.react").useActor(),g=c("useLSMessagingInitiatingSource")(),l=c("useGetForwardSource")(),m=c("useLSMessagingSource")(),n=c("useMWLSSendStickerMessage")(m,g);return d("Int64Hooks").useCallbackInt64(function(k,m,o){if(o.type!=="sent")return;o=o.value;var p=o.timestamp,q=o.messageId,r=o.threadId;(i||(i=d("ODS"))).bumpEntityKey(3185,"mw_forward","send");var s=function(){return a.runInTransaction(function(a){return c("LSOptimisticSendMessageForwardStoredProcedure")(c("LSFactory")(a),{forwardedMsgId:q,forwardedMsgThreadKey:r,forwardedMsgTimestampMs:p,initiatingSource:g,senderId:e,source:l,threadKey:k,threadType:m})},"readwrite",void 0,void 0,f.id+":62").then(function(){})};c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.messages).getKeyRange(r,p,q)).then(function(c){if(c==null)return s();var e=c.stickerId;if(e!=null)return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.attachments).getKeyRange(r,q)).then(function(a){a=a!=null?d("LSMediaUrlAttachment").previewUrl(a):void 0;n(k,(j||(j=d("I64"))).to_string(e),a);return(h||(h=b("Promise"))).resolve()});else return s()}),function(){return(i||(i=d("ODS"))).bumpEntityKey(3185,"mw_forward","success")},function(){return(i||(i=d("ODS"))).bumpEntityKey(3185,"mw_forward","failure")});return},[a,e,g,l,n])}function e(){var a=(k||(k=c("useReStore")))(),b=d("MWPActor.react").useActor(),e=c("useLSMessagingInitiatingSource")(),g=c("useGetForwardSource")();return d("Int64Hooks").useMemoInt64(function(){return function(h,k,l){(i||(i=d("ODS"))).bumpEntityKey(3185,"mw_forward","send");var m=d("MWChatThreadId").getMessagingThreadType(h),n=d("MWChatThreadId").toThreadKey(h);c("promiseDone")(a.runInTransaction(function(a){return c("LSOptimisticSendAttachmentForwardStoredProcedure")(c("LSFactory")(a),{forwardedAttachmentFbid:(j||(j=d("I64"))).of_string(k),initiatingSource:e,senderId:b,source:g,threadKey:n,threadType:m})},"readwrite",void 0,void 0,f.id+":140"),function(){return(i||(i=d("ODS"))).bumpEntityKey(3185,"mw_forward","success")},function(){return(i||(i=d("ODS"))).bumpEntityKey(3185,"mw_forward","failure")})}},[a,b,e,g])}g.useForwardMessage=a;g.useForwardAttachment=e}),98);
__d("useMWV2ForwardMessage",["$InternalEnum","CometRelay","FBLogger","I64","Int64Hooks","LSIntEnum","LSMessagingThreadTypeUtil","MAWDbMsg","MAWExternalId","MAWMessageSendReporterV2","MAWThreadId","MAWVault","MAWVerifyThreadCutover","MWChatMessageId","MWChatThreadId","MWLSForwardMessage","MWPActor.react","MWSharedMsgLogUtils","MWSharedS2SBaseAnnotations","MWUnvaultedText","Promise","ReQL","ReQLSuspense","WAResultOrError","asyncToGeneratorRuntime","cr:19816","cr:19893","cr:19894","cr:9759","gkx","promiseDone","react","sendToSentQPLLogger","useGetForwardSource","useIsSecureMessage","useLSMessagingSource","useReStore","useStringWithSubstitutions"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=(k||d("react")).useMemo;function n(a,b,c){var e;return(e=d("ReQL")).firstAsync(e.mergeJoin(e.fromTableAscending(a.tables.participants).getKeyRange(b),e.fromTableAscending(a.tables.contacts)).filter(function(a){a[0];a=a[1];return!(l||(l=d("I64"))).equal(a.id,c)}))}function o(a,b,c){var e=b.messageId,g=b.threadKey;b=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(a.tables.attachments).getKeyRange(g,e)},[a,e,g],f.id+":94");var h=d("ReQLSuspense").useFirst(function(){return c!=null?d("ReQL").fromTableAscending(a.tables.attachments).getKeyRange(g,e,c):d("ReQL").empty()},[c,a,e,g],f.id+":103"),i=b.length>0?b[0]:void 0;if(c!=null){h=h!=null?h:i;return h!=null?[h]:[]}return b}function p(){var a=(i||(i=c("useReStore")))();return d("Int64Hooks").useCallbackInt64(function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(e,f,g,i,j,k,l,m,o){var p=d("MWChatThreadId").toThreadKey(j),r=d("MWChatThreadId").getMessagingThreadType(j);j=(yield d("MAWVerifyThreadCutover").verifyThreadCutover((h||(h=b("Promise"))).resolve(a),p));var s=(yield h.all([d("MAWThreadId").isSecureThreadKey(a.tables,p),d("MAWThreadId").getThread(a.tables,p),n(a,p,g)])),t=s[0],u=s[1];s=s[2];t=t||j;try{if(b("cr:19893")!=null&&!t){d("sendToSentQPLLogger").addSendToSentAnnotations(k,{string:{forward_type:q.SecureToOpen}});m!=null?yield (h||(h=b("Promise"))).allSettled([m.messagesAndAttachments.map(function(c){return b("cr:19893").forwardMessage(a,p,r,c.message,i,(c=c.attachment)!=null?c:void 0,g,l)})]):yield b("cr:19893").forwardMessage(a,p,r,e,i,f[0],g,l,o);d("sendToSentQPLLogger").markSendToSentSuccess(k);return[d("WAResultOrError").makeResult({description:"open message",messageType:"fixMe"})]}j=d("MAWDbMsg").toMsgId(e.messageId);if(j==null)throw c("FBLogger")("messenger_web_sharing").mustfixThrow("Message does not have an id");if(b("cr:19816")!=null){d("sendToSentQPLLogger").addSendToSentAnnotations(k,{string:{forward_type:q.SecureToSecure}});if(m!=null){t=m.messagesAndAttachments.map(function(a){return d("MAWDbMsg").toMsgId(a.message.messageId)}).filter(Boolean);f=(yield b("cr:19816").forwardMessageBatch(a,p,t,l,k))}else f=(yield b("cr:19816").forwardMessage(a,p,j,l,k,o!=null?d("MAWVault").vault(o):void 0).then(function(a){return[a]}));b("cr:9759")!=null&&u!=null&&(yield b("cr:9759")(a,u,s,d("LSMessagingThreadTypeUtil").isOneToOne(u.threadType)));return f!=null?f:[d("WAResultOrError").makeResult({description:"removal pending rollout of Message Send Reporter V2",messageType:"fixMe"})]}throw c("FBLogger")("messenger_web_sharing").mustfixThrow("We won't reach to this step, if you are in QE, you should use secure forward")}catch(a){d("MAWMessageSendReporterV2").isMessageSendReporterV2Enabled()||d("sendToSentQPLLogger").markSendToSentFail(k,"failed_forwarding_message",a);c("FBLogger")("messenger_web").catching(a).mustfix("MW Fail forwarding a message");throw a}});return function(a,b,c,d,f,g,h,i,j){return e.apply(this,arguments)}}(),[a])}var q=b("$InternalEnum")({SecureToOpen:"secure_to_open",OpenToOpen:"open_to_open",SecureToSecure:"secure_to_secure",OpenToSecure:"open_to_secure"});function a(a,e,f,g){var k=(i||(i=c("useReStore")))(),r=o(k,a,f),s=c("useIsSecureMessage")(k,a,{fallbackThreadType:e}),t=d("MWPActor.react").useActor(),u=!(l||(l=d("I64"))).equal(t,a.senderId),v=d("MWLSForwardMessage").useForwardMessage(),w=d("MWLSForwardMessage").useForwardAttachment(),x=c("useGetForwardSource")(),y=d("MWChatMessageId").makeSent(l.to_string(a.threadKey),a.messageId,l.to_string(a.timestampMs)),z=d("CometRelay").useRelayEnvironment(),A=p(),B=d("MWSharedMsgLogUtils").getMessageTypeFromDisplayedContentType(a.displayedContentTypes),C=c("useLSMessagingSource")();e=m(function(){var b;return new Set((b=(b=a.mentionIds)==null?void 0:b.split==null?void 0:b.split(","))!=null?b:[])},[a.mentionIds]);var D=e.size>0,E=d("MWUnvaultedText").useMWUnvaultedText(!1,a.text);e=(e=d("useStringWithSubstitutions").useStringWithMentionSubstitutionsAndUpdatedRanges(s?E:null,[],e,a.threadKey))!=null?e:{textWithSubstitutions:E};var F=e.textWithSubstitutions,G=d("Int64Hooks").useCallbackInt64(function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var e=d("MWChatThreadId").toThreadKey(b);e=(yield d("MAWThreadId").getThread(k.tables,e));var f=function(d){return A(a,r,t,u,b,d,x,g,D&&c("gkx")("7846")?F:void 0)};if(d("MAWMessageSendReporterV2").isMessageSendReporterV2Enabled())yield d("MAWMessageSendReporterV2").MAWMessageSendReporterV2({composerEntrypoint:"useMWV2ForwardMessage",extraAnnotations:{string:{attachment_type:"forward",message_type:B}},lsSource:C,messageTypeParamsArgs:{isForward:!0,mediaGroupInfo:g},thread:e},f,k);else{e=d("sendToSentQPLLogger").markSendToSentStartWithAnnotation(e,{isForward:!0,mediaGroupInfo:g},(j||(j=d("LSIntEnum"))).unwrapIntEnum(x),{string:{attachment_type:"forward",message_type:B}});yield f(e)}});return function(a){return e.apply(this,arguments)}}(),[k,t,C,g,x,A,a,r,u,B,F,D]),H=d("Int64Hooks").useCallbackInt64(function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var i=d("MWChatThreadId").toThreadKey(e),l=d("MWChatThreadId").getMessagingThreadType(e),m=(yield (h||(h=b("Promise"))).all([d("MAWThreadId").isSecureThreadKey(k.tables,i),d("MAWThreadId").getThread(k.tables,i),n(k,i,t),d("MAWVerifyThreadCutover").verifyThreadCutover(h.resolve(k),i),d("MAWThreadId").getThread(k.tables,i)])),o=m[0],p=m[1],s=m[2],A=m[3],D=m[4];m=o||A;var E=function(a){var b=d("sendToSentQPLLogger").markSendToSentStart();if(D!=null){var e=d("MWSharedS2SBaseAnnotations").getMessageTypeParams({isForward:!0,threadType:D.threadType});c("promiseDone")(d("MWSharedMsgLogUtils").getSendToSentAnnotations(D,e,(j||(j=d("LSIntEnum"))).unwrapIntEnum(x),void 0,a),function(a){a.string=babelHelpers["extends"]({},a.string,{attachment_type:"forward",message_type:B}),d("sendToSentQPLLogger").addSendToSentAnnotations(b,a)})}d("sendToSentQPLLogger").addSendToSentAnnotations(b,{string:{forward_type:q.OpenToSecure,message_type:B}});return b};if(b("cr:19894")!=null&&m){var F=function(c,d){return function(e){return b("cr:19894").forwardMessage(z,k,i,a,u,d,x,e!=null?e:void 0,c).then(function(a){return[a]})}};if(r.length===0){o=d("MAWExternalId").generateExternalId();if(d("MAWMessageSendReporterV2").isMessageSendReporterV2Enabled())c("promiseDone")(d("MAWMessageSendReporterV2").MAWMessageSendReporterV2({composerEntrypoint:"useMWV2ForwardMessage",externalId:o,extraAnnotations:{string:{attachment_type:"forward",forward_type:q.OpenToSecure,message_type:B}},lsSource:C,messageTypeParamsArgs:{isForward:!0,mediaGroupInfo:g},thread:D},F(o,void 0),k));else{A=E(o);yield F(o,void 0)(A);d("sendToSentQPLLogger").markSendToSentSuccess(A)}}else yield (h||(h=b("Promise"))).all(r.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("MAWExternalId").generateExternalId();if(d("MAWMessageSendReporterV2").isMessageSendReporterV2Enabled())yield d("MAWMessageSendReporterV2").MAWMessageSendReporterV2({composerEntrypoint:"useMWV2ForwardMessage",externalId:b,extraAnnotations:{string:{attachment_type:"forward",forward_type:q.OpenToSecure,message_type:B}},lsSource:C,messageTypeParamsArgs:{isForward:!0,mediaGroupInfo:g},thread:D},F(b,a),k);else{var e=E(b);try{yield F(b,a)(e),d("sendToSentQPLLogger").markSendToSentSuccess(e)}catch(a){d("sendToSentQPLLogger").markSendToSentFail(e,"failed_forwarding_message",a);c("FBLogger")("messenger_web").catching(a).mustfix("MW Fail forwarding a message");throw a}}});return function(b){return a.apply(this,arguments)}}()));b("cr:9759")!=null&&p!=null&&b("cr:9759")(k,p,s,d("LSMessagingThreadTypeUtil").isOneToOne(p.threadType))}else if(!m){o=E();try{d("sendToSentQPLLogger").addSendToSentAnnotations(o,{string:{forward_type:q.OpenToOpen,message_type:B}});f==null?v(i,l,y):w(e,f);d("sendToSentQPLLogger").markSendToSentSuccess(o);return}catch(a){d("sendToSentQPLLogger").markSendToSentFail(o,"failed_forwarding_message",a);c("FBLogger")("messenger_web").catching(a).mustfix("MW Fail forwarding a message");throw a}}});return function(a){return e.apply(this,arguments)}}(),[k,t,x,f,z,a,u,g,C,r,v,y,w,B]);return d("Int64Hooks").useMemoInt64(function(){return s?G:H},[s,G,H])}g.ForwardType=q;g.useMWV2ForwardMessage=a}),98);
__d("forwardXMA",["I64","IGDInstamadilloUtils","asyncToGeneratorRuntime","forwardText","forwardXMAFromInstamadillo","forwardXMAFromOpenToInstamadillo","forwardXMAOpenToOpen","forwardXMAUtils","requireDeferred","sendToSentQPLLogger","useMWV2ForwardMessage"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("LSDatabaseSingletonLazyWrapper").__setRef("forwardXMA");function a(a,b,c,d,e,f,g,h){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,j,k,l){var m,n=b.defaultCtaId;if(n==null)return;var o=(yield i.load());o=(yield o());n=(yield o.tables.attachment_ctas.get(n));m=(m=b.headerTitle)!=null?m:b.titleText;var p=n==null?void 0:n.actionUrl,q=n==null?void 0:n.targetId;if(p==null)return;o=(yield o.tables.threads.get((h||(h=d("I64"))).of_string(k.id)));o=d("forwardXMAUtils").shouldForwardXMAViaTTLC(o,a,b,n);n=k.isInstamadilloCutover||k.isDisappearingModeSettingOn||o;var r=d("IGDInstamadilloUtils").isInstamadilloMessage(a)?n?d("useMWV2ForwardMessage").ForwardType.SecureToSecure:d("useMWV2ForwardMessage").ForwardType.SecureToOpen:n?d("useMWV2ForwardMessage").ForwardType.OpenToSecure:d("useMWV2ForwardMessage").ForwardType.OpenToOpen;d("sendToSentQPLLogger").addSendToSentAnnotations(l,{bool:{use_instamadillo_transport:n,use_open_eb:o}});switch(r){case d("useMWV2ForwardMessage").ForwardType.OpenToSecure:return c("forwardXMAFromOpenToInstamadillo")(k,b,q,m,p,o);case d("useMWV2ForwardMessage").ForwardType.SecureToSecure:return c("forwardXMAFromInstamadillo")(k,a.xmaReceiverFetchParams,m,p);case d("useMWV2ForwardMessage").ForwardType.SecureToOpen:return c("forwardText")(babelHelpers["extends"]({},a,{text:p}),e,f,g,j);case d("useMWV2ForwardMessage").ForwardType.OpenToOpen:return c("forwardXMAOpenToOpen")(a,e,f,g,j)}});return j.apply(this,arguments)}g["default"]=a}),98);
__d("useIGDForwardMessage",["FBLogger","I64","IGDThreadTTLCUtils","LSBitFlag","LSIntEnum","MWPActor.react","MWSharedS2SBaseAnnotations","MessagingAttachmentType","ReQL","asyncToGeneratorRuntime","forwardAttachment","forwardAttachmentToOpen","forwardText","forwardXMA","react-compiler-runtime","sendToSentQPLLogger","useAsyncReStore","useGetForwardSource"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b,c,d,e,f){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,j){var k=e.candidate;e=e.type;var l=k.id;e=e==="thread"?2:1;l=(yield a.tables.threads.get((h||(h=d("I64"))).of_string(l)));var m=k.isInstamadilloCutover||k.isDisappearingModeSettingOn;if(d("LSBitFlag").has((i||(i=d("LSIntEnum"))).ofNumber(1),b.displayedContentTypes)){var n=d("IGDThreadTTLCUtils").isInstamadilloTTLCTextEnabled(l),o=m||n;d("sendToSentQPLLogger").addSendToSentAnnotations(j,{bool:{use_instamadillo_transport:o,use_open_eb:n}});return c("forwardText")(b,k.id,e,f,g,{useInstamadilloTransport:o,useOpenEb:n})}o=(yield d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.tables.attachments).getKeyRange(b.threadKey,b.messageId)));if(o!=null){n=(i||(i=d("LSIntEnum"))).unwrapIntEnum(o.attachmentType);if(n===c("MessagingAttachmentType").XMA)return c("forwardXMA")(b,o,k.id,e,f,g,k,j);else if(n===c("MessagingAttachmentType").ANIMATED_IMAGE)return c("forwardAttachmentToOpen")(o,k.id,e,f,g);else{a=!1;n===c("MessagingAttachmentType").IMAGE?a=d("IGDThreadTTLCUtils").isInstamadilloTTLCImageEnabled(l):n===c("MessagingAttachmentType").VIDEO?a=d("IGDThreadTTLCUtils").isInstamadilloTTLCVideoEnabled(l):n===c("MessagingAttachmentType").AUDIO&&(a=d("IGDThreadTTLCUtils").isInstamadilloTTLCAudioEnabled(l));b=m||a;d("sendToSentQPLLogger").addSendToSentAnnotations(j,{bool:{use_instamadillo_transport:b,use_open_eb:a}});return c("forwardAttachment")(o,k.id,e,f,g,{useInstamadilloTransport:b,useOpenEb:a})}}});return k.apply(this,arguments)}function a(a){var e=d("react-compiler-runtime").c(5),f=c("useAsyncReStore")(),g=c("useGetForwardSource")(),h=d("MWPActor.react").useActor(),i;e[0]!==f||e[1]!==a||e[2]!==h||e[3]!==g?(i=function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var e=d("sendToSentQPLLogger").markSendToSentStart(),i=(yield l(yield f,a));d("sendToSentQPLLogger").addSendToSentAnnotations(e,i);try{yield j(yield f,a,b,h,g,e),d("sendToSentQPLLogger").markSendToSentSuccess(e)}catch(a){i=a;d("sendToSentQPLLogger").markSendToSentFail(e,"message_send_fail",i);c("FBLogger")("igd_web").catching(i).mustfix("IGD failure forwarding a message")}});return function(a){return e.apply(this,arguments)}}(),e[0]=f,e[1]=a,e[2]=h,e[3]=g,e[4]=i):i=e[4];return i}function l(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=(yield d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.tables.attachments).getKeyRange(b.threadKey,b.messageId)));a=e!=null?Object.keys(c("MessagingAttachmentType")).find(function(a){return c("MessagingAttachmentType")[a]===(i||(i=d("LSIntEnum"))).unwrapIntEnum(e.attachmentType)}):null;b=(h||(h=d("I64"))).equal(b.displayedContentTypes,(i||(i=d("LSIntEnum"))).ofNumber(1))?d("MWSharedS2SBaseAnnotations").MsgType.Text:d("MWSharedS2SBaseAnnotations").MsgType.NonText;return{bool:{is_forward_message:!0},string:{attachment_type:a,message_type:b}}});return m.apply(this,arguments)}g["default"]=a}),98);
__d("useIGDMessageForwardMenuItem.react",["fbt","I64","IGDContactSearchDialogType.flow","IGDInstamadilloUtils","IGDMessageContextMenuItem.react","IGDSDialogPlaceholder.react","IGDSMessagesOutlineIcon.react","IGDThreadListNewMessageLoggingDataContext","JSResourceForInteraction","LSBitFlag","LSContactBitOffset","LSContactBlockedByViewerStatus","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","MWLSThread","MWPActor.react","MWV2MessageRowIsRowFocusedContext.react","MessagingAttachmentType","MessengerWebUXLogger","Promise","ReQL","ReQLSuspense","asyncToGeneratorRuntime","getInstamadilloLoggingExtraData","qex","react","react-compiler-runtime","useIGDForwardMessage","useIGDMessageAttachment","useIGDSLazyDialog","useIsReadOnlyFeatureLimited","useIsThreadBlocked","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m,n=m||d("react"),o=function(){return c("qex")._("121")===!0};function a(a,e){var g=d("react-compiler-runtime").c(21),m=(j||(j=c("useReStore")))(),s=d("MWPActor.react").useActor(),t=a.displayedContentTypes,u=a.senderId,v=a.threadKey,w=c("useIsReadOnlyFeatureLimited")(),x=c("useIsThreadBlocked")(),y=d("MWLSThread").useThreadExn(a.threadKey),z=y.threadType,A;g[0]!==m.tables.contacts||g[1]!==u?(A=function(){return d("ReQL").fromTableAscending(m.tables.contacts).getKeyRange(u)},g[0]=m.tables.contacts,g[1]=u,g[2]=A):A=g[2];var B;g[3]!==m||g[4]!==u?(B=[m,u],g[3]=m,g[4]=u,g[5]=B):B=g[5];A=d("ReQLSuspense").useFirst(A,B,f.id+":68");B=A!=null&&d("LSContactBitOffset").has(66,A);var C=d("LSThreadBitOffset").has(103,y),D=d("LSMessagingThreadTypeUtil").isIGDMessageRequest(y),E=(k||(k=d("I64"))).equal(a.displayedContentTypes,(l||(l=d("LSIntEnum"))).ofNumber(256));s=k.equal(u,s);s=!s&&d("LSMessagingThreadTypeUtil").isOneToOne(z)&&A!=null?!(k||(k=d("I64"))).equal(A.blockedByViewerStatus,(l||(l=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED)):!1;A=c("useIGDMessageAttachment")(m,a,v);v=A.attachment;A=A.hasMultipleAttachments;var F=v!=null&&((k||(k=d("I64"))).equal(v.attachmentType,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_IMAGE))||(k||(k=d("I64"))).equal(v.attachmentType,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_VIDEO))),G=v!=null&&(k||(k=d("I64"))).equal(v.attachmentType,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO)),H=v!=null&&(k||(k=d("I64"))).equal(v.attachmentType,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER)),I=v!=null&&(k||(k=d("I64"))).equal(v.attachmentType,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA))?v.isSharable:!0;v=v!=null&&(k||(k=d("I64"))).equal(v.attachmentType,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA))&&v.stickerType==="ai_generated_sticker";t=(k||(k=d("I64"))).equal(t,d("LSBitFlag").empty)&&!F;var J=c("useIGDForwardMessage")(a),K=c("MessengerWebUXLogger").useInteractionLogger(),L=d("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext(),M=d("MWV2MessageRowIsRowFocusedContext.react").useMWV2MessageRowIsRowFocusedContext(),N=M.setIsDialogOpened;g[6]===Symbol["for"]("react.memo_cache_sentinel")?(M=c("JSResourceForInteraction")("IGDAWOminipickerDialog.react").__setRef("useIGDMessageForwardMenuItem.react"),g[6]=M):M=g[6];M=c("useIGDSLazyDialog")(M,r);var O=M[0];M=d("IGDInstamadilloUtils").isInstamadilloMessage(a)&&a.ephemeralDurationInSec!=null&&(k||(k=d("I64"))).gt(a.ephemeralDurationInSec,(k||(k=d("I64"))).zero);x=!x&&!B&&!D&&!w&&!a.isUnsent&&!t&&(d("LSMessagingThreadTypeUtil").isArmadilloSecure(z)?o():!0)&&C&&I&&!s&&!E&&!F&&!G&&!M&&!A&&!H&&!v;if(!x)return null;g[7]!==J?(B=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=Array.from(a.values()).map(function(a){return J(a)});yield (i||(i=b("Promise"))).allSettled(a)});return function(b){return a.apply(this,arguments)}}(),g[7]=J,g[8]=B):B=g[8];var P=B;g[9]!==L||g[10]!==K||g[11]!==e||g[12]!==P||g[13]!==N||g[14]!==O||g[15]!==y?(D=function(){K==null?void 0:K({eventName:"message_forward",extraData:c("getInstamadilloLoggingExtraData")(y),flowInstanceId:L}),O({includeGroup:!0,loggingEventName:"forward_thread_attempt",maxRecipients:5,onSubmit:P,searchType:d("IGDContactSearchDialogType.flow").IGDContactSearchDialogType.FORWARD_MESSAGE,submitButtonLabel:h._(/*BTDS*/"Enviar").toString(),titleLabel:h._(/*BTDS*/"Forward").toString()},function(){e(),N(q)}),N(p)},g[9]=L,g[10]=K,g[11]=e,g[12]=P,g[13]=N,g[14]=O,g[15]=y,g[16]=D):D=g[16];w=D;g[17]===Symbol["for"]("react.memo_cache_sentinel")?(a=h._(/*BTDS*/"Reenviar"),g[17]=a):a=g[17];t=a;g[18]===Symbol["for"]("react.memo_cache_sentinel")?(z=n.jsx(c("IGDSMessagesOutlineIcon.react"),{alt:t,size:18}),g[18]=z):z=g[18];g[19]!==w?(C=n.jsx(c("IGDMessageContextMenuItem.react"),{icon:z,label:t,onClick:w,testid:void 0}),g[19]=w,g[20]=C):C=g[20];return C}function p(){return!0}function q(){return!1}function r(a){return n.jsx(c("IGDSDialogPlaceholder.react"),{fixedHeight:!0,onClose:a,size:"large"})}r.displayName=r.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("useIGDMessageInspectMenuItem.react",["fbt","IGDMessageContextMenuItem.react","IGDSDialogPlaceholder.react","IGDSSearchPanoOutlineIcon.react","JSResourceForInteraction","MWV2MessageRowIsRowFocusedContext.react","gkx","react","react-compiler-runtime","useIGDSLazyDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));i.useCallback;var k={dialog:{height:"xrqonrr",width:"x1m7g9aj",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(9),e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=h._(/*BTDS*/"[Internal] Inspect"),b[0]=e):e=b[0];e=e;var f=d("MWV2MessageRowIsRowFocusedContext.react").useMWV2MessageRowIsRowFocusedContext(),g=f.setIsDialogOpened;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(f=c("JSResourceForInteraction")("IGDMessageInspectMessageDialog.react").__setRef("useIGDMessageInspectMenuItem.react"),b[1]=f):f=b[1];f=c("useIGDSLazyDialog")(f,n);var i=f[0];b[2]!==a||b[3]!==g||b[4]!==i?(f=function(){i({message:a},function(){g(m)}),g(l)},b[2]=a,b[3]=g,b[4]=i,b[5]=f):f=b[5];f=f;var k=c("gkx")("24015");if(!k)return null;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(k=j.jsx(c("IGDSSearchPanoOutlineIcon.react"),{alt:e,size:18}),b[6]=k):k=b[6];b[7]!==f?(k=j.jsx(c("IGDMessageContextMenuItem.react"),{delimiter:!0,icon:k,label:e,onClick:f,testid:void 0}),b[7]=f,b[8]=k):k=b[8];return k}function l(){return!0}function m(){return!1}function n(a){return j.jsx(c("IGDSDialogPlaceholder.react"),{innerContentXStyle:k.dialog,onClose:a})}n.displayName=n.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("useIGDMessageNegativeFeedbackMenuItem.react",["fbt","IGDMessageContextMenuItem.react","IGDSDialogPlaceholder.react","IGDSThumbDownPanoOutline24Icon.react","JSResourceForInteraction","emptyFunction","react","react-compiler-runtime","useGenAIFeedbackSubmissionStatus","useIGDIsGenAiReelsPlugin","useIGDSLazyDialog","useIGDSToaster","useMWV2SubmitFeedbackAction"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));i.useCallback;function a(a){var b=d("react-compiler-runtime").c(11),e=c("useIGDSToaster")(),f;b[0]!==e?(f=function(){e.add({message:h._(/*BTDS*/"Se han enviado los comentarios"),target:"bottom-left"})},b[0]=e,b[1]=f):f=b[1];f=f;var g=c("useMWV2SubmitFeedbackAction")(a.botResponseId,f);b[2]===Symbol["for"]("react.memo_cache_sentinel")?(f=c("JSResourceForInteraction")("MWV2SubmitNegativeFeedbackDialog.react").__setRef("useIGDMessageNegativeFeedbackMenuItem.react"),b[2]=f):f=b[2];f=c("useIGDSLazyDialog")(f,k);var i=f[0];b[3]!==a||b[4]!==g||b[5]!==i?(f=function(){i({message:a,onSubmit:g},c("emptyFunction"))},b[3]=a,b[4]=g,b[5]=i,b[6]=f):f=b[6];f=f;var l=c("useGenAIFeedbackSubmissionStatus")(a.botResponseId),m=c("useIGDIsGenAiReelsPlugin")(a);if(l==null||m)return null;b[7]===Symbol["for"]("react.memo_cache_sentinel")?(l=h._(/*BTDS*/"Mala respuesta"),b[7]=l):l=b[7];m=l;b[8]===Symbol["for"]("react.memo_cache_sentinel")?(l=j.jsx(c("IGDSThumbDownPanoOutline24Icon.react"),{alt:m,size:18}),b[8]=l):l=b[8];b[9]!==f?(l=j.jsx(c("IGDMessageContextMenuItem.react"),{icon:l,label:m,onClick:f}),b[9]=f,b[10]=l):l=b[10];return l}function k(a){return j.jsx(c("IGDSDialogPlaceholder.react"),{fixedHeight:!0,onClose:a,size:"large"})}k.displayName=k.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("useIGDMessagePositiveFeedbackMenuItem.react",["fbt","BotFeedbackKind","IGDMessageContextMenuItem.react","IGDSThumbUpPanoOutline24Icon.react","IGDThreadListNewMessageLoggingDataContext","MessengerWebUXLogger","react","react-compiler-runtime","useGenAIFeedbackSubmissionStatus","useIGDIsGenAiReelsPlugin","useIGDSToaster","useMWV2SubmitFeedbackAction"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;b.useCallback;b.useMemo;function a(a,b){var e,f=d("react-compiler-runtime").c(16),g=c("useIGDSToaster")(),i;f[0]!==g?(i=function(){g.add({message:h._(/*BTDS*/"Se han enviado los comentarios"),target:"bottom-left"})},f[0]=g,f[1]=i):i=f[1];i=i;var k=c("useMWV2SubmitFeedbackAction")(a.botResponseId,i);i=d("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext();e=(e=a.botResponseId)!=null?e:"";var l;f[2]!==e?(l={botResponseId:e},f[2]=e,f[3]=l):l=f[3];f[4]!==i||f[5]!==l?(e={extraData:l,flowInstanceId:i},f[4]=i,f[5]=l,f[6]=e):e=f[6];i=e;var m=i,n=c("MessengerWebUXLogger").useInteractionLogger();f[7]!==m||f[8]!==n||f[9]!==b||f[10]!==k?(l=function(){k(c("BotFeedbackKind").BOT_FEEDBACK_POSITIVE),n==null?void 0:n(babelHelpers["extends"]({eventName:"submit_positive_feedback"},m)),b()},f[7]=m,f[8]=n,f[9]=b,f[10]=k,f[11]=l):l=f[11];e=l;i=c("useGenAIFeedbackSubmissionStatus")(a.botResponseId);l=c("useIGDIsGenAiReelsPlugin")(a);if(i==null||l)return null;f[12]===Symbol["for"]("react.memo_cache_sentinel")?(a=h._(/*BTDS*/"Buena respuesta"),f[12]=a):a=f[12];i=a;f[13]===Symbol["for"]("react.memo_cache_sentinel")?(l=j.jsx(c("IGDSThumbUpPanoOutline24Icon.react"),{alt:i,size:18}),f[13]=l):l=f[13];f[14]!==e?(a=j.jsx(c("IGDMessageContextMenuItem.react"),{delimiter:!0,icon:l,label:i,onClick:e}),f[14]=e,f[15]=a):a=f[15];return a}g["default"]=a}),226);
__d("useIGDMessageReaction.react",["fbt","EmojiFormat.bs","IGDThreadListNewMessageLoggingDataContext","Int64Hooks","MWLSThread","MWV2MessageReactionHooks","MessengerWebUXLogger","UnicodeUtils","asyncToGeneratorRuntime","emptyFunction","getInstamadilloLoggingExtraData","promiseDone","react","react-compiler-runtime","useAsyncReStore","useIGDGlobalReactMessage"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;(i||d("react")).useCallback;function a(a,e){var f,g=d("react-compiler-runtime").c(17),i=(f=d("MWV2MessageReactionHooks").MWV2MessageReactionHooks.useSelectedReaction(a.messageId,a.threadKey))==null?void 0:f.reaction,k=c("useIGDGlobalReactMessage")(a,"reaction_tray");g[0]!==e||g[1]!==i||g[2]!==k?(f=function(a){var b=d("EmojiFormat.bs").codeArrayToUnicode(a);if(i!=null){var f=(j||(j=d("UnicodeUtils"))).getCodePoints(i);b===i&&(b=void 0);f[0]===10084&&a[0]===10084&&(b=void 0)}c("promiseDone")(k(b,"reaction"));e()},g[0]=e,g[1]=i,g[2]=k,g[3]=f):f=g[3];f=f;var l;g[4]!==f?(l={closeAfterSelect:!0,onClose:c("emptyFunction"),onSelect:f,showPopoverArrow:!1},g[4]=f,g[5]=l):l=g[5];f=l;g[6]===Symbol["for"]("react.memo_cache_sentinel")?(l=h._(/*BTDS*/"Reaccionar"),g[6]=l):l=g[6];l=l;var m=c("useAsyncReStore")(),n=c("MessengerWebUXLogger").useInteractionLogger(),o=d("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext(),p,q;g[7]!==m||g[8]!==o||g[9]!==n||g[10]!==a.messageId||g[11]!==a.threadKey?(p=function(e){c("promiseDone")(m.then(function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=(yield d("MWLSThread").getThreadAsync(b,a.threadKey));b&&(n==null?void 0:n({eventName:"reaction_open_emoji_picker",extraData:babelHelpers["extends"]({},c("getInstamadilloLoggingExtraData")(b),{message_id:a.messageId}),flowInstanceId:o}))});return function(a){return e.apply(this,arguments)}}())),e()},q=[m,o,n,a.messageId,a.threadKey],g[7]=m,g[8]=o,g[9]=n,g[10]=a.messageId,g[11]=a.threadKey,g[12]=p,g[13]=q):(p=g[12],q=g[13]);p=d("Int64Hooks").useCallbackInt64(p,q);g[14]!==p||g[15]!==f?(q=[l,p,f],g[14]=p,g[15]=f,g[16]=q):q=g[16];return q}g["default"]=a}),226);
__d("useIGDMessageReactionMenuItem.react",["I64","LSBitFlag","LSContactBitOffset","LSMessagingThreadTypeUtil","LSThreadBitOffset","MWLSThread","ReQL","ReQLSuspense","cr:21300","cr:21301","cr:9411","gkx","react","react-compiler-runtime","useGenAIFeedbackSubmissionStatus","useIGDMessageReaction.react","useIsGenAiFeedbackEnabled","useIsReadOnlyFeatureLimited","useIsThreadBlocked","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||d("react");function a(a,e){var g=d("react-compiler-runtime").c(15),j=(h||(h=c("useReStore")))(),l=a.displayedContentTypes,m=a.senderId,n=c("useIsThreadBlocked")(),o=d("MWLSThread").useThreadExn(a.threadKey),p=d("LSMessagingThreadTypeUtil").isIGDMessageRequest(o),q=c("useIsReadOnlyFeatureLimited")(),r;g[0]!==j.tables.contacts||g[1]!==m?(r=function(){return d("ReQL").fromTableAscending(j.tables.contacts).getKeyRange(m)},g[0]=j.tables.contacts,g[1]=m,g[2]=r):r=g[2];var s;g[3]!==j||g[4]!==m?(s=[j,m],g[3]=j,g[4]=m,g[5]=s):s=g[5];r=d("ReQLSuspense").useFirst(r,s,f.id+":53");s=d("LSThreadBitOffset").has(18,o);var t=d("LSThreadBitOffset").has(139,o);o=d("LSThreadBitOffset").has(169,o);l=(i||(i=d("I64"))).equal(l,d("LSBitFlag").empty);r=r!=null&&d("LSContactBitOffset").has(66,r);var u=c("useIsGenAiFeedbackEnabled")(a.botResponseId,c("gkx")("4253")===!0),v=c("useGenAIFeedbackSubmissionStatus")(a.botResponseId);n=!n&&!r&&!p&&!q&&!a.isUnsent&&!l&&(t?o:s)&&u&&v==null;r=c("useIGDMessageReaction.react")(a,e);p=r[0];var w=r[1];q=r[2];if(!n)return null;g[6]!==w?(l=function(a){return w(a)},g[6]=w,g[7]=l):l=g[7];g[8]!==p||g[9]!==l?(t={align:"start",altLabel:p,label:p,onClickAction:l,useMenuItem:!0},g[8]=p,g[9]=l,g[10]=t):t=g[10];o=t;g[11]!==a.threadKey||g[12]!==q||g[13]!==o?(s=b("cr:9411")?k.jsx(b("cr:9411"),babelHelpers["extends"]({},o,{onClose:q.onClose,onSelect:q.onSelect})):b("cr:21300")?k.jsx(b("cr:21300"),babelHelpers["extends"]({},o,q)):b("cr:21301")?k.jsx(b("cr:21301"),babelHelpers["extends"]({threadKey:a.threadKey},o,q)):null,g[11]=a.threadKey,g[12]=q,g[13]=o,g[14]=s):s=g[14];return s}g["default"]=a}),98);
__d("useIGDMessageReplyMenuItem.react",["I64","IGDInstamadilloUtils","IGDMessageContextMenuItem.react","IGDSReplyPanoOutline24Icon.react","LSBitFlag","LSContactBitOffset","LSMessagingThreadTypeUtil","LSThreadBitOffset","MWLSThread","ReQL","ReQLSuspense","gkx","react","react-compiler-runtime","useGenAIFeedbackSubmissionStatus","useIGDMessageReply.react","useIsGenAiFeedbackEnabled","useIsReadOnlyFeatureLimited","useIsThreadBlocked","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||d("react");function a(a,b){var e=d("react-compiler-runtime").c(12),g=(h||(h=c("useReStore")))(),j=a.displayedContentTypes,l=a.senderId,m=c("useIsThreadBlocked")(),n=d("MWLSThread").useThreadExn(a.threadKey),o=d("LSMessagingThreadTypeUtil").isIGDMessageRequest(n),p=c("useIsReadOnlyFeatureLimited")(),q;e[0]!==g.tables.contacts||e[1]!==l?(q=function(){return d("ReQL").fromTableAscending(g.tables.contacts).getKeyRange(l)},e[0]=g.tables.contacts,e[1]=l,e[2]=q):q=e[2];var r;e[3]!==g||e[4]!==l?(r=[g,l],e[3]=g,e[4]=l,e[5]=r):r=e[5];q=d("ReQLSuspense").useFirst(q,r,f.id+":52");r=d("LSThreadBitOffset").has(42,n);b=c("useIGDMessageReply.react")(a,n,b);var s=b[0];b=b[1];var t=c("useIsGenAiFeedbackEnabled")(a.botResponseId,c("gkx")("4253")===!0),u=c("useGenAIFeedbackSubmissionStatus")(a.botResponseId);if(!r||!t)return null;r=(i||(i=d("I64"))).equal(j,d("LSBitFlag").empty);j=q!=null&&d("LSContactBitOffset").has(66,q);q=d("IGDInstamadilloUtils").isIGDDisappearingModeEnabled(n);n=!m&&!j&&!o&&!p&&!a.isUnsent&&!r&&t&&u==null&&d("IGDInstamadilloUtils").shouldRenderMessageReply(a,q);if(!n)return null;e[6]!==b?(m=k.jsx(c("IGDSReplyPanoOutline24Icon.react"),{alt:b,size:18}),e[6]=b,e[7]=m):m=e[7];e[8]!==b||e[9]!==s||e[10]!==m?(j=k.jsx(c("IGDMessageContextMenuItem.react"),{icon:m,label:b,onClick:s}),e[8]=b,e[9]=s,e[10]=m,e[11]=j):j=e[11];return j}g["default"]=a}),98);
__d("IGDMessageReportMenuItem.react",["fbt","IGDMessageContextMenuItem.react","IGDSReportPanoOutline24Icon.react","MWPActor.react","emptyFunction","promiseDone","react","requireDeferred","useIGDSLazyDialog","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react")),l=j.useCallback,m=c("requireDeferred")("MWLogMessageAction").__setRef("IGDMessageReportMenuItem.react");function a(a){var b=a.dialogProps,e=a.dialogResource,f=a.message,g=d("MWPActor.react").useActor(),j=(i||(i=c("useReStore")))();a=h._(/*BTDS*/"Denunciar");e=c("useIGDSLazyDialog")(e);var n=e[0];e=l(function(){n(b,c("emptyFunction")),m.onReady(function(a){return c("promiseDone")(a.log(j,f.messageId,f.threadKey,"message_dot_menu","report",void 0,void 0,void 0,f.senderId,void 0,g))})},[g,j,b,f.messageId,f.senderId,f.threadKey,n]);return k.jsx(c("IGDMessageContextMenuItem.react"),{delimiter:!0,icon:k.jsx(c("IGDSReportPanoOutline24Icon.react"),{alt:a,color:"ig-error-or-destructive",size:18}),label:a,labelProps:{color:"errorOrDestructive"},onClick:e,testid:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("useIGDMessageReportMenuItem.react",["I64","IGDMessageReportMenuItem.react","JSResourceForInteraction","LSContactBitOffset","LSIntEnum","LSMessagingThreadTypeUtil","MWPActor.react","ReQL","ReQLSuspense","emptyFunction","getLSMediaContactProfilePictureUrl","react","react-compiler-runtime","useMWBShouldReportThreadAsInstamadillo","usePolarisAnalyticsContext","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=i||d("react"),m=[(j||(j=d("LSIntEnum"))).ofNumber(1),j.ofNumber(16384),j.ofNumber(2),j.ofNumber(4),(k||(k=d("I64"))).add(j.ofNumber(1),j.ofNumber(8192)),k.add(j.ofNumber(16384),j.ofNumber(8192)),k.add(j.ofNumber(2),j.ofNumber(8192)),k.add(j.ofNumber(4),j.ofNumber(8192))];function a(a,b){var e=d("react-compiler-runtime").c(57),g=(h||(h=c("useReStore")))(),i=d("MWPActor.react").useActor(),j=a.displayedContentTypes,n=a.senderId,o;e[0]!==g.tables.contacts||e[1]!==n?(o=function(){return d("ReQL").fromTableAscending(g.tables.contacts).getKeyRange(n)},e[0]=g.tables.contacts,e[1]=n,e[2]=o):o=e[2];var p;e[3]!==g||e[4]!==n?(p=[g,n],e[3]=g,e[4]=n,e[5]=p):p=e[5];o=d("ReQLSuspense").useFirst(o,p,f.id+":64");p=o!=null&&d("LSContactBitOffset").has(18,o);o=(k||(k=d("I64"))).equal(n,i);var q;e[6]!==g.tables.contacts||e[7]!==a.senderId?(q=function(){return d("ReQL").fromTableAscending(g.tables.contacts).getKeyRange(a.senderId)},e[6]=g.tables.contacts,e[7]=a.senderId,e[8]=q):q=e[8];var r;e[9]!==g||e[10]!==a.senderId?(r=[g,a.senderId],e[9]=g,e[10]=a.senderId,e[11]=r):r=e[11];q=d("ReQLSuspense").useFirst(q,r,f.id+":76");e[12]!==g.tables.ig_thread_info||e[13]!==a.threadKey?(r=function(){return d("ReQL").fromTableAscending(g.tables.ig_thread_info).getKeyRange(a.threadKey)},e[12]=g.tables.ig_thread_info,e[13]=a.threadKey,e[14]=r):r=e[14];var s;e[15]!==g||e[16]!==a.threadKey?(s=[g,a.threadKey],e[15]=g,e[16]=a.threadKey,e[17]=s):s=e[17];r=d("ReQLSuspense").useFirst(r,s,f.id+":81");e[18]!==g.tables.threads||e[19]!==a.threadKey?(s=function(){return d("ReQL").fromTableAscending(g.tables.threads).getKeyRange(a.threadKey)},e[18]=g.tables.threads,e[19]=a.threadKey,e[20]=s):s=e[20];var t;e[21]!==g||e[22]!==a.threadKey?(t=[g,a.threadKey],e[21]=g,e[22]=a.threadKey,e[23]=t):t=e[23];s=d("ReQLSuspense").useFirst(s,t,f.id+":89");e[24]!==i||e[25]!==g.tables.mailbox_metadata?(t=function(){return d("ReQL").fromTableAscending(g.tables.mailbox_metadata).getKeyRange(i)},e[24]=i,e[25]=g.tables.mailbox_metadata,e[26]=t):t=e[26];var u;e[27]!==i||e[28]!==g?(u=[g,i],e[27]=i,e[28]=g,e[29]=u):u=e[29];t=d("ReQLSuspense").useFirst(t,u,f.id+":94");u=c("useMWBShouldReportThreadAsInstamadillo")(s);var v=c("usePolarisAnalyticsContext")()+"WWW";p=p&&!o&&m.findIndex(function(a){return(k||(k=d("I64"))).equal(j,a)})!==-1;if(!p||q==null||t==null||r==null||s==null)return null;e[30]!==b?(o=d("LSMessagingThreadTypeUtil").isGroup(b),e[30]=b,e[31]=o):o=e[31];e[32]!==q?(p=c("getLSMediaContactProfilePictureUrl")(q),e[32]=q,e[33]=p):p=e[33];e[34]!==a.senderId?(s=(k||(k=d("I64"))).to_string(a.senderId),e[34]=a.senderId,e[35]=s):s=e[35];q=(b=q.secondaryName)!=null?b:"";e[36]!==u||e[37]!==o||e[38]!==p||e[39]!==s||e[40]!==q?(b={isGroup:o,onClose:c("emptyFunction"),profilePicUrl:p,senderId:s,shouldReportAsInstamadillo:u,username:q},e[36]=u,e[37]=o,e[38]=p,e[39]=s,e[40]=q,e[41]=b):b=e[41];o=b;if(u){p=o;s=a.messageId;e[42]!==a.threadKey?(q=(k||(k=d("I64"))).to_string(a.threadKey),e[42]=a.threadKey,e[43]=q):q=e[43];e[44]!==a.messageId||e[45]!==o||e[46]!==q?(b=babelHelpers["extends"]({},p,{reportedObjectID:s,threadId:q}),e[44]=a.messageId,e[45]=o,e[46]=q,e[47]=b):b=e[47];o=b}else{u=r.igThreadId+"_"+encodeURI(btoa(a.messageId))+"_"+(k||(k=d("I64"))).to_string(t.id);e[48]!==v||e[49]!==o||e[50]!==u||e[51]!==r.igThreadId?(p=babelHelpers["extends"]({},o,{containerModule:v,reportedObjectID:u,threadId:r.igThreadId}),e[48]=v,e[49]=o,e[50]=u,e[51]=r.igThreadId,e[52]=p):p=e[52];o=p}s=o;e[53]===Symbol["for"]("react.memo_cache_sentinel")?(q=c("JSResourceForInteraction")("PolarisDirectReportingMessageModal.react").__setRef("useIGDMessageReportMenuItem.react"),e[53]=q):q=e[53];e[54]!==a||e[55]!==o?(b=l.jsx(c("IGDMessageReportMenuItem.react"),{dialogProps:s,dialogResource:q,message:a}),e[54]=a,e[55]=o,e[56]=b):b=e[56];return b}g["default"]=a}),98);
__d("useIGDMessageTimestampMenuItem.react",["I64","IGDSBox.react","IGDSContextMenuItem.react","IGDSText.react","MWEditedEyebrowLabel.react","MWPDateBreak.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react"),k={container:{paddingBottom:"x18d9i69",paddingInlineEnd:"xf159sx",paddingInlineStart:"xmzvs34",paddingTop:"xexx8yu",$$css:!0},containerWithDelimiter:{paddingBottom:"x10b6aqq",paddingInlineEnd:"xf159sx",paddingInlineStart:"xmzvs34",paddingTop:"xexx8yu",$$css:!0},editLabel:{marginTop:"xvijh9v",$$css:!0},separator:{paddingInlineEnd:"x14vy60q",paddingInlineStart:"x25sj25",$$css:!0}};function a(a,b,e){var f=d("react-compiler-runtime").c(17),g;f[0]!==a?(g=(i||(i=d("I64"))).to_float(a),f[0]=a,f[1]=g):g=f[1];f[2]!==g?(a=j.jsx(c("MWPDateBreak.react"),{renderTextWrapper:l,timestamp:g}),f[2]=g,f[3]=a):a=f[3];f[4]!==b?(g=b&&j.jsx(c("IGDSBox.react"),{xstyle:k.editLabel,children:j.jsx(c("IGDSText.react"),{color:"secondaryText",size:"footnote",children:j.jsx(c("MWEditedEyebrowLabel.react"),{separatorStyle:k.separator})})}),f[4]=b,f[5]=g):g=f[5];f[6]!==a||f[7]!==g?(b=j.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",children:[a,g]}),f[6]=a,f[7]=g,f[8]=b):b=f[8];a=e?k.containerWithDelimiter:k.container;f[9]!==b||f[10]!==a?(g=j.jsx(d("IGDSContextMenuItem.react").IGDSContextMenuItem,{title:b,xstyle:a}),f[9]=b,f[10]=a,f[11]=g):g=f[11];f[12]!==e?(b=e?j.jsx("div",{className:"x1y3jaa6 x28ko6u xdj266r x1w5wx5t x1e56ztr x1qfufaz"}):null,f[12]=e,f[13]=b):b=f[13];f[14]!==g||f[15]!==b?(a=j.jsxs(c("IGDSBox.react"),{children:[g,b]}),f[14]=g,f[15]=b,f[16]=a):a=f[16];return a}function l(a){return j.jsx(c("IGDSText.react"),{color:"secondaryText",size:"footnote",weight:"semibold",children:a})}l.displayName=l.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("IGDSUndoCirclePanoOutline24Icon.react",["IGDSSVGIconBase.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(4),e,f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsx("path",{d:"M12 .5C5.659.5.5 5.66.5 12S5.659 23.5 12 23.5c6.34 0 11.5-5.16 11.5-11.5S18.34.5 12 .5Zm0 21c-5.238 0-9.5-4.262-9.5-9.5S6.762 2.5 12 2.5s9.5 4.262 9.5 9.5-4.262 9.5-9.5 9.5Z"}),f=i.jsx("path",{d:"M14.5 10H9.414l1.293-1.293a1 1 0 1 0-1.414-1.414l-3 2.999a1 1 0 0 0 0 1.414l3 3.001a.997.997 0 0 0 1.414 0 1 1 0 0 0 0-1.414L9.415 12H14.5c.827 0 1.5.674 1.5 1.501 0 .395-.157.794-.431 1.096-.227.249-.508.403-.735.403L14 14.999a1 1 0 0 0-.001 2l.833.001h.002c.796 0 1.604-.386 2.215-1.059a3.625 3.625 0 0 0 .951-2.44C18 11.571 16.43 10 14.5 10Z"}),b[0]=e,b[1]=f):(e=b[0],f=b[1]);b[2]!==a?(e=i.jsxs(c("IGDSSVGIconBase.react"),babelHelpers["extends"]({},a,{viewBox:"0 0 24 24",children:[e,f]})),b[2]=a,b[3]=e):e=b[3];return e}b=i.memo(a);g["default"]=b}),98);
__d("useIGDMessageUnsendMenuItem.react",["fbt","I64","IGDMessageContextMenuItem.react","IGDSUndoCirclePanoOutline24Icon.react","IGDThreadListNewMessageLoggingDataContext","Int64Hooks","JSResourceForInteraction","MWPActor.react","MWPThreadCapabilitiesContext","MWV2MessageRowIsRowFocusedContext.react","MessengerWebUXLogger","PolarisDirectLogger","getInstamadilloLoggingExtraData","react","react-compiler-runtime","useIGDSLazyDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||d("react");function a(a,b){var e=d("react-compiler-runtime").c(19),f=d("MWPActor.react").useActor(),g=a.senderId;g=(j||(j=d("I64"))).equal(g,f);var i=c("MessengerWebUXLogger").useInteractionLogger(),n=d("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext();f=d("MWV2MessageRowIsRowFocusedContext.react").useMWV2MessageRowIsRowFocusedContext();var o=f.setIsDialogOpened;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=c("JSResourceForInteraction")("IGDMessageUnsendDialog.react").__setRef("useIGDMessageUnsendMenuItem.react"),e[0]=f):f=e[0];f=c("useIGDSLazyDialog")(f);var p=f[0];e[1]!==n||e[2]!==i||e[3]!==a||e[4]!==o||e[5]!==p||e[6]!==b?(f=function(){i==null?void 0:i({eventName:"message_unsend",extraData:c("getInstamadilloLoggingExtraData")(b),flowInstanceId:n}),p({message:a},function(){o(m)}),o(l),d("PolarisDirectLogger").DirectLogger.logDirectEvent("DirectThread","direct_delete_message_attempt")},e[1]=n,e[2]=i,e[3]=a,e[4]=o,e[5]=p,e[6]=b,e[7]=f):f=e[7];var q;e[8]!==n||e[9]!==i||e[10]!==a||e[11]!==p||e[12]!==b?(q=[n,i,a,p,b],e[8]=n,e[9]=i,e[10]=a,e[11]=p,e[12]=b,e[13]=q):q=e[13];f=d("Int64Hooks").useCallbackInt64(f,q);q=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext();q=q.messageUnsendEnabled;if(!q||!g)return null;e[14]===Symbol["for"]("react.memo_cache_sentinel")?(q=h._(/*BTDS*/"Anular env\u00edo"),e[14]=q):q=e[14];g=q;e[15]===Symbol["for"]("react.memo_cache_sentinel")?(q=k.jsx(c("IGDSUndoCirclePanoOutline24Icon.react"),{alt:g,color:"ig-error-or-destructive",size:18}),e[15]=q):q=e[15];var r;e[16]===Symbol["for"]("react.memo_cache_sentinel")?(r={color:"errorOrDestructive"},e[16]=r):r=e[16];e[17]!==f?(q=k.jsx(c("IGDMessageContextMenuItem.react"),{delimiter:!0,icon:q,label:g,labelProps:r,onClick:f}),e[17]=f,e[18]=q):q=e[18];return q}function l(){return!0}function m(){return!1}g["default"]=a}),226);
__d("IGDMessageContextMenu.react",["IGDBroadcastChannelLoggingShapes","IGDSBox.react","IGDSPopover.react","IGDThreadListNewMessageLoggingDataContext","MWCMThreadTypes.react","MessengerWebUXLogger","WebUXLoggingSurfaceContextProvider","cr:21429","isMWEditedMessage","react","react-compiler-runtime","useIGDBroadcastChannelImpressionLoggerWithCheck","useIGDEditMessageMenuItem.react","useIGDMessageCopyMenuItem.react","useIGDMessageForwardMenuItem.react","useIGDMessageInspectMenuItem.react","useIGDMessageNegativeFeedbackMenuItem.react","useIGDMessagePositiveFeedbackMenuItem.react","useIGDMessageReactionMenuItem.react","useIGDMessageReplyMenuItem.react","useIGDMessageReportMenuItem.react","useIGDMessageTimestampMenuItem.react","useIGDMessageUnsendMenuItem.react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useMemo;var j={popover:{borderStartStartRadius:"x1rgw4pv",borderStartEndRadius:"x1vjm0to",borderEndEndRadius:"xnqoqkk",borderEndStartRadius:"x16lu3ki",marginBottom:"xu06os2",$$css:!0}};function a(a){var e=d("react-compiler-runtime").c(26),f=a.message,g=a.onClose;a=a.thread;var h=d("MWCMThreadTypes.react").isIGBroadcastChannelThread(a.threadSubtype),l=c("useIGDBroadcastChannelImpressionLoggerWithCheck")(f.threadKey,a.threadSubtype,d("IGDBroadcastChannelLoggingShapes").MESSAGE_OPTIONS_RENDERED_SHAPE),m=d("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext(),n;e[0]!==m?(n={eventName:"message_contextual_menu_rendered",flowInstanceId:m},e[0]=m,e[1]=n):n=e[1];m=c("MessengerWebUXLogger").useImpressionLoggerRef(n);n=c("useIGDMessageReplyMenuItem.react")(f,g);var o=c("useIGDMessageReactionMenuItem.react")(f,g),p=c("useIGDEditMessageMenuItem.react")(f,g,a),q=c("useIGDMessageCopyMenuItem.react")(f,g,a),r=c("useIGDMessageForwardMenuItem.react")(f,g),s=b("cr:21429")(f,g,a);g=c("useIGDMessagePositiveFeedbackMenuItem.react")(f,g);var t=c("useIGDMessageNegativeFeedbackMenuItem.react")(f),u;e[2]!==q||e[3]!==p||e[4]!==r||e[5]!==t||e[6]!==s||e[7]!==g||e[8]!==o||e[9]!==n?(u=[o,n,p,r,q,s,g,t],e[2]=q,e[3]=p,e[4]=r,e[5]=t,e[6]=s,e[7]=g,e[8]=o,e[9]=n,e[10]=u):u=e[10];q=u;e[11]!==q?(p=q.filter(Boolean),e[11]=q,e[12]=p):p=e[12];r=p;t=r;e[13]!==f?(s=c("isMWEditedMessage")(f),e[13]=f,e[14]=s):s=e[14];g=s;o=c("useIGDMessageTimestampMenuItem.react")(f.timestampMs,g,t.length>0);n=c("useIGDMessageUnsendMenuItem.react")(f,a);u=c("useIGDMessageReportMenuItem.react")(f,a.threadType);q=c("useIGDMessageInspectMenuItem.react")(f);e[15]!==t?(p=t.map(k),e[15]=t,e[16]=p):p=e[16];e[17]!==q||e[18]!==u||e[19]!==p||e[20]!==o||e[21]!==n?(r=i.jsx(d("WebUXLoggingSurfaceContextProvider").WebUXSurfaceLoggingContext.Provider,{value:"thread_view_message_options",children:i.jsxs(c("IGDSBox.react"),{minWidth:180,padding:2,children:[o,p,n,u,q]})}),e[17]=q,e[18]=u,e[19]=p,e[20]=o,e[21]=n,e[22]=r):r=e[22];s=r;g=h?l:m;e[23]!==s||e[24]!==g?(a=i.jsx(c("IGDSPopover.react"),{popoverContent:s,popoverXStyle:j.popover,ref:g}),e[23]=s,e[24]=g,e[25]=a):a=e[25];return a}function k(a,b){return i.jsx(c("IGDSBox.react"),{children:a},"igd-message-menu-item-"+b)}k.displayName=k.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("getSendProfileToInstamadilloRecipient",["fbt","FBLogger","I64","IGDDataclassTypes.flow","LSAuthorityLevel","LSMessageReplySourceTypeV2","LSMessageSendStatus","asyncToGeneratorRuntime","issueSendInstamadilloXMAReceiverFetch","renderInstamadilloOptimisticXmaReceiverFetch"],(function(a,b,c,d,e,f,g,h){"use strict";var i;function a(a,e,f,g,j){if(f==null)throw c("FBLogger")("igd_web").mustfix("getSendProfileToInstamadilloRecipient: missing profileUsername");var k={__typename:"XMSGIgReceiverFetchXmaProfileFetchParams",igid:a};a={__typename:"XMSGIgXmaContentRefDataclass",action_type:d("IGDDataclassTypes.flow").XmsgIgXmaActionType.Share,content_type:d("IGDDataclassTypes.flow").XmsgIgReceiverFetchContentType.Profile,fetch_params:k,owner_fbid:e,target_url:g,username:f};var l={contentRef:JSON.stringify(a)},m={authorityLevel:(i||(i=d("I64"))).of_int32(c("LSAuthorityLevel").OPTIMISTIC),isForwarded:j,replySourceTypeV2:j===!0?(i||(i=d("I64"))).of_int32(c("LSMessageReplySourceTypeV2").FORWARD):void 0,sendStatus:i.of_int32(c("LSMessageSendStatus").SENDING_TO_SERVER),sendStatusV2:i.of_int32(1)},n={actionUrl:g,nativeUrl:g,type_:"xma_open_native"},o={authorityLevel:i.of_int32(c("LSAuthorityLevel").OPTIMISTIC),subtitleText:h._(/*BTDS*/"Profile").toString(),titleText:f};return function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,d,e,f,g){try{var h=(yield c("renderInstamadilloOptimisticXmaReceiverFetch")(a,l,k,o,n,m));yield c("issueSendInstamadilloXMAReceiverFetch")({comment:e,isDisappearingModeSettingOn:b,offlineThreadingId:h,openEb:d,receiverFetchXma:JSON.stringify(l),threadKey:a});f==null?void 0:f(a)}catch(b){g==null?void 0:g(b,a)}});return function(b,c,d,e,f,g){return a.apply(this,arguments)}}()}g["default"]=a}),226);
__d("getSendReelToInstamadilloRecipient",["fbt","I64","IGDDataclassTypes.flow","LSAuthorityLevel","LSIntEnum","LSMessageReplySourceTypeV2","LSMessageSendStatus","MNXMAPreviewImageDecorationType","asyncToGeneratorRuntime","issueSendInstamadilloXMAReceiverFetch","renderInstamadilloOptimisticXmaReceiverFetch"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;function a(a,e,f,g,k){var l={__typename:"XMSGIgReceiverFetchXmaClipFetchParams",media_igid:a};e={__typename:"XMSGIgXmaContentRefDataclass",action_type:d("IGDDataclassTypes.flow").XmsgIgXmaActionType.Share,content_type:d("IGDDataclassTypes.flow").XmsgIgReceiverFetchContentType.Clip,fetch_params:l,owner_fbid:e,target_url:g,username:f};var m={contentRef:JSON.stringify(e)},n={authorityLevel:(i||(i=d("I64"))).of_int32(c("LSAuthorityLevel").OPTIMISTIC),isForwarded:k,replySourceTypeV2:k===!0?(i||(i=d("I64"))).of_int32(c("LSMessageReplySourceTypeV2").FORWARD):void 0,sendStatus:i.of_int32(c("LSMessageSendStatus").SENDING_TO_SERVER),sendStatusV2:i.of_int32(1)},o={actionUrl:g,nativeUrl:g,targetId:i.of_string(a),type_:"igd_web_post_share"},p={authorityLevel:i.of_int32(c("LSAuthorityLevel").OPTIMISTIC),previewImageDecorationType:(j||(j=d("LSIntEnum"))).ofNumber(c("MNXMAPreviewImageDecorationType").REEL),subtitleText:h._(/*BTDS*/"Reel").toString(),titleText:(f=e.username)!=null?f:""};return function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,d,e,f,g){try{var h=(yield c("renderInstamadilloOptimisticXmaReceiverFetch")(a,m,l,p,o,n));yield c("issueSendInstamadilloXMAReceiverFetch")({comment:e,isDisappearingModeSettingOn:b,offlineThreadingId:h,openEb:d,receiverFetchXma:JSON.stringify(m),threadKey:a});f==null?void 0:f(a)}catch(b){g==null?void 0:g(b,a)}});return function(b,c,d,e,f,g){return a.apply(this,arguments)}}()}g["default"]=a}),226);/*FB_PKG_DELIM*/
__d("BaseToastContentWrapper.react",["BaseTheme.react","BaseView.react","Dsp2BaseThemeContext.react","Dsp2BaseThemeGated.react","XPlatReactFocusRegion.react","basePushToast","focusScopeQueries","react","useCurrentDisplayMode"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext,k={dark:"__fb-dark-mode ",light:"__fb-light-mode ",type:"CLASSNAMES"};function a(a){var b=a.ariaLabelledBy,e=a.children,f=a.ref,g=a.role,h=a.testid;h=a.themeConfig;var l=a.useInvertedDisplayMode;a=a.xstyle;var m=c("useCurrentDisplayMode")();m=m==="dark"?"light":"dark";var n=j(c("Dsp2BaseThemeContext.react"));l=l?c("Dsp2BaseThemeGated.react")?i.jsx(c("Dsp2BaseThemeGated.react"),{"aria-labelledby":b,displayMode:m,ref:f,role:g,testid:void 0,themes:n,xstyle:a,children:e}):i.jsx(c("BaseTheme.react"),{"aria-labelledby":b,config:h!=null?h:k,displayMode:m,ref:f,role:g,testid:void 0,xstyle:a,children:e}):i.jsx(c("BaseView.react"),{"aria-labelledby":b,ref:f,role:g,testid:void 0,xstyle:a,children:e});return d("basePushToast").passesNewToastAPIGK()?i.jsx(c("XPlatReactFocusRegion.react"),{containFocusQuery:d("focusScopeQueries").tabbableScopeQuery,children:l}):l}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("BaseToast.react",["BaseInlinePressable.react","BaseToastContentWrapper.react","BaseView.react","XPlatReactFocusRegion.react","basePushToast","focusScopeQueries","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useId,k=b.useMemo,l={item:{display:"x78zum5",flexDirection:"xdt5ytf",paddingBottom:"x19yoh24",paddingInlineStart:"xa6w9w1",paddingInlineEnd:"x7jv1k3",paddingLeft:null,paddingRight:null,paddingTop:"x6enp1t",$$css:!0},itemText:{flexGrow:"x1iyjqo2",$$css:!0},link:{wordBreak:"xdnwjd9",$$css:!0},root:{alignItems:"x6s0dn4",backgroundColor:"x1wkzo03",borderTopColor:"xlnzwam",borderInlineEndColor:"xuc4ihs",borderBottomColor:"xm9qwu6",borderInlineStartColor:"x38i1re",borderStartStartRadius:"x1ghonvh",borderStartEndRadius:"x1c2sbsd",borderEndEndRadius:"x8tb1rc",borderEndStartRadius:"x609f4j",borderTopStyle:"xhf2mca",borderInlineEndStyle:"xaau5u0",borderBottomStyle:"x13y0ya8",borderInlineStartStyle:"xv6865q",borderTopWidth:"xmqxc35",borderInlineEndWidth:"x1a32di2",borderBottomWidth:"x21fg80",borderInlineStartWidth:"xyi7q43",boxShadow:"xi1c1fh",display:"x78zum5",flexShrink:"x2lah0s",maxWidth:"x1cs6qxi",minWidth:"x1hqenl9",paddingTop:"x192rfv7",paddingBottom:"x13jxccy",paddingInlineStart:"x1rcnc7e",paddingInlineEnd:"x1e7pf15",paddingLeft:null,paddingRight:null,$$css:!0},rootDense:{minWidth:"xktpd3l",$$css:!0},rootFullWidth:{width:"xh8yej3",$$css:!0}};function a(a){var b,e,f=a.action,g=a.addOnStart,h=a.closeButton,m=a.density,n=a.linkWrapper,o=a.message,p=a.offsetStyles,q=a.onDismiss,r=a.size;r=r===void 0?"full-width":r;var s=a.testid;s=a.themeConfigOverride;var t=a.toastRef,u=a.useInvertedDisplayMode;u=u===void 0?!0:u;a=a.variant;var v=j(),w=k(function(){return f!=null?{}:{"aria-atomic":!0,role:"alert"}},[f]);b=f!=null?i.jsx(c("BaseView.react"),{xstyle:[l.item,a==null?void 0:(b=a.xstyleConfig)==null?void 0:b.item],children:f.element!=null?f.element:f.labelRenderer&&i.jsx(c("BaseInlinePressable.react"),{onPress:function(a){q(),f.onPress(a)},testid:void 0,xstyle:l.link,children:f.labelRenderer(f.label)})}):null;e=i.jsxs(i.Fragment,{children:[g!=null&&i.jsx(c("BaseView.react"),{xstyle:[l.item,a==null?void 0:(e=a.xstyleConfig)==null?void 0:e.item],children:g}),i.jsx(c("BaseView.react"),babelHelpers["extends"]({xstyle:[l.item,l.itemText,a==null?void 0:(e=a.xstyleConfig)==null?void 0:e.item]},w,{children:o({toastMessageId:v})})),b!=null&&(d("basePushToast").passesNewToastAPIGK()?b:i.jsx(c("XPlatReactFocusRegion.react"),{autoFocusQuery:d("focusScopeQueries").tabbableScopeQuery,children:b})),Boolean(h)&&i.jsx(c("BaseView.react"),{xstyle:[l.item,a==null?void 0:(g=a.xstyleConfig)==null?void 0:g.item],children:h})]});e=n!=null?n(e):e;return i.jsx(c("BaseToastContentWrapper.react"),{ariaLabelledBy:f!=null&&d("basePushToast").passesNewToastAPIGK?v:void 0,ref:t,role:d("basePushToast").passesNewToastAPIGK()&&(f!=null||Boolean(h))?"dialog":void 0,testid:void 0,themeConfig:s,useInvertedDisplayMode:u,xstyle:[l.root,r==="full-width"&&l.rootFullWidth,m==="dense"&&l.rootDense,p,a==null?void 0:(w=a.xstyleConfig)==null?void 0:w.container],children:e})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CacheStorage",["ErrorGuard","ExecutionEnvironment","WebStorage","cr:6943","cr:8958","emptyFunction","err"],(function(a,b,c,d,e,f,g){var h,i,j,k="_@_",l="3b",m="CacheStorageVersion",n={length:0,getItem:a=c("emptyFunction"),setItem:a,clear:a,removeItem:a,key:a};d=function(){function a(a){this._store=a}var b=a.prototype;b.getStore=function(){return this._store};b.keys=function(){var a=[];for(var b=0;b<this._store.length;b++){var c=this._store.key(b);c!=null&&a.push(c)}return a};b.get=function(a){return this._store.getItem(a)};b.set=function(a,b){this._store.setItem(a,b)};b.remove=function(a){this._store.removeItem(a)};b.clear=function(){this._store.clear()};b.clearWithPrefix=function(a){a=a||"";var b=this.keys();for(var c=0;c<b.length;c++){var d=b[c];d!=null&&d.startsWith(a)&&this.remove(d)}};return a}();e=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b;return a.call(this,(b=(h||(h=c("WebStorage"))).getLocalStorage())!=null?b:n)||this}b.available=function(){return!!(h||(h=c("WebStorage"))).getLocalStorage()};return b}(d);g=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b;return a.call(this,(b=(h||(h=c("WebStorage"))).getSessionStorage())!=null?b:n)||this}b.available=function(){return!!(h||(h=c("WebStorage"))).getSessionStorage()};return b}(d);var o=function(){function a(){this._store={}}var b=a.prototype;b.getStore=function(){return this._store};b.keys=function(){return Object.keys(this._store)};b.get=function(a){return this._store[a]===void 0?null:this._store[a]};b.set=function(a,b){this._store[a]=b};b.remove=function(a){a in this._store&&delete this._store[a]};b.clear=function(){this._store={}};b.clearWithPrefix=function(a){a=a||"";var b=this.keys();for(var c=0;c<b.length;c++){var d=b[c];d.startsWith(a)&&this.remove(d)}};a.available=function(){return!0};return a}(),p={memory:o,localstorage:e,sessionstorage:g};a=function(){function a(a,d){this._changeCallbacks=[];this._key_prefix="_cs_";this._exception=null;d&&(this._key_prefix=d);a==="AUTO"||!a?d="memory":d=a;d&&(!p[d]||!p[d].available()?((i||(i=c("ExecutionEnvironment"))).canUseDOM,this._backend=new o()):this._backend=new p[d]());a=this.useBrowserStorage();a&&b("cr:6943").listen(window,"storage",this._onBrowserValueChanged.bind(this));d=a?this._backend.getStore().getItem(m):this._backend.getStore()[m];d!==l&&this.clearOwnKeys()}var d=a.prototype;d.useBrowserStorage=function(){return this._backend.getStore()===(h||(h=c("WebStorage"))).getLocalStorage()||this._backend.getStore()===(h||(h=c("WebStorage"))).getSessionStorage()};d.addValueChangeCallback=function(a){var b=this;this._changeCallbacks.push(a);return{remove:function(){b._changeCallbacks.slice(b._changeCallbacks.indexOf(a),1)}}};d._onBrowserValueChanged=function(a){this._changeCallbacks&&String(a.key).startsWith(this._key_prefix)&&this._changeCallbacks.forEach(function(b){b(a.key,a.oldValue,a.newValue)})};d.keys=function(){var a=this,b=[];(j||(j=c("ErrorGuard"))).guard(function(){if(a._backend){var c=a._backend.keys(),d=a._key_prefix.length;for(var e=0;e<c.length;e++)c[e].substr(0,d)==a._key_prefix&&b.push(c[e].substr(d))}},{name:"CacheStorage"})();return b};d.set=function(d,e,f){if(this._backend){if(this.useBrowserStorage()&&a._persistentWritesDisabled){this._exception=c("err")("writes disabled");return!1}var g;typeof e==="string"?g=k+e:!f?(g={__t:Date.now(),__v:e},g=b("cr:8958").stringify(g)):g=b("cr:8958").stringify(e);f=this._backend;e=this._key_prefix+d;d=!0;var h=null;while(d)try{h=null,f.set(e,g),d=!1}catch(a){h=a;var i=f.keys().length;this._evictCacheEntries();d=f.keys().length<i}if(h!==null){this._exception=h;return!1}else{this._exception=null;return!0}}this._exception=c("err")("no back end");return!1};d.getLastSetExceptionMessage=function(){return this._exception?this._exception.message:null};d.getLastSetException=function(){return this._exception};d.getStorageKeyCount=function(){var a=this._backend;return a?a.keys().length:0};d._evictCacheEntries=function(){var c=[],d=this._backend;d.keys().forEach(function(e){if(e===m)return;var g=d.get(e);if(g===void 0){d.remove(e);return}if(a._hasMagicPrefix(g))return;try{g=b("cr:8958").parse(g,f.id)}catch(a){d.remove(e);return}g&&g.__t!==void 0&&g.__v!==void 0&&c.push([e,g.__t])});c.sort(function(a,b){return a[1]-b[1]});for(var e=0;e<Math.ceil(c.length/2);e++)d.remove(c[e][0])};d.get=function(d,e){var g;if(this._backend){(j||(j=c("ErrorGuard"))).applyWithGuard(function(){g=this._backend.get(this._key_prefix+d)},this,[],{onError:function(){g=null},name:"CacheStorage:get"});if(g!=null)if(a._hasMagicPrefix(g))g=g.substr(k.length);else try{g=b("cr:8958").parse(g,f.id),g&&g.__t!==void 0&&g.__v!==void 0&&(g=g.__v)}catch(a){g=void 0}else g=void 0}g===void 0&&e!==void 0&&(g=e,this.set(d,g));return g};d.remove=function(a){this._backend&&(j||(j=c("ErrorGuard"))).applyWithGuard(this._backend.remove,this._backend,[this._key_prefix+a],{name:"CacheStorage:remove"})};d._setVersion=function(){var a=this;(j||(j=c("ErrorGuard"))).applyWithGuard(function(){a.useBrowserStorage()?a._backend.getStore().setItem(m,l):a._backend.getStore()[m]=l},this,[],{name:"CacheStorage:setVersion"})};d.clear=function(){this._backend&&((j||(j=c("ErrorGuard"))).applyWithGuard(this._backend.clear,this._backend,[],{name:"CacheStorage:clear"}),this._setVersion())};d.clearOwnKeys=function(){this._backend&&((j||(j=c("ErrorGuard"))).applyWithGuard(this._backend.clearWithPrefix,this._backend,[this._key_prefix],{name:"CacheStorage:clearOwnKeys"}),this._setVersion())};a.getAllStorageTypes=function(){return Object.keys(p)};a._hasMagicPrefix=function(a){return a.substr(0,k.length)===k};a.disablePersistentWrites=function(){a._persistentWritesDisabled=!0};return a}();a._persistentWritesDisabled=!1;f.exports=a}),34);
__d("CometFocusTableContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({FocusCell:null,FocusRow:null,FocusTable:null});g["default"]=b}),98);
__d("CometSuspenseFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1828945");b=d("FalcoLoggerInternal").create("comet_suspense",a);e=b;g["default"]=e}),98);
__d("TWriteBuffer",[],(function(a,b,c,d,e,f){a=function(){function a(b){b===void 0&&(b=a.DEFAULT_BYTE_BUFFER_SIZE),this.$1=new DataView(new ArrayBuffer(b)),this.$2=0}var b=a.prototype;b.write=function(a){this.$2+a.length>this.$1.byteLength&&this.$3(this.$2+a.length);for(var b=0;b<a.length;b++)this.$1.setUint8(this.$2+b,a[b]);this.$2+=a.length;return a.length};b.writeByte=function(a){this.$2+1>this.$1.byteLength&&this.$3(this.$2+1);this.$1.setUint8(this.$2,a);this.$2++;return 1};b.writeFloatBE=function(a){this.$2+Float32Array.BYTES_PER_ELEMENT>this.$1.byteLength&&this.$3(this.$2+Float32Array.BYTES_PER_ELEMENT);this.$1.setFloat32(this.$2,a);this.$2+=Float32Array.BYTES_PER_ELEMENT;return Float32Array.BYTES_PER_ELEMENT};b.writeDoubleBE=function(a){this.$2+Float64Array.BYTES_PER_ELEMENT>this.$1.byteLength&&this.$3(this.$2+Float64Array.BYTES_PER_ELEMENT);this.$1.setFloat64(this.$2,a);this.$2+=Float64Array.BYTES_PER_ELEMENT;return Float64Array.BYTES_PER_ELEMENT};b.toByteArray=function(){var a=new Uint8Array(this.$1.buffer,0,this.$2);return a};b.currentSize=function(){return this.$2};b.getUnderlyingDataView=function(){return this.$1};b.$3=function(a){a=a*2;if(!Number.isSafeInteger(a))throw new Error("unable to resize");a=new DataView(new ArrayBuffer(a));for(var b=0;b<this.$2;b++)a.setUint8(b,this.$1.getUint8(b));this.$1=a};b.readByte=function(){throw new Error("operation not supported")};b.readBytes=function(a){throw new Error("operation not supported")};b.readFloatBE=function(){throw new Error("operation not supported")};b.readDoubleBE=function(){throw new Error("operation not supported")};return a}();a.DEFAULT_BYTE_BUFFER_SIZE=16;f["default"]=a}),66);
__d("StringToUtf8",["TWriteBuffer"],(function(a,b,c,d,e,f,g){a=function(a){var b=new(c("TWriteBuffer"))(a.length),d;for(var e=0;e<a.length;e++){d=a.charCodeAt(e);if(d<128)b.writeByte(d);else if(d<2048)b.writeByte(d>>6|192),b.writeByte(d&63|128);else if((d&64512)==55296){if(e+1>=a.length)throw new Error("UTF-16 string is truncated: ["+d.toString(16)+"]");if((a.charCodeAt(e+1)&64512)!==56320)throw new Error("Invalid UTF-16 string: ["+d.toString(16)+", "+a.charCodeAt(e+1).toString(16)+"]");d=65536+((d&1023)<<10)+(a.charCodeAt(++e)&1023);b.writeByte(d>>18|240);b.writeByte(d>>12&63|128);b.writeByte(d>>6&63|128);b.writeByte(d&63|128)}else b.writeByte(d>>12|224),b.writeByte(d>>6&63|128),b.writeByte(d&63|128)}return b.toByteArray()};g.StringToUtf8=a}),98);
__d("ThriftTypes",[],(function(a,b,c,d,e,f){a=Object.freeze({STOP:0,VOID:1,BOOL:2,BYTE:3,I08:3,DOUBLE:4,I16:6,I32:8,I64:10,STRING:11,STRUCT:12,MAP:13,SET:14,LIST:15,FLOAT:19});b=a;f["default"]=b}),66);
__d("Utf8ToString",[],(function(a,b,c,d,e,f){var g=function(a,b){throw new Error(a+": ["+b.map(function(a){return a.toString(16)}).toString()+"]")},h=function(a){g("Invalid UTF-8 sequence",a)},i=function(a,b){g("Not enough bytes for "+a+"-byte sequence",b)};a=function(a){var b=0,c=[];while(b<a.length){var d=a[b++];if(d<128)c.push(String.fromCharCode(d));else if(d>=128&&d<194)h([d]);else if(d>=194&&d<224){b>=a.length&&i(2,[d]);var e=a[b++];(e&192)!==128&&h([d,e]);c.push(String.fromCharCode((d&31)<<6|e&63))}else if(d>=240&&d<245){b+2>=a.length&&i(4,[d]);e=a[b++];var f=a[b++],g=a[b++];(d==240&&(!(e>=144&&e<192)||(f&192)!==128||(g&192)!==128)||d>=241&&d<244&&((e&192)!==128||(f&192)!==128||(g&192)!==128)||d==244&&(!(e>=128&&e<144)||(f&192)!==128||(g&192)!==128))&&h([d,e,f,g]);e=((d&7)<<18|(e&63)<<12|(f&63)<<6|g&63)-65536;c.push(String.fromCharCode(55296+(e>>10)));c.push(String.fromCharCode(56320+(e&1023)))}else if(d>=245)h([d]);else{b+1>=a.length&&i(3,[d]);f=a[b++];g=a[b++];d==224?f>=160&&f<192||h([d,f,g]):d>=225&&d<237?f>=128&&f<192||h([d,f,g]):d==237?f>=128&&f<160||h([d,f,g]):d>=238&&d<240&&(f>=128&&f<192||h([d,f,g]));g>=128&&g<192||h([d,f,g]);c.push(String.fromCharCode((d&15)<<12|(f&63)<<6|g&63))}}return c.join("")};f.Utf8ToString=a}),66);
__d("jsbi",[],(function(a,b,c,d,e,f){(function(a,b){"object"==typeof f&&"undefined"!=typeof e?e.exports=b():"function"==typeof define&&define.amd?define(b):a.JSBI=b()})(this,function(){"use strict";function a(b){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},a(b)}function b(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function c(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function d(a,b,d){return b&&c(a.prototype,b),d&&c(a,d),a}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&g(a,b)}function f(a){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},f(a)}function g(a,b){return g=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},g(a,b)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(a){return!1}}function i(){return i=h()?Reflect.construct:function(a,b,c){var d=[null];d.push.apply(d,b);b=Function.bind.apply(a,d);a=new b;return c&&g(a,c.prototype),a},i.apply(null,arguments)}function j(a){return-1!==Function.toString.call(a).indexOf("[native code]")}function k(a){var b="function"==typeof Map?new Map:void 0;return k=function(a){function c(){return i(a,arguments,f(this).constructor)}if(null===a||!j(a))return a;if("function"!=typeof a)throw new TypeError("Super expression must either be null or a function");if("undefined"!=typeof b){if(b.has(a))return b.get(a);b.set(a,c)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),g(c,a)},k(a)}function l(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function m(a,b){return b&&("object"==typeof b||"function"==typeof b)?b:l(a)}var n=function(c){var h=Math.abs,i=Math.max,j=Math.imul,k=Math.clz32;function g(a,c){if(b(this,g),a>g.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded");return a=m(this,f(g).call(this,a)),a.sign=c,a}return e(g,c),d(g,[{key:"toDebugString",value:function(){var a=["BigInt["],b=!0,c=!1,d=void 0;try{for(var e,e,f=this[Symbol.iterator]();!(b=(e=f.next()).done);b=!0)e=e.value,a.push((e?(e>>>0).toString(16):e)+", ")}catch(a){c=!0,d=a}finally{try{b||null==f["return"]||f["return"]()}finally{if(c)throw d}}return a.push("]"),a.join("")}},{key:"toString",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:10;if(2>a||36<a)throw new RangeError("toString() radix argument must be between 2 and 36");return 0===this.length?"0":0==(a&a-1)?g.__toStringBasePowerOfTwo(this,a):g.__toStringGeneric(this,a,!1)}},{key:"__copy",value:function(){for(var a=new g(this.length,this.sign),b=0;b<this.length;b++)a[b]=this[b];return a}},{key:"__trim",value:function(){for(var a=this.length,b=this[a-1];0===b;)a--,b=this[a-1],this.pop();return 0===a&&(this.sign=!1),this}},{key:"__initializeDigits",value:function(){for(var a=0;a<this.length;a++)this[a]=0}},{key:"__clzmsd",value:function(){return k(this[this.length-1])}},{key:"__inplaceMultiplyAdd",value:function(a,b,c){c>this.length&&(c=this.length);for(var d=65535&a,a=a>>>16,e=0,f=65535&b,b=b>>>16,i=0;i<c;i++){var n=this.__digit(i),m=65535&n;n=n>>>16;var o=j(m,d);m=j(m,a);var p=j(n,d);n=j(n,a);var q=f+(65535&o);o=b+e+(q>>>16)+(o>>>16)+(65535&m)+(65535&p);f=(m>>>16)+(p>>>16)+(65535&n)+(o>>>16),e=f>>>16,f&=65535,b=n>>>16;this.__setDigit(i,65535&q|o<<16)}if(0!==e||0!==f||0!==b)throw new Error("implementation bug")}},{key:"__inplaceAdd",value:function(a,b,c){for(var d,e=0,f=0;f<c;f++)d=this.__halfDigit(b+f)+a.__halfDigit(f)+e,e=d>>>16,this.__setHalfDigit(b+f,d);return e}},{key:"__inplaceSub",value:function(a,b,c){var d=0;if(1&b){b>>=1;for(var e=this.__digit(b),f=65535&e,k=0;k<c-1>>>1;k++){var l=a.__digit(k),m=(e>>>16)-(65535&l)-d;d=1&m>>>16,this.__setDigit(b+k,m<<16|65535&f),e=this.__digit(b+k+1),f=(65535&e)-(l>>>16)-d,d=1&f>>>16}m=a.__digit(k);l=(e>>>16)-(65535&m)-d;d=1&l>>>16,this.__setDigit(b+k,l<<16|65535&f);if(b+k+1>=this.length)throw new RangeError("out of bounds");0==(1&c)&&(e=this.__digit(b+k+1),f=(65535&e)-(m>>>16)-d,d=1&f>>>16,this.__setDigit(b+a.length,4294901760&e|65535&f))}else{b>>=1;for(l=0;l<a.length-1;l++){k=this.__digit(b+l);m=a.__digit(l);e=(65535&k)-(65535&m)-d;d=1&e>>>16;f=(k>>>16)-(m>>>16)-d;d=1&f>>>16,this.__setDigit(b+l,f<<16|65535&e)}k=this.__digit(b+l);m=a.__digit(l);f=(65535&k)-(65535&m)-d;d=1&f>>>16;e=0;0==(1&c)&&(e=(k>>>16)-(m>>>16)-d,d=1&e>>>16),this.__setDigit(b+l,e<<16|65535&f)}return d}},{key:"__inplaceRightShift",value:function(a){if(0!==a){for(var b,c=this.__digit(0)>>>a,d=this.length-1,e=0;e<d;e++)b=this.__digit(e+1),this.__setDigit(e,b<<32-a|c),c=b>>>a;this.__setDigit(d,c)}}},{key:"__digit",value:function(a){return this[a]}},{key:"__unsignedDigit",value:function(a){return this[a]>>>0}},{key:"__setDigit",value:function(a,b){this[a]=0|b}},{key:"__setDigitGrow",value:function(a,b){this[a]=0|b}},{key:"__halfDigitLength",value:function(){var a=this.length;return 65535>=this.__unsignedDigit(a-1)?2*a-1:2*a}},{key:"__halfDigit",value:function(a){return 65535&this[a>>>1]>>>((1&a)<<4)}},{key:"__setHalfDigit",value:function(a,b){var c=a>>>1,d=this.__digit(c);a=1&a?65535&d|b<<16:4294901760&d|65535&b;this.__setDigit(c,a)}}],[{key:"BigInt",value:function(b){var c=Math.floor,d=Number.isFinite;if("number"==typeof b){if(0===b)return g.__zero();if((0|b)===b)return 0>b?g.__oneDigit(-b,!0):g.__oneDigit(b,!1);if(!d(b)||c(b)!==b)throw new RangeError("The number "+b+" cannot be converted to BigInt because it is not an integer");return g.__fromDouble(b)}if("string"==typeof b){d=g.__fromString(b);if(null===d)throw new SyntaxError("Cannot convert "+b+" to a BigInt");return d}if("boolean"==typeof b)return!0===b?g.__oneDigit(1,!1):g.__zero();if("object"===a(b)){if(b.constructor===g)return b;c=g.__toPrimitive(b);return g.BigInt(c)}throw new TypeError("Cannot convert "+b+" to a BigInt")}},{key:"toNumber",value:function(a){var b=a.length;if(0===b)return 0;if(1===b){var c=a.__unsignedDigit(0);return a.sign?-c:c}c=a.__digit(b-1);var d=k(c),e=32*b-d;if(1024<e)return a.sign?-Infinity:1/0;e=e-1;c=c;b=b-1;d=d+1;var f=32===d?0:c<<d;f>>>=12;var h=d-12,i=12<=d?0:c<<20+d;d=20+d;0<h&&0<b&&(b--,c=a.__digit(b),f|=c>>>32-h,i=c<<h,d=h),0<d&&0<b&&(b--,c=a.__digit(b),i|=c>>>32-d,d-=32);h=g.__decideRounding(a,d,b,c);if((1===h||0===h&&1==(1&i))&&(i=i+1>>>0,0===i&&(f++,0!=f>>>20&&(f=0,e++,1023<e))))return a.sign?-Infinity:1/0;d=a.sign?-2147483648:0;return e=e+1023<<20,g.__kBitConversionInts[1]=d|e|f,g.__kBitConversionInts[0]=i,g.__kBitConversionDouble[0]}},{key:"unaryMinus",value:function(a){if(0===a.length)return a;var b=a.__copy();return b.sign=!a.sign,b}},{key:"bitwiseNot",value:function(a){return a.sign?g.__absoluteSubOne(a).__trim():g.__absoluteAddOne(a,!0)}},{key:"exponentiate",value:function(a,b){if(b.sign)throw new RangeError("Exponent must be positive");if(0===b.length)return g.__oneDigit(1,!1);if(0===a.length)return a;if(1===a.length&&1===a.__digit(0))return a.sign&&0==(1&b.__digit(0))?g.unaryMinus(a):a;if(1<b.length)throw new RangeError("BigInt too big");b=b.__unsignedDigit(0);if(1===b)return a;if(b>=g.__kMaxLengthBits)throw new RangeError("BigInt too big");if(1===a.length&&2===a.__digit(0)){var c=1+(b>>>5),d=a.sign&&0!=(1&b);d=new g(c,d);d.__initializeDigits();var e=1<<(31&b);return d.__setDigit(c-1,e),d}c=null;e=a;for(0!=(1&b)&&(c=a),b>>=1;0!==b;b>>=1)e=g.multiply(e,e),0!=(1&b)&&(null===c?c=e:c=g.multiply(c,e));return c}},{key:"multiply",value:function(a,b){if(0===a.length)return a;if(0===b.length)return b;var c=a.length+b.length;32<=a.__clzmsd()+b.__clzmsd()&&c--;c=new g(c,a.sign!==b.sign);c.__initializeDigits();for(var d=0;d<a.length;d++)g.__multiplyAccumulate(b,a.__digit(d),c,d);return c.__trim()}},{key:"divide",value:function(a,b){if(0===b.length)throw new RangeError("Division by zero");if(0>g.__absoluteCompare(a,b))return g.__zero();var c=a.sign!==b.sign,d=b.__unsignedDigit(0);if(1===b.length&&65535>=d){if(1===d)return c===a.sign?a:g.unaryMinus(a);d=g.__absoluteDivSmall(a,d,null)}else d=g.__absoluteDivLarge(a,b,!0,!1);return d.sign=c,d.__trim()}},{key:"remainder",value:function(a,b){if(0===b.length)throw new RangeError("Division by zero");if(0>g.__absoluteCompare(a,b))return a;var c=b.__unsignedDigit(0);if(1===b.length&&65535>=c){if(1===c)return g.__zero();c=g.__absoluteModSmall(a,c);return 0===c?g.__zero():g.__oneDigit(c,a.sign)}c=g.__absoluteDivLarge(a,b,!1,!0);return c.sign=a.sign,c.__trim()}},{key:"add",value:function(a,b){var c=a.sign;return c===b.sign?g.__absoluteAdd(a,b,c):0<=g.__absoluteCompare(a,b)?g.__absoluteSub(a,b,c):g.__absoluteSub(b,a,!c)}},{key:"subtract",value:function(a,b){var c=a.sign;return c===b.sign?0<=g.__absoluteCompare(a,b)?g.__absoluteSub(a,b,c):g.__absoluteSub(b,a,!c):g.__absoluteAdd(a,b,c)}},{key:"leftShift",value:function(a,b){return 0===b.length||0===a.length?a:b.sign?g.__rightShiftByAbsolute(a,b):g.__leftShiftByAbsolute(a,b)}},{key:"signedRightShift",value:function(a,b){return 0===b.length||0===a.length?a:b.sign?g.__leftShiftByAbsolute(a,b):g.__rightShiftByAbsolute(a,b)}},{key:"unsignedRightShift",value:function(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}},{key:"lessThan",value:function(a,b){return 0>g.__compareToBigInt(a,b)}},{key:"lessThanOrEqual",value:function(a,b){return 0>=g.__compareToBigInt(a,b)}},{key:"greaterThan",value:function(a,b){return 0<g.__compareToBigInt(a,b)}},{key:"greaterThanOrEqual",value:function(a,b){return 0<=g.__compareToBigInt(a,b)}},{key:"equal",value:function(a,b){if(a.sign!==b.sign)return!1;if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a.__digit(c)!==b.__digit(c))return!1;return!0}},{key:"notEqual",value:function(a,b){return!g.equal(a,b)}},{key:"bitwiseAnd",value:function(a,b){if(!a.sign&&!b.sign)return g.__absoluteAnd(a,b).__trim();if(a.sign&&b.sign){var c=i(a.length,b.length)+1;c=g.__absoluteSubOne(a,c);var d=g.__absoluteSubOne(b);return c=g.__absoluteOr(c,d,c),g.__absoluteAddOne(c,!0,c).__trim()}if(a.sign){d=[b,a];a=d[0],b=d[1]}return g.__absoluteAndNot(a,g.__absoluteSubOne(b)).__trim()}},{key:"bitwiseXor",value:function(a,b){if(!a.sign&&!b.sign)return g.__absoluteXor(a,b).__trim();if(a.sign&&b.sign){var c=i(a.length,b.length);c=g.__absoluteSubOne(a,c);var d=g.__absoluteSubOne(b);return g.__absoluteXor(c,d,c).__trim()}d=i(a.length,b.length)+1;if(a.sign){c=[b,a];a=c[0],b=c[1]}c=g.__absoluteSubOne(b,d);return c=g.__absoluteXor(c,a,c),g.__absoluteAddOne(c,!0,c).__trim()}},{key:"bitwiseOr",value:function(a,b){var c=i(a.length,b.length);if(!a.sign&&!b.sign)return g.__absoluteOr(a,b).__trim();if(a.sign&&b.sign){var d=g.__absoluteSubOne(a,c),e=g.__absoluteSubOne(b);return d=g.__absoluteAnd(d,e,d),g.__absoluteAddOne(d,!0,d).__trim()}if(a.sign){e=[b,a];a=e[0],b=e[1]}d=g.__absoluteSubOne(b,c);return d=g.__absoluteAndNot(d,a,d),g.__absoluteAddOne(d,!0,d).__trim()}},{key:"asIntN",value:function(a,b){if(0===b.length)return b;if(0===a)return g.__zero();if(a>=g.__kMaxLengthBits)return b;var c=a+31>>>5;if(b.length<c)return b;var d=b.__unsignedDigit(c-1),e=1<<(31&a-1);if(b.length===c&&d<e)return b;if(!((d&e)===e))return g.__truncateToNBits(a,b);if(!b.sign)return g.__truncateAndSubFromPowerOfTwo(a,b,!0);if(0==(d&e-1)){for(var f=c-2;0<=f;f--)if(0!==b.__digit(f))return g.__truncateAndSubFromPowerOfTwo(a,b,!1);return b.length===c&&d===e?b:g.__truncateToNBits(a,b)}return g.__truncateAndSubFromPowerOfTwo(a,b,!1)}},{key:"asUintN",value:function(a,b){if(0===b.length)return b;if(0===a)return g.__zero();if(b.sign){if(a>g.__kMaxLengthBits)throw new RangeError("BigInt too big");return g.__truncateAndSubFromPowerOfTwo(a,b,!1)}if(a>=g.__kMaxLengthBits)return b;var c=a+31>>>5;if(b.length<c)return b;var d=31&a;if(b.length==c){if(0==d)return b;c=b.__digit(c-1);if(0==c>>>d)return b}return g.__truncateToNBits(a,b)}},{key:"ADD",value:function(a,b){if(a=g.__toPrimitive(a),b=g.__toPrimitive(b),"string"==typeof a)return"string"!=typeof b&&(b=b.toString()),a+b;if("string"==typeof b)return a.toString()+b;if(a=g.__toNumeric(a),b=g.__toNumeric(b),g.__isBigInt(a)&&g.__isBigInt(b))return g.add(a,b);if("number"==typeof a&&"number"==typeof b)return a+b;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}},{key:"LT",value:function(a,b){return g.__compare(a,b,0)}},{key:"LE",value:function(a,b){return g.__compare(a,b,1)}},{key:"GT",value:function(a,b){return g.__compare(a,b,2)}},{key:"GE",value:function(a,b){return g.__compare(a,b,3)}},{key:"EQ",value:function(b,c){for(;;){if(g.__isBigInt(b))return g.__isBigInt(c)?g.equal(b,c):g.EQ(c,b);if("number"==typeof b){if(g.__isBigInt(c))return g.__equalToNumber(c,b);if("object"!==a(c))return b==c;c=g.__toPrimitive(c)}else if("string"==typeof b){if(g.__isBigInt(c))return b=g.__fromString(b),null!==b&&g.equal(b,c);if("object"!==a(c))return b==c;c=g.__toPrimitive(c)}else if("boolean"==typeof b){if(g.__isBigInt(c))return g.__equalToNumber(c,+b);if("object"!==a(c))return b==c;c=g.__toPrimitive(c)}else if("symbol"===a(b)){if(g.__isBigInt(c))return!1;if("object"!==a(c))return b==c;c=g.__toPrimitive(c)}else if("object"===a(b)){if("object"===a(c)&&c.constructor!==g)return b==c;b=g.__toPrimitive(b)}else return b==c}}},{key:"NE",value:function(a,b){return!g.EQ(a,b)}},{key:"__zero",value:function(){return new g(0,!1)}},{key:"__oneDigit",value:function(a,b){b=new g(1,b);return b.__setDigit(0,a),b}},{key:"__decideRounding",value:function(a,b,c,d){if(0<b)return-1;if(0>b)b=-b-1;else{if(0===c)return-1;c--,d=a.__digit(c),b=31}b=1<<b;if(0==(d&b))return-1;if(b-=1,0!=(d&b))return 1;for(;0<c;)if(c--,0!==a.__digit(c))return 1;return 0}},{key:"__fromDouble",value:function(a){g.__kBitConversionDouble[0]=a;var b,c=2047&g.__kBitConversionInts[1]>>>20;c=c-1023;var d=(c>>>5)+1;a=new g(d,0>a);var e=1048575&g.__kBitConversionInts[1]|1048576,f=g.__kBitConversionInts[0],k=20;c=31&c;var n=0;if(c<k){var m=k-c;n=m+32,b=e>>>m,e=e<<32-m|f>>>m,f<<=32-m}else if(c===k)n=32,b=e,e=f;else{m=c-k;n=32-m,b=e<<m|f>>>32-m,e=f<<m}a.__setDigit(d-1,b);for(c=d-2;0<=c;c--)0<n?(n-=32,b=e,e=f):b=0,a.__setDigit(c,b);return a.__trim()}},{key:"__isWhitespace",value:function(a){return!!(13>=a&&9<=a)||(159>=a?32==a:131071>=a?160==a||5760==a:196607>=a?(a&=131071,10>=a||40==a||41==a||47==a||95==a||4096==a):65279==a)}},{key:"__fromString",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,c=0,d=a.length,e=0;if(e===d)return g.__zero();for(var f=a.charCodeAt(e);g.__isWhitespace(f);){if(++e===d)return g.__zero();f=a.charCodeAt(e)}if(43===f){if(++e===d)return null;f=a.charCodeAt(e),c=1}else if(45===f){if(++e===d)return null;f=a.charCodeAt(e),c=-1}if(0===b){if(b=10,48===f){if(++e===d)return g.__zero();if(f=a.charCodeAt(e),88===f||120===f){if(b=16,++e===d)return null;f=a.charCodeAt(e)}else if(79===f||111===f){if(b=8,++e===d)return null;f=a.charCodeAt(e)}else if(66===f||98===f){if(b=2,++e===d)return null;f=a.charCodeAt(e)}}}else if(16===b&&48===f){if(++e===d)return g.__zero();if(f=a.charCodeAt(e),88===f||120===f){if(++e===d)return null;f=a.charCodeAt(e)}}for(;48===f;){if(++e===d)return g.__zero();f=a.charCodeAt(e)}var m=d-e,i=g.__kMaxBitsPerChar[b],j=g.__kBitsPerCharTableMultiplier-1;if(m>1073741824/i)return null;var k=i*m+j>>>g.__kBitsPerCharTableShift,l=new g(k+31>>>5,!1),n=10>b?b:10,o=10<b?b-10:0;if(0==(b&b-1)){i>>=g.__kBitsPerCharTableShift;var p=[],q=[],r=!1;do{for(var s,t=0,u=0;;){if(void 0,f-48>>>0<n)s=f-48;else if((32|f)-97>>>0<o)s=(32|f)-87;else{r=!0;break}if(u+=i,t=t<<i|s,++e===d){r=!0;break}if(f=a.charCodeAt(e),32<u+i)break}p.push(t),q.push(u)}while(!r);g.__fillFromParts(l,p,q)}else{l.__initializeDigits();var v=!1,w=0;do{for(var x,y=0,z=1;;){if(void 0,f-48>>>0<n)x=f-48;else if((32|f)-97>>>0<o)x=(32|f)-87;else{v=!0;break}var A=z*b;if(4294967295<A)break;if(z=A,y=y*b+x,w++,++e===d){v=!0;break}f=a.charCodeAt(e)}j=32*g.__kBitsPerCharTableMultiplier-1;var B=i*w+j>>>g.__kBitsPerCharTableShift+5;l.__inplaceMultiplyAdd(z,y,B)}while(!v)}if(e!==d){if(!g.__isWhitespace(f))return null;for(e++;e<d;e++)if(f=a.charCodeAt(e),!g.__isWhitespace(f))return null}return 0!==c&&10!==b?null:(l.sign=-1===c,l.__trim())}},{key:"__fillFromParts",value:function(a,b,c){for(var d=0,e=0,f=0,k=b.length-1;0<=k;k--){var l=b[k],m=c[k];e|=l<<f,f+=m,32===f?(a.__setDigit(d++,e),f=0,e=0):32<f&&(a.__setDigit(d++,e),f-=32,e=l>>>m-f)}if(0!==e){if(d>=a.length)throw new Error("implementation bug");a.__setDigit(d++,e)}for(;d<a.length;d++)a.__setDigit(d,0)}},{key:"__toStringBasePowerOfTwo",value:function(a,b){var c=a.length,d=b-1;d=(85&d>>>1)+(85&d),d=(51&d>>>2)+(51&d),d=(15&d>>>4)+(15&d);d=d;b=b-1;var e=a.__digit(c-1),f=k(e);f=0|(32*c-f+d-1)/d;if(a.sign&&f++,268435456<f)throw new Error("string too long");for(var h=Array(f),f=f-1,l=0,n=0,o=0;o<c-1;o++){var p=a.__digit(o),q=(l|p<<n)&b;h[f--]=g.__kConversionChars[q];q=d-n;for(l=p>>>q,n=32-q;n>=d;)h[f--]=g.__kConversionChars[l&b],l>>>=d,n-=d}p=(l|e<<n)&b;for(h[f--]=g.__kConversionChars[p],l=e>>>d-n;0!==l;)h[f--]=g.__kConversionChars[l&b],l>>>=d;if(a.sign&&(h[f--]="-"),-1!==f)throw new Error("implementation bug");return h.join("")}},{key:"__toStringGeneric",value:function(a,b,c){var d=a.length;if(0===d)return"";if(1===d){var e=a.__unsignedDigit(0).toString(b);return!1===c&&a.sign&&(e="-"+e),e}e=32*d-k(a.__digit(d-1));d=g.__kMaxBitsPerChar[b];d=d-1;e=e*g.__kBitsPerCharTableMultiplier;e+=d-1,e=0|e/d;var f;d=e+1>>1;e=g.exponentiate(g.__oneDigit(b,!1),g.__oneDigit(d,!1));var h=e.__unsignedDigit(0);if(1===e.length&&65535>=h){f=new g(a.length,!1),f.__initializeDigits();for(var i,j=0,l=2*a.length-1;0<=l;l--)i=j<<16|a.__halfDigit(l),f.__setHalfDigit(l,0|i/h),j=0|i%h;i=j.toString(b)}else{h=g.__absoluteDivLarge(a,e,!0,!0);f=h.quotient;l=h.remainder.__trim();i=g.__toStringGeneric(l,b,!0)}f.__trim();for(j=g.__toStringGeneric(f,b,!0);i.length<d;)i="0"+i;return!1===c&&a.sign&&(j="-"+j),j+i}},{key:"__unequalSign",value:function(a){return a?-1:1}},{key:"__absoluteGreater",value:function(a){return a?-1:1}},{key:"__absoluteLess",value:function(a){return a?1:-1}},{key:"__compareToBigInt",value:function(a,b){var c=a.sign;if(c!==b.sign)return g.__unequalSign(c);a=g.__absoluteCompare(a,b);return 0<a?g.__absoluteGreater(c):0>a?g.__absoluteLess(c):0}},{key:"__compareToNumber",value:function(a,b){if(!0|b){var c=a.sign,d=0>b;if(c!==d)return g.__unequalSign(c);if(0===a.length){if(d)throw new Error("implementation bug");return 0===b?0:-1}if(1<a.length)return g.__absoluteGreater(c);d=h(b);var e=a.__unsignedDigit(0);return e>d?g.__absoluteGreater(c):e<d?g.__absoluteLess(c):0}return g.__compareToDouble(a,b)}},{key:"__compareToDouble",value:function(a,b){if(b!==b)return b;if(b===1/0)return-1;if(b===-Infinity)return 1;var c=a.sign;if(c!==0>b)return g.__unequalSign(c);if(0===b)throw new Error("implementation bug: should be handled elsewhere");if(0===a.length)return-1;g.__kBitConversionDouble[0]=b;b=2047&g.__kBitConversionInts[1]>>>20;if(2047==b)throw new Error("implementation bug: handled elsewhere");b=b-1023;if(0>b)return g.__absoluteGreater(c);var d=a.length,e=a.__digit(d-1),f=k(e),l=32*d-f;b=b+1;if(l<b)return g.__absoluteLess(c);if(l>b)return g.__absoluteGreater(c);b=1048576|1048575&g.__kBitConversionInts[1];var m=g.__kBitConversionInts[0],o=20;f=31-f;if(f!==(l-1)%31)throw new Error("implementation bug");var p;l=0;if(f<o){var q=o-f;l=q+32,p=b>>>q,b=b<<32-q|m>>>q,m<<=32-q}else if(f===o)l=32,p=b,b=m;else{q=f-o;l=32-q,p=b<<q|m>>>32-q,b=m<<q}if(e>>>=0,p>>>=0,e>p)return g.__absoluteGreater(c);if(e<p)return g.__absoluteLess(c);for(f=d-2;0<=f;f--){0<l?(l-=32,p=b>>>0,b=m,m=0):p=0;o=a.__unsignedDigit(f);if(o>p)return g.__absoluteGreater(c);if(o<p)return g.__absoluteLess(c)}if(0!==b||0!==m){if(0===l)throw new Error("implementation bug");return g.__absoluteLess(c)}return 0}},{key:"__equalToNumber",value:function(a,b){return b|0===b?0===b?0===a.length:1===a.length&&a.sign===0>b&&a.__unsignedDigit(0)===h(b):0===g.__compareToDouble(a,b)}},{key:"__comparisonResultToBool",value:function(a,b){switch(b){case 0:return 0>a;case 1:return 0>=a;case 2:return 0<a;case 3:return 0<=a}throw new Error("unreachable")}},{key:"__compare",value:function(a,b,c){if(a=g.__toPrimitive(a),b=g.__toPrimitive(b),"string"==typeof a&&"string"==typeof b)switch(c){case 0:return a<b;case 1:return a<=b;case 2:return a>b;case 3:return a>=b}if(g.__isBigInt(a)&&"string"==typeof b)return b=g.__fromString(b),null!==b&&g.__comparisonResultToBool(g.__compareToBigInt(a,b),c);if("string"==typeof a&&g.__isBigInt(b))return a=g.__fromString(a),null!==a&&g.__comparisonResultToBool(g.__compareToBigInt(a,b),c);if(a=g.__toNumeric(a),b=g.__toNumeric(b),g.__isBigInt(a)){if(g.__isBigInt(b))return g.__comparisonResultToBool(g.__compareToBigInt(a,b),c);if("number"!=typeof b)throw new Error("implementation bug");return g.__comparisonResultToBool(g.__compareToNumber(a,b),c)}if("number"!=typeof a)throw new Error("implementation bug");if(g.__isBigInt(b))return g.__comparisonResultToBool(g.__compareToNumber(b,a),2^c);if("number"!=typeof b)throw new Error("implementation bug");return 0===c?a<b:1===c?a<=b:2===c?a>b:3===c?a>=b:void 0}},{key:"__absoluteAdd",value:function(a,b,c){if(a.length<b.length)return g.__absoluteAdd(b,a,c);if(0===a.length)return a;if(0===b.length)return a.sign===c?a:g.unaryMinus(a);var d=a.length;(0===a.__clzmsd()||b.length===a.length&&0===b.__clzmsd())&&d++;for(var d=new g(d,c),c=0,e=0;e<b.length;e++){var f=b.__digit(e),h=a.__digit(e),m=(65535&h)+(65535&f)+c;h=(h>>>16)+(f>>>16)+(m>>>16);c=h>>>16,d.__setDigit(e,65535&m|h<<16)}for(;e<a.length;e++){f=a.__digit(e);m=(65535&f)+c;h=(f>>>16)+(m>>>16);c=h>>>16,d.__setDigit(e,65535&m|h<<16)}return e<d.length&&d.__setDigit(e,c),d.__trim()}},{key:"__absoluteSub",value:function(a,b,c){if(0===a.length)return a;if(0===b.length)return a.sign===c?a:g.unaryMinus(a);for(var c=new g(a.length,c),d=0,e=0;e<b.length;e++){var f=a.__digit(e),l=b.__digit(e),m=(65535&f)-(65535&l)-d;d=1&m>>>16;f=(f>>>16)-(l>>>16)-d;d=1&f>>>16,c.__setDigit(e,65535&m|f<<16)}for(;e<a.length;e++){l=a.__digit(e);m=(65535&l)-d;d=1&m>>>16;f=(l>>>16)-d;d=1&f>>>16,c.__setDigit(e,65535&m|f<<16)}return c.__trim()}},{key:"__absoluteAddOne",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=a.length;null===c?c=new g(d,b):c.sign=b;for(var e=!0,f=0;f<d;f++){var k=a.__digit(f),l=-1===k;e&&(k=0|k+1),e=l,c.__setDigit(f,k)}return e&&c.__setDigitGrow(d,1),c}},{key:"__absoluteSubOne",value:function(a,b){var c=a.length;b=b||c;for(var d=new g(b,!1),e=!0,f=0;f<c;f++){var k=a.__digit(f),l=0===k;e&&(k=0|k-1),e=l,d.__setDigit(f,k)}for(l=c;l<b;l++)d.__setDigit(l,0);return d}},{key:"__absoluteAnd",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=a.length,e=b.length,f=e;if(d<e){f=d;var m=a,n=d;a=b,e,b=m,n}var k=f;null===c?c=new g(k,!1):k=c.length;for(var l=0;l<f;l++)c.__setDigit(l,a.__digit(l)&b.__digit(l));for(;l<k;l++)c.__setDigit(l,0);return c}},{key:"__absoluteAndNot",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=a.length,e=b.length,f=e;d<e&&(f=d);var k=d;null===c?c=new g(k,!1):k=c.length;for(var l=0;l<f;l++)c.__setDigit(l,a.__digit(l)&~b.__digit(l));for(;l<d;l++)c.__setDigit(l,a.__digit(l));for(;l<k;l++)c.__setDigit(l,0);return c}},{key:"__absoluteOr",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=a.length,e=b.length,f=e;if(d<e){f=d;var m=a,n=d;a=b,d=e,b=m,n}var k=d;null===c?c=new g(k,!1):k=c.length;for(var l=0;l<f;l++)c.__setDigit(l,a.__digit(l)|b.__digit(l));for(;l<d;l++)c.__setDigit(l,a.__digit(l));for(;l<k;l++)c.__setDigit(l,0);return c}},{key:"__absoluteXor",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=a.length,e=b.length,f=e;if(d<e){f=d;var m=a,n=d;a=b,d=e,b=m,n}var k=d;null===c?c=new g(k,!1):k=c.length;for(var l=0;l<f;l++)c.__setDigit(l,a.__digit(l)^b.__digit(l));for(;l<d;l++)c.__setDigit(l,a.__digit(l));for(;l<k;l++)c.__setDigit(l,0);return c}},{key:"__absoluteCompare",value:function(a,b){var c=a.length-b.length;if(0!=c)return c;for(c=a.length-1;0<=c&&a.__digit(c)===b.__digit(c);)c--;return 0>c?0:a.__unsignedDigit(c)>b.__unsignedDigit(c)?1:-1}},{key:"__multiplyAccumulate",value:function(a,b,c,d){if(0!==b){for(var e=65535&b,b=b>>>16,f=0,g=0,k=0,l=0;l<a.length;l++,d++){var m=c.__digit(d),n=65535&m,o=m>>>16,p=a.__digit(l),q=65535&p;p=p>>>16;var r=j(q,e);q=j(q,b);var s=j(p,e);p=j(p,b);n+=g+(65535&r),o+=k+f+(n>>>16)+(r>>>16)+(65535&q)+(65535&s),f=o>>>16,g=(q>>>16)+(s>>>16)+(65535&p)+f,f=g>>>16,g&=65535,k=p>>>16,m=65535&n|o<<16,c.__setDigit(d,m)}for(;0!==f||0!==g||0!==k;d++){r=c.__digit(d);q=(65535&r)+g;s=(r>>>16)+(q>>>16)+k+f;g=0,k=0,f=s>>>16,r=65535&q|s<<16,c.__setDigit(d,r)}}}},{key:"__internalMultiplyAdd",value:function(a,b,c,d,e){for(var c=c,f=0,h=0;h<d;h++){var l=a.__digit(h),m=j(65535&l,b),n=(65535&m)+f+c;c=n>>>16;l=j(l>>>16,b);m=(65535&l)+(m>>>16)+c;c=m>>>16,f=l>>>16,e.__setDigit(h,m<<16|65535&n)}if(e.length>d)for(e.__setDigit(d++,c+f);d<e.length;)e.__setDigit(d++,0);else if(0!==c+f)throw new Error("implementation bug")}},{key:"__absoluteDivSmall",value:function(a,b,c){null===c&&(c=new g(a.length,!1));for(var d=0,e=2*a.length-1;0<=e;e-=2){var f=(d<<16|a.__halfDigit(e))>>>0,k=0|f/b;d=0|f%b,f=(d<<16|a.__halfDigit(e-1))>>>0;var l=0|f/b;d=0|f%b,c.__setDigit(e>>>1,k<<16|l)}return c}},{key:"__absoluteModSmall",value:function(a,b){for(var c,d=0,e=2*a.length-1;0<=e;e--)c=(d<<16|a.__halfDigit(e))>>>0,d=0|c%b;return d}},{key:"__absoluteDivLarge",value:function(a,b,c,d){var f=b.__halfDigitLength(),e=b.length,n=a.__halfDigitLength()-f,i=null;c&&(i=new g(n+2>>>1,!1),i.__initializeDigits());var l=new g(f+2>>>1,!1);l.__initializeDigits();var m=g.__clz16(b.__halfDigit(f-1));0<m&&(b=g.__specialLeftShift(b,m,0));for(var a=g.__specialLeftShift(a,m,1),k=b.__halfDigit(f-1),o=0,n=n;0<=n;n--){var p=65535,q=a.__halfDigit(n+f);if(q!==k){q=(q<<16|a.__halfDigit(n+f-1))>>>0;p=0|q/k;for(var q=0|q%k,r=b.__halfDigit(f-2),s=a.__halfDigit(n+f-2);j(p,r)>>>0>(q<<16|s)>>>0&&(p--,q+=k,!(65535<q)););}g.__internalMultiplyAdd(b,p,0,e,l);r=a.__inplaceSub(l,n,f+1);0!==r&&(r=a.__inplaceAdd(b,n,f),a.__setHalfDigit(n+f,a.__halfDigit(n+f)+r),p--),c&&(1&n?o=p<<16:i.__setDigit(n>>>1,o|p))}return d?(a.__inplaceRightShift(m),c?{quotient:i,remainder:a}:a):c?i:void 0}},{key:"__clz16",value:function(a){return k(a)-16}},{key:"__specialLeftShift",value:function(a,b,c){var e=a.length,d=new g(e+c,!1);if(0===b){for(var f=0;f<e;f++)d.__setDigit(f,a.__digit(f));return 0<c&&d.__setDigit(e,0),d}for(var j,f=0,l=0;l<e;l++)j=a.__digit(l),d.__setDigit(l,j<<b|f),f=j>>>32-b;return 0<c&&d.__setDigit(e,f),d}},{key:"__leftShiftByAbsolute",value:function(a,b){b=g.__toShiftAmount(b);if(0>b)throw new RangeError("BigInt too big");var c=b>>>5;b=31&b;var d=a.length,e=0!==b&&0!=a.__digit(d-1)>>>32-b,f=d+c+(e?1:0),m=new g(f,a.sign);if(0===b){for(var n=0;n<c;n++)m.__setDigit(n,0);for(;n<f;n++)m.__setDigit(n,a.__digit(n-c))}else{for(n=0,f=0;f<c;f++)m.__setDigit(f,0);for(var o,f=0;f<d;f++)o=a.__digit(f),m.__setDigit(f+c,o<<b|n),n=o>>>32-b;if(e)m.__setDigit(d+c,n);else if(0!==n)throw new Error("implementation bug")}return m.__trim()}},{key:"__rightShiftByAbsolute",value:function(a,b){var c=a.length,d=a.sign;b=g.__toShiftAmount(b);if(0>b)return g.__rightShiftByMaximum(d);var e=b>>>5;b=31&b;var f=c-e;if(0>=f)return g.__rightShiftByMaximum(d);var i=!1;if(d)if(0!=(a.__digit(e)&(1<<b)-1))i=!0;else for(var m=0;m<e;m++)if(0!==a.__digit(m)){i=!0;break}if(i&&0===b){m=a.__digit(c-1);0==~m&&f++}m=new g(f,d);if(0===b)for(f=e;f<c;f++)m.__setDigit(f-e,a.__digit(f));else{for(var n,d=a.__digit(e)>>>b,f=c-e-1,c=0;c<f;c++)n=a.__digit(c+e+1),m.__setDigit(c,n<<32-b|d),d=n>>>b;m.__setDigit(f,d)}return i&&(m=g.__absoluteAddOne(m,!0,m)),m.__trim()}},{key:"__rightShiftByMaximum",value:function(a){return a?g.__oneDigit(1,!0):g.__zero()}},{key:"__toShiftAmount",value:function(a){if(1<a.length)return-1;a=a.__unsignedDigit(0);return a>g.__kMaxLengthBits?-1:a}},{key:"__toPrimitive",value:function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default";if("object"!==a(b))return b;if(b.constructor===g)return b;var d=b[Symbol.toPrimitive];if(d){var e=d(c);if("object"!==a(e))return e;throw new TypeError("Cannot convert object to primitive value")}var f=b.valueOf;if(f){var k=f.call(b);if("object"!==a(k))return k}var l=b.toString;if(l){var m=l.call(b);if("object"!==a(m))return m}throw new TypeError("Cannot convert object to primitive value")}},{key:"__toNumeric",value:function(a){return g.__isBigInt(a)?a:+a}},{key:"__isBigInt",value:function(b){return"object"===a(b)&&b.constructor===g}},{key:"__truncateToNBits",value:function(a,b){for(var c=a+31>>>5,d=new g(c,b.sign),c=c-1,e=0;e<c;e++)d.__setDigit(e,b.__digit(e));e=b.__digit(c);if(0!=(31&a)){b=32-(31&a);e=e<<b>>>b}return d.__setDigit(c,e),d.__trim()}},{key:"__truncateAndSubFromPowerOfTwo",value:function(a,b,c){for(var d=Math.min,e=a+31>>>5,c=new g(e,c),f=0,e=e-1,h=0,d=d(e,b.length);f<d;f++){var j=b.__digit(f),l=0-(65535&j)-h;h=1&l>>>16;j=0-(j>>>16)-h;h=1&j>>>16,c.__setDigit(f,65535&l|j<<16)}for(;f<e;f++)c.__setDigit(f,0|-h);l=e<b.length?b.__digit(e):0;j=31&a;if(0===j){d=0-(65535&l)-h;h=1&d>>>16;f=0-(l>>>16)-h;b=65535&d|f<<16}else{a=32-j;l=l<<a>>>a;d=1<<32-a;f=(65535&d)-(65535&l)-h;h=1&f>>>16;j=(d>>>16)-(l>>>16)-h;b=65535&f|j<<16,b&=d-1}return c.__setDigit(e,b),c.__trim()}},{key:"__digitPow",value:function(a,b){for(var c=1;0<b;)1&b&&(c*=a),b>>>=1,a*=a;return c}}]),g}(k(Array));return n.__kMaxLength=33554432,n.__kMaxLengthBits=n.__kMaxLength<<5,n.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],n.__kBitsPerCharTableShift=5,n.__kBitsPerCharTableMultiplier=1<<n.__kBitsPerCharTableShift,n.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.__kBitConversionBuffer=new ArrayBuffer(8),n.__kBitConversionDouble=new Float64Array(n.__kBitConversionBuffer),n.__kBitConversionInts=new Int32Array(n.__kBitConversionBuffer),n})}),null);
__d("TCompactProtocolPolyfill",["StringToUtf8","ThriftTypes","Utf8ToString","jsbi"],(function(a,b,c,d,e,f,g){var h,i=Object.freeze({CT_STOP:0,CT_BOOLEAN_TRUE:1,CT_BOOLEAN_FALSE:2,CT_BYTE:3,CT_I16:4,CT_I32:5,CT_I64:6,CT_DOUBLE:7,CT_BINARY:8,CT_LIST:9,CT_SET:10,CT_MAP:11,CT_STRUCT:12,CT_FLOAT:13}),j=Object.freeze({NONE:-1,CT_BOOLEAN_TRUE:i.CT_BOOLEAN_TRUE,CT_BOOLEAN_FALSE:i.CT_BOOLEAN_FALSE}),k=[i.CT_STOP,0,i.CT_BOOLEAN_TRUE,i.CT_BYTE,i.CT_DOUBLE,0,i.CT_I16,0,i.CT_I32,0,i.CT_I64,i.CT_BINARY,i.CT_STRUCT,i.CT_MAP,i.CT_SET,i.CT_LIST,0,0,0,i.CT_FLOAT],l=Math.pow(2,7)-1,m=-1*Math.pow(2,7),n=Math.pow(2,15)-1,o=-1*Math.pow(2,15),p=Math.pow(2,31)-1,q=-1*Math.pow(2,31),r=Math.pow(2,32)-1,s=(a=c("jsbi")).BigInt("9223372036854775807"),t=a.BigInt("-9223372036854775808"),u=a.BigInt("18446744073709551615"),v=a.BigInt(63),w=a.BigInt(1),x=a.BigInt(0),y=a.BigInt(7),z=a.BigInt(70),A=a.BigInt(127),B=a.BigInt(128),C=Math.pow(2,4);b=function(){function a(a){this.$4=null,this.$5=null,this.$1=a,this.$2=[],this.$3=0,this.$6=new DataView(new ArrayBuffer(1))}var b=a.prototype;b.readStructBegin=function(){this.$2.push(this.$3),this.$3=0};b.readStructEnd=function(){this.$3=this.$2.pop();return 0};b.writeStructBegin=function(a){this.$2.push(this.$3);this.$3=0;return 0};b.writeStructEnd=function(){this.$3=this.$2.pop();return 0};b.writeFieldBegin=function(a){if(a.ftype===(h||(h=c("ThriftTypes"))).BOOL){this.$4={fid:a.fid,fname:a.fname,ftype:a.ftype};return 0}else return this.$7(a,j.NONE)};b.writeListBegin=function(a){return this.$8(a)};b.writeListEnd=function(){return 0};b.writeSetBegin=function(a){return this.$8(a)};b.writeSetEnd=function(){return 0};b.writeMapBegin=function(a){var b=0;if(a.size===0)b+=this.$1.writeByte(0);else{b+=this.writeVarint32(a.size);if(a.ktype!=null&&a.vtype!=null)b+=this.$1.writeByte(this.$9(a.ktype)<<4|this.$9(a.vtype));else throw new Error("received invalid map info: "+JSON.stringify(a))}return b};b.writeMapEnd=function(){return 0};b.$7=function(a,b){var c=0;b=b===j.NONE?this.$9(a.ftype):b;a.fid>this.$3&&a.fid-this.$3<=C-1?c+=this.$1.writeByte(a.fid-this.$3<<4|b):(c+=this.$1.writeByte(b),c+=this.writeI16(a.fid));this.$3=a.fid;return c};b.$8=function(a){var b=0,c=this.$9(a.etype);a.size<=C-2?b+=this.$1.writeByte(a.size<<4|c):(b+=this.$1.writeByte(240|c),b+=this.writeVarint32(a.size));return b};b.readFieldBegin=function(){var a=this.$1.readByte(),b=a&15;if(b===(h||(h=c("ThriftTypes"))).STOP)return{ftype:(h||(h=c("ThriftTypes"))).STOP,fid:0};a=(a&240)>>>4;var d;a===0?d=this.readI16():d=this.$3+a;a=this.$10(b);(b===i.CT_BOOLEAN_TRUE||b===i.CT_BOOLEAN_FALSE)&&(this.$5=b===i.CT_BOOLEAN_TRUE);this.$3=d;return{ftype:a,fid:d}};b.readListBegin=function(){return this.$11()};b.readListEnd=function(){return 0};b.readSetBegin=function(){return this.$11()};b.readSetEnd=function(){return 0};b.readMapBegin=function(){var a=this.readVarint32();if(a>0){var b=this.$1.readByte(),c=this.$12(b>>4,"readMapBegin:key");b=this.$12(b&15,"readMapBegin:value");return{ktype:this.$10(c),vtype:this.$10(b),size:a}}return{size:a}};b.readMapEnd=function(){return 0};b.$12=function(a,b){if(a<0||a>13)throw new Error(b+" read invalid compact type: "+a);return a};b.$11=function(){var a=this.$1.readByte(),b=this.$12(a&15,"_readListOrSetBegin");b=this.$10(b);a=a>>4&15;a===15&&(a=this.readVarint32());return{etype:b,size:a}};b.readFieldEnd=function(){return 0};b.readByte=function(){this.$6.setUint8(0,this.$1.readByte());return this.$6.getInt8(0)};b.writeByte=function(a){if(a<m||a>l)throw new Error("byte to write is out of range: "+a);this.$6.setInt8(0,a);return this.$1.writeByte(this.$6.getUint8(0))};b.readFloat=function(){return this.$1.readFloatBE()};b.writeFloat=function(a){return this.$1.writeFloatBE(a)};b.readDouble=function(){return this.$1.readDoubleBE()};b.writeDouble=function(a){return this.$1.writeDoubleBE(a)};b.writeString=function(a){return this.writeBinary(d("StringToUtf8").StringToUtf8(a))};b.skip=function(a){switch(a){case(h||(h=c("ThriftTypes"))).STOP:return;case(h||(h=c("ThriftTypes"))).BOOL:this.readBool();break;case(h||(h=c("ThriftTypes"))).BYTE:this.readByte();break;case(h||(h=c("ThriftTypes"))).DOUBLE:this.readDouble();break;case(h||(h=c("ThriftTypes"))).I16:this.readI16();break;case(h||(h=c("ThriftTypes"))).I32:this.readI32();break;case(h||(h=c("ThriftTypes"))).I64:this.readI64();break;case(h||(h=c("ThriftTypes"))).STRING:this.readString();break;case(h||(h=c("ThriftTypes"))).STRUCT:this.readStructBegin();var b;while(!0){b=this.readFieldBegin();if(b.ftype===(h||(h=c("ThriftTypes"))).STOP)break;this.skip(b.ftype)}this.readStructEnd();break;case(h||(h=c("ThriftTypes"))).MAP:b=this.readMapBegin();if(b.size>0&&b.ktype!=null&&b.vtype!=null){var d=b.ktype,e=b.vtype;for(var f=0;f<b.size;f++)this.skip(d),this.skip(e)}break;case(h||(h=c("ThriftTypes"))).SET:case(h||(h=c("ThriftTypes"))).LIST:f=this.$11();for(d=0;d<f.size;d++)this.skip(f.etype);break;case(h||(h=c("ThriftTypes"))).FLOAT:this.readFloat();break;default:throw new Error("encoutered unknow thrift type: "+a+" in skip")}};b.toByteArray=function(){return this.$1.toByteArray()};b.writeFieldEnd=function(){return 0};b.writeFieldStop=function(){return this.$1.writeByte((h||(h=c("ThriftTypes"))).STOP)};b.writeI16=function(a){if(a<o||a>n)throw new Error("trying to write i16 out of range: "+a);return this.writeVarint32(this.i32ToZigzag(a))};b.readI16=function(){var a=this.zigzagToI32(this.readVarint32());if(a<o||a>n)throw new Error("read invalid i16: "+a);return a};b.writeI32=function(a){if(a<q||a>p)throw new Error("i32 out of range: "+a);return this.writeVarint32(this.i32ToZigzag(a))};b.readI32=function(){return this.zigzagToI32(this.readVarint32())};b.writeI64=function(a){return this.writeVarint64(this.i64ToZigzag(a))};b.readI64=function(){return this.zigzagToI64(this.readVarint64())};b.readBool=function(){var a;this.$5!=null?(a=this.$5,this.$5=null):a=this.$1.readByte()===i.CT_BOOLEAN_TRUE;return a};b.writeBool=function(a){var b=0;this.$4!=null?(b+=this.$7(this.$4,a?j.CT_BOOLEAN_TRUE:j.CT_BOOLEAN_FALSE),this.$4=null):b+=this.$1.writeByte(a?i.CT_BOOLEAN_TRUE:i.CT_BOOLEAN_FALSE);return b};b.readBinary=function(){var a=this.readVarint32();return a===0?new Uint8Array(0):this.$1.readBytes(a)};b.writeBinary=function(a){var b=0;b+=this.writeVarint32(a.length);b+=this.$1.write(a);return b};b.i32ToZigzag=function(a){if(a<q||a>p)throw new Error("number: "+a+" is out of range of i32");return(a<<1^(a<0?4294967295:0))>>>0};b.zigzagToI32=function(a){if(a<0||a>r)throw new Error("number: "+a+" is out of range of uint32");return a>>>1^-1*(a&1)};b.i64ToZigzag=function(a){if(c("jsbi").greaterThan(a,s)||c("jsbi").lessThan(a,t))throw new Error("i64 out of range: "+a.toString());return c("jsbi").bitwiseXor(c("jsbi").signedRightShift(a,v),c("jsbi").leftShift(a,w))};b.zigzagToI64=function(a){if(c("jsbi").lessThan(a,0)||c("jsbi").greaterThan(a,u))throw new Error("invalid uint64: "+a.toString());return c("jsbi").equal(c("jsbi").bitwiseAnd(a,w),w)?c("jsbi").bitwiseNot(c("jsbi").signedRightShift(a,w)):c("jsbi").signedRightShift(a,w)};b.writeVarint32=function(a){if(a<0||a>r)throw new Error("writeVarint32 received out of range uint32: "+a);a=a;var b=0;while(!0)if(a>>>7===0){this.$1.writeByte(a);b++;break}else this.$1.writeByte(a&127|128),b++,a>>>=7;return b};b.readVarint32=function(){var a=0,b=0,c;while(!0){c=this.$1.readByte();a=(a|(c&127)<<b)>>>0;b+=7;if((c&128)==0){if(b===35&&(c&240)!=0)throw new Error("result exceeded 32 bit limit");break}if(b>28)throw new Error("result exceeded 32 bit limit")}return a};b.writeVarint64=function(a){if(c("jsbi").lessThan(a,x)||c("jsbi").greaterThan(a,u))throw new Error("invalid uint64: "+a.toString());a=a;var b=0;while(!0)if(c("jsbi").equal(c("jsbi").signedRightShift(a,y),x)){this.$1.writeByte(c("jsbi").toNumber(a));b++;break}else{var d,e=(d=c("jsbi")).toNumber(d.bitwiseOr(d.bitwiseAnd(a,A),B));this.$1.writeByte(e);b++;a=d.signedRightShift(a,y)}return b};b.readVarint64=function(){var a=x,b=x,d;while(!0){var e;d=(e=c("jsbi")).BigInt(this.$1.readByte());a=e.bitwiseOr(a,e.leftShift(e.bitwiseAnd(d,A),b));b=e.add(b,y);if(c("jsbi").equal(c("jsbi").bitwiseAnd(d,B),x)){if(c("jsbi").equal(b,z)&&c("jsbi").notEqual(d,w))throw new Error("result exceeded 64 bit limit");break}if(c("jsbi").greaterThan(b,v))throw new Error("result exceeded 64 bit limit")}return a};b.readString=function(){return d("Utf8ToString").Utf8ToString(this.readBinary())};b.getLastFieldId=function(){return this.$3};b.getLastField=function(){return this.$2};b.getBooleanFieldInfo=function(){return this.$4};b.getBooleanValue=function(){return this.$5};b.$9=function(a){return k[a]};b.$10=function(a){switch(a){case i.CT_STOP:return(h||(h=c("ThriftTypes"))).STOP;case i.CT_BOOLEAN_FALSE:case i.CT_BOOLEAN_TRUE:return(h||(h=c("ThriftTypes"))).BOOL;case i.CT_BYTE:return(h||(h=c("ThriftTypes"))).BYTE;case i.CT_I16:return(h||(h=c("ThriftTypes"))).I16;case i.CT_I32:return(h||(h=c("ThriftTypes"))).I32;case i.CT_I64:return(h||(h=c("ThriftTypes"))).I64;case i.CT_DOUBLE:return(h||(h=c("ThriftTypes"))).DOUBLE;case i.CT_FLOAT:return(h||(h=c("ThriftTypes"))).FLOAT;case i.CT_BINARY:return(h||(h=c("ThriftTypes"))).STRING;case i.CT_LIST:return(h||(h=c("ThriftTypes"))).LIST;case i.CT_SET:return(h||(h=c("ThriftTypes"))).SET;case i.CT_MAP:return(h||(h=c("ThriftTypes"))).MAP;case i.CT_STRUCT:return(h||(h=c("ThriftTypes"))).STRUCT;default:throw new Error("don't know what type")}};return a}();g["default"]=b}),98);
__d("TNoOpWriteBuffer",[],(function(a,b,c,d,e,f){a=function(){function a(){this.$1=0}var b=a.prototype;b.write=function(a){this.$1+=a.length;return a.length};b.writeByte=function(a){this.$1++;return 1};b.writeFloatBE=function(a){this.$1+=Float32Array.BYTES_PER_ELEMENT;return Float32Array.BYTES_PER_ELEMENT};b.writeDoubleBE=function(a){this.$1+=Float64Array.BYTES_PER_ELEMENT;return Float64Array.BYTES_PER_ELEMENT};b.toByteArray=function(){throw new Error("operation not supported")};b.currentSize=function(){return this.$1};b.readByte=function(){throw new Error("operation not supported")};b.readBytes=function(a){throw new Error("operation not supported")};b.readFloatBE=function(){throw new Error("operation not supported")};b.readDoubleBE=function(){throw new Error("operation not supported")};return a}();f["default"]=a}),66);
__d("TReadBuffer",[],(function(a,b,c,d,e,f){a=function(){function a(a){this.$1=a,this.$2=0}var b=a.prototype;b.readByte=function(){if(this.$2<this.$1.length)return this.$1[this.$2++];throw new Error("no available byte to read")};b.readBytes=function(a){if(a<0)throw new Error("cannot readBytes of negative length: "+a);if(a+this.$2>this.$1.length)throw new Error("not enough bytes to read");var b=new Uint8Array(this.$1.buffer,this.$3(),a);this.$2+=a;return b};b.readFloatBE=function(){if(Float32Array.BYTES_PER_ELEMENT+this.$2>this.$1.length)throw new Error("not enough bytes to read");var a=new DataView(this.$1.buffer).getFloat32(this.$3());this.$2+=Float32Array.BYTES_PER_ELEMENT;return a};b.readDoubleBE=function(){if(Float64Array.BYTES_PER_ELEMENT+this.$2>this.$1.length)throw new Error("not enough bytes to read");var a=new DataView(this.$1.buffer).getFloat64(this.$3());this.$2+=Float64Array.BYTES_PER_ELEMENT;return a};b.$3=function(){return this.$2+this.$1.byteOffset};b.getCurrentCursor=function(){return this.$2};b.writeByte=function(a){throw new Error("operation not supported")};b.write=function(a){throw new Error("operation not supported")};b.toByteArray=function(){throw new Error("operation not supported")};b.writeFloatBE=function(a){throw new Error("operation not supported")};b.writeDoubleBE=function(a){throw new Error("operation not supported")};return a}();f["default"]=a}),66);
__d("CompactSerializerPolyfill",["TCompactProtocolPolyfill","TNoOpWriteBuffer","TReadBuffer","TWriteBuffer"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){a=new(c("TReadBuffer"))(a);a=new(c("TCompactProtocolPolyfill"))(a);return b(a)}function a(a,b,c){try{return h(a,b)}catch(a){c!=null&&c(a)}return null}function i(a,b,d){d===void 0&&(d=!1);if(d){d=new(c("TNoOpWriteBuffer"))();var e=new(c("TCompactProtocolPolyfill"))(d);b(a,e);e=new(c("TWriteBuffer"))(d.currentSize())}else e=new(c("TWriteBuffer"))();d=new(c("TCompactProtocolPolyfill"))(e);b(a,d);return d.toByteArray()}function b(a,b,c,d){c===void 0&&(c=!1);try{return i(a,b,c)}catch(a){d!=null&&d(a)}return null}g.deserialize=h;g.deserializeNoThrow=a;g.serialize=i;g.serializeNoThrow=b}),98);
__d("CrossWindowEventEmitter",["CacheStorage","EventEmitter","cr:8958"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(d,a);function d(d){var e;e=a.call(this)||this;e.$CrossWindowEventEmitter$p_2=d;e.$CrossWindowEventEmitter$p_1=new(c("CacheStorage"))("localstorage",d+":");e.$CrossWindowEventEmitter$p_1.addValueChangeCallback(function(c,d,f){d=c.split(":")[1];try{c=b("cr:8958").parse(f)}catch(a){c=void 0}if(c&&c.__v){(f=a.prototype.emit).call.apply(f,[babelHelpers.assertThisInitialized(e),d].concat(c.__v))}});return e}var e=d.prototype;e.emit=function(b){var c;for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];this.emitRemote.apply(this,[b].concat(e));(c=a.prototype.emit).call.apply(c,[this,b].concat(e))};e.emitRemote=function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];this.$CrossWindowEventEmitter$p_1.set(a,c)};return d}(c("EventEmitter"));g["default"]=a}),98);
__d("EventListenerImplForCacheStorage",["CometEventListener"],(function(a,b,c,d,e,f){"use strict";f["default"]=b("CometEventListener")}),66);
__d("IrisSubscribeCheckerUtils",[],(function(a,b,c,d,e,f){"use strict";function a(){if(typeof window!=="undefined"){var a;a=(a=window.location)==null?void 0:a.hostname;if(a==="m.facebook.com"||a==="mobile.facebook.com"||a==="mtouch.facebook.com")return!1}return!0}f.getIrisSubscribeCheckerInitialRunningState=a}),66);
__d("MqttEnvWebSocket",[],(function(a,b,c,d,e,f){"use strict";function a(a){return new WebSocket(a)}f.createWebSocket=a}),66);
__d("MqttEnv",["MqttEnvWebSocket","clearTimeout","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";b=Object.freeze({mqtt_waterfall_log_client_sampling:1,mqtt_ws_polling_enabled:3,mqtt_lp_use_fetch:9,mqtt_fast_lp:11,mqtt_lp_no_delay:12,mqtt_enable_publish_over_polling:13,mqttweb_global_connection_counter:15});e=function(){var a=b.prototype;a.random=function(){return this.$1!=null?this.$1():Math.random()};a.isUserLoggedInNow=function(){return this.$2!=null?this.$2():!0};a.setIsUserLoggedInNow=function(a){this.$2=a};a.clearTimeout=function(a){if(this.$3!=null){this.$3(a);return}c("clearTimeout")(a)};a.setTimeout=function(a,b){for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];return this.$4!=null?this.$4.apply(null,arguments):c("setTimeout").apply(null,arguments)};a.getLoggerInstance=function(){return this.$5!=null?this.$5():h.getInstance()};a.genGk=function(a){return this.$6!=null?this.$6(a):!1};a.createSocket=function(a,b){return this.$7!=null?this.$7(a,b):d("MqttEnvWebSocket").createWebSocket(a)};a.scheduleCallback=function(a){return this.$8!=null?this.$8(a):a()};a.scheduleLoggingCallback=function(a){return this.$9!=null?this.$9(a):a()};a.configRead=function(a,b){return this.$10!=null?this.$10(a,b):b};a.configWrite=function(a,b){this.$11!=null&&this.$11(a,b)};function b(){this.$1=null,this.$2=null,this.$3=null,this.$4=null,this.$5=null,this.$6=null,this.$7=null,this.$8=null,this.$9=null,this.$10=null,this.$11=null}a.initialize=function(a,b,c,d,e,f,g,h,i,j,k){this.$1=a,this.$2=b,this.$3=c,this.$4=d,this.$5=e,this.$6=f,this.$7=g,this.$8=h,this.$9=i,this.$10=j,this.$11=k};return b}();var h=function(){function a(){}a.getInstance=function(){return new a()};var b=a.prototype;b.setAppId=function(a){};b.eventLogConnect=function(a){};b.eventLogPull=function(a){};b.eventLogPullFinish=function(a){};b.eventLogDisconnect=function(a){};b.eventLogOutgoingPublish=function(a){};b.eventLogIncomingPublish=function(a){};b.eventLogPublishTimeout=function(a){};b.eventLogMiscellaneousError=function(a){};b.logIfLoggedOut=function(){};b.logError=function(a){};b.logErrorWarn=function(a){};b.logWarn=function(a){};b.debugTrace=function(a){};b.bumpCounter=function(a){};b.getBrowserConnectivity=function(){return!0};return a}(),i=new e();function a(a){i.setIsUserLoggedInNow(a)}g.MqttGkNames=b;g.Env=i;g.setIsUserLoggedInNow=a}),98);
__d("IrisSubscribeChecker",["IrisSubscribeCheckerUtils","MqttEnv"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$1=d("MqttEnv").Env.getLoggerInstance(),this.$2=null,this.$3=!1,this.$4=!1,this.$5=!1,this.$6=d("IrisSubscribeCheckerUtils").getIrisSubscribeCheckerInitialRunningState(),this.$7=0,this.$8=a}var b=a.prototype;b.start=function(){this.$6=!0};b.stop=function(){this.$6=!1,this.$9()};b.onConnectAttempt=function(){};b.onConnectFailure=function(){this.$9()};b.onConnected=function(){var a=this;this.$7++;this.$9();this.$3=!1;this.$4=!1;this.$5=!1;this.$6&&(this.$2=d("MqttEnv").Env.setTimeout(function(){a.$10()},8e3))};b.onConnectSuccess=function(){};b.onConnectionLost=function(){this.$9()};b.onConnectionDisconnect=function(){};b.onSubscribe=function(a){a==="/t_ms"&&(this.$3=!0)};b.onUnsubscribe=function(a){};b.onPublish=function(a){(a==="/messenger_sync_get_diffs"||a==="/messenger_sync_create_queue")&&(this.$4=!0,this.$3&&(this.$5=!0,this.$9()))};b.onMessage=function(a){};b.onWSFatal=function(){};b.$9=function(){this.$2&&(d("MqttEnv").Env.clearTimeout(this.$2),this.$2=null)};b.$10=function(){if(this.$4===!1){var a=this.$7==1?"no_iris_session_initialConnect":"no_iris_session";this.$1.bumpCounter(a);this.$8()?this.$1.bumpCounter(a+".withProvider"):this.$1.bumpCounter(a+".withoutProvider");this.$3===!0?this.$1.bumpCounter(a+".withTopicSubscribe"):this.$1.bumpCounter(a+".withoutTopicSubscribe")}this.$3===!1&&this.$1.bumpCounter("no_iris_topic_subscribe");this.$3===!0&&this.$4===!0&&this.$5===!1&&this.$1.bumpCounter("session_before_topic_subscribe")};return a}();g["default"]=a}),98);
__d("MqttGlobalStreamCounter",["CrossWindowEventEmitter","MqttEnv","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){var a=this;this.isTabClosed=!1;this.otherTabs=new Map();this.thisTab={totalConnectionStreams:0};this.broadcastChannel=new(c("CrossWindowEventEmitter"))("MqttGlobalStreamCounter");this.broadcastChannel.addListener("count-updated",function(b){b=JSON.parse(String(b));var c=!1;a.otherTabs.has(b.key)||(c=!0);b.event==="DELETE"?a.otherTabs["delete"](b.key):b.event==="UPDATE"&&b.value!=null&&(a.otherTabs.set(b.key,b.value),c&&a.$1())});this.tabID=c("uuidv4")()}var b=a.prototype;b.streamRequested=function(){this.thisTab.totalConnectionStreams++,this.$1()};b.streamClosed=function(){this.thisTab.totalConnectionStreams>0&&(this.thisTab.totalConnectionStreams--,this.$1())};b.tabClosed=function(){if(this.isTabClosed)return;this.isTabClosed=!0;var a={key:this.tabID,event:"DELETE"};this.broadcastChannel.emitRemote("count-updated",JSON.stringify(a))};b.getGlobalState=function(){var a={totalConnectionStreams:this.thisTab.totalConnectionStreams};this.otherTabs.forEach(function(b){a.totalConnectionStreams+=b.totalConnectionStreams});return a};b.$1=function(){var a={key:this.tabID,event:"UPDATE",value:this.thisTab};this.broadcastChannel.emitRemote("count-updated",JSON.stringify(a))};b.isEnabled=function(){return!0};return a}();var h=d("MqttEnv").Env.genGk(d("MqttEnv").MqttGkNames.mqttweb_global_connection_counter)?new a():{streamRequested:function(){},streamClosed:function(){},tabClosed:function(){},getGlobalState:function(){return{totalConnectionStreams:-1}},isEnabled:function(){return!1}};b=function(){return h};g.getInstance=b}),98);
__d("MqttAnalyticsHook",["MqttEnv","MqttGlobalStreamCounter"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=d("MqttEnv").Env.getLoggerInstance(),this.$2=d("MqttGlobalStreamCounter").getInstance(),this.$3=0,this.$4=0,this.$5=0,this.$6=0,this.$1.bumpCounter("session_start"),d("MqttEnv").Env.isUserLoggedInNow()||this.$1.bumpCounter("session_start.logout")}var b=a.prototype;b.onConnectAttempt=function(){this.$1.bumpCounter("ws_connect_attempt"),this.$2.streamRequested()};b.onConnectFailure=function(){this.$4++,this.$1.bumpCounter("ws_connect_failure"),this.$1.debugTrace("connect","Connect failed existing streams count "+this.$2.getGlobalState().totalConnectionStreams),this.$2.streamClosed()};b.onConnected=function(){this.$1.bumpCounter("ws_connect_connected")};b.onConnectSuccess=function(){this.$3===0&&this.$1.bumpCounter("ws_connect_first_success"),this.$3++,this.$1.bumpCounter("ws_connect_success")};b.onConnectionLost=function(){this.$1.bumpCounter("ws_disconnect")};b.onConnectionDisconnect=function(){this.$2.streamClosed()};b.onSubscribe=function(a){};b.onUnsubscribe=function(a){};b.onPublish=function(a){this.$1.bumpCounter("ws_publish."+a)};b.onMessage=function(a){this.$1.bumpCounter("message_arrived."+a)};b.onWSFatal=function(){this.$1.bumpCounter("ws_fatal")};b.onPollRequestSent=function(){this.$1.bumpCounter("polling_request_send"),this.$2.streamRequested()};b.onPollRequestSuccess=function(){this.$1.bumpCounter("polling_request_succeed"),this.$5===0&&this.$1.bumpCounter("polling_first_success"),this.$5++};b.onPollResponse=function(a){this.$1.bumpCounter("lp.message_arrived."+a)};b.onPollFinish=function(){this.$1.bumpCounter("polling_request_finish"),this.$2.streamRequested()};b.onPollRequestFailed=function(a){this.$1.bumpCounter("polling_request_failed"),this.$1.bumpCounter("polling_request_failed_"+a),this.$6++,this.$1.debugTrace("PollRequest","Request failed existing streams count "+this.$2.getGlobalState().totalConnectionStreams),this.$2.streamClosed()};b.onPollShutdownAbort=function(){this.$2.streamClosed()};b.onTabClose=function(){this.$2.tabClosed()};return a}();g["default"]=a}),98);
__d("MqttConnectionHookCollection",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=new Set()}var b=a.prototype;b.addHook=function(a){this.$1.add(a)};b.removeHook=function(a){this.$1["delete"](a)};b.onConnectAttempt=function(){this.$1.forEach(function(a){a.onConnectAttempt==null?void 0:a.onConnectAttempt()})};b.onConnectFailure=function(){this.$1.forEach(function(a){a.onConnectFailure==null?void 0:a.onConnectFailure()})};b.onConnected=function(){this.$1.forEach(function(a){a.onConnected==null?void 0:a.onConnected()})};b.onConnectSuccess=function(){this.$1.forEach(function(a){a.onConnectSuccess==null?void 0:a.onConnectSuccess()})};b.onConnectionLost=function(){this.$1.forEach(function(a){a.onConnectionLost==null?void 0:a.onConnectionLost()})};b.onConnectionDisconnect=function(){this.$1.forEach(function(a){a.onConnectionDisconnect==null?void 0:a.onConnectionDisconnect()})};b.onSubscribe=function(a){this.$1.forEach(function(b){b.onSubscribe==null?void 0:b.onSubscribe(a)})};b.onUnsubscribe=function(a){this.$1.forEach(function(b){b.onUnsubscribe==null?void 0:b.onUnsubscribe(a)})};b.onPublish=function(a){this.$1.forEach(function(b){b.onPublish==null?void 0:b.onPublish(a)})};b.onMessage=function(a){this.$1.forEach(function(b){b.onMessage==null?void 0:b.onMessage(a)})};b.onWSFatal=function(){this.$1.forEach(function(a){a.onWSFatal==null?void 0:a.onWSFatal()})};return a}();f["default"]=a}),66);
__d("MqttProtocolUtils",["MqttEnv"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){if(a==null)return b;var c=new Uint8Array(a.length+b.length);c.set(a);c.set(b,a.length);return c}function b(a,b){b=b;var c=0,d=1,e;do{if(b===a.length)return null;e=a[b++];c+=(e&127)*d;d*=128}while((e&128)!==0);return{offset:b,value:c}}function c(a){a=a;var b=new Array(1);for(var c=0;c<4;c++){var d=a%128;a>>=7;if(a>0)b[c]=d|128;else{b[c]=d;break}}return b}function h(a,b,c){c=c;b[c++]=a>>8;b[c++]=a%256;return c}function e(a,b){return 256*a[b]+a[b+1]}function f(a){var b=0;for(var c=0,d=a.length;c<d;c++){var e=a.charCodeAt(c);e<128?b+=1:e<2048?b+=2:e>=55296&&e<=56319?(b+=4,c++):b+=3}return b}function i(a,b,c,d){d=h(b,c,d);j(a,c,d);return d+b}function j(a,b,c){c=c;for(var d=0,e=a.length;d<e;d++){var f=a.charCodeAt(d);f<128?b[c++]=f:f<2048?(b[c++]=192|f>>6,b[c++]=128|f&63):f<55296||f>=57344?(b[c++]=224|f>>12,b[c++]=128|f>>6&63,b[c++]=128|f&63):(f=65536+((f&1023)<<10|a.charCodeAt(++d)&1023),b[c++]=240|f>>18,b[c++]=128|f>>12&63,b[c++]=128|f>>6&63,b[c++]=128|f&63)}}function k(a,b,c){var d=[],e=b,f=0;while(e<b+c){var g=a[e++];if(g<128)d[f++]=String.fromCharCode(g);else if(g>191&&g<224){var h=a[e++];d[f++]=String.fromCharCode((g&31)<<6|h&63)}else if(g>239&&g<365){h=a[e++];var i=a[e++],j=a[e++];h=((g&7)<<18|(h&63)<<12|(i&63)<<6|j&63)-65536;d[f++]=String.fromCharCode(55296+(h>>10));d[f++]=String.fromCharCode(56320+(h&1023))}else{i=a[e++];j=a[e++];d[f++]=String.fromCharCode((g&15)<<12|(i&63)<<6|j&63)}}return d.join("")}var l=function(){function a(a,b,c,d){this.$1=a,this.$2=b,this.$5=c,this.$6=d,this.$4=!1}var b=a.prototype;b.$7=function(){var a=this;this.$4?(this.$4=!1,this.$5(),this.$3=d("MqttEnv").Env.setTimeout(function(){a.$7()},this.$2()*1e3)):this.$6()};b.reset=function(){var a=this;this.$4=!0;this.$3&&(d("MqttEnv").Env.clearTimeout(this.$3),this.$3=null);var b=this.$1()*1e3;b>0&&(this.$3=d("MqttEnv").Env.setTimeout(function(){a.$7()},b))};b.cancel=function(){this.$3&&(d("MqttEnv").Env.clearTimeout(this.$3),this.$3=null)};return a}();g.UTF8Length=f;g.convertStringToUTF8=j;g.concatBuffers=a;g.decodeMultiByteInt=b;g.convertUTF8ToString=k;g.encodeMultiByteInt=c;g.writeUInt16BE=h;g.readUInt16BE=e;g.writeString=i;g.Pinger=l}),98);
__d("MqttUtils",["MqttEnv"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return h(a,"sid",b.toString())}function b(a,b){var c=a;b.forEach(function(a,b){c=h(c,b,a)});return c}function h(a,b,c){if(a.indexOf("?")>0)return a+"&"+b+"="+c;else return a+"?"+b+"="+c}function c(){return Math.floor(d("MqttEnv").Env.random()*Number.MAX_SAFE_INTEGER)}function i(a,b,c){var e=arguments.length>1?a.then(b,c):a;e.then(null,function(a){d("MqttEnv").Env.setTimeout(function(){if(a instanceof Error)throw a;else throw new Error("promiseDone")},0)})}function e(a,b,c,e){var f=!1;d("MqttEnv").Env.setTimeout(function(){f||(f=!0,c(new Error("promise timeout")))},e);i(a,function(a){f||(f=!0,b(a))},function(a){f||(f=!0,c(a))})}function f(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];var e=0;return a.replace(/%s/g,function(){return String(c[e++])})}g.endpointWithSessionId=a;g.endpointWithExtraParameters=b;g.endpointWithExtraParameter=h;g.generateSessionId=c;g.promiseDone=i;g.promiseDoneWithTimeout=e;g.sprintf=f}),98);
__d("MqttProtocolCodec",["MqttProtocolUtils","MqttUtils","err"],(function(a,b,c,d,e,f,g){"use strict";var h=Object.freeze({CONNECT:1,CONNACK:2,PUBLISH:3,PUBACK:4,SUBSCRIBE:8,SUBACK:9,UNSUBSCRIBE:10,UNSUBACK:11,PINGREQ:12,PINGRESP:13,DISCONNECT:14}),i=[0,6,77,81,73,115,100,112,3];function j(a,b){b=b;var e=b,f=a[b],g=f>>4;b+=1;var i=d("MqttProtocolUtils").decodeMultiByteInt(a,b);if(i==null)return{position:e,wireMessage:null};b=i.offset;i=b+i.value;if(i>a.length)return{position:e,wireMessage:null};var j;switch(g){case h.CONNACK:e=a[b++];e=!!(e&1);var o=a[b++];j=new m(e,o);break;case h.PUBLISH:e=f&15;o=e>>1&3;f=d("MqttProtocolUtils").readUInt16BE(a,b);b+=2;var r=d("MqttProtocolUtils").convertUTF8ToString(a,b,f);b+=f;f=null;o===1&&(f=d("MqttProtocolUtils").readUInt16BE(a,b),b+=2);var s=p.createWithBytes(a.subarray(b,i)),t=(e&1)===1;e=(e&8)===8;j=new q(r,s,o,f,t,e);break;case h.PINGREQ:j=new k("PINGREQ");break;case h.PINGRESP:j=new k("PINGRESP");break;case h.PUBACK:case h.UNSUBACK:r=d("MqttProtocolUtils").readUInt16BE(a,b);j=new n(g===h.PUBACK?"PUBACK":"UNSUBACK",r);break;case h.SUBACK:s=d("MqttProtocolUtils").readUInt16BE(a,b);b+=2;o=a.subarray(b,i);j=new l(s,o);break;default:throw c("err")(d("MqttUtils").sprintf("Invalid MQTT message type %s.",g))}return{position:i,wireMessage:j}}function a(a){var b=[],c=0;while(c<a.length){var d=j(a,c),e=d.wireMessage;c=d.position;if(e)b.push(e);else break}d=null;c<a.length&&(d=a.subarray(c));return{messages:b,remaining:d}}b=function(){function a(a){this.messageType=h[a]}var b=a.prototype;b.encode=function(){throw new TypeError("Cannot abstract class WireMessage")};return a}();var k=function(b){babelHelpers.inheritsLoose(a,b);function a(a){return b.call(this,a)||this}var c=a.prototype;c.encode=function(){var a=new ArrayBuffer(2),b=new Uint8Array(a);b[0]=(this.messageType&15)<<4;return a};return a}(b);e=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,"DISCONNECT")||this}var c=b.prototype;c.encode=function(){var a=(this.messageType&15)<<4,b=new ArrayBuffer(2),c=new Uint8Array(b);c[0]=a;c.set(d("MqttProtocolUtils").encodeMultiByteInt(0),1);return b};return b}(b);var l=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){var d;d=b.call(this,"SUBACK")||this;d.messageIdentifier=a;d.returnCode=c;return d}return a}(b),m=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){var d;d=b.call(this,"CONNACK")||this;d.sessionPresent=a;d.returnCode=c;return d}return a}(b),n=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.messageIdentifier=c;return a}var c=a.prototype;c.encode=function(){var a=(this.messageType&15)<<4,b=2,c=d("MqttProtocolUtils").encodeMultiByteInt(b),e=c.length+1;b=new ArrayBuffer(b+e);var f=new Uint8Array(b);f[0]=a;f.set(c,1);e=d("MqttProtocolUtils").writeUInt16BE(this.messageIdentifier,f,e);return b};return a}(b);f=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var d;d=a.call(this,"CONNECT")||this;d.clientId=b;d.connectOptions=c;return d}var c=b.prototype;c.encode=function(){var a,b=(this.messageType&15)<<4,c=i.length+3;c+=(a=d("MqttProtocolUtils")).UTF8Length(this.clientId)+2;c+=a.UTF8Length(this.connectOptions.userName)+2;var e=a.encodeMultiByteInt(c);c=new ArrayBuffer(1+e.length+c);var f=new Uint8Array(c);f[0]=b;b=1;f.set(e,1);b+=e.length;f.set(i,b);b+=i.length;e=2|128;f[b++]=e;b=a.writeUInt16BE(this.connectOptions.getKeepAliveIntervalSeconds(),f,b);b=a.writeString(this.clientId,a.UTF8Length(this.clientId),f,b);b=a.writeString(this.connectOptions.userName,a.UTF8Length(this.connectOptions.userName),f,b);return c};return b}(b);var o=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,e,f){var g;g=b.call(this,a)||this;g.topic=c;if(e<0&&e>1||e===1&&f==null)throw new TypeError(d("MqttUtils").sprintf("Argument Invalid. qos: %s messageType: %s.",e,a));g.qos=e;g.messageIdentifier=f;return g}var c=a.prototype;c.encode=function(){var a=(this.messageType&15)<<4;a|=2;var b=d("MqttProtocolUtils").UTF8Length(this.topic),c=2+b+2;this.messageType===h.SUBSCRIBE&&(c+=1);var e=d("MqttProtocolUtils").encodeMultiByteInt(c);c=new ArrayBuffer(1+e.length+c);var f=new Uint8Array(c);f[0]=a;a=1;f.set(e,1);a+=e.length;this.messageIdentifier!=null&&(a=d("MqttProtocolUtils").writeUInt16BE(this.messageIdentifier,f,a));a=d("MqttProtocolUtils").writeString(this.topic,b,f,a);this.messageType===h.SUBSCRIBE&&this.qos!=null&&(f[a++]=this.qos);return c};return a}(b),p=function(){function a(a,b){this.payloadString=a,this.payloadBytes=b}a.createWithString=function(b){var c=new Uint8Array(new ArrayBuffer(d("MqttProtocolUtils").UTF8Length(b)));d("MqttProtocolUtils").convertStringToUTF8(b,c,0);return new a(b,c)};a.createWithBytes=function(b){var c=d("MqttProtocolUtils").convertUTF8ToString(b,0,b.length);return new a(c,b)};var b=a.prototype;b.string=function(){return this.payloadString};b.bytes=function(){return this.payloadBytes};return a}(),q=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,d,e,f,g){var h;h=b.call(this,"PUBLISH")||this;h.topic=a;h.payloadMessage=c;h.qos=d;h.messageIdentifier=e;h.retained=f!=null?f:!1;h.duplicate=g!=null?g:!1;if(h.qos===1&&h.messageIdentifier==null)throw new TypeError("Argument Invalid. messageIdentifier: null and qos: 1");return h}var c=a.prototype;c.encode=function(){var a=(this.messageType&15)<<4;this.duplicate&&(a|=8);a=a|=this.qos<<1;this.retained&&a!=1;var b=d("MqttProtocolUtils").UTF8Length(this.topic),c=b+2,e=this.qos===0?0:2;c+=e;e=this.payloadMessage.bytes();c+=e.byteLength;var f=d("MqttProtocolUtils").encodeMultiByteInt(c);c=new ArrayBuffer(1+f.length+c);var g=new Uint8Array(c);g[0]=a;g.set(f,1);a=1+f.length;a=d("MqttProtocolUtils").writeString(this.topic,b,g,a);this.qos!==0&&this.messageIdentifier!=null&&(a=d("MqttProtocolUtils").writeUInt16BE(this.messageIdentifier,g,a));g.set(e,a);return c};return a}(b),r=p.createWithString,s=p.createWithBytes;b={Base:b,ConnAck:m,Connect:f,Disconnect:e,Ping:k,PubAckUnsubAck:n,Publish:q,Subscription:o};g.MESSAGE_TYPE=h;g.decodeMessage=j;g.decodeByteMessages=a;g.Message=p;g.createMessageWithString=r;g.createMessageWithBytes=s;g.WireMessage=b}),98);
__d("MqttTypes",[],(function(a,b,c,d,e,f){"use strict";a=function(a,b,c){this.errorCode=a,this.errorName=b,this.errorMessage=c};b=Object.freeze({APP_DISCONNECT:new a(7,"APP_DISCONNECT","Disconnect initiated by app"),BROWSER_CLOSE:new a(11,"BROWSER_CLOSE","Browser closed"),CONNACK_FAILURE:new a(5,"CONNACK_FAILURE","Connection failure due to connack"),CONNECT_TIMEOUT:new a(4,"CONNECT_TIMEOUT","Connect timed out"),INVALID_DATA_TYPE:new a(3,"INVALID_DATA_TYPE","Received non-arraybuffer from socket."),PING_TIMEOUT:new a(6,"PING_TIMEOUT","Ping timeout"),RECONNECT:new a(10,"RECONNECT","Reconnecting"),SERVER_DISCONNECT:new a(8,"SERVER_DISCONNECT","Disconnect message sent my server"),SOCKET_CLOSE:new a(9,"SOCKET_CLOSE","Socket connection closed"),SOCKET_ERROR:new a(1,"SOCKET_ERROR","Socket error"),SOCKET_MESSAGE:new a(2,"SOCKET_MESSAGE","Unable to parse invalid socket message")});c=function(a,b){this.mqttError=a,this.connAck=b};d=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d){d===void 0&&(d=null);c=a.call(this,c)||this;c.isRecoverable=b;c.originalError=d;return c}return b}(babelHelpers.wrapNativeSuper(Error));f.MqttError=a;f.MqttErrors=b;f.ConnectFailure=c;f.MqttChannelError=d}),66);
__d("MqttProtocolClient",["ErrorSerializer","MqttEnv","MqttProtocolCodec","MqttProtocolUtils","MqttTypes","err","getErrorSafe"],(function(a,b,c,d,e,f,g){"use strict";var h=20,i=6e4;a=function(){function a(a){var b=this;this.$12=function(a,c,e){c===void 0&&(c=null);b.$9.bumpCounter("protocol.debug.disconnect.internal."+a.errorName);b.$9.bumpCounter("protocol.debug.disconnect.internal");var f=b.$5,g=b.$2,h=g.onConnectFailure,i=g.onConnectionLost;b.setConnected(!1);b.$14();f?d("MqttEnv").Env.scheduleCallback(function(){i(a,c)}):d("MqttEnv").Env.scheduleCallback(function(){h(b.$11,new(d("MqttTypes").ConnectFailure)(a,e!=null?e:-1),c)})};this.$13=function(a){var c=b.$6;if(c==null){b.$9.bumpCounter("protocol.socket_send.failed.socket_null.<message type>");return 0}if(c.readyState!==c.OPEN){b.$9.bumpCounter("protocol.socket_send.failed.socket_not_open.<message type>");return 0}a=a.encode();var d=a.byteLength;c.send(a);return d};this.$3=a;this.$2={getKeepAliveIntervalSeconds:function(){return 10},getKeepAliveTimeoutSeconds:function(){return 10},ignoreSubProtocol:!1,mqttVersion:3,onConnectFailure:function(a,b,c){},onConnection:function(){},onConnectionLost:function(a,b){},onConnectSuccess:function(a){},onMessageArrived:function(a,b,c){},onMessageDelivered:function(a){},userName:""};this.$1="mqttwsclient";this.$4=0;this.$5=!1;this.$9=d("MqttEnv").Env.getLoggerInstance();this.$11=0}var b=a.prototype;b.connect=function(a){var b=this;if(this.$5)throw c("err")("Invalid state: connect - already connected");this.$2=a;this.setConnected(!1);this.$7!=null&&(d("MqttEnv").Env.clearTimeout(this.$7),this.$7=null);this.$7=d("MqttEnv").Env.setTimeout(function(){b.$9.bumpCounter("protocol.error.connect.timeout"),b.$12(d("MqttTypes").MqttErrors.CONNECT_TIMEOUT)},h*1e3);this.$6=d("MqttEnv").Env.createSocket(this.$3);this.$6.binaryType="arraybuffer";this.$6.onopen=function(){b.setConnected(!0),b.$9.debugTrace("Socket-Open","MQTTProtocolClient Socket Open"),b.$11=b.$13(new(d("MqttProtocolCodec").WireMessage.Connect)(b.$1,a)),a.onConnection()};this.$6.onmessage=function(a){a=a.data;if(!(a instanceof ArrayBuffer)){b.$9.bumpCounter("protocol.error.onmessage.type");b.$12(d("MqttTypes").MqttErrors.INVALID_DATA_TYPE);return}try{a=new Uint8Array(a);b.$10!=null&&(a=d("MqttProtocolUtils").concatBuffers(b.$10,a),b.$9.bumpCounter("protocol.debug.usingMessagesBuffer"),delete b.$10,b.$10=null);a=d("MqttProtocolCodec").decodeByteMessages(a);var c=a.messages;b.$10=a.remaining;for(a=0;a<c.length;a++)b.handleMessage(c[a])}catch(a){b.$10=null,b.$9.logError(a,d("MqttTypes").MqttErrors.SOCKET_MESSAGE.errorMessage),b.$9.bumpCounter("protocol.error.onmessage.parse"),b.$12(d("MqttTypes").MqttErrors.SOCKET_MESSAGE,a.message)}};this.$6.onerror=function(a){b.$9.bumpCounter("protocol.error.socket");b.$9.debugTrace("Socket-Error","MQTTProtocolClient Socket Error");a=typeof a==="object"&&a!=null&&"error"in a&&!("message"in a)?a.error:a;b.$12(d("MqttTypes").MqttErrors.SOCKET_ERROR,c("ErrorSerializer").toReadableMessage(c("getErrorSafe")(a)))};this.$6.onclose=function(a){b.$9.bumpCounter("protocol.socket.close"),a.wasClean||b.$9.debugTrace("Socket-Unclean-Close","MQTTProtocolClient error code: "+a.code+" reason: "+a.reason),b.$12(d("MqttTypes").MqttErrors.SOCKET_CLOSE,a.code+" : "+a.reason)};this.$8!=null&&this.$8.cancel();this.$8=new(d("MqttProtocolUtils").Pinger)(a.getKeepAliveIntervalSeconds,a.getKeepAliveTimeoutSeconds,this.$13.bind(this,new(d("MqttProtocolCodec").WireMessage.Ping)("PINGREQ")),function(a,c){return b.$12(d("MqttTypes").MqttErrors.PING_TIMEOUT,a,c)})};b.$14=function(){var a=this;this.setConnected(!1);this.$8!=null&&this.$8.cancel();this.$7!=null&&(d("MqttEnv").Env.clearTimeout(this.$7),this.$7=null);this.$6!=null&&(this.$6.onopen=function(b){a.$9.debugTrace("Socket Open After Teardown","Socket opening after teardown")},this.$6.onmessage=function(a){},this.$6.onerror=function(a){},this.$6.onclose=function(b){a.$9.debugTrace("Socket Close After Teardown","code: "+b.code+", reason: "+b.reason)},this.$6.close(),this.$6=null);this.$2.onConnectSuccess=function(a){};this.$2.onConnectFailure=function(a,b){};this.$2.onConnection=function(){};this.$2.onConnectionLost=function(a){};this.$2.onMessageArrived=function(a,b,c){};this.$2.onMessageDelivered=function(a){}};b.disconnect=function(a){if(this.$6==null||this.$6.readyState!==this.$6.OPEN||!this.$5){this.$14();return}this.$13(new(d("MqttProtocolCodec").WireMessage.Disconnect)());this.$9.bumpCounter("protocol.debug.disconnect");this.$12(a)};b.isConnected=function(){return this.$5};b.setConnected=function(a){this.$5=a};b.subscribe=function(a){if(!this.$5){this.$9.bumpCounter("protocol.error.subscribe.notconnected");throw c("err")("Invalid state: subscribe - not connected")}this.$9.bumpCounter("protocol.subscribe."+a);a=new(d("MqttProtocolCodec").WireMessage.Subscription)("SUBSCRIBE",a,0,this.$15());this.$13(a)};b.unsubscribe=function(a){if(!this.$5){this.$9.bumpCounter("protocol.error.unsubscribe.notconnected");throw c("err")("Invalid state: unsubscribe - not connected")}this.$9.bumpCounter("protocol.unsubscribe."+a);a=new(d("MqttProtocolCodec").WireMessage.Subscription)("UNSUBSCRIBE",a,0,this.$15());this.$13(a)};b.publish=function(a,b,c){return this.$16(a,d("MqttProtocolCodec").createMessageWithString(b),c)};b.publishBinary=function(a,b,c){return this.$16(a,d("MqttProtocolCodec").createMessageWithBytes(b),c)};b.$16=function(a,b,c){this.$5||this.$9.bumpCounter("protocol.error.publish.notconnected");this.$9.bumpCounter("protocol.publish."+a);var e=this.$15();a=new(d("MqttProtocolCodec").WireMessage.Publish)(a,b,c,e);this.$13(a);return e};b.$15=function(){++this.$4===i&&(this.$4=1);return this.$4};b.handleMessage=function(a){var b=this;switch(a.messageType){case d("MqttProtocolCodec").MESSAGE_TYPE.CONNACK:this.$7!=null&&(d("MqttEnv").Env.clearTimeout(this.$7),this.$7=null);if(a instanceof d("MqttProtocolCodec").WireMessage.ConnAck){var e=a;if(e.returnCode!==0){this.$9.bumpCounter("protocol.error.connack.invalidreturncode");this.setConnected(!1);this.$12(d("MqttTypes").MqttErrors.CONNACK_FAILURE,"connack code="+e.returnCode,e.returnCode);return}d("MqttEnv").Env.scheduleCallback(function(){b.$2.onConnectSuccess(b.$11)});this.$8!=null&&this.$8.reset()}break;case d("MqttProtocolCodec").MESSAGE_TYPE.PUBLISH:if(a instanceof d("MqttProtocolCodec").WireMessage.Publish){var f=a;d("MqttEnv").Env.scheduleCallback(function(){b.$2.onMessageArrived(f.topic,f.payloadMessage,f.qos)});e=f.messageIdentifier;this.$9.bumpCounter("protocol.publish.received");if(f.qos===1&&e!=null){e=new(d("MqttProtocolCodec").WireMessage.PubAckUnsubAck)("PUBACK",e);this.$13(e)}}break;case d("MqttProtocolCodec").MESSAGE_TYPE.PUBACK:if(a instanceof d("MqttProtocolCodec").WireMessage.PubAckUnsubAck){e=a;var g=e.messageIdentifier;this.$9.bumpCounter("protocol.puback.received");d("MqttEnv").Env.scheduleCallback(function(){b.$2.onMessageDelivered(g)})}break;case d("MqttProtocolCodec").MESSAGE_TYPE.PINGRESP:this.$8!=null&&this.$8.reset();break;case d("MqttProtocolCodec").MESSAGE_TYPE.DISCONNECT:this.$12(d("MqttTypes").MqttErrors.SERVER_DISCONNECT);break;case d("MqttProtocolCodec").MESSAGE_TYPE.SUBACK:this.$9.bumpCounter("protocol.suback.received");break;case d("MqttProtocolCodec").MESSAGE_TYPE.UNSUBACK:this.$9.bumpCounter("protocol.unsuback.received");break;default:this.$9.logError(c("err")("MqttProtocolClient: Received unhandled message type: "+a.messageType),"Received unhandled message type");this.$9.bumpCounter("protocol.error.handlemessage.unsupportedtype");break}};return a}();g["default"]=a}),98);
__d("MqttPublishListener",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({NOT_CONNECTED:"NOT_CONNECTED",PUBLISH_ERROR:"PUBLISH_ERROR",QUEUED:"QUEUED",SENT:"SENT",ACKED:"ACKED",NOT_ACKED:"NOT_ACKED"});f.MqttPublishEvent=a}),66);
__d("MqttUserNameUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a!=null?a:typeof document==="object"&&document&&document.hasFocus&&document.hasFocus()}function b(){return navigator.userAgent}f.getMqttForegroundStatus=a;f.getUserAgent=b}),66);
__d("MqttUserName",["MqttUserNameUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c,e,f,g,h,i,j,k,l,m){h===void 0&&(h=null),i===void 0&&(i=""),j===void 0&&(j="websocket"),k===void 0&&(k=null),l===void 0&&(l=null),m===void 0&&(m=null),this.$1=a,this.$2=b,this.$3=c,this.$4=e,this.$5=f,this.$6=g,this.$7=d("MqttUserNameUtils").getMqttForegroundStatus(),this.$8=h,this.$9=i,this.$10=j,this.$11=k,this.$12=l,this.$13=m}var b=a.prototype;b.gen=function(a,b,c,e){e===void 0&&(e=[]);var f=d("MqttUserNameUtils").getMqttForegroundStatus(this.$7);c=c.map(function(a){a={isBase64Publish:!1,messageId:a.messageId,payload:a.payload,qos:a.qos,topic:a.topic};typeof a.payload!=="string"&&(a.payload=btoa(String.fromCharCode.apply(null,a.payload)),a.isBase64Publish=!0);return a});f={a:d("MqttUserNameUtils").getUserAgent(),asi:this.$13,aid:this.$5,aids:this.$12!=null?Object.fromEntries(this.$12):null,chat_on:this.$6,cp:this.$3,ct:this.$10,d:this.$4,dc:"",ecp:this.$2,fg:f,gas:this.$8,mqtt_sid:"",no_auto_fg:!0,p:this.$11,pack:e,php_override:this.$9,pm:c,s:a,st:b,u:this.$1};return JSON.stringify(f)};b.setForegroundState=function(a){this.$7=a};b.setChatVisibility=function(a){this.$6=a};b.getEndpointCapabilities=function(){return this.$2};b.getDeviceId=function(){return this.$4};b.setEndpointCapabilities=function(a){this.$2=a};b.getIsGuestAuthStringPresent=function(){return this.$8!==null};return a}();g["default"]=a}),98);
__d("MqttConnection",["MqttConnectionHookCollection","MqttEnv","MqttProtocolClient","MqttPublishListener","MqttTypes","MqttUserName","MqttUtils","Promise","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i=15,j=15,k=1,l=1,m=64,n="publish",o="subscribe",p="unsubscribe",q=function(a){},r=18e4,s=5*1e3,t=15,u=21;a=function(){function a(){var a=this;this.$38=function(){return a.$20};this.$39=function(){return a.$21};this.$8=!1;this.$10=d("MqttEnv").Env.getLoggerInstance();this.$11="Disconnected";this.$17=new Set();this.$24=new Map();this.$12=0;this.$13=0;this.$14=0;this.$15=0;this.$16=0;this.$8=!1;this.$5="";this.$6=new(c("MqttUserName"))("",0,1,"",0,!0);this.$9=0;this.$18=0;this.$19=!1;this.$7=null;var b=function(){};this.$1=b;this.$2=b;this.$3=b;this.$25=!1;this.$26=!1;this.$27=new(c("MqttConnectionHookCollection"))();this.$4=function(){return[]};this.$20=i;this.$21=j;this.$22=null;this.$23=0}var e=a.prototype;e.run=function(a){var b=this,c=a.endpoint,d=a.extraConnectMessageProvider,e=a.mqttUserName,f=a.onJSError,g=a.onMessageReceived,h=a.onStateChange;a=a.subscribedTopics;if(this.$8){this.$10.debugTrace("run","Run called while in running state.");return}this.$1=h;this.$3=g;this.$5=c;this.$6=e;this.$8=!0;this.$18=Date.now();this.$12=0;this.$13=0;this.$2=f||q;a&&a.forEach(function(a){return b.$17.add(a)});this.$4=d;this.$20=i;this.$21=j;this.$28()};e.shutdown=function(a){this.$29(a),this.$30("shutdown"),this.$8=!1,this.$10.debugTrace("shutdown","Shutdown")};e.subscribe=function(a){this.$17.add(a);this.ensureConnected(o)&&this.$31(a);return!0};e.publish=function(a,b,c,d){return this.$32(a,b,c,d)};e.publishBinary=function(a,b,c,d){return this.$32(a,b,c,d)};e.$32=function(a,e,f,g){var i={reject:function(a){},resolve:function(){}};g!=null&&(i.listener=g);var j=new(h||(h=b("Promise")))(function(a,b){i.resolve=a,i.reject=b}),k=this.ensureConnected(n);!k?(g==null?void 0:g.onEvent(d("MqttPublishListener").MqttPublishEvent.NOT_CONNECTED),i.reject(c("err")("Client disconnected"))):this.$33(a,e,f,i);return j};e.unsubscribe=function(a){this.$17["delete"](a);this.ensureConnected(p)&&this.$34(a);return!0};e.addHook=function(a){this.$27.addHook(a)};e.removeHook=function(a){this.$27.removeHook(a)};e.isRunning=function(){return this.$8};e.getSessionId=function(){return this.$9};e.hasFatal=function(){return this.$25};e.hasConnectSuccess=function(){return this.$26};e.canPublish=function(){return this.ensureConnected("canPublish")};e.ensureConnected=function(a){return!this.$8||this.$7==null||!this.$7.isConnected()?!1:!0};e.connectionState=function(){return this.$11};e.mqttStateFromConnectionState=function(a){switch(a){case"Connecting":case"TransportConnected":return"Connecting";case"Connected":return"Connected";case"Disconnected":return"Disconnected"}throw c("err")("Unknown state "+a)};e.testOnlyGetSubscribedTopics=function(){return this.$17};e.getDisconnectCount=function(){return this.$23};e.$29=function(a){this.$8&&this.$7!=null&&(this.$35("Disconnected"),this.$7!=null&&(this.$7.disconnect(a),this.$27.onConnectionDisconnect()),this.$7=null)};e.$36=function(a){if(this.$11==="Connected"&&a==="Disconnected"&&this.$18===0){this.$18=Date.now();return}if(a==="Connecting"&&this.$18!==0&&!this.$19){this.$10.bumpCounter("protocol.reconnectstarted");this.$19=!0;return}if(a==="Connected"&&this.$18!==0){a=Date.now()-this.$18;switch(Math.floor(a/3e4)){case 0:this.$10.bumpCounter("protocol.reconnectedwithin30s");break;case 1:this.$10.bumpCounter("protocol.reconnectedwithin60s");break;case 2:this.$10.bumpCounter("protocol.reconnectedwithin90s");break;case 3:this.$10.bumpCounter("protocol.reconnectedwithin120s");break;default:this.$10.bumpCounter("protocol.reconnectedmorethan120s");break}this.$18=0;this.$19=!1;return}};e.$35=function(a){a!==this.$11&&(this.$10.debugTrace("MQTTConnection-updateState","State changed to: "+a),this.$36(a),this.$11=a,this.$1(a))};e.$28=function(){var a=this;if(!this.$8)return;this.$11!=="Disconnected"&&this.$10.debugTrace("Reconnect","Current State not disconnected: "+this.$11);this.$35("Connecting");var b=Date.now(),e=this.$10.getBrowserConnectivity();this.$9=d("MqttUtils").generateSessionId();var f=Array.from(this.$17),g=d("MqttUtils").endpointWithSessionId(this.$5,this.$9);g=d("MqttUtils").endpointWithExtraParameter(g,"cid",this.$6.getDeviceId());try{this.$7=new(c("MqttProtocolClient"))(g);var h=this.$37(),i=h.map(function(a){return a.topic});g=this.$6.gen(this.$9,f,h);this.$7!=null&&(this.$13+=1,this.$7.connect({getKeepAliveIntervalSeconds:this.$38,getKeepAliveTimeoutSeconds:this.$39,ignoreSubProtocol:!0,mqttVersion:3,onConnectFailure:function(c,d,g){return a.$40(d,b,a.$18,f,i,e,c,g)},onConnection:function(){return a.$41(h,f)},onConnectionLost:function(b,c){return a.$42(b,c)},onConnectSuccess:function(c){return a.$43(b,a.$18,f,i,e,c)},onMessageArrived:function(b,c,d){return a.$44(b,c,d)},onMessageDelivered:function(b){return a.$45(b)},userName:g}),this.$10.bumpCounter("protocol.connectattempt"),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.connectattempt"),this.$27.onConnectAttempt())}catch(a){this.$10.bumpCounter("js_error_in_init_exception"),this.$35("Disconnected"),this.$46(!1,!1,b,this.$18,f,[],e,null,14,"init error - "+a.message),a&&this.$10.logErrorWarn(a,"ws_js_error"),this.$27.onWSFatal(),this.$47(new(d("MqttTypes").MqttChannelError)(!1,"ws_js_error",a),"client_init")}};e.$37=function(){var a=this.$4(),b=65536;return a.map(function(a){a.messageId=b--;return a})};e.$31=function(a){try{if(this.$7!=null){this.$7.subscribe(a);this.$10.debugTrace("#doSubscribe","Subscribing to "+a);this.$27.onSubscribe(a);this.$10.bumpCounter("protocol.subscribe");return!0}}catch(b){this.$10.logError(b,"Exception subscribing"),this.$10.bumpCounter("subscribe_exception."+a),this.$10.bumpCounter("protocol.subscribe.error")}return!1};e.$34=function(a){try{if(this.$7!=null){this.$7.unsubscribe(a);this.$10.debugTrace("#doUnsubscribe","Unsubscribing to "+a);this.$27.onUnsubscribe(a);this.$10.bumpCounter("protocol.unsubscribe");return!0}}catch(b){this.$10.logError(b,"Exception unsubscribing"),this.$10.bumpCounter("unsubscribe_exception."+a),this.$10.bumpCounter("protocol.unsubscribe.error")}return!1};e.$33=function(a,b,c,e){if(this.$7!=null)try{var f;typeof b==="string"?f=this.$7.publish(a,b,c):f=this.$7.publishBinary(a,b,c);this.$10.bumpCounter("protocol.publish");b=f!=null?f:"null";this.$10.debugTrace("#doPublish","publish "+a+" with messageId:"+b+" qos:"+c);this.$27.onPublish(a);(b=e.listener)==null?void 0:b.onEvent(d("MqttPublishListener").MqttPublishEvent.SENT);f!=null?(this.$10.bumpCounter("publish.ack_expected"),this.$24.set(f,e)):e.resolve();return!0}catch(b){this.$10.logError(b,"Exception publishing");this.$10.bumpCounter("publish_exception."+a);e.reject(b);this.$10.bumpCounter("protocol.publish.error");return!1}else return!1};e.$48=function(a){var b=this;a===void 0&&(a=null);if(!this.$8)return;this.$29(d("MqttTypes").MqttErrors.RECONNECT);this.$30("reconnect");this.$49();this.$9=-1;this.$16=0;a=a;a==null&&(a=k*Math.pow(2,this.$12));a=Math.max(a,l);a=Math.min(a,m);a=a*(1e3+d("MqttEnv").Env.random()*200);this.$10.debugTrace("#scheduleReconnect","Reconnect in "+a+" ms");this.$22=d("MqttEnv").Env.setTimeout(function(){b.$28()},a);this.$12+=1};e.$49=function(){var a=Date.now()-this.$16,b=this.$16!==0&&a>s,c=this.$12>t;(b||c)&&(this.$12=0);this.$16!==0&&a<=s&&this.$10.bumpCounter("short_lived_session");c&&this.$10.bumpCounter("connection_attempt_limit")};e.$46=function(a,b,c,d,e,f,g,h,i,j){a?this.$14++:this.$15++;var k=Date.now();this.$10.eventLogConnect({ackReceived:b,attemptNumber:this.$13,connectionState:this.mqttStateFromConnectionState(this.$11),connectionStatus:a,disconnectCount:this.$23,duration:k-c,errorCode:i,errorMessage:j,failTotal:this.$15,hostname:this.$5,messageSizeBytes:h,osConnectivity:g,publishes:f,sessionID:this.$9,subscribedTopics:e,successTotal:this.$14,total_duration:k-d});a&&(this.$13=0)};e.$40=function(a,b,c,d,e,f,g,h){var i=a.mqttError;h=h!=null?i.errorMessage+" - "+h:i.errorMessage;this.$10.debugTrace("connect","Connect failed "+h);this.$10.bumpCounter("protocol.onconnectfailure");this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnectfailure");this.$27.onConnectFailure();this.$46(!1,a.connAck!==-1,b,c,d,e,f,g,i.errorCode,h);if(a.connAck!=null){this.$10.bumpCounter("protocol.connect_failure."+a.connAck);if(a.connAck===u){this.$48(r);return}}this.$48()};e.$41=function(a,b){var c=this;this.$10.bumpCounter("protocol.onconnection");this.$10.debugTrace("Connect","Socket established");this.$27.onConnected();this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnection");b.forEach(function(a){c.$27.onSubscribe(a)});a.forEach(function(a){c.$27.onPublish(a.topic)});this.$35("TransportConnected")};e.$43=function(a,b,c,d,e,f){this.$10.bumpCounter("protocol.onconnectsuccess"),this.$10.debugTrace("connect","Connect success"),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnectsucess"),this.$27.onConnectSuccess(),this.$26=!0,this.$35("Connected"),this.$46(!0,!0,a,b,c,d,e,f),this.$50(c),this.$16=Date.now()};e.$42=function(a,b){this.$10.bumpCounter("protocol.onconnectionlost");this.$23++;if(a.errorCode){b=b!=null?a.errorMessage+" - "+b:a.errorMessage;this.$10.eventLogDisconnect({disconnectCount:this.$23,duration:Date.now()-this.$16,errorCode:a.errorCode,errorMessage:b,sessionID:this.$9})}this.$10.debugTrace("connect","connection lost");this.$27.onConnectionLost();this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnectionlost");this.$48()};e.$44=function(a,b,c){this.$10.bumpCounter("protocol.onmessagearrived");this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onmessagearrived");this.$10.debugTrace("onMessageArrived","Message received on "+a);this.$27.onMessage(a);try{this.$3(a,b,c)}catch(b){this.$10.logError(b,"Listener threw error"),this.$10.bumpCounter("listener_error."+a)}};e.$45=function(a){this.$10.bumpCounter("protocol.onmessagedelivered");var b=a!=null?a:"null";this.$10.debugTrace("onMessageDelivered","Delivered Message {ID: "+b+"}");if(a==null)return;b=this.$24.get(a);if(b==null){this.$10.bumpCounter("protocol.message_with_unknown_id");return}this.$24["delete"](a);(a=b.listener)==null?void 0:a.onEvent(d("MqttPublishListener").MqttPublishEvent.ACKED);b.resolve();this.$10.bumpCounter("publish.ack_received")};e.$30=function(a){this.$10.bumpCounter("protocol.fail_all_unacked_publishes."+a),this.$24.forEach(function(b,e,f){(e=b.listener)==null?void 0:e.onEvent(d("MqttPublishListener").MqttPublishEvent.NOT_ACKED);b.reject(c("err")(a))}),this.$24.clear()};e.$50=function(a){var b=this,c=new Set(a);c.forEach(function(a){b.$17.has(a)||b.unsubscribe(a)});a=new Set(this.$17);a.forEach(function(a){c.has(a)||b.subscribe(a)})};e.$47=function(a,b){try{this.$10.bumpCounter("js_error_in_init");this.$10.bumpCounter(b+".error");this.$25=!0;var c=a?a.message:"error";this.$10.debugTrace("onError",b+": "+c);this.$2(a)}catch(a){this.$10.bumpCounter("js_error_in_error_logging"),this.$10.logError(a,"JS error while trying to log previous error")}};e.setRunning_OnlyForTests=function(a){this.$8=a};return a}();g["default"]=a}),98);
__d("MqttWebSocketUtils",[],(function(a,b,c,d,e,f){"use strict";function b(){return"WebSocket"in a&&a.WebSocket!=null&&"CLOSING"in a.WebSocket.prototype}f.hasWSSupport=b}),66);
__d("isFastRefreshEnabledForCurrentDomain",[],(function(a,b,c,d,e,f){"use strict";function a(){return!1}f["default"]=a}),66);
__d("MqttChannel",["ChannelClientID","IrisSubscribeChecker","MetaConfig","MqttAnalyticsHook","MqttConnection","MqttEnv","MqttPublishListener","MqttTypes","MqttUserName","MqttUtils","MqttWebSocketUtils","Promise","Run","err","isFastRefreshEnabledForCurrentDomain","promiseDone","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=29125;a=function(){function a(a){var b=this,e=a.endpoint,f=a.pollingEndpoint,g=a.userFbid,h=a.appId,i=a.initialSubscribedTopics,j=a.capabilities,k=a.clientCapabilities,l=a.chatVisibility;l=l===void 0?!0:l;var m=a.guestAuthString;m=m===void 0?null:m;var n=a.phpOverride;n=n===void 0?"":n;var o=a.clientType;o=o===void 0?"websocket":o;var p=a.deviceId;p=p===void 0?c("ChannelClientID").getID():p;var q=a.pageId;q=q===void 0?null:q;var r=a.assetIds;r=r===void 0?null:r;a=a.appSpecificInfo;a=a===void 0?null:a;this.$11=d("MqttEnv").Env.getLoggerInstance();this.$11.setAppId(h);this.$12=new(c("MqttUserName"))(g,j,k,p,h,l,m,n,o,q,r,a);this.$1=e;this.$2=f;this.$5="Disconnected";this.$7="LPInactive";this.$6="Disconnected";this.$3=[];this.$4=new Set();this.$8=new Map();this.$9=new Map();this.$10=new(c("MqttConnection"))();this.$13=null;this.$16=new(c("MqttAnalyticsHook"))();this.$15=new Map();this.$14=[];if(!d("MqttEnv").Env.isUserLoggedInNow()&&!c("isFastRefreshEnabledForCurrentDomain")()&&(m==null||m=="")){this.$11.bumpCounter("logged_out_init");return}this.$10.addHook(this.$16);this.$10.addHook(new(c("IrisSubscribeChecker"))(function(){return b.$4.size>0}));this.$17(i);this.$18()}var e=a.prototype;e.$17=function(a){var b=this;if(this.$10.isRunning()){this.$19("run","Connection started calling run again");return}if(d("MqttEnv").Env.genGk(d("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled))if(c("MetaConfig")._("15")){this.$19("MqttChannel","Websocket disabled, will do long polling only");return}else if(!d("MqttWebSocketUtils").hasWSSupport()){this.$19("MqttChannel","Websocket Unavailable, will do long polling only");this.$11.bumpCounter("ws_unavailable_polling");return}this.$10.run({endpoint:this.$1,extraConnectMessageProvider:function(){return b.$20()},mqttUserName:this.$12,onJSError:function(a){b.$21(a)},onMessageReceived:function(a,c,d){b.$22(a,c,d)},onStateChange:function(a){b.$23(a)},subscribedTopics:a});this.$24()};e.$24=function(){var a=this;d("Run").onUnload(function(){a.$25(d("MqttTypes").MqttErrors.BROWSER_CLOSE)})};e.shutdown=function(){this.$25(d("MqttTypes").MqttErrors.APP_DISCONNECT)};e.$25=function(a){this.$10&&this.$10.shutdown(a),this.$13&&this.$13.shutdown(),this.$16.onTabClose()};e.publish=function(a,b,c){c===void 0&&(c={qos:1,skipBuffer:!1});return this.$26(a,b,c)};e.publishBinary=function(a,b,c){c===void 0&&(c={qos:1,skipBuffer:!1});return this.$26(a,b,c)};e.$26=function(a,b,c){c===void 0&&(c={qos:1,skipBuffer:!1});var e;c.qos===0?e=this.$27(a,b,c.listener):e=this.$28(a,b,c);d("MqttUtils").promiseDone(e,function(){},function(a){(a=c.listener)==null?void 0:a.onEvent(d("MqttPublishListener").MqttPublishEvent.PUBLISH_ERROR)});return e};e.$27=function(a,b,c){return this.$29(a,b,0,c,1,null)};e.$28=function(a,c,e){var f={reject:function(a){},resolve:function(){}},g=new(h||(h=b("Promise")))(function(a,b){f.resolve=a,f.reject=b}),i=d("MqttEnv").Env.random();c={ack:f,attempt:0,options:e,payload:c,publishToken:i,startTime:Date.now(),timeoutId:null,topic:a};if(e.skipBuffer)if(this.$10.connectionState()==="Connecting"){this.$14.push(c);(a=e.listener)==null?void 0:a.onEvent(d("MqttPublishListener").MqttPublishEvent.QUEUED)}else this.$30(c);else{c.timeoutId=this.$31(i);this.$15.set(i,c);(a=e.listener)==null?void 0:a.onEvent(d("MqttPublishListener").MqttPublishEvent.QUEUED);this.$32(c)}return g};e.$30=function(a){a.attempt+=1,d("MqttUtils").promiseDone(this.$29(a.topic,a.payload,a.options.qos,a.options.listener,a.attempt,a.startTime),function(){a.ack.resolve()},function(b){a.ack.reject(b)})};e.$32=function(a){var b=this;a.attempt+=1;d("MqttUtils").promiseDone(this.$29(a.topic,a.payload,a.options.qos,a.options.listener,a.attempt,a.startTime),function(){return b.$33(a)},function(a){})};e.$29=function(a,b,e,f,g,h){var i=this,j,k,l=this.getConnectionState(),m=Date.now();!this.$10.canPublish()&&this.$13&&this.$13.canPublish()?(typeof b==="string"?j=this.$13.publish(a,b,e):j=this.$13.publishBinary(a,b,e),k="lp",f!=null&&(j=j.then(function(){return f.onEvent(d("MqttPublishListener").MqttPublishEvent.SENT)})),this.$11.bumpCounter("try_publish_lp")):(typeof b==="string"?j=this.$10.publish(a,b,e,f):j=this.$10.publishBinary(a,b,e,f),k="ws",this.$11.bumpCounter("try_publish_ws"));c("promiseDone")(j,function(){i.$11.eventLogOutgoingPublish({attempt:g,connectionState:l,disconnectCount:i.$10.getDisconnectCount(),errorMessage:null,firstAttemptStartTime:h,payloadSizeBytes:b.length*2,protocol:k,qos:e,sessionID:i.$10.getSessionId(),success:!0,thisAttemptStartTime:m,topic:a})},function(c){i.$11.eventLogOutgoingPublish({attempt:g,connectionState:l,disconnectCount:i.$10.getDisconnectCount(),errorMessage:c!=null?c.toString():null,firstAttemptStartTime:h,payloadSizeBytes:b.length*2,protocol:k,qos:e,sessionID:i.$10.getSessionId(),success:!1,thisAttemptStartTime:m,topic:a})});return j};e.subscribe=function(a,b){var c=this;this.$10.subscribe(a);var d=this.$8.get(a);!d?(d=[b],this.$8.set(a,d)):d.push(b);return function(){var d=c.$8.get(a)||[];d=d.filter(function(a){return a!==b});c.$8.set(a,d);d.length===0&&c.unsubscribeAll(a)}};e.subscribeBinary=function(a,b){var c=this;this.$10.subscribe(a);var d=this.$9.get(a);!d?(d=[b],this.$9.set(a,d)):d.push(b);return function(){var d=c.$9.get(a)||[];d=d.filter(function(a){return a!==b});c.$9.set(a,d);d.length===0&&c.unsubscribeAll(a)}};e.subscribeChannelEvents=function(a){var b=this;this.$3.push(a);return function(){b.unsubscribeChannelEvents(a)}};e.unsubscribeChannelEvents=function(a){a=this.$3.indexOf(a);a>-1&&this.$3.splice(a,1)};e.registerExtraConnectPayloadProvider=function(a){var b=this;this.$19("MqttChannel","registerExtraConnectPayloadProvider called");this.$4.add(a);if(this.$10.isRunning()){a=a.getPublishMessages();a.forEach(function(a){typeof a.payload==="string"?b.publish(a.topic,a.payload,{qos:a.qos,skipBuffer:!0}):b.publishBinary(a.topic,a.payload,{qos:a.qos,skipBuffer:!0})})}};e.unregisterExtraConnectPayloadProvider=function(a){this.$4["delete"](a)};e.unsubscribeAll=function(a){this.$10.unsubscribe(a),this.$8["delete"](a),this.$9["delete"](a)};e.getConnectionState=function(){return this.$5};e.getLongPollingStatus=function(){return this.$7};e.getEndpoint=function(){return this.$1};e.addHook=function(a){this.$10.addHook(a)};e.removeHook=function(a){this.$10.removeHook(a)};e.testOnlyMessageReceived=function(a,b){this.$22(a,b,-1)};e.$34=function(a){var b=this.$15.get(a);b!=null&&b.timeoutId!=null&&d("MqttEnv").Env.clearTimeout(b.timeoutId);this.$15["delete"](a)};e.$31=function(a){var b=this;return d("MqttEnv").Env.setTimeout(function(a){var d=b.$15.get(a);if(!d)return;var e=d.topic;b.$11.bumpCounter("publish_timeout."+e);b.$11.debugTrace("publish_timeout","Timeout publishing topic: "+e+" publishToken: "+a);b.$34(a);d.ack.reject(c("err")("Publish Timed Out"))},i,a)};e.$33=function(a){var b=a.publishToken,c=this.$15.get(b);if(!c)return;this.$34(b);a.ack.resolve();this.$11.debugTrace("publish_success","Topic: "+a.topic+" publishToken: "+a.publishToken);this.$11.bumpCounter("publish_success."+a.topic)};e.$22=function(a,b,c){var d=this.$8.get(a);this.$11.eventLogIncomingPublish({connectionState:this.getConnectionState(),disconnectCount:this.$10.getDisconnectCount(),payloadSizeBytes:b.payloadString.length*2,qos:c,sessionID:this.$10.getSessionId(),topic:a});if(!d)this.$11.debugTrace("_onMessageReceived",a+" being dropped, no listeners");else for(d of d)try{d(b.payloadString)}catch(a){this.$11.logError(a,"Listener exception"),this.$11.bumpCounter("listener_error")}d=this.$9.get(a);this.$11.eventLogIncomingPublish({connectionState:this.getConnectionState(),disconnectCount:this.$10.getDisconnectCount(),payloadSizeBytes:b.payloadBytes.length,qos:c,sessionID:this.$10.getSessionId(),topic:a});if(!d)this.$11.debugTrace("_onMessageReceived",a+" being dropped, no binary listeners");else for(c of d)try{c(b.payloadBytes)}catch(a){this.$11.logError(a,"Binary Listener exception"),this.$11.bumpCounter("listener_error")}};e.$21=function(a){if(d("MqttEnv").Env.genGk(d("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled)){a.isRecoverable?this.$11.bumpCounter("recoverable_error_skipped"):this.$11.bumpCounter("unrecoverable_error_skipped");return}a.isRecoverable?this.$11.bumpCounter("recoverable_error_not_skipped"):this.$11.bumpCounter("unrecoverable_error_not_skipped");this.$35(a)};e.$36=function(a){this.$35(a)};e.$35=function(a){for(var b of this.$3)b.onJSError&&b.onJSError(a)};e.$37=function(){var a=this;this.$14.forEach(function(b){a.$30(b),a.$11.bumpCounter("publish_from_temp_buffer."+b.topic)});this.$14=[];this.$15.forEach(function(b,c,d){a.$32(b),a.$11.bumpCounter("publish_from_buffer."+b.topic)})};e.$23=function(a){a==="Connecting"?(this.$14.forEach(function(a){a.ack.reject(c("err")("Client Reconnecting - "+a.topic))}),this.$14=[]):a==="TransportConnected"&&this.$37(),this.$19("_changeState","Connection state = "+a),this.$38(a,this.$7)};e.$39=function(a,b){this.$13&&this.$13.canPublish()&&this.$37(),this.$19("_changeLPStatus","LP status = "+a+", LP Request status = "+b),this.$38(this.$6,a)};e.$38=function(a,b){var c=this.$10.mqttStateFromConnectionState(a);this.$13&&this.$13.canPublish()&&(c="Connected");this.$6=a;(c!==this.$5||b!=this.$7)&&(this.$5=c,this.$7=b,this.$40(c))};e.$40=function(a){for(var b of this.$3)b.onMQTTStateChanged(a)};e.$20=function(){var a=this,b=[];this.$4.forEach(function(c){try{c=c.getPublishMessages();Array.prototype.push.apply(b,c)}catch(b){a.$11.logError(b,"ConnectPayload provider exception"),a.$11.bumpCounter("connectPayloadProvider_error")}});return b};e.$18=function(){var a=this;d("MqttEnv").Env.genGk(d("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled)&&this.$2&&this.$2!=""&&c("requireDeferred")("MqttLongPollingRunner").__setRef("MqttChannel").onReady(function(b){b=new b(a.$2,a.$12,a.$10.hasFatal(),a.$10.hasConnectSuccess(),function(b,c,d){return a.$22(b,c,d)},function(){var b=Array.from(a.$8.keys()),c=Array.from(a.$9.keys());return Array.from(new Set(b.concat(c)))},function(){return a.$20()},function(b){a.$36(b)},function(b,c){a.$39(b,c)});b.start();a.$10.addHook(b);b.addHook(a.$16);a.$13=b;a.$11.debugTrace("MqttChannel","longPollingRunner loaded")})};e.$19=function(a,b){this.$11.debugTrace(a,"Mqtt channel: "+b)};e.setForegroundState=function(a){this.$12&&this.$12.setForegroundState(a)};e.setChatVisibility=function(a){this.$12&&this.$12.setChatVisibility(a)};e.getEndpointCapabilities=function(){return this.$12.getEndpointCapabilities()};e.setEndpointCapabilities=function(a){this.$12.setEndpointCapabilities(a)};e.getConnection_OnlyForTests=function(){return this.$10};return a}();g["default"]=a}),98);
__d("MqttConfig",["MqttWebConfig"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("MqttWebConfig")}),98);
__d("MqttEnvConfigStorage",["WebStorage"],(function(a,b,c,d,e,f,g){var h,i="mqtt:";function a(a,b){var d=(h||(h=c("WebStorage"))).getLocalStorage();if(d){d=d.getItem(i+a);if(d!=null)return d}return b}function b(a,b){var d=(h||(h=c("WebStorage"))).getLocalStorage();d&&(b==null?d.removeItem(i+a):(h||(h=c("WebStorage"))).setItemGuarded(d,i+a,b))}g.configRead=a;g.configWrite=b}),98);
__d("MqttUnifiedClientConnectFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1744057");b=d("FalcoLoggerInternal").create("mqtt_unified_client_connect",a);e=b;g["default"]=e}),98);
__d("MqttUnifiedClientDisconnectFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1744058");b=d("FalcoLoggerInternal").create("mqtt_unified_client_disconnect",a);e=b;g["default"]=e}),98);
__d("MqttUnifiedClientIncomingPublishFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1744059");b=d("FalcoLoggerInternal").create("mqtt_unified_client_incoming_publish",a);e=b;g["default"]=e}),98);
__d("MqttUnifiedClientOutgoingPublishFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1744060");b=d("FalcoLoggerInternal").create("mqtt_unified_client_outgoing_publish",a);e=b;g["default"]=e}),98);
__d("MqttWsClientTypedLoggerLite",["generateLiteTypedLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=b("generateLiteTypedLogger")("logger:MqttWsClientLoggerConfig")}),null);
__d("MqttLogger",["ChannelClientID","FBLogger","LogHistory","MetaConfig","MqttEnv","MqttGlobalStreamCounter","MqttUnifiedClientConnectFalcoEvent","MqttUnifiedClientDisconnectFalcoEvent","MqttUnifiedClientIncomingPublishFalcoEvent","MqttUnifiedClientOutgoingPublishFalcoEvent","MqttWsClientTypedLoggerLite","NetworkStatus","ODS","Random"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("MetaConfig")._("99"),j="mqtt_client",k=100,l="WEBSOCKET",m=typeof window!=="undefined"?window:self,n=null,o={CLIENT_ERROR:"mqtt_client_error",CONNECT:"mqtt_client_connect",DISCONNECT:"mqtt_client_disconnect",PUBLISH:"mqtt_client_publish",PUBLISH_TIMEOUT:"mqtt_qos1_publish_timeout",SOCKET_DISCONNECT:"mqtt_protocol_error"},p={CONNECT:"connect",DISCONNECT:"disconnect",INCOMING_PUBLISH:"incoming_publish",OUTGOING_PUBLISH:"outgoing_publish"};a=function(){a.getInstance=function(b){n||(n=new a(b));return n};function a(a){this.$1=d("LogHistory").getInstance(j),this.$2=0,this.$3=Date.now(),this.$4=c("ChannelClientID").getID(),this.$7(),this.$5=d("MqttGlobalStreamCounter").getInstance(),this.$5.isEnabled()||(this.$5=null),this.$6=a}var b=a.prototype;b.setAppId=function(a){this.$2===0&&(this.$2=a)};b.eventLogConnect=function(a){var b=a.ackReceived,d=a.attemptNumber,e=a.connectionState,f=a.connectionStatus,g=a.disconnectCount,h=a.duration,i=a.errorMessage,j=a.failTotal,k=a.hostname,m=a.messageSizeBytes,n=a.osConnectivity,q=a.sessionID,r=a.successTotal;a=a.total_duration;var s=f?"success":"failed";this.bumpCounter(o.CONNECT+"."+s);s=r/(r+j);r=n&&this.getBrowserConnectivity();var t={acked:b,attempt_number:d.toString(),client_type:l,connection_state:e,disconnect_count:g.toString(),duration:h.toString(),error:i,event_type:p.CONNECT,extra_data:{connect_success_rate:s.toString(),device_id:this.$4,hostname:k,connectionStatus:f.toString(),exposure:(j=this.$6)!=null?j:""},os_connectivity:r,payload_size:m==null?void 0:m.toString(),session_id:q.toString(),total_duration:a.toString(),ws_count:(n=this.$5)==null?void 0:n.getGlobalState().totalConnectionStreams.toString()};this.$8(function(){c("MqttUnifiedClientConnectFalcoEvent").log(function(){return t})})};b.eventLogPull=function(a){var b=a.duration,c=a.errorMessage,e=a.hostname,f=a.pullEventName,g=a.sessionID;a=a.status;a={connection_status:a,device_id:this.$4,duration:b,error_message:c,hostname:e,href:m.location.hostname,logged_in:d("MqttEnv").Env.isUserLoggedInNow(),session_id:g};this.$9(f,a)};b.eventLogPullFinish=function(a){var b=a.duration,c=a.errorMessage,e=a.publishReceived,f=a.publishSent,g=a.pullEventName;a=a.sessionID;b={device_id:this.$4,duration:b,error_message:c,href:m.location.hostname,logged_in:d("MqttEnv").Env.isUserLoggedInNow(),publish_received:e,publish_sent:f,session_id:a};this.$9(g,b)};b.eventLogDisconnect=function(a){var b=a.disconnectCount,d=a.duration,e=a.errorMessage;a=a.sessionID;this.bumpCounter(o.DISCONNECT);var f={client_type:l,connection_state:"Disconnected",disconnect_count:b.toString(),duration:d.toString(),error:e,event_type:p.DISCONNECT,extra_data:{device_id:this.$4,exposure:(b=this.$6)!=null?b:""},os_connectivity:this.getBrowserConnectivity(),session_id:a.toString(),ws_count:(d=this.$5)==null?void 0:d.getGlobalState().totalConnectionStreams.toString()};this.$8(function(){c("MqttUnifiedClientDisconnectFalcoEvent").log(function(){return f})})};b.eventLogOutgoingPublish=function(a){var b=a.attempt,d=a.connectionState,e=a.disconnectCount,f=a.errorMessage,g=a.firstAttemptStartTime,h=a.payloadSizeBytes,i=a.protocol,j=a.qos,k=a.sessionID,m=a.success,n=a.thisAttemptStartTime;a=a.topic;this.bumpCounter(o.PUBLISH+"."+a);var q=Date.now(),r={acked:j===1?m:null,attempt_number:b.toString(),client_type:l,connection_state:d,disconnect_count:e.toString(),duration:(q-n).toString(),error:f,event_type:p.OUTGOING_PUBLISH,extra_data:{device_id:this.$4,protocol:i},os_connectivity:this.getBrowserConnectivity(),payload_size:h.toString(),qos:j.toString(),session_id:k.toString(),topic:a,total_duration:g!=null?(q-g).toString():null};this.$8(function(){c("MqttUnifiedClientIncomingPublishFalcoEvent").log(function(){return r})})};b.eventLogIncomingPublish=function(a){var b=a.connectionState,d=a.disconnectCount,e=a.payloadSizeBytes,f=a.qos,g=a.sessionID;a=a.topic;var h={client_type:l,connection_state:b,disconnect_count:d.toString(),event_type:p.INCOMING_PUBLISH,extra_data:{device_id:this.$4},os_connectivity:this.getBrowserConnectivity(),payload_size:e.toString(),qos:f.toString(),session_id:g.toString(),topic:a};b=a=="/webrtc"||a=="/rtc_multi";this.$10(function(){c("MqttUnifiedClientOutgoingPublishFalcoEvent").log(function(){return h})},50,b)};b.logError=function(a,b){d("MqttEnv").Env.scheduleLoggingCallback(function(){try{c("FBLogger")(j).catching(a).mustfix(b)}catch(a){}})};b.logErrorWarn=function(a,b){d("MqttEnv").Env.scheduleLoggingCallback(function(){try{c("FBLogger")(j).catching(a).warn(b)}catch(a){}})};b.logWarn=function(a,b){var c=this;d("MqttEnv").Env.scheduleLoggingCallback(function(){try{c.$1.warn(a,b)}catch(a){}})};b.debugTrace=function(a,b){var c=this;d("MqttEnv").Env.scheduleLoggingCallback(function(){try{c.$1.debug(a,b)}catch(a){}})};b.bumpCounter=function(a){var b=this;if(!d("Random").coinflip(k))return;d("MqttEnv").Env.scheduleLoggingCallback(function(){b.$2!==0&&(h||(h=d("ODS"))).bumpEntityKey(2966,"mqtt_ws_client",b.$2+"."+a,k),(h||(h=d("ODS"))).bumpEntityKey(2966,"mqtt_ws_client",a,k)})};b.$9=function(a,b,e){var f=this;d("MqttEnv").Env.scheduleLoggingCallback(function(){b.event_type=a;b.app_id=f.$2;b.online=f.$11();var d=JSON.stringify(b);f.$1.log(a,d,{weight:e});a!==o.DISCONNECT&&c("MqttWsClientTypedLoggerLite").log(b)})};b.$10=function(a,b,c){i&&b!==0?c=c||d("Random").coinflip(b):c=!0;c&&d("MqttEnv").Env.scheduleCallback(a)};b.$8=function(a){this.$10(a,0,!1)};b.$11=function(){return m.navigator&&m.navigator.onLine!==void 0?m.navigator.onLine:!1};b.getBrowserConnectivity=function(){return c("NetworkStatus").isOnline()};b.$7=function(){var a=this;if(m.navigator&&m.navigator.onLine!==void 0){var b=function(b){b=b.online;b||a.bumpCounter("browser_disconnect")};c("NetworkStatus").onChange(b)}};return a}();g["default"]=a}),98);
__d("MqttEnvGk",["MqttEnv","MqttLogger","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(a){case d("MqttEnv").MqttGkNames.mqtt_waterfall_log_client_sampling:return c("gkx")("21119");case d("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled:return!0;case d("MqttEnv").MqttGkNames.mqtt_lp_use_fetch:return c("gkx")("21120");case d("MqttEnv").MqttGkNames.mqtt_fast_lp:return c("gkx")("21121");case d("MqttEnv").MqttGkNames.mqtt_lp_no_delay:return c("gkx")("21122");case d("MqttEnv").MqttGkNames.mqtt_enable_publish_over_polling:return c("gkx")("21123");case d("MqttEnv").MqttGkNames.mqttweb_global_connection_counter:return c("gkx")("21124");default:c("MqttLogger").getInstance().logError(new Error("unknown gk"),"Unknown GK value "+a);return!1}}g["default"]=a}),98);
__d("MqttEnvInitializer",["CurrentMessengerUser","MqttEnv","MqttEnvConfigStorage","MqttEnvGk","MqttLogger","Random","clearTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";function a(a){d("MqttEnv").Env.initialize(c("Random").random,d("CurrentMessengerUser").isLoggedInNow,c("clearTimeout"),c("setTimeoutAcrossTransitions"),function(){return c("MqttLogger").getInstance()},c("MqttEnvGk"),a!=null?a:null,null,null,d("MqttEnvConfigStorage").configRead,d("MqttEnvConfigStorage").configWrite)}b={genGk:c("MqttEnvGk"),initialize:a};g["default"]=b}),98);
__d("FBMqttChannel",["MqttChannel","MqttConfig","MqttEnvInitializer"],(function(a,b,c,d,e,f,g){"use strict";c("MqttEnvInitializer").initialize();b=new(c("MqttChannel"))({appId:(a=c("MqttConfig")).appID,capabilities:a.capabilities,chatVisibility:!1,clientCapabilities:a.clientCapabilities,endpoint:a.endpoint,initialSubscribedTopics:a.subscribedTopics,phpOverride:a.hostNameOverride,pollingEndpoint:a.pollingEndpoint,userFbid:a.fbid});g["default"]=b}),98);
__d("FbtLogging",["cr:1094907","cr:8828"],(function(a,b,c,d,e,f,g){"use strict";a=b("cr:1094907")==null?void 0:b("cr:1094907").logImpression;c=b("cr:8828")==null?void 0:b("cr:8828").logImpressionV2;g.logImpression=a;g.logImpressionV2=c}),98);
__d("InstagramODSObserver",["BaseEventEmitter"],(function(a,b,c,d,e,f,g){"use strict";a=new(c("BaseEventEmitter"))();b=a;g["default"]=b}),98);
__d("InstagramODSImpl",["InstagramODSObserver","ODS"],(function(a,b,c,d,e,f,g){"use strict";var h,i="instagram",j={addListener:function(a){c("InstagramODSObserver").addListener("event",a)},incr:function(a,b){b===void 0&&(b=1),(h||(h=d("ODS"))).bumpEntityKey(5588,i,a,b),c("InstagramODSObserver").emit("event",{count:b,key:a})},incr_CAREFUL_WHEN_USE_DYNAMIC_KEY:function(a,b){j.incr(a,b)}};a=j;g["default"]=a}),98);
__d("IntlQtEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1848815");b=d("FalcoLoggerInternal").create("intl_qt_event",a);e=b;g["default"]=e}),98);
__d("PromiseResult",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;a=function(){function a(){var a=this;this.promise=new(g||(g=b("Promise")))(function(b,c){a.$1=b,a.$2=c})}var c=a.prototype;c.resolve=function(a){this.$1(a)};c.reject=function(a){this.$2(a)};return a}();f["default"]=a}),66);
__d("MqttFetchClient",["MqttEnv","MqttProtocolCodec","MqttUserName","MqttUtils","Promise","PromiseResult"],(function(a,b,c,d,e,f,g){"use strict";var h,i="fetch_pull",j="fetch_pull_finish",k="fetch_",l=6e4,m="action",n="chunked",o="send",p="true",q=5,r=20,s=10,t=5e3,u=typeof window!=="undefined"?window:self;a=function(){function a(){this.$1="",this.$2=d("MqttEnv").Env.getLoggerInstance(),this.$3=0,this.$4="",this.$5=new(c("MqttUserName"))("",0,1,"",0,!0),this.$6=function(){},this.$7=function(a){},this.$8=function(){},this.$9=function(a){},this.$10=0,this.$11=0,this.$12=0,this.$13=0,this.$14="Ready",this.$15=[],this.$16=[],this.$17=null,this.$18=!1,this.$19=0}a.isSupported=function(){return typeof u.fetch==="function"};var e=a.prototype;e.run=function(a,b,c,e,f,g,h,i){this.$1=d("MqttUtils").endpointWithSessionId(a,b),this.$3=b,this.$4=c,this.$5=e,this.$6=f,this.$7=g,this.$8=h,this.$9=i,this.$20()};e.isTopicSupported=function(a){return!0};e.publish=function(a,b){return this.$21(a,b)};e.publishBinary=function(a,b){return this.$21(a,b)};e.$21=function(a,d){if(this.$14!=="ReceivingData"){this.$2.bumpCounter(k+"publish."+a+".invalidstate");return(h||(h=b("Promise"))).reject("not connected")}else{this.$2.bumpCounter(k+"publish."+a+".publish");var e=new(c("PromiseResult"))();a={topic:a,payload:d,promiseResult:e};this.$15.push(a);this.$22();return e.promise}};e.abort=function(){this.$6=function(){},this.$7=function(a){},this.$8=function(){},this.$9=function(a){}};e.$23=function(a){var b=this;a.forEach(function(a){b.$2.bumpCounter(k+"publish."+a.topic+".resolved"),a.promiseResult.resolve()});this.$12+=a.length};e.$24=function(a,b){var c=this;a.forEach(function(a){c.$2.bumpCounter(k+"publish."+a.topic+".rejected"),a.promiseResult.reject(b)})};e.$25=function(a,b,c,d){var e=a.map(function(a){return a.topic}).join(",");this.$2.debugTrace("FetchClient","Fetch publish request failed. Publishes:"+e+", retry:"+c);this.$2.bumpCounter(k+"publish_request_failed");this.$14!=="ReceivingData"||c===q?(this.$24(a,d),this.$18=!1,this.$2.bumpCounter(k+"publish_request_failed_final"),this.$22()):this.$26(a,b,c+1)};e.$27=function(a,b,c,d){if(!d.ok){this.$2.bumpCounter(k+"publish_request_failed.http."+d.status);if(d.status===409){this.$19++;if(this.$19>=s){this.$2.bumpCounter(k+"409_reset");this.$28(new Error("Too many 409 errors"));return}}this.$25(a,b,c,this.$29(d));return}this.$2.bumpCounter(k+"publish_request_success");b=a.map(function(a){return a.topic}).join(",");this.$2.debugTrace("FetchClient","Fetch publish request success. Publishes:"+b+", retry:"+c);this.$23(a);this.$18=!1;this.$22()};e.$22=function(){if(this.$14!=="ReceivingData")return;if(this.$18)return;if(this.$15.length===0&&this.$16.length===0)return;this.$18=!0;var a=this.$15.slice(0,r);this.$15=this.$15.slice(r,this.$15.length);this.$17!=null&&d("MqttEnv").Env.clearTimeout(this.$17);this.$17=null;var b=this.$16.slice(0,r);this.$16=this.$16.slice(r,this.$16.length);this.$26(a,b,0)};e.$26=function(a,b,c){var e=this,f=a.map(function(a){return a.topic}).join(",");this.$2.debugTrace("FetchClient","Fetch publish request sent. Publishes:"+f+", retry:"+c);f=d("MqttUtils").endpointWithExtraParameter(this.$1,m,o);var g=a.map(function(a){return{topic:a.topic,payload:a.payload,qos:0,messageId:d("MqttEnv").Env.random()}});g=this.$5.gen(this.$3,[],g,b);this.$2.bumpCounter(k+"publish_request");d("MqttUtils").promiseDoneWithTimeout(u.fetch(f,{method:"POST",mode:"cors",cache:"no-cache",credentials:"include",referrer:"no-referrer",body:g,keepalive:!1}),function(d){return e.$27(a,b,c,d)},function(d){return e.$25(a,b,c,d)},l)};e.$30=function(a){a=a.message;this.$2.debugTrace("FetchClient","Fetch request failed with error:"+a);this.$9(a);this.$31(!1,a);this.$2.bumpCounter(k+"error");this.$14="Error"};e.$32=function(a){var b=this;this.$2.debugTrace("FetchClient","Fetch response data received");a=d("MqttProtocolCodec").decodeByteMessages(new Uint8Array(a));a=a.messages;var c=a.filter(function(a){return a.messageType===d("MqttProtocolCodec").MESSAGE_TYPE.PINGREQ});a=a.filter(function(a){return a.messageType===d("MqttProtocolCodec").MESSAGE_TYPE.PUBLISH}).map(function(a){if(!(a instanceof d("MqttProtocolCodec").WireMessage.Publish))return{};a=a;a.qos===1&&a.messageIdentifier!=null&&(b.$16.push(a.messageIdentifier),b.$17==null&&(b.$17=d("MqttEnv").Env.setTimeout(function(){b.$22()},t)));return{topic:a.topic,payload:a.payloadMessage,qos:a.qos}});for(var e of a){var f;this.$2.bumpCounter(k+"response_"+((f=e.topic)!=null?f:"void"))}a&&a.length>0&&(this.$13+=a.length,this.$7(a));c&&c.length>0&&this.$33()};e.$33=function(){this.$2.debugTrace("FetchClient","Got server ping request"),this.$2.bumpCounter(k+"ping")};e.$28=function(a){this.$2.debugTrace("FetchClient","Fetch request ended: "+a.toString()),this.$2.bumpCounter(k+"done"),this.$34(a.message),this.$8(),this.$14="Done"};e.$35=function(a,b,c){var e=this;if(c!=null)try{this.$32(c)}catch(a){this.$28(a);this.$2.bumpCounter(k+"dataDecodeException");return}if(b){this.$28(new Error("EOF"));return}d("MqttUtils").promiseDone(a.read(),function(c){var b=c.done;c=c.value;return e.$35(a,b,c)},function(a){return e.$28(a)})};e.$36=function(a){if(!a.ok){this.$2.bumpCounter(k+"error.http."+a.status);this.$30(this.$29(a));return}a=a.body;if(!a){this.$30(new Error("Empty body"));return}a=a.getReader();this.$6();this.$2.bumpCounter(k+"success");this.$31(!0,null);this.$11=Date.now();this.$14="ReceivingData";this.$2.debugTrace("FetchClient","Fetch request success");this.$35(a,!1,null)};e.$34=function(a){this.$2.eventLogPullFinish({pullEventName:j,sessionID:this.$3,duration:Date.now()-this.$11,errorMessage:a,publishReceived:this.$13,publishSent:this.$12})};e.$31=function(a,b){this.$2.eventLogPull({pullEventName:i,sessionID:this.$3,status:a,duration:Date.now()-this.$10,hostname:this.$1,errorMessage:b})};e.$20=function(){var a=this;if(this.$14!=="Ready")return;this.$2.debugTrace("FetchClient","Sending fetch request");this.$2.bumpCounter(k+"request");this.$10=Date.now();var b=d("MqttUtils").endpointWithExtraParameter(this.$1,n,p);d("MqttUtils").promiseDoneWithTimeout(u.fetch(b,{method:"POST",mode:"cors",cache:"no-cache",credentials:"include",referrer:"no-referrer",body:this.$4,keepalive:!1}),function(b){return a.$36(b)},function(b){return a.$30(b)},l)};e.$29=function(a){return new Error("Http error, status="+a.status)};return a}();g["default"]=a}),98);
__d("MqttLongPollingClient",["MqttEnv","MqttProtocolCodec","MqttUserName","Promise","XHRRequest","getCrossOriginTransport"],(function(a,b,c,d,e,f,g){"use strict";var h,i=120*1e3,j="simple_pull",k="longpolling_";a=function(){function a(){this.$3="",this.$4=0,this.$2=d("MqttEnv").Env.getLoggerInstance(),this.$1="Ready",this.$5="",this.$6=new(c("MqttUserName"))("",0,1,"",0,!0),this.$7=function(){},this.$8=function(a){},this.$9=function(){},this.$10=function(a){},this.$11=0,this.$12=null,this.$13=new Set(["/t_ms","/messenger_sync_get_diffs","/messenger_sync_create_queue","/webrtc","/rtc_multi"])}var e=a.prototype;e.run=function(a,b,c,d,e,f,g,h){this.$3=a,this.$4=b,this.$5=c,this.$6=d,this.$7=e,this.$8=f,this.$9=g,this.$10=h,this.$14(this.$5)};e.isTopicSupported=function(a){return this.$13.has(a)};e.publish=function(a,c){return(h||(h=b("Promise"))).reject("not supported")};e.publishBinary=function(a,c){return(h||(h=b("Promise"))).reject("not supported")};e.abort=function(){this.$12!=null&&this.$12.abort("Disconnected")};e.$15=function(a,b){if(this.$1===a)return;this.$1=a;a==="Error"&&b!=null&&this.$10(b);this.$2.debugTrace("LongPollingClient","_changeStatus : "+a)};e.$16=function(a){if(this.$1!=="RequestSend")return;if(!a){this.$17("EmptyResponse",null);return}this.$7();this.$2.bumpCounter(k+"success");this.$18(!0,null);this.$15("ResponseReceived");a=d("MqttProtocolCodec").decodeByteMessages(new Uint8Array(a));a=a.messages.filter(function(a){return a instanceof d("MqttProtocolCodec").WireMessage.Publish}).map(function(a){if(a instanceof d("MqttProtocolCodec").WireMessage.Publish){a=a;return{topic:a.topic,payload:a.payloadMessage,qos:a.qos}}else return{}});this.$8(a);this.$9()};e.$17=function(a,b){b=b!=null?b.message:"null";this.$2.debugTrace("LongPollingClient Error","Poll failed with error:"+a+", errorMsg:"+b);this.$18(!1,a+":"+b);this.$2.bumpCounter(k+"error."+a);this.$15("Error",a)};e.$18=function(a,b){this.$2.eventLogPull({pullEventName:j,sessionID:this.$4,status:a,duration:Date.now()-this.$11,hostname:this.$3,errorMessage:b})};e.$14=function(a){var b=this;if(this.$1!=="Ready"||this.$12)return;this.$2.bumpCounter(k+"request");try{this.$11=Date.now(),this.$12=new(c("XHRRequest"))(this.$3).setResponseType("arraybuffer").setRawData(a).setTransportBuilder(c("getCrossOriginTransport").withCredentials).setResponseHandler(function(a){return b.$16(a)}).setNetworkFailureHandler(function(a){b.$17("Network",a)}).setErrorHandler(function(a){b.$17("Error",a)}).setAbortHandler(function(a){b.$17("Abort",null)}).setTimeoutHandler(function(){b.$17("Timeout",null)}).setTimeout(i).send(),this.$15("RequestSend")}catch(a){this.$17("Error",a)}};return a}();g["default"]=a}),98);
__d("MqttLongPollingHookCollection",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=new Set()}var b=a.prototype;b.addHook=function(a){this.$1.add(a)};b.removeHook=function(a){this.$1["delete"](a)};b.onPollRequestSent=function(){this.$1.forEach(function(a){a.onPollRequestSent()})};b.onPollRequestSuccess=function(){this.$1.forEach(function(a){a.onPollRequestSuccess()})};b.onPollResponse=function(a){this.$1.forEach(function(b){b.onPollResponse(a)})};b.onPollFinish=function(){this.$1.forEach(function(a){a.onPollFinish()})};b.onPollRequestFailed=function(a){this.$1.forEach(function(b){b.onPollRequestFailed(a)})};b.onPollShutdownAbort=function(){this.$1.forEach(function(a){a.onPollShutdownAbort()})};return a}();f["default"]=a}),66);
__d("exponentialBackoff",["MqttEnv"],(function(a,b,c,d,e,f,g){function a(a,b){b===void 0&&(b=null);var c=null,e=0;function f(){for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];var i=function(){a.apply(b,g)};if(c===null){var j=Math.max(0,Math.pow(2,Math.min(e,6))*(1e3+d("MqttEnv").Env.random()*100)-2e3);c=d("MqttEnv").Env.setTimeout(function(){i(),c=null},j)}e++}f.reset=function(){e=0,c!=null&&(d("MqttEnv").Env.clearTimeout(c),c=null)};f.isPending=function(){return c!=null};return f}g["default"]=a}),98);
__d("MqttLongPollingRunner",["MqttEnv","MqttFetchClient","MqttLongPollingClient","MqttLongPollingHookCollection","MqttTypes","MqttUtils","MqttWebSocketUtils","Promise","exponentialBackoff"],(function(a,b,c,d,e,f,g){"use strict";var h,i=4,j=1e3,k=3e3,l="mqtt_should_longpoll",m="last_lp",n="yes",o="no";a=function(){function a(a,b,e,f,g,h,i,j,k){var l=this;this.$23=function(){try{if(!l.$30())return;l.$5.debugTrace("LongPollingRunner","_startPollingIfNecessary called");var a=l.$31();l.$14=a;var b=l.$9(),c=l.$10();b=b.filter(function(b){return a.isTopicSupported(b)});c=c.filter(function(b){return a.isTopicSupported(b.topic)});if(b.length===0&&c.length===0){l.$5.debugTrace("LongPollingRunner","Poll skipped, nothing to do");l.$14=null;d("MqttEnv").Env.setTimeout(function(){l.$23()},1e3);return}var e=d("MqttUtils").generateSessionId();a.run(l.$6,e,l.$7.gen(e,b,c),l.$7,function(){return l.$32()},function(a){return l.$33(a)},function(){return l.$34()},function(a){return l.$35(a)});l.$19.onPollRequestSent();e=b.join(",");b=c.map(function(a){return a.topic}).join(",");l.$5.debugTrace("LongPollingRunner","Making a poll request to "+l.$6+". SubscribedTopics:"+e+". Publishes:"+b)}catch(a){a&&l.$5.logErrorWarn(a,"lp_js_error"),l.$11(new(d("MqttTypes").MqttChannelError)(!1,"js error lp",a)),l.$35("lp_js_error")}};this.$6=a;this.$7=b;this.$1=f;this.$2=0;this.$3=e;this.$4=d("MqttWebSocketUtils").hasWSSupport();this.$5=d("MqttEnv").Env.getLoggerInstance();this.$8=g;this.$9=h;this.$10=i;this.$11=j;this.$12=k;this.$13=!1;this.$14=null;this.$15="LPInactive";this.$16="NotSent";this.$17=0;this.$19=new(c("MqttLongPollingHookCollection"))();this.$18=c("exponentialBackoff")(this.$23,this);this.$20=0;this.$21=o;a=d("MqttEnv").Env.genGk(d("MqttEnv").MqttGkNames.mqtt_lp_use_fetch);b=c("MqttFetchClient").isSupported();a?this.$5.bumpCounter("fetch_gk_pass"):this.$5.bumpCounter("fetch_gk_fail");b?this.$5.bumpCounter("fetch_api_supported"):this.$5.bumpCounter("fetch_api_not_supported");this.$22=a&&b}var e=a.prototype;e.addHook=function(a){this.$19.addHook(a)};e.start=function(){var a=this;this.$21=d("MqttEnv").Env.configRead(m,o);this.$5.debugTrace("LongPollingRunner","Runner loaded, last status "+this.$21);this.$20=Date.now();this.$23();d("MqttEnv").Env.setTimeout(function(){a.$23()},j+100);d("MqttEnv").Env.setTimeout(function(){a.$23()},k+100)};e.shutdown=function(){this.$5.debugTrace("LongPollingRunner","Shutdown called"),this.$14&&this.$14.abort(),this.$19.onPollShutdownAbort(),this.$14=null};e.canPublish=function(){return this.$15==="LPActive"&&this.$16==="ReceivingData"};e.publish=function(a,b,c){return this.$24(a,b)};e.publishBinary=function(a,b,c){return this.$24(a,b)};e.$24=function(a,c){if(d("MqttEnv").Env.genGk(d("MqttEnv").MqttGkNames.mqtt_enable_publish_over_polling)&&(this.$14&&this.$14.isTopicSupported(a)))if(typeof c==="string")return this.$14.publish(a,c);else return this.$14.publishBinary(a,c);return(h||(h=b("Promise"))).reject()};e.onConnectAttempt=function(){};e.onConnectFailure=function(){this.$2++,this.$23()};e.onConnected=function(){};e.onConnectSuccess=function(){this.$1=!0,d("MqttEnv").Env.configWrite(m,null)};e.onConnectionLost=function(){};e.onConnectionDisconnect=function(){};e.onSubscribe=function(a){};e.onUnsubscribe=function(a){};e.onPublish=function(a){};e.onMessage=function(a){};e.onWSFatal=function(){this.$3=!0,this.$23()};e.getStatus=function(){return this.$15};e.getRequestStatus=function(){return this.$16};e.$25=function(a){a!==this.$15&&(this.$5.debugTrace("LongPollingRunner","status changed to "+a+" from "+this.$15),this.$15=a,this.$12(this.$15,this.$16))};e.$26=function(a){if(!this.$22)return;a!==this.$16&&(this.$5.debugTrace("LongPollingRunner","request status changed to "+a+" from "+this.$16),this.$16=a,this.$12(this.$15,this.$16))};e.$27=function(){this.$17=0};e.$28=function(){this.$17++,this.$17>=i&&this.$25("LPError")};e.$29=function(){var a,b=(a=d("MqttEnv")).Env.genGk(a.MqttGkNames.mqtt_lp_no_delay),c=a.Env.genGk(a.MqttGkNames.mqtt_ws_polling_enabled);a=a.Env.genGk(a.MqttGkNames.mqtt_fast_lp);this.$5.debugTrace("LongPollingRunner","_shouldPoll? pollNow:"+String(b)+" enabled:"+String(c)+" fastPoll:"+String(a)+" hasWSSupport:"+String(this.$4)+" hasWsSuccessBefore:"+String(this.$1)+" failureCount:"+this.$2+" wsFatal:"+String(this.$3));if(!c)return!1;if(b){this.$5.bumpCounter(l+".nd");return!0}if(!this.$4){this.$5.bumpCounter(l+".na");return!0}if(this.$3){this.$5.bumpCounter(l+".fatal");return!0}if(this.$1)return!1;if(a){c=Date.now()-this.$20;if(this.$21===n){if(this.$2>=1)return!0;if(c>j){this.$5.bumpCounter(l+".fastdelay");return!0}}else if(c>k){this.$5.bumpCounter(l+".regulardelay");return!0}}if(this.$2>=3){this.$5.bumpCounter(l+".failure");return!0}return!1};e.$30=function(){if(this.$14!=null)return!1;var a=this.$29();!this.$13&&a&&(this.$5.bumpCounter("polling_kickin"),this.$13=!0,this.$25("LPActive"),this.$27());this.$13&&!a&&(this.$5.bumpCounter("polling_stopped"),this.$13=!1,this.$25("LPInactive"),this.$27());return a};e.$31=function(){if(this.$22){this.$5.debugTrace("LongPollingRunner","Creating polling client using Fetch API");return new(c("MqttFetchClient"))()}else{this.$5.debugTrace("LongPollingRunner","Creating regular Polling client");return new(c("MqttLongPollingClient"))()}};e.$32=function(){this.$5.debugTrace("LongPollingRunner","Poll success"),this.$19.onPollRequestSuccess(),this.$18.reset(),this.$25("LPActive"),this.$27(),d("MqttEnv").Env.configWrite(m,n),this.$26("ReceivingData")};e.$33=function(a){var b=a.map(function(a){return a.topic}).join(",");this.$5.debugTrace("LongPollingRunner","Poll response received, message received:"+b);for(b of a)this.$19.onPollResponse(b.topic),this.$8(b.topic,b.payload,b.qos)};e.$34=function(){this.$5.debugTrace("LongPollingRunner","Poll finish"),this.$19.onPollFinish(),this.$14&&this.$14.abort(),this.$14=null,this.$23(),this.$26("NotSent")};e.$35=function(a){this.$19.onPollRequestFailed(a),this.$14&&this.$14.abort(),this.$14=null,this.$18(),this.$28(),this.$26("NotSent")};return a}();g["default"]=a}),98);
__d("VideoPlayerWithLiveVideoInterruptedOverlay.react",["fbt","FDSLoadingAnimation.react","FDSTextPairing.react","VideoPlayerHooks","VideoPlayerInteractionOverlay.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||d("react");function a(){var a=(j||(j=d("VideoPlayerHooks"))).useStreamInterrupted(),b=j.useIsLiveRewindActive();return!a||b?null:k.jsx(d("VideoPlayerInteractionOverlay.react").VideoPlayerInteractionOverlay,{children:k.jsxs("div",babelHelpers["extends"]({className:"x6s0dn4 x18l40ae x1ey2m1c x9f619 x78zum5 xdt5ytf xtijo5x x1o0tod xl56j7k x10l6tqk x13vifvy"},{children:[k.jsx("div",{children:k.jsx(c("FDSTextPairing.react"),{body:h._(/*BTDS*/"La transmisi\u00f3n est\u00e1 esperando a recibir se\u00f1al. Se reanudar\u00e1 en breve."),bodyColor:"white",headline:h._(/*BTDS*/"Esperando a la se\u00f1al de v\u00eddeo en directo"),headlineColor:"white",level:2,textAlign:"center"})}),k.jsx("div",babelHelpers["extends"]({className:"xc9qbxq x1sy10c2 x1n2onr6 x14qfxbe"},{children:k.jsx(c("FDSLoadingAnimation.react"),{size:36})}))]}))})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("XAsyncRequest",["cr:1042"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:1042")}),98);
__d("XAsyncRequestWWW",["AsyncRequest"],(function(a,b,c,d,e,f,g){a=function(){function a(a){var b=this;this.setAllowCrossPageTransition=function(a){b.$1.setAllowCrossPageTransition(a);return b};this.$1=new(c("AsyncRequest"))(a)}var b=a.prototype;b.setURI=function(a){this.$1.setURI(a);return this};b.setTimeoutHandler=function(a,b){this.$1.setTimeoutHandler(a,b);return this};b.setOption=function(a,b){this.$1.setOption(a,b);return this};b.setMethod=function(a){this.$1.setMethod(a);return this};b.setAutoProcess=function(a){this.$1.setOption("suppressEvaluation",a);return this};b.setData=function(a){this.$1.setData(a);return this};b.setHandler=function(a){this.$1.setHandler(a);return this};b.setPayloadHandler=function(a){this.setHandler(function(b){return a(b.payload)});return this};b.setErrorHandler=function(a){this.$1.setErrorHandler(a);return this};b.send=function(){this.$1.send();return this};b.abort=function(){this.$1.abort()};b.setReadOnly=function(a){this.$1.setReadOnly(a);return this};b.setAllowCrossOrigin=function(a){this.$1.setAllowCrossOrigin(a);return this};b.setAllowCredentials=function(a){this.$1.setAllowCredentials(a);return this};return a}();g["default"]=a}),98);
__d("bumpVultureJSHash",["ODS"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){(h||(h=d("ODS"))).bumpEntityKey(7506,"vulture_js",a,b)}g["default"]=a}),98);/*FB_PKG_DELIM*/
/**
 * License: https://www.facebook.com/legal/license/yKsQCAUqcFZ/
 */
__d("dexie-4.0.1",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){(function(b,c){typeof g==="object"&&typeof h!=="undefined"?h.exports=c():(b=typeof globalThis!=="undefined"?globalThis:b||self,b.Dexie=c())})(this,function(){var b=function(a,c){b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return b(a,c)};function c(a,c){if(typeof c!=="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");b(a,c);function d(){this.constructor=a}a.prototype=c===null?Object.create(c):(d.prototype=c.prototype,new d())}var d=function(){d=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a};return d.apply(this,arguments)};function e(a,b,c){if(c||arguments.length===2)for(var d=0,e=b.length,f;d<e;d++)(f||!(d in b))&&(f||(f=Array.prototype.slice.call(b,0,d)),f[d]=b[d]);return a.concat(f||Array.prototype.slice.call(b))}var f=typeof globalThis!=="undefined"?globalThis:typeof self!=="undefined"?self:typeof window!=="undefined"?window:a,g=Object.keys,h=Array.isArray;typeof Promise!=="undefined"&&!f.Promise&&(f.Promise=Promise);function i(a,b){if(typeof b!=="object")return a;g(b).forEach(function(c){a[c]=b[c]});return a}var j=Object.getPrototypeOf,k={}.hasOwnProperty;function l(a,b){return k.call(a,b)}function m(a,b){typeof b==="function"&&(b=b(j(a))),(typeof Reflect==="undefined"?g:Reflect.ownKeys)(b).forEach(function(c){o(a,c,b[c])})}var n=Object.defineProperty;function o(a,b,c,d){n(a,b,i(c&&l(c,"get")&&typeof c.get==="function"?{get:c.get,set:c.set,configurable:!0}:{value:c,configurable:!0,writable:!0},d))}function p(a){return{from:function(b){a.prototype=Object.create(b.prototype);o(a.prototype,"constructor",a);return{extend:m.bind(null,a.prototype)}}}}var q=Object.getOwnPropertyDescriptor;function r(a,b){var c=q(a,b);return c||(c=j(a))&&r(c,b)}var s=[].slice;function t(a,b,c){return s.call(a,b,c)}function u(a,b){return b(a)}function v(a){if(!a)throw new Error("Assertion Failed")}function aa(a){f.setImmediate?setImmediate(a):setTimeout(a,0)}function ba(a,b){return a.reduce(function(a,c,d){c=b(c,d);c&&(a[c[0]]=c[1]);return a},{})}function w(a,b){if(typeof b==="string"&&l(a,b))return a[b];if(!b)return a;if(typeof b!=="string"){var c=[];for(var d=0,e=b.length;d<e;++d){var f=w(a,b[d]);c.push(f)}return c}f=b.indexOf(".");if(f!==-1){d=a[b.substr(0,f)];return d==null?void 0:w(d,b.substr(f+1))}return void 0}function x(a,b,c){if(!a||b===void 0)return;if("isFrozen"in Object&&Object.isFrozen(a))return;if(typeof b!=="string"&&"length"in b){v(typeof c!=="string"&&"length"in c);for(var d=0,e=b.length;d<e;++d)x(a,b[d],c[d])}else{d=b.indexOf(".");if(d!==-1){e=b.substr(0,d);d=b.substr(d+1);if(d==="")c===void 0?h(a)&&!isNaN(parseInt(e))?a.splice(e,1):delete a[e]:a[e]=c;else{var f=a[e];(!f||!l(a,e))&&(f=a[e]={});x(f,d,c)}}else c===void 0?h(a)&&!isNaN(parseInt(b))?a.splice(b,1):delete a[b]:a[b]=c}}function ca(a,b){typeof b==="string"?x(a,b,void 0):"length"in b&&[].map.call(b,function(b){x(a,b,void 0)})}function da(a){var b={};for(var c in a)l(a,c)&&(b[c]=a[c]);return b}var ea=[].concat;function fa(a){return ea.apply([],a)}var y="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(fa([8,16,32,64].map(function(a){return["Int","Uint","Float"].map(function(b){return b+a+"Array"})}))).filter(function(a){return f[a]}),ga=new Set(y.map(function(a){return f[a]}));function ha(a){var b={};for(var c in a)if(l(a,c)){var d=a[c];b[c]=!d||typeof d!=="object"||ga.has(d.constructor)?d:ha(d)}return b}function ia(a){for(var b in a)if(l(a,b))return!1;return!0}var ja=null;function z(a){ja=new WeakMap();a=ka(a);ja=null;return a}function ka(a){if(!a||typeof a!=="object")return a;var b=ja.get(a);if(b)return b;if(h(a)){b=[];ja.set(a,b);for(var c=0,d=a.length;c<d;++c)b.push(ka(a[c]))}else if(ga.has(a.constructor))b=a;else{c=j(a);b=c===Object.prototype?{}:Object.create(c);ja.set(a,b);for(d in a)l(a,d)&&(b[d]=ka(a[d]))}return b}var la={}.toString;function ma(a){return la.call(a).slice(8,-1)}var na=typeof Symbol!=="undefined"?Symbol.iterator:"@@iterator",oa=typeof na==="symbol"?function(a){var b;return a!=null&&(b=a[na])&&b.apply(a)}:function(){return null};function A(a,b){b=a.indexOf(b);b>=0&&a.splice(b,1);return b>=0}var pa={};function B(a){var b,c,d,e;if(arguments.length===1){if(h(a))return a.slice();if(this===pa&&typeof a==="string")return[a];if(e=oa(a)){c=[];while(d=e.next(),!d.done)c.push(d.value);return c}if(a==null)return[a];b=a.length;if(typeof b==="number"){c=new Array(b);while(b--)c[b]=a[b];return c}return[a]}b=arguments.length;c=new Array(b);while(b--)c[b]=arguments[b];return c}var qa=typeof Symbol!=="undefined"?function(a){return a[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1};y=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"];var C=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"];y=y.concat(C);var ra={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function sa(a,b){this.name=a,this.message=b}p(sa).from(Error).extend({toString:function(){return this.name+": "+this.message}});function ta(a,b){return a+". Errors: "+Object.keys(b).map(function(a){return b[a].toString()}).filter(function(a,b,c){return c.indexOf(a)===b}).join("\n")}function ua(a,b,c,d){this.failures=b,this.failedKeys=d,this.successCount=c,this.message=ta(a,b)}p(ua).from(sa);function va(a,b){this.name="BulkError",this.failures=Object.keys(b).map(function(a){return b[a]}),this.failuresByPos=b,this.message=ta(a,this.failures)}p(va).from(sa);var wa=y.reduce(function(a,b){return a[b]=b+"Error",a},{}),xa=sa,D=y.reduce(function(b,c){var d=c+"Error";function a(a,b){this.name=d,!a?(this.message=ra[c]||d,this.inner=null):typeof a==="string"?(this.message="".concat(a).concat(b?"\n "+b:""),this.inner=b||null):typeof a==="object"&&(this.message="".concat(a.name," ").concat(a.message),this.inner=a)}p(a).from(xa);b[c]=a;return b},{});D.Syntax=SyntaxError;D.Type=TypeError;D.Range=RangeError;var ya=C.reduce(function(a,b){a[b+"Error"]=D[b];return a},{});function za(a,b){if(!a||a instanceof sa||a instanceof TypeError||a instanceof SyntaxError||!a.name||!ya[a.name])return a;b=new ya[a.name](b||a.message,a);"stack"in a&&o(b,"stack",{get:function(){return this.inner.stack}});return b}C=y.reduce(function(a,b){["Syntax","Type","Range"].indexOf(b)===-1&&(a[b+"Error"]=D[b]);return a},{});C.ModifyError=ua;C.DexieError=sa;C.BulkError=va;function E(){}function Aa(a){return a}function Ba(a,b){return a==null||a===Aa?b:function(c){return b(a(c))}}function F(a,b){return function(){a.apply(this,arguments),b.apply(this,arguments)}}function Ca(a,b){return a===E?b:function(){var c=a.apply(this,arguments);c!==void 0&&(arguments[0]=c);var d=this.onsuccess,e=this.onerror;this.onsuccess=null;this.onerror=null;var f=b.apply(this,arguments);d&&(this.onsuccess=this.onsuccess?F(d,this.onsuccess):d);e&&(this.onerror=this.onerror?F(e,this.onerror):e);return f!==void 0?f:c}}function Da(a,b){return a===E?b:function(){a.apply(this,arguments);var c=this.onsuccess,d=this.onerror;this.onsuccess=this.onerror=null;b.apply(this,arguments);c&&(this.onsuccess=this.onsuccess?F(c,this.onsuccess):c);d&&(this.onerror=this.onerror?F(d,this.onerror):d)}}function Ea(a,b){return a===E?b:function(c){var d=a.apply(this,arguments);i(c,d);var e=this.onsuccess,f=this.onerror;this.onsuccess=null;this.onerror=null;var g=b.apply(this,arguments);e&&(this.onsuccess=this.onsuccess?F(e,this.onsuccess):e);f&&(this.onerror=this.onerror?F(f,this.onerror):f);return d===void 0?g===void 0?void 0:g:i(d,g)}}function Fa(a,b){return a===E?b:function(){return b.apply(this,arguments)===!1?!1:a.apply(this,arguments)}}function Ga(a,b){return a===E?b:function(){var c=a.apply(this,arguments);if(c&&typeof c.then==="function"){var d=this,e=arguments.length,f=new Array(e);while(e--)f[e]=arguments[e];return c.then(function(){return b.apply(d,f)})}return b.apply(this,arguments)}}var G=typeof location!=="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ha(a,b){G=a}var Ia={},Ja=100;y=typeof Promise==="undefined"?[]:function(){var a=Promise.resolve();if(typeof crypto==="undefined"||!crypto.subtle)return[a,j(a),a];var b=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[b,j(b),a]}();var Ka=y[0],H=y[1];y=y[2];H=H&&H.then;var La=Ka&&Ka.constructor,Ma=!!y;function Na(){queueMicrotask(db)}var Oa=function(a,b){Ua.push([a,b]),Qa&&(Na(),Qa=!1)},Pa=!0,Qa=!0,Ra=[],Sa=[],Ta=Aa,I={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:E,pgp:!1,env:{},finalize:E},J=I,Ua=[],Va=0,Wa=[];function K(a){if(typeof this!=="object")throw new TypeError("Promises must be constructed via new");this._listeners=[];this._lib=!1;var b=this._PSD=J;if(typeof a!=="function"){if(a!==Ia)throw new TypeError("Not a function");this._state=arguments[1];this._value=arguments[2];this._state===!1&&$a(this,this._value);return}this._state=null;this._value=null;++b.ref;Za(this,a)}var Xa={get:function(){var a=J,b=ob;function c(c,d){var e=this,f=!a.global&&(a!==J||b!==ob),g=f&&!O(),h=new K(function(b,h){bb(e,new Ya(wb(c,a,f,g),wb(d,a,f,g),b,h,a))});this._consoleTask&&(h._consoleTask=this._consoleTask);return h}c.prototype=Ia;return c},set:function(a){o(this,"then",a&&a.prototype===Ia?Xa:{get:function(){return a},set:Xa.set})}};m(K.prototype,{then:Xa,_then:function(a,b){bb(this,new Ya(null,null,a,b,J))},"catch":function(b){if(arguments.length===1)return this.then(null,b);var a=arguments[0],c=arguments[1];return typeof a==="function"?this.then(null,function(b){return b instanceof a?c(b):kb(b)}):this.then(null,function(b){return b&&b.name===a?c(b):kb(b)})},"finally":function(a){return this.then(function(b){return K.resolve(a()).then(function(){return b})},function(b){return K.resolve(a()).then(function(){return kb(b)})})},timeout:function(a,b){var c=this;return a<Infinity?new K(function(d,e){var f=setTimeout(function(){return e(new D.Timeout(b))},a);c.then(d,e)["finally"](clearTimeout.bind(null,f))}):this}});typeof Symbol!=="undefined"&&Symbol.toStringTag&&o(K.prototype,Symbol.toStringTag,"Dexie.Promise");I.env=ub();function Ya(a,b,c,d,e){this.onFulfilled=typeof a==="function"?a:null,this.onRejected=typeof b==="function"?b:null,this.resolve=c,this.reject=d,this.psd=e}m(K,{all:function(){var a=B.apply(null,arguments).map(rb);return new K(function(b,c){a.length===0&&b([]);var d=a.length;a.forEach(function(e,f){return K.resolve(e).then(function(c){a[f]=c,--d||b(a)},c)})})},resolve:function(a){if(a instanceof K)return a;if(a&&typeof a.then==="function")return new K(function(b,c){a.then(b,c)});var b=new K(Ia,!0,a);return b},reject:kb,race:function(){var a=B.apply(null,arguments).map(rb);return new K(function(b,c){a.map(function(a){return K.resolve(a).then(b,c)})})},PSD:{get:function(){return J},set:function(a){return J=a}},totalEchoes:{get:function(){return ob}},newPSD:N,usePSD:vb,scheduler:{get:function(){return Oa},set:function(a){Oa=a}},rejectionMapper:{get:function(){return Ta},set:function(a){Ta=a}},follow:function(a,b){return new K(function(c,d){return N(function(b,c){var d=J;d.unhandleds=[];d.onunhandled=c;d.finalize=F(function(){var a=this;hb(function(){a.unhandleds.length===0?b():c(a.unhandleds[0])})},d.finalize);a()},b,c,d)})}});La&&(La.allSettled&&o(K,"allSettled",function(){var a=B.apply(null,arguments).map(rb);return new K(function(b){a.length===0&&b([]);var c=a.length,d=new Array(c);a.forEach(function(a,e){return K.resolve(a).then(function(a){return d[e]={status:"fulfilled",value:a}},function(a){return d[e]={status:"rejected",reason:a}}).then(function(){return--c||b(d)})})})}),La.any&&typeof AggregateError!=="undefined"&&o(K,"any",function(){var a=B.apply(null,arguments).map(rb);return new K(function(b,c){a.length===0&&c(new AggregateError([]));var d=a.length,e=new Array(d);a.forEach(function(a,f){return K.resolve(a).then(function(a){return b(a)},function(a){e[f]=a,--d||c(new AggregateError(e))})})})}));function Za(a,b){try{b(function(b){if(a._state!==null)return;if(b===a)throw new TypeError("A promise cannot be resolved with itself.");var c=a._lib&&eb();b&&typeof b.then==="function"?Za(a,function(a,c){b instanceof K?b._then(a,c):b.then(a,c)}):(a._state=!0,a._value=b,ab(a));c&&fb()},$a.bind(null,a))}catch(b){$a(a,b)}}function $a(a,b){Sa.push(b);if(a._state!==null)return;var c=a._lib&&eb();b=Ta(b);a._state=!1;a._value=b;ib(a);ab(a);c&&fb()}function ab(a){var b=a._listeners;a._listeners=[];for(var c=0,d=b.length;c<d;++c)bb(a,b[c]);c=a._PSD;--c.ref||c.finalize();Va===0&&(++Va,Oa(function(){--Va===0&&gb()},[]))}function bb(a,b){if(a._state===null){a._listeners.push(b);return}var c=a._state?b.onFulfilled:b.onRejected;if(c===null)return(a._state?b.resolve:b.reject)(a._value);++b.psd.ref;++Va;Oa(cb,[c,a,b])}function cb(a,b,c){try{var d,e=b._value;!b._state&&Sa.length&&(Sa=[]);d=G&&b._consoleTask?b._consoleTask.run(function(){return a(e)}):a(e);!b._state&&Sa.indexOf(e)===-1&&jb(b);c.resolve(d)}catch(a){c.reject(a)}finally{--Va===0&&gb(),--c.psd.ref||c.psd.finalize()}}function db(){vb(I,function(){eb()&&fb()})}function eb(){var a=Pa;Pa=!1;Qa=!1;return a}function fb(){var a,b,c;do while(Ua.length>0){a=Ua;Ua=[];c=a.length;for(b=0;b<c;++b){var d=a[b];d[0].apply(null,d[1])}}while(Ua.length>0);Pa=!0;Qa=!0}function gb(){var a=Ra;Ra=[];a.forEach(function(a){a._PSD.onunhandled.call(null,a._value,a)});a=Wa.slice(0);var b=a.length;while(b)a[--b]()}function hb(a){function b(){a(),Wa.splice(Wa.indexOf(b),1)}Wa.push(b);++Va;Oa(function(){--Va===0&&gb()},[])}function ib(a){Ra.some(function(b){return b._value===a._value})||Ra.push(a)}function jb(a){var b=Ra.length;while(b)if(Ra[--b]._value===a._value){Ra.splice(b,1);return}}function kb(a){return new K(Ia,!1,a)}function L(a,b){var c=J;return function(){var d=eb(),e=J;try{P(c,!0);return a.apply(this,arguments)}catch(a){b&&b(a)}finally{P(e,!1),d&&fb()}}}var M={awaits:0,echoes:0,id:0},lb=0,mb=[],nb=0,ob=0,pb=0;function N(b,a,c,d){var e=J,f=Object.create(e);f.parent=e;f.ref=0;f.global=!1;f.id=++pb;I.env;f.env=Ma?{Promise:K,PromiseProp:{value:K,configurable:!0,writable:!0},all:K.all,race:K.race,allSettled:K.allSettled,any:K.any,resolve:K.resolve,reject:K.reject}:{};a&&i(f,a);++e.ref;f.finalize=function(){--this.parent.ref||this.parent.finalize()};a=vb(f,b,c,d);f.ref===0&&f.finalize();return a}function qb(){M.id||(M.id=++lb);++M.awaits;M.echoes+=Ja;return M.id}function O(){if(!M.awaits)return!1;--M.awaits===0&&(M.id=0);M.echoes=M.awaits*Ja;return!0}(""+H).indexOf("[native code]")===-1&&(qb=O=E);function rb(a){if(M.echoes&&a&&a.constructor===La){qb();return a.then(function(a){O();return a},function(a){O();return Q(a)})}return a}function sb(a){++ob,(!M.echoes||--M.echoes===0)&&(M.echoes=M.awaits=M.id=0),mb.push(J),P(a,!0)}function tb(){var a=mb[mb.length-1];mb.pop();P(a,!1)}function P(a,b){var c=J;(b?M.echoes&&(!nb++||a!==J):nb&&(!--nb||a!==J))&&queueMicrotask(b?sb.bind(null,a):tb);if(a===J)return;J=a;c===I&&(I.env=ub());if(Ma){b=I.env.Promise;var d=a.env;(c.global||a.global)&&(Object.defineProperty(f,"Promise",d.PromiseProp),b.all=d.all,b.race=d.race,b.resolve=d.resolve,b.reject=d.reject,d.allSettled&&(b.allSettled=d.allSettled),d.any&&(b.any=d.any))}}function ub(){var a=f.Promise;return Ma?{Promise:a,PromiseProp:Object.getOwnPropertyDescriptor(f,"Promise"),all:a.all,race:a.race,allSettled:a.allSettled,any:a.any,resolve:a.resolve,reject:a.reject}:{}}function vb(a,b,c,d,e){var f=J;try{P(a,!0);return b(c,d,e)}finally{P(f,!1)}}function wb(a,b,c,d){return typeof a!=="function"?a:function(){var e=J;c&&qb();P(b,!0);try{return a.apply(this,arguments)}finally{P(e,!1),d&&queueMicrotask(O)}}}function xb(a){Promise===La&&M.echoes===0?nb===0?a():enqueueNativeMicroTask(a):setTimeout(a,0)}var Q=K.reject;function yb(a,b,c,d){if(!a.idbdb||!a._state.openComplete&&!J.letThrough&&!a._vip){if(a._state.openComplete)return Q(new D.DatabaseClosed(a._state.dbOpenError));if(!a._state.isBeingOpened){if(!a._state.autoOpen)return Q(new D.DatabaseClosed());a.open()["catch"](E)}return a._state.dbReadyPromise.then(function(){return yb(a,b,c,d)})}else{var e=a._createTransaction(b,c,a._dbSchema);try{e.create(),a._state.PR1398_maxLoop=3}catch(e){if(e.name===wa.InvalidState&&a.isOpen()&&--a._state.PR1398_maxLoop>0){a.close({disableAutoOpen:!1});return a.open().then(function(){return yb(a,b,c,d)})}return Q(e)}return e._promise(b,function(a,b){return N(function(){J.trans=e;return d(a,b,e)})}).then(function(a){if(b==="readwrite")try{e.idbtrans.commit()}catch(a){}return b==="readonly"?a:e._completion.then(function(){return a})})}}Ka="4.0.1";var zb=String.fromCharCode(65535),Ab=-Infinity,R="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Bb="String expected.",Cb=[],Db="__dbnames",Eb="readonly",Fb="readwrite";function Gb(a,b){return a?b?function(){return a.apply(this,arguments)&&b.apply(this,arguments)}:a:b}var Hb={type:3,lower:-Infinity,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ib(a){return typeof a==="string"&&!/\./.test(a)?function(b){b[a]===void 0&&a in b&&(b=z(b),delete b[a]);return b}:function(a){return a}}function Jb(){throw D.Type()}function S(a,b){try{var c=Mb(a),d=Mb(b);if(c!==d){if(c==="Array")return 1;if(d==="Array")return-1;if(c==="binary")return 1;if(d==="binary")return-1;if(c==="string")return 1;if(d==="string")return-1;if(c==="Date")return 1;return d!=="Date"?NaN:-1}switch(c){case"number":case"Date":case"string":return a>b?1:a<b?-1:0;case"binary":return Lb(Nb(a),Nb(b));case"Array":return Kb(a,b)}}catch(a){}return NaN}function Kb(a,b){var c=a.length,d=b.length,e=c<d?c:d;for(var f=0;f<e;++f){var g=S(a[f],b[f]);if(g!==0)return g}return c===d?0:c<d?-1:1}function Lb(a,b){var c=a.length,d=b.length,e=c<d?c:d;for(var f=0;f<e;++f)if(a[f]!==b[f])return a[f]<b[f]?-1:1;return c===d?0:c<d?-1:1}function Mb(a){var b=typeof a;if(b!=="object")return b;if(ArrayBuffer.isView(a))return"binary";b=ma(a);return b==="ArrayBuffer"?"binary":b}function Nb(a){if(a instanceof Uint8Array)return a;return ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(a)}var Ob=function(){function a(){}a.prototype._trans=function(b,c,d){var e=this._tx||J.trans,f=this.name,a=G&&typeof console!=="undefined"&&console.createTask&&console.createTask("Dexie: ".concat(b==="readonly"?"read":"write"," ").concat(this.name));function g(b,d,a){if(!a.schema[f])throw new D.NotFound("Table "+f+" not part of transaction");return c(a.idbtrans,a)}var h=eb();try{var i=e&&e.db._novip===this.db._novip?e===J.trans?e._promise(b,g,d):N(function(){return e._promise(b,g,d)},{trans:e,transless:J.transless||J}):yb(this.db,b,[this.name],g);a&&(i._consoleTask=a,i=i["catch"](function(a){console.trace(a);return Q(a)}));return i}finally{h&&fb()}};a.prototype.get=function(a,b){var c=this;if(a&&a.constructor===Object)return this.where(a).first(b);return a==null?Q(new D.Type("Invalid argument to Table.get()")):this._trans("readonly",function(b){return c.core.get({trans:b,key:a}).then(function(a){return c.hook.reading.fire(a)})}).then(b)};a.prototype.where=function(a){if(typeof a==="string")return new this.db.WhereClause(this,a);if(h(a))return new this.db.WhereClause(this,"[".concat(a.join("+"),"]"));var b=g(a);if(b.length===1)return this.where(b[0]).equals(a[b[0]]);var c=this.schema.indexes.concat(this.schema.primKey).filter(function(a){if(a.compound&&b.every(function(b){return a.keyPath.indexOf(b)>=0})){for(var c=0;c<b.length;++c)if(b.indexOf(a.keyPath[c])===-1)return!1;return!0}return!1}).sort(function(a,b){return a.keyPath.length-b.keyPath.length})[0];if(c&&this.db._maxKey!==zb){var d=c.keyPath.slice(0,b.length);return this.where(d).equals(d.map(function(b){return a[b]}))}!c&&G&&!1;var e=this.schema.idxByName,f=this.db._deps.indexedDB;function i(a,b){return f.cmp(a,b)===0}d=b.reduce(function(b,c){var d=b[0];b=b[1];var f=e[c],g=a[c];return[d||f,d||!f?Gb(b,f&&f.multi?function(a){a=w(a,c);return h(a)&&a.some(function(a){return i(g,a)})}:function(a){return i(g,w(a,c))}):b]},[null,null]);var j=d[0];d=d[1];return j?this.where(j.name).equals(a[j.keyPath]).filter(d):c?this.filter(d):this.where(b).equals("")};a.prototype.filter=function(a){return this.toCollection().and(a)};a.prototype.count=function(a){return this.toCollection().count(a)};a.prototype.offset=function(a){return this.toCollection().offset(a)};a.prototype.limit=function(a){return this.toCollection().limit(a)};a.prototype.each=function(a){return this.toCollection().each(a)};a.prototype.toArray=function(a){return this.toCollection().toArray(a)};a.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))};a.prototype.orderBy=function(a){return new this.db.Collection(new this.db.WhereClause(this,h(a)?"[".concat(a.join("+"),"]"):a))};a.prototype.reverse=function(){return this.toCollection().reverse()};a.prototype.mapToClass=function(a){var b=this,d=b.db,e=b.name;this.schema.mappedClass=a;a.prototype instanceof Jb&&(a=function(a){c(b,a);function b(){return a!==null&&a.apply(this,arguments)||this}Object.defineProperty(b.prototype,"db",{get:function(){return d},enumerable:!1,configurable:!0});b.prototype.table=function(){return e};return b}(a));var f=new Set();for(b=a.prototype;b;b=j(b))Object.getOwnPropertyNames(b).forEach(function(a){return f.add(a)});b=function(b){if(!b)return b;var c=Object.create(a.prototype);for(var d in b)if(!f.has(d))try{c[d]=b[d]}catch(a){}return c};this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook);this.schema.readHook=b;this.hook("reading",b);return a};a.prototype.defineClass=function(){function a(a){i(this,a)}return this.mapToClass(a)};a.prototype.add=function(a,b){var c=this,d=this.schema.primKey,e=d.auto,f=d.keyPath,g=a;f&&e&&(g=Ib(f)(a));return this._trans("readwrite",function(a){return c.core.mutate({trans:a,type:"add",keys:b!=null?[b]:null,values:[g]})}).then(function(a){return a.numFailures?K.reject(a.failures[0]):a.lastResult}).then(function(b){if(f)try{x(a,f,b)}catch(a){}return b})};a.prototype.update=function(a,b){if(typeof a==="object"&&!h(a)){var c=w(a,this.schema.primKey.keyPath);return c===void 0?Q(new D.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(c).modify(b)}else return this.where(":id").equals(a).modify(b)};a.prototype.put=function(a,b){var c=this,d=this.schema.primKey,e=d.auto,f=d.keyPath,g=a;f&&e&&(g=Ib(f)(a));return this._trans("readwrite",function(a){return c.core.mutate({trans:a,type:"put",values:[g],keys:b!=null?[b]:null})}).then(function(a){return a.numFailures?K.reject(a.failures[0]):a.lastResult}).then(function(b){if(f)try{x(a,f,b)}catch(a){}return b})};a.prototype["delete"]=function(a){var b=this;return this._trans("readwrite",function(c){return b.core.mutate({trans:c,type:"delete",keys:[a]})}).then(function(a){return a.numFailures?K.reject(a.failures[0]):void 0})};a.prototype.clear=function(){var a=this;return this._trans("readwrite",function(b){return a.core.mutate({trans:b,type:"deleteRange",range:Hb})}).then(function(a){return a.numFailures?K.reject(a.failures[0]):void 0})};a.prototype.bulkGet=function(a){var b=this;return this._trans("readonly",function(c){return b.core.getMany({keys:a,trans:c}).then(function(a){return a.map(function(a){return b.hook.reading.fire(a)})})})};a.prototype.bulkAdd=function(b,c,d){var e=this,a=Array.isArray(c)?c:void 0;d=d||(a?void 0:c);var f=d?d.allKeys:void 0;return this._trans("readwrite",function(c){var d=e.schema.primKey,g=d.auto;d=d.keyPath;if(d&&a)throw new D.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==b.length)throw new D.InvalidArgument("Arguments objects and keys must have the same length");var h=b.length;g=d&&g?b.map(Ib(d)):b;return e.core.mutate({trans:c,type:"add",keys:a,values:g,wantResults:f}).then(function(a){var b=a.numFailures,c=a.results,d=a.lastResult;a=a.failures;c=f?c:d;if(b===0)return c;throw new va("".concat(e.name,".bulkAdd(): ").concat(b," of ").concat(h," operations failed"),a)})})};a.prototype.bulkPut=function(b,c,d){var e=this,a=Array.isArray(c)?c:void 0;d=d||(a?void 0:c);var f=d?d.allKeys:void 0;return this._trans("readwrite",function(c){var d=e.schema.primKey,g=d.auto;d=d.keyPath;if(d&&a)throw new D.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==b.length)throw new D.InvalidArgument("Arguments objects and keys must have the same length");var h=b.length;g=d&&g?b.map(Ib(d)):b;return e.core.mutate({trans:c,type:"put",keys:a,values:g,wantResults:f}).then(function(a){var b=a.numFailures,c=a.results,d=a.lastResult;a=a.failures;c=f?c:d;if(b===0)return c;throw new va("".concat(e.name,".bulkPut(): ").concat(b," of ").concat(h," operations failed"),a)})})};a.prototype.bulkUpdate=function(b){var c=this,d=this.core,a=b.map(function(a){return a.key}),e=b.map(function(a){return a.changes}),f=[];return this._trans("readwrite",function(g){return d.getMany({trans:g,keys:a,cache:"clone"}).then(function(h){var i=[],j=[];b.forEach(function(a,b){var d=a.key;a=a.changes;var e=h[b];if(e){for(var g=0,k=Object.keys(a);g<k.length;g++){var l=k[g],m=a[l];if(l===c.schema.primKey.keyPath){if(S(m,d)!==0)throw new D.Constraint("Cannot update primary key in bulkUpdate()")}else x(e,l,m)}f.push(b);i.push(d);j.push(e)}});var k=i.length;return d.mutate({trans:g,type:"put",keys:i,values:j,updates:{keys:a,changeSpecs:e}}).then(function(a){var b=a.numFailures;a=a.failures;if(b===0)return k;for(var d=0,e=Object.keys(a);d<e.length;d++){var g=e[d],h=f[Number(g)];if(h!=null){var i=a[g];delete a[g];a[h]=i}}throw new va("".concat(c.name,".bulkUpdate(): ").concat(b," of ").concat(k," operations failed"),a)})})})};a.prototype.bulkDelete=function(a){var b=this,c=a.length;return this._trans("readwrite",function(c){return b.core.mutate({trans:c,type:"delete",keys:a})}).then(function(a){var d=a.numFailures,e=a.lastResult;a=a.failures;if(d===0)return e;throw new va("".concat(b.name,".bulkDelete(): ").concat(d," of ").concat(c," operations failed"),a)})};return a}();function Pb(a){var b={},c=function(d,e){if(e){var c=arguments.length,f=new Array(c-1);while(--c)f[c-1]=arguments[c];b[d].subscribe.apply(null,f);return a}else if(typeof d==="string")return b[d]};c.addEventType=f;for(var d=1,e=arguments.length;d<e;++d)f(arguments[d]);return c;function f(a,d,e){if(typeof a==="object")return i(a);d||(d=Fa);e||(e=E);var f={subscribers:[],fire:e,subscribe:function(a){f.subscribers.indexOf(a)===-1&&(f.subscribers.push(a),f.fire=d(f.fire,a))},unsubscribe:function(a){f.subscribers=f.subscribers.filter(function(b){return b!==a}),f.fire=f.subscribers.reduce(d,e)}};b[a]=c[a]=f;return f}function i(a){g(a).forEach(function(b){var c=a[b];if(h(c))f(b,a[b][0],a[b][1]);else if(c==="asap")var d=f(b,Aa,function(){var a=arguments.length,b=new Array(a);while(a--)b[a]=arguments[a];d.subscribers.forEach(function(a){aa(function(){a.apply(null,b)})})});else throw new D.InvalidArgument("Invalid event config")})}}function Qb(a,b){p(b).from({prototype:a});return b}function Rb(a){return Qb(Ob.prototype,function(b,c,d){this.db=a,this._tx=d,this.name=b,this.schema=c,this.hook=a._allTables[b]?a._allTables[b].hook:Pb(null,{creating:[Ca,E],reading:[Ba,Aa],updating:[Ea,E],deleting:[Da,E]})})}function Sb(a,b){return!(a.filter||a.algorithm||a.or)&&(b?a.justLimit:!a.replayFilter)}function Tb(a,b){a.filter=Gb(a.filter,b)}function Ub(a,b,c){var d=a.replayFilter;a.replayFilter=d?function(){return Gb(d(),b())}:b;a.justLimit=c&&!d}function Vb(a,b){a.isMatch=Gb(a.isMatch,b)}function Wb(a,b){if(a.isPrimKey)return b.primaryKey;var c=b.getIndexByKeyPath(a.index);if(!c)throw new D.Schema("KeyPath "+a.index+" on object store "+b.name+" is not indexed");return c}function Xb(a,b,c){var d=Wb(a,b.schema);return b.openCursor({trans:c,values:!a.keysOnly,reverse:a.dir==="prev",unique:!!a.unique,query:{index:d,range:a.range}})}function Yb(a,b,c,d){var e=a.replayFilter?Gb(a.filter,a.replayFilter()):a.filter;if(!a.or)return Zb(Xb(a,d,c),Gb(a.algorithm,e),b,!a.keysOnly&&a.valueMapper);else{var f={},g=function(a,c,d){if(!e||e(c,d,function(a){return c.stop(a)},function(a){return c.fail(a)})){var g=c.primaryKey,h=""+g;h==="[object ArrayBuffer]"&&(h=""+new Uint8Array(g));l(f,h)||(f[h]=!0,b(a,c,d))}};return Promise.all([a.or._iterate(g,c),Zb(Xb(a,d,c),a.algorithm,g,!a.keysOnly&&a.valueMapper)])}}function Zb(a,b,c,d){var e=d?function(a,b,e){return c(d(a),b,e)}:c,f=L(e);return a.then(function(a){if(a)return a.start(function(){var c=function(){return a["continue"]()};(!b||b(a,function(a){return c=a},function(b){a.stop(b),c=E},function(b){a.fail(b),c=E}))&&f(a.value,a,function(a){return c=a});c()})})}y=Symbol();var $b=function(){function a(a){Object.assign(this,a)}a.prototype.execute=function(a){var b;b=(b=this.replacePrefix)===null||b===void 0?void 0:b[0];return b&&typeof a==="string"&&a.startsWith(b)?this.replacePrefix[1]+a.substring(b.length):a};return a}(),ac=function(){function a(){}a.prototype._read=function(a,b){var c=this._ctx;return c.error?c.table._trans(null,Q.bind(null,c.error)):c.table._trans("readonly",a).then(b)};a.prototype._write=function(a){var b=this._ctx;return b.error?b.table._trans(null,Q.bind(null,b.error)):b.table._trans("readwrite",a,"locked")};a.prototype._addAlgorithm=function(a){var b=this._ctx;b.algorithm=Gb(b.algorithm,a)};a.prototype._iterate=function(a,b){return Yb(this._ctx,a,b,this._ctx.table.core)};a.prototype.clone=function(a){var b=Object.create(this.constructor.prototype),c=Object.create(this._ctx);a&&i(c,a);b._ctx=c;return b};a.prototype.raw=function(){this._ctx.valueMapper=null;return this};a.prototype.each=function(a){var b=this._ctx;return this._read(function(c){return Yb(b,a,c,b.table.core)})};a.prototype.count=function(a){var b=this;return this._read(function(a){var c=b._ctx,d=c.table.core;if(Sb(c,!0))return d.count({trans:a,query:{index:Wb(c,d.schema),range:c.range}}).then(function(a){return Math.min(a,c.limit)});else{var e=0;return Yb(c,function(){++e;return!1},a,d).then(function(){return e})}}).then(a)};a.prototype.sortBy=function(a,b){var c=a.split(".").reverse(),d=c[0],e=c.length-1;function f(a,b){return b?f(a[c[b]],b-1):a[d]}var g=this._ctx.dir==="next"?1:-1;function h(a,b){a=f(a,e);b=f(b,e);return a<b?-g:a>b?g:0}return this.toArray(function(a){return a.sort(h)}).then(b)};a.prototype.toArray=function(a){var b=this;return this._read(function(a){var c=b._ctx;if(c.dir==="next"&&Sb(c,!0)&&c.limit>0){var d=c.valueMapper,e=Wb(c,c.table.core.schema);return c.table.core.query({trans:a,limit:c.limit,values:!0,query:{index:e,range:c.range}}).then(function(a){a=a.result;return d?a.map(d):a})}else{var f=[];return Yb(c,function(a){return f.push(a)},a,c.table.core).then(function(){return f})}},a)};a.prototype.offset=function(a){var b=this._ctx;if(a<=0)return this;b.offset+=a;Sb(b)?Ub(b,function(){var b=a;return function(a,c){if(b===0)return!0;if(b===1){--b;return!1}c(function(){a.advance(b),b=0});return!1}}):Ub(b,function(){var b=a;return function(){return--b<0}});return this};a.prototype.limit=function(a){this._ctx.limit=Math.min(this._ctx.limit,a);Ub(this._ctx,function(){var b=a;return function(a,c,d){--b<=0&&c(d);return b>=0}},!0);return this};a.prototype.until=function(a,b){Tb(this._ctx,function(c,d,e){if(a(c.value)){d(e);return b}else return!0});return this};a.prototype.first=function(a){return this.limit(1).toArray(function(a){return a[0]}).then(a)};a.prototype.last=function(a){return this.reverse().first(a)};a.prototype.filter=function(a){Tb(this._ctx,function(b){return a(b.value)});Vb(this._ctx,a);return this};a.prototype.and=function(a){return this.filter(a)};a.prototype.or=function(a){return new this.db.WhereClause(this._ctx.table,a,this)};a.prototype.reverse=function(){this._ctx.dir=this._ctx.dir==="prev"?"next":"prev";this._ondirectionchange&&this._ondirectionchange(this._ctx.dir);return this};a.prototype.desc=function(){return this.reverse()};a.prototype.eachKey=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;return this.each(function(b,c){a(c.key,c)})};a.prototype.eachUniqueKey=function(a){this._ctx.unique="unique";return this.eachKey(a)};a.prototype.eachPrimaryKey=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;return this.each(function(b,c){a(c.primaryKey,c)})};a.prototype.keys=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;var c=[];return this.each(function(a,b){c.push(b.key)}).then(function(){return c}).then(a)};a.prototype.primaryKeys=function(a){var b=this._ctx;if(b.dir==="next"&&Sb(b,!0)&&b.limit>0)return this._read(function(a){var c=Wb(b,b.table.core.schema);return b.table.core.query({trans:a,values:!1,limit:b.limit,query:{index:c,range:b.range}})}).then(function(a){a=a.result;return a}).then(a);b.keysOnly=!b.isMatch;var c=[];return this.each(function(a,b){c.push(b.primaryKey)}).then(function(){return c}).then(a)};a.prototype.uniqueKeys=function(a){this._ctx.unique="unique";return this.keys(a)};a.prototype.firstKey=function(a){return this.limit(1).keys(function(a){return a[0]}).then(a)};a.prototype.lastKey=function(a){return this.reverse().firstKey(a)};a.prototype.distinct=function(){var a=this._ctx;a=a.index&&a.table.schema.idxByName[a.index];if(!a||!a.multi)return this;var b={};Tb(this._ctx,function(a){a=a.primaryKey.toString();var c=l(b,a);b[a]=!0;return!c});return this};a.prototype.modify=function(a){var b=this,c=this._ctx;return this._write(function(d){var e;if(typeof a==="function")e=a;else{var f=g(a),h=f.length;e=function(b){var c=!1;for(var d=0;d<h;++d){var e=f[d],g=a[e],i=w(b,e);g instanceof $b?(x(b,e,g.execute(i)),c=!0):i!==g&&(x(b,e,g),c=!0)}return c}}var i=c.table.core,j=i.schema.primaryKey,k=j.outbound,l=j.extractKey,m=b.db._options.modifyChunkSize||200,n=[],o=0,p=[],q=function(a,b){var c=b.failures;b=b.numFailures;o+=a-b;for(a=0,b=g(c);a<b.length;a++){var d=b[a];n.push(c[d])}};return b.clone().primaryKeys().then(function(b){var f=function(g){var h=Math.min(m,b.length-g);return i.getMany({trans:d,keys:b.slice(g,g+h),cache:"immutable"}).then(function(j){var n=[],o=[],p=k?[]:null,r=[];for(var s=0;s<h;++s){var t=j[s],u={value:z(t),primKey:b[g+s]};e.call(u,u.value,u)!==!1&&(u.value==null?r.push(b[g+s]):!k&&S(l(t),l(u.value))!==0?(r.push(b[g+s]),n.push(u.value)):(o.push(u.value),k&&p.push(b[g+s])))}var v=Sb(c)&&c.limit===Infinity&&(typeof a!=="function"||a===bc)&&{index:c.index,range:c.range};return Promise.resolve(n.length>0&&i.mutate({trans:d,type:"add",values:n}).then(function(a){for(var b in a.failures)r.splice(parseInt(b),1);q(n.length,a)})).then(function(){return(o.length>0||v&&typeof a==="object")&&i.mutate({trans:d,type:"put",keys:p,values:o,criteria:v,changeSpec:typeof a!=="function"&&a}).then(function(a){return q(o.length,a)})}).then(function(){return(r.length>0||v&&a===bc)&&i.mutate({trans:d,type:"delete",keys:r,criteria:v}).then(function(a){return q(r.length,a)})}).then(function(){return b.length>g+h&&f(g+m)})})};return f(0).then(function(){if(n.length>0)throw new ua("Error modifying one or more objects",n,o,p);return b.length})})})};a.prototype["delete"]=function(){var a=this._ctx,b=a.range;return Sb(a)&&(a.isPrimKey||b.type===3)?this._write(function(c){var d=a.table.core.schema.primaryKey,e=b;return a.table.core.count({trans:c,query:{index:d,range:e}}).then(function(b){return a.table.core.mutate({trans:c,type:"deleteRange",range:e}).then(function(a){var c=a.failures;a.lastResult;a.results;a=a.numFailures;if(a)throw new ua("Could not delete some values",Object.keys(c).map(function(a){return c[a]}),b-a);return b-a})})}):this.modify(bc)};return a}(),bc=function(a,b){return b.value=null};function cc(a){return Qb(ac.prototype,function(b,c){this.db=a;var d=Hb,e=null;if(c)try{d=c()}catch(a){e=a}c=b._ctx;b=c.table;var f=b.hook.reading.fire;this._ctx={table:b,index:c.index,isPrimKey:!c.index||b.schema.primKey.keyPath&&c.index===b.schema.primKey.name,range:d,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:Infinity,error:e,or:c.or,valueMapper:f!==Aa?f:null}})}function dc(a,b){return a<b?-1:a===b?0:1}function ec(a,b){return a>b?-1:a===b?0:1}function T(a,b,c){a=a instanceof lc?new a.Collection(a):a;a._ctx.error=c?new c(b):new TypeError(b);return a}function fc(a){return new a.Collection(a,function(){return kc("")}).limit(0)}function gc(a){return a==="next"?function(a){return a.toUpperCase()}:function(a){return a.toLowerCase()}}function hc(a){return a==="next"?function(a){return a.toLowerCase()}:function(a){return a.toUpperCase()}}function ic(b,c,d,e,a,f){var g=Math.min(b.length,e.length),h=-1;for(var i=0;i<g;++i){var j=c[i];if(j!==e[i]){if(a(b[i],d[i])<0)return b.substr(0,i)+d[i]+d.substr(i+1);if(a(b[i],e[i])<0)return b.substr(0,i)+e[i]+d.substr(i+1);return h>=0?b.substr(0,h)+c[h]+d.substr(h+1):null}a(b[i],j)<0&&(h=i)}if(g<e.length&&f==="next")return b+d.substr(b.length);return g<b.length&&f==="prev"?b.substr(0,d.length):h<0?null:b.substr(0,h)+e[h]+d.substr(h+1)}function jc(a,b,c,d){var e,f,g,h,i,j,k,l=c.length;if(!c.every(function(a){return typeof a==="string"}))return T(a,Bb);function m(a){e=gc(a);f=hc(a);g=a==="next"?dc:ec;var b=c.map(function(a){return{lower:f(a),upper:e(a)}}).sort(function(a,b){return g(a.lower,b.lower)});h=b.map(function(a){return a.upper});i=b.map(function(a){return a.lower});j=a;k=a==="next"?"":d}m("next");a=new a.Collection(a,function(){return U(h[0],i[l-1]+d)});a._ondirectionchange=function(a){m(a)};var n=0;a._addAlgorithm(function(a,c,d){var e=a.key;if(typeof e!=="string")return!1;var m=f(e);if(b(m,i,n))return!0;else{var o=null;for(var p=n;p<l;++p){var q=ic(e,m,h[p],i[p],g,j);q===null&&o===null?n=p+1:(o===null||g(o,q)>0)&&(o=q)}o!==null?c(function(){a["continue"](o+k)}):c(d);return!1}});return a}function U(a,b,c,d){return{type:2,lower:a,upper:b,lowerOpen:c,upperOpen:d}}function kc(a){return{type:1,lower:a,upper:a}}var lc=function(){function a(){}Object.defineProperty(a.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0});a.prototype.between=function(a,b,c,d){c=c!==!1;d=d===!0;try{return this._cmp(a,b)>0||this._cmp(a,b)===0&&(c||d)&&!(c&&d)?fc(this):new this.Collection(this,function(){return U(a,b,!c,!d)})}catch(a){return T(this,R)}};a.prototype.equals=function(a){return a==null?T(this,R):new this.Collection(this,function(){return kc(a)})};a.prototype.above=function(a){return a==null?T(this,R):new this.Collection(this,function(){return U(a,void 0,!0)})};a.prototype.aboveOrEqual=function(a){return a==null?T(this,R):new this.Collection(this,function(){return U(a,void 0,!1)})};a.prototype.below=function(a){return a==null?T(this,R):new this.Collection(this,function(){return U(void 0,a,!1,!0)})};a.prototype.belowOrEqual=function(a){return a==null?T(this,R):new this.Collection(this,function(){return U(void 0,a)})};a.prototype.startsWith=function(a){return typeof a!=="string"?T(this,Bb):this.between(a,a+zb,!0,!0)};a.prototype.startsWithIgnoreCase=function(a){return a===""?this.startsWith(a):jc(this,function(a,b){return a.indexOf(b[0])===0},[a],zb)};a.prototype.equalsIgnoreCase=function(a){return jc(this,function(a,b){return a===b[0]},[a],"")};a.prototype.anyOfIgnoreCase=function(){var a=B.apply(pa,arguments);return a.length===0?fc(this):jc(this,function(a,b){return b.indexOf(a)!==-1},a,"")};a.prototype.startsWithAnyOfIgnoreCase=function(){var a=B.apply(pa,arguments);return a.length===0?fc(this):jc(this,function(a,b){return b.some(function(b){return a.indexOf(b)===0})},a,zb)};a.prototype.anyOf=function(){var a=this,b=B.apply(pa,arguments),c=this._cmp;try{b.sort(c)}catch(a){return T(this,R)}if(b.length===0)return fc(this);var d=new this.Collection(this,function(){return U(b[0],b[b.length-1])});d._ondirectionchange=function(d){c=d==="next"?a._ascending:a._descending,b.sort(c)};var e=0;d._addAlgorithm(function(a,d,f){var g=a.key;while(c(g,b[e])>0){++e;if(e===b.length){d(f);return!1}}if(c(g,b[e])===0)return!0;else{d(function(){a["continue"](b[e])});return!1}});return d};a.prototype.notEqual=function(a){return this.inAnyRange([[Ab,a],[a,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})};a.prototype.noneOf=function(){var a=B.apply(pa,arguments);if(a.length===0)return new this.Collection(this);try{a.sort(this._ascending)}catch(a){return T(this,R)}var b=a.reduce(function(a,b){return a?a.concat([[a[a.length-1][1],b]]):[[Ab,b]]},null);b.push([a[a.length-1],this.db._maxKey]);return this.inAnyRange(b,{includeLowers:!1,includeUppers:!1})};a.prototype.inAnyRange=function(c,d){var e=this,a=this._cmp,f=this._ascending,g=this._descending,h=this._min,i=this._max;if(c.length===0)return fc(this);if(!c.every(function(a){return a[0]!==void 0&&a[1]!==void 0&&f(a[0],a[1])<=0}))return T(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",D.InvalidArgument);var j=!d||d.includeLowers!==!1,k=d&&d.includeUppers===!0;function b(b,c){var d=0,e=b.length;for(;d<e;++d){var f=b[d];if(a(c[0],f[1])<0&&a(c[1],f[0])>0){f[0]=h(f[0],c[0]);f[1]=i(f[1],c[1]);break}}d===e&&b.push(c);return b}var l=f;function m(a,b){return l(a[0],b[0])}var n;try{n=c.reduce(b,[]),n.sort(m)}catch(a){return T(this,R)}var o=0,p=k?function(a){return f(a,n[o][1])>0}:function(a){return f(a,n[o][1])>=0},q=j?function(a){return g(a,n[o][0])>0}:function(a){return g(a,n[o][0])>=0};function r(a){return!p(a)&&!q(a)}var s=p;d=new this.Collection(this,function(){return U(n[0][0],n[n.length-1][1],!j,!k)});d._ondirectionchange=function(a){a==="next"?(s=p,l=f):(s=q,l=g),n.sort(m)};d._addAlgorithm(function(a,b,c){var d=a.key;while(s(d)){++o;if(o===n.length){b(c);return!1}}if(r(d))return!0;else if(e._cmp(d,n[o][1])===0||e._cmp(d,n[o][0])===0)return!1;else{b(function(){l===f?a["continue"](n[o][0]):a["continue"](n[o][1])});return!1}});return d};a.prototype.startsWithAnyOf=function(){var a=B.apply(pa,arguments);if(!a.every(function(a){return typeof a==="string"}))return T(this,"startsWithAnyOf() only works with strings");return a.length===0?fc(this):this.inAnyRange(a.map(function(a){return[a,a+zb]}))};return a}();function mc(a){return Qb(lc.prototype,function(b,c,d){this.db=a;this._ctx={table:b,index:c===":id"?null:c,or:d};this._cmp=this._ascending=S;this._descending=function(a,b){return S(b,a)};this._max=function(a,b){return S(a,b)>0?a:b};this._min=function(a,b){return S(a,b)<0?a:b};this._IDBKeyRange=a._deps.IDBKeyRange;if(!this._IDBKeyRange)throw new D.MissingAPI()})}function V(a){return L(function(b){nc(b);a(b.target.error);return!1})}function nc(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()}var oc="storagemutated",pc="x-storagemutated-1",W=Pb(null,oc),qc=function(){function a(){}a.prototype._lock=function(){v(!J.global);++this._reculock;this._reculock===1&&!J.global&&(J.lockOwnerFor=this);return this};a.prototype._unlock=function(){v(!J.global);if(--this._reculock===0){J.global||(J.lockOwnerFor=null);while(this._blockedFuncs.length>0&&!this._locked()){var a=this._blockedFuncs.shift();try{vb(a[1],a[0])}catch(a){}}}return this};a.prototype._locked=function(){return this._reculock&&J.lockOwnerFor!==this};a.prototype.create=function(a){var b=this;if(!this.mode)return this;var c=this.db.idbdb,d=this.db._state.dbOpenError;v(!this.idbtrans);if(!a&&!c)switch(d&&d.name){case"DatabaseClosedError":throw new D.DatabaseClosed(d);case"MissingAPIError":throw new D.MissingAPI(d.message,d);default:throw new D.OpenFailed(d)}if(!this.active)throw new D.TransactionInactive();v(this._completion._state===null);a=this.idbtrans=a||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):c.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}));a.onerror=L(function(c){nc(c),b._reject(a.error)});a.onabort=L(function(c){nc(c),b.active&&b._reject(new D.Abort(a.error)),b.active=!1,b.on("abort").fire(c)});a.oncomplete=L(function(){b.active=!1,b._resolve(),"mutatedParts"in a&&W.storagemutated.fire(a.mutatedParts)});return this};a.prototype._promise=function(a,b,c){var d=this;if(a==="readwrite"&&this.mode!=="readwrite")return Q(new D.ReadOnly("Transaction is readonly"));if(!this.active)return Q(new D.TransactionInactive());if(this._locked())return new K(function(e,f){d._blockedFuncs.push([function(){d._promise(a,b,c).then(e,f)},J])});else if(c)return N(function(){var a=new K(function(a,c){d._lock();var e=b(a,c,d);e&&e.then&&e.then(a,c)});a["finally"](function(){return d._unlock()});a._lib=!0;return a});else{var e=new K(function(a,c){var e=b(a,c,d);e&&e.then&&e.then(a,c)});e._lib=!0;return e}};a.prototype._root=function(){return this.parent?this.parent._root():this};a.prototype.waitFor=function(a){var b=this._root(),c=K.resolve(a);if(b._waitingFor)b._waitingFor=b._waitingFor.then(function(){return c});else{b._waitingFor=c;b._waitingQueue=[];var d=b.idbtrans.objectStore(b.storeNames[0]);(function a(){++b._spinCount;while(b._waitingQueue.length)b._waitingQueue.shift()();b._waitingFor&&(d.get(-Infinity).onsuccess=a)})()}var e=b._waitingFor;return new K(function(a,d){c.then(function(c){return b._waitingQueue.push(L(a.bind(null,c)))},function(a){return b._waitingQueue.push(L(d.bind(null,a)))})["finally"](function(){b._waitingFor===e&&(b._waitingFor=null)})})};a.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new D.Abort()))};a.prototype.table=function(a){var b=this._memoizedTables||(this._memoizedTables={});if(l(b,a))return b[a];var c=this.schema[a];if(!c)throw new D.NotFound("Table "+a+" not part of transaction");c=new this.db.Table(a,c,this);c.core=this.db.core.table(a);b[a]=c;return c};return a}();function rc(a){return Qb(qc.prototype,function(b,c,d,e,f){var g=this;this.db=a;this.mode=b;this.storeNames=c;this.schema=d;this.chromeTransactionDurability=e;this.idbtrans=null;this.on=Pb(this,"complete","error","abort");this.parent=f||null;this.active=!0;this._reculock=0;this._blockedFuncs=[];this._resolve=null;this._reject=null;this._waitingFor=null;this._waitingQueue=null;this._spinCount=0;this._completion=new K(function(a,b){g._resolve=a,g._reject=b});this._completion.then(function(){g.active=!1,g.on.complete.fire()},function(a){var b=g.active;g.active=!1;g.on.error.fire(a);g.parent?g.parent._reject(a):b&&g.idbtrans&&g.idbtrans.abort();return Q(a)})})}function sc(a,b,c,d,e,f,g){return{name:a,keyPath:b,unique:c,multi:d,auto:e,compound:f,src:(c&&!g?"&":"")+(d?"*":"")+(e?"++":"")+tc(b)}}function tc(a){return typeof a==="string"?a:a?"["+[].join.call(a,"+")+"]":""}function uc(a,b,c){return{name:a,primKey:b,indexes:c,mappedClass:null,idxByName:ba(c,function(a){return[a.name,a]})}}function vc(a){return a.length===1?a[0]:a}var wc=function(a){try{a.only([[]]);wc=function(){return[[]]};return[[]]}catch(a){wc=function(){return zb};return zb}};function xc(a){if(a==null)return function(){return void 0};else if(typeof a==="string")return yc(a);else return function(b){return w(b,a)}}function yc(a){var b=a.split(".");if(b.length===1)return function(b){return b[a]};else return function(b){return w(b,a)}}function zc(a){return[].slice.call(a)}var Ac=0;function Bc(a){return a==null?":id":typeof a==="string"?a:"[".concat(a.join("+"),"]")}function Cc(a,b,c){function d(a,b){var c=zc(a.objectStoreNames);return{schema:{name:a.name,tables:c.map(function(a){return b.objectStore(a)}).map(function(a){var b=a.keyPath,c=a.autoIncrement,d=h(b),e=b==null,f={};e={name:a.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:e,compound:d,keyPath:b,autoIncrement:c,unique:!0,extractKey:xc(b)},indexes:zc(a.indexNames).map(function(b){return a.index(b)}).map(function(b){var c=b.name,d=b.unique,e=b.multiEntry;b=b.keyPath;var a=h(b);c={name:c,compound:a,keyPath:b,unique:d,multiEntry:e,extractKey:xc(b)};f[Bc(b)]=c;return c}),getIndexByKeyPath:function(a){return f[Bc(a)]}};f[":id"]=e.primaryKey;b!=null&&(f[Bc(b)]=e.primaryKey);return e})},hasGetAll:c.length>0&&"getAll"in b.objectStore(c[0])&&!(typeof navigator!=="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function e(a){if(a.type===3)return null;if(a.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var c=a.lower,d=a.upper,e=a.lowerOpen;a=a.upperOpen;c=c===void 0?d===void 0?null:b.upperBound(d,!!a):d===void 0?b.lowerBound(c,!!e):b.bound(c,d,!!e,!!a);return c}function f(b){var c=b.name;function d(d){var f=d.trans,b=d.type,a=d.keys,g=d.values,h=d.range;return new Promise(function(d,i){d=L(d);i=f.objectStore(c);var j=i.keyPath==null,k=b==="put"||b==="add";if(!k&&b!=="delete"&&b!=="deleteRange")throw new Error("Invalid operation type: "+b);var l=(a||g||{length:1}).length;if(a&&g&&a.length!==g.length)throw new Error("Given keys array must have same length as given values array.");if(l===0)return d({numFailures:0,failures:{},results:[],lastResult:void 0});var m,n=[],o=[],p=0,q=function(a){++p,nc(a)};if(b==="deleteRange"){if(h.type===4)return d({numFailures:p,failures:o,results:[],lastResult:void 0});h.type===3?n.push(m=i.clear()):n.push(m=i["delete"](e(h)))}else{j=k?j?[g,a]:[g,null]:[a,null];var r=j[0];j=j[1];if(k)for(k=0;k<l;++k)n.push(m=j&&j[k]!==void 0?i[b](r[k],j[k]):i[b](r[k])),m.onerror=q;else for(k=0;k<l;++k)n.push(m=i[b](r[k])),m.onerror=q}var s=function(c){c=c.target.result;n.forEach(function(a,b){return a.error!=null&&(o[b]=a.error)});d({numFailures:p,failures:o,results:b==="delete"?a:n.map(function(a){return a.result}),lastResult:c})};m.onerror=function(a){q(a),s(a)};m.onsuccess=s})}function a(b){var d=b.trans,f=b.values,a=b.query,g=b.reverse,h=b.unique;return new Promise(function(b,i){b=L(b);var j=a.index,k=a.range,l=d.objectStore(c);l=j.isPrimaryKey?l:l.index(j.name);j=g?h?"prevunique":"prev":h?"nextunique":"next";var m=f||!("openKeyCursor"in l)?l.openCursor(e(k),j):l.openKeyCursor(e(k),j);m.onerror=V(i);m.onsuccess=L(function(a){var c=m.result;if(!c){b(null);return}c.___id=++Ac;c.done=!1;var e=c["continue"].bind(c),f=c.continuePrimaryKey;f&&(f=f.bind(c));var g=c.advance.bind(c);a=function(){throw new Error("Cursor not started")};var h=function(){throw new Error("Cursor not stopped")};c.trans=d;c.stop=c["continue"]=c.continuePrimaryKey=c.advance=a;c.fail=L(i);c.next=function(){var a=this,b=1;return this.start(function(){return b--?a["continue"]():a.stop()}).then(function(){return a})};c.start=function(a){var b=new Promise(function(a,b){a=L(a),m.onerror=V(b),c.fail=b,c.stop=function(b){c.stop=c["continue"]=c.continuePrimaryKey=c.advance=h,a(b)}}),d=function(){if(m.result)try{a()}catch(a){c.fail(a)}else c.done=!0,c.start=function(){throw new Error("Cursor behind last entry")},c.stop()};m.onsuccess=L(function(a){m.onsuccess=d,d()});c["continue"]=e;c.continuePrimaryKey=f;c.advance=g;d();return b};b(c)},i)})}function f(a){return function(b){return new Promise(function(f,g){f=L(f);var h=b.trans,i=b.values,j=b.limit,d=b.query,k=j===Infinity?void 0:j,l=d.index;d=d.range;h=h.objectStore(c);h=l.isPrimaryKey?h:h.index(l.name);l=e(d);if(j===0)return f({result:[]});if(a){d=i?h.getAll(l,k):h.getAllKeys(l,k);d.onsuccess=function(a){return f({result:a.target.result})};d.onerror=V(g)}else{var m=0,n=i||!("openKeyCursor"in h)?h.openCursor(l):h.openKeyCursor(l),o=[];n.onsuccess=function(a){a=n.result;if(!a)return f({result:o});o.push(i?a.value:a.primaryKey);if(++m===j)return f({result:o});a["continue"]()};n.onerror=V(g)}})}}return{name:c,schema:b,mutate:d,getMany:function(b){var d=b.trans,a=b.keys;return new Promise(function(b,e){b=L(b);var f=d.objectStore(c),g=a.length,h=new Array(g),i=0,j=0,k=function(a){a=a.target;(h[a._pos]=a.result)!=null;++j===i&&b(h)};e=V(e);for(var l=0;l<g;++l){var m=a[l];m!=null&&(m=f.get(a[l]),m._pos=l,m.onsuccess=k,m.onerror=e,++i)}i===0&&b(h)})},get:function(a){var b=a.trans,d=a.key;return new Promise(function(a,e){a=L(a);var f=b.objectStore(c);f=f.get(d);f.onsuccess=function(b){return a(b.target.result)};f.onerror=V(e)})},query:f(g),openCursor:a,count:function(b){var a=b.query,d=b.trans,f=a.index,g=a.range;return new Promise(function(a,b){var h=d.objectStore(c);h=f.isPrimaryKey?h:h.index(f.name);var i=e(g);i=i?h.count(i):h.count();i.onsuccess=L(function(b){return a(b.target.result)});i.onerror=V(b)})}}}d=d(a,c);c=d.schema;var g=d.hasGetAll;d=c.tables.map(function(a){return f(a)});var i={};d.forEach(function(a){return i[a.name]=a});return{stack:"dbcore",transaction:a.transaction.bind(a),table:function(a){var b=i[a];if(!b)throw new Error("Table '".concat(a,"' not found"));return i[a]},MIN_KEY:-Infinity,MAX_KEY:wc(b),schema:c}}function Dc(a,b){return b.reduce(function(a,b){b=b.create;return d(d({},a),b(a))},a)}function Ec(a,b,c,d){var e=c.IDBKeyRange;c.indexedDB;c=Dc(Cc(b,e,d),a.dbcore);return{dbcore:c}}function Fc(a,b){var c=b.db;c=Ec(a._middlewares,c,a._deps,b);a.core=c.dbcore;a.tables.forEach(function(b){var c=b.name;a.core.schema.tables.some(function(a){return a.name===c})&&(b.core=a.core.table(c),a[c]instanceof a.Table&&(a[c].core=b.core))})}function Gc(a,b,c,d){c.forEach(function(c){var e=d[c];b.forEach(function(b){var d=r(b,c);(!d||"value"in d&&d.value===void 0)&&(b===a.Transaction.prototype||b instanceof a.Transaction?o(b,c,{get:function(){return this.table(c)},set:function(a){n(this,c,{value:a,writable:!0,configurable:!0,enumerable:!0})}}):b[c]=new a.Table(c,e))})})}function Hc(a,b){b.forEach(function(b){for(var c in b)b[c]instanceof a.Table&&delete b[c]})}function Ic(a,b){return a._cfg.version-b._cfg.version}function Jc(a,b,c,d){var e=a._dbSchema;c.objectStoreNames.contains("$meta")&&!e.$meta&&(e.$meta=uc("$meta",Wc("")[0],[]),a._storeNames.push("$meta"));var f=a._createTransaction("readwrite",a._storeNames,e);f.create(c);f._completion["catch"](d);var h=f._reject.bind(f),i=J.transless||J;N(function(){J.trans=f;J.transless=i;if(b===0)g(e).forEach(function(a){Oc(c,a,e[a].primKey,e[a].indexes)}),Fc(a,c),K.follow(function(){return a.on.populate.fire(f)})["catch"](h);else{Fc(a,c);return Lc(a,f,b).then(function(b){return Mc(a,b,f,c)})["catch"](h)}})}function Kc(a,b){Pc(a._dbSchema,b);b.db.version%10===0&&!b.objectStoreNames.contains("$meta")&&b.db.createObjectStore("$meta").add(Math.ceil(b.db.version/10-1),"version");var c=Sc(a,a.idbdb,b);Vc(a,a._dbSchema,b);c=Nc(c,a._dbSchema);a=function(a){if(a.change.length||a.recreate)return{value:void 0};var c=b.objectStore(a.name);a.add.forEach(function(a){G&&!1,Rc(c,a)})};for(var d=0,c=c.change;d<c.length;d++){var e=c[d];e=a(e);if(typeof e==="object")return e.value}}function Lc(a,b,c){if(b.storeNames.includes("$meta"))return b.table("$meta").get("version").then(function(a){return a!=null?a:c});else return K.resolve(c)}function Mc(a,b,c,d){var e=[],f=a._versions,h=a._dbSchema=Sc(a,a.idbdb,d);f=f.filter(function(a){return a._cfg.version>=b});if(f.length===0)return K.resolve();f.forEach(function(f){e.push(function(){var e=h,i=f._cfg.dbschema;Vc(a,e,d);Vc(a,i,d);h=a._dbSchema=i;var j=Nc(e,i);j.add.forEach(function(a){Oc(d,a[0],a[1].primKey,a[1].indexes)});j.change.forEach(function(a){if(a.recreate)throw new D.Upgrade("Not yet support for changing primary key");else{var b=d.objectStore(a.name);a.add.forEach(function(a){return Rc(b,a)});a.change.forEach(function(a){b.deleteIndex(a.name),Rc(b,a)});a.del.forEach(function(a){return b.deleteIndex(a)})}});var k=f._cfg.contentUpgrade;if(k&&f._cfg.version>b){Fc(a,d);c._memoizedTables={};var l=da(i);j.del.forEach(function(a){l[a]=e[a]});Hc(a,[a.Transaction.prototype]);Gc(a,[a.Transaction.prototype],g(l),l);c.schema=l;var m=qa(k);m&&qb();var n;i=K.follow(function(){n=k(c);if(n&&m){var a=O.bind(null,null);n.then(a,a)}});return n&&typeof n.then==="function"?K.resolve(n):i.then(function(){return n})}}),e.push(function(b){var d=f._cfg.dbschema;Qc(d,b);Hc(a,[a.Transaction.prototype]);Gc(a,[a.Transaction.prototype],a._storeNames,a._dbSchema);c.schema=a._dbSchema}),e.push(function(b){a.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(a.idbdb.version/10)===f._cfg.version?(a.idbdb.deleteObjectStore("$meta"),delete a._dbSchema.$meta,a._storeNames=a._storeNames.filter(function(a){return a!=="$meta"})):b.objectStore("$meta").put(f._cfg.version,"version"))})});function i(){return e.length?K.resolve(e.shift()(c.idbtrans)).then(i):K.resolve()}return i().then(function(){Pc(h,d)})}function Nc(a,b){var c={del:[],add:[],change:[]},d;for(d in a)b[d]||c.del.push(d);for(d in b){var e=a[d],f=b[d];if(!e)c.add.push([d,f]);else{var g={name:d,def:f,recreate:!1,del:[],add:[],change:[]};if(""+(e.primKey.keyPath||"")!==""+(f.primKey.keyPath||"")||e.primKey.auto!==f.primKey.auto)g.recreate=!0,c.change.push(g);else{e=e.idxByName;f=f.idxByName;var h;for(h in e)f[h]||g.del.push(h);for(h in f){var i=e[h],j=f[h];!i?g.add.push(j):i.src!==j.src&&g.change.push(j)}(g.del.length>0||g.add.length>0||g.change.length>0)&&c.change.push(g)}}}return c}function Oc(a,b,c,d){var e=a.db.createObjectStore(b,c.keyPath?{keyPath:c.keyPath,autoIncrement:c.auto}:{autoIncrement:c.auto});d.forEach(function(a){return Rc(e,a)});return e}function Pc(a,b){g(a).forEach(function(c){b.db.objectStoreNames.contains(c)||(G&&!1,Oc(b,c,a[c].primKey,a[c].indexes))})}function Qc(a,b){[].slice.call(b.db.objectStoreNames).forEach(function(c){return a[c]==null&&b.db.deleteObjectStore(c)})}function Rc(a,b){a.createIndex(b.name,b.keyPath,{unique:b.unique,multiEntry:b.multi})}function Sc(a,b,c){var d={};a=t(b.objectStoreNames,0);a.forEach(function(a){var b=c.objectStore(a),e=b.keyPath,f=sc(tc(e),e||"",!0,!1,!!b.autoIncrement,e&&typeof e!=="string",!0),g=[];for(var h=0;h<b.indexNames.length;++h){var i=b.index(b.indexNames[h]);e=i.keyPath;i=sc(i.name,e,!!i.unique,!!i.multiEntry,!1,e&&typeof e!=="string",!1);g.push(i)}d[a]=uc(a,f,g)});return d}function Tc(a,b,c){a.verno=b.version/10;c=a._dbSchema=Sc(a,b,c);a._storeNames=t(b.objectStoreNames,0);Gc(a,[a._allTables],g(c),c)}function Uc(a,b){b=Sc(a,a.idbdb,b);b=Nc(b,a._dbSchema);return!(b.add.length||b.change.some(function(a){return a.add.length||a.change.length}))}function Vc(a,b,c){var d=c.db.objectStoreNames;for(var e=0;e<d.length;++e){var g=d[e],h=c.objectStore(g);a._hasGetAll="getAll"in h;for(var i=0;i<h.indexNames.length;++i){var j=h.indexNames[i],k=h.index(j).keyPath;k=typeof k==="string"?k:"["+t(k).join("+")+"]";if(b[g]){var l=b[g].idxByName[k];l&&(l.name=j,delete b[g].idxByName[k],b[g].idxByName[j]=l)}}}typeof navigator!=="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&f.WorkerGlobalScope&&f instanceof f.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(a._hasGetAll=!1)}function Wc(a){return a.split(",").map(function(a,b){a=a.trim();var c=a.replace(/([&*]|\+\+)/g,""),d=/^\[/.test(c)?c.match(/^\[(.*)\]$/)[1].split("+"):c;return sc(c,d||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),h(d),b===0)})}var Xc=function(){function a(){}a.prototype._parseStoresSpec=function(a,b){g(a).forEach(function(c){if(a[c]!==null){var d=Wc(a[c]),e=d.shift();e.unique=!0;if(e.multi)throw new D.Schema("Primary key cannot be multi-valued");d.forEach(function(a){if(a.auto)throw new D.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new D.Schema("Index must have a name and cannot be an empty string")});b[c]=uc(c,e,d)}})};a.prototype.stores=function(a){var b=this.db;this._cfg.storesSource=this._cfg.storesSource?i(this._cfg.storesSource,a):a;a=b._versions;var c={},d={};a.forEach(function(a){i(c,a._cfg.storesSource),d=a._cfg.dbschema={},a._parseStoresSpec(c,d)});b._dbSchema=d;Hc(b,[b._allTables,b,b.Transaction.prototype]);Gc(b,[b._allTables,b,b.Transaction.prototype,this._cfg.tables],g(d),d);b._storeNames=g(d);return this};a.prototype.upgrade=function(a){this._cfg.contentUpgrade=Ga(this._cfg.contentUpgrade||E,a);return this};return a}();function Yc(a){return Qb(Xc.prototype,function(b){this.db=a,this._cfg={version:b,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Zc(a,b){var c=a._dbNamesDB;c||(c=a._dbNamesDB=new Y(Db,{addons:[],indexedDB:a,IDBKeyRange:b}),c.version(1).stores({dbnames:"name"}));return c.table("dbnames")}function $c(a){return a&&typeof a.databases==="function"}function ad(a){var b=a.indexedDB;a=a.IDBKeyRange;return $c(b)?Promise.resolve(b.databases()).then(function(a){return a.map(function(a){return a.name}).filter(function(a){return a!==Db})}):Zc(b,a).toCollection().primaryKeys()}function bd(a,b){var c=a.indexedDB;a=a.IDBKeyRange;!$c(c)&&b!==Db&&Zc(c,a).put({name:b})["catch"](E)}function cd(a,b){var c=a.indexedDB;a=a.IDBKeyRange;!$c(c)&&b!==Db&&Zc(c,a)["delete"](b)["catch"](E)}function dd(a){return N(function(){J.letThrough=!0;return a()})}function ed(){var a=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!a||!indexedDB.databases)return Promise.resolve();var b;return new Promise(function(a){var c=function(){return indexedDB.databases()["finally"](a)};b=setInterval(c,100);c()})["finally"](function(){return clearInterval(b)})}function fd(a){return!("from"in a)}var X=function(a,b){if(this)i(this,arguments.length?{d:1,from:a,to:arguments.length>1?b:a}:{d:0});else{var c=new X();a&&"d"in a&&i(c,a);return c}};m(X.prototype,(H={add:function(a){hd(this,a);return this},addKey:function(a){gd(this,a,a);return this},addKeys:function(a){var b=this;a.forEach(function(a){return gd(b,a,a)});return this}},H[na]=function(){return jd(this)},H));function gd(a,b,c){var d=S(b,c);if(isNaN(d))return;if(d>0)throw RangeError();if(fd(a))return i(a,{from:b,to:c,d:1});d=a.l;var e=a.r;if(S(c,a.from)<0){d?gd(d,b,c):a.l={from:b,to:c,d:1,l:null,r:null};return kd(a)}if(S(b,a.to)>0){e?gd(e,b,c):a.r={from:b,to:c,d:1,l:null,r:null};return kd(a)}S(b,a.from)<0&&(a.from=b,a.l=null,a.d=e?e.d+1:1);S(c,a.to)>0&&(a.to=c,a.r=null,a.d=a.l?a.l.d+1:1);b=!a.r;d&&!a.l&&hd(a,d);e&&b&&hd(a,e)}function hd(a,b){function c(a,b){var d=b.from,e=b.to,f=b.l;b=b.r;gd(a,d,e);f&&c(a,f);b&&c(a,b)}fd(b)||c(a,b)}function id(a,b){b=jd(b);var c=b.next();if(c.done)return!1;var d=c.value;a=jd(a);var e=a.next(d.from),f=e.value;while(!c.done&&!e.done){if(S(f.from,d.to)<=0&&S(f.to,d.from)>=0)return!0;S(d.from,f.from)<0?d=(c=b.next(f.from)).value:f=(e=a.next(d.from)).value}return!1}function jd(a){var b=fd(a)?null:{s:0,n:a};return{next:function(a){var c=arguments.length>0;while(b)switch(b.s){case 0:b.s=1;if(c)while(b.n.l&&S(a,b.n.from)<0)b={up:b,n:b.n.l,s:1};else while(b.n.l)b={up:b,n:b.n.l,s:1};case 1:b.s=2;if(!c||S(a,b.n.to)<=0)return{value:b.n,done:!1};case 2:if(b.n.r){b.s=3;b={up:b,n:b.n.r,s:0};continue}case 3:b=b.up}return{done:!0}}}}function kd(a){var b;b=(((b=a.r)===null||b===void 0?void 0:b.d)||0)-(((b=a.l)===null||b===void 0?void 0:b.d)||0);b=b>1?"r":b<-1?"l":"";if(b){var c=b==="r"?"l":"r",e=d({},a),f=a[b];a.from=f.from;a.to=f.to;a[b]=f[b];e[b]=f[c];a[c]=e;e.d=ld(e)}a.d=ld(a)}function ld(a){var b=a.r;a=a.l;return(b?a?Math.max(b.d,a.d):b.d:a?a.d:0)+1}function md(a,b){g(b).forEach(function(c){a[c]?hd(a[c],b[c]):a[c]=ha(b[c])});return a}function nd(a,b){return a.all||b.all||Object.keys(a).some(function(c){return b[c]&&id(b[c],a[c])})}var od={},pd={},qd=!1;function rd(a,b){md(pd,a),qd||(qd=!0,setTimeout(function(){qd=!1;var a=pd;pd={};sd(a,!1)},0))}function sd(a,b){b===void 0&&(b=!1);var c=new Set();if(a.all)for(var d=0,e=Object.values(od);d<e.length;d++){var f=e[d];td(f,a,c,b)}else for(e in a){d=/^idb\:\/\/(.*)\/(.*)\//.exec(e);if(d){var g=d[1];d=d[2];var f=od["idb://".concat(g,"/").concat(d)];f&&td(f,a,c,b)}}c.forEach(function(a){return a()})}function td(a,b,c,d){var e=[];for(var f=0,g=Object.entries(a.queries.query);f<g.length;f++){var h=g[f],i=h[0];h=h[1];var j=[];for(var k=0,h=h;k<h.length;k++){var l=h[k];nd(b,l.obsSet)?l.subscribers.forEach(function(a){return c.add(a)}):d&&j.push(l)}d&&e.push([i,j])}if(d)for(l=0,k=e;l<k.length;l++){h=k[l];var i=h[0],j=h[1];a.queries.query[i]=j}}function ud(a){var b=a._state,c=a._deps.indexedDB;if(b.isBeingOpened||a.idbdb)return b.dbReadyPromise.then(function(){return b.dbOpenError?Q(b.dbOpenError):a});b.isBeingOpened=!0;b.dbOpenError=null;b.openComplete=!1;var d=b.openCanceller,e=Math.round(a.verno*10),f=!1;function g(){if(b.openCanceller!==d)throw new D.DatabaseClosed("db.open() was cancelled")}var h=b.dbReadyResolve,i=null,j=!1,k=function(){return new K(function(d,h){g();if(!c)throw new D.MissingAPI();var l=a.name,m=b.autoSchema||!e?c.open(l):c.open(l,e);if(!m)throw new D.MissingAPI();m.onerror=V(h);m.onblocked=L(a._fireOnBlocked);m.onupgradeneeded=L(function(d){i=m.transaction;if(b.autoSchema&&!a._options.allowEmptyDB){m.onerror=nc;i.abort();m.result.close();var e=c.deleteDatabase(l);e.onsuccess=e.onerror=L(function(){h(new D.NoSuchDatabase("Database ".concat(l," doesnt exist")))})}else{i.onerror=V(h);e=d.oldVersion>Math.pow(2,62)?0:d.oldVersion;j=e<1;a.idbdb=m.result;f&&Kc(a,i);Jc(a,e/10,i,h)}},h);m.onsuccess=L(function(){i=null;var c=a.idbdb=m.result,g=t(c.objectStoreNames);if(g.length>0)try{g=c.transaction(vc(g),"readonly");if(b.autoSchema)Tc(a,c,g);else{Vc(a,a._dbSchema,g);if(!Uc(a,g)&&!f){c.close();e=c.version+1;f=!0;return d(k())}}Fc(a,g)}catch(a){}Cb.push(a);c.onversionchange=L(function(c){b.vcFired=!0,a.on("versionchange").fire(c)});c.onclose=L(function(b){a.on("close").fire(b)});j&&bd(a._deps,l);d()},h)})["catch"](function(a){switch(a===null||a===void 0?void 0:a.name){case"UnknownError":if(b.PR1398_maxLoop>0){b.PR1398_maxLoop--;return k()}break;case"VersionError":if(e>0){e=0;return k()}break}return K.reject(a)})};return K.race([d,(typeof navigator==="undefined"?K.resolve():ed()).then(k)]).then(function(){g();b.onReadyBeingFired=[];return K.resolve(dd(function(){return a.on.ready.fire(a.vip)})).then(function c(){if(b.onReadyBeingFired.length>0){var d=b.onReadyBeingFired.reduce(Ga,E);b.onReadyBeingFired=[];return K.resolve(dd(function(){return d(a.vip)})).then(c)}})})["finally"](function(){b.openCanceller===d&&(b.onReadyBeingFired=null,b.isBeingOpened=!1)})["catch"](function(c){b.dbOpenError=c;try{i&&i.abort()}catch(a){}d===b.openCanceller&&a._close();return Q(c)})["finally"](function(){b.openComplete=!0,h()}).then(function(){if(j){var b={};a.tables.forEach(function(c){c.schema.indexes.forEach(function(d){d.name&&(b["idb://".concat(a.name,"/").concat(c.name,"/").concat(d.name)]=new X(-Infinity,[[[]]]))}),b["idb://".concat(a.name,"/").concat(c.name,"/")]=b["idb://".concat(a.name,"/").concat(c.name,"/:dels")]=new X(-Infinity,[[[]]])});W(oc).fire(b);sd(b,!0)}return a})}function vd(a){var b=function(b){return a.next(b)},c=function(b){return a["throw"](b)},d=f(b),e=f(c);function f(a){return function(b){b=a(b);var c=b.value;return b.done?c:!c||typeof c.then!=="function"?h(c)?Promise.all(c).then(d,e):d(c):c.then(d,e)}}return f(b)()}function wd(a,b,c){var d=arguments.length;if(d<2)throw new D.InvalidArgument("Too few arguments");var e=new Array(d-1);while(--d)e[d-1]=arguments[d];c=e.pop();var f=fa(e);return[a,f,c]}function xd(a,b,c,d,e){return K.resolve().then(function(){var f=J.transless||J,g=a._createTransaction(b,c,a._dbSchema,d);g.explicit=!0;f={trans:g,transless:f};if(d)g.idbtrans=d.idbtrans;else try{g.create(),g.idbtrans._explicit=!0,a._state.PR1398_maxLoop=3}catch(d){if(d.name===wa.InvalidState&&a.isOpen()&&--a._state.PR1398_maxLoop>0){a.close({disableAutoOpen:!1});return a.open().then(function(){return xd(a,b,c,null,e)})}return Q(d)}var h=qa(e);h&&qb();var i;f=K.follow(function(){i=e.call(g,g);if(i)if(h){var a=O.bind(null,null);i.then(a,a)}else typeof i.next==="function"&&typeof i["throw"]==="function"&&(i=vd(i))},f);return(i&&typeof i.then==="function"?K.resolve(i).then(function(a){return g.active?a:Q(new D.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):f.then(function(){return i})).then(function(a){d&&g._resolve();return g._completion.then(function(){return a})})["catch"](function(a){g._reject(a);return Q(a)})})}function yd(a,b,c){a=h(a)?a.slice():[a];for(var d=0;d<c;++d)a.push(b);return a}function zd(a){return d(d({},a),{table:function(b){var c=a.table(b);b=c.schema;var e={},f=[];function g(a,b,c){var h=Bc(a),i=e[h]=e[h]||[],j=a==null?0:typeof a==="string"?1:a.length,k=b>0;h=d(d({},c),{name:k?"".concat(h,"(virtual-from:").concat(c.name,")"):c.name,lowLevelIndex:c,isVirtual:k,keyTail:b,keyLength:j,extractKey:xc(a),unique:!k&&c.unique});i.push(h);h.isPrimaryKey||f.push(h);if(j>1){k=j===2?a[0]:a.slice(0,j-1);g(k,b+1,c)}i.sort(function(a,b){return a.keyTail-b.keyTail});return h}var h=g(b.primaryKey.keyPath,0,b.primaryKey);e[":id"]=[h];for(var i=0,j=b.indexes;i<j.length;i++){var k=j[i];g(k.keyPath,0,k)}function l(a){a=e[Bc(a)];return a&&a[0]}function m(b,c){return{type:b.type===1?2:b.type,lower:yd(b.lower,b.lowerOpen?a.MAX_KEY:a.MIN_KEY,c),lowerOpen:!0,upper:yd(b.upper,b.upperOpen?a.MIN_KEY:a.MAX_KEY,c),upperOpen:!0}}function n(b){var a=b.query.index;return a.isVirtual?d(d({},b),{query:{index:a.lowLevelIndex,range:m(b.query.range,a.keyTail)}}):b}k=d(d({},c),{schema:d(d({},b),{primaryKey:h,indexes:f,getIndexByKeyPath:l}),count:function(a){return c.count(n(a))},query:function(a){return c.query(n(a))},openCursor:function(d){var b=d.query.index,e=b.keyTail,f=b.isVirtual,g=b.keyLength;if(!f)return c.openCursor(d);function h(b){function c(c){c!=null?b["continue"](yd(c,d.reverse?a.MAX_KEY:a.MIN_KEY,e)):d.unique?b["continue"](b.key.slice(0,g).concat(d.reverse?a.MIN_KEY:a.MAX_KEY,e)):b["continue"]()}c=Object.create(b,{"continue":{value:c},continuePrimaryKey:{value:function(d,c){b.continuePrimaryKey(yd(d,a.MAX_KEY,e),c)}},primaryKey:{get:function(){return b.primaryKey}},key:{get:function(){var a=b.key;return g===1?a[0]:a.slice(0,g)}},value:{get:function(){return b.value}}});return c}return c.openCursor(n(d)).then(function(a){return a&&h(a)})}});return k}})}var Ad={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:zd};function Bd(a,b,c,d){c=c||{};d=d||"";g(a).forEach(function(e){if(!l(b,e))c[d+e]=void 0;else{var f=a[e],g=b[e];if(typeof f==="object"&&typeof g==="object"&&f&&g){var h=ma(f),i=ma(g);h!==i?c[d+e]=b[e]:h==="Object"?Bd(f,g,c,d+e+"."):f!==g&&(c[d+e]=b[e])}else f!==g&&(c[d+e]=b[e])}});g(b).forEach(function(e){l(a,e)||(c[d+e]=b[e])});return c}function Cd(a,b){return b.type==="delete"?b.keys:b.keys||b.values.map(a.extractKey)}var Dd={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(a){return d(d({},a),{table:function(b){var c=a.table(b),f=c.schema.primaryKey,g=d(d({},c),{mutate:function(a){var g=J.trans,h=g.table(b).hook,i=h.deleting,j=h.creating,k=h.updating;switch(a.type){case"add":if(j.fire===E)break;return g._promise("readwrite",function(){return m(a)},!0);case"put":if(j.fire===E&&k.fire===E)break;return g._promise("readwrite",function(){return m(a)},!0);case"delete":if(i.fire===E)break;return g._promise("readwrite",function(){return m(a)},!0);case"deleteRange":if(i.fire===E)break;return g._promise("readwrite",function(){return n(a)},!0)}return c.mutate(a);function m(b){var g=J.trans,a=b.keys||Cd(f,b);if(!a)throw new Error("Keys missing");b=b.type==="add"||b.type==="put"?d(d({},b),{keys:a}):d({},b);b.type!=="delete"&&(b.values=e([],b.values,!0));b.keys&&(b.keys=e([],b.keys,!0));return Ed(c,b,a).then(function(d){var e=a.map(function(a,c){var e=d[c],h={onerror:null,onsuccess:null};if(b.type==="delete")i.fire.call(h,a,e,g);else if(b.type==="add"||e===void 0){var m=j.fire.call(h,a,b.values[c],g);a==null&&m!=null&&(a=m,b.keys[c]=a,f.outbound||x(b.values[c],f.keyPath,a))}else{m=Bd(e,b.values[c]);var n=k.fire.call(h,m,a,e,g);if(n){var o=b.values[c];Object.keys(n).forEach(function(a){l(o,a)?o[a]=n[a]:x(o,a,n[a])})}}return h});return c.mutate(b).then(function(c){var f=c.failures,g=c.results,h=c.numFailures;c=c.lastResult;for(var i=0;i<a.length;++i){var j=g?g[i]:a[i],k=e[i];j==null?k.onerror&&k.onerror(f[i]):k.onsuccess&&k.onsuccess(b.type==="put"&&d[i]?b.values[i]:j)}return{failures:f,results:g,numFailures:h,lastResult:c}})["catch"](function(a){e.forEach(function(b){return b.onerror&&b.onerror(a)});return Promise.reject(a)})})}function n(a){return o(a.trans,a.range,1e4)}function o(a,b,e){return c.query({trans:a,values:!1,query:{index:f,range:b},limit:e}).then(function(c){var f=c.result;return m({type:"delete",keys:f,trans:a}).then(function(c){if(c.numFailures>0)return Promise.reject(c.failures[0]);if(f.length<e)return{failures:[],numFailures:0,lastResult:void 0};else return o(a,d(d({},b),{lower:f[f.length-1],lowerOpen:!0}),e)})})}}});return g}})}};function Ed(a,b,c){return b.type==="add"?Promise.resolve([]):a.getMany({trans:b.trans,keys:c,cache:"immutable"})}function Fd(a,b,c){try{if(!b)return null;if(b.keys.length<a.length)return null;var d=[];for(var e=0,f=0;e<b.keys.length&&f<a.length;++e){if(S(b.keys[e],a[f])!==0)continue;d.push(c?z(b.values[e]):b.values[e]);++f}return d.length===a.length?d:null}catch(a){return null}}var Gd={stack:"dbcore",level:-1,create:function(a){return{table:function(b){var c=a.table(b);return d(d({},c),{getMany:function(a){if(!a.cache)return c.getMany(a);var b=Fd(a.keys,a.trans._cache,a.cache==="clone");return b?K.resolve(b):c.getMany(a).then(function(b){a.trans._cache={keys:a.keys,values:a.cache==="clone"?z(b):b};return b})},mutate:function(a){a.type!=="add"&&(a.trans._cache=null);return c.mutate(a)}})}}}};function Hd(a,b){return a.trans.mode==="readonly"&&!!a.subscr&&!a.trans.explicit&&a.trans.db._options.cache!=="disabled"&&!b.schema.primaryKey.outbound}function Id(a,b){switch(a){case"query":return b.values&&!b.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var Jd={stack:"dbcore",level:0,name:"Observability",create:function(a){var b=a.schema.name,c=new X(a.MIN_KEY,a.MAX_KEY);return d(d({},a),{transaction:function(b,c,d){if(J.subscr&&c!=="readonly")throw new D.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(J.querier));return a.transaction(b,c,d)},table:function(e){var f=a.table(e),i=f.schema,j=i.primaryKey,k=j.extractKey,l=j.outbound,m=d(d({},f),{mutate:function(g){var k=g.trans,l=g.mutatedParts||(g.mutatedParts={}),m=function(a){a="idb://".concat(b,"/").concat(e,"/").concat(a);return l[a]||(l[a]=new X())},n=m(""),o=m(":dels"),d=g.type,p=g.type==="deleteRange"?[g.range]:g.type==="delete"?[g.keys]:g.values.length<50?[Cd(j,g).filter(function(a){return a}),g.values]:[],a=p[0];p=p[1];var q=g.trans._cache;if(h(a)){n.addKeys(a);d=d==="delete"||a.length===p.length?Fd(a,q):null;d||o.addKeys(a);(d||p)&&Kd(m,i,d,p)}else if(a){q={from:a.lower,to:a.upper};o.add(q);n.add(q)}else n.add(c),o.add(c),i.indexes.forEach(function(a){return m(a.name).add(c)});return f.mutate(g).then(function(b){a&&(g.type==="add"||g.type==="put")&&n.addKeys(b.results);k.mutatedParts=md(k.mutatedParts||{},l);return b})}}),n=function(b){b=b.query;var c=b.index;b=b.range;return[c,new X((c=b.lower)!==null&&c!==void 0?c:a.MIN_KEY,(c=b.upper)!==null&&c!==void 0?c:a.MAX_KEY)]},o={get:function(a){return[j,new X(a.key)]},getMany:function(a){return[j,new X().addKeys(a.keys)]},count:n,query:n,openCursor:n};g(o).forEach(function(a){m[a]=function(g){var h=J.subscr,i=!!h,j=Hd(J,f)&&Id(a,g),m=j?g.obsSet={}:h;if(i){var n=function(a){a="idb://".concat(b,"/").concat(e,"/").concat(a);return m[a]||(m[a]=new X())},p=n(""),q=n(":dels"),r=o[a](g),s=r[0],t=r[1];a==="query"&&s.isPrimaryKey&&!g.values?q.add(t):n(s.name||"").add(t);if(!s.isPrimaryKey)if(a==="count")q.add(c);else{var u=a==="query"&&l&&g.values&&f.query(d(d({},g),{values:!1}));return f[a].apply(this,arguments).then(function(b){if(a==="query"){if(l&&g.values)return u.then(function(a){a=a.result;p.addKeys(a);return b});var c=g.values?b.result.map(k):b.result;g.values?p.addKeys(c):q.addKeys(c)}else if(a==="openCursor"){var d=b,e=g.values;return d&&Object.create(d,{key:{get:function(){q.addKey(d.primaryKey);return d.key}},primaryKey:{get:function(){var a=d.primaryKey;q.addKey(a);return a}},value:{get:function(){e&&p.addKey(d.primaryKey);return d.value}}})}return b})}}return f[a].apply(this,arguments)}});return m}})}};function Kd(a,b,c,d){function e(b){var e=a(b.name||"");function f(a){return a!=null?b.extractKey(a):null}var g=function(a){return b.multiEntry&&h(a)?a.forEach(function(a){return e.addKey(a)}):e.addKey(a)};(c||d).forEach(function(a,b){a=c&&f(c[b]);b=d&&f(d[b]);S(a,b)!==0&&(a!=null&&g(a),b!=null&&g(b))})}b.indexes.forEach(e)}function Ld(a,b,c){if(c.numFailures===0)return b;if(b.type==="deleteRange")return null;a=b.keys?b.keys.length:"values"in b&&b.values?b.values.length:1;if(c.numFailures===a)return null;a=d({},b);h(a.keys)&&(a.keys=a.keys.filter(function(a,b){return!(b in c.failures)}));"values"in a&&h(a.values)&&(a.values=a.values.filter(function(a,b){return!(b in c.failures)}));return a}function Md(a,b){return b.lower===void 0?!0:b.lowerOpen?S(a,b.lower)>0:S(a,b.lower)>=0}function Nd(a,b){return b.upper===void 0?!0:b.upperOpen?S(a,b.upper)<0:S(a,b.upper)<=0}function Od(a,b){return Md(a,b)&&Nd(a,b)}function Pd(a,b,c,d,e,f){if(!c||c.length===0)return a;var g=b.query.index,i=g.multiEntry,j=b.query.range;d=d.schema.primaryKey;var k=d.extractKey,l=g.extractKey,m=(g.lowLevelIndex||g).extractKey;d=c.reduce(function(a,c){var d=a,e=c.type==="add"||c.type==="put"?c.values.filter(function(a){a=l(a);return i&&h(a)?a.some(function(a){return Od(a,j)}):Od(a,j)}).map(function(a){a=z(a);f&&Object.freeze(a);return a}):[];switch(c.type){case"add":d=a.concat(b.values?e:e.map(function(a){return k(a)}));break;case"put":var g=new X().addKeys(c.values.map(function(a){return k(a)}));d=a.filter(function(a){a=b.values?k(a):a;return!id(new X(a),g)}).concat(b.values?e:e.map(function(a){return k(a)}));break;case"delete":var m=new X().addKeys(c.keys);d=a.filter(function(a){a=b.values?k(a):a;return!id(new X(a),m)});break;case"deleteRange":var n=c.range;d=a.filter(function(a){return!Od(k(a),n)});break}return d},a);if(d===a)return a;d.sort(function(a,b){return S(m(a),m(b))||S(k(a),k(b))});b.limit&&b.limit<Infinity&&(d.length>b.limit?d.length=b.limit:a.length===b.limit&&d.length<b.limit&&(e.dirty=!0));return f?Object.freeze(d):d}function Qd(a,b){return S(a.lower,b.lower)===0&&S(a.upper,b.upper)===0&&!!a.lowerOpen===!!b.lowerOpen&&!!a.upperOpen===!!b.upperOpen}function Rd(a,b,c,d){if(a===void 0)return b!==void 0?-1:0;if(b===void 0)return 1;a=S(a,b);if(a===0){if(c&&d)return 0;if(c)return 1;if(d)return-1}return a}function Sd(a,b,c,d){if(a===void 0)return b!==void 0?1:0;if(b===void 0)return-1;a=S(a,b);if(a===0){if(c&&d)return 0;if(c)return-1;if(d)return 1}return a}function Td(a,b){return Rd(a.lower,b.lower,a.lowerOpen,b.lowerOpen)<=0&&Sd(a.upper,b.upper,a.upperOpen,b.upperOpen)>=0}function Ud(b,c,a,d){b=od["idb://".concat(b,"/").concat(c)];if(!b)return[];c=b.queries[a];if(!c)return[null,!1,b,null];var e=d.query?d.query.index.name:null;c=c[e||""];if(!c)return[null,!1,b,null];switch(a){case"query":e=c.find(function(a){return a.req.limit===d.limit&&a.req.values===d.values&&Qd(a.req.query.range,d.query.range)});if(e)return[e,!0,b,c];a=c.find(function(a){var b="limit"in a.req?a.req.limit:Infinity;return b>=d.limit&&(d.values?a.req.values:!0)&&Td(a.req.query.range,d.query.range)});return[a,!1,b,c];case"count":e=c.find(function(a){return Qd(a.req.query.range,d.query.range)});return[e,!!e,b,c]}}function Vd(a,b,c,d){a.subscribers.add(c),d.addEventListener("abort",function(){a.subscribers["delete"](c),a.subscribers.size===0&&Wd(a,b)})}function Wd(a,b){setTimeout(function(){a.subscribers.size===0&&A(b,a)},3e3)}var Xd={stack:"dbcore",level:0,name:"Cache",create:function(a){var b=a.schema.name,c=d(d({},a),{transaction:function(c,d,e){var f=a.transaction(c,d,e);if(d==="readwrite"){var g=new AbortController();e=g.signal;var h=function(e){return function(){g.abort();if(d==="readwrite"){var h=new Set();for(var i=0,j=c;i<j.length;i++){var k=j[i],l=od["idb://".concat(b,"/").concat(k)];if(l){k=a.table(k);var m=l.optimisticOps.filter(function(a){return a.trans===f});if(f._explicit&&e&&f.mutatedParts)for(var n=0,o=Object.values(l.queries.query);n<o.length;n++){var p=o[n];for(var q=0,r=p.slice();q<r.length;q++){var s=r[q];nd(s.obsSet,f.mutatedParts)&&(A(p,s),s.subscribers.forEach(function(a){return h.add(a)}))}}else if(m.length>0){l.optimisticOps=l.optimisticOps.filter(function(a){return a.trans!==f});for(q=0,r=Object.values(l.queries.query);q<r.length;q++){var p=r[q];for(n=0,o=p.slice();n<o.length;n++){var s=o[n];if(s.res!=null&&f.mutatedParts)if(e&&!s.dirty){l=Object.isFrozen(s.res);l=Pd(s.res,s.req,m,k,s,l);s.dirty?(A(p,s),s.subscribers.forEach(function(a){return h.add(a)})):l!==s.res&&(s.res=l,s.promise=K.resolve({result:l}))}else s.dirty&&A(p,s),s.subscribers.forEach(function(a){return h.add(a)})}}}}}h.forEach(function(a){return a()})}}};f.addEventListener("abort",h(!1),{signal:e});f.addEventListener("error",h(!1),{signal:e});f.addEventListener("complete",h(!0),{signal:e})}return f},table:function(c){var e=a.table(c),f=e.schema.primaryKey,g=d(d({},e),{mutate:function(a){var g=J.trans;if(f.outbound||g.db._options.cache==="disabled"||g.explicit)return e.mutate(a);var h=od["idb://".concat(b,"/").concat(c)];if(!h)return e.mutate(a);g=e.mutate(a);(a.type==="add"||a.type==="put")&&(a.values.length>=50||Cd(f,a).some(function(a){return a==null}))?g.then(function(b){var c=d(d({},a),{values:a.values.map(function(a,c){var e;e=((e=f.keyPath)===null||e===void 0?void 0:e.includes("."))?z(a):d({},a);x(e,f.keyPath,b.results[c]);return e})});c=Ld(h,c,b);h.optimisticOps.push(c);queueMicrotask(function(){return a.mutatedParts&&rd(a.mutatedParts)})}):(h.optimisticOps.push(a),a.mutatedParts&&rd(a.mutatedParts),g.then(function(b){if(b.numFailures>0){A(h.optimisticOps,a);b=Ld(h,a,b);b&&h.optimisticOps.push(b);a.mutatedParts&&rd(a.mutatedParts)}}),g["catch"](function(){A(h.optimisticOps,a),a.mutatedParts&&rd(a.mutatedParts)}));return g},query:function(a){var d;if(!Hd(J,e)||!Id("query",a))return e.query(a);var f=((d=J.trans)===null||d===void 0?void 0:d.db._options.cache)==="immutable";d=J;var g=d.requery;d=d.signal;var h=Ud(b,c,"query",a),i=h[0],j=h[1],k=h[2],l=h[3];if(i&&j)i.obsSet=a.obsSet;else{h=e.query(a).then(function(a){var b=a.result;i&&(i.res=b);if(f){for(var c=0,d=b.length;c<d;++c)Object.freeze(b[c]);Object.freeze(b)}else a.result=z(b);return a})["catch"](function(a){l&&i&&A(l,i);return Promise.reject(a)});i={obsSet:a.obsSet,promise:h,subscribers:new Set(),type:"query",req:a,dirty:!1};l?l.push(i):(l=[i],k||(k=od["idb://".concat(b,"/").concat(c)]={queries:{query:{},count:{}},objs:new Map(),optimisticOps:[],unsignaledParts:{}}),k.queries.query[a.query.index.name||""]=l)}Vd(i,l,g,d);return i.promise.then(function(b){return{result:Pd(b.result,a,k===null||k===void 0?void 0:k.optimisticOps,e,i,f)}})}});return g}});return c}};function Yd(a,b){return new Proxy(a,{get:function(a,c,d){return c==="db"?b:Reflect.get(a,c,d)}})}var Y=function(){function a(b,c){var e=this;this._middlewares={};this.verno=0;var f=a.dependencies;this._options=c=d({addons:a.addons,autoOpen:!0,indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange,cache:"cloned"},c);this._deps={indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange};f=c.addons;this._dbSchema={};this._versions=[];this._storeNames=[];this._allTables={};this.idbdb=null;this._novip=this;var g={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:E,dbReadyPromise:null,cancelOpen:E,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:c.autoOpen};g.dbReadyPromise=new K(function(a){g.dbReadyResolve=a});g.openCanceller=new K(function(a,b){g.cancelOpen=b});this._state=g;this.name=b;this.on=Pb(this,"populate","blocked","versionchange","close",{ready:[Ga,E]});this.on.ready.subscribe=u(this.on.ready.subscribe,function(b){return function(c,d){a.vip(function(){var a=e._state;if(a.openComplete)a.dbOpenError||K.resolve().then(c),d&&b(c);else if(a.onReadyBeingFired)a.onReadyBeingFired.push(c),d&&b(c);else{b(c);var f=e;d||b(function a(){f.on.ready.unsubscribe(c),f.on.ready.unsubscribe(a)})}})}});this.Collection=cc(this);this.Table=Rb(this);this.Transaction=rc(this);this.Version=Yc(this);this.WhereClause=mc(this);this.on("versionchange",function(a){a.newVersion>0?!1:!1,e.close({disableAutoOpen:!1})});this.on("blocked",function(a){!a.newVersion||a.newVersion<a.oldVersion?!1:!1});this._maxKey=wc(c.IDBKeyRange);this._createTransaction=function(a,b,c,d){return new e.Transaction(a,b,c,e._options.chromeTransactionDurability,d)};this._fireOnBlocked=function(a){e.on("blocked").fire(a),Cb.filter(function(a){return a.name===e.name&&a!==e&&!a._state.vcFired}).map(function(b){return b.on("versionchange").fire(a)})};this.use(Gd);this.use(Xd);this.use(Jd);this.use(Ad);this.use(Dd);var h=new Proxy(this,{get:function(a,b,c){if(b==="_vip")return!0;if(b==="table")return function(a){return Yd(e.table(a),h)};var d=Reflect.get(a,b,c);if(d instanceof Ob)return Yd(d,h);if(b==="tables")return d.map(function(a){return Yd(a,h)});return b==="_createTransaction"?function(){var a=d.apply(this,arguments);return Yd(a,h)}:d}});this.vip=h;f.forEach(function(a){return a(e)})}a.prototype.version=function(a){if(isNaN(a)||a<.1)throw new D.Type("Given version is not a positive number");a=Math.round(a*10)/10;if(this.idbdb||this._state.isBeingOpened)throw new D.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,a);var b=this._versions,c=b.filter(function(b){return b._cfg.version===a})[0];if(c)return c;c=new this.Version(a);b.push(c);b.sort(Ic);c.stores({});this._state.autoSchema=!1;return c};a.prototype._whenReady=function(a){var b=this;return this.idbdb&&(this._state.openComplete||J.letThrough||this._vip)?a():new K(function(a,c){if(b._state.openComplete)return c(new D.DatabaseClosed(b._state.dbOpenError));if(!b._state.isBeingOpened){if(!b._state.autoOpen){c(new D.DatabaseClosed());return}b.open()["catch"](E)}b._state.dbReadyPromise.then(a,c)}).then(a)};a.prototype.use=function(a){var b=a.stack,c=a.create,d=a.level;a=a.name;a&&this.unuse({stack:b,name:a});var e=this._middlewares[b]||(this._middlewares[b]=[]);e.push({stack:b,create:c,level:d==null?10:d,name:a});e.sort(function(a,b){return a.level-b.level});return this};a.prototype.unuse=function(a){var b=a.stack,c=a.name,d=a.create;b&&this._middlewares[b]&&(this._middlewares[b]=this._middlewares[b].filter(function(a){return d?a.create!==d:c?a.name!==c:!1}));return this};a.prototype.open=function(){var a=this;return vb(I,function(){return ud(a)})};a.prototype._close=function(){var a=this._state,b=Cb.indexOf(this);b>=0&&Cb.splice(b,1);if(this.idbdb){try{this.idbdb.close()}catch(a){}this.idbdb=null}a.isBeingOpened||(a.dbReadyPromise=new K(function(b){a.dbReadyResolve=b}),a.openCanceller=new K(function(b,c){a.cancelOpen=c}))};a.prototype.close=function(a){a=a===void 0?{disableAutoOpen:!0}:a;a=a.disableAutoOpen;var b=this._state;a?(b.isBeingOpened&&b.cancelOpen(new D.DatabaseClosed()),this._close(),b.autoOpen=!1,b.dbOpenError=new D.DatabaseClosed()):(this._close(),b.autoOpen=this._options.autoOpen||b.isBeingOpened,b.openComplete=!1,b.dbOpenError=null)};a.prototype["delete"]=function(a){var b=this;a===void 0&&(a={disableAutoOpen:!0});var c=arguments.length>0&&typeof arguments[0]!=="object",d=this._state;return new K(function(e,f){var g=function(){b.close(a);var c=b._deps.indexedDB.deleteDatabase(b.name);c.onsuccess=L(function(){cd(b._deps,b.name),e()});c.onerror=V(f);c.onblocked=b._fireOnBlocked};if(c)throw new D.InvalidArgument("Invalid closeOptions argument to db.delete()");d.isBeingOpened?d.dbReadyPromise.then(g):g()})};a.prototype.backendDB=function(){return this.idbdb};a.prototype.isOpen=function(){return this.idbdb!==null};a.prototype.hasBeenClosed=function(){var a=this._state.dbOpenError;return a&&a.name==="DatabaseClosed"};a.prototype.hasFailed=function(){return this._state.dbOpenError!==null};a.prototype.dynamicallyOpened=function(){return this._state.autoSchema};Object.defineProperty(a.prototype,"tables",{get:function(){var a=this;return g(this._allTables).map(function(b){return a._allTables[b]})},enumerable:!1,configurable:!0});a.prototype.transaction=function(){var a=wd.apply(this,arguments);return this._transaction.apply(this,a)};a.prototype._transaction=function(a,b,c){var d=this,e=J.trans;(!e||e.db!==this||a.indexOf("!")!==-1)&&(e=null);var f=a.indexOf("?")!==-1;a=a.replace("!","").replace("?","");var g,h;try{h=b.map(function(a){a=a instanceof d.Table?a.name:a;if(typeof a!=="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return a});if(a=="r"||a===Eb)g=Eb;else if(a=="rw"||a==Fb)g=Fb;else throw new D.InvalidArgument("Invalid transaction mode: "+a);if(e){if(e.mode===Eb&&g===Fb)if(f)e=null;else throw new D.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");e&&h.forEach(function(a){if(e&&e.storeNames.indexOf(a)===-1)if(f)e=null;else throw new D.SubTransaction("Table "+a+" not included in parent transaction.")});f&&e&&!e.active&&(e=null)}}catch(a){return e?e._promise(null,function(b,c){c(a)}):Q(a)}var i=xd.bind(null,this,g,h,e,c);return e?e._promise(g,i,"lock"):J.trans?vb(J.transless,function(){return d._whenReady(i)}):this._whenReady(i)};a.prototype.table=function(a){if(!l(this._allTables,a))throw new D.InvalidTable("Table ".concat(a," does not exist"));return this._allTables[a]};return a}(),Zd=typeof Symbol!=="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable",$d=function(){function a(a){this._subscribe=a}a.prototype.subscribe=function(a,b,c){return this._subscribe(!a||typeof a==="function"?{next:a,error:b,complete:c}:a)};a.prototype[Zd]=function(){return this};return a}(),ae;try{ae={indexedDB:f.indexedDB||f.mozIndexedDB||f.webkitIndexedDB||f.msIndexedDB,IDBKeyRange:f.IDBKeyRange||f.webkitIDBKeyRange}}catch(a){ae={indexedDB:null,IDBKeyRange:null}}function be(a){var b=!1,c,d=new $d(function(d){var e=qa(a);function f(b){var c=eb();try{e&&qb();b=N(a,b);e&&(b=b["finally"](O));return b}finally{c&&fb()}}var g=!1,h,i={},j={},k={get closed(){return g},unsubscribe:function(){if(g)return;g=!0;h&&h.abort();l&&W.storagemutated.unsubscribe(o)}};d.start&&d.start(k);var l=!1,m=function(){return xb(p)};function n(){return nd(j,i)}var o=function(a){md(i,a),n()&&m()},p=function(){if(g||!ae.indexedDB)return;i={};var e={};h&&h.abort();h=new AbortController();var k={subscr:e,signal:h.signal,requery:m,querier:a,trans:null},n=f(k);Promise.resolve(n).then(function(a){b=!0;c=a;if(g||k.signal.aborted)return;i={};j=e;!ia(j)&&!l&&(W(oc,o),l=!0);xb(function(){return!g&&d.next&&d.next(a)})},function(a){b=!1,["DatabaseClosedError","AbortError"].includes(a===null||a===void 0?void 0:a.name)||(g||xb(function(){if(g)return;d.error&&d.error(a)}))})};setTimeout(m,0);return k});d.hasValue=function(){return b};d.getValue=function(){return c};return d}var ce=Y;m(ce,d(d({},C),{"delete":function(a){a=new ce(a,{addons:[]});return a["delete"]()},exists:function(a){return new ce(a,{addons:[]}).open().then(function(a){a.close();return!0})["catch"]("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(a){try{return ad(ce.dependencies).then(a)}catch(a){return Q(new D.MissingAPI())}},defineClass:function(){function a(a){i(this,a)}return a},ignoreTransaction:function(a){return J.trans?vb(J.transless,a):a()},vip:dd,async:function(a){return function(){try{var b=vd(a.apply(this,arguments));return!b||typeof b.then!=="function"?K.resolve(b):b}catch(a){return Q(a)}}},spawn:function(a,b,c){try{a=vd(a.apply(c,b||[]));return!a||typeof a.then!=="function"?K.resolve(a):a}catch(a){return Q(a)}},currentTransaction:{get:function(){return J.trans||null}},waitFor:function(a,b){a=K.resolve(typeof a==="function"?ce.ignoreTransaction(a):a).timeout(b||6e4);return J.trans?J.trans.waitFor(a):a},Promise:K,debug:{get:function(){return G},set:function(a){Ha(a)}},derive:p,extend:i,props:m,override:u,Events:Pb,on:W,liveQuery:be,extendObservabilitySet:md,getByKeyPath:w,setByKeyPath:x,delByKeyPath:ca,shallowClone:da,deepClone:z,getObjectDiff:Bd,cmp:S,asap:aa,minKey:Ab,addons:[],connections:Cb,errnames:wa,dependencies:ae,cache:od,semVer:Ka,version:Ka.split(".").map(function(a){return parseInt(a)}).reduce(function(a,b,c){return a+b/Math.pow(10,c*2)})}));ce.maxKey=wc(ce.dependencies.IDBKeyRange);typeof dispatchEvent!=="undefined"&&typeof addEventListener!=="undefined"&&(W(oc,function(a){if(!Z){a=new CustomEvent(pc,{detail:a});Z=!0;dispatchEvent(a);Z=!1}}),addEventListener(pc,function(a){a=a.detail;Z||de(a)}));function de(a){var b=Z;try{Z=!0,W.storagemutated.fire(a),sd(a,!0)}finally{Z=b}}var Z=!1,$,ee=function(){};typeof BroadcastChannel!=="undefined"&&(ee=function(){$=new BroadcastChannel(pc),$.onmessage=function(a){return a.data&&de(a.data)}},ee(),typeof $.unref==="function"&&$.unref(),W(oc,function(a){Z||$.postMessage(a)}));typeof addEventListener!=="undefined"&&(addEventListener("pagehide",function(a){if(!Y.disableBfCache&&a.persisted){G&&!1;$===null||$===void 0?void 0:$.close();for(var a=0,b=Cb;a<b.length;a++){var c=b[a];c.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(a){!Y.disableBfCache&&a.persisted&&(G&&!1,ee(),de({all:new X(-Infinity,[[]])}))}));function fe(a,b){return new $b({replacePrefix:[a,b]})}K.rejectionMapper=za;Ha(G);H=Object.freeze({__proto__:null,Dexie:Y,liveQuery:be,Entity:Jb,cmp:S,PropModSymbol:y,PropModification:$b,replacePrefix:fe,"default":Y,RangeSet:X,mergeRanges:hd,rangesOverlap:id});d(Y,H,{"default":Y});return Y})}var j=!1;function k(){j||(j=!0,i());return h.exports}function b(a){switch(a){case void 0:return k()}}e.exports=b}),null);
__d("dexie_maw-next",["dexie-4.0.1"],(function(a,b,c,d,e,f){e.exports=b("dexie-4.0.1")()}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("file-saver-2.0.2",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){(function(a,b){"undefined"!=typeof g?b():(b(),a.FileSaver={exports:{}}.exports)})(this,function(){function b(b,a){return"undefined"==typeof a?a={autoBom:!1}:"object"!=typeof a&&(!1,a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(b.type)?new Blob(["\ufeff",b],{type:b.type}):b}function c(a,b,c){var d=new XMLHttpRequest;d.open("GET",a),d.responseType="blob",d.onload=function(){g(d.response,b,c)},d.onerror=function(){},d.send()}function d(b){var a=new XMLHttpRequest;a.open("HEAD",b,!1);try{a.send()}catch(a){}return 200<=a.status&&299>=a.status}function e(b){try{b.dispatchEvent(new MouseEvent("click"))}catch(c){var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),b.dispatchEvent(a)}}var f="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof a&&a.global===a?a:void 0,g=f.saveAs||("object"!=typeof window||window!==f?function(){}:"download"in HTMLAnchorElement.prototype?function(a,b,g){var h=f.URL||f.webkitURL,i=document.createElement("a");b=b||a.name||"download",i.download=b,i.rel="noopener","string"==typeof a?(i.href=a,i.origin===location.origin?e(i):d(i.href)?c(a,b,g):e(i,i.target="_blank")):(i.href=h.createObjectURL(a),setTimeout(function(){h.revokeObjectURL(i.href)},4e4),setTimeout(function(){e(i)},0))}:"msSaveOrOpenBlob"in navigator?function(a,f,g){if(f=f||a.name||"download","string"!=typeof a)navigator.msSaveOrOpenBlob(b(a,g),f);else if(d(a))c(a,f,g);else{var h=document.createElement("a");h.href=a,h.target="_blank",setTimeout(function(){e(h)})}}:function(e,a,b,d){if(d=d||open("","_blank"),d&&(d.document.title=d.document.body.innerText="downloading..."),"string"==typeof e)return c(e,a,b);a="application/octet-stream"===e.type;b=/constructor/i.test(f.HTMLElement)||f.safari;var g=/CriOS\/[\d]+/.test(navigator.userAgent);if((g||a&&b)&&"object"==typeof FileReader){var h=new FileReader;h.onloadend=function(){var a=h.result;a=g?a:a.replace(/^data:[^;]*;/,"data:attachment/file;"),d?d.location.href=a:location=a,d=null},h.readAsDataURL(e)}else{var i=f.URL||f.webkitURL,j=i.createObjectURL(e);d?d.location=j:location.href=j,d=null,setTimeout(function(){i.revokeObjectURL(j)},4e4)}});f.saveAs=g.saveAs=g,"undefined"!=typeof h&&(h.exports=g)})}var j=!1;function k(){j||(j=!0,i());return h.exports}function b(a){switch(a){case void 0:return k()}}e.exports=b}),null);
__d("file-saver",["file-saver-2.0.2"],(function(a,b,c,d,e,f){e.exports=b("file-saver-2.0.2")()}),null);/*FB_PKG_DELIM*/
__d("InstamadilloReplyAttachmentId",["I64","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.attachments).getKeyRange(b.threadKey,b.messageId)));if(a==null)return;return(h||(h=d("I64"))).of_string(a.attachmentFbid)});return i.apply(this,arguments)}g.getReplyAttachmentId=a}),98);
__d("InstamadilloReplyAttachmentType",["LSIntEnum","LSReplyMessageAttachmentType","MessagingAttachmentType","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(e={},e[(f=c("MessagingAttachmentType")).STICKER]=(i=c("LSReplyMessageAttachmentType")).STICKER,e[f.SELFIE_STICKER]=i.STICKER,e[f.IMAGE]=i.PHOTO,e[f.ANIMATED_IMAGE]=i.GIF,e[f.VIDEO]=i.VIDEO,e[f.AUDIO]=i.AUDIO,e[f.XMA]=i.XMA,e[f.EPHEMERAL_IMAGE]=i.PERMANENT_RAVEN_PHOTO,e[f.EPHEMERAL_VIDEO]=i.PERMANENT_RAVEN_VIDEO,e[f.SOUND_BITE]=i.SOUND_BITE,e[f.POWER_UP]=i.POWER_UP,e[f.FILE]=i.OTHER,e[f.CATALOG_ITEM]=i.OTHER,e);function a(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.attachments).getKeyRange(b.threadKey,b.messageId)));if(a==null||a.length===0)return;if(a.length>1)return(h||(h=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").MULTIPHOTO);else if(a.length===1)return l(a[0])});return k.apply(this,arguments)}function l(a){a=(h||(h=d("LSIntEnum"))).unwrapIntEnum(a.attachmentType);a=j[a];if(a!=null)return(h||(h=d("LSIntEnum"))).ofNumber(a)}g.getReplyAttachmentType=a}),98);
__d("InstamadilloReplySnippet",["CurrentMessengerUser","I64","LSMessagingThreadTypeUtil","PolarisDirectStrings"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,b){var c;d("PolarisDirectStrings").REPLIED_TO;a&&b?c=d("PolarisDirectStrings").YOU_REPLIED_TO_YOURSELF:b?c=d("PolarisDirectStrings").REPLIED_TO_YOU:a?c=d("PolarisDirectStrings").YOU_REPLIED:c=d("PolarisDirectStrings").REPLIED_TO_THEMSELVES;return c.toString()}function j(a,b,c,e,f){var g=d("PolarisDirectStrings").userRepliedToUser(f,e);b&&c?g=d("PolarisDirectStrings").YOU_REPLIED_TO_YOURSELF:c?g=d("PolarisDirectStrings").userRepliedToYou(f):b?g=d("PolarisDirectStrings").youRepliedToUser(e):a&&(g=d("PolarisDirectStrings").userRepliedToThemselves(f));return g.toString()}function a(a,b,c){var e=b.name,f=c.name,g=(h||(h=d("I64"))).of_string(d("CurrentMessengerUser").getIDorEIMU()),k=h.equal(b.id,c.id);b=h.equal(b.id,g);c=h.equal(c.id,g);g=d("LSMessagingThreadTypeUtil").isOneToOne(a.threadType);if(g)return i(b,c);else return j(k,b,c,f,e)}g.getReplySnippet=a}),98);
__d("InstamadilloReplySourceTypeV2",["LSIntEnum","LSMessageReplySourceTypeV2","LSXmaContentType","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){switch(a){case c("LSXmaContentType").IG_STORY_PHOTO_SHARE:case c("LSXmaContentType").IG_STORY_VIDEO_SHARE:case c("LSXmaContentType").IG_STORY_PHOTO_MENTION:case c("LSXmaContentType").IG_STORY_VIDEO_MENTION:case c("LSXmaContentType").IG_STORY_PHOTO_HIGHLIGHT_SHARE:case c("LSXmaContentType").IG_STORY_VIDEO_HIGHLIGHT_SHARE:return!0;default:return!1}}function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=c("LSMessageReplySourceTypeV2").MESSAGE;a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.attachments).getKeyRange(b.threadKey,b.messageId)));b=a;if((b==null?void 0:b.xmaContentType)!=null){a=(h||(h=d("LSIntEnum"))).unwrapIntEnum(b.xmaContentType);i(a)&&(e=c("LSMessageReplySourceTypeV2").STORY);e=c("LSMessageReplySourceTypeV2").XMA}return(h||(h=d("LSIntEnum"))).ofNumber(e)});return j.apply(this,arguments)}g.getReplySourceTypeV2=a}),98);
__d("InstamadilloReplyStatus",["I64","LSIntEnum","LSReplyMessageStatus","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b=a.isUnsent?c("LSReplyMessageStatus").DELETED:c("LSReplyMessageStatus").VALID;if(a.ephemeralExpirationTs!=null){a=(h||(h=d("I64"))).to_int32(h.sub(a.ephemeralExpirationTs,h.of_float(d("WATimeUtils").unixTime())));a<=0&&(b=c("LSReplyMessageStatus").EXPIRED)}return(i||(i=d("LSIntEnum"))).ofNumber(b)}g.getReplyStatusType=a}),98);
__d("InstamadilloReplyMessageParams",["InstamadilloReplyAttachmentId","InstamadilloReplyAttachmentType","InstamadilloReplySnippet","InstamadilloReplySourceTypeV2","InstamadilloReplyStatus","LSIntEnum","LSMessageReplySourceType","Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(){return{replyMessageText:void 0,replySnippet:void 0,replySourceId:void 0,replySourceType:void 0,replySourceTypeV2:void 0,replyStatus:void 0,replyToUserId:void 0}}function e(a,b,c,d){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){a=(yield (i||(i=b("Promise"))).all([g.threads.get(a),g.contacts.get(e),g.messages.index("messageId").get(f)]));e=a[0];var j=a[1];a=a[2];f={replySourceId:f};if(j==null||e==null||a==null)return f;f.replySourceId=a.messageId;f.replySourceTimestampMs=a.timestampMs;f.replyToUserId=a.senderId;f.replyMessageText=a.text;f.replyStatus=d("InstamadilloReplyStatus").getReplyStatusType(a);var k=(yield g.contacts.get(a.senderId));k!=null&&(f.replySnippet=d("InstamadilloReplySnippet").getReplySnippet(e,j,k));f.replySourceType=(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceType").MESSAGE);e=(yield i.all([d("InstamadilloReplySourceTypeV2").getReplySourceTypeV2(g,a),d("InstamadilloReplyAttachmentType").getReplyAttachmentType(g,a),d("InstamadilloReplyAttachmentId").getReplyAttachmentId(g,a)]));j=e[0];k=e[1];g=e[2];f.replySourceTypeV2=j;f.replyAttachmentType=k;f.replyAttachmentId=g;return f});return j.apply(this,arguments)}g.getEmptyReplyMessageParams=a;g.getReplyMessageParams=e}),98);
__d("InstamadilloMessageFactory",["FBLogger","I64","InstamadilloMessageIdUtils","InstamadilloReplyMessageParams","LSAuthorityLevel","LSBitFlag","LSIntEnum","LSMessageRenderingType","LSMessageReplySourceTypeV2","LSMessageSendStatus","LSMessageThreadUnsendabilityStatus","LSQuickReplyType","MAWAuthor","MAWJids","MessagingAttachmentType","WAJids","WALongInt","WATimeUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){var b=a.externalId,c=d("WAJids").threadIdForChatJid(a.chat);a=d("MAWJids").convertChatJidToIntJid(a.chat);c=d("InstamadilloMessageIdUtils").toInstamadilloMessageId(c,b);return{messageId:c,threadKey:a}}function k(a,b,e,f){return{attachmentFbid:a,attachmentIndex:(h||(h=d("I64"))).zero,attachmentType:(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").NONE),authorityLevel:h.of_int32(c("LSAuthorityLevel").AUTHORITATIVE),hasMedia:!0,hasXma:!1,isPreviewImage:!1,isSharable:!1,messageId:b,threadKey:e,timestampMs:f,transportKey:"Instamadillo",xmaLayoutType:h.zero,xmasTemplateType:h.zero}}function a(a,b){var c=j(a),d=c.messageId;c=c.threadKey;return k(a.externalId,d,c,b)}function e(a,b,c){a=j(a);var d=a.messageId;a=a.threadKey;return k(b,d,a,c)}function f(a){var b=j(a),c=b.messageId;b=b.threadKey;a={attachmentFbid:a.externalId,attachmentIndex:(h||(h=d("I64"))).zero,ctaId:h.zero,messageId:c,threadKey:b,title:""};return a}function l(a){var b=j(a),c=b.messageId;b=b.threadKey;a={attachmentFbid:a.externalId,attachmentIndex:(h||(h=d("I64"))).zero,defaultActionEnableExtensions:!1,messageId:c,threadKey:b};return a}function m(a,b,c,d){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){var g=d("MAWAuthor").getAuthorUserJid(b.author);if(g==null)return c("FBLogger")("igd_web").warn("Skip createBaseInstamadilloMessage: a message cannot exist without an author");var i=b.externalId;g=(h||(h=d("I64"))).of_string(d("WAJids").userIdFromJid(g));b=j(b);var k=b.messageId;b=b.threadKey;a=(yield o(a,{messageId:k,offlineThreadingId:i,senderId:g,threadKey:b,timestampMs:e},f));return a});return n.apply(this,arguments)}function o(a,b,c){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f,g,j=b.authorityLevel,k=b.messageId,l=b.offlineThreadingId,m=b.senderId,n=b.threadKey;b=b.timestampMs;var o=(yield a.threads.get(n));o=(o=o==null?void 0:o.cannotUnsendReason)!=null?o:(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageThreadUnsendabilityStatus").CAN_UNSEND);var p={};f=e==null?void 0:(f=e.repliedToMessage)==null?void 0:f.repliedToMessageOtid;f!=null&&(p=(yield d("InstamadilloReplyMessageParams").getReplyMessageParams(n,m,d("InstamadilloMessageIdUtils").toInstamadilloMessageId(n,f),a)));a=e==null?void 0:(a=e.forwardingParams)==null?void 0:a.forwardedThreadId;a=a!=null;var q,r,s=!1;(e==null?void 0:(g=e.ephemeralityParams)==null?void 0:g.ephemeralDurationSec)!=null&&(b==null?s=!0:(q=d("WALongInt").maybeNumberOrThrowIfTooLarge(e.ephemeralityParams.ephemeralDurationSec),r=q!=null?d("WATimeUtils").futureUnixTime(q,d("WATimeUtils").castMilliSecondsToUnixTime((h||(h=d("I64"))).to_float(b))):void 0,s=r!=null&&r<d("WATimeUtils").unixTime()));g=babelHelpers["extends"]({authorityLevel:j!=null?j:(h||(h=d("I64"))).of_int32(c("LSAuthorityLevel").AUTHORITATIVE),cannotUnsendReason:o,displayedContentTypes:d("LSBitFlag").empty,editCount:(h||(h=d("I64"))).zero,ephemeralDurationInSec:q!=null?(h||(h=d("I64"))).of_float(q):void 0,ephemeralExpirationTs:r!=null?(h||(h=d("I64"))).of_float(r):void 0,hasQuickReplies:f!=null,isAdminMessage:!1,isCollapsed:!1,isExpired:s,isForwarded:a,isUnsent:!1,messageId:k,messageRenderingType:h.of_int32(c("LSMessageRenderingType").DEFAULT),offlineThreadingId:l,primarySortKey:b,quickReplyType:h.of_int32(c("LSQuickReplyType").NONE),replyAttachmentType:void 0,replySourceTypeV2:a?(h||(h=d("I64"))).of_int32(c("LSMessageReplySourceTypeV2").FORWARD):void 0,replyStatus:void 0,secondarySortKey:void 0,senderId:m,sendStatus:h.of_int32(c("LSMessageSendStatus").SERVER_RECEIVED),sendStatusV2:h.of_int32(2),threadKey:n,timestampMs:b,transportKey:"Instamadillo",unsentTimestampMs:void 0,viewFlags:h.zero},p);return g});return p.apply(this,arguments)}g.getThreadAndMessageId=j;g.createBaseAttachmentWithProtocolMsgId=a;g.createBaseAttachmentWithMediaId=e;g.createBaseAttachmentCta=f;g.createBaseAttachmentItem=l;g.createBaseMessageForProtocolMsgId=m;g.createBaseMessage=o}),98);
__d("InstamadilloTextMessageUtils",["URLMatcher","isStringNullOrEmpty"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("isStringNullOrEmpty")(a)?!1:c("URLMatcher").match(a)!=null}g.textHasLinks=a}),98);
__d("LSBumpThread",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.i64.eq(a[1],b.i64.cast([0,1]))?b.forEach(b.db.table(9).fetch([[[a[2]]]]),function(b){var c=b.update;b.item;return c({lastReadWatermarkTimestampMs:a[0],lastActivityTimestampMs:a[0]})}):b.i64.eq(a[1],b.i64.cast([0,2]))?b.forEach(b.db.table(9).fetch([[[a[2]]]]),function(b){var c=b.update;b.item;return c({lastActivityTimestampMs:a[0]})}):b.i64.eq(a[1],b.i64.cast([0,3]))?b.db.table(9).fetch([[[a[2]]]]).next().then(function(c,d){var e=c.done;c=c.value;return e?0:(d=c.item,b.i64.le(d.lastActivityTimestampMs,d.lastReadWatermarkTimestampMs)?b.forEach(b.db.table(9).fetch([[[a[2]]]]),function(b){var c=b.update;b.item;return c({lastReadWatermarkTimestampMs:a[0],lastActivityTimestampMs:a[0]})}):b.forEach(b.db.table(9).fetch([[[a[2]]]]),function(b){var c=b.update;b.item;return c({lastActivityTimestampMs:a[0]})}))}):b.resolve(0)},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxBumpThreadStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSBumpThreadStoredProcedure",["LSBumpThread","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSBumpThread"),e.bumpTimestampMs,e.readStateEffect,e.threadKey);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSFetchInstamadilloMessage",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[0].set("offline_threading_id",a[1]),d[0].set("timestamp_sec",a[2]),d[1]=d[0].get("thread_key"),d[2]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[1]),c.i64.cast([0,60012]),d[2],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxFetchInstamadilloMessageStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSUpdateLastActivityTimestamp",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({lastActivityTimestampMs:a[1]})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpdateLastActivityTimestampStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSUpdateThreadSnippet",["LSGetThreadParticipantDisplayName","LSLocalize"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return c.resolve((d[1]="",d[0]=d[1]===""?void 0:d[1]))},function(e){return d[0]!==void 0?c.forEach(c.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({snippet:d[0],snippetStringHash:void 0,snippetStringArgument1:void 0,snippetAttribution:void 0,snippetAttributionStringHash:void 0,isAdminSnippet:a[2],snippetSenderContactId:a[3],snippetHasEmoji:a[4],viewedPluginKey:a[5],viewedPluginContext:a[6]})}):a[7]?c.sequence([function(e){return c.i64.neq(a[3],void 0)?c.sequence([function(e){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),a[0],a[3]).then(function(a){return a=a,d[2]=a[0],a})},function(b){return a[1]!==void 0?(d[2]!==void 0?d[4]=[d[2],": ",a[1]].join(""):d[4]=a[1],d[3]=d[4]):d[3]=void 0,d[1]=d[3]}]):c.resolve(d[1]=a[1])},function(b){return c.forEach(c.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({snippet:d[1],snippetStringHash:void 0,snippetStringArgument1:void 0,snippetAttribution:void 0,snippetAttributionStringHash:void 0,isAdminSnippet:a[2],snippetSenderContactId:a[3],snippetHasEmoji:a[4],viewedPluginKey:a[5],viewedPluginContext:a[6]})})}]):c.forEach(c.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({snippet:a[1],snippetStringHash:void 0,snippetStringArgument1:void 0,snippetAttribution:void 0,snippetAttributionStringHash:void 0,isAdminSnippet:a[2],snippetSenderContactId:a[3],snippetHasEmoji:a[4],viewedPluginKey:a[5],viewedPluginContext:a[6]})})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxUpdateThreadSnippetStoredProcedure";a.__tables__=["threads","contacts"];e.exports=a}),null);
__d("LSUpdateThreadSnippetFromLastMessageV2",["LSGetThreadParticipantDisplayName","LSGetViewerFBID","LSLocalize","LSUpdateLastActivityTimestamp","LSUpdateThreadSnippet"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.count(c.filter(c.db.table(9).fetch([[[a[0]]]]),function(b){return c.i64.eq(a[0],b.threadKey)&&[c.i64.cast([0,18]),c.i64.cast([0,27])].some(function(a){return c.i64.eq(b.threadType,a)})})).then(function(a){return d[0]=a})},function(e){return c.i64.eq(d[0],c.i64.cast([0,1]))===!0?c.filter(c.db.table(12).fetchDesc([[[a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&b.isAdminMessage===!1&&b.isUnsent===!1}).next().then(function(e,f){var g=e.done;e=e.value;return g?0:(f=e.item,c.sequence([function(a){return d[6]=f.text,d[5]=f.threadKey,d[8]=c.i64.cast([0,0]),d[9]=f.messageId,d[4]=f.senderId,d[7]=f.stickerId,d[3]=f.isAdminMessage,d[1]=!0,d[3]||!d[1]?c.resolve(d[2]=d[6]==null?"":d[6]):c.sequence([function(a){return f.isUnsent?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[11]=a[0],a})},function(a){return c.i64.eq(d[11],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2987332812]),void 0).then(function(a){return d[16]=a})},function(a){return d[12]=d[16]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[16]=a[0],a})},function(a){return d[17]=c.createArray(),d[19]=(d[17].push(d[16]),d[17]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1530605193]),d[17]).then(function(a){return d[18]=a})},function(a){return d[12]=d[18]}])},function(a){return c.db.table(9).fetch([[[d[5]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[13]=!1:(e=b.item,d[13]=[c.i64.cast([0,23]),c.i64.cast([0,21]),c.i64.cast([0,18]),c.i64.cast([0,26]),c.i64.cast([0,27])].some(function(a){return c.i64.eq(e.threadType,a)}))})},function(a){return d[13]?c.sequence([function(a){return c.filter(c.db.table(16).fetch([[[d[5],d[9]]]]),function(a){return c.i64.eq(a.threadKey,d[5])&&c.i64.eq(c.i64.cast([0,0]),d[8])&&a.messageId===d[9]}).next().then(function(b,e){var a=b.done;b=b.value;return a?(a=[c.i64.cast([0,0]),void 0,void 0,void 0,void 0],d[16]=a[0],d[17]=a[1],d[18]=a[2],d[19]=a[3],d[20]=a[4],a):(e=b.item,a=[e.attachmentType,e.attributionAppName,e.defaultCtaType,e.descriptionText,e.xmaContentType],d[16]=a[0],d[17]=a[1],d[18]=a[2],d[19]=a[3],d[20]=a[4],a)})},function(a){return d[19]!==void 0?d[22]=d[19]:d[22]=d[12],d[15]=d[22]}]):c.resolve(d[15]=d[12])},function(a){return d[10]=d[15]}]):c.sequence([function(a){return c.sequence([function(a){return c.i64.eq(f.replyType,c.i64.cast([0,1]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[13]=a[0],a})},function(a){return c.i64.eq(d[13],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1899892426]),void 0).then(function(a){return d[15]=a})},function(a){return d[14]=d[15]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[15]=a[0],a})},function(a){return d[16]=c.createArray(),d[18]=(d[16].push(d[15]),d[16]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3287869262]),d[16]).then(function(a){return d[17]=a})},function(a){return d[14]=d[17]}])},function(a){return d[12]=d[14]}]):c.sequence([function(a){return d[6]!==void 0&&d[6]!==""?c.sequence([function(a){return d[16]=d[6]==null?"":d[6],c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[14]=a[0],a})},function(a){return c.i64.eq(d[14],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1890485478]),void 0).then(function(a){return d[17]=a})},function(a){return d[15]=[d[17],": ",d[16]].join("")}]):c.sequence([function(a){return c.db.table(9).fetch([[[d[5]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[17]=!1:(e=b.item,d[17]=c.i64.eq(e.threadType,c.i64.cast([0,2])))})},function(a){return c.db.table(9).fetch([[[d[5]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[19]=!1:(e=b.item,d[19]=[c.i64.cast([0,18]),c.i64.cast([0,27])].some(function(a){return c.i64.eq(e.threadType,a)}))})},function(a){return d[17]||d[19]||!1?c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[22]=a[0],a})},function(a){return d[21]=[d[22],": ",d[16]].join("")}]):c.resolve(d[21]=d[16])},function(a){return d[15]=d[21]}])},function(a){return d[13]=d[15]}]):c.sequence([function(a){return c.i64.neq(d[7],void 0)&&[c.i64.cast([53057,267535043]),c.i64.cast([85970,924785702]),c.i64.cast([85970,1004785694]),c.i64.cast([85970,1044785690])].some(function(a){return c.i64.eq(d[7],a)})?c.sequence([function(a){return d[17]="\udb80\udc00",c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[15]=a[0],a})},function(a){return c.i64.eq(d[15],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1890485478]),void 0).then(function(a){return d[18]=a})},function(a){return d[16]=[d[18],": ",d[17]].join("")}]):c.sequence([function(a){return c.db.table(9).fetch([[[d[5]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[18]=!1:(e=b.item,d[18]=c.i64.eq(e.threadType,c.i64.cast([0,2])))})},function(a){return c.db.table(9).fetch([[[d[5]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[20]=!1:(e=b.item,d[20]=[c.i64.cast([0,18]),c.i64.cast([0,27])].some(function(a){return c.i64.eq(e.threadType,a)}))})},function(a){return d[18]||d[20]||!1?c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[23]=a[0],a})},function(a){return d[22]=[d[23],": ",d[17]].join("")}]):c.resolve(d[22]=d[17])},function(a){return d[16]=d[22]}])},function(a){return d[14]=d[16]}]):c.sequence([function(a){return c.i64.neq(d[7],void 0)?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[16]=a[0],a})},function(a){return c.i64.eq(d[16],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1299547062]),void 0).then(function(a){return d[18]=a})},function(a){return d[17]=d[18]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[18]=a[0],a})},function(a){return d[19]=c.createArray(),d[21]=(d[19].push(d[18]),d[19]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3621454483]),d[19]).then(function(a){return d[20]=a})},function(a){return d[17]=d[20]}])},function(a){return d[15]=d[17]}]):c.sequence([function(a){return c.count(c.filter(c.db.table(16).fetch([[[d[5],d[9]]]]),function(a){return c.i64.eq(a.threadKey,d[5])&&c.i64.eq(c.i64.cast([0,0]),d[8])&&a.messageId===d[9]})).then(function(a){return d[16]=a})},function(a){return c.i64.eq(d[16],c.i64.cast([0,0]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[18]=a[0],a})},function(a){return c.i64.eq(d[18],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[20]=a})},function(a){return d[19]=d[20]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[20]=a[0],a})},function(a){return d[21]=c.createArray(),d[23]=(d[21].push(d[20]),d[21]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[21]).then(function(a){return d[22]=a})},function(a){return d[19]=d[22]}])},function(a){return d[17]=d[19]}]):c.sequence([function(a){return c.i64.eq(d[16],c.i64.cast([0,1]))?c.sequence([function(a){return c.filter(c.db.table(16).fetch([[[d[5],d[9]]]]),function(a){return c.i64.eq(a.threadKey,d[5])&&c.i64.eq(c.i64.cast([0,0]),d[8])&&a.messageId===d[9]}).next().then(function(b,e){var a=b.done;b=b.value;return a?(a=[c.i64.cast([0,0]),void 0,void 0,void 0,void 0],d[19]=a[0],d[20]=a[1],d[21]=a[2],d[22]=a[3],d[23]=a[4],a):(e=b.item,a=[e.attachmentType,e.attributionAppName,e.defaultCtaType,e.descriptionText,e.xmaContentType],d[19]=a[0],d[20]=a[1],d[21]=a[2],d[22]=a[3],d[23]=a[4],a)})},function(a){return d[25]=void 0,d[25]===void 0&&(c.i64.eq(d[19],c.i64.cast([0,1]))||c.i64.eq(d[19],c.i64.cast([0,15])))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return c.i64.eq(d[30],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1299547062]),void 0).then(function(a){return d[32]=a})},function(a){return d[31]=d[32]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[33]=c.createArray(),d[35]=(d[33].push(d[32]),d[33]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3621454483]),d[33]).then(function(a){return d[34]=a})},function(a){return d[31]=d[34]}])},function(a){return d[25]=d[31]}]):c.resolve()},function(a){return d[25]===void 0&&(c.i64.eq(d[19],c.i64.cast([0,2]))||c.i64.eq(d[19],c.i64.cast([0,8])))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return c.i64.eq(d[30],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2106510577]),void 0).then(function(a){return d[32]=a})},function(a){return d[31]=d[32]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[33]=c.createArray(),d[35]=(d[33].push(d[32]),d[33]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3960370133]),d[33]).then(function(a){return d[34]=a})},function(a){return d[31]=d[34]}])},function(a){return d[25]=d[31]}]):c.resolve()},function(a){return d[25]===void 0&&c.i64.eq(d[19],c.i64.cast([0,3]))?c.sequence([function(a){return d[20]!==void 0?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[31]=a[0],a})},function(a){return c.i64.eq(d[31],d[4])?c.sequence([function(a){return d[33]=c.createArray(),d[35]=(d[33].push(d[20]),d[33]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3798396796]),d[33]).then(function(a){return d[34]=a})},function(a){return d[32]=d[34]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[33]=a[0],a})},function(a){return d[34]=c.createArray(),d[36]=(d[34].push(d[33]),d[34]),d[36]=(d[34].push(d[20]),d[34]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3388601579]),d[34]).then(function(a){return d[35]=a})},function(a){return d[32]=d[35]}])},function(a){return d[30]=d[32]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[31]=a[0],a})},function(a){return c.i64.eq(d[31],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1556712457]),void 0).then(function(a){return d[33]=a})},function(a){return d[32]=d[33]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[33]=a[0],a})},function(a){return d[34]=c.createArray(),d[36]=(d[34].push(d[33]),d[34]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3601791933]),d[34]).then(function(a){return d[35]=a})},function(a){return d[32]=d[35]}])},function(a){return d[30]=d[32]}])},function(a){return d[25]=d[30]}]):c.resolve()},function(a){return d[25]===void 0&&(c.i64.eq(d[19],c.i64.cast([0,4]))||c.i64.eq(d[19],c.i64.cast([0,9])))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return c.i64.eq(d[30],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3759817031]),void 0).then(function(a){return d[32]=a})},function(a){return d[31]=d[32]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[33]=c.createArray(),d[35]=(d[33].push(d[32]),d[33]),b("LSLocalize").localizeV2Async(c.i64.cast([0,2934729541]),d[33]).then(function(a){return d[34]=a})},function(a){return d[31]=d[34]}])},function(a){return d[25]=d[31]}]):c.resolve()},function(a){return d[25]===void 0&&c.i64.eq(d[19],c.i64.cast([0,5]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return c.i64.eq(d[30],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,392493418]),void 0).then(function(a){return d[32]=a})},function(a){return d[31]=d[32]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[33]=c.createArray(),d[35]=(d[33].push(d[32]),d[33]),b("LSLocalize").localizeV2Async(c.i64.cast([0,4085467454]),d[33]).then(function(a){return d[34]=a})},function(a){return d[31]=d[34]}])},function(a){return d[25]=d[31]}]):c.resolve()},function(a){return d[25]===void 0&&c.i64.eq(d[19],c.i64.cast([0,10]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return c.i64.eq(d[30],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2738683656]),void 0).then(function(a){return d[32]=a})},function(a){return d[31]=d[32]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[33]=c.createArray(),d[35]=(d[33].push(d[32]),d[33]),b("LSLocalize").localizeV2Async(c.i64.cast([0,2996525642]),d[33]).then(function(a){return d[34]=a})},function(a){return d[31]=d[34]}])},function(a){return d[25]=d[31]}]):c.resolve()},function(a){return c.i64.neq(d[23],void 0)?d[26]=d[23]:(d[21]==="xma_live_location_sharing"?d[30]=c.i64.cast([0,7e3]):d[30]=void 0,d[26]=d[30]),c.i64.neq(d[26],void 0)?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return c.i64.eq(d[26],c.i64.cast([-1,4294967295]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[32]=a[0],a})},function(a){return c.i64.eq(d[32],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[34]=a})},function(a){return d[33]=d[34]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[34]=a[0],a})},function(a){return d[35]=c.createArray(),d[37]=(d[35].push(d[34]),d[35]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[35]).then(function(a){return d[36]=a})},function(a){return d[33]=d[36]}])},function(a){return d[31]=d[33]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,0]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[33]=a[0],a})},function(a){return c.i64.eq(d[33],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[35]=a})},function(a){return d[34]=d[35]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[35]=a[0],a})},function(a){return d[36]=c.createArray(),d[38]=(d[36].push(d[35]),d[36]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[36]).then(function(a){return d[37]=a})},function(a){return d[34]=d[37]}])},function(a){return d[32]=d[34]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1e3]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[34]=a[0],a})},function(a){return c.i64.eq(d[34],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2326868239]),void 0).then(function(a){return d[36]=a})},function(a){return d[35]=d[36]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[36]=a[0],a})},function(a){return d[37]=c.createArray(),d[39]=(d[37].push(d[36]),d[37]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1001986796]),d[37]).then(function(a){return d[38]=a})},function(a){return d[35]=d[38]}])},function(a){return d[33]=d[35]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1001]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[35]=a[0],a})},function(a){return c.i64.eq(d[35],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2326868239]),void 0).then(function(a){return d[37]=a})},function(a){return d[36]=d[37]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[37]=a[0],a})},function(a){return d[38]=c.createArray(),d[40]=(d[38].push(d[37]),d[38]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1001986796]),d[38]).then(function(a){return d[39]=a})},function(a){return d[36]=d[39]}])},function(a){return d[34]=d[36]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1002]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[36]=a[0],a})},function(a){return c.i64.eq(d[36],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2285746939]),void 0).then(function(a){return d[38]=a})},function(a){return d[37]=d[38]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[38]=a[0],a})},function(a){return d[39]=c.createArray(),d[41]=(d[39].push(d[38]),d[39]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3759448420]),d[39]).then(function(a){return d[40]=a})},function(a){return d[37]=d[40]}])},function(a){return d[35]=d[37]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1003]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[37]=a[0],a})},function(a){return c.i64.eq(d[37],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3719716921]),void 0).then(function(a){return d[39]=a})},function(a){return d[38]=d[39]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[39]=a[0],a})},function(a){return d[40]=c.createArray(),d[42]=(d[40].push(d[39]),d[40]),b("LSLocalize").localizeV2Async(c.i64.cast([0,284944921]),d[40]).then(function(a){return d[41]=a})},function(a){return d[38]=d[41]}])},function(a){return d[36]=d[38]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1004]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[38]=a[0],a})},function(a){return c.i64.eq(d[38],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[40]=a})},function(a){return d[41]=c.createArray(),d[43]=(d[41].push(d[40]),d[41]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3322002377]),d[41]).then(function(a){return d[42]=a})},function(a){return d[39]=d[42]}]):c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2486550278]),void 0).then(function(a){return d[40]=a})},function(a){return d[39]=d[40]}])},function(a){return d[37]=d[39]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1005]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[39]=a[0],a})},function(a){return c.i64.eq(d[39],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3557790945]),void 0).then(function(a){return d[41]=a})},function(a){return d[40]=d[41]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[41]=a[0],a})},function(a){return d[42]=c.createArray(),d[44]=(d[42].push(d[41]),d[42]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3756846086]),d[42]).then(function(a){return d[43]=a})},function(a){return d[40]=d[43]}])},function(a){return d[38]=d[40]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1006]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[40]=a[0],a})},function(a){return c.i64.eq(d[40],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2326868239]),void 0).then(function(a){return d[42]=a})},function(a){return d[41]=d[42]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[42]=a[0],a})},function(a){return d[43]=c.createArray(),d[45]=(d[43].push(d[42]),d[43]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1001986796]),d[43]).then(function(a){return d[44]=a})},function(a){return d[41]=d[44]}])},function(a){return d[39]=d[41]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1007]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[41]=a[0],a})},function(a){return c.i64.eq(d[41],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3719716921]),void 0).then(function(a){return d[43]=a})},function(a){return d[42]=d[43]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[43]=a[0],a})},function(a){return d[44]=c.createArray(),d[46]=(d[44].push(d[43]),d[44]),b("LSLocalize").localizeV2Async(c.i64.cast([0,284944921]),d[44]).then(function(a){return d[45]=a})},function(a){return d[42]=d[45]}])},function(a){return d[40]=d[42]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1008]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[42]=a[0],a})},function(a){return c.i64.eq(d[42],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[44]=a})},function(a){return d[43]=d[44]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[44]=a[0],a})},function(a){return d[45]=c.createArray(),d[47]=(d[45].push(d[44]),d[45]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[45]).then(function(a){return d[46]=a})},function(a){return d[43]=d[46]}])},function(a){return d[41]=d[43]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1009]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[43]=a[0],a})},function(a){return c.i64.eq(d[43],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,780378803]),void 0).then(function(a){return d[45]=a})},function(a){return d[44]=d[45]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[45]=a[0],a})},function(a){return d[46]=c.createArray(),d[48]=(d[46].push(d[45]),d[46]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3918212613]),d[46]).then(function(a){return d[47]=a})},function(a){return d[44]=d[47]}])},function(a){return d[42]=d[44]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1010]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[44]=a[0],a})},function(a){return c.i64.eq(d[44],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3161890215]),void 0).then(function(a){return d[46]=a})},function(a){return d[45]=d[46]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[46]=a[0],a})},function(a){return d[47]=c.createArray(),d[49]=(d[47].push(d[46]),d[47]),b("LSLocalize").localizeV2Async(c.i64.cast([0,863428456]),d[47]).then(function(a){return d[48]=a})},function(a){return d[45]=d[48]}])},function(a){return d[43]=d[45]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1011]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[45]=a[0],a})},function(a){return c.i64.eq(d[45],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2716405471]),void 0).then(function(a){return d[47]=a})},function(a){return d[46]=d[47]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[47]=a[0],a})},function(a){return d[48]=c.createArray(),d[50]=(d[48].push(d[47]),d[48]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3909474073]),d[48]).then(function(a){return d[49]=a})},function(a){return d[46]=d[49]}])},function(a){return d[44]=d[46]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1012]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[46]=a[0],a})},function(a){return c.i64.eq(d[46],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1522141193]),void 0).then(function(a){return d[48]=a})},function(a){return d[47]=d[48]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[48]=a[0],a})},function(a){return d[49]=c.createArray(),d[51]=(d[49].push(d[48]),d[49]),b("LSLocalize").localizeV2Async(c.i64.cast([0,2804766375]),d[49]).then(function(a){return d[50]=a})},function(a){return d[47]=d[50]}])},function(a){return d[45]=d[47]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1013]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[47]=a[0],a})},function(a){return c.i64.eq(d[47],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1522141193]),void 0).then(function(a){return d[49]=a})},function(a){return d[48]=d[49]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[49]=a[0],a})},function(a){return d[50]=c.createArray(),d[52]=(d[50].push(d[49]),d[50]),b("LSLocalize").localizeV2Async(c.i64.cast([0,2804766375]),d[50]).then(function(a){return d[51]=a})},function(a){return d[48]=d[51]}])},function(a){return d[46]=d[48]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1014]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[48]=a[0],a})},function(a){return c.i64.eq(d[48],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[50]=a})},function(a){return d[51]=c.createArray(),d[53]=(d[51].push(d[50]),d[51]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3322002377]),d[51]).then(function(a){return d[52]=a})},function(a){return d[49]=d[52]}]):c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2486550278]),void 0).then(function(a){return d[50]=a})},function(a){return d[49]=d[50]}])},function(a){return d[47]=d[49]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1015]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[49]=a[0],a})},function(a){return c.i64.eq(d[49],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[51]=a})},function(a){return d[50]=d[51]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[51]=a[0],a})},function(a){return d[52]=c.createArray(),d[54]=(d[52].push(d[51]),d[52]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[52]).then(function(a){return d[53]=a})},function(a){return d[50]=d[53]}])},function(a){return d[48]=d[50]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1016]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[50]=a[0],a})},function(a){return c.i64.eq(d[50],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[52]=a})},function(a){return d[51]=d[52]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[52]=a[0],a})},function(a){return d[53]=c.createArray(),d[55]=(d[53].push(d[52]),d[53]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[53]).then(function(a){return d[54]=a})},function(a){return d[51]=d[54]}])},function(a){return d[49]=d[51]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1017]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[51]=a[0],a})},function(a){return c.i64.eq(d[51],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[53]=a})},function(a){return d[52]=d[53]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[53]=a[0],a})},function(a){return d[54]=c.createArray(),d[56]=(d[54].push(d[53]),d[54]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[54]).then(function(a){return d[55]=a})},function(a){return d[52]=d[55]}])},function(a){return d[50]=d[52]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1018]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[52]=a[0],a})},function(a){return c.i64.eq(d[52],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[54]=a})},function(a){return d[53]=d[54]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[54]=a[0],a})},function(a){return d[55]=c.createArray(),d[57]=(d[55].push(d[54]),d[55]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[55]).then(function(a){return d[56]=a})},function(a){return d[53]=d[56]}])},function(a){return d[51]=d[53]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1019]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[53]=a[0],a})},function(a){return c.i64.eq(d[53],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[55]=a})},function(a){return d[54]=d[55]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[55]=a[0],a})},function(a){return d[56]=c.createArray(),d[58]=(d[56].push(d[55]),d[56]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[56]).then(function(a){return d[57]=a})},function(a){return d[54]=d[57]}])},function(a){return d[52]=d[54]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1020]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[54]=a[0],a})},function(a){return c.i64.eq(d[54],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[56]=a})},function(a){return d[55]=d[56]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[56]=a[0],a})},function(a){return d[57]=c.createArray(),d[59]=(d[57].push(d[56]),d[57]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[57]).then(function(a){return d[58]=a})},function(a){return d[55]=d[58]}])},function(a){return d[53]=d[55]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2e3]))?c.sequence([function(a){return c.sequence([function(a){return void 0!==void 0?c.sequence([function(a){return void 0!==void 0?c.sequence([function(a){return c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[59]=a[0],a})},function(a){return c.i64.eq(d[59],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[61]=a})},function(a){return d[60]=d[61]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[61]=a[0],a})},function(a){return d[62]=c.createArray(),d[64]=(d[62].push(d[61]),d[62]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[62]).then(function(a){return d[63]=a})},function(a){return d[60]=d[63]}])},function(a){return d[58]=d[60]}])},function(a){return d[57]=d[58]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[58]=a[0],a})},function(a){return c.i64.eq(d[58],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[60]=a})},function(a){return d[59]=d[60]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[60]=a[0],a})},function(a){return d[61]=c.createArray(),d[63]=(d[61].push(d[60]),d[61]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[61]).then(function(a){return d[62]=a})},function(a){return d[59]=d[62]}])},function(a){return d[57]=d[59]}])},function(a){return d[56]=d[57]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[57]=a[0],a})},function(a){return c.i64.eq(d[57],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[59]=a})},function(a){return d[58]=d[59]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[59]=a[0],a})},function(a){return d[60]=c.createArray(),d[62]=(d[60].push(d[59]),d[60]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[60]).then(function(a){return d[61]=a})},function(a){return d[58]=d[61]}])},function(a){return d[56]=d[58]}])},function(a){return d[55]=d[56]}])},function(a){return d[54]=d[55]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2001]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[56]=a[0],a})},function(a){return c.i64.eq(d[56],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2285746939]),void 0).then(function(a){return d[58]=a})},function(a){return d[57]=d[58]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[58]=a[0],a})},function(a){return d[59]=c.createArray(),d[61]=(d[59].push(d[58]),d[59]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3759448420]),d[59]).then(function(a){return d[60]=a})},function(a){return d[57]=d[60]}])},function(a){return d[55]=d[57]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2002]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[57]=a[0],a})},function(a){return c.i64.eq(d[57],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3719716921]),void 0).then(function(a){return d[59]=a})},function(a){return d[58]=d[59]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[59]=a[0],a})},function(a){return d[60]=c.createArray(),d[62]=(d[60].push(d[59]),d[60]),b("LSLocalize").localizeV2Async(c.i64.cast([0,284944921]),d[60]).then(function(a){return d[61]=a})},function(a){return d[58]=d[61]}])},function(a){return d[56]=d[58]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2003]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[58]=a[0],a})},function(a){return c.i64.eq(d[58],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[60]=a})},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[61]=a[0],a})},function(a){return c.i64.eq(d[61],d[4])?c.sequence([function(a){return d[63]=c.createArray(),d[65]=(d[63].push(d[60]),d[63]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1247108605]),d[63]).then(function(a){return d[64]=a})},function(a){return d[62]=d[64]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[63]=a[0],a})},function(a){return d[64]=c.createArray(),d[66]=(d[64].push(d[63]),d[64]),d[66]=(d[64].push(d[60]),d[64]),b("LSLocalize").localizeV2Async(c.i64.cast([0,2966876020]),d[64]).then(function(a){return d[65]=a})},function(a){return d[62]=d[65]}])},function(a){return d[59]=d[62]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[60]=a[0],a})},function(a){return c.i64.eq(d[60],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1056933543]),void 0).then(function(a){return d[62]=a})},function(a){return d[61]=d[62]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[62]=a[0],a})},function(a){return d[63]=c.createArray(),d[65]=(d[63].push(d[62]),d[63]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1167688664]),d[63]).then(function(a){return d[64]=a})},function(a){return d[61]=d[64]}])},function(a){return d[59]=d[61]}])},function(a){return d[57]=d[59]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2004]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[59]=a[0],a})},function(a){return c.i64.eq(d[59],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2326868239]),void 0).then(function(a){return d[61]=a})},function(a){return d[60]=d[61]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[61]=a[0],a})},function(a){return d[62]=c.createArray(),d[64]=(d[62].push(d[61]),d[62]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1001986796]),d[62]).then(function(a){return d[63]=a})},function(a){return d[60]=d[63]}])},function(a){return d[58]=d[60]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2005]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[60]=a[0],a})},function(a){return c.i64.eq(d[60],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,772459202]),void 0).then(function(a){return d[62]=a})},function(a){return d[61]=d[62]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[62]=a[0],a})},function(a){return d[63]=c.createArray(),d[65]=(d[63].push(d[62]),d[63]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3546068912]),d[63]).then(function(a){return d[64]=a})},function(a){return d[61]=d[64]}])},function(a){return d[59]=d[61]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2006]))?c.sequence([function(a){return c.i64.eq(d[30],d[4])?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[62]=a[0],a})},function(a){return c.i64.eq(d[62],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2459540079]),void 0).then(function(a){return d[64]=a})},function(a){return d[63]=d[64]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[64]=a[0],a})},function(a){return d[65]=c.createArray(),d[67]=(d[65].push(d[64]),d[65]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1596311291]),d[65]).then(function(a){return d[66]=a})},function(a){return d[63]=d[66]}])},function(a){return d[61]=d[63]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[62]=a[0],a})},function(a){return c.i64.eq(d[62],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2253698324]),void 0).then(function(a){return d[64]=a})},function(a){return d[63]=d[64]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[64]=a[0],a})},function(a){return d[65]=c.createArray(),d[67]=(d[65].push(d[64]),d[65]),b("LSLocalize").localizeV2Async(c.i64.cast([0,4269602817]),d[65]).then(function(a){return d[66]=a})},function(a){return d[63]=d[66]}])},function(a){return d[61]=d[63]}])},function(a){return d[60]=d[61]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2007]))?c.sequence([function(a){return c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[63]=a[0],a})},function(a){return c.i64.eq(d[63],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[65]=a})},function(a){return d[64]=d[65]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[65]=a[0],a})},function(a){return d[66]=c.createArray(),d[68]=(d[66].push(d[65]),d[66]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[66]).then(function(a){return d[67]=a})},function(a){return d[64]=d[67]}])},function(a){return d[62]=d[64]}])},function(a){return d[61]=d[62]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2008]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[63]=a[0],a})},function(a){return c.i64.eq(d[63],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[65]=a})},function(a){return d[64]=d[65]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[65]=a[0],a})},function(a){return d[66]=c.createArray(),d[68]=(d[66].push(d[65]),d[66]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[66]).then(function(a){return d[67]=a})},function(a){return d[64]=d[67]}])},function(a){return d[62]=d[64]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2009]))?c.sequence([function(a){return c.sequence([function(a){return void 0!==void 0?c.sequence([function(a){return void 0!==void 0?c.sequence([function(a){return c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[68]=a[0],a})},function(a){return c.i64.eq(d[68],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[70]=a})},function(a){return d[69]=d[70]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[70]=a[0],a})},function(a){return d[71]=c.createArray(),d[73]=(d[71].push(d[70]),d[71]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[71]).then(function(a){return d[72]=a})},function(a){return d[69]=d[72]}])},function(a){return d[67]=d[69]}])},function(a){return d[66]=d[67]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[67]=a[0],a})},function(a){return c.i64.eq(d[67],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[69]=a})},function(a){return d[68]=d[69]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[69]=a[0],a})},function(a){return d[70]=c.createArray(),d[72]=(d[70].push(d[69]),d[70]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[70]).then(function(a){return d[71]=a})},function(a){return d[68]=d[71]}])},function(a){return d[66]=d[68]}])},function(a){return d[65]=d[66]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[66]=a[0],a})},function(a){return c.i64.eq(d[66],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[68]=a})},function(a){return d[67]=d[68]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[68]=a[0],a})},function(a){return d[69]=c.createArray(),d[71]=(d[69].push(d[68]),d[69]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[69]).then(function(a){return d[70]=a})},function(a){return d[67]=d[70]}])},function(a){return d[65]=d[67]}])},function(a){return d[64]=d[65]}])},function(a){return d[63]=d[64]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2010]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[65]=a[0],a})},function(a){return c.i64.eq(d[65],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[67]=a})},function(a){return d[66]=d[67]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[67]=a[0],a})},function(a){return d[68]=c.createArray(),d[70]=(d[68].push(d[67]),d[68]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[68]).then(function(a){return d[69]=a})},function(a){return d[66]=d[69]}])},function(a){return d[64]=d[66]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2011]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[66]=a[0],a})},function(a){return c.i64.eq(d[66],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[68]=a})},function(a){return d[67]=d[68]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[68]=a[0],a})},function(a){return d[69]=c.createArray(),d[71]=(d[69].push(d[68]),d[69]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[69]).then(function(a){return d[70]=a})},function(a){return d[67]=d[70]}])},function(a){return d[65]=d[67]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2012]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[67]=a[0],a})},function(a){return c.i64.eq(d[67],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[69]=a})},function(a){return d[68]=d[69]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[69]=a[0],a})},function(a){return d[70]=c.createArray(),d[72]=(d[70].push(d[69]),d[70]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[70]).then(function(a){return d[71]=a})},function(a){return d[68]=d[71]}])},function(a){return d[66]=d[68]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2013]))?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[68]=a})},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[69]=a[0],a})},function(a){return c.i64.eq(d[69],d[4])?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[71]=a[0],a})},function(a){return c.i64.eq(d[71],d[4])?c.sequence([function(a){return d[73]=c.createArray(),d[75]=(d[73].push(d[68]),d[73]),b("LSLocalize").localizeV2Async(c.i64.cast([0,785694792]),d[73]).then(function(a){return d[74]=a})},function(a){return d[72]=d[74]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[73]=a[0],a})},function(a){return d[74]=c.createArray(),d[76]=(d[74].push(d[73]),d[74]),d[76]=(d[74].push(d[68]),d[74]),b("LSLocalize").localizeV2Async(c.i64.cast([0,2625447567]),d[74]).then(function(a){return d[75]=a})},function(a){return d[72]=d[75]}])},function(a){return d[70]=d[72]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[71]=a[0],a})},function(a){return c.i64.eq(d[71],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3982213805]),void 0).then(function(a){return d[73]=a})},function(a){return d[72]=d[73]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[73]=a[0],a})},function(a){return d[74]=c.createArray(),d[76]=(d[74].push(d[73]),d[74]),b("LSLocalize").localizeV2Async(c.i64.cast([0,464916028]),d[74]).then(function(a){return d[75]=a})},function(a){return d[72]=d[75]}])},function(a){return d[70]=d[72]}])},function(a){return d[67]=d[70]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2014]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[69]=a[0],a})},function(a){return c.i64.eq(d[69],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[71]=a})},function(a){return d[70]=d[71]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[71]=a[0],a})},function(a){return d[72]=c.createArray(),d[74]=(d[72].push(d[71]),d[72]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[72]).then(function(a){return d[73]=a})},function(a){return d[70]=d[73]}])},function(a){return d[68]=d[70]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3e3]))?c.sequence([function(a){return c.sequence([function(a){return void 0!==void 0?c.sequence([function(a){return void 0!==void 0?c.sequence([function(a){return c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[74]=a[0],a})},function(a){return c.i64.eq(d[74],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[76]=a})},function(a){return d[75]=d[76]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[76]=a[0],a})},function(a){return d[77]=c.createArray(),d[79]=(d[77].push(d[76]),d[77]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[77]).then(function(a){return d[78]=a})},function(a){return d[75]=d[78]}])},function(a){return d[73]=d[75]}])},function(a){return d[72]=d[73]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[73]=a[0],a})},function(a){return c.i64.eq(d[73],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[75]=a})},function(a){return d[74]=d[75]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[75]=a[0],a})},function(a){return d[76]=c.createArray(),d[78]=(d[76].push(d[75]),d[76]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[76]).then(function(a){return d[77]=a})},function(a){return d[74]=d[77]}])},function(a){return d[72]=d[74]}])},function(a){return d[71]=d[72]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[72]=a[0],a})},function(a){return c.i64.eq(d[72],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[74]=a})},function(a){return d[73]=d[74]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[74]=a[0],a})},function(a){return d[75]=c.createArray(),d[77]=(d[75].push(d[74]),d[75]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[75]).then(function(a){return d[76]=a})},function(a){return d[73]=d[76]}])},function(a){return d[71]=d[73]}])},function(a){return d[70]=d[71]}])},function(a){return d[69]=d[70]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3001]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[71]=a[0],a})},function(a){return c.i64.eq(d[71],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[73]=a})},function(a){return d[72]=d[73]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[73]=a[0],a})},function(a){return d[74]=c.createArray(),d[76]=(d[74].push(d[73]),d[74]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[74]).then(function(a){return d[75]=a})},function(a){return d[72]=d[75]}])},function(a){return d[70]=d[72]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3002]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[72]=a[0],a})},function(a){return c.i64.eq(d[72],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2973334239]),void 0).then(function(a){return d[74]=a})},function(a){return d[73]=d[74]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[74]=a[0],a})},function(a){return d[75]=c.createArray(),d[77]=(d[75].push(d[74]),d[75]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3616471048]),d[75]).then(function(a){return d[76]=a})},function(a){return d[73]=d[76]}])},function(a){return d[71]=d[73]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3003]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[73]=a[0],a})},function(a){return c.i64.eq(d[73],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2973334239]),void 0).then(function(a){return d[75]=a})},function(a){return d[74]=d[75]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[75]=a[0],a})},function(a){return d[76]=c.createArray(),d[78]=(d[76].push(d[75]),d[76]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3616471048]),d[76]).then(function(a){return d[77]=a})},function(a){return d[74]=d[77]}])},function(a){return d[72]=d[74]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3004]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[74]=a[0],a})},function(a){return c.i64.eq(d[74],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[76]=a})},function(a){return d[75]=d[76]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[76]=a[0],a})},function(a){return d[77]=c.createArray(),d[79]=(d[77].push(d[76]),d[77]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[77]).then(function(a){return d[78]=a})},function(a){return d[75]=d[78]}])},function(a){return d[73]=d[75]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3005]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[75]=a[0],a})},function(a){return c.i64.eq(d[75],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[77]=a})},function(a){return d[76]=d[77]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[77]=a[0],a})},function(a){return d[78]=c.createArray(),d[80]=(d[78].push(d[77]),d[78]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[78]).then(function(a){return d[79]=a})},function(a){return d[76]=d[79]}])},function(a){return d[74]=d[76]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3006]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[76]=a[0],a})},function(a){return c.i64.eq(d[76],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[78]=a})},function(a){return d[77]=d[78]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[78]=a[0],a})},function(a){return d[79]=c.createArray(),d[81]=(d[79].push(d[78]),d[79]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[79]).then(function(a){return d[80]=a})},function(a){return d[77]=d[80]}])},function(a){return d[75]=d[77]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3007]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[77]=a[0],a})},function(a){return c.i64.eq(d[77],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[79]=a})},function(a){return d[78]=d[79]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[79]=a[0],a})},function(a){return d[80]=c.createArray(),d[82]=(d[80].push(d[79]),d[80]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[80]).then(function(a){return d[81]=a})},function(a){return d[78]=d[81]}])},function(a){return d[76]=d[78]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3008]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[78]=a[0],a})},function(a){return c.i64.eq(d[78],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[80]=a})},function(a){return d[79]=d[80]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[80]=a[0],a})},function(a){return d[81]=c.createArray(),d[83]=(d[81].push(d[80]),d[81]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[81]).then(function(a){return d[82]=a})},function(a){return d[79]=d[82]}])},function(a){return d[77]=d[79]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3009]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[79]=a[0],a})},function(a){return c.i64.eq(d[79],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[81]=a})},function(a){return d[80]=d[81]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[81]=a[0],a})},function(a){return d[82]=c.createArray(),d[84]=(d[82].push(d[81]),d[82]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[82]).then(function(a){return d[83]=a})},function(a){return d[80]=d[83]}])},function(a){return d[78]=d[80]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3010]))?c.sequence([function(a){return c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[81]=a[0],a})},function(a){return c.i64.eq(d[81],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[83]=a})},function(a){return d[82]=d[83]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[83]=a[0],a})},function(a){return d[84]=c.createArray(),d[86]=(d[84].push(d[83]),d[84]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[84]).then(function(a){return d[85]=a})},function(a){return d[82]=d[85]}])},function(a){return d[80]=d[82]}])},function(a){return d[79]=d[80]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3011]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[81]=a[0],a})},function(a){return c.i64.eq(d[81],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[83]=a})},function(a){return d[82]=d[83]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[83]=a[0],a})},function(a){return d[84]=c.createArray(),d[86]=(d[84].push(d[83]),d[84]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[84]).then(function(a){return d[85]=a})},function(a){return d[82]=d[85]}])},function(a){return d[80]=d[82]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3012]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[82]=a[0],a})},function(a){return c.i64.eq(d[82],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[84]=a})},function(a){return d[83]=d[84]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[84]=a[0],a})},function(a){return d[85]=c.createArray(),d[87]=(d[85].push(d[84]),d[85]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[85]).then(function(a){return d[86]=a})},function(a){return d[83]=d[86]}])},function(a){return d[81]=d[83]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3013]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[83]=a[0],a})},function(a){return c.i64.eq(d[83],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[85]=a})},function(a){return d[84]=d[85]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[85]=a[0],a})},function(a){return d[86]=c.createArray(),d[88]=(d[86].push(d[85]),d[86]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[86]).then(function(a){return d[87]=a})},function(a){return d[84]=d[87]}])},function(a){return d[82]=d[84]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3014]))?c.sequence([function(a){return c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[85]=a[0],a})},function(a){return c.i64.eq(d[85],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[87]=a})},function(a){return d[86]=d[87]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[87]=a[0],a})},function(a){return d[88]=c.createArray(),d[90]=(d[88].push(d[87]),d[88]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[88]).then(function(a){return d[89]=a})},function(a){return d[86]=d[89]}])},function(a){return d[84]=d[86]}])},function(a){return d[83]=d[84]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3015]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[85]=a[0],a})},function(a){return c.i64.eq(d[85],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3471188061]),void 0).then(function(a){return d[87]=a})},function(a){return d[86]=d[87]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[87]=a[0],a})},function(a){return d[88]=c.createArray(),d[90]=(d[88].push(d[87]),d[88]),b("LSLocalize").localizeV2Async(c.i64.cast([0,2776822462]),d[88]).then(function(a){return d[89]=a})},function(a){return d[86]=d[89]}])},function(a){return d[84]=d[86]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3016]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[86]=a[0],a})},function(a){return c.i64.eq(d[86],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[88]=a})},function(a){return d[87]=d[88]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[88]=a[0],a})},function(a){return d[89]=c.createArray(),d[91]=(d[89].push(d[88]),d[89]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[89]).then(function(a){return d[90]=a})},function(a){return d[87]=d[90]}])},function(a){return d[85]=d[87]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3017]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[87]=a[0],a})},function(a){return c.i64.eq(d[87],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[89]=a})},function(a){return d[88]=d[89]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[89]=a[0],a})},function(a){return d[90]=c.createArray(),d[92]=(d[90].push(d[89]),d[90]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[90]).then(function(a){return d[91]=a})},function(a){return d[88]=d[91]}])},function(a){return d[86]=d[88]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3018]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[88]=a[0],a})},function(a){return c.i64.eq(d[88],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[90]=a})},function(a){return d[89]=d[90]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[90]=a[0],a})},function(a){return d[91]=c.createArray(),d[93]=(d[91].push(d[90]),d[91]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[91]).then(function(a){return d[92]=a})},function(a){return d[89]=d[92]}])},function(a){return d[87]=d[89]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3019]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[89]=a[0],a})},function(a){return c.i64.eq(d[89],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[91]=a})},function(a){return d[90]=d[91]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[91]=a[0],a})},function(a){return d[92]=c.createArray(),d[94]=(d[92].push(d[91]),d[92]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[92]).then(function(a){return d[93]=a})},function(a){return d[90]=d[93]}])},function(a){return d[88]=d[90]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3020]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[90]=a[0],a})},function(a){return c.i64.eq(d[90],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[92]=a})},function(a){return d[91]=d[92]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[92]=a[0],a})},function(a){return d[93]=c.createArray(),d[95]=(d[93].push(d[92]),d[93]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[93]).then(function(a){return d[94]=a})},function(a){return d[91]=d[94]}])},function(a){return d[89]=d[91]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3021]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[91]=a[0],a})},function(a){return c.i64.eq(d[91],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[93]=a})},function(a){return d[92]=d[93]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[93]=a[0],a})},function(a){return d[94]=c.createArray(),d[96]=(d[94].push(d[93]),d[94]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[94]).then(function(a){return d[95]=a})},function(a){return d[92]=d[95]}])},function(a){return d[90]=d[92]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3022]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[92]=a[0],a})},function(a){return c.i64.eq(d[92],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[94]=a})},function(a){return d[93]=d[94]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[94]=a[0],a})},function(a){return d[95]=c.createArray(),d[97]=(d[95].push(d[94]),d[95]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[95]).then(function(a){return d[96]=a})},function(a){return d[93]=d[96]}])},function(a){return d[91]=d[93]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3023]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[93]=a[0],a})},function(a){return c.i64.eq(d[93],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[95]=a})},function(a){return d[94]=d[95]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[95]=a[0],a})},function(a){return d[96]=c.createArray(),d[98]=(d[96].push(d[95]),d[96]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[96]).then(function(a){return d[97]=a})},function(a){return d[94]=d[97]}])},function(a){return d[92]=d[94]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3024]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[94]=a[0],a})},function(a){return c.i64.eq(d[94],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[96]=a})},function(a){return d[95]=d[96]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[96]=a[0],a})},function(a){return d[97]=c.createArray(),d[99]=(d[97].push(d[96]),d[97]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[97]).then(function(a){return d[98]=a})},function(a){return d[95]=d[98]}])},function(a){return d[93]=d[95]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3025]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[95]=a[0],a})},function(a){return c.i64.eq(d[95],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[97]=a})},function(a){return d[96]=d[97]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[97]=a[0],a})},function(a){return d[98]=c.createArray(),d[100]=(d[98].push(d[97]),d[98]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[98]).then(function(a){return d[99]=a})},function(a){return d[96]=d[99]}])},function(a){return d[94]=d[96]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3026]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[96]=a[0],a})},function(a){return c.i64.eq(d[96],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[98]=a})},function(a){return d[97]=d[98]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[98]=a[0],a})},function(a){return d[99]=c.createArray(),d[101]=(d[99].push(d[98]),d[99]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[99]).then(function(a){return d[100]=a})},function(a){return d[97]=d[100]}])},function(a){return d[95]=d[97]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3027]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[97]=a[0],a})},function(a){return c.i64.eq(d[97],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[99]=a})},function(a){return d[98]=d[99]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[99]=a[0],a})},function(a){return d[100]=c.createArray(),d[102]=(d[100].push(d[99]),d[100]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[100]).then(function(a){return d[101]=a})},function(a){return d[98]=d[101]}])},function(a){return d[96]=d[98]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3028]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[98]=a[0],a})},function(a){return c.i64.eq(d[98],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[100]=a})},function(a){return d[99]=d[100]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[100]=a[0],a})},function(a){return d[101]=c.createArray(),d[103]=(d[101].push(d[100]),d[101]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[101]).then(function(a){return d[102]=a})},function(a){return d[99]=d[102]}])},function(a){return d[97]=d[99]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3029]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[99]=a[0],a})},function(a){return c.i64.eq(d[99],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[101]=a})},function(a){return d[100]=d[101]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[101]=a[0],a})},function(a){return d[102]=c.createArray(),d[104]=(d[102].push(d[101]),d[102]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[102]).then(function(a){return d[103]=a})},function(a){return d[100]=d[103]}])},function(a){return d[98]=d[100]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3030]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[100]=a[0],a})},function(a){return c.i64.eq(d[100],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[102]=a})},function(a){return d[101]=d[102]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[102]=a[0],a})},function(a){return d[103]=c.createArray(),d[105]=(d[103].push(d[102]),d[103]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[103]).then(function(a){return d[104]=a})},function(a){return d[101]=d[104]}])},function(a){return d[99]=d[101]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3040]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[101]=a[0],a})},function(a){return c.i64.eq(d[101],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[103]=a})},function(a){return d[102]=d[103]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[103]=a[0],a})},function(a){return d[104]=c.createArray(),d[106]=(d[104].push(d[103]),d[104]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[104]).then(function(a){return d[105]=a})},function(a){return d[102]=d[105]}])},function(a){return d[100]=d[102]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3041]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[102]=a[0],a})},function(a){return c.i64.eq(d[102],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[104]=a})},function(a){return d[103]=d[104]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[104]=a[0],a})},function(a){return d[105]=c.createArray(),d[107]=(d[105].push(d[104]),d[105]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[105]).then(function(a){return d[106]=a})},function(a){return d[103]=d[106]}])},function(a){return d[101]=d[103]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3042]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[103]=a[0],a})},function(a){return c.i64.eq(d[103],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[105]=a})},function(a){return d[104]=d[105]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[105]=a[0],a})},function(a){return d[106]=c.createArray(),d[108]=(d[106].push(d[105]),d[106]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[106]).then(function(a){return d[107]=a})},function(a){return d[104]=d[107]}])},function(a){return d[102]=d[104]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3043]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[104]=a[0],a})},function(a){return c.i64.eq(d[104],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[106]=a})},function(a){return d[105]=d[106]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[106]=a[0],a})},function(a){return d[107]=c.createArray(),d[109]=(d[107].push(d[106]),d[107]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[107]).then(function(a){return d[108]=a})},function(a){return d[105]=d[108]}])},function(a){return d[103]=d[105]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3044]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[105]=a[0],a})},function(a){return c.i64.eq(d[105],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[107]=a})},function(a){return d[106]=d[107]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[107]=a[0],a})},function(a){return d[108]=c.createArray(),d[110]=(d[108].push(d[107]),d[108]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[108]).then(function(a){return d[109]=a})},function(a){return d[106]=d[109]}])},function(a){return d[104]=d[106]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4e3]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[106]=a[0],a})},function(a){return c.i64.eq(d[106],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[110]=a})},function(a){return d[107]=d[110]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[110]=a[0],a})},function(a){return d[107]=d[110]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[108]=a[0],a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1739999037]),void 0).then(function(a){return d[109]=a})},function(a){return d[105]=d[109]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4001]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[107]=a[0],a})},function(a){return c.i64.eq(d[107],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[111]=a})},function(a){return d[108]=d[111]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[111]=a[0],a})},function(a){return d[108]=d[111]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[109]=a[0],a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3373597599]),void 0).then(function(a){return d[110]=a})},function(a){return d[106]=d[110]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4002]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[108]=a[0],a})},function(a){return c.i64.eq(d[108],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[112]=a})},function(a){return d[109]=d[112]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[112]=a[0],a})},function(a){return d[109]=d[112]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[110]=a[0],a})},function(a){return c.i64.eq(d[110],d[4])?c.sequence([function(a){return d[112]=c.createArray(),d[114]=(d[112].push(d[109]),d[112]),b("LSLocalize").localizeV2Async(c.i64.cast([0,259473449]),d[112]).then(function(a){return d[113]=a})},function(a){return d[111]=d[113]}]):c.sequence([function(a){return d[112]=c.createArray(),d[114]=(d[112].push(d[109]),d[112]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1338912959]),d[112]).then(function(a){return d[113]=a})},function(a){return d[111]=d[113]}])},function(a){return d[107]=d[111]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4003]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[109]=a[0],a})},function(a){return c.i64.eq(d[109],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[113]=a})},function(a){return d[110]=d[113]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[113]=a[0],a})},function(a){return d[110]=d[113]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[111]=a[0],a})},function(a){return c.i64.eq(d[111],d[4])?c.sequence([function(a){return d[113]=c.createArray(),d[115]=(d[113].push(d[110]),d[113]),b("LSLocalize").localizeV2Async(c.i64.cast([0,812940701]),d[113]).then(function(a){return d[114]=a})},function(a){return d[112]=d[114]}]):c.sequence([function(a){return d[113]=c.createArray(),d[115]=(d[113].push(d[110]),d[113]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1099878966]),d[113]).then(function(a){return d[114]=a})},function(a){return d[112]=d[114]}])},function(a){return d[108]=d[112]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4004]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[110]=a[0],a})},function(a){return c.i64.eq(d[110],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[114]=a})},function(a){return d[111]=d[114]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[114]=a[0],a})},function(a){return d[111]=d[114]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[112]=a[0],a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3443782102]),void 0).then(function(a){return d[113]=a})},function(a){return d[109]=d[113]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4005]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[111]=a[0],a})},function(a){return c.i64.eq(d[111],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[115]=a})},function(a){return d[112]=d[115]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[115]=a[0],a})},function(a){return d[112]=d[115]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[113]=a[0],a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,618905030]),void 0).then(function(a){return d[114]=a})},function(a){return d[110]=d[114]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4006]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[112]=a[0],a})},function(a){return c.i64.eq(d[112],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[116]=a})},function(a){return d[113]=d[116]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[116]=a[0],a})},function(a){return d[113]=d[116]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[114]=a[0],a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2470414797]),void 0).then(function(a){return d[115]=a})},function(a){return d[111]=d[115]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4007]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[113]=a[0],a})},function(a){return c.i64.eq(d[113],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[117]=a})},function(a){return d[114]=d[117]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[117]=a[0],a})},function(a){return d[114]=d[117]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[115]=a[0],a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1306024833]),void 0).then(function(a){return d[116]=a})},function(a){return d[112]=d[116]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4008]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[114]=a[0],a})},function(a){return c.i64.eq(d[114],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[118]=a})},function(a){return d[115]=d[118]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[118]=a[0],a})},function(a){return d[115]=d[118]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[116]=a[0],a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3443782102]),void 0).then(function(a){return d[117]=a})},function(a){return d[113]=d[117]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4009]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[115]=a[0],a})},function(a){return c.i64.eq(d[115],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[119]=a})},function(a){return d[116]=d[119]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[119]=a[0],a})},function(a){return d[116]=d[119]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[117]=a[0],a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,618905030]),void 0).then(function(a){return d[118]=a})},function(a){return d[114]=d[118]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,5e3]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[116]=a[0],a})},function(a){return c.i64.eq(d[116],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[118]=a})},function(a){return d[117]=d[118]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[118]=a[0],a})},function(a){return d[119]=c.createArray(),d[121]=(d[119].push(d[118]),d[119]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[119]).then(function(a){return d[120]=a})},function(a){return d[117]=d[120]}])},function(a){return d[115]=d[117]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,6e3]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[117]=a[0],a})},function(a){return c.i64.eq(d[117],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[119]=a})},function(a){return d[118]=d[119]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[119]=a[0],a})},function(a){return d[120]=c.createArray(),d[122]=(d[120].push(d[119]),d[120]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[120]).then(function(a){return d[121]=a})},function(a){return d[118]=d[121]}])},function(a){return d[116]=d[118]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,7e3]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[118]=a[0],a})},function(a){return c.i64.eq(d[118],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2135145355]),void 0).then(function(a){return d[120]=a})},function(a){return d[119]=d[120]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[120]=a[0],a})},function(a){return d[121]=c.createArray(),d[123]=(d[121].push(d[120]),d[121]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3603511704]),d[121]).then(function(a){return d[122]=a})},function(a){return d[119]=d[122]}])},function(a){return d[117]=d[119]}]):c.resolve(d[117]=void 0)},function(a){return d[116]=d[117]}])},function(a){return d[115]=d[116]}])},function(a){return d[114]=d[115]}])},function(a){return d[113]=d[114]}])},function(a){return d[112]=d[113]}])},function(a){return d[111]=d[112]}])},function(a){return d[110]=d[111]}])},function(a){return d[109]=d[110]}])},function(a){return d[108]=d[109]}])},function(a){return d[107]=d[108]}])},function(a){return d[106]=d[107]}])},function(a){return d[105]=d[106]}])},function(a){return d[104]=d[105]}])},function(a){return d[103]=d[104]}])},function(a){return d[102]=d[103]}])},function(a){return d[101]=d[102]}])},function(a){return d[100]=d[101]}])},function(a){return d[99]=d[100]}])},function(a){return d[98]=d[99]}])},function(a){return d[97]=d[98]}])},function(a){return d[96]=d[97]}])},function(a){return d[95]=d[96]}])},function(a){return d[94]=d[95]}])},function(a){return d[93]=d[94]}])},function(a){return d[92]=d[93]}])},function(a){return d[91]=d[92]}])},function(a){return d[90]=d[91]}])},function(a){return d[89]=d[90]}])},function(a){return d[88]=d[89]}])},function(a){return d[87]=d[88]}])},function(a){return d[86]=d[87]}])},function(a){return d[85]=d[86]}])},function(a){return d[84]=d[85]}])},function(a){return d[83]=d[84]}])},function(a){return d[82]=d[83]}])},function(a){return d[81]=d[82]}])},function(a){return d[80]=d[81]}])},function(a){return d[79]=d[80]}])},function(a){return d[78]=d[79]}])},function(a){return d[77]=d[78]}])},function(a){return d[76]=d[77]}])},function(a){return d[75]=d[76]}])},function(a){return d[74]=d[75]}])},function(a){return d[73]=d[74]}])},function(a){return d[72]=d[73]}])},function(a){return d[71]=d[72]}])},function(a){return d[70]=d[71]}])},function(a){return d[69]=d[70]}])},function(a){return d[68]=d[69]}])},function(a){return d[67]=d[68]}])},function(a){return d[66]=d[67]}])},function(a){return d[65]=d[66]}])},function(a){return d[64]=d[65]}])},function(a){return d[63]=d[64]}])},function(a){return d[62]=d[63]}])},function(a){return d[61]=d[62]}])},function(a){return d[60]=d[61]}])},function(a){return d[59]=d[60]}])},function(a){return d[58]=d[59]}])},function(a){return d[57]=d[58]}])},function(a){return d[56]=d[57]}])},function(a){return d[55]=d[56]}])},function(a){return d[54]=d[55]}])},function(a){return d[53]=d[54]}])},function(a){return d[52]=d[53]}])},function(a){return d[51]=d[52]}])},function(a){return d[50]=d[51]}])},function(a){return d[49]=d[50]}])},function(a){return d[48]=d[49]}])},function(a){return d[47]=d[48]}])},function(a){return d[46]=d[47]}])},function(a){return d[45]=d[46]}])},function(a){return d[44]=d[45]}])},function(a){return d[43]=d[44]}])},function(a){return d[42]=d[43]}])},function(a){return d[41]=d[42]}])},function(a){return d[40]=d[41]}])},function(a){return d[39]=d[40]}])},function(a){return d[38]=d[39]}])},function(a){return d[37]=d[38]}])},function(a){return d[36]=d[37]}])},function(a){return d[35]=d[36]}])},function(a){return d[34]=d[35]}])},function(a){return d[33]=d[34]}])},function(a){return d[32]=d[33]}])},function(a){return d[31]=d[32]}])},function(a){return d[27]=d[31]}]):c.resolve(d[27]=void 0)},function(a){return d[25]===void 0&&c.i64.eq(d[19],c.i64.cast([0,7]))&&d[27]!==void 0?d[25]=d[27]:0,c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[28]=a[0],a})},function(a){return c.i64.eq(d[28],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[30]=a})},function(a){return d[29]=d[30]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[30]=a[0],a})},function(a){return d[31]=c.createArray(),d[33]=(d[31].push(d[30]),d[31]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[31]).then(function(a){return d[32]=a})},function(a){return d[29]=d[32]}])},function(a){return d[18]=d[25]==null?d[29]:d[25]}]):c.sequence([function(a){return d[19]=!0,c.forEach(c.filter(c.db.table(16).fetch([[[d[5],d[9]]]]),function(a){return c.i64.eq(a.threadKey,d[5])&&c.i64.eq(c.i64.cast([0,0]),d[8])&&a.messageId===d[9]}),function(a){a=a.item;return c.i64.eq(a.attachmentType,c.i64.cast([0,2]))?0:d[19]=!1})},function(a){return d[19]?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[21]=a[0],a})},function(a){return c.i64.eq(d[21],d[4])?c.sequence([function(a){return d[23]=c.createArray(),d[25]=(d[23].push(d[16]),d[23]),b("LSLocalize").localizeV2Async(c.i64.cast([0,705614308]),d[23]).then(function(a){return d[24]=a})},function(a){return d[22]=d[24]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[23]=a[0],a})},function(a){return d[24]=c.createArray(),d[26]=(d[24].push(d[23]),d[24]),d[26]=(d[24].push(d[16]),d[24]),b("LSLocalize").localizeV2Async(c.i64.cast([0,313217698]),d[24]).then(function(a){return d[25]=a})},function(a){return d[22]=d[25]}])},function(a){return d[20]=d[22]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[21]=a[0],a})},function(a){return c.i64.eq(d[21],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3558654267]),void 0).then(function(a){return d[23]=a})},function(a){return d[22]=d[23]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[23]=a[0],a})},function(a){return d[24]=c.createArray(),d[26]=(d[24].push(d[23]),d[24]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3422266740]),d[24]).then(function(a){return d[25]=a})},function(a){return d[22]=d[25]}])},function(a){return d[20]=d[22]}])},function(a){return d[18]=d[20]}])},function(a){return d[17]=d[18]}])},function(a){return d[15]=d[17]}])},function(a){return d[14]=d[15]}])},function(a){return d[13]=d[14]}])},function(a){return d[12]=d[13]}])},function(a){return d[11]=d[12]}])},function(a){return d[10]=d[11]}])},function(a){return d[2]=d[10]}])},function(e){return c.storedProcedure(b("LSUpdateThreadSnippet"),a[0],d[2],d[3],d[4],c.like(d[2],"%\udb80\udc00%"),void 0,void 0,!1)},function(d){return c.storedProcedure(b("LSUpdateLastActivityTimestamp"),a[0],f.timestampMs)}]))}):c.db.table(12).fetchDesc([[[a[0]]]]).next().then(function(e,f){var g=e.done;e=e.value;return g?0:(f=e.item,c.sequence([function(a){return d[6]=f.text,d[5]=f.threadKey,d[8]=c.i64.cast([0,0]),d[9]=f.messageId,d[4]=f.senderId,d[7]=f.stickerId,d[3]=f.isAdminMessage,d[1]=!0,d[3]||!d[1]?c.resolve(d[2]=d[6]==null?"":d[6]):c.sequence([function(a){return f.isUnsent?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[11]=a[0],a})},function(a){return c.i64.eq(d[11],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2987332812]),void 0).then(function(a){return d[16]=a})},function(a){return d[12]=d[16]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[16]=a[0],a})},function(a){return d[17]=c.createArray(),d[19]=(d[17].push(d[16]),d[17]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1530605193]),d[17]).then(function(a){return d[18]=a})},function(a){return d[12]=d[18]}])},function(a){return c.db.table(9).fetch([[[d[5]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[13]=!1:(e=b.item,d[13]=[c.i64.cast([0,23]),c.i64.cast([0,21]),c.i64.cast([0,18]),c.i64.cast([0,26]),c.i64.cast([0,27])].some(function(a){return c.i64.eq(e.threadType,a)}))})},function(a){return d[13]?c.sequence([function(a){return c.filter(c.db.table(16).fetch([[[d[5],d[9]]]]),function(a){return c.i64.eq(a.threadKey,d[5])&&c.i64.eq(c.i64.cast([0,0]),d[8])&&a.messageId===d[9]}).next().then(function(b,e){var a=b.done;b=b.value;return a?(a=[c.i64.cast([0,0]),void 0,void 0,void 0,void 0],d[16]=a[0],d[17]=a[1],d[18]=a[2],d[19]=a[3],d[20]=a[4],a):(e=b.item,a=[e.attachmentType,e.attributionAppName,e.defaultCtaType,e.descriptionText,e.xmaContentType],d[16]=a[0],d[17]=a[1],d[18]=a[2],d[19]=a[3],d[20]=a[4],a)})},function(a){return d[19]!==void 0?d[22]=d[19]:d[22]=d[12],d[15]=d[22]}]):c.resolve(d[15]=d[12])},function(a){return d[10]=d[15]}]):c.sequence([function(a){return c.sequence([function(a){return c.i64.eq(f.replyType,c.i64.cast([0,1]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[13]=a[0],a})},function(a){return c.i64.eq(d[13],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1899892426]),void 0).then(function(a){return d[15]=a})},function(a){return d[14]=d[15]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[15]=a[0],a})},function(a){return d[16]=c.createArray(),d[18]=(d[16].push(d[15]),d[16]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3287869262]),d[16]).then(function(a){return d[17]=a})},function(a){return d[14]=d[17]}])},function(a){return d[12]=d[14]}]):c.sequence([function(a){return d[6]!==void 0&&d[6]!==""?c.sequence([function(a){return d[16]=d[6]==null?"":d[6],c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[14]=a[0],a})},function(a){return c.i64.eq(d[14],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1890485478]),void 0).then(function(a){return d[17]=a})},function(a){return d[15]=[d[17],": ",d[16]].join("")}]):c.sequence([function(a){return c.db.table(9).fetch([[[d[5]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[17]=!1:(e=b.item,d[17]=c.i64.eq(e.threadType,c.i64.cast([0,2])))})},function(a){return c.db.table(9).fetch([[[d[5]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[19]=!1:(e=b.item,d[19]=[c.i64.cast([0,18]),c.i64.cast([0,27])].some(function(a){return c.i64.eq(e.threadType,a)}))})},function(a){return d[17]||d[19]||!1?c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[22]=a[0],a})},function(a){return d[21]=[d[22],": ",d[16]].join("")}]):c.resolve(d[21]=d[16])},function(a){return d[15]=d[21]}])},function(a){return d[13]=d[15]}]):c.sequence([function(a){return c.i64.neq(d[7],void 0)&&[c.i64.cast([53057,267535043]),c.i64.cast([85970,924785702]),c.i64.cast([85970,1004785694]),c.i64.cast([85970,1044785690])].some(function(a){return c.i64.eq(d[7],a)})?c.sequence([function(a){return d[17]="\udb80\udc00",c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[15]=a[0],a})},function(a){return c.i64.eq(d[15],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1890485478]),void 0).then(function(a){return d[18]=a})},function(a){return d[16]=[d[18],": ",d[17]].join("")}]):c.sequence([function(a){return c.db.table(9).fetch([[[d[5]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[18]=!1:(e=b.item,d[18]=c.i64.eq(e.threadType,c.i64.cast([0,2])))})},function(a){return c.db.table(9).fetch([[[d[5]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[20]=!1:(e=b.item,d[20]=[c.i64.cast([0,18]),c.i64.cast([0,27])].some(function(a){return c.i64.eq(e.threadType,a)}))})},function(a){return d[18]||d[20]||!1?c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[23]=a[0],a})},function(a){return d[22]=[d[23],": ",d[17]].join("")}]):c.resolve(d[22]=d[17])},function(a){return d[16]=d[22]}])},function(a){return d[14]=d[16]}]):c.sequence([function(a){return c.i64.neq(d[7],void 0)?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[16]=a[0],a})},function(a){return c.i64.eq(d[16],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1299547062]),void 0).then(function(a){return d[18]=a})},function(a){return d[17]=d[18]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[18]=a[0],a})},function(a){return d[19]=c.createArray(),d[21]=(d[19].push(d[18]),d[19]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3621454483]),d[19]).then(function(a){return d[20]=a})},function(a){return d[17]=d[20]}])},function(a){return d[15]=d[17]}]):c.sequence([function(a){return c.count(c.filter(c.db.table(16).fetch([[[d[5],d[9]]]]),function(a){return c.i64.eq(a.threadKey,d[5])&&c.i64.eq(c.i64.cast([0,0]),d[8])&&a.messageId===d[9]})).then(function(a){return d[16]=a})},function(a){return c.i64.eq(d[16],c.i64.cast([0,0]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[18]=a[0],a})},function(a){return c.i64.eq(d[18],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[20]=a})},function(a){return d[19]=d[20]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[20]=a[0],a})},function(a){return d[21]=c.createArray(),d[23]=(d[21].push(d[20]),d[21]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[21]).then(function(a){return d[22]=a})},function(a){return d[19]=d[22]}])},function(a){return d[17]=d[19]}]):c.sequence([function(a){return c.i64.eq(d[16],c.i64.cast([0,1]))?c.sequence([function(a){return c.filter(c.db.table(16).fetch([[[d[5],d[9]]]]),function(a){return c.i64.eq(a.threadKey,d[5])&&c.i64.eq(c.i64.cast([0,0]),d[8])&&a.messageId===d[9]}).next().then(function(b,e){var a=b.done;b=b.value;return a?(a=[c.i64.cast([0,0]),void 0,void 0,void 0,void 0],d[19]=a[0],d[20]=a[1],d[21]=a[2],d[22]=a[3],d[23]=a[4],a):(e=b.item,a=[e.attachmentType,e.attributionAppName,e.defaultCtaType,e.descriptionText,e.xmaContentType],d[19]=a[0],d[20]=a[1],d[21]=a[2],d[22]=a[3],d[23]=a[4],a)})},function(a){return d[25]=void 0,d[25]===void 0&&(c.i64.eq(d[19],c.i64.cast([0,1]))||c.i64.eq(d[19],c.i64.cast([0,15])))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return c.i64.eq(d[30],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1299547062]),void 0).then(function(a){return d[32]=a})},function(a){return d[31]=d[32]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[33]=c.createArray(),d[35]=(d[33].push(d[32]),d[33]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3621454483]),d[33]).then(function(a){return d[34]=a})},function(a){return d[31]=d[34]}])},function(a){return d[25]=d[31]}]):c.resolve()},function(a){return d[25]===void 0&&(c.i64.eq(d[19],c.i64.cast([0,2]))||c.i64.eq(d[19],c.i64.cast([0,8])))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return c.i64.eq(d[30],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2106510577]),void 0).then(function(a){return d[32]=a})},function(a){return d[31]=d[32]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[33]=c.createArray(),d[35]=(d[33].push(d[32]),d[33]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3960370133]),d[33]).then(function(a){return d[34]=a})},function(a){return d[31]=d[34]}])},function(a){return d[25]=d[31]}]):c.resolve()},function(a){return d[25]===void 0&&c.i64.eq(d[19],c.i64.cast([0,3]))?c.sequence([function(a){return d[20]!==void 0?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[31]=a[0],a})},function(a){return c.i64.eq(d[31],d[4])?c.sequence([function(a){return d[33]=c.createArray(),d[35]=(d[33].push(d[20]),d[33]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3798396796]),d[33]).then(function(a){return d[34]=a})},function(a){return d[32]=d[34]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[33]=a[0],a})},function(a){return d[34]=c.createArray(),d[36]=(d[34].push(d[33]),d[34]),d[36]=(d[34].push(d[20]),d[34]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3388601579]),d[34]).then(function(a){return d[35]=a})},function(a){return d[32]=d[35]}])},function(a){return d[30]=d[32]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[31]=a[0],a})},function(a){return c.i64.eq(d[31],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1556712457]),void 0).then(function(a){return d[33]=a})},function(a){return d[32]=d[33]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[33]=a[0],a})},function(a){return d[34]=c.createArray(),d[36]=(d[34].push(d[33]),d[34]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3601791933]),d[34]).then(function(a){return d[35]=a})},function(a){return d[32]=d[35]}])},function(a){return d[30]=d[32]}])},function(a){return d[25]=d[30]}]):c.resolve()},function(a){return d[25]===void 0&&(c.i64.eq(d[19],c.i64.cast([0,4]))||c.i64.eq(d[19],c.i64.cast([0,9])))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return c.i64.eq(d[30],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3759817031]),void 0).then(function(a){return d[32]=a})},function(a){return d[31]=d[32]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[33]=c.createArray(),d[35]=(d[33].push(d[32]),d[33]),b("LSLocalize").localizeV2Async(c.i64.cast([0,2934729541]),d[33]).then(function(a){return d[34]=a})},function(a){return d[31]=d[34]}])},function(a){return d[25]=d[31]}]):c.resolve()},function(a){return d[25]===void 0&&c.i64.eq(d[19],c.i64.cast([0,5]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return c.i64.eq(d[30],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,392493418]),void 0).then(function(a){return d[32]=a})},function(a){return d[31]=d[32]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[33]=c.createArray(),d[35]=(d[33].push(d[32]),d[33]),b("LSLocalize").localizeV2Async(c.i64.cast([0,4085467454]),d[33]).then(function(a){return d[34]=a})},function(a){return d[31]=d[34]}])},function(a){return d[25]=d[31]}]):c.resolve()},function(a){return d[25]===void 0&&c.i64.eq(d[19],c.i64.cast([0,10]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return c.i64.eq(d[30],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2738683656]),void 0).then(function(a){return d[32]=a})},function(a){return d[31]=d[32]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[33]=c.createArray(),d[35]=(d[33].push(d[32]),d[33]),b("LSLocalize").localizeV2Async(c.i64.cast([0,2996525642]),d[33]).then(function(a){return d[34]=a})},function(a){return d[31]=d[34]}])},function(a){return d[25]=d[31]}]):c.resolve()},function(a){return c.i64.neq(d[23],void 0)?d[26]=d[23]:(d[21]==="xma_live_location_sharing"?d[30]=c.i64.cast([0,7e3]):d[30]=void 0,d[26]=d[30]),c.i64.neq(d[26],void 0)?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return c.i64.eq(d[26],c.i64.cast([-1,4294967295]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[32]=a[0],a})},function(a){return c.i64.eq(d[32],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[34]=a})},function(a){return d[33]=d[34]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[34]=a[0],a})},function(a){return d[35]=c.createArray(),d[37]=(d[35].push(d[34]),d[35]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[35]).then(function(a){return d[36]=a})},function(a){return d[33]=d[36]}])},function(a){return d[31]=d[33]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,0]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[33]=a[0],a})},function(a){return c.i64.eq(d[33],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[35]=a})},function(a){return d[34]=d[35]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[35]=a[0],a})},function(a){return d[36]=c.createArray(),d[38]=(d[36].push(d[35]),d[36]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[36]).then(function(a){return d[37]=a})},function(a){return d[34]=d[37]}])},function(a){return d[32]=d[34]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1e3]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[34]=a[0],a})},function(a){return c.i64.eq(d[34],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2326868239]),void 0).then(function(a){return d[36]=a})},function(a){return d[35]=d[36]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[36]=a[0],a})},function(a){return d[37]=c.createArray(),d[39]=(d[37].push(d[36]),d[37]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1001986796]),d[37]).then(function(a){return d[38]=a})},function(a){return d[35]=d[38]}])},function(a){return d[33]=d[35]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1001]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[35]=a[0],a})},function(a){return c.i64.eq(d[35],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2326868239]),void 0).then(function(a){return d[37]=a})},function(a){return d[36]=d[37]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[37]=a[0],a})},function(a){return d[38]=c.createArray(),d[40]=(d[38].push(d[37]),d[38]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1001986796]),d[38]).then(function(a){return d[39]=a})},function(a){return d[36]=d[39]}])},function(a){return d[34]=d[36]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1002]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[36]=a[0],a})},function(a){return c.i64.eq(d[36],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2285746939]),void 0).then(function(a){return d[38]=a})},function(a){return d[37]=d[38]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[38]=a[0],a})},function(a){return d[39]=c.createArray(),d[41]=(d[39].push(d[38]),d[39]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3759448420]),d[39]).then(function(a){return d[40]=a})},function(a){return d[37]=d[40]}])},function(a){return d[35]=d[37]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1003]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[37]=a[0],a})},function(a){return c.i64.eq(d[37],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3719716921]),void 0).then(function(a){return d[39]=a})},function(a){return d[38]=d[39]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[39]=a[0],a})},function(a){return d[40]=c.createArray(),d[42]=(d[40].push(d[39]),d[40]),b("LSLocalize").localizeV2Async(c.i64.cast([0,284944921]),d[40]).then(function(a){return d[41]=a})},function(a){return d[38]=d[41]}])},function(a){return d[36]=d[38]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1004]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[38]=a[0],a})},function(a){return c.i64.eq(d[38],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[40]=a})},function(a){return d[41]=c.createArray(),d[43]=(d[41].push(d[40]),d[41]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3322002377]),d[41]).then(function(a){return d[42]=a})},function(a){return d[39]=d[42]}]):c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2486550278]),void 0).then(function(a){return d[40]=a})},function(a){return d[39]=d[40]}])},function(a){return d[37]=d[39]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1005]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[39]=a[0],a})},function(a){return c.i64.eq(d[39],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3557790945]),void 0).then(function(a){return d[41]=a})},function(a){return d[40]=d[41]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[41]=a[0],a})},function(a){return d[42]=c.createArray(),d[44]=(d[42].push(d[41]),d[42]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3756846086]),d[42]).then(function(a){return d[43]=a})},function(a){return d[40]=d[43]}])},function(a){return d[38]=d[40]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1006]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[40]=a[0],a})},function(a){return c.i64.eq(d[40],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2326868239]),void 0).then(function(a){return d[42]=a})},function(a){return d[41]=d[42]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[42]=a[0],a})},function(a){return d[43]=c.createArray(),d[45]=(d[43].push(d[42]),d[43]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1001986796]),d[43]).then(function(a){return d[44]=a})},function(a){return d[41]=d[44]}])},function(a){return d[39]=d[41]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1007]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[41]=a[0],a})},function(a){return c.i64.eq(d[41],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3719716921]),void 0).then(function(a){return d[43]=a})},function(a){return d[42]=d[43]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[43]=a[0],a})},function(a){return d[44]=c.createArray(),d[46]=(d[44].push(d[43]),d[44]),b("LSLocalize").localizeV2Async(c.i64.cast([0,284944921]),d[44]).then(function(a){return d[45]=a})},function(a){return d[42]=d[45]}])},function(a){return d[40]=d[42]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1008]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[42]=a[0],a})},function(a){return c.i64.eq(d[42],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[44]=a})},function(a){return d[43]=d[44]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[44]=a[0],a})},function(a){return d[45]=c.createArray(),d[47]=(d[45].push(d[44]),d[45]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[45]).then(function(a){return d[46]=a})},function(a){return d[43]=d[46]}])},function(a){return d[41]=d[43]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1009]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[43]=a[0],a})},function(a){return c.i64.eq(d[43],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,780378803]),void 0).then(function(a){return d[45]=a})},function(a){return d[44]=d[45]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[45]=a[0],a})},function(a){return d[46]=c.createArray(),d[48]=(d[46].push(d[45]),d[46]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3918212613]),d[46]).then(function(a){return d[47]=a})},function(a){return d[44]=d[47]}])},function(a){return d[42]=d[44]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1010]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[44]=a[0],a})},function(a){return c.i64.eq(d[44],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3161890215]),void 0).then(function(a){return d[46]=a})},function(a){return d[45]=d[46]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[46]=a[0],a})},function(a){return d[47]=c.createArray(),d[49]=(d[47].push(d[46]),d[47]),b("LSLocalize").localizeV2Async(c.i64.cast([0,863428456]),d[47]).then(function(a){return d[48]=a})},function(a){return d[45]=d[48]}])},function(a){return d[43]=d[45]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1011]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[45]=a[0],a})},function(a){return c.i64.eq(d[45],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2716405471]),void 0).then(function(a){return d[47]=a})},function(a){return d[46]=d[47]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[47]=a[0],a})},function(a){return d[48]=c.createArray(),d[50]=(d[48].push(d[47]),d[48]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3909474073]),d[48]).then(function(a){return d[49]=a})},function(a){return d[46]=d[49]}])},function(a){return d[44]=d[46]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1012]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[46]=a[0],a})},function(a){return c.i64.eq(d[46],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1522141193]),void 0).then(function(a){return d[48]=a})},function(a){return d[47]=d[48]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[48]=a[0],a})},function(a){return d[49]=c.createArray(),d[51]=(d[49].push(d[48]),d[49]),b("LSLocalize").localizeV2Async(c.i64.cast([0,2804766375]),d[49]).then(function(a){return d[50]=a})},function(a){return d[47]=d[50]}])},function(a){return d[45]=d[47]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1013]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[47]=a[0],a})},function(a){return c.i64.eq(d[47],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1522141193]),void 0).then(function(a){return d[49]=a})},function(a){return d[48]=d[49]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[49]=a[0],a})},function(a){return d[50]=c.createArray(),d[52]=(d[50].push(d[49]),d[50]),b("LSLocalize").localizeV2Async(c.i64.cast([0,2804766375]),d[50]).then(function(a){return d[51]=a})},function(a){return d[48]=d[51]}])},function(a){return d[46]=d[48]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1014]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[48]=a[0],a})},function(a){return c.i64.eq(d[48],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[50]=a})},function(a){return d[51]=c.createArray(),d[53]=(d[51].push(d[50]),d[51]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3322002377]),d[51]).then(function(a){return d[52]=a})},function(a){return d[49]=d[52]}]):c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2486550278]),void 0).then(function(a){return d[50]=a})},function(a){return d[49]=d[50]}])},function(a){return d[47]=d[49]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1015]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[49]=a[0],a})},function(a){return c.i64.eq(d[49],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[51]=a})},function(a){return d[50]=d[51]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[51]=a[0],a})},function(a){return d[52]=c.createArray(),d[54]=(d[52].push(d[51]),d[52]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[52]).then(function(a){return d[53]=a})},function(a){return d[50]=d[53]}])},function(a){return d[48]=d[50]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1016]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[50]=a[0],a})},function(a){return c.i64.eq(d[50],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[52]=a})},function(a){return d[51]=d[52]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[52]=a[0],a})},function(a){return d[53]=c.createArray(),d[55]=(d[53].push(d[52]),d[53]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[53]).then(function(a){return d[54]=a})},function(a){return d[51]=d[54]}])},function(a){return d[49]=d[51]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1017]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[51]=a[0],a})},function(a){return c.i64.eq(d[51],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[53]=a})},function(a){return d[52]=d[53]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[53]=a[0],a})},function(a){return d[54]=c.createArray(),d[56]=(d[54].push(d[53]),d[54]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[54]).then(function(a){return d[55]=a})},function(a){return d[52]=d[55]}])},function(a){return d[50]=d[52]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1018]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[52]=a[0],a})},function(a){return c.i64.eq(d[52],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[54]=a})},function(a){return d[53]=d[54]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[54]=a[0],a})},function(a){return d[55]=c.createArray(),d[57]=(d[55].push(d[54]),d[55]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[55]).then(function(a){return d[56]=a})},function(a){return d[53]=d[56]}])},function(a){return d[51]=d[53]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1019]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[53]=a[0],a})},function(a){return c.i64.eq(d[53],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[55]=a})},function(a){return d[54]=d[55]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[55]=a[0],a})},function(a){return d[56]=c.createArray(),d[58]=(d[56].push(d[55]),d[56]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[56]).then(function(a){return d[57]=a})},function(a){return d[54]=d[57]}])},function(a){return d[52]=d[54]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1020]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[54]=a[0],a})},function(a){return c.i64.eq(d[54],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[56]=a})},function(a){return d[55]=d[56]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[56]=a[0],a})},function(a){return d[57]=c.createArray(),d[59]=(d[57].push(d[56]),d[57]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[57]).then(function(a){return d[58]=a})},function(a){return d[55]=d[58]}])},function(a){return d[53]=d[55]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2e3]))?c.sequence([function(a){return c.sequence([function(a){return void 0!==void 0?c.sequence([function(a){return void 0!==void 0?c.sequence([function(a){return c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[59]=a[0],a})},function(a){return c.i64.eq(d[59],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[61]=a})},function(a){return d[60]=d[61]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[61]=a[0],a})},function(a){return d[62]=c.createArray(),d[64]=(d[62].push(d[61]),d[62]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[62]).then(function(a){return d[63]=a})},function(a){return d[60]=d[63]}])},function(a){return d[58]=d[60]}])},function(a){return d[57]=d[58]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[58]=a[0],a})},function(a){return c.i64.eq(d[58],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[60]=a})},function(a){return d[59]=d[60]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[60]=a[0],a})},function(a){return d[61]=c.createArray(),d[63]=(d[61].push(d[60]),d[61]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[61]).then(function(a){return d[62]=a})},function(a){return d[59]=d[62]}])},function(a){return d[57]=d[59]}])},function(a){return d[56]=d[57]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[57]=a[0],a})},function(a){return c.i64.eq(d[57],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[59]=a})},function(a){return d[58]=d[59]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[59]=a[0],a})},function(a){return d[60]=c.createArray(),d[62]=(d[60].push(d[59]),d[60]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[60]).then(function(a){return d[61]=a})},function(a){return d[58]=d[61]}])},function(a){return d[56]=d[58]}])},function(a){return d[55]=d[56]}])},function(a){return d[54]=d[55]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2001]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[56]=a[0],a})},function(a){return c.i64.eq(d[56],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2285746939]),void 0).then(function(a){return d[58]=a})},function(a){return d[57]=d[58]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[58]=a[0],a})},function(a){return d[59]=c.createArray(),d[61]=(d[59].push(d[58]),d[59]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3759448420]),d[59]).then(function(a){return d[60]=a})},function(a){return d[57]=d[60]}])},function(a){return d[55]=d[57]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2002]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[57]=a[0],a})},function(a){return c.i64.eq(d[57],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3719716921]),void 0).then(function(a){return d[59]=a})},function(a){return d[58]=d[59]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[59]=a[0],a})},function(a){return d[60]=c.createArray(),d[62]=(d[60].push(d[59]),d[60]),b("LSLocalize").localizeV2Async(c.i64.cast([0,284944921]),d[60]).then(function(a){return d[61]=a})},function(a){return d[58]=d[61]}])},function(a){return d[56]=d[58]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2003]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[58]=a[0],a})},function(a){return c.i64.eq(d[58],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[60]=a})},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[61]=a[0],a})},function(a){return c.i64.eq(d[61],d[4])?c.sequence([function(a){return d[63]=c.createArray(),d[65]=(d[63].push(d[60]),d[63]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1247108605]),d[63]).then(function(a){return d[64]=a})},function(a){return d[62]=d[64]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[63]=a[0],a})},function(a){return d[64]=c.createArray(),d[66]=(d[64].push(d[63]),d[64]),d[66]=(d[64].push(d[60]),d[64]),b("LSLocalize").localizeV2Async(c.i64.cast([0,2966876020]),d[64]).then(function(a){return d[65]=a})},function(a){return d[62]=d[65]}])},function(a){return d[59]=d[62]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[60]=a[0],a})},function(a){return c.i64.eq(d[60],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1056933543]),void 0).then(function(a){return d[62]=a})},function(a){return d[61]=d[62]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[62]=a[0],a})},function(a){return d[63]=c.createArray(),d[65]=(d[63].push(d[62]),d[63]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1167688664]),d[63]).then(function(a){return d[64]=a})},function(a){return d[61]=d[64]}])},function(a){return d[59]=d[61]}])},function(a){return d[57]=d[59]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2004]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[59]=a[0],a})},function(a){return c.i64.eq(d[59],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2326868239]),void 0).then(function(a){return d[61]=a})},function(a){return d[60]=d[61]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[61]=a[0],a})},function(a){return d[62]=c.createArray(),d[64]=(d[62].push(d[61]),d[62]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1001986796]),d[62]).then(function(a){return d[63]=a})},function(a){return d[60]=d[63]}])},function(a){return d[58]=d[60]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2005]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[60]=a[0],a})},function(a){return c.i64.eq(d[60],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,772459202]),void 0).then(function(a){return d[62]=a})},function(a){return d[61]=d[62]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[62]=a[0],a})},function(a){return d[63]=c.createArray(),d[65]=(d[63].push(d[62]),d[63]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3546068912]),d[63]).then(function(a){return d[64]=a})},function(a){return d[61]=d[64]}])},function(a){return d[59]=d[61]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2006]))?c.sequence([function(a){return c.i64.eq(d[30],d[4])?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[62]=a[0],a})},function(a){return c.i64.eq(d[62],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2459540079]),void 0).then(function(a){return d[64]=a})},function(a){return d[63]=d[64]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[64]=a[0],a})},function(a){return d[65]=c.createArray(),d[67]=(d[65].push(d[64]),d[65]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1596311291]),d[65]).then(function(a){return d[66]=a})},function(a){return d[63]=d[66]}])},function(a){return d[61]=d[63]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[62]=a[0],a})},function(a){return c.i64.eq(d[62],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2253698324]),void 0).then(function(a){return d[64]=a})},function(a){return d[63]=d[64]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[64]=a[0],a})},function(a){return d[65]=c.createArray(),d[67]=(d[65].push(d[64]),d[65]),b("LSLocalize").localizeV2Async(c.i64.cast([0,4269602817]),d[65]).then(function(a){return d[66]=a})},function(a){return d[63]=d[66]}])},function(a){return d[61]=d[63]}])},function(a){return d[60]=d[61]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2007]))?c.sequence([function(a){return c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[63]=a[0],a})},function(a){return c.i64.eq(d[63],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[65]=a})},function(a){return d[64]=d[65]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[65]=a[0],a})},function(a){return d[66]=c.createArray(),d[68]=(d[66].push(d[65]),d[66]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[66]).then(function(a){return d[67]=a})},function(a){return d[64]=d[67]}])},function(a){return d[62]=d[64]}])},function(a){return d[61]=d[62]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2008]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[63]=a[0],a})},function(a){return c.i64.eq(d[63],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[65]=a})},function(a){return d[64]=d[65]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[65]=a[0],a})},function(a){return d[66]=c.createArray(),d[68]=(d[66].push(d[65]),d[66]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[66]).then(function(a){return d[67]=a})},function(a){return d[64]=d[67]}])},function(a){return d[62]=d[64]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2009]))?c.sequence([function(a){return c.sequence([function(a){return void 0!==void 0?c.sequence([function(a){return void 0!==void 0?c.sequence([function(a){return c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[68]=a[0],a})},function(a){return c.i64.eq(d[68],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[70]=a})},function(a){return d[69]=d[70]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[70]=a[0],a})},function(a){return d[71]=c.createArray(),d[73]=(d[71].push(d[70]),d[71]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[71]).then(function(a){return d[72]=a})},function(a){return d[69]=d[72]}])},function(a){return d[67]=d[69]}])},function(a){return d[66]=d[67]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[67]=a[0],a})},function(a){return c.i64.eq(d[67],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[69]=a})},function(a){return d[68]=d[69]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[69]=a[0],a})},function(a){return d[70]=c.createArray(),d[72]=(d[70].push(d[69]),d[70]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[70]).then(function(a){return d[71]=a})},function(a){return d[68]=d[71]}])},function(a){return d[66]=d[68]}])},function(a){return d[65]=d[66]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[66]=a[0],a})},function(a){return c.i64.eq(d[66],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[68]=a})},function(a){return d[67]=d[68]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[68]=a[0],a})},function(a){return d[69]=c.createArray(),d[71]=(d[69].push(d[68]),d[69]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[69]).then(function(a){return d[70]=a})},function(a){return d[67]=d[70]}])},function(a){return d[65]=d[67]}])},function(a){return d[64]=d[65]}])},function(a){return d[63]=d[64]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2010]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[65]=a[0],a})},function(a){return c.i64.eq(d[65],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[67]=a})},function(a){return d[66]=d[67]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[67]=a[0],a})},function(a){return d[68]=c.createArray(),d[70]=(d[68].push(d[67]),d[68]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[68]).then(function(a){return d[69]=a})},function(a){return d[66]=d[69]}])},function(a){return d[64]=d[66]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2011]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[66]=a[0],a})},function(a){return c.i64.eq(d[66],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[68]=a})},function(a){return d[67]=d[68]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[68]=a[0],a})},function(a){return d[69]=c.createArray(),d[71]=(d[69].push(d[68]),d[69]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[69]).then(function(a){return d[70]=a})},function(a){return d[67]=d[70]}])},function(a){return d[65]=d[67]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2012]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[67]=a[0],a})},function(a){return c.i64.eq(d[67],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[69]=a})},function(a){return d[68]=d[69]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[69]=a[0],a})},function(a){return d[70]=c.createArray(),d[72]=(d[70].push(d[69]),d[70]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[70]).then(function(a){return d[71]=a})},function(a){return d[68]=d[71]}])},function(a){return d[66]=d[68]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2013]))?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[68]=a})},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[69]=a[0],a})},function(a){return c.i64.eq(d[69],d[4])?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[71]=a[0],a})},function(a){return c.i64.eq(d[71],d[4])?c.sequence([function(a){return d[73]=c.createArray(),d[75]=(d[73].push(d[68]),d[73]),b("LSLocalize").localizeV2Async(c.i64.cast([0,785694792]),d[73]).then(function(a){return d[74]=a})},function(a){return d[72]=d[74]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[73]=a[0],a})},function(a){return d[74]=c.createArray(),d[76]=(d[74].push(d[73]),d[74]),d[76]=(d[74].push(d[68]),d[74]),b("LSLocalize").localizeV2Async(c.i64.cast([0,2625447567]),d[74]).then(function(a){return d[75]=a})},function(a){return d[72]=d[75]}])},function(a){return d[70]=d[72]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[71]=a[0],a})},function(a){return c.i64.eq(d[71],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3982213805]),void 0).then(function(a){return d[73]=a})},function(a){return d[72]=d[73]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[73]=a[0],a})},function(a){return d[74]=c.createArray(),d[76]=(d[74].push(d[73]),d[74]),b("LSLocalize").localizeV2Async(c.i64.cast([0,464916028]),d[74]).then(function(a){return d[75]=a})},function(a){return d[72]=d[75]}])},function(a){return d[70]=d[72]}])},function(a){return d[67]=d[70]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2014]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[69]=a[0],a})},function(a){return c.i64.eq(d[69],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[71]=a})},function(a){return d[70]=d[71]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[71]=a[0],a})},function(a){return d[72]=c.createArray(),d[74]=(d[72].push(d[71]),d[72]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[72]).then(function(a){return d[73]=a})},function(a){return d[70]=d[73]}])},function(a){return d[68]=d[70]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3e3]))?c.sequence([function(a){return c.sequence([function(a){return void 0!==void 0?c.sequence([function(a){return void 0!==void 0?c.sequence([function(a){return c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[74]=a[0],a})},function(a){return c.i64.eq(d[74],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[76]=a})},function(a){return d[75]=d[76]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[76]=a[0],a})},function(a){return d[77]=c.createArray(),d[79]=(d[77].push(d[76]),d[77]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[77]).then(function(a){return d[78]=a})},function(a){return d[75]=d[78]}])},function(a){return d[73]=d[75]}])},function(a){return d[72]=d[73]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[73]=a[0],a})},function(a){return c.i64.eq(d[73],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[75]=a})},function(a){return d[74]=d[75]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[75]=a[0],a})},function(a){return d[76]=c.createArray(),d[78]=(d[76].push(d[75]),d[76]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[76]).then(function(a){return d[77]=a})},function(a){return d[74]=d[77]}])},function(a){return d[72]=d[74]}])},function(a){return d[71]=d[72]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[72]=a[0],a})},function(a){return c.i64.eq(d[72],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[74]=a})},function(a){return d[73]=d[74]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[74]=a[0],a})},function(a){return d[75]=c.createArray(),d[77]=(d[75].push(d[74]),d[75]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[75]).then(function(a){return d[76]=a})},function(a){return d[73]=d[76]}])},function(a){return d[71]=d[73]}])},function(a){return d[70]=d[71]}])},function(a){return d[69]=d[70]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3001]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[71]=a[0],a})},function(a){return c.i64.eq(d[71],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[73]=a})},function(a){return d[72]=d[73]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[73]=a[0],a})},function(a){return d[74]=c.createArray(),d[76]=(d[74].push(d[73]),d[74]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[74]).then(function(a){return d[75]=a})},function(a){return d[72]=d[75]}])},function(a){return d[70]=d[72]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3002]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[72]=a[0],a})},function(a){return c.i64.eq(d[72],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2973334239]),void 0).then(function(a){return d[74]=a})},function(a){return d[73]=d[74]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[74]=a[0],a})},function(a){return d[75]=c.createArray(),d[77]=(d[75].push(d[74]),d[75]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3616471048]),d[75]).then(function(a){return d[76]=a})},function(a){return d[73]=d[76]}])},function(a){return d[71]=d[73]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3003]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[73]=a[0],a})},function(a){return c.i64.eq(d[73],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2973334239]),void 0).then(function(a){return d[75]=a})},function(a){return d[74]=d[75]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[75]=a[0],a})},function(a){return d[76]=c.createArray(),d[78]=(d[76].push(d[75]),d[76]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3616471048]),d[76]).then(function(a){return d[77]=a})},function(a){return d[74]=d[77]}])},function(a){return d[72]=d[74]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3004]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[74]=a[0],a})},function(a){return c.i64.eq(d[74],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[76]=a})},function(a){return d[75]=d[76]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[76]=a[0],a})},function(a){return d[77]=c.createArray(),d[79]=(d[77].push(d[76]),d[77]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[77]).then(function(a){return d[78]=a})},function(a){return d[75]=d[78]}])},function(a){return d[73]=d[75]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3005]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[75]=a[0],a})},function(a){return c.i64.eq(d[75],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[77]=a})},function(a){return d[76]=d[77]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[77]=a[0],a})},function(a){return d[78]=c.createArray(),d[80]=(d[78].push(d[77]),d[78]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[78]).then(function(a){return d[79]=a})},function(a){return d[76]=d[79]}])},function(a){return d[74]=d[76]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3006]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[76]=a[0],a})},function(a){return c.i64.eq(d[76],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[78]=a})},function(a){return d[77]=d[78]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[78]=a[0],a})},function(a){return d[79]=c.createArray(),d[81]=(d[79].push(d[78]),d[79]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[79]).then(function(a){return d[80]=a})},function(a){return d[77]=d[80]}])},function(a){return d[75]=d[77]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3007]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[77]=a[0],a})},function(a){return c.i64.eq(d[77],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[79]=a})},function(a){return d[78]=d[79]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[79]=a[0],a})},function(a){return d[80]=c.createArray(),d[82]=(d[80].push(d[79]),d[80]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[80]).then(function(a){return d[81]=a})},function(a){return d[78]=d[81]}])},function(a){return d[76]=d[78]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3008]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[78]=a[0],a})},function(a){return c.i64.eq(d[78],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[80]=a})},function(a){return d[79]=d[80]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[80]=a[0],a})},function(a){return d[81]=c.createArray(),d[83]=(d[81].push(d[80]),d[81]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[81]).then(function(a){return d[82]=a})},function(a){return d[79]=d[82]}])},function(a){return d[77]=d[79]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3009]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[79]=a[0],a})},function(a){return c.i64.eq(d[79],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[81]=a})},function(a){return d[80]=d[81]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[81]=a[0],a})},function(a){return d[82]=c.createArray(),d[84]=(d[82].push(d[81]),d[82]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[82]).then(function(a){return d[83]=a})},function(a){return d[80]=d[83]}])},function(a){return d[78]=d[80]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3010]))?c.sequence([function(a){return c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[81]=a[0],a})},function(a){return c.i64.eq(d[81],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[83]=a})},function(a){return d[82]=d[83]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[83]=a[0],a})},function(a){return d[84]=c.createArray(),d[86]=(d[84].push(d[83]),d[84]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[84]).then(function(a){return d[85]=a})},function(a){return d[82]=d[85]}])},function(a){return d[80]=d[82]}])},function(a){return d[79]=d[80]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3011]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[81]=a[0],a})},function(a){return c.i64.eq(d[81],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[83]=a})},function(a){return d[82]=d[83]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[83]=a[0],a})},function(a){return d[84]=c.createArray(),d[86]=(d[84].push(d[83]),d[84]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[84]).then(function(a){return d[85]=a})},function(a){return d[82]=d[85]}])},function(a){return d[80]=d[82]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3012]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[82]=a[0],a})},function(a){return c.i64.eq(d[82],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[84]=a})},function(a){return d[83]=d[84]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[84]=a[0],a})},function(a){return d[85]=c.createArray(),d[87]=(d[85].push(d[84]),d[85]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[85]).then(function(a){return d[86]=a})},function(a){return d[83]=d[86]}])},function(a){return d[81]=d[83]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3013]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[83]=a[0],a})},function(a){return c.i64.eq(d[83],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[85]=a})},function(a){return d[84]=d[85]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[85]=a[0],a})},function(a){return d[86]=c.createArray(),d[88]=(d[86].push(d[85]),d[86]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[86]).then(function(a){return d[87]=a})},function(a){return d[84]=d[87]}])},function(a){return d[82]=d[84]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3014]))?c.sequence([function(a){return c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[85]=a[0],a})},function(a){return c.i64.eq(d[85],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[87]=a})},function(a){return d[86]=d[87]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[87]=a[0],a})},function(a){return d[88]=c.createArray(),d[90]=(d[88].push(d[87]),d[88]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[88]).then(function(a){return d[89]=a})},function(a){return d[86]=d[89]}])},function(a){return d[84]=d[86]}])},function(a){return d[83]=d[84]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3015]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[85]=a[0],a})},function(a){return c.i64.eq(d[85],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3471188061]),void 0).then(function(a){return d[87]=a})},function(a){return d[86]=d[87]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[87]=a[0],a})},function(a){return d[88]=c.createArray(),d[90]=(d[88].push(d[87]),d[88]),b("LSLocalize").localizeV2Async(c.i64.cast([0,2776822462]),d[88]).then(function(a){return d[89]=a})},function(a){return d[86]=d[89]}])},function(a){return d[84]=d[86]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3016]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[86]=a[0],a})},function(a){return c.i64.eq(d[86],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[88]=a})},function(a){return d[87]=d[88]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[88]=a[0],a})},function(a){return d[89]=c.createArray(),d[91]=(d[89].push(d[88]),d[89]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[89]).then(function(a){return d[90]=a})},function(a){return d[87]=d[90]}])},function(a){return d[85]=d[87]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3017]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[87]=a[0],a})},function(a){return c.i64.eq(d[87],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[89]=a})},function(a){return d[88]=d[89]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[89]=a[0],a})},function(a){return d[90]=c.createArray(),d[92]=(d[90].push(d[89]),d[90]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[90]).then(function(a){return d[91]=a})},function(a){return d[88]=d[91]}])},function(a){return d[86]=d[88]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3018]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[88]=a[0],a})},function(a){return c.i64.eq(d[88],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[90]=a})},function(a){return d[89]=d[90]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[90]=a[0],a})},function(a){return d[91]=c.createArray(),d[93]=(d[91].push(d[90]),d[91]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[91]).then(function(a){return d[92]=a})},function(a){return d[89]=d[92]}])},function(a){return d[87]=d[89]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3019]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[89]=a[0],a})},function(a){return c.i64.eq(d[89],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[91]=a})},function(a){return d[90]=d[91]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[91]=a[0],a})},function(a){return d[92]=c.createArray(),d[94]=(d[92].push(d[91]),d[92]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[92]).then(function(a){return d[93]=a})},function(a){return d[90]=d[93]}])},function(a){return d[88]=d[90]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3020]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[90]=a[0],a})},function(a){return c.i64.eq(d[90],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[92]=a})},function(a){return d[91]=d[92]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[92]=a[0],a})},function(a){return d[93]=c.createArray(),d[95]=(d[93].push(d[92]),d[93]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[93]).then(function(a){return d[94]=a})},function(a){return d[91]=d[94]}])},function(a){return d[89]=d[91]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3021]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[91]=a[0],a})},function(a){return c.i64.eq(d[91],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[93]=a})},function(a){return d[92]=d[93]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[93]=a[0],a})},function(a){return d[94]=c.createArray(),d[96]=(d[94].push(d[93]),d[94]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[94]).then(function(a){return d[95]=a})},function(a){return d[92]=d[95]}])},function(a){return d[90]=d[92]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3022]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[92]=a[0],a})},function(a){return c.i64.eq(d[92],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[94]=a})},function(a){return d[93]=d[94]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[94]=a[0],a})},function(a){return d[95]=c.createArray(),d[97]=(d[95].push(d[94]),d[95]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[95]).then(function(a){return d[96]=a})},function(a){return d[93]=d[96]}])},function(a){return d[91]=d[93]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3023]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[93]=a[0],a})},function(a){return c.i64.eq(d[93],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[95]=a})},function(a){return d[94]=d[95]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[95]=a[0],a})},function(a){return d[96]=c.createArray(),d[98]=(d[96].push(d[95]),d[96]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[96]).then(function(a){return d[97]=a})},function(a){return d[94]=d[97]}])},function(a){return d[92]=d[94]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3024]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[94]=a[0],a})},function(a){return c.i64.eq(d[94],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[96]=a})},function(a){return d[95]=d[96]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[96]=a[0],a})},function(a){return d[97]=c.createArray(),d[99]=(d[97].push(d[96]),d[97]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[97]).then(function(a){return d[98]=a})},function(a){return d[95]=d[98]}])},function(a){return d[93]=d[95]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3025]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[95]=a[0],a})},function(a){return c.i64.eq(d[95],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[97]=a})},function(a){return d[96]=d[97]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[97]=a[0],a})},function(a){return d[98]=c.createArray(),d[100]=(d[98].push(d[97]),d[98]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[98]).then(function(a){return d[99]=a})},function(a){return d[96]=d[99]}])},function(a){return d[94]=d[96]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3026]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[96]=a[0],a})},function(a){return c.i64.eq(d[96],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[98]=a})},function(a){return d[97]=d[98]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[98]=a[0],a})},function(a){return d[99]=c.createArray(),d[101]=(d[99].push(d[98]),d[99]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[99]).then(function(a){return d[100]=a})},function(a){return d[97]=d[100]}])},function(a){return d[95]=d[97]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3027]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[97]=a[0],a})},function(a){return c.i64.eq(d[97],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[99]=a})},function(a){return d[98]=d[99]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[99]=a[0],a})},function(a){return d[100]=c.createArray(),d[102]=(d[100].push(d[99]),d[100]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[100]).then(function(a){return d[101]=a})},function(a){return d[98]=d[101]}])},function(a){return d[96]=d[98]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3028]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[98]=a[0],a})},function(a){return c.i64.eq(d[98],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[100]=a})},function(a){return d[99]=d[100]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[100]=a[0],a})},function(a){return d[101]=c.createArray(),d[103]=(d[101].push(d[100]),d[101]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[101]).then(function(a){return d[102]=a})},function(a){return d[99]=d[102]}])},function(a){return d[97]=d[99]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3029]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[99]=a[0],a})},function(a){return c.i64.eq(d[99],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[101]=a})},function(a){return d[100]=d[101]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[101]=a[0],a})},function(a){return d[102]=c.createArray(),d[104]=(d[102].push(d[101]),d[102]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[102]).then(function(a){return d[103]=a})},function(a){return d[100]=d[103]}])},function(a){return d[98]=d[100]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3030]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[100]=a[0],a})},function(a){return c.i64.eq(d[100],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[102]=a})},function(a){return d[101]=d[102]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[102]=a[0],a})},function(a){return d[103]=c.createArray(),d[105]=(d[103].push(d[102]),d[103]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[103]).then(function(a){return d[104]=a})},function(a){return d[101]=d[104]}])},function(a){return d[99]=d[101]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3040]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[101]=a[0],a})},function(a){return c.i64.eq(d[101],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[103]=a})},function(a){return d[102]=d[103]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[103]=a[0],a})},function(a){return d[104]=c.createArray(),d[106]=(d[104].push(d[103]),d[104]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[104]).then(function(a){return d[105]=a})},function(a){return d[102]=d[105]}])},function(a){return d[100]=d[102]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3041]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[102]=a[0],a})},function(a){return c.i64.eq(d[102],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[104]=a})},function(a){return d[103]=d[104]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[104]=a[0],a})},function(a){return d[105]=c.createArray(),d[107]=(d[105].push(d[104]),d[105]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[105]).then(function(a){return d[106]=a})},function(a){return d[103]=d[106]}])},function(a){return d[101]=d[103]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3042]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[103]=a[0],a})},function(a){return c.i64.eq(d[103],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[105]=a})},function(a){return d[104]=d[105]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[105]=a[0],a})},function(a){return d[106]=c.createArray(),d[108]=(d[106].push(d[105]),d[106]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[106]).then(function(a){return d[107]=a})},function(a){return d[104]=d[107]}])},function(a){return d[102]=d[104]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3043]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[104]=a[0],a})},function(a){return c.i64.eq(d[104],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[106]=a})},function(a){return d[105]=d[106]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[106]=a[0],a})},function(a){return d[107]=c.createArray(),d[109]=(d[107].push(d[106]),d[107]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[107]).then(function(a){return d[108]=a})},function(a){return d[105]=d[108]}])},function(a){return d[103]=d[105]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3044]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[105]=a[0],a})},function(a){return c.i64.eq(d[105],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[107]=a})},function(a){return d[106]=d[107]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[107]=a[0],a})},function(a){return d[108]=c.createArray(),d[110]=(d[108].push(d[107]),d[108]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[108]).then(function(a){return d[109]=a})},function(a){return d[106]=d[109]}])},function(a){return d[104]=d[106]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4e3]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[106]=a[0],a})},function(a){return c.i64.eq(d[106],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[110]=a})},function(a){return d[107]=d[110]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[110]=a[0],a})},function(a){return d[107]=d[110]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[108]=a[0],a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1739999037]),void 0).then(function(a){return d[109]=a})},function(a){return d[105]=d[109]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4001]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[107]=a[0],a})},function(a){return c.i64.eq(d[107],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[111]=a})},function(a){return d[108]=d[111]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[111]=a[0],a})},function(a){return d[108]=d[111]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[109]=a[0],a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3373597599]),void 0).then(function(a){return d[110]=a})},function(a){return d[106]=d[110]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4002]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[108]=a[0],a})},function(a){return c.i64.eq(d[108],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[112]=a})},function(a){return d[109]=d[112]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[112]=a[0],a})},function(a){return d[109]=d[112]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[110]=a[0],a})},function(a){return c.i64.eq(d[110],d[4])?c.sequence([function(a){return d[112]=c.createArray(),d[114]=(d[112].push(d[109]),d[112]),b("LSLocalize").localizeV2Async(c.i64.cast([0,259473449]),d[112]).then(function(a){return d[113]=a})},function(a){return d[111]=d[113]}]):c.sequence([function(a){return d[112]=c.createArray(),d[114]=(d[112].push(d[109]),d[112]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1338912959]),d[112]).then(function(a){return d[113]=a})},function(a){return d[111]=d[113]}])},function(a){return d[107]=d[111]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4003]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[109]=a[0],a})},function(a){return c.i64.eq(d[109],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[113]=a})},function(a){return d[110]=d[113]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[113]=a[0],a})},function(a){return d[110]=d[113]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[111]=a[0],a})},function(a){return c.i64.eq(d[111],d[4])?c.sequence([function(a){return d[113]=c.createArray(),d[115]=(d[113].push(d[110]),d[113]),b("LSLocalize").localizeV2Async(c.i64.cast([0,812940701]),d[113]).then(function(a){return d[114]=a})},function(a){return d[112]=d[114]}]):c.sequence([function(a){return d[113]=c.createArray(),d[115]=(d[113].push(d[110]),d[113]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1099878966]),d[113]).then(function(a){return d[114]=a})},function(a){return d[112]=d[114]}])},function(a){return d[108]=d[112]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4004]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[110]=a[0],a})},function(a){return c.i64.eq(d[110],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[114]=a})},function(a){return d[111]=d[114]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[114]=a[0],a})},function(a){return d[111]=d[114]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[112]=a[0],a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3443782102]),void 0).then(function(a){return d[113]=a})},function(a){return d[109]=d[113]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4005]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[111]=a[0],a})},function(a){return c.i64.eq(d[111],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[115]=a})},function(a){return d[112]=d[115]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[115]=a[0],a})},function(a){return d[112]=d[115]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[113]=a[0],a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,618905030]),void 0).then(function(a){return d[114]=a})},function(a){return d[110]=d[114]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4006]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[112]=a[0],a})},function(a){return c.i64.eq(d[112],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[116]=a})},function(a){return d[113]=d[116]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[116]=a[0],a})},function(a){return d[113]=d[116]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[114]=a[0],a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2470414797]),void 0).then(function(a){return d[115]=a})},function(a){return d[111]=d[115]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4007]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[113]=a[0],a})},function(a){return c.i64.eq(d[113],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[117]=a})},function(a){return d[114]=d[117]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[117]=a[0],a})},function(a){return d[114]=d[117]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[115]=a[0],a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1306024833]),void 0).then(function(a){return d[116]=a})},function(a){return d[112]=d[116]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4008]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[114]=a[0],a})},function(a){return c.i64.eq(d[114],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[118]=a})},function(a){return d[115]=d[118]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[118]=a[0],a})},function(a){return d[115]=d[118]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[116]=a[0],a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3443782102]),void 0).then(function(a){return d[117]=a})},function(a){return d[113]=d[117]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4009]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[115]=a[0],a})},function(a){return c.i64.eq(d[115],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[119]=a})},function(a){return d[116]=d[119]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[119]=a[0],a})},function(a){return d[116]=d[119]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[117]=a[0],a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,618905030]),void 0).then(function(a){return d[118]=a})},function(a){return d[114]=d[118]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,5e3]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[116]=a[0],a})},function(a){return c.i64.eq(d[116],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[118]=a})},function(a){return d[117]=d[118]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[118]=a[0],a})},function(a){return d[119]=c.createArray(),d[121]=(d[119].push(d[118]),d[119]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[119]).then(function(a){return d[120]=a})},function(a){return d[117]=d[120]}])},function(a){return d[115]=d[117]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,6e3]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[117]=a[0],a})},function(a){return c.i64.eq(d[117],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[119]=a})},function(a){return d[118]=d[119]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[119]=a[0],a})},function(a){return d[120]=c.createArray(),d[122]=(d[120].push(d[119]),d[120]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[120]).then(function(a){return d[121]=a})},function(a){return d[118]=d[121]}])},function(a){return d[116]=d[118]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,7e3]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[118]=a[0],a})},function(a){return c.i64.eq(d[118],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2135145355]),void 0).then(function(a){return d[120]=a})},function(a){return d[119]=d[120]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[120]=a[0],a})},function(a){return d[121]=c.createArray(),d[123]=(d[121].push(d[120]),d[121]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3603511704]),d[121]).then(function(a){return d[122]=a})},function(a){return d[119]=d[122]}])},function(a){return d[117]=d[119]}]):c.resolve(d[117]=void 0)},function(a){return d[116]=d[117]}])},function(a){return d[115]=d[116]}])},function(a){return d[114]=d[115]}])},function(a){return d[113]=d[114]}])},function(a){return d[112]=d[113]}])},function(a){return d[111]=d[112]}])},function(a){return d[110]=d[111]}])},function(a){return d[109]=d[110]}])},function(a){return d[108]=d[109]}])},function(a){return d[107]=d[108]}])},function(a){return d[106]=d[107]}])},function(a){return d[105]=d[106]}])},function(a){return d[104]=d[105]}])},function(a){return d[103]=d[104]}])},function(a){return d[102]=d[103]}])},function(a){return d[101]=d[102]}])},function(a){return d[100]=d[101]}])},function(a){return d[99]=d[100]}])},function(a){return d[98]=d[99]}])},function(a){return d[97]=d[98]}])},function(a){return d[96]=d[97]}])},function(a){return d[95]=d[96]}])},function(a){return d[94]=d[95]}])},function(a){return d[93]=d[94]}])},function(a){return d[92]=d[93]}])},function(a){return d[91]=d[92]}])},function(a){return d[90]=d[91]}])},function(a){return d[89]=d[90]}])},function(a){return d[88]=d[89]}])},function(a){return d[87]=d[88]}])},function(a){return d[86]=d[87]}])},function(a){return d[85]=d[86]}])},function(a){return d[84]=d[85]}])},function(a){return d[83]=d[84]}])},function(a){return d[82]=d[83]}])},function(a){return d[81]=d[82]}])},function(a){return d[80]=d[81]}])},function(a){return d[79]=d[80]}])},function(a){return d[78]=d[79]}])},function(a){return d[77]=d[78]}])},function(a){return d[76]=d[77]}])},function(a){return d[75]=d[76]}])},function(a){return d[74]=d[75]}])},function(a){return d[73]=d[74]}])},function(a){return d[72]=d[73]}])},function(a){return d[71]=d[72]}])},function(a){return d[70]=d[71]}])},function(a){return d[69]=d[70]}])},function(a){return d[68]=d[69]}])},function(a){return d[67]=d[68]}])},function(a){return d[66]=d[67]}])},function(a){return d[65]=d[66]}])},function(a){return d[64]=d[65]}])},function(a){return d[63]=d[64]}])},function(a){return d[62]=d[63]}])},function(a){return d[61]=d[62]}])},function(a){return d[60]=d[61]}])},function(a){return d[59]=d[60]}])},function(a){return d[58]=d[59]}])},function(a){return d[57]=d[58]}])},function(a){return d[56]=d[57]}])},function(a){return d[55]=d[56]}])},function(a){return d[54]=d[55]}])},function(a){return d[53]=d[54]}])},function(a){return d[52]=d[53]}])},function(a){return d[51]=d[52]}])},function(a){return d[50]=d[51]}])},function(a){return d[49]=d[50]}])},function(a){return d[48]=d[49]}])},function(a){return d[47]=d[48]}])},function(a){return d[46]=d[47]}])},function(a){return d[45]=d[46]}])},function(a){return d[44]=d[45]}])},function(a){return d[43]=d[44]}])},function(a){return d[42]=d[43]}])},function(a){return d[41]=d[42]}])},function(a){return d[40]=d[41]}])},function(a){return d[39]=d[40]}])},function(a){return d[38]=d[39]}])},function(a){return d[37]=d[38]}])},function(a){return d[36]=d[37]}])},function(a){return d[35]=d[36]}])},function(a){return d[34]=d[35]}])},function(a){return d[33]=d[34]}])},function(a){return d[32]=d[33]}])},function(a){return d[31]=d[32]}])},function(a){return d[27]=d[31]}]):c.resolve(d[27]=void 0)},function(a){return d[25]===void 0&&c.i64.eq(d[19],c.i64.cast([0,7]))&&d[27]!==void 0?d[25]=d[27]:0,c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[28]=a[0],a})},function(a){return c.i64.eq(d[28],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[30]=a})},function(a){return d[29]=d[30]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[30]=a[0],a})},function(a){return d[31]=c.createArray(),d[33]=(d[31].push(d[30]),d[31]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[31]).then(function(a){return d[32]=a})},function(a){return d[29]=d[32]}])},function(a){return d[18]=d[25]==null?d[29]:d[25]}]):c.sequence([function(a){return d[19]=!0,c.forEach(c.filter(c.db.table(16).fetch([[[d[5],d[9]]]]),function(a){return c.i64.eq(a.threadKey,d[5])&&c.i64.eq(c.i64.cast([0,0]),d[8])&&a.messageId===d[9]}),function(a){a=a.item;return c.i64.eq(a.attachmentType,c.i64.cast([0,2]))?0:d[19]=!1})},function(a){return d[19]?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[21]=a[0],a})},function(a){return c.i64.eq(d[21],d[4])?c.sequence([function(a){return d[23]=c.createArray(),d[25]=(d[23].push(d[16]),d[23]),b("LSLocalize").localizeV2Async(c.i64.cast([0,705614308]),d[23]).then(function(a){return d[24]=a})},function(a){return d[22]=d[24]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[23]=a[0],a})},function(a){return d[24]=c.createArray(),d[26]=(d[24].push(d[23]),d[24]),d[26]=(d[24].push(d[16]),d[24]),b("LSLocalize").localizeV2Async(c.i64.cast([0,313217698]),d[24]).then(function(a){return d[25]=a})},function(a){return d[22]=d[25]}])},function(a){return d[20]=d[22]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[21]=a[0],a})},function(a){return c.i64.eq(d[21],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3558654267]),void 0).then(function(a){return d[23]=a})},function(a){return d[22]=d[23]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[23]=a[0],a})},function(a){return d[24]=c.createArray(),d[26]=(d[24].push(d[23]),d[24]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3422266740]),d[24]).then(function(a){return d[25]=a})},function(a){return d[22]=d[25]}])},function(a){return d[20]=d[22]}])},function(a){return d[18]=d[20]}])},function(a){return d[17]=d[18]}])},function(a){return d[15]=d[17]}])},function(a){return d[14]=d[15]}])},function(a){return d[13]=d[14]}])},function(a){return d[12]=d[13]}])},function(a){return d[11]=d[12]}])},function(a){return d[10]=d[11]}])},function(a){return d[2]=d[10]}])},function(e){return c.storedProcedure(b("LSUpdateThreadSnippet"),a[0],d[2],d[3],d[4],c.like(d[2],"%\udb80\udc00%"),void 0,void 0,!1)}]))})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxUpdateThreadSnippetFromLastMessageV2StoredProcedure";a.__tables__=["threads","messages","attachments"];e.exports=a}),null);
__d("LSUpdateThreadSnippetFromLastMessageV2StoredProcedure",["LSSynchronousPromise","LSUpdateThreadSnippetFromLastMessageV2","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSUpdateThreadSnippetFromLastMessageV2"),e.threadKey);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MessageThreadReadState",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({KEEP_AS_IS:3,MARK_READ:1,MARK_UNREAD:2});b=a;f["default"]=b}),66);
__d("PolarisDesktopPostLoadingShimmer.react",["cx","PolarisIGTheme.react","PolarisReactRedux.react","PolarisSizing","polarisPostModalHelpers","polarisPostSelectors","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function k(a){var b,c=d("react-compiler-runtime").c(12),e=a.dimensions,f=a.postId,g=a.viewportHeight;a=a.viewportWidth;var h=a!=null&&a>d("PolarisSizing").MEDIUM_SCREEN_MIN;b=(b=d("PolarisReactRedux.react").useSelector(function(a){return d("polarisPostSelectors").getPostOrNullById(a,f!=null?f:"")}))==null?void 0:b.isSponsored;g=g!=null?g:0;a=a!=null?a:0;var i;c[0]!==e||c[1]!==b||c[2]!==h||c[3]!==g||c[4]!==a?(i=d("polarisPostModalHelpers").getMediaContainerProps({dimensions:e,hasFooter:b,hasSidebarInRedesign:h,viewportHeight:g,viewportWidth:a}),c[0]=e,c[1]=b,c[2]=h,c[3]=g,c[4]=a,c[5]=i):i=c[5];b=i;g="_aas3"+(h&&e!=null&&e.width>=e.height?" _aas4":"");c[6]!==e?(a=j.jsx(l,{dimensions:e}),c[6]=e,c[7]=a):a=c[7];c[8]!==b||c[9]!==g||c[10]!==a?(i=j.jsx("div",babelHelpers["extends"]({className:g},b,{children:a})),c[8]=b,c[9]=g,c[10]=a,c[11]=i):i=c[11];return i}function l(a){a=a.dimensions;var b={},c=d("PolarisIGTheme.react").useTheme();a&&(b.paddingBottom=d("PolarisSizing").getHeightPercent(a)+"%");return j.jsx("div",{className:"_aas5"+(c.getTheme()===d("PolarisIGTheme.react").IGTheme.Dark?" _aas6":""),style:b})}l.displayName=l.name+" [from "+f.id+"]";function m(a){var b=d("react-compiler-runtime").c(5),c=a.dimensions,e=a.postId,f=a.viewportHeight;a=a.viewportWidth;var g;b[0]!==c||b[1]!==e||b[2]!==f||b[3]!==a?(g=j.jsx(k,{dimensions:c,postId:e,viewportHeight:f,viewportWidth:a}),b[0]=c,b[1]=e,b[2]=f,b[3]=a,b[4]=g):g=b[4];return g}function a(a){var b=d("react-compiler-runtime").c(16),c=a.dimensions,e=a.postId,f=a.viewportHeight;a=a.viewportWidth;var g;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(g={},b[0]=g):g=b[0];g=g;if(c){var h;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(h={flexDirection:"row"},b[1]=h):h=b[1];g=h}b[2]!==c||b[3]!==e||b[4]!==f||b[5]!==a?(h=j.jsx(m,{dimensions:c,postId:e,viewportHeight:f,viewportWidth:a}),b[2]=c,b[3]=e,b[4]=f,b[5]=a,b[6]=h):h=b[6];b[7]===Symbol["for"]("react.memo_cache_sentinel")?(c=j.jsx("div",{className:"_aasa"}),b[7]=c):c=b[7];b[8]===Symbol["for"]("react.memo_cache_sentinel")?(e=j.jsx("div",{className:"_aasc"}),b[8]=e):e=b[8];b[9]===Symbol["for"]("react.memo_cache_sentinel")?(f=j.jsxs("div",{className:"_aas9",children:[c,j.jsxs("div",{className:"_aasb",children:[e,j.jsx("div",{className:"_aasd"})]})]}),b[9]=f):f=b[9];b[10]===Symbol["for"]("react.memo_cache_sentinel")?(a=j.jsx("div",{className:"_aasf"}),b[10]=a):a=b[10];b[11]===Symbol["for"]("react.memo_cache_sentinel")?(c=j.jsx("div",{className:"_aasg"}),b[11]=c):c=b[11];b[12]===Symbol["for"]("react.memo_cache_sentinel")?(e=j.jsxs("div",{className:"_aas8",children:[f,j.jsxs("div",{className:"_aase",children:[a,c,j.jsx("div",{className:"_aash"})]})]}),b[12]=e):e=b[12];b[13]!==g||b[14]!==h?(f=j.jsxs("div",{className:"_aas7",style:g,children:[h,e]}),b[13]=g,b[14]=h,b[15]=f):f=b[15];return f}g.SIDEBAR_VARIANT_CUTOFF=d("PolarisSizing").MEDIUM_SCREEN_MIN;g.DesktopPostLoadingShimmer=a}),98);
__d("PolarisPostModalLoading.react",["IGDSBox.react","IGDSSpinner.react","PolarisDesktopPostLoadingShimmer.react","PolarisPostConstants","PolarisUA","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(6),e=a.dimensions,f=a.postId,g=a.viewportHeight;a=a.viewportWidth;if(d("PolarisUA").isDesktop()&&a>d("PolarisPostConstants").SIDEBAR_VARIANT_CUTOFF){var h;b[0]!==e||b[1]!==f||b[2]!==g||b[3]!==a?(h=i.jsx(d("PolarisDesktopPostLoadingShimmer.react").DesktopPostLoadingShimmer,{dimensions:e,postId:f,viewportHeight:g,viewportWidth:a}),b[0]=e,b[1]=f,b[2]=g,b[3]=a,b[4]=h):h=b[4];return h}b[5]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsx(c("IGDSBox.react"),{alignItems:"center",position:"relative",children:i.jsx(c("IGDSSpinner.react"),{color:"light",size:"medium"})}),b[5]=e):e=b[5];return e}g["default"]=a}),98);
__d("PolarisPostModalPaginationArrow.react",["cx","IGDSChevronIcon.react","Locale","PolarisGenericStrings","PolarisIGCoreSVGIconButton.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(9),e=a.direction;a=a.onClick;var f=c("Locale").isRTL(),g=e==="back"&&!f||e==="next"&&f;f=e==="next"&&!f||e==="back"&&f;f=(g?"_aaqf":"")+(f?" _aaqg":"")+" _aaqh";g=g?d("PolarisGenericStrings").GO_BACK:d("PolarisGenericStrings").NEXT;var h;b[0]!==e||b[1]!==g?(h=j.jsx(c("IGDSChevronIcon.react"),{alt:g,color:"web-always-black",direction:e,size:16}),b[0]=e,b[1]=g,b[2]=h):h=b[2];b[3]!==a||b[4]!==h?(e=j.jsx(c("PolarisIGCoreSVGIconButton.react"),{onClick:a,children:h}),b[3]=a,b[4]=h,b[5]=e):e=b[5];b[6]!==f||b[7]!==e?(g=j.jsx("div",{className:f,children:e}),b[6]=f,b[7]=e,b[8]=g):g=b[8];return g}g["default"]=a}),98);
__d("PolarisPostModalInternal.react",["cx","IGCoreModal.react","IGCoreModalLocation.react","PolarisAutoplayViewpointManager.react","PolarisDOMListener.react","PolarisIsLoggedIn","PolarisLogger","PolarisPostActionLoadPost","PolarisPostModalLoading.react","PolarisPostModalPaginationArrow.react","PolarisPostModalRenderingContext.react","PolarisReactRedux.react","PolarisRoutes","PolarisThreadedCommentActions","getPolarisKeyCommandConfig","nullthrows","polarisPostModalHelpers","polarisPostSelectors","react","useGlobalKeyCommands","usePolarisDisplayProperties"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useCallback,l=b.useEffect,m=b.useMemo,n=b.useRef,o={isInModal:!0};function a(a){var b=a.analyticsContext,e=a.children,f=a.combinedPostIds,g=f===void 0?[]:f;f=a["data-testid"];f=a.dimensions;var h=a.mediaLinkBuilder,i=a.modalEntryPath;i=i===void 0?d("PolarisRoutes").FEED_PATH:i;var p=a.onClose,q=a.onlyReplaceModalHistory,r=a.onOpen,s=a.postCode,t=a.postId,u=a.postModalMediaUFI,v=a.showLoadingShimmer,w=a.skipMediaInfo,x=d("PolarisReactRedux.react").useDispatch(),y=n(null);a=d("PolarisReactRedux.react").useSelector(function(a){return d("polarisPostSelectors").getAreCommentsFetched(a,t)});var z=d("PolarisReactRedux.react").useSelector(function(a){return d("polarisPostSelectors").getIsPostDataFetched(a,s)}),A=d("PolarisIsLoggedIn").isLoggedIn()===!0?z:z&&a;z=k(function(){A||(w===!0?x(d("PolarisThreadedCommentActions").requestInitialComments(t)):x(d("PolarisPostActionLoadPost").loadPost(s,u!=null?u:t)))},[w,A,x,s,u,t]);l(z,[z]);var B=g.findIndex(function(a){return a===t}),C=k(function(a){return a>=0&&a<g.length},[g.length]),D=k(function(a){a=B+a;C(a)&&r&&r(c("nullthrows")(g[a]),a,u)},[g,B,C,r,u]),E=k(function(a){p(a),y.current!=null&&y.current.returnToEntry()},[p]);a=m(function(){return[d("getPolarisKeyCommandConfig").getPolarisKeyCommandConfig("postModal","navigateLeft",function(){D(d("polarisPostModalHelpers").LEFT_DELTA)}),d("getPolarisKeyCommandConfig").getPolarisKeyCommandConfig("postModal","navigateRight",function(){D(d("polarisPostModalHelpers").RIGHT_DELTA)}),d("getPolarisKeyCommandConfig").getPolarisKeyCommandConfig("postModal","exit",function(){E()})]},[D,E]);c("useGlobalKeyCommands")(a);z=function(a){return function(b){if(b.metaKey||b.ctrlKey)return;b.preventDefault();b.stopPropagation();D(a);d("PolarisLogger").logAction("postModalArrowClick")}};a=k(function(){var a=d("polarisPostModalHelpers").getModalPageIdFromAnalyticsContext(b);a.length>0&&d("PolarisLogger").logPageView(a,{page_id:a,post_id:t})},[b,t]);var F=C(B-1),G=C(B+1);F=j.jsx("div",{className:"_aeap _aeaq",children:j.jsxs("div",{className:"_aear",children:[F&&j.jsx(c("PolarisPostModalPaginationArrow.react"),{direction:"back",onClick:z(d("polarisPostModalHelpers").LEFT_DELTA)}),G&&j.jsx(c("PolarisPostModalPaginationArrow.react"),{direction:"next",onClick:z(d("polarisPostModalHelpers").RIGHT_DELTA)})]})});G=c("usePolarisDisplayProperties")();z=G.viewportHeight;G=G.viewportWidth;v=j.jsx(j.Fragment,{children:!A&&v?j.jsx(c("PolarisPostModalLoading.react"),{dimensions:f,postId:t,viewportHeight:z,viewportWidth:G}):e});f=j.jsx(c("IGCoreModal.react"),{aboveContent:F,backgroundColor:"DEPRECATED_transparent",closeButtonPosition:"background","data-testid":void 0,onClose:E,size:"fullscreenResponsive",children:v});return j.jsxs(j.Fragment,{children:[j.jsx(d("PolarisAutoplayViewpointManager.react").FullscreenAutoplayViewpointClipRegion,{id:"postModal"}),j.jsx(c("IGCoreModalLocation.react"),{entryPath:i,nativeReplace:!0,onlyReplaceModalHistory:q,onUpdateHistory:a,pageID:"postPage",parentModule:"PolarisPostModal",path:h(s),ref:y}),j.jsx(c("PolarisDOMListener.react"),{event:"popstate",handler:E,once:!0,target:window}),j.jsx(d("PolarisPostModalRenderingContext.react").PolarisPostModalRenderingContext.Provider,{value:o,children:f})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisProfileTabTaggedPhotosConstants",[],(function(a,b,c,d,e,f){"use strict";a="tagged";f.TAGGED_TAB_ID=a}),66);
__d("PolarisInstantPostModal.react",["PolarisPostModalInternal.react","PolarisProfileTabTaggedPhotosConstants","polarisPostSelectors","react","react-compiler-runtime","usePolarisSelector"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b,e=d("react-compiler-runtime").c(5),f=!1;b=((b=a.modalEntryPath)==null?void 0:b.endsWith("/"+d("PolarisProfileTabTaggedPhotosConstants").TAGGED_TAB_ID+"/"))===!0;var g;e[0]!==a.postId?(g=function(b){return d("polarisPostSelectors").getPostOrNullById(b,a.postId)},e[0]=a.postId,e[1]=g):g=e[1];g=c("usePolarisSelector")(g);(g==null||b&&g.isVideo===!0)&&(f=!0);e[2]!==a||e[3]!==f?(b=i.jsx(c("PolarisPostModalInternal.react"),babelHelpers["extends"]({},a,{showLoadingShimmer:f})),e[2]=a,e[3]=f,e[4]=b):b=e[4];return b}g["default"]=a}),98);
__d("PolarisPostModal.react",["PolarisPostModalInternal.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(2),e;b[0]!==a?(e=i.jsx(c("PolarisPostModalInternal.react"),babelHelpers["extends"]({},a,{showLoadingShimmer:!0})),b[0]=a,b[1]=e):e=b[1];return e}g["default"]=a}),98);
__d("issueSendInstamadilloXMAReceiverFetch",["IGDBridgedAPI"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("IGDBridgedAPI").sendXmaReceiverFetch(a)}g["default"]=a}),98);
__d("instamadilloBumpThread",["FBLogger","I64","LSBumpThreadStoredProcedure","LSFactory","LSIntEnum","MAWAuthor","MAWCurrentUser","MAWJids","MessageThreadReadState","WAJids","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=d("MAWAuthor").getAuthorUserJid(b.author);if(f==null)return c("FBLogger")("igd_web").warn("Skip instamadilloBumpThread: a message cannot exist without an author");f=(h||(h=d("I64"))).of_string(d("WAJids").userIdFromJid(f));b=d("MAWJids").convertChatJidToIntJid(b.chat);var g=(yield a.threads.get(b));f=h.equal(f,h.of_string(d("MAWCurrentUser").getID()));f=(i||(i=d("LSIntEnum"))).ofNumber(f?c("MessageThreadReadState").KEEP_AS_IS:c("MessageThreadReadState").MARK_UNREAD);g=g==null?void 0:g.lastActivityTimestampMs;g!=null&&(h||(h=d("I64"))).ge(e,g)&&(yield c("LSBumpThreadStoredProcedure")(c("LSFactory")(a),{bumpTimestampMs:e,readStateEffect:f,threadKey:b}))});return j.apply(this,arguments)}g["default"]=a}),98);
__d("instamadilloReplyMessageUtils",["InstamadilloMessageIdUtils","InstamadilloReplyMessageParams","LSFactory","LSFetchInstamadilloMessage","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.messages.index("replySourceIdMessageID")).getKeyRange(c)));e=e.map(function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){yield j(a,b,c)});return function(a){return d.apply(this,arguments)}}());yield (h||(h=b("Promise"))).all(e)});return i.apply(this,arguments)}function j(a,b,c){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){c=(yield d("InstamadilloReplyMessageParams").getReplyMessageParams(b.threadKey,b.senderId,c,a));yield a.messages.put(babelHelpers["extends"]({},b,{},c))});return k.apply(this,arguments)}function e(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=e==null?void 0:e.repliedToMessageOtid;e=e==null?void 0:e.repliedToMessageWaServerTimeSec;if(f==null||e==null)return;var g=d("InstamadilloMessageIdUtils").toInstamadilloMessageId(b,f);g=(yield a.messages.index("messageId").get(g));if(g!=null)return;yield c("LSFetchInstamadilloMessage")(b,f,e,c("LSFactory")(a))});return l.apply(this,arguments)}g.updateAllRepliesTxn=a;g.fetchReplySourceMessage=e}),98);
__d("handleInstamadilloReceiverFetchContent",["I64","IGDXMAAttachmentUtil","InstamadilloMessageFactory","InstamadilloTextMessageUtils","LSAuthorityLevel","LSFactory","LSIntEnum","LSUpdateThreadSnippetFromLastMessageV2StoredProcedure","LSVerifyThreadRowExistsV2StoredProcedure","MAWExternalId","MNLSXMALayoutType","MessagingAttachmentType","WAResultOrError","asyncToGeneratorRuntime","instamadilloBumpThread","instamadilloReplyMessageUtils","isStringNullOrEmpty"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b,c,d,e,f,g,h,i){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,j,k,l,m){j=(yield d("InstamadilloMessageFactory").createBaseMessageForProtocolMsgId(a,b,e,j));if(j==null)return d("WAResultOrError").makeResult({reason:"cannot_create_base_message",result:"skip"});var n=j.threadKey;g=JSON.stringify(g);yield c("LSVerifyThreadRowExistsV2StoredProcedure")(c("LSFactory")(a),{authorityLevel:(h||(h=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE),syncGroup:(i||(i=d("I64"))).of_int32(1),threadKey:n,threadType:i.of_int32(1)});var o=8;c("isStringNullOrEmpty")(f.text)||(o+=1);yield a.messages.put(babelHelpers["extends"]({},j,{displayedContentTypes:i.of_int32(o),text:f.text,textHasLinks:d("InstamadilloTextMessageUtils").textHasLinks(f.text),xmaReceiverFetchParams:g},m));var p;o=l==null?void 0:l.type_;if(o!=null){f=(i||(i=d("I64"))).of_string(d("MAWExternalId").generateExternalId());p=babelHelpers["extends"]({},d("InstamadilloMessageFactory").createBaseAttachmentCta(b),{ctaId:f,type_:o},l);yield a.attachment_ctas.put(p)}yield a.attachments.put(babelHelpers["extends"]({},d("InstamadilloMessageFactory").createBaseAttachmentWithProtocolMsgId(b,e),{attachmentType:h.ofNumber(c("MessagingAttachmentType").XMA),defaultCtaId:(g=p)==null?void 0:g.ctaId,defaultCtaTitle:(m=p)==null?void 0:m.title,defaultCtaType:(f=p)==null?void 0:f.type_,faviconUrl:d("IGDXMAAttachmentUtil").DEFAULT_PROFILE_URL,hasXma:!0,isSharable:!0,xmaLayoutType:h.ofNumber(c("MNLSXMALayoutType").SINGLE)},k));yield d("instamadilloReplyMessageUtils").updateAllRepliesTxn(a,j.messageId);yield c("instamadilloBumpThread")(a,b,e);yield c("LSUpdateThreadSnippetFromLastMessageV2StoredProcedure")(c("LSFactory")(a),{threadKey:n});return d("WAResultOrError").makeResult({result:"handled"})});return j.apply(this,arguments)}g["default"]=a}),98);
__d("renderInstamadilloOptimisticXmaReceiverFetch",["I64","MAWCurrentUser","OfflineThreadingId","Promise","WAJids","WAStanzaUtils","asyncToGeneratorRuntime","handleInstamadilloReceiverFetchContent","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("LSDatabaseSingletonLazyWrapper").__setRef("renderInstamadilloOptimisticXmaReceiverFetch");function a(a,b,c,d,e,f){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,k,l){var m=d("OfflineThreadingId").createOfflineThreadingID(),n=d("WAJids").toMsgrUserJid(d("MAWCurrentUser").getID()),o=(i||(i=d("I64"))).of_float(Date.now()),p={author:n,chat:d("WAJids").toMsgrUserJid(a),externalId:d("WAStanzaUtils").toStanzaId(m)};n=(yield j.load());a=(yield n());yield a.runInTransaction(function(a){return c("handleInstamadilloReceiverFetchContent")(a,p,o,e,f,{},g,k,l)},"readwrite");return(h||(h=b("Promise"))).resolve(m)});return k.apply(this,arguments)}g["default"]=a}),98);
__d("getSendPostToInstamadilloRecipient",["fbt","I64","IGDDataclassTypes.flow","LSAuthorityLevel","LSMessageReplySourceTypeV2","LSMessageSendStatus","asyncToGeneratorRuntime","issueSendInstamadilloXMAReceiverFetch","renderInstamadilloOptimisticXmaReceiverFetch"],(function(a,b,c,d,e,f,g,h){"use strict";var i;function a(a,e,f,g,j){var k={__typename:"XMSGIgReceiverFetchXmaFeedFetchParams",media_igid:a};e={__typename:"XMSGIgXmaContentRefDataclass",action_type:d("IGDDataclassTypes.flow").XmsgIgXmaActionType.Share,content_type:d("IGDDataclassTypes.flow").XmsgIgReceiverFetchContentType.Feed,fetch_params:k,owner_fbid:e,target_url:g,username:f};var l={contentRef:JSON.stringify(e)},m={authorityLevel:(i||(i=d("I64"))).of_int32(c("LSAuthorityLevel").OPTIMISTIC),isForwarded:j,replySourceTypeV2:j===!0?(i||(i=d("I64"))).of_int32(c("LSMessageReplySourceTypeV2").FORWARD):void 0,sendStatus:i.of_int32(c("LSMessageSendStatus").SENDING_TO_SERVER),sendStatusV2:i.of_int32(1)},n={actionUrl:g,nativeUrl:g,targetId:i.of_string(a),type_:"igd_web_post_share"},o={authorityLevel:i.of_int32(c("LSAuthorityLevel").OPTIMISTIC),subtitleText:h._(/*BTDS*/"Post").toString(),titleText:f};return function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,d,e,f,g){try{var h=(yield c("renderInstamadilloOptimisticXmaReceiverFetch")(a,l,k,o,n,m));yield c("issueSendInstamadilloXMAReceiverFetch")({comment:e,isDisappearingModeSettingOn:b,offlineThreadingId:h,openEb:d,receiverFetchXma:JSON.stringify(l),threadKey:a});f==null?void 0:f(a)}catch(b){g==null?void 0:g(b,a)}});return function(b,c,d,e,f,g){return a.apply(this,arguments)}}()}g["default"]=a}),226);/*FB_PKG_DELIM*/
__d("DisappearingMessagesMode",[],(function(a,b,c,d,e,f){a=Object.freeze({OFF:0,ON:1,OPEN_ON_DEPRECATED_DO_NOT_USE:2});f["default"]=a}),66);
__d("MAWBridge",["WABridge"],(function(a,b,c,d,e,f,g){"use strict";function a(){return d("WABridge").getBridge()}g.getBridge=a}),98);
__d("IIGDAPI",["MAWBridge"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return function(){for(var b=arguments.length,c=new Array(b),e=0;e<b;e++)c[e]=arguments[e];return d("MAWBridge").getBridge().sendAndReceive("backend","igdapi",{args:c,type:a})}}g.makeBridgedApi=a}),98);
__d("IGDBridgedAPI",["IIGDAPI"],(function(a,b,c,d,e,f,g){"use strict";b={33:(a=d("IIGDAPI")).makeBridgedApi("33"),46:a.makeBridgedApi("46"),sendEditMessage:a.makeBridgedApi("sendEditMessage"),sendMediaMessage:a.makeBridgedApi("sendMediaMessage"),sendOrRemoveReaction:a.makeBridgedApi("sendOrRemoveReaction"),sendXmaReceiverFetch:a.makeBridgedApi("sendXmaReceiverFetch")};c=b;g["default"]=c}),98);
__d("MAWUnsafeCoerce",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a}f.unsafeCoerce=a}),66);
__d("WAAssertUnreachable",["err"],(function(a,b,c,d,e,f,g){"use strict";function a(a){throw c("err")("Impossible value, the default statement should never be reached for value: "+a)}g["default"]=a}),98);
__d("WAJids",["WAAssertUnreachable","err"],(function(a,b,c,d,e,f,g){"use strict";var h=0,i="@me",j="@system",k="status@broadcast",aa="0@s.whatsapp.net",l="call",m="@g.us",n=/^([1-9][0-9]{0,19}|(?!10)[1-9][0-9]{4,19}-[1-9][0-9]{9})@g.us$/,ba="@call",o="@msgr",ca="msgr",p="@interop",da="interop",q=/^([1-9][0-9]{0,2}-[1-9][0-9]{0,14}(:[0])?)@interop$/,r=/^([1-9][0-9]{0,2}-[1-9][0-9]{0,14}(:[0])?)@interop$/,s=/^([1-9][0-9]{0,19}(:[1-9][0-9]{0,2})?)@msgr$/,t=/^([1-9][0-9]{0,19})@msgr$/,u=/^([1-9][0-9]{0,19})(:0)?@msgr$/,ea="@s.whatsapp.net",fa="s.whatsapp.net",v="@s.whatsapp.net",w="s.whatsapp.net",x="lid",y="@newsletter",z=/^([1-9][0-9]{0,19})@newsletter$/,A=/^(0|((?!10)[1-9][0-9]{4,19}(\.[0-9]{1,2})?(:[0-9]{1,2})))@s.whatsapp.net$/,B=/^(0|((?!10)[1-9][0-9]{4,19})(\.[0-9]{1,2})?)@s.whatsapp.net$/,C="@lid",ga="lid",D=/^([1-9][0-9]{0,14})@lid$/,E=/^([1-9][0-9]{0,14}(:[0-9]{1,2})?)@lid$/,ha="@broadcast",F=/^(status|location|[1-9][0-9]{0,19})@broadcast$/,G=/^([0-9a-fA-F]{18,32})@call$/,H="@hosted",I="hosted",J=/^(((?!10)[1-9][0-9]{4,19})):99@hosted$/,K="@hosted.lid",ia="hosted.lid",L=/^([1-9][0-9]{0,14}):99@hosted.lid$/,M="@bot",ja=/^[1-9][0-9]{0,19}(:0)?@bot$/,ka="16505361212"+v,la=/([0-9a-zA-Z-:]+)@(g\.us|call|s\.whatsapp\.net|broadcast|msgr|lid)/g;function a(a){return""+a+v}function b(a){return""+a+C}function N(a){return""+a+o}function d(a){return a.endsWith(m)?a:""+a+m}function e(a){return a.endsWith(y)?a:""+a+y}function f(a){return a.endsWith(H)?a:""+a+H}function ma(a){return a.endsWith(K)?a:""+a+K}function na(){return m}function O(a){if(a.endsWith(v))return a.slice(0,-v.length);else if(a.endsWith(o))return a.slice(0,-o.length);else if(a.endsWith(p))return a.slice(0,-p.length);else if(a.endsWith(C))return a.slice(0,-C.length);else if(a.endsWith(M))return a.slice(0,-M.length);else throw c("err")('userIdFromJid called with non-user jid "'+a+'"')}function oa(a,b){return Y(O(a)+":"+b+v)}function pa(a,b){return Z(O(a)+":"+b+o)}function qa(a,b){return zb(P(a)+":"+b+C)}function ra(a,b){return X(O(a)+":"+b+W(a))}function sa(a){return""+a+ha}function ta(a){return a.split("@")[0]}function ua(a){return a.split("@")[0]}function va(a){a=a.split("@")[0];a=a.split(":");var b=a[0];a=a[1];a=parseInt(a,10);return{userId:b,deviceID:a}}function wa(a){a=va(a);return a.deviceID}function xa(a,b){if(a===i||a===j)return b;else return ta(a)}function ya(a){return a===i||a===j?null:a}function za(a){if(a===i||a===j)return null;return!a.endsWith(v)?null:a}function Aa(a){if(!a.endsWith(v))throw c("err")('phoneNumberFromJid called with non-user jid "'+a+'"');return a.slice(0,-v.length)}function Ba(a){if(a.endsWith(v))return Aa(a);else if(a.endsWith(C))return P(a);throw c("err")('lidOrPhoneFromUserJid called with non phone or lid jid "'+a+'"')}function Ca(a){return a.endsWith(v)||a.endsWith(p)||a.endsWith(o)||a.endsWith(C)?a:null}function Da(a){return a.endsWith(v)?a:null}function Ea(a){return a===k?null:$(a)}function Fa(a){return a===k?null:$(a)}function Ga(a){return a===k?k:null}function P(a){if(!a.endsWith(C))throw c("err")('lidFromLidUserJid called with non-LidUserJid "'+a+'"');return a.slice(0,-C.length)}function Q(a){a=a.split("@");var b=a[0];a=a[1];b=b.split(":")[0];b=b.split(".")[0];a===I&&(a=w);a===ia&&(a=x);return Ab(b+"@"+a)}function Ha(a){return Q(a)}function Ia(a){return Q(a)}function Ja(a){if(a.jidType==="phoneDevice")return a.deviceJid;else if(a.jidType==="interopDevice")return a.deviceJid;else if(a.jidType==="lidDevice")return a.deviceJid;else if(a.jidType==="msgrDevice")return a.deviceJid;else if(a.jidType==="lidUser")return a.userJid;else if(a.jidType==="interopUser")return a.userJid;else if(a.jidType==="msgrUser")return a.userJid;else if(a.jidType==="phoneUser")return a.userJid;else if(a.jidType==="group")return a.groupJid;else if(a.jidType==="status")return a.statusJid;else if(a.jidType==="call")return a.callJid;else if(a.jidType==="newsletter")return a.newsletterJid;else if(a.jidType==="hosted")return a.hostedDeviceJid;else if(a.jidType==="hostedLid")return a.hostedLidDeviceJid;else if(a.jidType==="bot")return a.botJid;else{a.jidType;return a.broadcastJid}}function Ka(a){return Y(O(a)+":"+h+v)}function La(a){return Z(O(a)+":"+h+o)}function Ma(a){return qa(a,h)}function Na(a){return wa(a)===h}function Oa(a){return Eb(a)}function Pa(a){return a}function R(a){a=a.split("@");var b=a[0];a=a[1];b=b.split(":");var c=b[0];b=b[1];c=c.split(".");var d=c[0];c=c[1];return{user:d,device:b,agent:c,server:a}}function Qa(a){a=R(a);var b=a.user,c=a.agent;c=c===void 0?"0":c;var d=a.device;d=d===void 0?"0":d;a=a.server;return b+"."+c+":"+d+"@"+a}function Ra(a){switch(a.jidType){case"interopUser":return a.userJid;case"lidUser":return a.userJid;case"msgrUser":return a.userJid;case"phoneUser":return a.userJid;case"group":return a.groupJid;case"status":return a.statusJid;case"interopDevice":return a.deviceJid;case"lidDevice":return a.deviceJid;case"msgrDevice":return a.deviceJid;case"phoneDevice":return a.deviceJid;case"broadcast":return a.broadcastJid;case"call":return a.callJid;case"newsletter":return a.newsletterJid;case"hosted":return a.hostedDeviceJid;case"hostedLid":return a.hostedLidDeviceJid;case"bot":return a.botJid;default:return c("WAAssertUnreachable")(a.jidType)}}function Sa(a){if(a===l)return{jidType:"call",callJid:l};if(a===k)return{jidType:"status",statusJid:k};else if(B.test(a))return{jidType:"phoneUser",userJid:Bb(a)};else if(r.test(a))return{jidType:"interopUser",userJid:Cb(a)};else if(t.test(a))return{jidType:"msgrUser",userJid:Db(a)};else if(u.test(a)){var b=a.substr(0,a.indexOf(":"));return{jidType:"msgrUser",userJid:N(b)}}else if(A.test(a))return{jidType:"phoneDevice",deviceJid:Y(a)};else if(q.test(a))return{jidType:"interopDevice",deviceJid:yb(a)};else if(s.test(a))return{jidType:"msgrDevice",deviceJid:Z(a)};else if(n.test(a))return{jidType:"group",groupJid:a.endsWith(m)?a:""+a+m};else if(F.test(a))return{jidType:"broadcast",broadcastJid:a};else if(G.test(a))return{jidType:"call",callJid:a};else if(D.test(a))return{jidType:"lidUser",userJid:a};else if(E.test(a))return{jidType:"lidDevice",deviceJid:a};else if(z.test(a))return{jidType:"newsletter",newsletterJid:a};else if(J.test(a))return{jidType:"hosted",hostedDeviceJid:a};else if(L.test(a))return{jidType:"hostedLid",hostedLidDeviceJid:a};else if(ja.test(a))return{jidType:"bot",botJid:a};else return{jidType:"unknown"}}function Ta(a){return a==="status@broadcast"?a:null}function Ua(a){if(B.test(a)||r.test(a)||t.test(a)||D.test(a))return a;else if(u.test(a)){a=a.substr(0,a.indexOf(":"));return N(a)}else return null}function Va(a){return F.test(a)?a:null}function Wa(a){if(A.test(a)||s.test(a)||q.test(a)||E.test(a)||J.test(a)||L.test(a))return a;if(B.test(a))return ub(a);return ja.test(a)?vb(a):null}function Xa(a){return q.test(a)?a:null}function S(a){return n.test(a)?a:null}function Ya(a){return Ta(a)||S(a)||Va(a)?a:null}function Za(a){return G.test(a)?a:null}function $a(a){return a==="s.whatsapp.net"||a==="g.us"||a==="call"?a:null}function ab(a){return Ua(a)||S(a)}function bb(a){return z.test(a)?a:null}function cb(a){return J.test(a)?a:null}function db(a){return L.test(a)?a:null}function eb(a){return Ca(a)==null?$(a):null}function fb(a){a=R(a);var b=a.user,c=a.device;c=c===void 0?"0":c;a=a.server;return Y(b+":"+c+"@"+a)}function gb(a){if(a.endsWith(m))return a.slice(0,-m.length);else throw c("err")('groupId called with non-group jid "'+a+'"')}function hb(a){var b=Sa(a);if(b.jidType==="unknown")return a;if(b.jidType==="status")return b.statusJid;b.jidType;return Ra(b).replace(/^([^@]*)([^@][^@][^@][^@])@(.*)$/,"...$2@$3")}function ib(a){return!a.includes("@")?a:a.replace(la,hb)}function T(a){if(a.endsWith(m))return $(a);else return null}function U(a,b){if(a.endsWith(v))return b.phoneUser(a);else if(a.endsWith(o))return b.msgrUser(a);else if(a.endsWith(p))return b.interopUser(a);else if(a.endsWith(C))return b.lidUser(a);else if(T(a)!=null)return b.group($(a));throw c("err")("Can not switch on chat jid "+a)}function jb(a,b){if(a.endsWith(o))return b.user(a);else if(T(a)!=null)return b.group(a);throw c("err")("Can not switch on chat jid "+a)}function V(a,b){if(a.endsWith(v))return b.user(a);else if(T(a)!=null)return b.group(a);throw c("err")("Can not switch on chat jid "+a)}function kb(a,b){return U(a,{lidUser:function(a){return b.user(a)},interopUser:function(a){return b.user(a)},msgrUser:function(a){return b.user(a)},phoneUser:function(a){return b.user(a)},group:function(a){return b.group(a)}})}function lb(a,b){return a===k?b.status():V(a,{user:b.user,group:b.group})}function mb(a,b){return a===k?b.status():U(a,{interopUser:b.interopUser,phoneUser:b.phoneUser,msgrUser:b.msgrUser,lidUser:b.lidUser,group:b.group})}function nb(a,b){return a===k?b.multicast(k):V(a,{user:b.user,group:b.multicast})}function ob(a){return a.endsWith(C)}function pb(a){return a==="@me"}function qb(a){return a==="@system"}function rb(){return o}function sb(){return v}function tb(){return ea}function W(a){if(a.endsWith(v))return v;else if(a.endsWith(o))return o;else if(a.endsWith(C))return C;else if(a.endsWith(M))return M;else throw c("err")('userDomainFromJid called with non-user jid "'+a+'"')}function ub(a){return X(O(a)+":"+h+W(a))}function vb(a){return X(""+O(a)+W(a))}function wb(a){a=a.platform;var b=a==="msgr"?o:v;function c(a){return""+a+b}function d(){return b}return{toUserJid:c,getUserDomain:d}}function xb(a){return a}function X(a){return a}function Y(a){return a}function Z(a){return a}function yb(a){return a}function zb(a){return a}function Ab(a){return a}function Bb(a){return a}function Cb(a){return a}function Db(a){return a}function $(a){return a}function Eb(a){return a}function Fb(a){return a}function Gb(a){return a}function Hb(a){return a}function Ib(a){return U(a,{group:function(a){return gb(a)},lidUser:function(a){return O(a)},interopUser:function(a){return O(a)},phoneUser:function(a){return O(a)},msgrUser:function(a){return O(a)}})}function Jb(){return ba}g.DEFAULT_DEVICE_ID=h;g.AUTHOR_ME=i;g.AUTHOR_SYSTEM=j;g.STATUS_JID=k;g.PSA_JID=aa;g.CALL_LINK_JID=l;g.MSGR_USER_DOMAIN=o;g.MSGR_USER_JID_SUFFIX=ca;g.INTEROP_DOMAIN=p;g.INTEROP_USER_JID_SUFFIX=da;g.WA_SERVER_JID_SUFFIX=fa;g.WA_USER_DOMAIN=v;g.WA_USER_JID_SUFFIX=w;g.WA_LID_SUFFIX=x;g.WA_NEWSLETTER_JID_DOMAIN=y;g.LID_DOMAIN=C;g.LID_SUFFIX=ga;g.HOSTED_DOMAIN=H;g.HOSTED_SUFFIX=I;g.HOSTED_LID_DOMAIN=K;g.HOSTED_LID_SUFFIX=ia;g.BOT_DOMAIN=M;g.SURVEY_USER_JID=ka;g.toPhoneUserJid=a;g.toLidUserJid=b;g.toMsgrUserJid=N;g.toGroupJid=d;g.toNewsletterJid=e;g.toHostedDeviceJid=f;g.toHostedLidDeviceJid=ma;g.getGroupDomain=na;g.userIdFromJid=O;g.toPhoneDeviceJid=oa;g.toMsgrDeviceJid=pa;g.toLidDeviceJid=qa;g.toDeviceJid=ra;g.toBroadcastJid=sa;g.extractUserId=ta;g.extractChatId__DANGEROUS=ua;g.extractDeviceIDParts=va;g.extractDeviceId=wa;g.authorToUserId=xa;g.authorAsUserJid=ya;g.authorAsPhoneUserJid=za;g.phoneNumberFromJid=Aa;g.lidOrPhoneFromUserJid=Ba;g.interpretAsUserJid=Ca;g.interpretAsPhoneUserJid=Da;g.asChatJid=Ea;g.asPhoneChatJid=Fa;g.asStatusJid=Ga;g.lidFromLidUserJid=P;g.extractUserJid=Q;g.extractPhoneUserJid=Ha;g.extractLidUserJid=Ia;g.extractJidFromJidWithType=Ja;g.defaultPhoneDeviceJidForUser=Ka;g.defaultMsgrDeviceJidForUser=La;g.defaultLidDeviceJidForLidUserJid=Ma;g.isPrimaryDevice=Na;g.interpretAsDeviceId=Oa;g.interpretAsNumber=Pa;g.parseJidParts=R;g.fullFormDeviceJidString=Qa;g.extractFromJid=Ra;g.interpretAndValidateJid=Sa;g.validateStatusJid=Ta;g.validateUserJid=Ua;g.validateBroadcastJid=Va;g.validateDeviceJid=Wa;g.validateInteropDeviceJid=Xa;g.validateGroupJid=S;g.validateMulticastJid=Ya;g.validateCallJid=Za;g.validateDomainJid=$a;g.validateChatJid=ab;g.validateNewsletterJid=bb;g.validateHostedDeviceJid=cb;g.validateHostedLidDeviceJid=db;g.asMulticastJid=eb;g.stripAgentIdFromPhoneDeviceJid=fb;g.groupIdFromJid=gb;g.sanitizeJidForLogging=hb;g.maybeSanitizeLogLineText=ib;g.interpretAsGroupJid=T;g.switchOnChatJidType=U;g.switchOnMsgrChatJidType=jb;g.switchOnPhoneChatJidType=V;g.switchOnUserChatJidType=kb;g.switchOnPhoneJidType=lb;g.switchOnJidType=mb;g.switchOnMulticastJidType=nb;g.isLidUser=ob;g.isAuthorMe=pb;g.isAuthorSystem=qb;g.getMsgrUserDomain=rb;g.getWhatsappUserDomain=sb;g.getServerDomain=tb;g.defaultDeviceJidForUser=ub;g.defaultDeviceJidForBot=vb;g.createJidUtils=wb;g.unsafeCoerceToChatJid=xb;g.unsafeCoerceToDeviceJid=X;g.unsafeCoerceToPhoneDeviceJid=Y;g.unsafeCoerceToMsgrDeviceJid=Z;g.unsafeCoerceToInteropDeviceJid=yb;g.unsafeCoerceToLidDeviceJid=zb;g.unsafeCoerceToUserJid=Ab;g.unsafeCoerceToPhoneUserJid=Bb;g.unsafeCoerceToInteropUserJid=Cb;g.unsafeCoerceToMsgrUserJid=Db;g.unsafeCoerceToGroupJid=$;g.unsafeCoerceToDeviceId=Eb;g.unsafeCoerceToNewsletterJid=Fb;g.unsafeCoerceToHostedDeviceJid=Gb;g.unsafeCoerceToHostedLidDeviceJid=Hb;g.threadIdForChatJid=Ib;g.getGroupCallDomain=Jb}),98);
__d("InstamadilloMessageIdUtils",["FBLogger","I64","MAWUnsafeCoerce","WAJids"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,b){var c;(h||(h=d("I64"))).isI64(a)?c=(h||(h=d("I64"))).to_string(a):c=a;return c+":"+b}function a(a){a=a.split(":");if(a.length!==2)throw c("FBLogger")("igd_web").mustfixThrow("Invalid instamadillo message id format. Format is <threadKey>:<stanzaId>.");return{stanzaId:a[1],threadKey:a[0]}}function b(a){a=a.split(":");if(a.length!==2){c("FBLogger")("igd_web").warn("Invalid instamadillo message id format. Format is <threadKey>:<stanzaId>.");return null}return{stanzaId:a[1],threadKey:a[0]}}function e(a){a=a.message.decrypted.id;return j(a)}function j(a){var b=a.externalId;a=d("WAJids").threadIdForChatJid(a.chat);return i(a,b)}function f(a,b,c){return{author:d("WAJids").toMsgrUserJid(c),chat:d("WAJids").toMsgrUserJid((h||(h=d("I64"))).to_string(a)),externalId:d("MAWUnsafeCoerce").unsafeCoerce(b)}}g.toInstamadilloMessageId=i;g.fromInstamadilloMessageId=a;g.maybeFromInstamadilloMessageId=b;g.getInstamadilloMessageIdFromStanza=e;g.getInstamadilloMessageIdFromProtocolMsgId=j;g.toProtocolMsgId=f}),98);
__d("LSClientDependencies",[],(function(a,b,c,d,e,f){}),null);
__d("LSDynamicDependencies",["Bootloader","LSDynamicDependenciesEventEmitter","ODS","Promise","SiteData","asyncToGeneratorRuntime","clearTimeout","cr:19620","cr:21165","err","justknobx","nullthrows","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;h=(h=b("cr:21165"))!=null?h:b("cr:19620");var k=babelHelpers["extends"]({},h);function a(a){Object.assign(k,a)}var l={_tombstone:!0};function e(a){var e=new Map();for(a of a){var f=a.name;f!=null&&!o(f)&&e.set(f,c("nullthrows")(a.value))}if(e.size===0)return(j||(j=b("Promise"))).resolve();var g=new(j||(j=b("Promise")))(function(a){var f={},h=[],j=function(c){var a=c[0];c=c[1];c=c==null?void 0:c.__dr;f[c]={be:1,r:[]};h.push(c);(i||(i=d("ODS"))).bumpEntityKey(3185,"ls_download_dependency.relay",c);k[a]={load:function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield g;return k[a]});function d(){return c.apply(this,arguments)}return d}()}};for(var l of e)j(l);c("Bootloader").handlePayload({compMap:f,consistency:{rev:c("SiteData").client_revision}});m(c("Bootloader"),h,function(b){Array.from(e.entries()).forEach(function(a,c){var d=a[0];a[1];k[d]=b[c]}),a()})});return g}function m(a,b,c){return a.loadModules.call(a,b,function(){for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];return c(b)})}function n(a){return a.charAt(0).toUpperCase()+a.slice(1)}function o(a){return a in k&&k[a]!==l}var p=c("justknobx")._("2800");function f(a,e,f){var g=new Map();for(a of a!=null?a:[])o(a)||g.set(a,"LS"+n(a));for(a of e!=null?e:[])!o(a+".bs")?g.set(a+".bs","LS"+n(a)+".nop"):a+".nop"in k||g.set(a+".nop","LS"+n(a)+".nop");for(e of f!=null?f:[])e in k||g.set(e,"LS"+n(e));if(g.size===0)return(j||(j=b("Promise"))).resolve();var h=new(j||(j=b("Promise")))(function(a,e){var f={},j=[],n=function(a){var c=a[0];a=a[1];(i||(i=d("ODS"))).bumpEntityKey(3185,"ls_download_dependency.bootloader",a);d("LSDynamicDependenciesEventEmitter").emitLoadModuleEvent(a);f[a]={be:1,r:[]};j.push(a);k[c]={load:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{yield h}catch(a){k[c]=l;throw a}return k[c]});function d(){return a.apply(this,arguments)}return d}()}};for(var o of g)n(o);c("Bootloader").handlePayload({compMap:f,consistency:{rev:c("SiteData").client_revision}});var q=m(c("Bootloader"),j,function(b){c("clearTimeout")(r),Array.from(g.entries()).forEach(function(a,c){var d=a[0];a[1];k[d]=b[c]}),a()}),r=c("setTimeout")(function(){q.remove(),e(c("err")("Dynamic sproc loading timeout (%s ms); was loading: %s",p,Array.from(g.keys())))},p)});return h}g.cachedModules=k;g.addToCachedModules=a;g.TOMBSTONE=l;g.downloadRelayDependencies=e;g.downloadBootloaderDependencies=f}),98);
__d("XPlatReactCrypto",["err"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h=self.crypto)==null?void 0:h.subtle;function a(a){var b;if(typeof ((b=self.crypto)==null?void 0:b.getRandomValues)!=="function")throw c("err")("crypto.getRandomValues: Not implemented");self.crypto.getRandomValues(a);return a}function b(){var a;if(typeof ((a=self.crypto)==null?void 0:a.randomUUID)!=="function")return null;a=self.crypto.randomUUID();return typeof a==="string"?a:null}function d(a,b,d,e,f){if(i==null)throw c("err")("crypto.subtle.importKey: Not implemented");return i.importKey(a,b,d,e,f)}function e(a,b){if(i==null)throw c("err")("crypto.subtle.exportKey: Not implemented");return i.exportKey(a,b)}function f(a,b,d){if(i==null)throw c("err")("crypto.subtle.generateKey: Not implemented");return i.generateKey(a,b,d)}function j(a,b,d){if(i==null)throw c("err")("crypto.subtle.encrypt: Not implemented");return i.encrypt(a,b,d)}function k(a,b,d){if(i==null)throw c("err")("crypto.subtle.decrypt: Not implemented");return i.decrypt(a,b,d)}function l(a,b,d){if(i==null)throw c("err")("crypto.subtle.sign: Not implemented");return i.sign(a,b,d)}function m(a,b){if(i==null)throw c("err")("crypto.subtle.digest: Not implemented");return i.digest(a,b)}function n(a,b,d){if(i==null)throw c("err")("crypto.subtle.deriveBits: Not implemented");return i.deriveBits(a,b,d)}function o(a,b,d,e,f){if(i==null)throw c("err")("crypto.subtle.deriveKey: Not implemented");return i.deriveKey(a,b,d,e,f)}g.getRandomValues=a;g.randomUUID=b;g.subtleImportKey=d;g.subtleExportKey=e;g.subtleGenerateKey=f;g.subtleEncrypt=j;g.subtleDecrypt=k;g.subtleSign=l;g.subtleDigest=m;g.subtleDeriveBits=n;g.subtleDeriveKey=o}),98);
__d("LSInt64Lite",["FBLogger","I64","XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";var h;a={add:(h||(h=d("I64"))).add,and_:h.and_,asr_:h.asr_,cast:function(a){return(h||(h=d("I64"))).mk(a[1],a[0])},div:h.div,eq:function(a,b){return a==null&&b==null||a!=null&&b!=null&&(h||(h=d("I64"))).equal(a,b)},from_string:function(a){try{return(h||(h=d("I64"))).of_string(a)}catch(b){throw c("FBLogger")("messenger_web").mustfixThrow('Unable to cast "%s" to int64',a)}},ge:h.ge,gt:h.gt,le:h.le,lsl_:h.lsl_,lsr_:h.lsr_,lt:h.lt,max:h.max,min:h.min,mod_:h.mod_,mul:h.mul,neq:function(a,b){return a==null&&b!=null||a!=null&&b==null||a!=null&&b!=null&&!(h||(h=d("I64"))).equal(a,b)},of_float:h.of_float,of_int32:h.of_int32,or_:h.or_,random:function(){var a=Array.from(d("XPlatReactCrypto").getRandomValues(new Uint32Array(2)));a[0]>>>=1;return(h||(h=d("I64"))).add(h.lsl_(h.of_float(a[0]),32),h.of_float(a[1]))},sub:h.sub,to_float:h.to_float,to_int32:h.to_int32,to_string:function(a){return a==null?a:(h||(h=d("I64"))).to_string(a)},xor:h.xor};g["default"]=a}),98);
__d("LSMaybeSyncIteration",["LSSynchronousPromise","isPromise"],(function(a,b,c,d,e,f,g){"use strict";var h,i={__val__:"__stop_iteration__"};function a(a){return{__val__:"__next_value__",next:a}}function j(a){return a!=null&&typeof a==="object"&&a.__val__==="__next_value__"}function k(a,b,e){var f=l(a,e);while(!(h||(h=c("isPromise")))(f)){if(f.done)return d("LSSynchronousPromise").makeSynchronousPromise(f);e=d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(b(f));if(!(h||(h=c("isPromise")))(e)){if(e===i)return d("LSSynchronousPromise").makeSynchronousPromise(f);var g=j(e)?e.next:void 0;f=l(a,g)}else return e.then(function(c){if(c===i)return f;c=j(c)?c.next:void 0;return k(a,b,c)})}var n=m(b);return f.then(function(c){return c.done?c:n(c).then(function(d){if(d===i)return c;d=j(d)?d.next:void 0;return k(a,b,d)})})}function l(a,b){a=a.next(b);return!(h||(h=c("isPromise")))(a)?a:d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a)}function m(a){return function(b){b=a(b);return d("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(b)}}g.STOP_ITERATION=i;g.wrapNextValue=a;g.iteratorLoop=k}),98);
__d("LSIterationOperations",["I64","LSDict","LSMaybeSyncIteration","LSSynchronousPromise","ReStoreKeyComparer"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b){var c;return c={},c[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return j(a,b)},c.next=function(){var c={done:!0},e=function(a){return d("LSSynchronousPromise").wrapInMaybeSyncPromiseIfNotPromise(b(a.value.item)).then(function(b){if(b){c=a;return d("LSMaybeSyncIteration").STOP_ITERATION}})};return d("LSMaybeSyncIteration").iteratorLoop(a,e).then(function(){return c})},c}function k(a,b,c){var e,f=0;return e={},e[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return k(a,b,c)},e.next=function(){if(f>=c)return d("LSSynchronousPromise").maybeMakeSynchronousPromise({done:!0});var e={done:!0},g=function(a){if(f++<b)return;e=a;return d("LSMaybeSyncIteration").STOP_ITERATION};return d("LSMaybeSyncIteration").iteratorLoop(a,g).then(function(){return e})},e}function a(a,b){return l(a).then(function(a){return a.reduce(function(a,c){return a.then(function(){return b(c)})},d("LSSynchronousPromise").maybeMakeSynchronousPromise(void 0))})}function l(a){var b=[],c=function(a){b.push(a.value)};return d("LSMaybeSyncIteration").iteratorLoop(a,c).then(function(){return b})}function m(a,b,c){var e;c===void 0&&(c=[]);var f={ASC:1,DESC:-1},g=function(a,c){a=a.item;c=c.item;for(var e=0;e<b.length;e++){var g=b[e];g=g[0];var i=a[g];g=c[g];var j;i==null&&g==null?j=0:i==null&&g!=null?j=-1:i!=null&&g==null?j=1:j=(h||(h=d("ReStoreKeyComparer"))).compareValue(i,g);if(j===0)continue;return j*f[b[e][1]]}return 0},i,j=[],k=[],l=function(a){var b=[];for(var d=c.length-1;d>=0;d--)b.push(a[c[d]]);return b},n=function(){k=j,k.sort(g),j=[]};return e={},e[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return m(a,b,c)},e.next=function(){if(k.length)return d("LSSynchronousPromise").maybeMakeSynchronousPromise({done:!1,value:k.shift()});var b=function(a){var b=l(a.value.item);if(i!=null&&(h||(h=d("ReStoreKeyComparer"))).compareKey(i,b)!==0){n();j.push(a.value);i=b;return d("LSMaybeSyncIteration").STOP_ITERATION}i=b;j.push(a.value)};return d("LSMaybeSyncIteration").iteratorLoop(a,b).then(function(){!k.length&&j.length&&n();if(k.length)return{done:!1,value:k.shift()};else return{done:!0}})},e}function b(a){var b=0,c=function(){b++};return d("LSMaybeSyncIteration").iteratorLoop(a,c).then(function(){return(i||(i=d("I64"))).of_int32(b)})}function e(a,b){return{forEach:function(e){return l(a).then(function(a){a=a.reduce(function(a,c){c=c.item[b];var d=(a.get(c)||0)+1;return a.set(c,d)},new(c("LSDict"))());var f=d("LSSynchronousPromise").maybeMakeSynchronousPromise(void 0),g=function(a){var c=a[0],g=a[1];f=f.then(function(){var a;return e((a={},a[b]=c,a.group_count=(i||(i=d("I64"))).of_int32(g),a))})};for(a of a.entries())g(a);return f})}}}g.filter=j;g.slice=k;g.forEach=a;g.toArray=l;g.sortBy=m;g.count=b;g.groupBy=e}),98);
__d("LSJson",["FBLogger","I64","LSDict","LSVec"],(function(a,b,c,d,e,f,g){"use strict";var h,i=512,j={useLSTypes:!1};function a(a,b){b=b===void 0?j:b;var e=b.useLSTypes;function f(a,b){return function(){return function(c){c=a()(c);if(c!=null){var d=c[0];c=c[1];return[b(d),c]}}}}function g(a){return JSON.parse('"'+a+'"')}function i(a){return function(){return function(b){var c=g(a);if(b.startsWith(c))return[c,b.substr(c.length)];else return void 0}}}function k(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return function(){return function(a){var c=[];a=a;for(var d of b){var e=d()(a);if(e==null)return void 0;a=e[1];c.push(e[0])}return[c,a]}}}function l(a){return function(){return function(b){var c=a.exec(b);return c!=null?[c,b.substr(c[0].length)]:void 0}}}function m(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return function(){return function(a){for(var c of b){var d=c()(a);if(d!=null)return d}}}}function n(a){return function(){return function(b){var c=a()(b);return c!=null?c:[void 0,b]}}}function o(a){return function(){return function(b){var c=a()(b),d=[];b=b;while(c!=null)b=c[1],d.push(c[0]),c=a()(b);return[d,b]}}}b=l(/^[\n\r\s]*/);var p=f(l(/^\"((?:[^\"\\]|\\.)*)\"/),function(a){a=a[1];return g(a)}),q=f(l(/^-?\d+(?:(?:\.\d+)?[eE][-\+]?\d+|\.\d+)/),function(a){a=a[0];return Number(a)});l=f(l(/^-?\d+/),function(a){a=a[0];return(h||(h=d("I64"))).of_string(a)});var r=f(i("null"),function(a){return null}),s=f(i("true"),function(a){return!0}),t=f(i("false"),function(a){return!1}),u=f(k(b,p,b,i(":"),function(){return v()}),function(a){var b=a[1];a=a[4];return[b,a]});u=f(k(u,o(k(b,i(","),u))),function(a){var b=a[0];a=a[1];return[b].concat(a.map(function(a){a=a[2];return a}))});u=f(k(i("{"),n(u),b,i("}")),function(a){a=a[1];a=a===void 0?[]:a;return e?new(c("LSDict"))(a):Object.fromEntries(a)});o=f(k(function(){return v()},o(k(b,i(","),function(){return v()}))),function(a){var b=a[0];a=a[1];return[b].concat(a.map(function(a){a=a[2];return a}))});n=f(k(i("["),b,n(o),b,i("]")),function(a){a=a[2];a=a===void 0?[]:a;return e?c("LSVec").ofArray(a):a});var v=f(k(b,m(u,p,q,l,n,r,s,t),b),function(a){a=a[1];return a});o=v()(a);if(o==null)throw c("FBLogger")("messenger_web").mustfixThrow("error parsing string");if(o[1]!=="")throw c("FBLogger")("messenger_web").mustfixThrow("unexpected %s",o[1]);return o[0]}function k(a,b,e){b===void 0&&(b=0);e===void 0&&(e="");if(b>i)throw c("FBLogger")("messenger_web").mustfixThrow("recursion limit exceeded");if(typeof a==="string"||typeof a==="number")return JSON.stringify(a);else if(typeof a==="boolean")return a?"1":"0";else if(a==null)return"null";else if(typeof a==="object")if(Array.isArray(a)){if(a.tag==="ls-array")return"["+a.map(function(a,c){return k(a,b+1,e+"/"+c.toString())}).join(",")+"]";a._tag!=="i64"&&c("FBLogger")("messenger_web").warn("LSJson payload contains untagged i64: %s",e);return(h||(h=d("I64"))).to_string(a)}else if(a instanceof c("LSDict"))return"{"+Array.from(a.entries()).map(function(a){var d=a[0];a=a[1];if(typeof d==="string")return JSON.stringify(d)+":"+k(a,b+1,e+"/"+d);else throw c("FBLogger")("messenger_web").mustfixThrow("key must be a string")}).join(",")+"}";throw c("FBLogger")("messenger_web").mustfixThrow("type not supported: %s, path: %s",a===null?"null":typeof a,e)}g.parse=a;g.stringify=k}),98);
__d("LSPendingTasksPluginType",[],(function(a,b,c,d,e,f){a=Object.freeze({LS_BROKER:0,PAYMENTS:1,EPHEMERAL_MESSAGING:2,CARRIER_MESSAGING:3,BUG_REPORTER:4,MESSAGE_DENORMALIZATIONS:5,SEEN_HEADS:6,MEDIA_UPLOAD:7,SECURE_THREAD_SEEN_HEADS:8,WHATSAPP_THREAD:9,SECURE_THREAD_OVER_WA_MESSAGE_SEND:10,CONTACT_PRUNING:11,MEDIA_MANAGER:12,SECURE_THREAD_OVER_WA_ENCRYPTION:13,STORY_POST:14,CO_PRESENCE_HEARTBEAT:16,SECURE_THREAD_OVER_WA_GROUP_MANAGEMENT:17,ENCRYPTED_BACKUPS:23,ANONYMOUS_REQUEST:25,MESSAGE_ACTIONS:28,MESSAGE_UNSEND_ATTACHMENT_CLEANUP:39,IGD_INSTAMADILLO:40,PENDING_MESSAGE_SEND:46});f["default"]=a}),66);
__d("isNativeTask",["I64","LSPendingTasksPluginType"],(function(a,b,c,d,e,f,g){"use strict";var h,i="4",j="16",k=new Set([c("LSPendingTasksPluginType").IGD_INSTAMADILLO]);function a(a){var b=k.has((h||(h=d("I64"))).to_float(a.pluginType));a=a.context===j||a.context===i;return b||a}g["default"]=a}),98);
__d("LSIterationHelpers",["FBLogger","LSMaybeSyncIteration","LSSynchronousPromise","ReStoreKeyComparer","ReStoreVaulting","gkx","isNativeTask"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Set(["messages","attachments","reactions"]);function j(a){return i.has(a)}function k(a,b,d){return a&&b.name==="pending_tasks"&&d!=null&&c("isNativeTask")(d)}function l(a){for(var b of Object.keys(a))a[b]===void 0&&delete a[b];return a}function m(a,b,c){c===void 0&&(c="asc");var e=a.entries(new WeakMap(),c);function f(){var a;return a={},a[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=f,a.next=function(){var a={done:!0},f=0,g="start",i=[],j=function(e){var j=function(){var a=f,j=b[a]||{},k=j.end;j=j.start;var l=e.value[0];if(j&&g==="start"){var m=(h||(h=d("ReStoreKeyComparer"))).compareValue(l[a],j[0]),n=m*(c==="asc"?1:-1)<j[1];if(n){g="start_verify";i=l.slice(0,a);if(a===l.length-1&&m===0)return{v:void 0};else{n=[].concat(i,[j[0]],j[1]&&c==="asc"||!j[1]&&c==="desc"?[(h||(h=d("ReStoreKeyComparer"))).MAX_KEY]:[]);return{v:d("LSMaybeSyncIteration").wrapNextValue(n)}}}else g="check_end"}if(j&&g==="start_verify"&&!i.every(function(a,b){return(h||(h=d("ReStoreKeyComparer"))).compareValue(a,l[b])===0})){f=0;g="start";return{v:void 0}}if(k&&(h||(h=d("ReStoreKeyComparer"))).compareValue(k[0],l[a])*(c==="asc"?1:-1)<k[1]){f=0;g="start";return{v:d("LSMaybeSyncIteration").wrapNextValue([].concat(l.slice(0,a),c==="asc"?[(h||(h=d("ReStoreKeyComparer"))).MAX_KEY]:[]))}}f++;g="start"};while(f<b.length){var k=j();if(typeof k==="object")return k.v}a=e;return d("LSMaybeSyncIteration").STOP_ITERATION};return d("LSMaybeSyncIteration").iteratorLoop(e,j).then(function(){return a})},a}return f()}function n(a,b,c){c===void 0&&(c="asc");var e=a.entries(new WeakMap(),c);function f(){var a;return a={},a[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=f,a.next=async function(){var a=await e.next();outer:while(!a.done){var f=async function(f){var g=b[f]||{},i=g.end;g=g.start;var j=a.value[0],k=j.slice(0,f);if(g){var l=(h||(h=d("ReStoreKeyComparer"))).compareValue(j[f],g[0]);if(l*(c==="asc"?1:-1)<g[1]){if(f===j.length-1&&l===0)a=await e.next();else{l=[].concat(k,[g[0]],g[1]&&c==="asc"||!g[1]&&c==="desc"?[(h||(h=d("ReStoreKeyComparer"))).MAX_KEY]:[]);a=await e.next(l)}if(a.done)return{v:{done:!0}};j=a.value[0];if(!k.every(function(b,a){return(h||(h=d("ReStoreKeyComparer"))).compareValue(b,j[a])===0}))return"continue|outer"}}if(i&&(h||(h=d("ReStoreKeyComparer"))).compareValue(i[0],j[f])*(c==="asc"?1:-1)<i[1]){a=await e.next([].concat(j.slice(0,f),c==="asc"?[(h||(h=d("ReStoreKeyComparer"))).MAX_KEY]:[]));return"continue|outer"}};for(var g=0;g<b.length;g++){var i=await f(g);switch(i){case"continue|outer":continue outer;default:if(typeof i==="object")return i.v}}break}return a},a}return f()}function o(a,b,d,e,f){return{delete:function(){return d.delete.apply(d,a)},item:b,update:function(g){var h=f&&j(e.name)?{transportKey:"FBBroker"}:{};g=babelHelpers.extends({},b,{},g,{},h);if(k(f,e,g))throw c("FBLogger")("messenger_web").mustfixThrow("cannot insert native task in dynamic mode");return d.upsert(a,l(g))}}}function p(a,b){var c;return c={},c[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return p(a,b)},c.next=function(){var c={done:!0},e=function(a){c=a;return d("LSMaybeSyncIteration").STOP_ITERATION};return d("LSMaybeSyncIteration").iteratorLoop(a,e).then(function(){if(c.done)return d("LSMaybeSyncIteration").iteratorLoop(b,e)}).then(function(){return c})},c}function q(a,b,c){var e,f=[{done:!0},{done:!0}],g=function(a){var b=f[a];f[a]={done:!0};return b};return e={},e[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return q(a,b,c)},e.next=function(){var e=function(a){return function(b){a==="a"?f[0]=b:f[1]=b;return d("LSMaybeSyncIteration").STOP_ITERATION}},i=d("LSSynchronousPromise").maybeMakeSynchronousPromise();f[0].done&&(i=i.then(function(){return d("LSMaybeSyncIteration").iteratorLoop(a,e("a"))}));f[1].done&&(i=i.then(function(){return d("LSMaybeSyncIteration").iteratorLoop(b,e("b"))}));return i.then(function(){if(f[0].done&&f[1].done)return{done:!0};if(f[0].done)return g(1);if(f[1].done)return g(0);var a=(h||(h=d("ReStoreKeyComparer"))).compareKey(f[0].value[0],f[1].value[0]);if(a===0)return g(0);return a*(c==="asc"?1:-1)<0?g(0):g(1)})},e}var r=(b={},b[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return r},b.next=function(){return d("LSSynchronousPromise").maybeMakeSynchronousPromise({done:!0})},b);function a(a,b,e,f,g,h,i,l){var s=new Set(),t=a.length>1,u=a.length===1&&a[0][1]==null,v=a.map(function(a){var i=a[0],j=a[1];return i.map(function(a){f.key_lookup===!0&&a.length!==0;f.table_scan===!0&&a.length===0;var i=a.map(function(a){return h(a,b)});a=i.length===(j==null?e.primaryKeyIds:e.indexes[j]).length&&i.every(function(a){var b=a.end;a=a.start;return a&&b&&a[0]===b[0]&&a[1]===0&&b[1]===0});if(a){a=function a(){var b,c=!1;return b={},b[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=a,b.next=function(){var a;if(c)return d("LSSynchronousPromise").maybeMakeSynchronousPromise({done:!0});c=!0;var b=i.map(function(a){a=a.start;return a[0]});return(a=j==null?g:g.index(j)).get.apply(a,b).then(function(a){if(!a)return{done:!0};a=d("ReStoreVaulting").maybeUnvaultDbRow(a,e.name);return{done:!1,value:[b,a]}})},b};return a()}a=c("gkx")("2839")?m:n;return a(j==null?g:g.index(j),i,b)})}).flat().reduce(function(c,d,e){e=e===0&&c==null?r:c;return a.length>1?p(e,d):q(e,d,b)});function w(){var a;return a={},a[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=w,a.next=function(){var a=!0,b,f,h,m,n=function(c){a=!1;var g=c.value;f=g[0];h=g[1];b=u?f:e.primaryKeyIds.map(function(a){return h[a]});if(k(i,e,h)){m=c;a=!0;return}if(j(e.name)&&i&&h!=null&&h.transportKey!=="FBBroker"){m=c;a=!0;return}if(t){g=JSON.stringify(b);if(s.has(g)){a=!0;return}s.add(g)}return d("LSMaybeSyncIteration").STOP_ITERATION};return d("LSMaybeSyncIteration").iteratorLoop(v,n).then(function(){if(m!=null){var d=m.value[1].transportKey;c("FBLogger")("messenger_web").warn('Expected transportKey to equal ("FBBroker") in %s, provided transportKey: %s',l,d)}return a||b==null||h==null?{done:!0}:{done:!1,value:o(b,h,g,e,i)}})},a}return w()}g.isTranportKeyEnforcedTable=j;g.isNativePendingTaskViolation=k;g.stripUndefinedProperties=l;g.unionIterators=p;g.mergeIterators=q;g.fetch=a}),98);
__d("LSRuntimeDb",["FBLogger","LSIterationHelpers"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a.name.match(/secure_|inbox(?!_)/i)}function a(a,b,d,e,f,g){return{metadata:d,table:function(j){j=d.tableNames[d.tableIds[j]];if(b===0&&h(j))throw c("FBLogger")("messenger_web").mustfixThrow("cannot access secure table from dynamic mode");return i(a,j,e,f,g)},transactionId:a.__internal__transaction_id}}function i(a,b,e,f,g){var h=a.transactionTable(b.name,f[f.length-1]);return{add:async function(a){d("LSIterationHelpers").isTranportKeyEnforcedTable(b.name)&&g&&(a.transportKey="FBBroker"),await h.add(a)},fetch:function(){for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return d("LSIterationHelpers").fetch(c.length===0?[[[[]],void 0]]:c,"asc",b,e,h,j,g,f.join(", "))},fetchDesc:function(){for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return d("LSIterationHelpers").fetch(c.length===0?[[[[]],void 0]]:c,"desc",b,e,h,j,g,f.join(", "))},peekNextAutoIncrementId:function(){return h.peekNextAutoIncrementId()},put:async function(a){d("LSIterationHelpers").isTranportKeyEnforcedTable(b.name)&&g&&(a.transportKey="FBBroker");if(d("LSIterationHelpers").isNativePendingTaskViolation(g,b,a))throw c("FBLogger")("messenger_web").mustfixThrow("cannot put native task via LS transport");var e=b.primaryKeyIds.map(function(b){if(a[b]!==void 0)return a[b];throw c("FBLogger")("messenger_web").mustfixThrow("primary key must be defined on object")});await h.delete.apply(h,e);await h.add(d("LSIterationHelpers").stripUndefinedProperties(babelHelpers.extends({},a)))}}}function j(a,b){if(typeof a==="object"&&!Array.isArray(a)){var d,e;if(b==="asc"){Object.prototype.hasOwnProperty.call(a,"gt")&&(d=[a.gt,1]);if(Object.prototype.hasOwnProperty.call(a,"gte")){if(d!=null)throw c("FBLogger")("messenger_web").mustfixThrow("Cannot specify both gt and gte");d=[a.gte,0]}Object.prototype.hasOwnProperty.call(a,"lt")&&(e=[a.lt,1]);if(Object.prototype.hasOwnProperty.call(a,"lte")){if(e!=null)throw c("FBLogger")("messenger_web").mustfixThrow("Cannot specify both lt and lte");e=[a.lte,0]}}else{Object.prototype.hasOwnProperty.call(a,"lt")&&(d=[a.lt,1]);if(Object.prototype.hasOwnProperty.call(a,"lte")){if(d!=null)throw c("FBLogger")("messenger_web").mustfixThrow("Cannot specify both lt and lte");d=[a.lte,0]}Object.prototype.hasOwnProperty.call(a,"gt")&&(e=[a.gt,1]);if(Object.prototype.hasOwnProperty.call(a,"gte")){if(e!=null)throw c("FBLogger")("messenger_web").mustfixThrow("Cannot specify both gt and gte");e=[a.gte,0]}}return{end:e,start:d}}return{end:[a,0],start:[a,0]}}g.LSRuntimeDb=a;g.parseConstraint=j}),98);
__d("XPlatReactTextDecoder",[],(function(a,b,c,d,e,f){"use strict";a=self.TextDecoder;f.TextDecoder=a}),66);
__d("LS",["ExecutionEnvironment","FBLogger","I64","LSDict","LSDynamicDependencies","LSInt64Lite","LSIterationOperations","LSJson","LSRuntimeDb","LSSynchronousPromise","LSVec","MessengerLogHistory","MetaConfig","ODS","ReStoreKeyComparer","XPlatReactTextDecoder","XPlatReactTextEncoder","base64Binary","cr:1088","cr:4790","emptyFunction","err","gkx","isPromise","justknobx","qpl","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l;function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["2"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["0"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["0"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["2"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["2"]);q=function(){return a};return a}var r="LS_WEB",s=d("MessengerLogHistory").getInstance("ls");function t(a){return d("base64Binary").decode(a).buffer}var u={compareTo:function(a,b){a=new Uint8Array(a);b=new Uint8Array(b);var c=Math.min(a.length,b.length);for(var d=0;d<c;d++){var e=a[d]-b[d];if(e!==0)return e}return a.length===b.length?0:a.length-b.length},eq:function(a,b){if(a==null&&b==null)return!0;if(a==null||b==null)return!1;a=new Uint8Array(a);b=new Uint8Array(b);if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0},ge:function(a,b){return u.compareTo(a,b)>=0},gt:function(a,b){return u.compareTo(a,b)>0},le:function(a,b){return u.compareTo(a,b)<=0},lt:function(a,b){return u.compareTo(a,b)<0},neq:function(a,b){return!u.eq(a,b)},of_string:function(a){if(a==null)return void 0;var b=new(d("XPlatReactTextEncoder").TextEncoder)();return b.encode(a).buffer},to_string:function(a){if(a==null)return void 0;var b=new(d("XPlatReactTextDecoder").TextDecoder)();return b.decode(a)}};function v(a){if(a.length!==1)throw c("FBLogger")("messenger_web").mustfixThrow("only literal strings supported");a=a[0];var b=parseInt(a.substr(-8),16);a=parseInt(a.substr(0,a.length-8),16);return(l||(l=d("I64"))).mk((b>>>1)+(a&1)*2147483648^-(b&1),a>>>1^-(b&1))}function w(a){var b="unknown_sproc";a=a.displayName;var c=/\[from (.*)\]/;c=c.exec(a);c!=null&&(b=c[1]);return b}var x=function(){var a=0;function d(d){var e=d.args,f=d.shouldLog;d=d.sprocName;b("cr:1088")==null?void 0:b("cr:1088").logStoredProcedureCall(d,e);if(!f||!b("cr:4790"))return;e=++a;b("cr:4790").markerStart(c("qpl")._(25302991,"143"),e);b("cr:4790").markerAnnotate(c("qpl")._(25302991,"143"),{string:{name:d}},{instanceKey:e});return e}function e(a,d,e){a=a.shouldLog;if(!a||d==null)return;b("cr:4790")==null?void 0:b("cr:4790").markerEnd(c("qpl")._(25302991,"143"),e,d)}function f(a){return c("gkx")("26381")?Math.random()*c("MetaConfig")._("10")<1:!1}return{call:d,logSprocDone:e,shouldLogSproc:f}}(),y="Native operation timeout; transaction blocked",z=30*1e3;function A(a,b,e,f,g,l,B){g===void 0&&(g={});l===void 0&&(l=void 0);var C=[],D=d("LSRuntimeDb").LSRuntimeDb(f,a,b,g,C,B),E=function(b,g){for(var h=arguments.length,i=new Array(h>2?h-2:0),j=2;j<h;j++)i[j-2]=arguments[j];var k;if(typeof g==="string"){k=e[g.toString()];if(k==null)throw c("FBLogger")("messenger_web").mustfixThrow("Attempted to call unimplemented native type op with type: %s and id: %s",b,g);if(k===d("LSDynamicDependencies").TOMBSTONE)throw c("err")("Concurrent native type op loading failed for: %s (retryable)",g);k.load&&(k=k.load())}else k=g;return d("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(k).then(function(b){return b.call.apply(b,[f,a].concat(i))})},F=function(b){for(var g=arguments.length,i=new Array(g>1?g-1:0),j=1;j<g;j++)i[j-1]=arguments[j];var l;if(typeof b==="string"){l=e[b+".bs"]||e[b+".nop"];if(l==null)throw c("FBLogger")("messenger_web").mustfixThrow("Attempted to call unimplemented native op with id: %s",b);if(l===d("LSDynamicDependencies").TOMBSTONE)throw c("err")("Concurrent native type op loading failed for: %s (retryable)",b);l.load&&(l=l.load())}else l=b;var m;return d("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(l).then(function(b){var e;m=(e=(e=b.__nop_name__)!=null?e:b==null?void 0:b.toString())!=null?e:"<unknown nop name>";e=d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(b.apply(void 0,[f,a].concat(i)));return!(h||(h=c("isPromise")))(e)?e:c("justknobx")._("3895")&&(k||(k=c("ExecutionEnvironment"))).isInBrowser?Promise.race([e,new Promise(function(a,b){return c("setTimeout")(function(){return b(c("err")(y))},z)})]):e}).then(function(a){return a},function(a){c("FBLogger")("messenger_web").catching(a).addMetadata(r,"NATIVE_OP_ID",m).mustfixThrow("Native operation %s failed: was_timeout: %s, is_in_worker: %s",m,(a==null?void 0:a.message)===y,(k||(k=c("ExecutionEnvironment"))).isInWorker)})},G=function(a){return a.slice(1).reduce(function(b,d){if(typeof d!=="function"){c("FBLogger")("messenger_web").mustfix("Non-function passed (%s, type %s) in sequence (%s)",d,typeof d,JSON.stringify(a.map(function(a){return typeof a})));return b}return b.then(d)},a[0]())},H=function(a,b){return a.slice(b)};return{Map:c("LSDict"),blob:t,blobs:u,constructor:{n:v},count:d("LSIterationOperations").count,createArray:function(){return c("LSVec").ofArray([])},createArrayWithElements:function(){for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];return c("LSVec").ofArray(b)},db:D,filter:d("LSIterationOperations").filter,forEach:d("LSIterationOperations").forEach,groupBy:d("LSIterationOperations").groupBy,i64:c("LSInt64Lite"),islc:d("LSIterationOperations").slice,like:function(a,b){b=b.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/%/g,".*").replace(/_/g,".");return RegExp(b).test(a)},logger:function(a){if(l)return{debug:l,info:l,mustfix:l,warn:l};var b=c("FBLogger")("messenger_web"),e=a.startsWith("epoch mismatch"),f=a.startsWith("cursor mismatch");if(e||f){a=function(a){s.error(a,"error");a=function(){if(e)return"epoch_mismatch";else if(f)return"cursor_mismatch";else return"fixme_could_not_produce_key"}();(i||(i=d("ODS"))).bumpEntityKey(3185,"lsplatform",a)};return{debug:function(a){return s.debug(a)},info:function(a){return s.debug(a)},mustfix:a,warn:a}}else{c("gkx")("26382")||(b.info=c("emptyFunction"));return b}},loopAsync:function(a,b){function e(f){if(c("LSInt64Lite").lt(f,a)){var g=f;f=d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(b(g));while(!(h||(h=c("isPromise")))(f)){g=c("LSInt64Lite").add(g,v(q()));if(!c("LSInt64Lite").lt(g,a))return d("LSSynchronousPromise").makeSynchronousPromise(void 0);f=d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(b(g))}return f.then(function(){return e(c("LSInt64Lite").add(g,v(p())))})}return d("LSSynchronousPromise").maybeMakeSynchronousPromise(void 0,self.Promise)}return e(v(o()))},loopSync:function(a,b){for(var d=v(n());c("LSInt64Lite").lt(d,a);d=c("LSInt64Lite").add(d,v(m())))b(d)},merge:function(){function a(a,b){return(j||(j=d("ReStoreKeyComparer"))).compareValue(a,b)>0?a:b}function b(a,b){return(j||(j=d("ReStoreKeyComparer"))).compareValue([a[0],-a[1]],[b[0],-b[1]])<0?a:b}for(var c=arguments.length,e=new Array(c),f=0;f<c;f++)e[f]=arguments[f];var g=e.reduce(function(c,e){e=d("LSRuntimeDb").parseConstraint(e,"asc");return{end:c.end&&e.end?b(e.end,c.end):e.end||c.end,start:c.start&&e.start?a(e.start,c.start):e.start||c.start}},{});return babelHelpers.extends({},g.start?g.start[1]?{gt:g.start[0]}:{gte:g.start[0]}:null,{},g.end?g.end[1]?{lt:g.end[0]}:{lte:g.end[0]}:null)},n:v,nativeOperation:F,nativeTypeOperation:E,notnull:function(a){if(a===null)throw c("FBLogger")("messenger_web").mustfixThrow("value should not be null");return a},print:function(a){},resolve:function(a){return d("LSSynchronousPromise").wrapInMaybeSyncPromiseIfNotPromise(a,self.Promise)},resolveGuaranteeAsync:function(a){var b;return((b=self.Promise)!=null?b:Promise).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))},rm:c("LSInt64Lite").of_int32(a),sequence:G,slice:H,sortBy:d("LSIterationOperations").sortBy,storedProcedure:function(h){for(var i=arguments.length,j=new Array(i>1?i-1:0),k=1;k<i;k++)j[k-1]=arguments[k];var m;if(typeof h==="string"){m=e[h];if(m==null)throw c("FBLogger")("messenger_web").mustfixThrow("Attempted to call unimplemented stored procedure with id: %s",h);if(m===d("LSDynamicDependencies").TOMBSTONE)throw c("err")("Concurrent sproc loading failed for: %s (retryable)",h);m.load&&(m=m.load())}else m=h;var n=this;switch(a){case 0:n=A(2,b,e,f,g,l,B);break;case 2:n=A(1,b,e,f,g,l,B);break}var o,p,q;return d("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(m).then(function(a){p=w(a);q=x.shouldLogSproc(p);C.push(p);o=x.call({args:j,shouldLog:q,sprocName:p});f.reportUsedTablesForSyncAccess(a.__tables__);return a.apply(void 0,j.concat([n]))}).then(function(a){C.pop();x.logSprocDone({args:j,shouldLog:q,sprocName:p},o,2);return a},function(a){C.pop();x.logSprocDone({args:j,shouldLog:q,sprocName:p},o,3);c("FBLogger")("messenger_web").catching(a).addMetadata(r,"SPROC_STACK",C.join("\n")).warn("Sproc %s failed",h);throw a})},throw:function(a){throw c("FBLogger")("messenger_web").mustfixThrow(a)},toArray:d("LSIterationOperations").toArray,toJSON:function(a){return d("LSJson").stringify(a)}}}A.n=v;g.default=A}),98);
__d("LSAuthorityLevel",[],(function(a,b,c,d,e,f){a=Object.freeze({OPTIMISTIC:20,CLIENT_PARTIAL:40,SERVER_PARTIAL:60,AUTHORITATIVE_PENDING_REPLACEMENT:75,AUTHORITATIVE:80,CLIENT_AUTHORITATIVE_DELETE:100});f["default"]=a}),66);
__d("LSFactory",["ExecutionEnvironment","LS","LSDynamicDependencies","LSMetadata","cr:8709"],(function(a,b,c,d,e,f,g){"use strict";var h,i={dynamic:!1};function a(a,e){e===void 0&&(e=i);a=c("LS")(1,d("LSMetadata").schema,d("LSDynamicDependencies").cachedModules,a,void 0,void 0,e.dynamic);return b("cr:8709")!=null&&(h||(h=c("ExecutionEnvironment"))).isInBrowser?b("cr:8709").wrapSprocInvocationWithProfiler(a):a}g["default"]=a}),98);
__d("LSMessageReplySourceType",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,MESSAGE:1,STORY:2,FORWARD:3,FB_STORY_SHARE:4,IG_STORY_SHARE:5,LIGHTWEIGHT_STATUS:6,LIGHTWEIGHT_STATUS_REACTION:7,FB_FEED_POST:13,HIGHLIGHTS_TAB_POST_REPLY:14,HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:15,SHARED_ALBUM:16,AVATAR_DETAIL:17,NOTE_REPLY_ARMADILLO:18,HIGHLIGHTS_TAB_CARDS_FOR_MOM:19,HIGHLIGHTS_TAB_CARDS_FOR_BIRTHDAY:20,NOTE_MENTION:21,AI_PERSONA_NOTE_REPLY:26,AI_PERSONA_NOTE_REACTION:27,FB_MSGR_NOTE:28});f["default"]=a}),66);
__d("LSMessageReplySourceTypeV2",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,MESSAGE:1,STORY:2,FORWARD:3,FB_STORY_SHARE:4,IG_STORY_SHARE:5,STORY_BASE64_ENCODED:6,LIGHTWEIGHT_STATUS:7,CLOSE_FRIENDS:8,XMA:9,IG_NOTE:10,CLOSE_FRIENDS_NOTE_REPLY:11,LIGHTWEIGHT_STATUS_REACTION:12,FB_FEED_POST:13,HIGHLIGHTS_TAB_POST_REPLY:14,HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:15,SHARED_ALBUM:16,AVATAR_DETAIL:17,NOTE_REPLY_ARMADILLO:18,HIGHLIGHTS_TAB_CARDS_FOR_MOM:19,HIGHLIGHTS_TAB_CARDS_FOR_BIRTHDAY:20,NOTE_MENTION:21,FB_STORY_MENTION:22,EXPIRED_STORY:23,FB_PRODUCER_STORY_REPLY:24,FB_POST_MENTION:25,AI_PERSONA_NOTE_REPLY:26,AI_PERSONA_NOTE_REACTION:27,FB_MSGR_NOTE:28});f["default"]=a}),66);
__d("LSMessageSendStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,SENDING_TO_SERVER:1,SERVER_RECEIVED:2,NON_RETRIABLE_ERROR:4,RETRIABLE_ERROR:5});f["default"]=a}),66);
__d("LSReplyMessageAttachmentType",[],(function(a,b,c,d,e,f){a=Object.freeze({OTHER:0,PHOTO:1,VIDEO:2,GIF:3,STICKER:4,LINK:5,MULTIPHOTO:6,PERMANENT_RAVEN_PHOTO:7,PERMANENT_RAVEN_VIDEO:8,AUDIO:10,ROLL_CALL_PHOTO_CONTRIBUTION:11,ROLL_CALL_VIDEO_CONTRIBUTION:12,FEED_POST:13,POWER_UP:14,XMA:15,ROLL_CALL_TEXT_CONTRIBUTION:16,BLOKS_XMA:17,EPHEMERAL_RAVEN_MESSAGE:18,THIRD_PARTY_STICKER:19,SOUND_BITE:9});f["default"]=a}),66);
__d("LSXmaContentType",[],(function(a,b,c,d,e,f){a=Object.freeze({TEST:-1,NONE:0,IG_SINGLE_IMAGE_POST_SHARE:1e3,IG_MULTIPOST_SHARE:1001,IG_STORY_REPLY:1002,IG_STORY_PHOTO_SHARE:1003,IG_STORY_PHOTO_MENTION:1004,IG_CLIPS_SHARE:1005,IG_SINGLE_VIDEO_POST_SHARE:1006,IG_STORY_VIDEO_SHARE:1007,IG_STORY_REACTION:1008,IG_IGTV_SHARE:1009,IG_SHOP_SHARE:1010,IG_PROFILE_SHARE:1011,IG_STORY_PHOTO_HIGHLIGHT_SHARE:1012,IG_STORY_VIDEO_HIGHLIGHT_SHARE:1013,IG_STORY_VIDEO_MENTION:1014,IG_STORY_HIGHLIGHT_REPLY:1015,IG_STORY_HIGHLIGHT_REACTION:1016,IG_EXTERNAL_LINK:1017,IG_RECEIVER_FETCH:1018,IG_TEXT_POST_APP_SHARE:1019,IG_MULTI_MEDIA_RESPONSE:1020,FB_FEED_SHARE:2e3,FB_STORY_REPLY:2001,FB_STORY_SHARE:2002,FB_STORY_MENTION:2003,FB_FEED_VIDEO_SHARE:2004,FB_GAMING_CUSTOM_UPDATE:2005,FB_PRODUCER_STORY_REPLY:2006,FB_EVENT:2007,FB_FEED_POST_PRIVATE_REPLY:2008,FB_SHORT:2009,FB_COMMENT_MENTION_SHARE:2010,FB_STORY_LWI_REPLY:2011,FB_COMMENT_SHARE:2012,FB_POST_MENTION:2013,FB_PROFILE_DIRECTORY_ITEM:2014,MSG_EXTERNAL_LINK_SHARE:3e3,MSG_P2P_PAYMENT:3001,MSG_LOCATION_SHARING:3002,MSG_LOCATION_SHARING_V2:3003,MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY:3004,MSG_HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:3005,MSG_RECEIVER_FETCH:3006,MSG_IG_MEDIA_SHARE:3007,MSG_GEN_AI_SEARCH_PLUGIN_RESPONSE:3008,MSG_REELS_LIST:3009,MSG_CONTACT:3010,MSG_THREADS_POST_SHARE:3011,MSG_FILE:3012,MSG_AVATAR_DETAILS:3013,MSG_AI_CONTACT:3014,MSG_MEMORIES_SHARE:3015,MSG_SHARED_ALBUM_REPLY:3016,MSG_SHARED_ALBUM:3017,MSG_OCCAMADILLO_XMA:3018,MSG_GEN_AI_1P_SEARCH_RESULT:3019,MSG_EARLY_ACCESS_FB_SHARE:3020,MSG_GEN_AI_SUBSCRIPTION:3021,MSG_GEN_AI_REMINDER:3022,MSG_GEN_AI_MEMU_ONBOARDING_RESPONSE:3023,MSG_MAGICAL_MESSENGER_PLACES:3024,MSG_RECEIVER_FETCH_FALLBACK:3025,MSG_MAGICAL_MESSENGER_TASKS:3026,MSG_NOTE_REPLY:3027,MSG_NOTE_MENTION:3028,MSG_PROMPT_REPLY:3029,MSG_GEN_AI_TASK:3030,MSG_GEN_AI_RICH_RESPONSE:3040,MSG_RECEIVER_FETCH_ENT_DELETED:3041,MSG_GEN_AI_APP_DOWNLOAD_LINK:3042,MSG_GEN_AI_ENTITY:3043,MSG_OPG_P2P_PAYMENT:3044,RTC_AUDIO_CALL:4e3,RTC_VIDEO_CALL:4001,RTC_MISSED_AUDIO_CALL:4002,RTC_MISSED_VIDEO_CALL:4003,RTC_GROUP_AUDIO_CALL:4004,RTC_GROUP_VIDEO_CALL:4005,RTC_MISSED_GROUP_AUDIO_CALL:4006,RTC_MISSED_GROUP_VIDEO_CALL:4007,RTC_ONGOING_AUDIO_CALL:4008,RTC_ONGOING_VIDEO_CALL:4009,DATACLASS_SENDER_COPY:5e3,OC_AVATAR_STATIC_STICKER:6e3,LIVE_LOCATION:7e3});f["default"]=a}),66);
__d("MAWODSProxy",["CurrentMessengerUser","ExecutionEnvironment","ODS","WABridge","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=!((b=c("gkx")("23949"))!=null?b:!1);function a(a,b){var e=a.amount,f=a.entity;a=a.key;b===void 0&&(b=!0);(i||(i=c("ExecutionEnvironment"))).isInWorker&&!j?d("WABridge").getBridge().fireAndForget("event","odsBumpEntityKey",{amount:e,entity:f,key:a},b):(h||(h=d("ODS"))).bumpEntityKey(3185,f,a+"."+(d("CurrentMessengerUser").getAppID()||"unknown"),e)}g.odsBumpEntityKey=a}),98);
__d("WAGlobals",["WAJids","WALogger","err"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);h=function(){return a};return a}var i=null;function a(a){i=a}function j(){if(i==null)throw c("err")("WaMsgr api called before set");return i}function k(){var a;return(a=j().myJids)==null?void 0:a.deviceJid}function b(){var a;return(a=j().myJids)==null?void 0:a.userJid}function e(a){return d("WAJids").extractUserJid(a)===d("WAJids").extractUserJid(k())}function f(){return j().config}function l(){return j().dependencies}var m="WAOneQueue is not defined";function n(){var a=j().waOneQueue;if(a==null){d("WALogger").ERROR(h(),m);throw c("err")(m)}return a}function o(){return j().hmacKey}g.setGlobals=a;g.getMyDeviceJid=k;g.getMyUserJid=b;g.isPeerDevice=e;g.getConfig=f;g.getDependencies=l;g.getWaOneQueue=n;g.getHMACKey=o}),98);
__d("MAWUserJidWrapper",["ExecutionEnvironment","MAWCurrentUser","MAWODSProxy","WAGlobals","WAJids","WAOdsEnums"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=d("WAJids").toMsgrUserJid(d("MAWCurrentUser").getID());if((h||(h=c("ExecutionEnvironment"))).isInWorker){var b=d("WAGlobals").getMyUserJid();d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_MY_USER_JID_GETTER,key:b===a?"same":"different"});return b}return a}g.getMyUserJid=a}),98);
__d("MAWAuthor",["MAWUserJidWrapper","WAJids","isStringNullOrEmpty"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){if(a==null||a===d("WAJids").AUTHOR_SYSTEM)return null;if(d("WAJids").isAuthorMe(a))return d("MAWUserJidWrapper").getMyUserJid();var b=d("WAJids").authorAsUserJid(a);if(b==null||c("isStringNullOrEmpty")(d("WAJids").userIdFromJid(b)))return null;else return d("WAJids").authorAsUserJid(a)};g.getAuthorUserJid=a}),98);
__d("WAStanzaUtils",[],(function(a,b,c,d,e,f){"use strict";var g=/^[0-9A-Za-z-]{1,32}$/;function a(a){return a}function b(a){return g.test(a)?a:null}f.toStanzaId=a;f.validateCallId=b}),66);
__d("MAWExternalId",["I64","Random","WAStanzaUtils"],(function(a,b,c,d,e,f,g){"use strict";var h,i=131071;function j(a){return Math.floor(c("Random").random()*a)}function a(){return d("WAStanzaUtils").toStanzaId((h||(h=d("I64"))).to_string(h.and_(h.or_(h.lsl_(h.of_float(Date.now()),22),h.and_(h.of_float(j(i)),h.of_float(i))),h.max_int)))}g.generateExternalId=a}),98);
__d("MAWJids",["I64","WAJids"],(function(a,b,c,d,e,f,g){"use strict";var h;e=d("WAJids").createJidUtils({platform:"msgr"});var i=e.toUserJid,j=function(a,b){a=(h||(h=d("I64"))).to_string(a);return b?d("WAJids").toGroupJid(a):i(a)};function a(a){return j(a,!1)}function b(a){return j(a,!0)}f=function(a){a=d("WAJids").threadIdForChatJid(a);return(h||(h=d("I64"))).of_string(a)};function c(a){return d("WAJids").unsafeCoerceToChatJid(a)}g.jidUtils=e;g.toUserJid=i;g.convertIntJidToChatJid=j;g.convertIntJidToOneToOneChatJid=a;g.convertIntJidToGroupJid=b;g.convertChatJidToIntJid=f;g.threadIdToChatJid=c}),98);
__d("MNLSXMALayoutType",[],(function(a,b,c,d,e,f){a=Object.freeze({SINGLE:0,HSCROLL:1,XCENTER:2,PORTRAIT:4,LAYERED:5,PLACEHOLDER:6,EXPIRED_PLACEHOLDER:7,PILE_PROMPT:8,STACK:9,SHARED_STACK:10,STACK_CARD:11,STANDARD_DXMA:12,DXMA_PLACEHOLDER:13,THREAD_SHORTCUT:14,LIST_DXMA:15,GRID:16,BLOKS_XMA:17,TWO_CARD:18,NOTE:19,VSTACK:20,SQUIRCLE:21,REPLY:22,RICH_RESPONSE:23,CODE:24,TABLE:25,SQUIRCLE_SHARED_STACK:26,UNIFIED_RESPONSE:27,CARD:28});f["default"]=a}),66);
__d("MNXMAPreviewImageDecorationType",[],(function(a,b,c,d,e,f){a=Object.freeze({DEFAULT:0,COLLAGE:1,VIDEO:2,MESSENGER_ICON:3,INSTAGRAM_ICON:4,SHOPPING:5,UPCOMING_EVENT:6,LIVE:7,REEL:8,IGTV:9,YOUTUBE_VIDEO:10,YOUTUBE_SHORTS:11,COMMENT:12,BLUR:13,PILL:14,MESSENGER_CHANNEL_IMAGE:15,TROPHY:16,DXMA_LIVE:17,DXMA_LIVE_ENDED:18,LIKE_BUBBLE_REPLY:19,LIKE_BUBBLES:20,REPOST:21});f["default"]=a}),66);
__d("MessagingAttachmentType",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,STICKER:1,IMAGE:2,ANIMATED_IMAGE:3,VIDEO:4,AUDIO:5,FILE:6,XMA:7,EPHEMERAL_IMAGE:8,EPHEMERAL_VIDEO:9,SELFIE_STICKER:10,SOUND_BITE:12,CATALOG_ITEM:13,POWER_UP:14,THIRD_PARTY_STICKER:15});f["default"]=a}),66);
__d("OfflineThreadingId",["I64","XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("I64"))).of_string("4194303");function a(){return(h||(h=d("I64"))).to_string(j())}function j(){var a=d("XPlatReactCrypto").getRandomValues(new Uint8Array(8));a=new DataView(a.buffer);a=(h||(h=d("I64"))).add(h.lsl_(h.of_int32(a.getUint32(0)),32),h.of_int32(a.getUint32(4)));return k(Date.now(),a)}function k(a,b){return(h||(h=d("I64"))).and_(h.or_(h.lsl_(h.of_float(a),22),h.and_(b,i)),h.max_int)}function b(a){var b=j(),c=[];for(var e=0;e<a.length;e++)c.push([a[e],(h||(h=d("I64"))).to_string(b)]),b=l(b);return c}function l(a,b){b===void 0&&(b=(h||(h=d("I64"))).one);var c=m(a);a=n(a);return k(c,(h||(h=d("I64"))).add(a,b))}function m(a){return(h||(h=d("I64"))).to_float(h.lsr_(a,22))}function n(a){return(h||(h=d("I64"))).and_(a,i)}g.createOfflineThreadingID=a;g.createForItemsInOrder=b;g.extractTimestamp=m}),98);
__d("RetUtil",["LSResult"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("LSResult")(a)}g.getNullableRetResult=a}),98);
__d("URLMatcherConfig",[],(function(a,b,c,d,e,f){e.exports={tlds:"(?:\\.(com|\ud55c\uad6d|\uc0bc\uc131|\ub2f7\ucef4|\ub2f7\ub137|\u9999\u6e2f|\u9999\u683c\u91cc\u62c9|\u9910\u5385|\u98df\u54c1|\u98de\u5229\u6d66|\u96fb\u8a0a\u76c8\u79d1|\u96c6\u56e2|\u901a\u8ca9|\u8d2d\u7269|\u8c37\u6b4c|\u8bfa\u57fa\u4e9a|\u8054\u901a|\u7f51\u7edc|\u7f51\u7ad9|\u7f51\u5e97|\u7f51\u5740|\u7ec4\u7ec7\u673a\u6784|\u79fb\u52a8|\u73e0\u5b9d|\u70b9\u770b|\u6fb3\u9580|\u6e38\u620f|\u6de1\u9a6c\u9521|\u673a\u6784|\u66f8\u7c4d|\u65f6\u5c1a|\u65b0\u95fb|\u65b0\u52a0\u5761|\u653f\u5e9c|\u653f\u52a1|\u624b\u8868|\u624b\u673a|\u6211\u7231\u4f60|\u6148\u5584|\u5fae\u535a|\u5e7f\u4e1c|\u5de5\u884c|\u5bb6\u96fb|\u5a31\u4e50|\u5929\u4e3b\u6559|\u5927\u62ff|\u5927\u4f17\u6c7d\u8f66|\u5728\u7ebf|\u5609\u91cc\u5927\u9152\u5e97|\u5609\u91cc|\u5546\u6807|\u5546\u5e97|\u5546\u57ce|\u53f0\u7063|\u53f0\u6e7e|\u516c\u76ca|\u516c\u53f8|\u516b\u5366|\u5065\u5eb7|\u4fe1\u606f|\u4f5b\u5c71|\u4f01\u4e1a|\u4e2d\u6587\u7f51|\u4e2d\u570b|\u4e2d\u56fd|\u4e2d\u4fe1|\u4e16\u754c|\u30dd\u30a4\u30f3\u30c8|\u30d5\u30a1\u30c3\u30b7\u30e7\u30f3|\u30bb\u30fc\u30eb|\u30b9\u30c8\u30a2|\u30b3\u30e0|\u30b0\u30fc\u30b0\u30eb|\u30af\u30e9\u30a6\u30c9|\u307f\u3093\u306a|\u10d2\u10d4|\u0e44\u0e17\u0e22|\u0e04\u0e2d\u0e21|\u0dbd\u0d82\u0d9a\u0dcf|\u0d2d\u0d3e\u0d30\u0d24\u0d02|\u0cad\u0cbe\u0cb0\u0ca4|\u0c2d\u0c3e\u0c30\u0c24\u0c4d|\u0b9a\u0bbf\u0b99\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0bc2\u0bb0\u0bcd|\u0b87\u0bb2\u0b99\u0bcd\u0b95\u0bc8|\u0b87\u0ba8\u0bcd\u0ba4\u0bbf\u0baf\u0bbe|\u0b2d\u0b3e\u0b30\u0b24|\u0aad\u0abe\u0ab0\u0aa4|\u0a2d\u0a3e\u0a30\u0a24|\u09ad\u09be\u09f0\u09a4|\u09ad\u09be\u09b0\u09a4|\u09ac\u09be\u0982\u09b2\u09be|\u0938\u0902\u0917\u0920\u0928|\u092d\u093e\u0930\u094b\u0924|\u092d\u093e\u0930\u0924\u092e\u094d|\u092d\u093e\u0930\u0924|\u0928\u0947\u091f|\u0915\u0949\u092e|\u0680\u0627\u0631\u062a|\u067e\u0627\u06a9\u0633\u062a\u0627\u0646|\u0647\u0645\u0631\u0627\u0647|\u0645\u0648\u0642\u0639|\u0645\u0648\u0628\u0627\u064a\u0644\u064a|\u0645\u0644\u064a\u0633\u064a\u0627|\u0645\u0635\u0631|\u0643\u0648\u0645|\u0643\u0627\u062b\u0648\u0644\u064a\u0643|\u0642\u0637\u0631|\u0641\u0644\u0633\u0637\u064a\u0646|\u0639\u0645\u0627\u0646|\u0639\u0631\u0628|\u0639\u0631\u0627\u0642|\u0634\u0628\u0643\u0629|\u0633\u0648\u0631\u064a\u0629|\u0633\u0648\u062f\u0627\u0646|\u062a\u0648\u0646\u0633|\u0628\u06be\u0627\u0631\u062a|\u0628\u064a\u062a\u0643|\u0628\u0627\u0632\u0627\u0631|\u0628\u0627\u0631\u062a|\u0627\u06cc\u0631\u0627\u0646|\u0627\u0645\u0627\u0631\u0627\u062a|\u0627\u0644\u0645\u063a\u0631\u0628|\u0627\u0644\u0639\u0644\u064a\u0627\u0646|\u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629|\u0627\u0644\u062c\u0632\u0627\u0626\u0631|\u0627\u0644\u0627\u0631\u062f\u0646|\u0627\u0631\u0627\u0645\u0643\u0648|\u0627\u062a\u0635\u0627\u0644\u0627\u062a|\u0627\u0628\u0648\u0638\u0628\u064a|\u05e7\u05d5\u05dd|\u0570\u0561\u0575|\u049b\u0430\u0437|\u0443\u043a\u0440|\u0441\u0440\u0431|\u0441\u0430\u0439\u0442|\u0440\u0444|\u0440\u0443\u0441|\u043e\u0440\u0433|\u043e\u043d\u043b\u0430\u0439\u043d|\u043c\u043e\u0441\u043a\u0432\u0430|\u043c\u043e\u043d|\u043c\u043a\u0434|\u043a\u043e\u043c|\u043a\u0430\u0442\u043e\u043b\u0438\u043a|\u0435\u044e|\u0434\u0435\u0442\u0438|\u0431\u0435\u043b|\u0431\u0433|\u03b5\u03bb|zw|zuerich|zone|zm|zip|zero|zara|zappos|za|yun|yt|youtube|you|yokohama|yoga|yodobashi|ye|yandex|yamaxun|yahoo|yachts|xyz|xxx|xn--zfr164b|xn--ygbi2ammx|xn--yfro4i67o|xn--y9a3aq|xn--xkc2dl3a5ee0h|xn--xkc2al3hye2a|xn--xhq521b|xn--wgbl6a|xn--wgbh1c|xn--w4rs40l|xn--w4r85el8fhu5dnra|xn--vuq861b|xn--vhquv|xn--vermgensberatung-pwb|xn--vermgensberater-ctb|xn--unup4y|xn--tiq49xqyj|xn--tckwe|xn--t60b56a|xn--ses554g|xn--s9brj9c|xn--rvc1e0am3e|xn--rovu88b|xn--rhqv96g|xn--qxam|xn--qxa6a|xn--qcka1pmc|xn--q9jyb4c|xn--q7ce6a|xn--pssy2u|xn--pgbs0dh|xn--p1ai|xn--p1acf|xn--otu796d|xn--ogbpf8fl|xn--o3cw4h|xn--nyqy26a|xn--nqv7fs00ema|xn--nqv7f|xn--node|xn--ngbrx|xn--ngbe9e0a|xn--ngbc5azd|xn--mxtq1m|xn--mk1bu44c|xn--mix891f|xn--mgbx4cd0ab|xn--mgbtx2b|xn--mgbt3dhd|xn--mgbpl2fh|xn--mgbi4ecexp|xn--mgbgu82a|xn--mgberp4a5d4ar|xn--mgbcpq6gpa1a|xn--mgbca7dzdo|xn--mgbc0a9azcg|xn--mgbbh1a71e|xn--mgbbh1a|xn--mgbayh7gpa|xn--mgbai9azgqp6j|xn--mgbah1a3hjkrd|xn--mgbab2bd|xn--mgbaam7a8h|xn--mgba7c0bbn0a|xn--mgba3a4f16a|xn--mgba3a3ejt|xn--mgb9awbf|xn--lgbbat1ad8j|xn--l1acc|xn--kput3i|xn--kpry57d|xn--kprw13d|xn--kcrx77d1x4a|xn--jvr189m|xn--jlq480n2rg|xn--j6w193g|xn--j1amh|xn--j1aef|xn--io0a7i|xn--imr513n|xn--i1b6b1a6a2e|xn--hxt814e|xn--h2brj9c8c|xn--h2brj9c|xn--h2breg3eve|xn--gk3at1e|xn--gecrj9c|xn--gckr3f0f|xn--g2xx48c|xn--fzys8d69uvgm|xn--fzc2c9e2c|xn--fpcrj9c3d|xn--flw351e|xn--fjq720a|xn--fiqz9s|xn--fiqs8s|xn--fiq64b|xn--fiq228c5hs|xn--fhbei|xn--fct429k|xn--efvy88h|xn--eckvdtc9d|xn--e1a4c|xn--d1alf|xn--d1acj3b|xn--czru2d|xn--czrs0t|xn--czr694b|xn--clchc0ea0b2g2a9gcd|xn--cg4bki|xn--cckwcxetd|xn--cck2b3b|xn--c2br7g|xn--c1avg|xn--bck1b9a5dre4c|xn--b4w605ferd|xn--9krt00a|xn--9et52u|xn--9dbq2a|xn--90ais|xn--90ae|xn--90a3ac|xn--8y0a063a|xn--80aswg|xn--80asehdb|xn--80aqecdr1a|xn--80ao21a|xn--80adxhks|xn--6qq986b3xl|xn--6frz82g|xn--5tzm5g|xn--5su34j936bgsg|xn--55qx5d|xn--55qw42g|xn--54b7fta0cc|xn--4gbrim|xn--4dbrk0ce|xn--45q11c|xn--45brj9c|xn--45br5cyl|xn--42c2d9a|xn--3pxu8k|xn--3hcrj9c|xn--3e0b707e|xn--3ds443g|xn--3bst00m|xn--30rr7y|xn--2scrj9c|xn--1qqw23a|xn--1ck2e1b|xn--11b4c3d|xin|xihuan|xerox|xbox|wtf|wtc|ws|wow|world|works|work|woodside|wolterskluwer|wme|winners|wine|windows|win|williamhill|wiki|wien|whoswho|wf|weir|weibo|wedding|wed|website|weber|webcam|weatherchannel|weather|watches|watch|wanggou|wang|walter|walmart|wales|vu|voyage|voto|voting|vote|volvo|vodka|vn|vlaanderen|vivo|viva|vision|visa|virgin|vip|vin|villas|viking|vig|video|viajes|vi|vg|vet|versicherung|verisign|ventures|vegas|ve|vc|vanguard|vana|vacations|va|uz|uy|us|ups|uol|uno|university|unicom|uk|ug|ubs|ubank|ua|tz|tw|tvs|tv|tushu|tunes|tui|tube|tt|trv|trust|travelersinsurance|travelers|travel|training|trading|trade|tr|toys|toyota|town|tours|total|toshiba|toray|top|tools|tokyo|today|to|tn|tmall|tm|tl|tkmaxx|tk|tjx|tjmaxx|tj|tirol|tires|tips|tienda|tickets|tiaa|theatre|theater|thd|th|tg|tf|teva|tennis|temasek|tel|technology|tech|team|tdk|td|tci|tc|taxi|tax|tattoo|tatar|tatamotors|target|taobao|talk|taipei|tab|sz|systems|sydney|sy|sx|swiss|swatch|sv|suzuki|surgery|surf|support|supply|supplies|sucks|su|style|study|studio|stream|store|storage|stockholm|stcgroup|stc|statefarm|statebank|star|staples|stada|st|ss|srl|sr|spot|sport|space|spa|soy|sony|song|solutions|solar|sohu|software|softbank|social|soccer|so|sncf|sn|smile|smart|sm|sling|sl|skype|sky|skin|ski|sk|sj|site|singles|sina|silk|si|show|shouji|shopping|shop|shoes|shiksha|shia|shell|sharp|shangrila|sh|sg|sfr|sexy|sex|sew|seven|services|sener|select|seek|security|secure|seat|search|se|sd|scot|science|schwarz|schule|school|scholarships|schmidt|schaeffler|scb|sc|sbs|sbi|sb|saxo|save|sas|sarl|sap|sanofi|sandvikcoromant|sandvik|samsung|samsclub|salon|sale|sakura|safety|safe|saarland|sa|ryukyu|rwe|rw|run|ruhr|rugby|ru|rsvp|rs|room|rogers|rodeo|rocks|ro|rip|rio|ril|ricoh|richardli|rich|rexroth|reviews|review|restaurant|rest|republican|report|repair|rentals|rent|ren|reliance|reit|reisen|reise|rehab|redumbrella|redstone|red|recipes|realty|realtor|realestate|read|re|radio|racing|quest|quebec|qpon|qa|py|pwc|pw|pub|pt|ps|prudential|pru|protection|property|properties|promo|progressive|prof|productions|prod|pro|prime|press|praxi|pramerica|pr|post|porn|politie|poker|pohl|pnc|pn|pm|plus|plumbing|playstation|play|place|pl|pk|pizza|pioneer|pink|ping|pin|pid|pictures|pictet|pics|physio|photos|photography|photo|phone|philips|phd|pharmacy|ph|pg|pfizer|pf|pet|pe|pccw|pay|party|parts|partners|pars|paris|panasonic|page|pa|ovh|ott|otsuka|osaka|origins|organic|org|orange|oracle|open|ooo|online|onl|ong|one|omega|om|ollo|olayangroup|olayan|okinawa|office|observer|obi|nz|nyc|nu|ntt|nrw|nra|nr|np|nowtv|nowruz|now|norton|nokia|no|nl|nissay|nissan|ninja|nikon|nike|nico|ni|nhk|ngo|ng|nfl|nf|nexus|nextdirect|next|news|new|neustar|network|netflix|netbank|net|nec|ne|nc|nba|navy|name|nagoya|nab|na|mz|my|mx|mw|mv|music|museum|mu|mtr|mtn|mt|msd|ms|mr|mq|mp|movie|mov|motorcycles|moto|moscow|mortgage|mormon|monster|money|monash|mom|moi|moe|moda|mobile|mobi|mo|mn|mma|mm|mls|mlb|ml|mk|mitsubishi|mit|mint|mini|mil|microsoft|miami|mh|mg|merckmsd|menu|men|memorial|meme|melbourne|meet|media|med|me|md|mckinsey|mc|mba|mattel|marshalls|marriott|markets|marketing|market|map|mango|management|man|makeup|maison|maif|madrid|ma|ly|lv|luxury|luxe|lundbeck|lu|ltda|ltd|lt|ls|lr|lplfinancial|lpl|love|lotto|lotte|london|lol|locus|locker|loans|loan|llp|llc|lk|living|live|lipsy|link|lincoln|limo|limited|lilly|like|lighting|lifestyle|lifeinsurance|life|lidl|li|lgbt|lexus|lego|legal|lefrak|leclerc|lease|lds|lc|lb|lawyer|law|latrobe|latino|lat|lasalle|lanxess|landrover|land|lancaster|lamer|lamborghini|lacaixa|la|kz|kyoto|ky|kw|kuokgroup|kred|krd|kr|kpn|kpmg|kp|kosher|komatsu|koeln|kn|km|kiwi|kitchen|kindle|kim|kids|kia|ki|kh|kg|kfh|kerryproperties|kerrylogistics|kerryhotels|ke|kddi|kaufen|juniper|juegos|jprs|jpmorgan|jp|joy|jot|joburg|jobs|jo|jnj|jmp|jm|jll|jio|jewelry|jetzt|jeep|je|jcb|java|jaguar|itv|itau|it|istanbul|ist|ismaili|is|irish|ir|iq|ipiranga|io|investments|intuit|international|int|insure|insurance|institute|ink|ing|info|infiniti|industries|inc|in|immobilien|immo|imdb|imamat|im|il|ikano|ifm|ieee|ie|id|icu|ice|icbc|ibm|hyundai|hyatt|hughes|hu|ht|hsbc|hr|how|house|hotmail|hotels|hot|hosting|host|hospital|horse|honda|homesense|homes|homegoods|homedepot|holiday|holdings|hockey|hn|hm|hkt|hk|hiv|hitachi|hisamitsu|hiphop|hermes|here|helsinki|help|healthcare|health|hdfcbank|hdfc|hbo|haus|hangout|hamburg|hair|gy|gw|guru|guitars|guide|guge|gucci|gu|gt|gs|group|grocery|gripe|green|gratis|graphics|grainger|gr|gq|gp|gov|got|gop|google|goog|goodyear|goo|golf|goldpoint|gold|godaddy|gn|gmx|gmo|gmbh|gmail|gm|globo|global|gle|glass|gl|giving|gives|gifts|gift|gi|gh|ggee|gg|gf|george|genting|gent|gea|ge|gdn|gd|gbiz|gb|gay|garden|gap|games|game|gallup|gallo|gallery|gal|ga|fyi|futbol|furniture|fund|fun|fujitsu|ftr|frontier|frogans|frl|fresenius|free|fr|fox|foundation|forum|forsale|forex|ford|football|food|foo|fo|fm|fly|flowers|florist|flir|flights|flickr|fk|fj|fitness|fit|fishing|fish|firmdale|firestone|fire|financial|finance|final|film|fido|fidelity|fi|ferrero|ferrari|feedback|fedex|fast|fashion|farmers|farm|fans|fan|family|faith|fairwinds|fail|fage|extraspace|express|exposed|expert|exchange|events|eus|eurovision|eu|et|estate|esq|es|erni|ericsson|er|equipment|epson|enterprises|engineering|engineer|energy|emerck|email|eg|ee|education|edu|edeka|eco|ec|eat|earth|dz|dvr|dvag|durban|dupont|dunlop|dubai|dtv|drive|download|dot|domains|dog|doctor|docs|do|dnp|dm|dk|dj|diy|dish|discover|discount|directory|direct|digital|diet|diamonds|dhl|dev|design|desi|dentist|dental|democrat|delta|deloitte|dell|delivery|degree|deals|dealer|deal|de|dds|dclk|day|datsun|dating|date|data|dance|dad|cz|cyou|cymru|cy|cx|cw|cv|cuisinella|cu|cruises|cruise|crs|crown|cricket|creditunion|creditcard|credit|cr|cpa|courses|coupons|coupon|country|corsica|coop|cool|cooking|contractors|contact|consulting|construction|condos|comsec|computer|compare|company|community|commbank|com|cologne|college|coffee|codes|coach|co|cn|cm|clubmed|club|cloud|clothing|clinique|clinic|click|cleaning|claims|cl|ck|city|citic|citi|citadel|cisco|circle|cipriani|ci|church|chrome|christmas|chintai|cheap|chat|chase|charity|channel|chanel|ch|cg|cfd|cfa|cf|cern|ceo|center|cd|cc|cbre|cbn|cba|catholic|catering|cat|casino|cash|case|casa|cars|careers|career|care|cards|caravan|car|capitalone|capital|capetown|canon|camp|camera|cam|calvinklein|call|cal|cafe|cab|ca|bzh|bz|by|bw|bv|buzz|buy|business|builders|build|bt|bs|brussels|brother|broker|broadway|bridgestone|bradesco|br|box|boutique|bot|boston|bostik|bosch|booking|book|boo|bond|bom|bofa|boehringer|boats|bo|bnpparibas|bn|bmw|bms|bm|blue|bloomberg|blog|blockbuster|blackfriday|black|bj|biz|bio|bingo|bing|bike|bid|bible|bi|bharti|bh|bg|bf|bet|bestbuy|best|berlin|bentley|beer|beauty|beats|be|bd|bcn|bcg|bbva|bbt|bbc|bb|bayern|bauhaus|basketball|baseball|bargains|barefoot|barclays|barclaycard|barcelona|bar|bank|band|banamex|baidu|baby|ba|azure|az|axa|ax|aws|aw|autos|auto|author|auspost|audio|audible|audi|auction|au|attorney|athleta|at|associates|asia|asda|as|arte|art|arpa|army|archi|aramco|arab|ar|aquarelle|aq|apple|app|apartments|aol|ao|anz|anquan|android|analytics|amsterdam|amica|amfam|amex|americanfamily|americanexpress|amazon|am|alstom|alsace|ally|allstate|allfinanz|alipay|alibaba|al|akdn|airtel|airforce|airbus|aig|ai|agency|agakhan|ag|africa|afl|af|aetna|aero|aeg|ae|adult|ads|ad|actor|aco|accountants|accountant|accenture|academy|ac|abudhabi|abogado|able|abc|abbvie|abbott|abb|aarp|aaa))"}}),null);
__d("URLMatcher",["URLMatcherConfig"],(function(a,b,c,d,e,f){d="!\"#%&'()*,-./:;<>?@[\\]^_`{|}";f="\u2000-\u206f\xab\xbb\uff08\uff09";var g="(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])",h="(?:https?)://";g="(?:(^|\\s)(?:"+g+"[.]){3}"+g+")";g=g;var i="\\[(?:(?:[A-Fa-f0-9]{1,4}::?){1,7}[A-Fa-f0-9]{1,4})\\]",j="(?:\\b)www\\d{0,3}[.]";d="[^\\s"+d+f+"]";f="(?:(?:(?:[.:\\-_%@]|"+d+")*"+d+")|"+i+")";d="(?::\\d+){0,1}";var k="(?=[/?#])";b=b("URLMatcherConfig").tlds;var l="(?:(?:"+h+f+d+")|(?:"+g+d+")|(?:"+i+d+")|(?:"+j+f+b+d+")|(?:"+f+b+d+k+"))";k="(?:(?:"+h+f+d+")|(?:"+g+d+")|(?:"+i+d+")|(?:"+j+f+b+d+")|(?:"+f+b+d+"))";g="[/#?]";i="\\([^\\s()<>]+\\)";var m="[^\\s()<>?#]+",n=new RegExp(l,"im"),o="^\\[[0-9]{1,4}:[0-9]{1,4}:[A-Fa-f0-9]{1,4}\\]",p=new RegExp(o,"im"),q="(?:(?:"+g+")(?:(?:"+i+"|"+m+")*)*)*",r=new RegExp("((?:"+k+")(?:"+q+"))","im");function a(){r.compile()}var s=new RegExp("((?:"+h+f+d+")|(?:"+j+f+b+d+"))"),t=/[\s\'\";]/,u=new RegExp(g,"im"),v=new RegExp("[\\s!\"#%&'()*,./:;<>?@[\\]^`{|}\xab\xbb\u2000-\u206f\uff08\uff09]","im"),w=new RegExp("[\\s()<>?#]","im"),x=new RegExp("\\s()<>"),y=function(a){if(a!=null&&a.indexOf("@")!==-1)return s.exec(a)?a:null;else return a},z=function(a){return new RegExp("((?:"+l+")(?:"+q+"))",a)};function c(){return r.source}o=function(a){return A(a,z("im"))};i=function(a){return B(a,z("igm"))};m=function(a){return A(a,r)};var A=function(a,b){b=b.exec(a);return b==null||b.length===0?null:y(b[1]||null)},B=function(a,b){a=a.match(b);return a==null?[]:a.filter(Boolean)||[]};k=function(a){return n.exec(a)};h=function(a){return!t.test(a.charAt(a.length-1))};j=function(a){a=a;var b=!1;do{var c,d=n.exec(a);if(!d)return null;((c=d[1])==null?void 0:c.trim())===""&&(d[0]=d[0].trim(),d.index+=d[1].length);b=!1;if(d[0][0]==="["&&d.index>0&&a[d.index-1]==="@"){c=p.exec(d[0]);c&&(b=!0,a=a.substr(d.index+c[0].length))}}while(b);if(!d)return null;c=a.substr(d.index+d[0].length);if(c.length===0||!u.test(c[0]))return y(d[0]);b=0;a=0;var e=1,f=["(","["],g=[")","]"],h=0,i=a;for(var j=1;j<c.length;j++){var k=c[j];if(i===a){if(f.includes(k))h+=1,i=e;else if(u.test(k)||!v.test(k))b=j;else if(w.test(k))break}else if(f.includes(k))h+=1;else if(g.includes(k))h-=1,h===0&&(i=a,b=j);else if(x.test(k))break}return y(d[0]+c.substring(0,b+1))};f={compilePermissiveHostPathMatcher:a,permissiveHostPathMatch:m,permissiveMatch:o,permissiveMultiMatch:i,matchToPattern:A,multiMatchToPattern:B,matchHost:k,trigger:h,match:j,getPermissiveHostPathMatcherSource:c};e.exports=f}),null);
__d("WALongInt",["WAHex","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is over 64 bits']);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is not a valid decimal string']);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([""," is not a safe integer"]);j=function(){return a};return a}function k(a){if(typeof a!=="number"){d("WALogger").LOG(j(),a).color("red");throw new Error("numberOrThrowIfTooLarge is given a non-safe integer")}return a}f=function(a){return a==null?a:k(a)};function a(a){return a==null||typeof a!=="number"?null:a}function b(a,b){if(typeof a==="number"&&typeof b==="number")return a>b;a=typeof a==="number"?d("WAHex").hexLongFromNumber(a):a;b=typeof b==="number"?d("WAHex").hexLongFromNumber(b):b;return d("WAHex").isBiggerHexLong(a,b)}function c(a){if(typeof a==="number")return a.toString(10);var b=d("WAHex").hexLongToHex(a),c=[0],e=0;for(var f=0;f<b.length;f++){e=d("WAHex").hexAt(b,f);for(var g=0;g<c.length;g++)c[g]=c[g]*16+e,e=c[g]/10|0,c[g]%=10;while(e>0)c.push(e%10),e=e/10|0}g=c.reverse().join("");return d("WAHex").hexLongIsNegative(a)?"-"+g:g}function e(a){if(!/^-?\d+$/.test(a)){d("WALogger").LOG(i(),a).color("red");throw new Error("decimalStringToLongInt is given an invalid decimal string")}var b=a[0]==="-",c=a.replace(/^-?0*/,""),e=c.length;if(e<16||e===16&&c<="9007199254740991")return b?-Number(c):Number(c);if(e>20||e===20&&c>"18446744073709551615"||b&&(e>19||e===19&&c>"9223372036854775807")){d("WALogger").LOG(h(),a).color("red");throw new Error("decimalStringToHexLong is given value over 64 bits")}a=0;var f=0;for(var g=0;g<e;g++)a=a*10+Number(c[g]),f=f*10+Math.floor(a/4294967296),a=a%4294967296;return d("WAHex").createHexLongFrom32Bits(f,a,b)}g.numberOrThrowIfTooLarge=k;g.maybeNumberOrThrowIfTooLarge=f;g.maybeNumber=a;g.isBiggerLongInt=b;g.longIntToDecimalString=c;g.decimalStringToLongInt=e}),98);
__d("WATextEncoding",[],(function(a,b,c,d,e,f){"use strict";e=TextEncoder;var g=TextDecoder,h=e,i=g;function a(){return new h()}function b(){return new i()}function c(a){h=a}function d(a){i=a}f.newTextEncoder=a;f.newTextDecoder=b;f.setTextEncoderClass=c;f.setTextDecoderClass=d}),66);
__d("last",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=null;if(Array.isArray(a)||typeof a==="string")a.length&&(b={value:a[a.length-1]});else for(a of a)b=b||{},b.value=a;return b?b.value:null}f["default"]=a}),66);/*FB_PKG_DELIM*/
__d("AudioClipsBrowserBlockMicAccessFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("73");b=d("FalcoLoggerInternal").create("audio_clips_browser_block_mic_access",a);e=b;g["default"]=e}),98);
__d("AudioClipsCancelledByUserFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("39");b=d("FalcoLoggerInternal").create("audio_clips_cancelled_by_user",a);e=b;g["default"]=e}),98);
__d("AudioClipsDialogNotnowMicAccessFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("74");b=d("FalcoLoggerInternal").create("audio_clips_dialog_notnow_mic_access",a);e=b;g["default"]=e}),98);
__d("AudioClipsDialogOkMicAccessFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("75");b=d("FalcoLoggerInternal").create("audio_clips_dialog_ok_mic_access",a);e=b;g["default"]=e}),98);
__d("AudioClipsMicAccessCheckFailedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("76");b=d("FalcoLoggerInternal").create("audio_clips_mic_access_check_failed",a);e=b;g["default"]=e}),98);
__d("AudioClipsPlaybackPauseFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("44");b=d("FalcoLoggerInternal").create("audio_clips_playback_pause",a);e=b;g["default"]=e}),98);
__d("AudioClipsPlaybackResumeFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("45");b=d("FalcoLoggerInternal").create("audio_clips_playback_resume",a);e=b;g["default"]=e}),98);
__d("AudioClipsPlaybackStartFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("47");b=d("FalcoLoggerInternal").create("audio_clips_playback_start",a);e=b;g["default"]=e}),98);
__d("AudioClipsStartRecordingClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("51");b=d("FalcoLoggerInternal").create("audio_clips_start_recording_click",a);e=b;g["default"]=e}),98);
__d("AudioClipsStopRecordingClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("52");b=d("FalcoLoggerInternal").create("audio_clips_stop_recording_click",a);e=b;g["default"]=e}),98);
__d("CometContextualLayer.react",["BaseContextualLayer.react","react","useCometVisualChangeTracker","useMergeRefs"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.ref;a=babelHelpers.objectWithoutPropertiesLoose(a,["ref"]);var d=c("useCometVisualChangeTracker")();b=c("useMergeRefs")(b,d);return i.jsx(c("BaseContextualLayer.react"),babelHelpers["extends"]({},a,{ref:b}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometInternalTypeaheadFetchContext",["emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({fetch:c("emptyFunction"),isLoading:!1,refetch:c("emptyFunction"),source:"all"});g["default"]=b}),98);
__d("CometInternalTypeaheadStateContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({activeEntries:[],highlightedEntry:null,highlightedEntrySource:null,secondaryActionHighlighted:null});g["default"]=b}),98);
__d("getPeopleTypeaheadNullStateText",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";function a(){return h._(/*BTDS*/"No se han encontrado personas")}g["default"]=a}),226);
__d("CometMediaViewerMentionsTypeaheadEmptyState.react",["FDSText.react","getPeopleTypeaheadNullStateText","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(){return i.jsx("div",babelHelpers["extends"]({className:"x6s0dn4 x78zum5 xc9qbxq xl56j7k"},{children:i.jsx(c("FDSText.react"),{align:"center",color:"secondary",type:"body2",children:c("getPeopleTypeaheadNullStateText")()})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("cometTypeaheadKeyboardNavigationUtils",[],(function(a,b,c,d,e,f){"use strict";function g(a,b,c,d){var e;if(a.length===0){c(null,null);return}var f=b!=null?a.findIndex(function(a){return a.key===b})+1:0;f===a.length&&(f=0);e=(e=(e=a[f])==null?void 0:e.hasSecondaryAction)!=null?e:!1;c(a[f],e?d:null)}function h(a,b,c,d){var e;if(a.length===0){c(null,null);return}var f=b!=null?a.findIndex(function(a){return a.key===b})-1:a.length-1;f===-1&&(f=a.length-1);e=(e=(e=a[f])==null?void 0:e.hasSecondaryAction)!=null?e:!1;c(a[f],e?d:null)}function a(a,b,c,d){if(a.length===0){c(null,!1);return}if(d===!0){d=a.findIndex(function(a){return a.key===b});c(a[d],!1)}else h(a,b,c,!0)}function b(a,b,c,d){if(a.length===0){c(null,!1);return}if(d===!0)g(a,b,c,!1);else{d=a.findIndex(function(a){return a.key===b});c(a[d],!0)}}f.moveDown=g;f.moveUp=h;f.moveLeft=a;f.moveRight=b}),66);
__d("cometTypeaheadODSLogFetchCacheEvent",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("ODS").__setRef("cometTypeaheadODSLogFetchCacheEvent");function a(a,b,c){b===void 0&&(b=!0);c===void 0&&(c=1);if(!b)return;h.onReady(function(b){b.bumpEntityKey(354,a,"fetched-cache",c)})}g["default"]=a}),98);
__d("cometTypeaheadODSLogFetchNetworkEvent",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("ODS").__setRef("cometTypeaheadODSLogFetchNetworkEvent");function a(a,b,c){b===void 0&&(b=!0);c===void 0&&(c=1);if(!b)return;h.onReady(function(b){b.bumpEntityKey(354,a,"fetched-network",c)})}g["default"]=a}),98);
__d("useBaseTypeaheadDataSourceFetchResolverCache",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(a){var b=a.dataSource;return i(function(a){var c=a.onResolvePayload;a=a.requestParams;var d=a.perfTraceAPI;a=b.fetchCache(a);d&&d.addMarkerPoint("cachedResponse","AppTiming");c(a);return a},[b])}g["default"]=a}),98);
__d("useBaseTypeaheadDataSourceFetchResolverNetwork",["promiseDone","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useEffect,k=b.useRef,l=b.useState;function a(a){var b=a.dataSource;a=l(!1);var d=a[0],e=a[1],f=k(0),g=k(!1);j(function(){g.current=!1;return function(){g.current=!0}},[]);a=i(function(a){var d=a.onResolvePayload;a=a.requestParams;f.current++;var h=f.current,i=a.perfTraceAPI;e(!0);c("promiseDone")(b.fetchNetwork(a).then(function(a){!g.current&&h===f.current&&(d(a),i&&i.addMarkerPoint("networkResponse","AppTiming"))})["finally"](function(){!g.current&&h===f.current&&(f.current=0,e(!1))}))},[b]);return[{isLoading:d},a]}g["default"]=a}),98);
__d("useBaseTypeaheadDataSourceFetchResolver",["baseTypeaheadFlattenEntries","cometTypeaheadODSLogFetchCacheEvent","cometTypeaheadODSLogFetchNetworkEvent","emptyObject","react","recoverableViolation","useBaseTypeaheadDataSourceFetchResolverCache","useBaseTypeaheadDataSourceFetchResolverNetwork","useDebouncedComet"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useRef,k=8;function a(a,b){var d=a.dataSource,e=a.dataSourceFetchConfigParams,f=a.onResolvePayload;a=e!=null?e:c("emptyObject");e=a.renderLimit;var g=e===void 0?k:e;e=a.bypassCacheRenderLimitCheck;var h=e===void 0?!1:e;e=a.shouldDebounceNetwork;var l=e===void 0?!0:e;e=a.networkDebounceWaitDuration;a=a.requestFlow;var m=j(a),n=c("useBaseTypeaheadDataSourceFetchResolverCache")({dataSource:d});a=c("useBaseTypeaheadDataSourceFetchResolverNetwork")({dataSource:d});var o=a[0].isLoading,p=a[1],q=c("useDebouncedComet")(p,{wait:e});function r(){var a=!1;function e(b,d){var e=d.isTraceComplete;d=d.source;try{a||f(b,{isTraceComplete:e,source:d})}catch(b){a||c("recoverableViolation")("Failed to resolve fetched payload","search")}}function i(a){var b=a.requestParams;a=a.source;var f=b.requestFlow;f!=null&&(m.current=f);if(typeof d.fetchCache==="function"&&["all","cache"].includes(a)){f=n({onResolvePayload:function(a){var b=a.entries;b=c("baseTypeaheadFlattenEntries")(b).length;e(a,{isTraceComplete:!h&&b>=g,source:"cache"});c("cometTypeaheadODSLogFetchCacheEvent")&&c("cometTypeaheadODSLogFetchCacheEvent")("comet.ta.fetch",!0,1)},requestParams:b});f=f;f=f.entries;f=c("baseTypeaheadFlattenEntries")(f).length;if(!h&&f>=g)return}if(typeof d.fetchNetwork==="function"&&["all","network"].includes(a)){f={onResolvePayload:function(a){e(a,{isTraceComplete:!0,source:a.entries.length>0?"network":"network-no-results"}),c("cometTypeaheadODSLogFetchNetworkEvent")&&c("cometTypeaheadODSLogFetchNetworkEvent")("comet.ta.fetch",!0,1)},requestParams:babelHelpers["extends"]({},b,{requestFlow:m.current})};Boolean(l)?q(f):p(f)}}b!=null&&i(b);return function(){a=!0}}i(r,[b]);return[{isLoading:o}]}g["default"]=a}),98);
__d("useBaseTypeaheadDataSourceFetch",["react","recoverableViolation","useBaseTypeaheadDataSourceFetchResolver"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useState;function a(a){var b=j(null),d=b[0],e=b[1];b=c("useBaseTypeaheadDataSourceFetchResolver")(a,d);a=b[0].isLoading;var f=i(function(a,b){b===void 0&&(b="all"),e({requestParams:a,source:b})},[]);b=i(function(a){a=a||{};var b=a.requestFlow;a=a.source;if(d==null){c("recoverableViolation")("Refetch cannot be called with undefined `fetchParams`","search");return}var e=d.requestParams,g=e.loggingEventTrace;e=babelHelpers.objectWithoutPropertiesLoose(e,["loggingEventTrace"]);g=babelHelpers["extends"]({loggingEventTrace:babelHelpers["extends"]({},g,{sequenceID:String(Date.now())}),requestFlow:b},e);f(g,a)},[f,d]);return[{isLoading:a,source:(a=d==null?void 0:d.source)!=null?a:"all"},f,b]}g["default"]=a}),98);
__d("CometMentions.react",["baseTypeaheadFlattenEntries","cometTypeaheadKeyboardNavigationUtils","react","useBaseTypeaheadDataSourceFetch"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useCallback,k=b.useEffect,l=b.useImperativeHandle,m=b.useRef,n=b.useState;function a(a){var b=a.ref,e=a.context,f=a.dataSource,g=a.inputElement,h=a.layoutStrategyRenderer,p=a.loggingProvider,q=a.onAriaChange,r=a.onEntriesUpdated,s=a.onHighlightEntry,t=a.onSelectedEntry,u=a.onVisibilityChange,v=a.position;v=v===void 0?"above":v;var w=a.queryString,x=a.viewStrategyRenderer;a=babelHelpers.objectWithoutPropertiesLoose(a,["ref","context","dataSource","inputElement","layoutStrategyRenderer","loggingProvider","onAriaChange","onEntriesUpdated","onHighlightEntry","onSelectedEntry","onVisibilityChange","position","queryString","viewStrategyRenderer"]);var y=m(null),z=n(null),A=z[0],B=z[1],C=m([]);z=n(C.current);var D=z[0],E=z[1];z=n(!0);var F=z[0],G=z[1],H=m(null),I=m(w);k(function(){I.current=w},[w]);var J=j(function(a){s&&s(a),B(a),y.current=a},[s]);z=c("useBaseTypeaheadDataSourceFetch")({dataSource:f,onResolvePayload:j(function(a){var b;a=a.entries;C.current=a;E(a);var d=c("baseTypeaheadFlattenEntries")(a),e=d[0];b=y==null?void 0:(b=y.current)==null?void 0:b.key;e!=null&&!d.map(function(a){return a.key}).includes(b)&&J(e);r&&r(a.length>0)},[J,r])});var K=z[0].isLoading,L=z[1],M=F&&(D.length>0||K);k(function(){M?p.startSession(I.current):p.isSessionActive()&&p.maybeEndSession(I.current,c("baseTypeaheadFlattenEntries")(C.current));u(M);return function(){p.isSessionActive()&&p.maybeEndSession(I.current,c("baseTypeaheadFlattenEntries")(C.current))}},[u,p,M]);k(function(){G(!0),L({query:w})},[L,w,f]);l(b,function(){return{getViewRef:function(){return H},hasSelection:function(){return o(c("baseTypeaheadFlattenEntries")(C.current),A)},moveDown:function(){d("cometTypeaheadKeyboardNavigationUtils").moveDown(c("baseTypeaheadFlattenEntries")(C.current),A!=null?A.key:null,J,!1)},moveUp:function(){d("cometTypeaheadKeyboardNavigationUtils").moveUp(c("baseTypeaheadFlattenEntries")(C.current),A!=null?A.key:null,J,!1)},select:function(){var a=c("baseTypeaheadFlattenEntries")(C.current);t&&A!=null&&o(a,A)&&(p.isSessionActive()&&p.maybeEndSession(w,a,A),t(A))}}},[A,J,t,p,w]);z=j(function(a){var b=c("baseTypeaheadFlattenEntries")(C.current);t&&o(b,a)&&(p.isSessionActive()&&p.maybeEndSession(w,b,a),t(a))},[t,p,w]);k(function(){if(M===!1)return;function a(a,b){a=a.parentElement;while(a!=null&&a!==b)a=a.parentElement;return a===b}var b=function(b){b=b.target;if(!(b instanceof HTMLElement))return;var c=H.current;c=c!==null&&(b===c||a(b,c));b=g!==null&&(b===g||a(b,g));G(c||b)};document.addEventListener("click",b);return function(){return document.removeEventListener("click",b)}},[g,M]);return!M?null:i.jsx(h,{ariaProps:{role:"listbox"},context:e,entries:D,highlightedEntry:A,isLoading:K,onAriaChange:q,onBlur:a.onBlur,onHighlightEntry:J,onPressEntry:z,onPressEntryIn:z,position:v,queryString:w,viewRef:H,viewStrategyRenderer:x})}a.displayName=a.name+" [from "+f.id+"]";function o(a,b){if(b==null)return!1;var c=b.key;return a.find(function(a){return a.key===c})!=null}g["default"]=a}),98);
__d("getCometComposerMentionsSearchForLexical",["Lexical"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){a=a.anchor;if(a.type!=="text")return null;var c=a.getNode();if(b!=null&&!b()||b==null&&!c.isSimpleText())return null;b=a.offset;return c.getTextContent().slice(0,b)}function a(a,b){return a.getEditorState().read(function(){var a=d("Lexical").$getSelection();return!d("Lexical").$isRangeSelection(a)?null:h(a,b)})}g["default"]=a}),98);
__d("useCometMentionsBootstrapForLexical",["Lexical","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useRef;function a(a,b){var c=j(!1);i(function(){if(c.current)return;var e=a.getRootElement()===document.activeElement;if(e){b();c.current=!0;return}var f=a.registerCommand(d("Lexical").FOCUS_COMMAND,function(){b();c.current=!0;f();return!1},d("Lexical").COMMAND_PRIORITY_LOW);return f},[b,a,c])}g["default"]=a}),98);
__d("MentionsSessionEndWithoutClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("445");b=d("FalcoLoggerInternal").create("mentions_session_end_without_click",a);e=b;g["default"]=e}),98);
__d("MentionsSessionStartFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("446");b=d("FalcoLoggerInternal").create("mentions_session_start",a);e=b;g["default"]=e}),98);
__d("MentionsSuggestionClickedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("447");b=d("FalcoLoggerInternal").create("mentions_suggestion_clicked",a);e=b;g["default"]=e}),98);
__d("CometMentionsLoggingProvider",["MentionsSessionEndWithoutClickFalcoEvent","MentionsSessionStartFalcoEvent","MentionsSuggestionClickedFalcoEvent","guid","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$2=!1,this.$3=null,this.$1=a}var b=a.prototype;b.getSessionID=function(){this.$3==null&&c("recoverableViolation")("Mentions logging sessionID does not exist.","search");return this.$3};b.isSessionActive=function(){return this.$2};b.startSession=function(a){var b=this;if(a==null)return;var d=c("guid")();this.$3=d;this.$2=!0;c("MentionsSessionStartFalcoEvent").log(function(){return babelHelpers["extends"]({},b.$1,{session_id:d,typed_query:a})})};b.maybeEndSession=function(a,b,d){if(a==null)return;var e=b!=null?JSON.stringify(b.map(function(a){return{id:a.key}})):null,f=babelHelpers["extends"]({},this.$1,{serialized_candidate_suggestions:e,session_id:this.getSessionID(),typed_query:a});if(d!=null){var g=d.key,h=(e=b==null?void 0:b.findIndex(function(a){return a.key===g}))!=null?e:null,i=isNaN(parseInt(d.key,10))?"0":d.key;c("MentionsSuggestionClickedFalcoEvent").log(function(){return babelHelpers["extends"]({},f,{selected_position:String(h),selected_result_display_text:d.label,selected_result_id:i,selected_result_id_string:d.key})})}else c("MentionsSessionEndWithoutClickFalcoEvent").log(function(){return f});this.$3=null;this.$2=!1};return a}();g["default"]=a}),98);
__d("useCometMentionsLoggingProvider",["CometMentionsLoggingProvider","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useMemo,j={context_id:null,context_type:"unknown",surface:null,typeahead_type:null};function a(a){a===void 0&&(a=j);return i(function(){return new(c("CometMentionsLoggingProvider"))(a)},[a])}g["default"]=a}),98);
__d("useCometMentionsResolutionForLexical",["getCometComposerMentionsSearchForLexical","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.startTransition,j=b.useEffect,k=b.useState;function l(a,b){var c=window.getSelection();if(c===null||!c.isCollapsed||a===null)return!1;var d=c.anchorNode;a=a.leadOffset;c=c.anchorOffset;try{b.setStart(d,a),b.setEnd(d,c)}catch(a){return!1}return!0}function a(a,b,d){var e=k(null),f=e[0],g=e[1];j(function(){var e=document.createRange(),f=null,h=null,j=null,k=function(){var k=e,m=c("getCometComposerMentionsSearchForLexical")(a,d);if(m===f||k===null)return;f=m;m=b(m);var n=m.dataSource,o=m.searchResult;if(n===h&&o===j)return;m=l(o,k);h=n;j=o;!m||n===null||o===null?i(function(){return g(null)}):i(function(){g({dataSource:n,range:k,searchResult:o})})},m=a.registerUpdateListener(k);k();return function(){e=null,m()}},[d,b,a]);return f}g["default"]=a}),98);
__d("CometMentionsForLexical.react",["CometLexicalContentEditableCommands","CometMentions.react","FBLogger","Lexical","LexicalText","LexicalUtils","emptyFunction","getCometComposerMentionsSearchForLexical","react","recoverableViolation","useCometMentionsBootstrapForLexical","useCometMentionsLoggingProvider","useCometMentionsResolutionForLexical"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useCallback,k=b.useEffect,l=b.useMemo,m=b.useRef,n=b.useState;function a(a){var b=a.$isValidSelection,e=a.createNodeStrategy,f=a.dataSourceResolverConfig,g=f.bootstrap,h=f.resolver,l=a.editor;f=a.layoutStrategyRenderer;var n=a.mentionsHandlerForSelectedEntry,p=a.mentionsLoggerContext,s=a.onMentionsEntrySelected,t=a.position;t=t===void 0?"below":t;a=a.viewStrategyRenderer;var u=c("useCometMentionsResolutionForLexical")(l,h,b),v=m(!1),w=o(l),x=w[0],y=w[1],z=m(null),A=r(l);c("useCometMentionsBootstrapForLexical")(l,g);k(function(){return l.registerCommand(d("Lexical").BLUR_COMMAND,function(){A();return!1},d("Lexical").COMMAND_PRIORITY_LOW)},[l,A]);w=j(function(){A()},[A]);k(function(){var a;a=[{handler:function(a){if(a.hasSelection()){a.select();return!0}return!1},type:(a=d("Lexical")).KEY_ENTER_COMMAND},{handler:function(a){if(a.hasSelection()){a.select();return!0}return!1},type:a.KEY_TAB_COMMAND},{handler:function(a){a.moveUp();return!0},type:a.KEY_ARROW_UP_COMMAND},{handler:function(a){a.moveDown();return!0},type:a.KEY_ARROW_DOWN_COMMAND},{handler:function(){A();y();return!0},type:a.KEY_ESCAPE_COMMAND}];return d("LexicalUtils").mergeRegister.apply(void 0,a.map(function(a){var b=a.handler;a=a.type;return l.registerCommand(a,function(a){var c=z.current,d=v.current;if(c===null||!d||x)return!1;if(b(c)){d=a;d.preventDefault();d.stopPropagation();return!0}return!1},d("Lexical").COMMAND_PRIORITY_CRITICAL)}))},[y,l,A,x]);g=j(function(a){v.current=a},[]);var B=j(function(a){if(a)return;A()},[A]),C=j(function(a){var d=c("getCometComposerMentionsSearchForLexical")(l,b);if(d==null){c("FBLogger")("search").warn("Race condition where the user selected a mention but theres no text in the editor");return}var f=h(d);f=f.searchResult;if(f==null){c("recoverableViolation")("onPressEntry was called and no search result was found for the query "+d,"CometComposer");return}A();d=n==null?void 0:n(a);if(d!=null&&!d.shouldMentionSelectedEntry)return;q(l,e,a,f,b);s==null?void 0:s(a);y()},[l,b,h,A,n,e,s,y]);p=c("useCometMentionsLoggingProvider")(p);if(u===null||x){A();v.current=!1;return null}return i.jsx(c("CometMentions.react"),{context:u.range,dataSource:u.dataSource,inputElement:l.getRootElement(),layoutStrategyRenderer:f,loggingProvider:p,onAriaChange:A,onBlur:w,onEntriesUpdated:B,onFocus:c("emptyFunction"),onSelectedEntry:C,onVisibilityChange:g,position:t,queryString:u.searchResult.matchingString,ref:z,viewStrategyRenderer:a})}a.displayName=a.name+" [from "+f.id+"]";function o(a){var b=n(!1),c=b[0],e=b[1];k(function(){if(c){var b=a.getEditorState().read(d("LexicalText").$rootTextContent);return a.registerTextContentListener(function(a){b!==null&&a!==b&&e(!1),b=a})}},[a,c]);return l(function(){return[c,function(){return e(!0)}]},[c])}function p(a,b,c){c=c;for(var d=c;d<=b.length;d++)a.substr(-d)===b.substr(0,d)&&(c=d);return c}function q(a,b,c,e,f){a.update(function(){var a=d("Lexical").$getSelection();if(!d("Lexical").$isRangeSelection(a)||!a.isCollapsed())return;a=a.anchor;if(a.type!=="text")return;var g=a.getNode();if(f!=null&&!f()||f==null&&!g.isSimpleText())return;a=a.offset;var h=g.getTextContent().slice(0,a),i=c.label,j=e.replaceableString.length;h=p(h,i,j);i=a-h;if(i<0)return;b({anchorNode:g,endOffset:a,selectedEntry:c,startOffset:i})})}function r(a){var b=m(void 0),c=m(void 0);return j(function(e,f){var g=b.current,h=c.current;(g!==e||h!==f)&&(b.current=e,c.current=f,a.dispatchCommand(d("CometLexicalContentEditableCommands").COMET_LEXICAL_ARIA_COMMAND,{activeDescendantID:e,controlsID:f}))},[a])}g["default"]=a}),98);
__d("cometMessengerFileUploadComposerPluginSupportedTypes",[],(function(a,b,c,d,e,f){"use strict";a=["photo","video","file"];b=a;f["default"]=b}),66);
__d("useCometLexicalDragAndDrop",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect;function a(a,b){var c=b.onDragEnter,d=b.onDragLeave,e=b.onDragOver,f=b.onDrop,g=b.onPaste;i(function(){if(a!=null)return a.registerRootListener(function(a,b){b!=null&&(c&&b.removeEventListener("dragenter",c),d&&b.removeEventListener("dragleave",d),e&&b.removeEventListener("dragover",e),f&&b.removeEventListener("drop",f,!0),g&&b.removeEventListener("paste",g,!0)),a!==null&&(c&&a.addEventListener("dragenter",c),d&&a.addEventListener("dragleave",d),e&&a.addEventListener("dragover",e),f&&a.addEventListener("drop",f,!0),g&&a.addEventListener("paste",g,!0))})},[a,c,d,e,f,g])}g["default"]=a}),98);
__d("useCometLexicalFileDragAndDrop",["react","useCometLexicalDragAndDrop"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useRef;function a(a){var b=a.editor,d=a.isMimeTypeAcceptable,e=a.onHover,f=e===void 0?function(){}:e;e=a.onSubmit;var g=e===void 0?function(){}:e,h=j(0),k=i(function(a){return Array.from(a).filter(d)},[d]);a=i(function(a){h.current++;var b=a.dataTransfer;if(b==null)return f([],!0);b=k(b.items);b.length>0&&a.preventDefault();return f(b,!0)},[k,f]);e=i(function(a){h.current--;if(h.current===0)return f([],!1)},[f]);var l=i(function(a){var b=a.dataTransfer;if(b==null)return f([],!0);b=k(b.items);b.length>0&&a.preventDefault();return f(b,!0)},[k,f]),m=i(function(a,b){b=k(b.items);b=b.map(function(a){return a.getAsFile()}).filter(Boolean);if(b.length>0){a.stopPropagation();a.preventDefault();return g(b)}else return g([])},[k,g]),n=i(function(a){var b=a.dataTransfer;h.current=0;f([],!1);if(b!=null)return m(a,b);else return g([])},[m,f,g]),o=i(function(a){var b=a.clipboardData;if(b==null)return g([]);var c=b.types;c=c.includes("text/plain")&&c.includes("text/html")||c.includes("text/rtf");return c?g([]):m(a,b)},[m,g]);c("useCometLexicalDragAndDrop")(b,{onDragEnter:a,onDragLeave:e,onDragOver:l,onDrop:n,onPaste:o})}g["default"]=a}),98);
__d("useCometMessengerFileUploadPaste",["react","useCometLexicalFileDragAndDrop"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(a){var b=a.editor,d=a.handlePastedFiles;a=a.isMimeTypeAcceptable;var e=i(function(a){a.length>0&&d(a)},[d]);c("useCometLexicalFileDragAndDrop")({editor:b,isMimeTypeAcceptable:a,onSubmit:e})}g["default"]=a}),98);
__d("CometMessengerHandlePastedFileComposerPlugin",["cometIsMimeTypeForMedia","cometMessengerFileUploadComposerPluginSupportedTypes","useCometMessengerFileUploadPaste"],(function(a,b,c,d,e,f,g){"use strict";function h(a){if(a.kind!=="file")return!1;for(var b of c("cometMessengerFileUploadComposerPluginSupportedTypes"))switch(b){case"photo":if(d("cometIsMimeTypeForMedia").isMimeTypeForPhoto(a.type))return!0;break;case"video":if(d("cometIsMimeTypeForMedia").isMimeTypeForVideo(a.type))return!0;break;case"file":if(d("cometIsMimeTypeForMedia").isMimeTypeForFile(a.type))return!0;break;default:b}return!1}function a(a){var b=a.editor;a=a.handlePastedFiles;c("useCometMessengerFileUploadPaste")({editor:b,handlePastedFiles:a,isMimeTypeAcceptable:h});return null}g["default"]=a}),98);
__d("CometQuickPromotionLoggerContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext();g["default"]=b}),98);
__d("useCometInternalTypeaheadState",["CometInternalTypeaheadStateContext","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useContext;function a(){return i(c("CometInternalTypeaheadStateContext"))}g["default"]=a}),98);
__d("CometTypeaheadViewItem.react",["CometPressable.react","CometRow.react","CometRowItem.react","emptyFunction","react","react-strict-dom","useCometInternalTypeaheadState"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useCallback,k={root:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",marginBottom:"xat24cr",marginTop:"xdj266r",paddingTop:"x1y1aw1k",paddingInlineEnd:"xf159sx",paddingBottom:"xwib8y2",paddingInlineStart:"xmzvs34",$$css:!0}},l={contentRoot:{alignItems:"x6s0dn4",cursor:"x1ypdohk",display:"x78zum5",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",$$css:!0},contentRootDisabled:{bottom:"x1ey2m1c",cursor:"x1h6gzvc",left:"xu96u03",position:"x10l6tqk",right:"x3m8u43",insetInlineStart:null,insetInlineEnd:null,top:"x13vifvy",$$css:!0},contentRootEmphasized:{backgroundColor:"xlhe6ec",$$css:!0},contentRootFocused:{boxShadow:"xpud6h4",outline:"x1a2a7pz xvetz19",$$css:!0},contentRootHighlighted:{backgroundColor:"x1wpzbip xugaqoy",$$css:!0},itemIcon:{borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",display:"x78zum5",$$css:!0},pressable:{flexDirection:"x1q0g3np",width:"xh8yej3",$$css:!0},pressableWithAdditionalEndContent:{flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",$$css:!0},root:{display:"x78zum5",width:"xh8yej3",$$css:!0}};function a(a){var b=a.additionalEndContentOutsideOfPressable,e=a.children,f=a.cursorDisabled_SEARCH_ONLY;f=f===void 0?!1:f;var g=a.entry,h=a.isActive,m=a.isEmphasized;m=m===void 0?!1:m;var n=a.isDisabled;n=n===void 0?!1:n;var o=a.itemEndContent,p=a.itemStartContent,q=a.linkProps;a.onHighlightEntry;var r=a.onPressEntry,s=a.onPressEntryIn,t=a.overlayDisabled_SEARCH_ONLY;t=t===void 0?!1:t;var u=a.role,v=a.testid;v=a.xstyle;v=v===void 0?k.root:v;var w=a.debugElement,x=a.focusable;x=x===void 0?!1:x;a=a.itemEndContentKeyboardFocusable;a=a===void 0?!1:a;var y=c("useCometInternalTypeaheadState")();y=y.secondaryActionHighlighted;var z=j(function(a){r&&r(g,a)},[g,r]),A=j(function(a){s&&s(g,a)},[g,s]),B=u==="row"?"gridcell":"none";return i.jsxs(d("react-strict-dom").html.li,{"aria-selected":h,"data-testid":void 0,id:a===!0&&B==="gridcell"?void 0:g.key,role:u,style:l.root,children:[w,i.jsxs(c("CometPressable.react"),{cursorDisabled:f,disabled:n,display:"block",expanding:!0,focusable:x,label:g.label,linkProps:q,onPress:n?c("emptyFunction"):z,onPressIn:n?c("emptyFunction"):A,overlayDisabled:t,overlayFocusRingPosition:"inset",role:a!==!0?B:"none",xstyle:[l.contentRoot,h&&l.contentRootHighlighted,h&&y!==!0&&l.contentRootFocused,m&&l.contentRootEmphasized,v,b==null?l.pressable:l.pressableWithAdditionalEndContent],children:[i.jsxs(c("CometRow.react"),{expanding:!0,paddingHorizontal:0,paddingVertical:0,verticalAlign:"center",children:[p!=null?i.jsx(c("CometRowItem.react"),{children:i.jsx(d("react-strict-dom").html.div,{style:l.itemIcon,children:p})}):null,i.jsx(c("CometRowItem.react"),{expanding:!0,children:a===!0&&B==="gridcell"?i.jsx(d("react-strict-dom").html.div,{id:g.key,role:B,children:e}):e}),o!=null?i.jsx(c("CometRowItem.react"),{children:a===!0&&B==="gridcell"?i.jsx(d("react-strict-dom").html.div,{id:g.key+"-secondary-action",role:B,children:o}):o}):null]}),b,i.jsx(d("react-strict-dom").html.div,{style:n&&l.contentRootDisabled})]})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometSearchMentionsBaseViewItem.react",["CometTypeaheadViewItem.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.onPressEntryIn;a.queryString;a=babelHelpers.objectWithoutPropertiesLoose(a,["onPressEntryIn","queryString"]);var d=function(a,c){c.preventDefault(),b&&b(a,c)};return i.jsx(c("CometTypeaheadViewItem.react"),babelHelpers["extends"]({},a,{onPressEntryIn:d}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useCometInternalTypeaheadFetch",["CometInternalTypeaheadFetchContext","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useContext;function a(){return i(c("CometInternalTypeaheadFetchContext"))}g["default"]=a}),98);
__d("useCometTypeaheadViewLabel",["fbt","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||d("react")).useMemo;function a(a){var b=a.activeEntries;return j(function(){var a=b.length;return a===0?h._(/*BTDS*/"No hay b\u00fasquedas sugeridas."):h._(/*BTDS*/"_j{\"*\":\"{number} b\\u00fasquedas sugeridas\",\"_1\":\"1 b\\u00fasqueda sugerida\"}",[h._plural(a,"number")])},[b])}g["default"]=a}),226);
__d("useCometTypeaheadLayoutContextualStrategyARIAProps",["react","useCometInternalTypeaheadFetch","useCometTypeaheadViewLabel"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useId,j=b.useMemo;function a(a){var b=a.activeEntries,d=a.helperText,e=a.highlightedEntry,f=a.inputLabel,g=f===void 0?"":f,h=a.isOpened,k=a.secondaryActionHighlighted,l=a.viewRole,m=i();f=c("useCometInternalTypeaheadFetch")();var n=f.isLoading,o=i(),p=c("useCometTypeaheadViewLabel")({activeEntries:b});return j(function(){var a=e!=null?{"aria-activedescendant":k===!0?e.key+"-secondary-action":e.key}:{},c=h&&b.length>0?{"aria-controls":m}:null,f=d!=null&&String(d).length>0?{"aria-describedby":o}:null,i={"aria-busy":n,"aria-label":p,id:m,role:l};return{ariaDescribedByProps:{id:o},ariaInputProps:babelHelpers["extends"]({},a,{},c,{},f,{"aria-autocomplete":"list","aria-expanded":b.length>0&&h,"aria-label":g,role:"combobox"}),ariaViewProps:i}},[b.length,o,d,e,g,n,h,m,k,p,l])}g["default"]=a}),98);
__d("useBaseMentionsLayoutStrategyARIAProps.react",["baseTypeaheadFlattenEntries","react","useCometTypeaheadLayoutContextualStrategyARIAProps"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect;function a(a){var b=a.entries,d=a.highlightedEntry,e=a.onAriaChange;a=c("useCometTypeaheadLayoutContextualStrategyARIAProps")({activeEntries:c("baseTypeaheadFlattenEntries")(b),helperText:"",highlightedEntry:d,inputLabel:"",isOpened:!0,viewRole:"listbox"});var f=a.ariaInputProps;b=a.ariaViewProps;i(function(){return e(f["aria-activedescendant"],f["aria-controls"])},[f,e]);return b}g["default"]=a}),98);
__d("CometSearchTypeaheadBaseLayoutMentionsStrategy.react",["CometMediaViewerMentionsTypeaheadEmptyState.react","react","useBaseMentionsLayoutStrategyARIAProps.react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.isLoading,d=a.isLoadingIndicatorEnabled;d=d===void 0?!1:d;var e=a.onAriaChange,f=a.viewStrategyRenderer;a=babelHelpers.objectWithoutPropertiesLoose(a,["isLoading","isLoadingIndicatorEnabled","onAriaChange","viewStrategyRenderer"]);e=c("useBaseMentionsLayoutStrategyARIAProps.react")({entries:a.entries,highlightedEntry:a.highlightedEntry,onAriaChange:e});return i.jsxs("div",{children:[i.jsx(f,babelHelpers["extends"]({},a,{ariaProps:e,isLoading:d?b:!1})),!b&&a.entries.length===0?i.jsx(c("CometMediaViewerMentionsTypeaheadEmptyState.react"),{}):null]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometToastDeferred",["deferredLoadComponent","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";a=c("deferredLoadComponent")(c("requireDeferred")("CometToast.react").__setRef("CometToastDeferred"));b=a;g["default"]=b}),98);
__d("CometTypeaheadProgressGlimmer.react",["FDSProgressRingIndeterminate.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={root:{alignItems:"x6s0dn4",display:"x78zum5",flexGrow:"x1iyjqo2",height:"xdd8jsf",justifyContent:"xl56j7k",$$css:!0}};function a(){return i.jsx(d("react-strict-dom").html.div,{style:j.root,children:i.jsx(c("FDSProgressRingIndeterminate.react"),{color:"dark",size:24})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("FDSUnitHeader.react",["BaseView.react","CometColumn.react","CometColumnItem.react","CometFocusTableContext","CometPressable.react","FDSIcon.react","FDSText.react","FDSTextPairing.react","IconSource","SVGIcon","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useContext,k=b.useState,l=8,m={action:{backgroundColor:"x1k74hu9",borderTopStyle:"x1ejq31n",borderInlineEndStyle:"x18oe1m7",borderBottomStyle:"x1sy0etr",borderInlineStartStyle:"xstzfhl",display:"x1rg5ohu",marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",paddingTop:"xexx8yu",paddingInlineEnd:"xyri2b",paddingBottom:"x18d9i69",paddingInlineStart:"x1c1uobl",position:"x1n2onr6",verticalAlign:"x3ajldb",$$css:!0},actionButton:{color:"x1fey0fg",cursor:"x1ypdohk",$$css:!0},actionHidden:{opacity:"xg01cxk",$$css:!0},hairline:{backgroundColor:"x14nfmen",height:"xjm9jq1",marginBottom:"x1jyxor1",$$css:!0},root:{paddingBottom:"xjkvuk6",$$css:!0},showActionOnHover:{visibility:"xlshs6z","@media (pointer: coarse)_visibility":"xwtlbus",$$css:!0}},n={0:{paddingTop:"xexx8yu",$$css:!0},8:{paddingTop:"x1y1aw1k",$$css:!0},12:{paddingTop:"xz9dl7a",$$css:!0},16:{paddingTop:"xyamay9",$$css:!0},20:{paddingTop:"x1cnzs8",$$css:!0}};function a(a){var b=a.action_DEPRECATED,e=a.actionAccessibilityLabel,f=a.actionDisabled;f=f===void 0?!1:f;var g=a.actionHidden;g=g===void 0?!1:g;var h=a.actionIcon,o=a.actionLabel,p=a.actionLinkProps,q=a.actionRef,r=a.actiontestid,s=a.actionWrapper,t=a.addOn_DEPRECATED,u=a.body,v=a.bodyColor;v=v===void 0?"secondary":v;var w=a.bodyLineLimit;w=w===void 0?3:w;var x=a.disabled,y=a.hasTopDivider;y=y===void 0?!1:y;var z=a.headline,A=a.headlineColor;A=A===void 0?"primary":A;var B=a.headlineId,C=a.iconColor;C=C===void 0?"primary":C;var D=a.iconSize;D=D===void 0?16:D;var E=a.isSemanticHeading;E=E===void 0?!0:E;var F=a.level,G=a.linkProps,H=a.meta,I=a.metaColor;I=I===void 0?"secondary":I;var J=a.metaLocation,K=a.metaTestID,L=a.onActionHoverIn,M=a.onActionHoverOut,N=a.onActionPress,O=a.onActionPressIn,P=a.onActionPressOut,Q=a.onPress,aa=a.onPressIn,ba=a.onPressOut,R=a.paddingHorizontal;R=R===void 0?16:R;var S=a.paddingTop;S=S===void 0?20:S;var T=a.showActionOnHover;T=T===void 0?!1:T;var U=a.testOnly_actionPressed,V=a.testOnly_pressed,W=a.useFocusCell;W=W===void 0?!1:W;a=babelHelpers.objectWithoutPropertiesLoose(a,["action_DEPRECATED","actionAccessibilityLabel","actionDisabled","actionHidden","actionIcon","actionLabel","actionLinkProps","actionRef","actiontestid","actionWrapper","addOn_DEPRECATED","body","bodyColor","bodyLineLimit","disabled","hasTopDivider","headline","headlineColor","headlineId","iconColor","iconSize","isSemanticHeading","level","linkProps","meta","metaColor","metaLocation","metaTestID","onActionHoverIn","onActionHoverOut","onActionPress","onActionPressIn","onActionPressOut","onPress","onPressIn","onPressOut","paddingHorizontal","paddingTop","showActionOnHover","testOnly_actionPressed","testOnly_pressed","useFocusCell"]);var X=k(!1),Y=X[0];X=X[1];var Z=j(c("CometFocusTableContext"));Z=Z.FocusCell;var $;p={disabled:f,linkProps:p,onHoverIn:L,onHoverOut:M,onPress:N,onPressIn:O,onPressOut:P,testid:r,testOnly_pressed:U!=null?U:!1};h!=null?$=i.jsx(c("FDSIcon.react"),babelHelpers["extends"]({},p,{"aria-label":e,color:C,icon:h,ref:q})):o!=null?$=i.jsx(c("CometPressable.react"),babelHelpers["extends"]({},p,{"aria-label":e!=null?e:o,onFocusVisibleChange:X,overlayOffset:l,overlayRadius:4,ref:q,xstyle:[m.actionButton,m.action,g&&!Y&&m.actionHidden,T&&m.showActionOnHover],children:i.jsx(c("FDSText.react"),{color:f?"disabled":"blueLink",numberOfLines:1,type:F===2?"body2":"body3",children:o})})):b!=null?b instanceof c("IconSource")?$=i.jsx(c("FDSIcon.react"),babelHelpers["extends"]({},p,{"aria-label":e,color:C,icon:b,ref:q})):b instanceof d("SVGIcon").SVGIcon?$=i.jsx(c("FDSIcon.react"),babelHelpers["extends"]({},p,{"aria-label":e,color:C,icon:b,ref:q,size:D})):$=i.jsx(c("CometPressable.react"),babelHelpers["extends"]({},p,{"aria-label":e!=null?e:b,onFocusVisibleChange:X,overlayOffset:l,overlayRadius:4,ref:q,xstyle:[m.actionButton,m.action,g&&!Y&&m.actionHidden,T&&m.showActionOnHover],children:i.jsx(c("FDSText.react"),{color:f?"disabled":"blueLink",numberOfLines:1,type:F===2?"body2":"body3",children:b})})):t!=null&&($=i.jsx(d("react-strict-dom").html.div,{style:m.action,children:t}));if(s!=null){L=s.component;$=i.jsx(L,babelHelpers["extends"]({},s.props,{children:$}))}W===!0&&Z!=null&&($=i.jsx(Z,{children:$}));M=i.jsx(c("FDSTextPairing.react"),{body:u,bodyColor:v,bodyLineLimit:w,headline:z,headlineAddOn:$,headlineColor:A,headlineId:B,headlineLineLimit:2,isSemanticHeading:E,level:F,meta:H,metaColor:I,metaLineLimit:1,metaLocation:J!=null?J:"below",metaTestID:K});N=i.jsx(c("CometColumn.react"),babelHelpers["extends"]({},a,{paddingHorizontal:y?0:R,xstyle:[m.root,n[S]],children:i.jsx(c("CometColumnItem.react"),{children:Q!=null?i.jsx(c("CometPressable.react"),{disabled:x,linkProps:G,onPress:Q,onPressIn:aa,onPressOut:ba,overlayDisabled:!0,ref:q,testOnly_pressed:V!=null?V:!1,children:M}):M})}));return y?i.jsxs(c("CometColumn.react"),{paddingHorizontal:R,children:[i.jsx(c("CometColumnItem.react"),{children:i.jsx(c("BaseView.react"),{xstyle:m.hairline})}),N]}):N}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometTypeaheadViewListSection.react",["FDSUnitHeader.react","emptyFunction","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={header:{marginBottom:"x1e56ztr",$$css:!0}};function a(a){var b=a.action,e=a.children,f=a.emptyStateContent,g=a.entries,h=a.highlightedEntry,k=a.itemRole,l=a.onHeaderActionPress,m=a.queryString;a=a.title;return i.jsxs(d("react-strict-dom").html.li,{children:[a!=null&&g.length!==0?i.jsx(d("react-strict-dom").html.div,{style:j.header,children:i.jsx(c("FDSUnitHeader.react"),{action_DEPRECATED:(b==null?void 0:b.type)==="link"?b.label:void 0,actionLinkProps:(b==null?void 0:b.type)==="link"?{url:b.url}:void 0,headline:a,level:3,onActionPress:(b==null?void 0:b.type)==="link"?l:c("emptyFunction"),paddingHorizontal:8,paddingTop:12})}):null,g.length===0&&f!=null&&m===""?f:null,g.length!==0?i.jsx(d("react-strict-dom").html.ul,{children:g.map(function(a,b){return e({entry:a,index:b,isActive:a.key===(h==null?void 0:h.key),itemRole:k})})}):null]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometTypeaheadSectionedViewListStrategy.react",["CometCompositeStructureContext","CometTypeaheadViewListSection.react","getItemRoleFromCompositeRole","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useMemo,k={root:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",$$css:!0}};function a(a){var b=a.ariaProps,e=a.emptyStateContent,f=a.entries;a.extraViewProps;var g=a.highlightedEntry;a.isLoading;a.onAbandonTypeahead_DO_NOT_USE;var h=a.onHeaderActionPress,l=a.queryString,m=a.viewItemStrategyRenderer,n=babelHelpers.objectWithoutPropertiesLoose(a,["ariaProps","emptyStateContent","entries","extraViewProps","highlightedEntry","isLoading","onAbandonTypeahead_DO_NOT_USE","onHeaderActionPress","queryString","viewItemStrategyRenderer"]),o=b.role;a=j(function(){if(o!=null)return{role:o};else return{}},[o]);if(f.length===0&&e!=null)return l===""?e:null;var p=c("getItemRoleFromCompositeRole")(o);return i.jsx(d("react-strict-dom").html.ul,babelHelpers["extends"]({},b,{"data-testid":void 0,style:k.root,children:i.jsx(c("CometCompositeStructureContext").Provider,{value:a,children:f.map(function(a){if(a.type==="section"){var b=a.action,d=a.entries,f=a.key,j=a.label;return i.jsx(c("CometTypeaheadViewListSection.react"),{action:b,emptyStateContent:e,entries:d,highlightedEntry:g,itemRole:p,onHeaderActionPress:h,queryString:l,title:j,children:function(a){var b=a.entry,c=a.isActive;a=a.itemRole;return i.createElement(m,babelHelpers["extends"]({},n,{entry:b,isActive:c,key:b.key,queryString:l,role:a}))}},f)}else return i.createElement(m,babelHelpers["extends"]({},n,{entry:a,isActive:a.key===(g==null?void 0:g.key),key:a.key,queryString:l,role:p}))})})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("DirectRequestsDeclineMultipleButtonFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("3771");b=d("FalcoLoggerInternal").create("direct_requests_decline_multiple_button",a);e=b;g["default"]=e}),98);
__d("DirectRequestsDeclineMultipleConfirmFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("3772");b=d("FalcoLoggerInternal").create("direct_requests_decline_multiple_confirm",a);e=b;g["default"]=e}),98);
__d("DirectRequestsThreadAllowFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("3674");b=d("FalcoLoggerInternal").create("direct_requests_thread_allow",a);e=b;g["default"]=e}),98);
__d("DocumentMentionsRegex",[],(function(a,b,c,d,e,f){"use strict";a="\\.,\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\/!%'\"~=<>_:;";b="\\b[A-Z][^\\s"+a+"]";c={PUNCTUATION:a,NAME:b};d=c;f["default"]=d}),66);
__d("EBFormatUtils",["I64","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){if(a!=null)return(h||(h=d("I64"))).min(a,h.of_float(d("WATimeUtils").millisTime()));switch(b){case"before":return(h||(h=d("I64"))).of_float(d("WATimeUtils").millisTime());case"after":return(h||(h=d("I64"))).zero;default:b;return(h||(h=d("I64"))).max_int}}function b(a,b){switch(b){case"before":return[a,0];case"after":return[0,a];default:b;return[Math.ceil(a/2),Math.ceil(a/2)]}}g.adjustTs=a;g.adjustCount=b}),98);
__d("IGDAudioRecorder.react",["MWPAudioHighlightStylesHooks","MWPAudioPlayerButtons.react","MWPAudioPlayerContainer.react","MWPAudioPlayerHighlight.react","MWPAudioPlayerKeyCommands.react","MWPAudioPlayerSharedStyles","MWPAudioPlayerTimer.react","MWPAudioPlayerUtils","MWPUseVoiceRecorder","react","react-compiler-runtime","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react")),k=i.useRef;function a(a){var b=d("react-compiler-runtime").c(48);a=a.voiceRecorder;var e=k(void 0);a=a;var f=a.audioEl,g=a.state,i=d("MWPAudioPlayerUtils").useResetHighlightProgress(e),l;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(l={backgroundColor:"var(--chat-composer-button-color)",borderRadius:"18px",cursor:d("MWPUseVoiceRecorder").hasScrubber?"pointer":"default",height:"36px"},b[0]=l):l=b[0];var m=d("MWPAudioHighlightStylesHooks").useHighlightStyles(!0);b[1]!==m?(l={containerStyle:l,highlightStyles:m},b[1]=m,b[2]=l):l=b[2];m=l;b[3]!==g?(l=d("MWPUseVoiceRecorder").getDuration(g),b[3]=g,b[4]=l):l=b[4];var n;b[5]!==g?(n=d("MWPUseVoiceRecorder").getCurrentTime(g),b[5]=g,b[6]=n):n=b[6];var o;b[7]!==g?(o=d("MWPUseVoiceRecorder").isProgressing(g),b[7]=g,b[8]=o):o=b[8];var p;b[9]!==g?(p=d("MWPUseVoiceRecorder").isCompleted(g),b[9]=g,b[10]=p):p=b[10];l=d("MWPAudioPlayerUtils").useProgressLiveUpdate(l,f,n,o,!1,p);b[11]!==g?(n=d("MWPUseVoiceRecorder").hasScrubber(g),b[11]=g,b[12]=n):n=b[12];o=m.containerStyle;b[13]!==m.highlightStyles||b[14]!==l?(p=j.jsx(d("MWPAudioPlayerHighlight.react").MWPAudioPlayerHighlightV1,{ref:l,xstyle:m.highlightStyles}),b[13]=m.highlightStyles,b[14]=l,b[15]=p):p=b[15];b[16]!==g?(l=d("MWPUseVoiceRecorder").showScreenReaderLabel(g)&&j.jsx(d("MWPAudioPlayerUtils").ScreenReaderLabel,{currentTime:d("MWPUseVoiceRecorder").getCurrentTime(g)||0,duration:d("MWPUseVoiceRecorder").getDuration(g)}),b[16]=g,b[17]=l):l=b[17];var q;b[18]!==m.highlightStyles?(q=j.jsx(d("MWPAudioPlayerHighlight.react").MWPAudioPlayerHighlightV1,{ref:e,xstyle:m.highlightStyles}),b[18]=m.highlightStyles,b[19]=q):q=b[19];var r;b[20]===Symbol["for"]("react.memo_cache_sentinel")?(r=(h||(h=c("stylex"))).props(d("MWPAudioPlayerSharedStyles").styles.playbackButtonContainer),b[20]=r):r=b[20];i=d("MWPUseVoiceRecorder").hasScrubber?i:null;var s;b[21]!==g?(s=d("MWPUseVoiceRecorder").getPlaybackIcon(g,"var(--chat-composer-button-color)"),b[21]=g,b[22]=s):s=b[22];var t;b[23]!==g?(t=d("MWPUseVoiceRecorder").getPlaybackLabel(g),b[23]=g,b[24]=t):t=b[24];var u;b[25]!==s||b[26]!==t||b[27]!==a.toggle?(u=j.jsx(d("MWPAudioPlayerButtons.react").AudioPlayerPlaybackButton,{icon:s,label:t,onPress:a.toggle}),b[25]=s,b[26]=t,b[27]=a.toggle,b[28]=u):u=b[28];b[29]!==i||b[30]!==u?(s=j.jsx("div",babelHelpers["extends"]({},r,{onMouseMove:i,children:u})),b[29]=i,b[30]=u,b[31]=s):s=b[31];b[32]!==g?(t=d("MWPUseVoiceRecorder").getTimerTime(g),b[32]=g,b[33]=t):t=b[33];b[34]!==t?(a=j.jsx(c("MWPAudioPlayerTimer.react"),{time:t}),b[34]=t,b[35]=a):a=b[35];b[36]!==f||b[37]!==p||b[38]!==l||b[39]!==q||b[40]!==s||b[41]!==a?(r=j.jsxs(c("MWPAudioPlayerKeyCommands.react"),{audioEl:f,children:[p,l,q,s,a]}),b[36]=f,b[37]=p,b[38]=l,b[39]=q,b[40]=s,b[41]=a,b[42]=r):r=b[42];b[43]!==m.containerStyle||b[44]!==f||b[45]!==r||b[46]!==n?(i=j.jsx(c("MWPAudioPlayerContainer.react"),{audioEl:f,hasScrubber:n,mediaRenderQpl:null,scrubberRef:e,style:o,testid:void 0,useCase:d("MWPAudioPlayerUtils").UseCase.RECORDER,children:r}),b[43]=m.containerStyle,b[44]=f,b[45]=r,b[46]=n,b[47]=i):i=b[47];return i}g["default"]=a}),98);
__d("IGDMentionsLayoutStrategy.react",["CometContextualLayer.react","CometSearchTypeaheadBaseLayoutMentionsStrategy.react","IGDSPopover.react","IGDThreadListNewMessageLoggingDataContext","MessengerWebUXLogger","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(19);if(b[0]!==a){var e=a.ariaProps,f=a.context,g=a.entries;a.isLoading;a.onBlur;var h=a.position;a.viewRef;var j=babelHelpers.objectWithoutPropertiesLoose(a,["ariaProps","context","entries","isLoading","onBlur","position","viewRef"]);e=e;f=f;g=g;h=h;j=j;b[0]=a;b[1]=e;b[2]=f;b[3]=g;b[4]=h;b[5]=j}else e=b[1],f=b[2],g=b[3],h=b[4],j=b[5];a=d("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext();var k;b[6]!==a?(k={eventName:"mentions_popover_rendered",flowInstanceId:a},b[6]=a,b[7]=k):k=b[7];a=c("MessengerWebUXLogger").useImpressionLoggerRef(k);if(g.length===0)return null;b[8]!==e||b[9]!==g||b[10]!==j?(k=i.jsx(c("CometSearchTypeaheadBaseLayoutMentionsStrategy.react"),babelHelpers["extends"]({ariaProps:e,entries:g,isLoading:!1},j)),b[8]=e,b[9]=g,b[10]=j,b[11]=k):k=b[11];b[12]!==a||b[13]!==k?(e=i.jsx(c("IGDSPopover.react"),{popoverContent:k,ref:a}),b[12]=a,b[13]=k,b[14]=e):e=b[14];b[15]!==f||b[16]!==h||b[17]!==e?(g=i.jsx(c("CometContextualLayer.react"),{align:"start",context_DEPRECATED:f,position:h,children:e}),b[15]=f,b[16]=h,b[17]=e,b[18]=g):g=b[18];return g}g["default"]=a}),98);
__d("cometMentionsDataEntryText",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b;return(b=a.handle)!=null?b:a.label}f["default"]=a}),66);
__d("MWChatAppendMentionsNodeToReply",["I64","LSContactTypeExact","LSIntEnum","Lexical","LexicalText","MWChatComposerTypeaheadUtil","MWPReplyContext.react","MessengerLexicalActorNode","ReQL","ReQLSuspense","cometMentionsDataEntryText","react","usePrevious","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;b=k||d("react");var l=b.useContext,m=b.useEffect;function n(a,b){a.update(function(){var e=d("Lexical").$getSelection();if(!d("Lexical").$isRangeSelection(e)||!e.isCollapsed())return;var f=e.anchor;f=f.getNode();var g=c("cometMentionsDataEntryText")(b),h=d("Lexical").$getRoot().getAllTextNodes().some(function(a){return d("MessengerLexicalActorNode").$isMessengerLexicalActorNode(a)&&a.getTextContent().includes(g)});if(h===!0)return;h=d("MessengerLexicalActorNode").$createMessengerLexicalActorNode({id:b.key,text:g});var i=d("LexicalText").$isRootTextContentEmpty(a.isComposing());i?e.insertNodes([h]):f.insertBefore(h);h.selectNext(0,0)})}function a(a,b,e){var g=l(d("MWPReplyContext.react").MWPReplyContext),k=g.reply,o=c("usePrevious")(k),p=(h||(h=c("useReStore")))(),q=d("ReQLSuspense").useFirst(function(){return k!=null?d("ReQL").fromTableAscending(p.tables.messages).getKeyRange(b,k.timestampMs,k.messageId):d("ReQL").empty()},[k,b,p],f.id+":91");g=d("ReQLSuspense").useFirst(function(){return q!=null?d("ReQL").fromTableAscending(p.tables.contacts).getKeyRange(q.senderId):d("ReQL").empty()},[p,q],f.id+":102");g=g!=null?(i||(i=d("I64"))).equal(g.contactTypeExact,(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactTypeExact").GENERATIVE_AI_BOT)):!1;var r=g&&(q==null?void 0:q.botResponseId)!=null;m(function(){var b=o==null&&k!=null;b&&r&&e===!0&&n(a,d("MWChatComposerTypeaheadUtil").aiBotMentionsEntry)},[a,k,o,r,e])}g.insertMentionNodeToFront=n;g.useMWChatAppendMentionsNodeToReply=a}),98);
__d("MWChatComposerMentionsViewItem.react",["CometImageFromIXValue.react","CometSearchMentionsBaseViewItem.react","FDSIcon.react","FDSProfilePhoto.react","FDSTextPairing.react","MWXSvgIcon","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.entry;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry"]);var e=b.handle;e=b.key;e=b.label;var f=b.rawData,g=f.icon,h=f.image,j=f.photoURI;f=f.subtitle;var k;j!=null?k=i.jsx(c("FDSProfilePhoto.react"),{size:28,source:{uri:j}}):g!=null?k=g instanceof d("MWXSvgIcon").MWXSvgIcon?i.jsx(c("FDSIcon.react"),{color:"primary",disabled:!1,icon:g.originalComponent,size:28}):i.jsx(c("FDSIcon.react"),{color:"primary",disabled:!1,icon:g}):h!=null&&(k=i.jsx(c("CometImageFromIXValue.react"),{source:h}));return i.jsx(c("CometSearchMentionsBaseViewItem.react"),babelHelpers["extends"]({},a,{entry:b,itemStartContent:k,testid:void 0,children:i.jsx(c("FDSTextPairing.react"),{body:e,bodyLineLimit:1,level:3,meta:f,metaLineLimit:1})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("cometBaseMentionsLexicalCreateNodeStrategy",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return function(b){var d=b.anchorNode,e=b.endOffset,f=b.selectedEntry;b=b.startOffset;if(b===0){var g=d.splitText(e);g=g[0]}else{d=d.splitText(b,e);g=d[1]}if(g==null){c("FBLogger")("search").mustfix("createMentionNodeFromSearchResult failed to find correct offsets. Found offsets: "+b+", "+e+".");return}d=a(f);d.setStyle(g.getStyle());g.replace(d);d.selectNext(0,0)}}g["default"]=a}),98);
__d("messengerMentionsLexicalCreateNodeStrategy",["MessengerLexicalActorNode","cometBaseMentionsLexicalCreateNodeStrategy","cometMentionsDataEntryText"],(function(a,b,c,d,e,f,g){"use strict";a=c("cometBaseMentionsLexicalCreateNodeStrategy")(function(a){return d("MessengerLexicalActorNode").$createMessengerLexicalActorNode({id:a.key,text:c("cometMentionsDataEntryText")(a)})});b=a;g["default"]=b}),98);
__d("useCometTypeaheadSectionedViewListStrategy",["CometTypeaheadProgressGlimmer.react","CometTypeaheadSectionedViewListStrategy.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useCallback;function a(a){var b=a.emptyStateContent,e=a.nullstateContent,f=a.onHeaderActionPress,g=a.viewItemStrategyRenderer,h=a.viewXStyle;return j(function(a){var j=a.entries,k=a.isLoading,l=a.onAbandonTypeahead_DO_NOT_USE,m=a.queryString;a=babelHelpers.objectWithoutPropertiesLoose(a,["entries","isLoading","onAbandonTypeahead_DO_NOT_USE","queryString"]);if(m.length===0&&e!=null)return e;var n=c("CometTypeaheadSectionedViewListStrategy.react");return i.jsxs(d("react-strict-dom").html.div,{style:h,children:[i.jsx(n,babelHelpers["extends"]({},a,{emptyStateContent:b,entries:j,isLoading:k,onHeaderActionPress:function(){l==null?void 0:l(),f==null?void 0:f()},queryString:m,viewItemStrategyRenderer:g})),k&&i.jsx(c("CometTypeaheadProgressGlimmer.react"),{})]})},[b,e,f,g,h])}g["default"]=a}),98);
__d("MWChatComposerMentionsTypeaheadDataSource",["CurrentUser","MWChatComposerTypeaheadUtil","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i=6;a=function(){function a(a,b,d,e,f,g){this.$1=[],this.$1=Array.from(a.values()).filter(function(a){return a.contactId!==c("CurrentUser").getID()}),this.$2=b,this.$3=d!=null?d:null,this.$4=e,this.$5=f,this.$6=g}var e=a.prototype;e.bootstrap=function(){return};e.fetchCache=function(a){return d("MWChatComposerTypeaheadUtil").fetchCacheComposerMentionsTypeahead(a,this.$1,this.$2,this.$3,this.$4,this.$5,i,this.$6)};e.fetchNetwork=function(a){return(h||(h=b("Promise"))).resolve(this.fetchCache(a))};return a}();g["default"]=a}),98);
__d("createCometMentionMatchStrategy",["DocumentMentionsRegex"],(function(a,b,c,d,e,f,g){"use strict";var h="(?:\\.[ |$]| |["+c("DocumentMentionsRegex").PUNCTUATION+"]|)",i=75;function j(a,b,c){b="[^"+a+b+"\\s]";c=new RegExp("(^|\\s|\\()(["+a+"]((?:"+b+c+"){0,"+i+"}))$");var d=50;a=new RegExp("(^|\\s|\\()(["+a+"]((?:"+b+"){0,"+d+"}))$");return{regex:c,regexAlias:a}}function a(a){var b=a.minMatchLength,d=a.name,e=a.triggers,f=a.disallowedChars;f=f===void 0?c("DocumentMentionsRegex").PUNCTUATION:f;var g=a.disallowedTerms;a=a.validJoins;a=a===void 0?h:a;e=j(e,f,a);var i=e.regex,k=e.regexAlias;return{findMentionableString:function(a){var c=i.exec(a);c===null&&(c=k.exec(a));if(c!==null){a=c[1];var d=c[3];if(g==null?void 0:g.includes(d.toLowerCase()))return null;if(d.length>=b)return{leadOffset:c.index+a.length,matchingString:d,replaceableString:c[2]}}return null},name:d}}g["default"]=a}),98);
__d("createCometAtSignComposerMentionsMatchStrategyWithInstagramHandleSupport",["createCometMentionMatchStrategy"],(function(a,b,c,d,e,f,g){"use strict";var h=["@","\\uff20"].join(""),i=",\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\/!%'\"~=<>:;",j="(?:\\.[ |$]|[ ]['\"]|['\"][ |$]| |["+i+"]|)";function a(a){var b=a.disallowedTerms;a=a.minMatchLength;return c("createCometMentionMatchStrategy")({disallowedChars:i,disallowedTerms:b,minMatchLength:a,name:"CometAtSignComposerMentionsMatchStrategyWithInstagramHandleSupport("+a.toString()+")",triggers:h,validJoins:j})}g["default"]=a}),98);
__d("useCometMentionsDataSourceResolverConfig",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useLayoutEffect,k=b.useMemo;function a(a,b){var c=i(function(){a.forEach(function(a){a=a.dataSource;a.bootstrap()})},[a]);j(function(){if(!b)return;c()},[b,c]);return k(function(){var b=new Map();return{bootstrap:c,resolver:function(c){var d={dataSource:null,searchResult:null};if(c==null)return d;var e=b.get(c);if(e!=null)return e;for(e=0;e<a.length;e++){var f=a[e],g=f.dataSource;f=f.matchStrategy;f=f.findMentionableString(c);if(f!=null){g={dataSource:g,searchResult:f};b.set(c,g);return g}}b.set(c,d);return d}}},[a,c])}g["default"]=a}),98);
__d("useMWChatMentionsDataSourceResolverConfig",["I64","LSMessagingThreadTypeUtil","LSThreadBitOffset","MWChatComposerMentionsTypeaheadDataSource","MWLSThread","createCometAtSignComposerMentionsMatchStrategyWithInstagramHandleSupport","react","useCometMentionsDataSourceResolverConfig"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).useMemo;function a(a){var b=a.isAiBotMentionsEnabled,e=a.participants,f=a.threadFBID,g=a.triggerParticipantsSearch;a=d("MWLSThread").useThreadExn((i||(i=d("I64"))).of_string(f));var h=a.threadType,k=d("LSMessagingThreadTypeUtil").isGroup(a.threadType)&&d("LSThreadBitOffset").has(43,a);a=j(function(){return[{dataSource:new(c("MWChatComposerMentionsTypeaheadDataSource"))(e,f,g,b,k,h),matchStrategy:c("createCometAtSignComposerMentionsMatchStrategyWithInstagramHandleSupport")({minMatchLength:0})}]},[k,b,e,f,g,h]);return c("useCometMentionsDataSourceResolverConfig")(a,!0)}g["default"]=a}),98);
__d("MWWorkForeignEntityTypeUtils",["I64","LSContactWorkForeignEntityType","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactWorkForeignEntityType").NOT_FOREIGN))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactWorkForeignEntityType").UNKNOWN)))return"NOT_FOREIGN";else if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactWorkForeignEntityType").NOT_FOREIGN_LIMITED)))return"LIMITED";else return"FOREIGN"}g.getWorkForeignEntityType=a}),98);
__d("useParticipantsExcludingViewer",["I64","MAWSubscribeToContactNames","MWLSContactTypeExactUtils","MWPActor.react","MWWorkForeignEntityTypeUtils","ReQL","ReQLSuspense","getLSMediaContactProfilePictureUrl","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).useMemo;function a(a){var b=a.threadKey,e=d("MWPActor.react").useActor(),g=(h||(h=c("useReStore")))(),j=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(g.tables.participants).getKeyRange(b).map(function(a){return[d("ReQLSuspense").first(d("ReQL").fromTableAscending(g.tables.contacts).getKeyRange(a.contactId),f.id+":43"),a]})},[g,b],f.id+":37"),l=k(function(){return j.reduce(function(a,b){var c=b[0];b=b[1];if(c!=null&&!(i||(i=d("I64"))).equal(c.id,e)){return a.concat([[babelHelpers["extends"]({},c,{name:(c=c.name)!=null?c:d("MAWSubscribeToContactNames").getUnknownUser()}),b]])}return a},[])},[j,e]);return k(function(){return new Map(l.map(function(a){var b,e=a[1];a=a[0];return[(i||(i=d("I64"))).to_string(a.id),{actualName:a.name,blockedByViewerStatus:a.blockedByViewerStatus,contactId:i.to_string(a.id),isAdmin:(b=e.isAdmin)!=null?b:!1,isContact:!0,jobTitle:a.workJobTitle,name:a.name,nickname:e.nickname,profilePictureUrl:c("getLSMediaContactProfilePictureUrl")(a),secondaryName:d("MWLSContactTypeExactUtils").isIgContact(a.contactTypeExact)?a.secondaryName:void 0,workForeignEntityInfo:d("MWWorkForeignEntityTypeUtils").getWorkForeignEntityType(a.workForeignEntityType)}]}))},[l])}g["default"]=a}),98);
__d("IGDMentionsPluginForLexical.react",["CometMentionsForLexical.react","I64","IGDMentionsLayoutStrategy.react","IGDThreadListNewMessageLoggingDataContext","Lexical","MWChatAppendMentionsNodeToReply","MWChatComposerMentionsViewItem.react","MessengerWebUXLogger","messengerMentionsLexicalCreateNodeStrategy","react","react-compiler-runtime","useCometTypeaheadSectionedViewListStrategy","useMWChatMentionsDataSourceResolverConfig","useParticipantsExcludingViewer"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));b=h;b.useCallback;b.useMemo;var k={root:{borderStartStartRadius:"x1i5p2am",borderStartEndRadius:"x1whfx0g",borderEndEndRadius:"xr2y4jy",borderEndStartRadius:"x1ihp6rs",marginTop:"xdj266r",marginBottom:"xat24cr",paddingTop:"x1y1aw1k",paddingInlineEnd:"xf159sx",paddingBottom:"xwib8y2",paddingInlineStart:"xmzvs34",$$css:!0},view:{minWidth:"x1jzhcrs",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(18),e=a.editor,f=a.isAiBotMentionsEnabled;a=a.threadKey;var g;b[0]!==a?(g={threadKey:a},b[0]=a,b[1]=g):g=b[1];g=c("useParticipantsExcludingViewer")(g);var h;b[2]!==a?(h=(i||(i=d("I64"))).to_string(a),b[2]=a,b[3]=h):h=b[3];h=h;var n;b[4]!==f||b[5]!==g||b[6]!==h?(n={isAiBotMentionsEnabled:f,participants:g,threadFBID:h},b[4]=f,b[5]=g,b[6]=h,b[7]=n):n=b[7];g=n;h=g;n=c("useMWChatMentionsDataSourceResolverConfig")(h);b[8]===Symbol["for"]("react.memo_cache_sentinel")?(g={viewItemStrategyRenderer:m,viewXStyle:k.view},b[8]=g):g=b[8];h=c("useCometTypeaheadSectionedViewListStrategy")(g);d("MWChatAppendMentionsNodeToReply").useMWChatAppendMentionsNodeToReply(e,a,f);var o=c("MessengerWebUXLogger").useInteractionLogger(),p=d("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext();b[9]!==e||b[10]!==p||b[11]!==o?(g=function(){o==null?void 0:o({eventName:"mentions_recipient_selected",flowInstanceId:p}),e.update(l)},b[9]=e,b[10]=p,b[11]=o,b[12]=g):g=b[12];a=g;b[13]!==n||b[14]!==e||b[15]!==a||b[16]!==h?(f=j.jsx(c("CometMentionsForLexical.react"),{createNodeStrategy:c("messengerMentionsLexicalCreateNodeStrategy"),dataSourceResolverConfig:n,editor:e,layoutStrategyRenderer:c("IGDMentionsLayoutStrategy.react"),onMentionsEntrySelected:a,position:"above",viewStrategyRenderer:h}),b[13]=n,b[14]=e,b[15]=a,b[16]=h,b[17]=f):f=b[17];return f}function l(){var a=d("Lexical").$getSelection();if(!d("Lexical").$isRangeSelection(a))return;a.insertText(" ")}function m(a){return j.jsx(c("MWChatComposerMentionsViewItem.react"),babelHelpers["extends"]({},a,{xstyle:k.root}))}m.displayName=m.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSUserVisibleErrorsUtil",["LSFactory","LSRemoveErrorStoredProcedure","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){c("promiseDone")(a.runInTransaction(function(a){return c("LSRemoveErrorStoredProcedure")(c("LSFactory")(a),{errorId:b})},"readwrite",void 0,void 0,f.id+":24"))}g.removeUserVisibleErrorFromTable=a}),98);
__d("Ls1lcFeatureOpenFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("153");b=d("FalcoLoggerInternal").create("ls_1lc_feature_open",a);e=b;g["default"]=e}),98);
__d("LsDidTapCallToActionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1743852");b=d("FalcoLoggerInternal").create("ls_did_tap_call_to_action",a);e=b;g["default"]=e}),98);
__d("MWEncryptedBackUpEBNotEnabledError",[],(function(a,b,c,d,e,f){"use strict";a="EB not enabled";f.EB_NOT_ENABLED=a}),66);
__d("MWRestoreMessagesFromEB",["EBIsEbEnabled","I64","LSAppendDataTraceAddonStoredProcedure","LSDataTraceCheckPoint","LSDataTraceType","LSFactory","LSIntEnum","LSIssueMessageRangeQueryTaskStoredProcedure","LSMEBTaskCreationSource","MAWAsyncEBPendingQueryPromise","MAWEBRestoreTrackingUtils","MAWMainTraceUtils","MWEncryptedBackUpEBNotEnabledError","Promise","WAJids","WATagsLogger","asyncToGeneratorRuntime","cr:9628","err","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web][","] Issuing message range query for thread: "," startSortKey: "," numMessages: ","} "]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Issuing message range query for chatJid: "," skipped. EB not enabled"]);l=function(){return a};return a}function a(a){var e=a.chatJid,f=a.newerNumMessages,g=a.numMessages,h=a.passedTraceId,i=a.sortOrderMs,k=a.source,n=a.storage;if(!c("gkx")("23914"))return null;var o=h!=null?h:d("MAWMainTraceUtils").createTraceId();c("promiseDone")(d("EBIsEbEnabled").isEbEnabledLS(n.tables).then(function(a){if(a)return m(o,n,e,f,g,h,i,k);else{d("WATagsLogger").TAGS(["labyrinth_web","eb_restore"]).WARN(l(),e);d("MAWAsyncEBPendingQueryPromise").rejectPendingQueryIfPresent(o,c("err")(d("MWEncryptedBackUpEBNotEnabledError").EB_NOT_ENABLED));return(j||(j=b("Promise"))).resolve()}}));return o}function m(a,e,f,g,i,j,k,l){return b("cr:9628")!=null?b("cr:9628")({chatJid:f,direction:(h||(h=d("I64"))).to_float(g)>0?"after":"before",includeOffset:c("gkx")("5340"),sortOrderMs:(h||(h=d("I64"))).to_string(k),source:l,traceId:a}).then(function(b){!b.success&&c("gkx")("6819")&&d("MAWAsyncEBPendingQueryPromise").rejectPendingQueryIfPresent(a,c("err")(b.error))}):n({chatJid:f,newerNumMessages:g,numMessages:i,passedTraceId:j,sortOrderMs:k,source:l,storage:e,traceId:a})}function n(a){var e=a.chatJid,g=a.newerNumMessages,j=a.numMessages,l=a.passedTraceId,m=a.sortOrderMs,n=a.source,o=a.storage,p=a.traceId;return o.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("MAWMainTraceUtils").startTraceWithTxn(a,(h||(h=d("I64"))).of_float(Date.now()),p,(i||(i=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_RESTORE));yield c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:i.ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_WEB_ISSUE_MESSAGE_RANGE_QUERY),dataTraceId:p,syncChannel:h.neg_one});d("WATagsLogger").TAGS(["labyrinth_web","eb_restore",p]).LOG(k(),p,e,h.to_string(m),h.to_string(j));d("MAWEBRestoreTrackingUtils").markEBRestorePaginated(n,l,"LS");return c("LSIssueMessageRangeQueryTaskStoredProcedure")(c("LSFactory")(a),{includeOffset:c("gkx")("5340"),isPointQuery:!1,newerNumMessages:g,numMessages:j,source:i.ofNumber(n!=null?n:c("LSMEBTaskCreationSource").UNKNOWN),startSortKey:h.to_string(m),threadId:d("WAJids").threadIdForChatJid(e),traceId:p})});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":145")}g["default"]=a}),98);
__d("MAWEBFetch",["EBFormatUtils","FBLogger","I64","LSMEBTaskCreationSource","MAWAsyncEBPendingQueryPromise","MWEncryptedBackUpEBNotEnabledError","MWRestoreMessagesFromEB","WAResultOrError","asyncToGeneratorRuntime","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h;e=c("justknobx")._("3177");var i=Math.max(3,e-5);function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.chatJid,e=a.count,f=a.db,g=a.direction,i=a.timestampMs;a=a.traceId;e=d("EBFormatUtils").adjustCount(e,g);var j=e[0];e=e[1];b=c("MWRestoreMessagesFromEB")({chatJid:b,newerNumMessages:(h||(h=d("I64"))).of_int32(e),numMessages:h.of_int32(j),passedTraceId:a,sortOrderMs:d("EBFormatUtils").adjustTs(i,g),source:c("LSMEBTaskCreationSource").MESSENGER_MESSAGE_LIST_PAGINATION,storage:f});if(b==null)return d("WAResultOrError").makeResult({hasMoreAfter:!1,hasMoreBefore:!1,isEndOfCurrentFormat:!1,messages:[],restoreType:"none"});e=d("MAWAsyncEBPendingQueryPromise").getWaitForRestorePromiseFromTrace(b);j=(yield e.then(function(a){return d("WAResultOrError").makeResult(a)})["catch"](function(a){if(a&&(a==null?void 0:a.message)===d("MWEncryptedBackUpEBNotEnabledError").EB_NOT_ENABLED)return d("WAResultOrError").makeError(d("MWEncryptedBackUpEBNotEnabledError").EB_NOT_ENABLED);c("FBLogger")("messenger_web").catching(a).mustfix("[EBFetch] Failed to fetch");return d("WAResultOrError").makeError((a=a==null?void 0:a.message)!=null?a:"unknown")}));if(j.success===!1)return j;a=j.value;i=a.hasMoreAfter;f=a.hasMoreBefore;b=a.messages;e=a.restoreType;return d("WAResultOrError").makeResult({hasMoreAfter:i,hasMoreBefore:f,isEndOfCurrentFormat:k(g,i,f,b),messages:b,restoreType:e})});return j.apply(this,arguments)}function k(a,b,c,d){if(a==="before"&&c===!1)return!1;return a==="after"&&b===!1?!1:d.length<i}g["default"]=a}),98);
__d("MDSToastUtils",["fbt","CometScreenReaderText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){return a==="warning"?j.jsx(c("CometScreenReaderText.react"),{text:h._(/*BTDS*/"Advertencia:")}):j.jsx(c("CometScreenReaderText.react"),{text:h._(/*BTDS*/"Aviso:")})}g.useAnnouncementTitle=a}),226);
__d("MLCHealthLoggerEvent",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({DAILY_INTERACTION_WITH_SURFACE:"daily_interaction_with_surface",COMMIT_CREATE:"commit_create",COMMIT_EDIT:"commit_edit"});c=a;f["default"]=c}),66);
__d("MlcHealthBizappEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2646");b=d("FalcoLoggerInternal").create("mlc_health_bizapp_event",a);e=b;g["default"]=e}),98);
__d("MlcHealthFacebookAndWorkplaceEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2647");b=d("FalcoLoggerInternal").create("mlc_health_facebook_and_workplace_event",a);e=b;g["default"]=e}),98);
__d("MlcHealthFacebookEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2648");b=d("FalcoLoggerInternal").create("mlc_health_facebook_event",a);e=b;g["default"]=e}),98);
__d("MlcHealthInstagramEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("3766");b=d("FalcoLoggerInternal").create("mlc_health_instagram_event",a);e=b;g["default"]=e}),98);
__d("MlcHealthInternalToolsEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2649");b=d("FalcoLoggerInternal").create("mlc_health_internal_tools_event",a);e=b;g["default"]=e}),98);
__d("MlcHealthMessagingLightswitchEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2650");b=d("FalcoLoggerInternal").create("mlc_health_messaging_lightswitch_event",a);e=b;g["default"]=e}),98);
__d("MlcHealthWorkplaceEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2651");b=d("FalcoLoggerInternal").create("mlc_health_workplace_event",a);e=b;g["default"]=e}),98);
__d("MLCHealthInstrumentationPlugin__INTERNAL.react",["Lexical","LexicalComposerContext","LexicalUtils","MLCInstrumentationCommands","MlcHealthBizappEventFalcoEvent","MlcHealthFacebookAndWorkplaceEventFalcoEvent","MlcHealthFacebookEventFalcoEvent","MlcHealthInstagramEventFalcoEvent","MlcHealthInternalToolsEventFalcoEvent","MlcHealthMessagingLightswitchEventFalcoEvent","MlcHealthWorkplaceEventFalcoEvent","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useLayoutEffect,j=new Set();function k(a){switch(a){case"facebook":return c("MlcHealthFacebookEventFalcoEvent");case"workplace":return c("MlcHealthWorkplaceEventFalcoEvent");case"facebook_and_workplace":return c("MlcHealthFacebookAndWorkplaceEventFalcoEvent");case"internal_tools":return c("MlcHealthInternalToolsEventFalcoEvent");case"messaging_lightswitch":return c("MlcHealthMessagingLightswitchEventFalcoEvent");case"bizapp":return c("MlcHealthBizappEventFalcoEvent");case"instagram":return c("MlcHealthInstagramEventFalcoEvent");default:return null}}function l(a,b,c){(a=k(a))==null?void 0:a.log(function(){return{event:c,surface:b}})}function a(a){var b=a.policyProduct,c=a.surface;a=d("LexicalComposerContext").useLexicalComposerContext();var e=a[0];i(function(){var a=function(){};j.has(c)||(a=e.registerUpdateListener(function(d){var f=d.dirtyLeaves;d=d.tags;if(j.has(c)){a();return}if(f.size===0||d.has("history-merge")||!e.isEditable())return;j.add(c);l(b,c,"daily_interaction_with_surface");a()}));return d("LexicalUtils").mergeRegister(a,e.registerCommand(d("MLCInstrumentationCommands").COMMIT_COMMAND,function(a){a==="create"?l(b,c,"commit_create"):l(b,c,"commit_edit");return!1},d("Lexical").COMMAND_PRIORITY_CRITICAL))},[e,b,c]);return null}g["default"]=a}),98);
__d("MLCInteractionInstrumentationPlugin__INTERNAL.react",["cr:3286","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return b("cr:3286")&&i.jsx(b("cr:3286"),babelHelpers["extends"]({},a))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MLCTextLengthBucket",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";var g=b("$InternalEnum").Mirrored(["S","M","L","XL"]);function a(a){if(a<=500)return g.S;if(a<=1e3)return g.M;return a<=2500?g.L:g.XL}f.TextLengthBucketEnum=g;f.getTextLengthBucket=a}),66);
__d("MLCTypingPerformancePlugin__INTERNAL.react",["LexicalComposerContext","LexicalText","MLCTextLengthBucket","cr:2012305","cr:308","cr:3287","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useLayoutEffect,k=b("cr:2012305")||b("cr:308"),l=new RegExp("[^,;\\s]{200,}"),m=new RegExp("[^,;\\s]{100,199}"),n=new RegExp("[^,;\\s]{50,99}");function o(a){if(a==="")return 0;if(l.test(a))return 200;else if(m.test(a))return 100;else if(n.test(a))return 50;else return 0}function a(a){if(k===null)return null;b("cr:3287")&&b("cr:3287")();return i.jsx(p,babelHelpers["extends"]({},a))}a.displayName=a.name+" [from "+f.id+"]";function p(a){var b=a.format__DEPRECATED,e=a.surface;a=a.typingPerformanceID;var f=a===void 0?"":a;a=d("LexicalComposerContext").useLexicalComposerContext();var g=a[0];j(function(){var a=babelHelpers["extends"]({largeWord:o(g.getEditorState().read(d("LexicalText").$rootTextContent)),textLengthBucket:d("MLCTextLengthBucket").getTextLengthBucket(g.getEditorState().read(d("LexicalText").$rootTextContent).length)},e==="FeedComposerCometStatusArea"?{autolinkFastPath:String(c("gkx")("8927"))}:null),h;i();function i(){h==null?void 0:h();if(k===null)return;var c=null,d=g.registerRootListener(function(d){if(d===c)return;c!==null&&k.unregisterTypingPerf(c);d!==null&&k.trackTypingPerf(d,e,c,babelHelpers["extends"]({},a,{editor:"LexicalEditor",format:b!=null?b:"",typingPerformanceID:f}));c=d});h=function(){d(),c!==null&&k.unregisterTypingPerf(c)}}var j=g.registerTextContentListener(function(b){b=o(b);b!==a.largeWord&&(a.largeWord=b,i())}),l=g.registerTextContentListener(function(b){b=d("MLCTextLengthBucket").getTextLengthBucket(b.length);b!==a.textLengthBucket&&(a.textLengthBucket=b,i())});return function(){h==null?void 0:h(),j==null?void 0:j(),l==null?void 0:l()}},[f,g,b,e]);return null}p.displayName=p.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MLCInstrumentationPlugin__INTERNAL.react",["MLCHealthInstrumentationPlugin__INTERNAL.react","MLCInteractionInstrumentationPlugin__INTERNAL.react","MLCTypingPerformancePlugin__INTERNAL.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");b="facebook";b;function a(a){return i.jsxs(i.Fragment,{children:[i.jsx(c("MLCTypingPerformancePlugin__INTERNAL.react"),babelHelpers["extends"]({},a)),i.jsx(c("MLCHealthInstrumentationPlugin__INTERNAL.react"),babelHelpers["extends"]({},a)),i.jsx(c("MLCInteractionInstrumentationPlugin__INTERNAL.react"),babelHelpers["extends"]({},a))]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatAudioLog",["AudioClipsBrowserBlockMicAccessFalcoEvent","AudioClipsCancelledByUserFalcoEvent","AudioClipsDialogNotnowMicAccessFalcoEvent","AudioClipsDialogOkMicAccessFalcoEvent","AudioClipsMicAccessCheckFailedFalcoEvent","AudioClipsPlaybackPauseFalcoEvent","AudioClipsPlaybackResumeFalcoEvent","AudioClipsPlaybackStartFalcoEvent","AudioClipsStartRecordingClickFalcoEvent","AudioClipsStopRecordingClickFalcoEvent","I64","Ls1lcFeatureOpenFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){c("AudioClipsStopRecordingClickFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:(h||(h=d("I64"))).to_string(h.of_float(a)),entry_point:void 0,error_code:void 0,has_access_token:void 0,is_prefetch:"true",position:void 0,rtc_call_type:void 0,source_click_category:2,with_captions:void 0}})}function b(){c("AudioClipsStartRecordingClickFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:void 0,entry_point:void 0,error_code:void 0,has_access_token:void 0,is_prefetch:void 0,position:void 0,rtc_call_type:void 0,source_click_category:2,with_captions:void 0}}),c("Ls1lcFeatureOpenFalcoEvent").log(function(){return{extra:void 0,feature:13,feature_sessionid:void 0,screen_orientation:void 0,stage:7,thread:void 0}})}function e(){c("AudioClipsCancelledByUserFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:void 0,entry_point:void 0,error_code:void 0,has_access_token:void 0,is_prefetch:void 0,position:void 0,rtc_call_type:void 0,source_click_category:2,with_captions:void 0}})}function f(){c("AudioClipsBrowserBlockMicAccessFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:void 0,entry_point:void 0,error_code:void 0,has_access_token:void 0,is_prefetch:void 0,position:void 0,rtc_call_type:void 0,source_click_category:2,with_captions:void 0}})}function i(a){c("AudioClipsPlaybackStartFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:(h||(h=d("I64"))).to_string(h.of_float(a)),entry_point:void 0,error_code:void 0,has_access_token:void 0,is_prefetch:void 0,position:void 0,rtc_call_type:void 0,source_click_category:2,with_captions:void 0}})}function j(a,b){c("AudioClipsPlaybackPauseFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:(h||(h=d("I64"))).to_string(h.of_float(a)),entry_point:void 0,error_code:void 0,has_access_token:void 0,is_prefetch:void 0,position:h.to_string(h.of_float(b)),rtc_call_type:void 0,source_click_category:2,with_captions:void 0}})}function k(a,b){c("AudioClipsPlaybackResumeFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:(h||(h=d("I64"))).to_string(h.of_float(a)),entry_point:void 0,error_code:void 0,has_access_token:void 0,is_prefetch:void 0,position:h.to_string(h.of_float(b)),rtc_call_type:void 0,source_click_category:2,with_captions:void 0}})}function l(){c("AudioClipsDialogOkMicAccessFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:void 0,entry_point:void 0,error_code:void 0,has_access_token:void 0,is_prefetch:void 0,position:void 0,rtc_call_type:void 0,source_click_category:2,with_captions:void 0}})}function m(){c("AudioClipsDialogNotnowMicAccessFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:void 0,entry_point:void 0,error_code:void 0,has_access_token:void 0,is_prefetch:void 0,position:void 0,rtc_call_type:void 0,source_click_category:2,with_captions:void 0}})}function n(){c("AudioClipsMicAccessCheckFailedFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:void 0,entry_point:void 0,error_code:void 0,has_access_token:void 0,is_prefetch:void 0,position:void 0,rtc_call_type:void 0,source_click_category:2,with_captions:void 0}})}g.logClickStopRecording=a;g.logClickStartRecording=b;g.logDeleteRecording=e;g.logBrowserDenyAccess=f;g.logPlaybackStart=i;g.logPlaybackPause=j;g.logPlaybackResume=k;g.logDialogOk=l;g.logDialogNotNow=m;g.logMicAccessCheckFailed=n}),98);
__d("MWChatTabOpenThreadCapabilitiesLoggingGated",["cr:10565"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:10565")}),98);
__d("MWXToast.react",["MDSToastUtils","cr:1339","cr:3542","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var c,e=a.actions,f=a.announcementType;f=f===void 0?"general":f;var g=a.assertive;g=g===void 0?!1:g;var h=a.body,j=a.icon,k=a.impressionLoggingRef,l=a.onDismiss,m=a.startAddOn;m=m===void 0?null:m;var n=a.supressCloseButton;n=n===void 0?!1:n;var o=a.testid;o=o===void 0?"mw-toast":o;a=a.title;var p=(j==null?void 0:j.mds)!=null?{hiddenAria:!0,source:j==null?void 0:j.mds,type:"icon"}:void 0;j=(j=j==null?void 0:j.comet)!=null?j:void 0;c=a!=null&&h!=null?i.jsxs(i.Fragment,{children:[a,i.jsx("br",{}),h]}):(c=a!=null?a:h)!=null?c:"";c=i.jsxs(i.Fragment,{children:[d("MDSToastUtils").useAnnouncementTitle(f),c]});j={icon:j,impressionLoggingRef:k,message:c,onDismiss:l,testid:o,withoutCloseButton:n};return b("cr:3542")!=null?i.jsx(b("cr:3542"),{actions:e,announcementType:f,assertive:g,body:h,closeButtonAriaHidden:!0,impressionLoggingRef:k,onDismiss:l,startAddOn:m!==null?m:p,testid:void 0,title:a,withCloseButton:!n}):b("cr:1339")!=null?e!=null?i.jsx(b("cr:1339"),babelHelpers["extends"]({},j,{action:babelHelpers["extends"]({},e.primaryCallToAction)})):i.jsx(b("cr:1339"),babelHelpers["extends"]({},j)):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MessageRequestsBulkActionConfirmedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("256");b=d("FalcoLoggerInternal").create("message_requests_bulk_action_confirmed",a);e=b;g["default"]=e}),98);
__d("MessageRequestsBulkActionEditFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2614");b=d("FalcoLoggerInternal").create("message_requests_bulk_action_edit",a);e=b;g["default"]=e}),98);
__d("MessageRequestsBulkActionTappedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("257");b=d("FalcoLoggerInternal").create("message_requests_bulk_action_tapped",a);e=b;g["default"]=e}),98);
__d("MessageRequestsInfoBannerShownFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("258");b=d("FalcoLoggerInternal").create("message_requests_info_banner_shown",a);e=b;g["default"]=e}),98);
__d("MessageRequestsThreadActionConfirmedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("259");b=d("FalcoLoggerInternal").create("message_requests_thread_action_confirmed",a);e=b;g["default"]=e}),98);
__d("MessageRequestsThreadActionTappedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("260");b=d("FalcoLoggerInternal").create("message_requests_thread_action_tapped",a);e=b;g["default"]=e}),98);
__d("MessageRequestsThreadDenialOptionsTappedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("261");b=d("FalcoLoggerInternal").create("message_requests_thread_denial_options_tapped",a);e=b;g["default"]=e}),98);
__d("MessageRequestsViewThreadlistFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("263");b=d("FalcoLoggerInternal").create("message_requests_view_threadlist",a);e=b;g["default"]=e}),98);
__d("MessageThreadEventsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5034");b=d("FalcoLoggerInternal").create("message_thread_events",a);e=b;g["default"]=e}),98);
__d("MwbCmInformTreatmentEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("6736");b=d("FalcoLoggerInternal").create("mwb_cm_inform_treatment_event",a);e=b;g["default"]=e}),98);
__d("MwbInformTreatmentShownImpressionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("6735");b=d("FalcoLoggerInternal").create("mwb_inform_treatment_shown_impression",a);e=b;g["default"]=e}),98);
__d("PolarisDirectActionCloseVerifiedUserCallingNotEnabledModal",[],(function(a,b,c,d,e,f){"use strict";function a(){return function(a){a({type:"DIRECT_VERIFIED_USER_CALLING_NOT_ENABLED_MODAL_CLOSE"})}}f.closeVerifiedUserCallingNotEnabledModal=a}),66);
__d("PolarisDirectActionCloseVerifiedUserCallingNotFollowingModal",[],(function(a,b,c,d,e,f){"use strict";function a(){return function(a){a({type:"DIRECT_VERIFIED_USER_CALLING_NOT_FOLLOWING_MODAL_CLOSE"})}}f.closeVerifiedUserCallingNotFollowingModal=a}),66);
__d("PolarisDirectInboxQPInterstitialQuery.graphql",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"Literal",name:"surface_nux_id",value:11459},{kind:"Literal",name:"trigger_name",value:"INSTAGRAM_DIRECT_WEB_OPEN_PAGE"}],b=[{kind:"Literal",name:"supported",value:"1n7Qkl"}],c={kind:"InlineFragment",selections:[{args:null,documentName:"PolarisDirectInboxQPInterstitialQuery",fragmentName:"CometQuickPromotionInstagramDirectWebEncryptedBackupSoftBlockInterstitialRendererStrategy_quickPromotionRef",fragmentPropName:"quickPromotionRef",kind:"ModuleImport"}],type:"XFBCometQuickPromotionInstagramDirectWebEncryptedBackupSoftBlockInterstitialRendererStrategy",abstractKey:null},d={kind:"InlineFragment",selections:[{args:null,documentName:"PolarisDirectInboxQPInterstitialQuery",fragmentName:"CometQuickPromotionInstagramDirectWebEncryptedBackupHardBlockInterstitialRendererStrategy_quickPromotionRef",fragmentPropName:"quickPromotionRef",kind:"ModuleImport"}],type:"XFBCometQuickPromotionInstagramDirectWebEncryptedBackupHardBlockInterstitialRendererStrategy",abstractKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PolarisDirectInboxQPInterstitialQuery",selections:[{alias:null,args:null,concreteType:"XFBViewer",kind:"LinkedField",name:"xfb_viewer",plural:!1,selections:[{alias:null,args:a,concreteType:"XFBViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBQuickPromotion",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"XFBCometQuickPromotionSections",kind:"LinkedField",name:"comet_qp_sections",plural:!1,selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"renderer_strategy",plural:!1,selections:[c,d],storageKey:'renderer_strategy(supported:"1n7Qkl")'}],storageKey:null}],storageKey:null}],storageKey:'eligible_promotions(surface_nux_id:11459,trigger_name:"INSTAGRAM_DIRECT_WEB_OPEN_PAGE")'}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"PolarisDirectInboxQPInterstitialQuery",selections:[{alias:null,args:null,concreteType:"XFBViewer",kind:"LinkedField",name:"xfb_viewer",plural:!1,selections:[{alias:null,args:a,concreteType:"XFBViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBQuickPromotion",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"XFBCometQuickPromotionSections",kind:"LinkedField",name:"comet_qp_sections",plural:!1,selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"renderer_strategy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},c,d],storageKey:'renderer_strategy(supported:"1n7Qkl")'}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:'eligible_promotions(surface_nux_id:11459,trigger_name:"INSTAGRAM_DIRECT_WEB_OPEN_PAGE")'}],storageKey:null}]},params:{id:"9824483370907736",metadata:{},name:"PolarisDirectInboxQPInterstitialQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("useQuickPromotionFalcoEvent",["react","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback,j=c("requireDeferred")("QpActionFalcoEvent").__setRef("useQuickPromotionFalcoEvent"),k=c("requireDeferred")("QpImpressionFalcoEvent").__setRef("useQuickPromotionFalcoEvent");function a(a){var b=a.context_surface_id;a=a.context_trigger;var c=a===void 0?"newsfeed":a,d=function(a){return a instanceof Map?Object.fromEntries(a):Object.entries(a!=null?a:{}).reduce(function(a,b){var c=b[0];b=b[1];a[c]=b;return a},{})};a=i(function(a,e,f,g){if(e==null||f==null)return;var h=""+b,i=d(g);j.onReady(function(b){b=b.log;b(function(){return{action_type:a,context_surface_id:h,context_trigger:c,extra_client_data:i,instance_log_data:f,promotion_id:e}})})},[b,c]);var e=i(function(a,e,f){if(a==null||e==null)return;var g=""+b,h=d(f);k.onReady(function(b){b=b.log;b(function(){return{context_surface_id:g,context_trigger:c,extra_client_data:h,instance_log_data:e,promotion_id:a}})})},[b,c]);return{logAction:a,logImpression:e}}g["default"]=a}),98);
__d("PolarisDirectInboxQPInterstitial.react",["CometQuickPromotionLoggerContext.react","CometRelay","PolarisDirectInboxQPInterstitialQuery.graphql","react","react-compiler-runtime","useQuickPromotionFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function a(a){var e,f=d("react-compiler-runtime").c(8);a=a.queryRef;a=d("CometRelay").usePreloadedQuery(h!==void 0?h:h=b("PolarisDirectInboxQPInterstitialQuery.graphql"),a);var g;f[0]===Symbol["for"]("react.memo_cache_sentinel")?(g={context_surface_id:11459,context_trigger:"instagram_direct_web_open_page"},f[0]=g):g=f[0];g=c("useQuickPromotionFalcoEvent")(g);if(f[1]!==(a==null?void 0:(e=a.xfb_viewer)==null?void 0:(e=e.eligible_promotions)==null?void 0:e.nodes)){e=a==null?void 0:(e=a.xfb_viewer)==null?void 0:(e=e.eligible_promotions)==null?void 0:(e=e.nodes)==null?void 0:e.find(k);f[1]=a==null?void 0:(a=a.xfb_viewer)==null?void 0:(a=a.eligible_promotions)==null?void 0:a.nodes;f[2]=e}else e=f[2];a=e;a=a==null?void 0:(e=a.comet_qp_sections)==null?void 0:e.renderer_strategy;if(a==null)return null;f[3]!==a?(e=j.jsx(d("CometRelay").MatchContainer,{match:a}),f[3]=a,f[4]=e):e=f[4];f[5]!==g||f[6]!==e?(a=j.jsx(c("CometQuickPromotionLoggerContext.react").Provider,{value:g,children:e}),f[5]=g,f[6]=e,f[7]=a):a=f[7];return a}function k(a){return((a=a.comet_qp_sections)==null?void 0:a.renderer_strategy)!=null}g["default"]=a}),98);
__d("PolarisDirectMediaHelpers",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a.map(function(a){var b=a.height,c=a.url;a=a.width;return{configHeight:b,configWidth:a,src:c}})}function b(a){var b=a.carousel_media;return b==null?-1:b.findIndex(function(b){return b.id===a.carousel_share_child_media_id})}f.getSrcSet=a;f.getSharedCarouselChildIdxIfAny=b}),66);
__d("PolarisDirectMessagePostModal.react",["PolarisDirectMediaHelpers","PolarisLinkBuilder","PolarisPost.react","PolarisPostModal.react","PolarisPostVariants","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(18),e=a.media,f=a.modalEntryPath,g=a.onClose;a=a.onOpen;var h;b[0]!==e.id?(h=e.id.split("_"),b[0]=e.id,b[1]=h):h=b[1];h=h[0];var j=e.code,k;b[2]!==e.original_height||b[3]!==e.original_width?(k={height:e.original_height,width:e.original_width},b[2]=e.original_height,b[3]=e.original_width,b[4]=k):k=b[4];k=k;var l;b[5]!==e?(l=d("PolarisDirectMediaHelpers").getSharedCarouselChildIdxIfAny(e),b[5]=e,b[6]=l):l=b[6];e=l;b[7]!==e||b[8]!==h?(l=i.jsx(c("PolarisPost.react"),{analyticsContext:"directThreadPageModal",autoplay:!0,id:h,initialCarouselIndex:e,isVisible:!0,variant:d("PolarisPostVariants").VARIANTS.flexible,visiblePosition:0}),b[7]=e,b[8]=h,b[9]=l):l=b[9];b[10]!==k||b[11]!==f||b[12]!==g||b[13]!==a||b[14]!==j||b[15]!==h||b[16]!==l?(e=i.jsx(c("PolarisPostModal.react"),{analyticsContext:"DirectThreadPage",dimensions:k,mediaLinkBuilder:d("PolarisLinkBuilder").buildMediaLink,modalEntryPath:f,onClose:g,onOpen:a,postCode:j,postId:h,children:l}),b[10]=k,b[11]=f,b[12]=g,b[13]=a,b[14]=j,b[15]=h,b[16]=l,b[17]=e):e=b[17];return e}g["default"]=a}),98);
__d("PolarisDirectVerifiedUserCallingNotEnabledModalQuery_instagramRelayOperation",[],(function(a,b,c,d,e,f){e.exports="29587722120841677"}),null);
__d("PolarisDirectVerifiedUserCallingNotEnabledModalQuery.graphql",["PolarisDirectVerifiedUserCallingNotEnabledModalQuery_instagramRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,concreteType:"FXCALSettings",kind:"LinkedField",name:"fxcal_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"should_user_see_centralized_settings_new_app_ia",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ig_project_elevation_one_point_five_enabled",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PolarisDirectVerifiedUserCallingNotEnabledModalQuery",selections:a,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"PolarisDirectVerifiedUserCallingNotEnabledModalQuery",selections:a},params:{id:b("PolarisDirectVerifiedUserCallingNotEnabledModalQuery_instagramRelayOperation"),metadata:{},name:"PolarisDirectVerifiedUserCallingNotEnabledModalQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("PolarisDirectVerifiedUserCallingNotEnabledModal.react",["fbt","CometRelay","CometRelayEnvironmentProvider","IGCoreModal.react","IGDSActionDialog.react","IGDSDialogItem.react","PolarisDirectActionCloseVerifiedUserCallingNotEnabledModal","PolarisDirectVerifiedUserCallingNotEnabledModalQuery.graphql","PolarisReactRedux.react","PolarisRoutes","browserHistory_DO_NOT_USE","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react"),l=h._(/*BTDS*/"Activa las llamadas para realizarlas y recibirlas de las cuentas que sigues. Puedes desactivar esta opci\u00f3n cuando quieras en la configuraci\u00f3n."),m=h._(/*BTDS*/"\u00bfActivar las llamadas?"),n=h._(/*BTDS*/"Activar"),o=h._(/*BTDS*/"Ahora no");function p(){var a=d("react-compiler-runtime").c(13),e=d("PolarisReactRedux.react").useDispatch(),f;a[0]!==e?(f=function(){e(d("PolarisDirectActionCloseVerifiedUserCallingNotEnabledModal").closeVerifiedUserCallingNotEnabledModal())},a[0]=e,a[1]=f):f=a[1];var g=f;f=d("CometRelay").useLazyLoadQuery(i!==void 0?i:i=b("PolarisDirectVerifiedUserCallingNotEnabledModalQuery.graphql"),{});f=f.fxcal_settings;var h=(f==null?void 0:f.should_user_see_centralized_settings_new_app_ia)===!0&&(f==null?void 0:f.ig_project_elevation_one_point_five_enabled)===!0;a[2]!==g||a[3]!==h?(f=function(){g(),d("browserHistory_DO_NOT_USE").browserHistory.push(h?d("PolarisRoutes").HOW_OTHERS_CAN_INTERACT_PATH:d("PolarisRoutes").PRIVACY_AND_SECURITY_PATH)},a[2]=g,a[3]=h,a[4]=f):f=a[4];f=f;var j;a[5]!==f?(j=k.jsx(d("IGDSDialogItem.react").IGDSDialogItem,{color:"primaryButton",onClick:f,children:n}),a[5]=f,a[6]=j):j=a[6];a[7]!==g?(f=k.jsx(d("IGDSDialogItem.react").IGDSDialogItem,{onClick:g,children:o}),a[7]=g,a[8]=f):f=a[8];var p;a[9]!==g||a[10]!==j||a[11]!==f?(p=k.jsx(c("IGCoreModal.react"),{children:k.jsxs(c("IGDSActionDialog.react"),{body:l,closeButtonPosition:"background",onModalClose:g,title:m,children:[j,f]})}),a[9]=g,a[10]=j,a[11]=f,a[12]=p):p=a[12];return p}function a(){var a=d("react-compiler-runtime").c(1),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=k.jsx(c("CometRelayEnvironmentProvider"),{children:k.jsx(p,{})}),a[0]=b):b=a[0];return b}g["default"]=a}),226);
__d("PolarisDirectVerifiedUserCallingNotFollowingModal.react",["fbt","FBLogger","IGCoreModal.react","IGDSActionDialog.react","IGDSDialogItem.react","PolarisDirectActionCloseVerifiedUserCallingNotFollowingModal","PolarisLinkBuilder","PolarisReactRedux.react","browserHistory_DO_NOT_USE","react","react-compiler-runtime","vulture"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function k(a){return h._(/*BTDS*/"No sigues a {username}. Solo puedes llamar a cuentas que sigues.",[h._param("username",a)])}var l=h._(/*BTDS*/"No se ha podido conectar la llamada"),m=h._(/*BTDS*/"Aceptar"),n=h._(/*BTDS*/"Ver perfil");function a(){var a=d("react-compiler-runtime").c(17);c("vulture")("AjCvdcqKYR75obiUTV2yJCSjGms=");var b=d("PolarisReactRedux.react").useDispatch(),e=d("PolarisReactRedux.react").useSelector(o),f=e.notFollowingUsername;if(f==null){c("FBLogger")("ig_web","add_new_highlight").mustfix("Unable to call - unknown userId");a[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=j.jsx(j.Fragment,{children:" "}),a[0]=e):e=a[0];return e}a[1]!==b?(e=function(){b(d("PolarisDirectActionCloseVerifiedUserCallingNotFollowingModal").closeVerifiedUserCallingNotFollowingModal())},a[1]=b,a[2]=e):e=a[2];var g=e;a[3]!==g||a[4]!==f?(e=function(){g(),d("browserHistory_DO_NOT_USE").browserHistory.push(d("PolarisLinkBuilder").buildUserLink(f))},a[3]=g,a[4]=f,a[5]=e):e=a[5];e=e;var h;a[6]!==f?(h=k(f),a[6]=f,a[7]=h):h=a[7];var i;a[8]!==g?(i=j.jsx(d("IGDSDialogItem.react").IGDSDialogItem,{onClick:g,children:m}),a[8]=g,a[9]=i):i=a[9];var p;a[10]!==e?(p=j.jsx(d("IGDSDialogItem.react").IGDSDialogItem,{color:"primaryButton",onClick:e,children:n}),a[10]=e,a[11]=p):p=a[11];a[12]!==g||a[13]!==h||a[14]!==i||a[15]!==p?(e=j.jsx(c("IGCoreModal.react"),{children:j.jsxs(c("IGDSActionDialog.react"),{body:h,closeButtonPosition:"background",onModalClose:g,title:l,children:[i,p]})}),a[12]=g,a[13]=h,a[14]=i,a[15]=p,a[16]=e):e=a[16];return e}function o(a){return a.direct.verifiedUserCalling}g["default"]=a}),226);
__d("ZenonUserActionLoggerCommon",["ZenonUserActionLogger"],(function(a,b,c,d,e,f,g){"use strict";g.logClick=c("ZenonUserActionLogger").logClick,g.logImpression=c("ZenonUserActionLogger").logImpression}),98);
__d("logXMACtaClicked",["I64","LsDidTapCallToActionFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=a.cta,e=a.loggingDetails,f=a.source;if(e==null)return;a=b.actionContentBlob;var g=a!=null?i(a):"",n=a!=null?k(a):"",o=a!=null?j(a):"",p=a!=null?l(a):"",q=a!=null?m(a):"",r=e[1],s=e[0];c("LsDidTapCallToActionFalcoEvent").log(function(){return{action:{cta_type_unique_id:n,id:(h||(h=d("I64"))).to_string(b.ctaId),name:"",source:f,type:r},message:{campaign_id:o,id:b.messageId,marketing_message_impression_token:p,marketing_message_surface:q,notification_token:g},page:{id:s},target:{id:s},thread:{id:s}}})}function i(a){try{a=JSON.parse(a);a=a.notification_message_token;return a!=null?a:""}catch(a){return""}}function j(a){try{a=JSON.parse(a);a=a.mbs_mm_campaign_id;return a!=null?a:""}catch(a){return""}}function k(a){try{a=JSON.parse(a);a=a.mm_cta_unique_id;return a!=null?a:""}catch(a){return""}}function l(a){try{a=JSON.parse(a);a=a.mm_impression_token;return a!=null?a:""}catch(a){return""}}function m(a){try{a=JSON.parse(a);a=a.mm_surface;return a!=null?a:""}catch(a){return""}}g.logXMACtaClicked=a}),98);
__d("mwPushToast",["ix","BaseToasterStateManager","MWXToast.react","cr:4379","cr:6570","fbicon","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=c("BaseToasterStateManager").getInstance();function l(a,b){var d=a.announcementType,e=a.assertive,f=a.body,g=a.icon,h=a.impressionLoggingRef,i=a.onDismiss,l=a.startAddOn;l=l===void 0?null:l;var m=a.supressCloseButton;m=m===void 0?!1:m;var n=a.testid;n=a.title;b===void 0&&(b=2750);var o=k.push(j.jsx(c("MWXToast.react"),{announcementType:d,assertive:e,body:f,icon:g,impressionLoggingRef:h,onDismiss:function(){k.expire(o),i==null?void 0:i()},startAddOn:l,supressCloseButton:m,testid:void 0,title:n}),b);return o}function a(a,c){var e=a.body,f=a.onDismiss;a=a.title;c===void 0&&(c=2750);var g=b("cr:6570")!==null?j.jsx(b("cr:6570"),{color:"warning",icon:d("fbicon")._(h("502062"),20)}):void 0,i=b("cr:4379")!=null?b("cr:4379"):void 0;return l({announcementType:"warning",assertive:!0,body:e,icon:{comet:g,mds:i},onDismiss:f,title:a},c)}g.mwPushToast=l;g.mwPushErrorToast=a}),98);/*FB_PKG_DELIM*/
__d("BotFeedbackKind",[],(function(a,b,c,d,e,f){a=Object.freeze({BOT_FEEDBACK_POSITIVE:0,BOT_FEEDBACK_NEGATIVE_GENERIC:1,BOT_FEEDBACK_NEGATIVE_HELPFUL:2,BOT_FEEDBACK_NEGATIVE_INTERESTING:3,BOT_FEEDBACK_NEGATIVE_ACCURATE:4,BOT_FEEDBACK_NEGATIVE_SAFE:5,BOT_FEEDBACK_NEGATIVE_OTHER:6,BOT_FEEDBACK_NEGATIVE_REFUSED:7,BOT_FEEDBACK_NEGATIVE_NOT_VISUALLY_APPEALING:8,BOT_FEEDBACK_NEGATIVE_NOT_RELEVANT_TO_TEXT:9,BOT_FEEDBACK_NEGATIVE_PERSONALIZED:10,BOT_FEEDBACK_NEGATIVE_CLARITY:11,BOT_FEEDBACK_NEGATIVE_DOESNT_LOOK_LIKE_THE_PERSON:12,BOT_FEEDBACK_NEGATIVE_HALLUCINATION_INTERNAL_ONLY:13,BOT_FEEDBACK_NEGATIVE:14});f["default"]=a}),66);
__d("EmojiFormat.bs",[],(function(a,b,c,d,e,f){"use strict";function g(a){return a.split("_").map(function(a){return parseInt(a,16)})}function a(a){return a.map(function(a){return a.toString(16)}).join("_")}function h(a){return a.map(function(a){return String.fromCodePoint(a)}).join("")}function b(a){return h(g(a))}f.codeStringToCodeArray=g;f.codeArrayToCodeString=a;f.codeArrayToUnicode=h;f.codeStringToUnicode=b}),66);
__d("IGDSErrorOutlineIcon.react",["IGDSErrorPanoOutlineIcon.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(2),e;b[0]!==a?(e=i.jsx(c("IGDSErrorPanoOutlineIcon.react"),babelHelpers["extends"]({},a)),b[0]=a,b[1]=e):e=b[1];return e}b=i.memo(a);g["default"]=b}),98);
__d("IGDSFace2OutlineIcon.react",["IGDSFace2PanoOutlineIcon.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(2),e;b[0]!==a?(e=i.jsx(c("IGDSFace2PanoOutlineIcon.react"),babelHelpers["extends"]({},a)),b[0]=a,b[1]=e):e=b[1];return e}b=i.memo(a);g["default"]=b}),98);
__d("IGDSReplyPanoOutline24Icon.react",["IGDSSVGIconBase.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(3),e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsx("path",{d:"M14 8.999H4.413l5.294-5.292a1 1 0 1 0-1.414-1.414l-7 6.998c-.014.014-.019.033-.032.048A.933.933 0 0 0 1 9.998V10c0 .027.013.05.015.076a.907.907 0 0 0 .282.634l6.996 6.998a1 1 0 0 0 1.414-1.414L4.415 11H14a7.008 7.008 0 0 1 7 7v3.006a1 1 0 0 0 2 0V18a9.01 9.01 0 0 0-9-9Z"}),b[0]=e):e=b[0];b[1]!==a?(e=i.jsx(c("IGDSSVGIconBase.react"),babelHelpers["extends"]({},a,{viewBox:"0 0 24 24",children:e})),b[1]=a,b[2]=e):e=b[2];return e}b=i.memo(a);g["default"]=b}),98);
__d("IGDSThumbDownPanoOutline24Icon.react",["IGDSSVGIconBase.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(3),e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsx("path",{d:"M10.47 23a2 2 0 0 1-1.68-.91c-.783-1.201-2.55-4.045-3.84-6.121a242.263 242.263 0 0 0-1.429-2.29c-1.493-2.29-1.888-4.62-1.173-6.927C3.398 3.365 6.715 1 10.414 1h6.442a4.02 4.02 0 0 1 3.96 3.435l1.141 6.98A4.002 4.002 0 0 1 17.999 16h-5.093l.727 2.087a3.693 3.693 0 0 1-.264 3.063 3.697 3.697 0 0 1-2.496 1.809c-.135.027-.27.04-.403.04Zm-.005-2.003.015.002a1.701 1.701 0 0 0 1.267-2.244l-1.191-3.427A.998.998 0 0 1 11.5 14h6.499a2.001 2.001 0 0 0 1.98-2.283l-1.14-6.98A2.014 2.014 0 0 0 16.856 3h-6.442C7.582 3 5.051 4.786 4.258 7.344c-.537 1.735-.23 3.45.94 5.242.143.22.718 1.146 1.451 2.327 1.285 2.068 3.044 4.901 3.816 6.084Z"}),b[0]=e):e=b[0];b[1]!==a?(e=i.jsx(c("IGDSSVGIconBase.react"),babelHelpers["extends"]({},a,{viewBox:"0 0 24 24",children:e})),b[1]=a,b[2]=e):e=b[2];return e}b=i.memo(a);g["default"]=b}),98);
__d("IGDSThumbUpPanoOutline24Icon.react",["IGDSSVGIconBase.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(3),e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsx("path",{d:"M16.856 23h-6.442c-3.7 0-7.017-2.365-8.066-5.752-.715-2.308-.32-4.638 1.173-6.928.142-.216.708-1.127 1.43-2.289 1.29-2.076 3.056-4.92 3.838-6.12a1.997 1.997 0 0 1 2.084-.871 3.703 3.703 0 0 1 2.757 4.883L12.906 8H18a4.002 4.002 0 0 1 3.961 4.566l-1.147 7.019C20.537 21.523 18.834 23 16.856 23ZM10.473 3c-.006 0-.008.002-.008.004-.772 1.182-2.531 4.015-3.816 6.083a266.26 266.26 0 0 1-1.452 2.326c-1.17 1.793-1.476 3.508-.94 5.243C5.052 19.214 7.583 21 10.415 21h6.442c.99 0 1.84-.738 1.98-1.718l1.146-7.018A2.001 2.001 0 0 0 18 10h-6.5a.998.998 0 0 1-.944-1.328l1.188-3.416A1.701 1.701 0 0 0 10.48 3h-.007Z"}),b[0]=e):e=b[0];b[1]!==a?(e=i.jsx(c("IGDSSVGIconBase.react"),babelHelpers["extends"]({},a,{viewBox:"0 0 24 24",children:e})),b[1]=a,b[2]=e):e=b[2];return e}b=i.memo(a);g["default"]=b}),98);
__d("LSDeleteReaction",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(8).fetch([[[a[0],a[1],a[2]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&c.messageId===a[1]&&b.i64.eq(c.actorId,a[2])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxDeleteReactionStoredProcedure";a.__tables__=["reactions"];e.exports=a}),null);
__d("LSMailboxAIBotFeedbackSubmissionStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,SUBMITTED:1});f["default"]=a}),66);
__d("LSOptimisticUpsertReaction",["LSArrayGetObjectAt","LSCancelTaskByQueueName","LSDeleteReaction","LSIssueNewTask","LSUpsertReaction"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[21]=b.syncGroup,c.i64.neq(d[21],void 0)?d[20]=d[21]:d[20]=c.i64.cast([0,1]),d[0]=d[20])})},function(e){return d[2]=new c.Map(),d[2].set("thread_key",a[0]),d[2].set("timestamp_ms",a[1]),d[2].set("message_id",a[2]),d[2].set("actor_id",a[3]),d[2].set("reaction",a[4]),d[2].set("reaction_style",void 0),d[2].set("sync_group",d[0]),d[3]=c.createArray(),d[4]=(d[3].push("reaction"),d[3]),d[5]=d[2].get("message_id"),d[6]=(d[3].push(d[5]),d[3]),d[7]=c.toJSON(d[3]),c.storedProcedure(b("LSCancelTaskByQueueName"),d[7],c.i64.cast([0,29]))},function(e){return a[4]===""?c.sequence([function(d){return c.storedProcedure(b("LSDeleteReaction"),a[0],a[2],a[3])},function(a){return d[8]=void 0}]):c.sequence([function(e){return a[4]==="\u2764\ufe0f"||a[4]==="\u2764\ufe0f"?d[20]="\u2764":d[20]=a[4],c.storedProcedure(b("LSUpsertReaction"),a[0],a[1],a[2],a[3],d[20],c.i64.cast([0,20]),void 0)},function(a){return d[8]=void 0}])},function(a){return void 0?d[9]=!1:d[9]=!0,d[9]?c.resolve(d[10]=void 0):c.sequence([function(a){return d[20]=new c.Map(),d[20].set("feature_tags",void 0),d[21]=new c.Map(),d[21].set("logging_metadata",d[20]),d[22]=new c.Map(),d[30]="product_params",d[23]=d[21].get(d[30]),d[23]?d[24]=!1:d[24]=!0,d[24]?0:(d[23]?d[33]=!1:d[33]=!0,d[33]?d[34]=void 0:(d[37]=new c.Map(),d[41]="product_type",d[38]=d[23].get(d[41]),d[38]!==void 0?d[37].set(d[41],d[38]):0,d[42]="product_extras",d[39]=d[23].get(d[42]),d[39]?d[40]=!1:d[40]=!0,d[40]?0:(d[39]?d[43]=!1:d[43]=!0,d[43]?d[44]=void 0:(d[47]=d[39].get("__typename"),d[47]==="XMSGStoryReplyExtras"?(d[49]=new c.Map(),d[52]="logging",d[50]=d[39].get(d[52]),d[50]?d[51]=!1:d[51]=!0,d[51]?0:(d[50]?d[53]=!1:d[53]=!0,d[53]?d[54]=void 0:(d[57]=new c.Map(),d[65]="story_author_fbid",d[58]=d[50].get(d[65]),d[58]!==void 0?d[57].set(d[65],d[58]):0,d[66]="camera_post_type",d[59]=d[50].get(d[66]),d[59]!==void 0?d[57].set(d[66],d[59]):0,d[67]="story_type",d[60]=d[50].get(d[67]),d[60]!==void 0?d[57].set(d[67],d[60]):0,d[68]="post_source",d[61]=d[50].get(d[68]),d[61]!==void 0?d[57].set(d[68],d[61]):0,d[69]="fb_post_type",d[62]=d[50].get(d[69]),d[62]!==void 0?d[57].set(d[69],d[62]):0,d[70]="conversation_starter_type",d[63]=d[50].get(d[70]),d[63]!==void 0?d[57].set(d[70],d[63]):0,d[71]="story_reply_type",d[64]=d[50].get(d[71]),d[64]!==void 0?d[57].set(d[71],d[64]):0,d[54]=d[57]),d[55]=d[54].keys(),d[56]=c.i64.of_int32(d[55].length),c.i64.neq(d[56],c.i64.cast([0,0]))?d[49].set(d[52],d[54]):0),d[48]=d[49]):(d[47]==="XMSGMarketplaceExtras"?(d[50]=new c.Map(),d[69]="listing_id",d[51]=d[39].get(d[69]),d[51]!==void 0?d[50].set(d[69],d[51]):0,d[70]="initial_clicked_component",d[52]=d[39].get(d[70]),d[52]!==void 0?d[50].set(d[70],d[52]):0,d[71]="initial_tracking",d[53]=d[39].get(d[71]),d[53]!==void 0?d[50].set(d[71],d[53]):0,d[72]="referral_surface",d[54]=d[39].get(d[72]),d[54]!==void 0?d[50].set(d[72],d[54]):0,d[73]="referral_story_type",d[55]=d[39].get(d[73]),d[55]!==void 0?d[50].set(d[73],d[55]):0,d[74]="referral_ui_component",d[56]=d[39].get(d[74]),d[56]!==void 0?d[50].set(d[74],d[56]):0,d[75]="surface",d[57]=d[39].get(d[75]),d[57]!==void 0?d[50].set(d[75],d[57]):0,d[76]="tracking",d[58]=d[39].get(d[76]),d[58]!==void 0?d[50].set(d[76],d[58]):0,d[77]="ui_component",d[59]=d[39].get(d[77]),d[59]!==void 0?d[50].set(d[77],d[59]):0,d[78]="ad_id",d[60]=d[39].get(d[78]),d[60]!==void 0?d[50].set(d[78],d[60]):0,d[79]="server_session_id",d[61]=d[39].get(d[79]),d[61]!==void 0?d[50].set(d[79],d[61]):0,d[80]="cf_page_id",d[62]=d[39].get(d[80]),d[62]!==void 0?d[50].set(d[80],d[62]):0,d[81]="live_shopping_video_id",d[63]=d[39].get(d[81]),d[63]!==void 0?d[50].set(d[81],d[63]):0,d[82]="logging_id",d[64]=d[39].get(d[82]),c.i64.neq(d[64],void 0)?d[50].set(d[82],d[64]):0,d[83]="photo_ids",d[65]=d[39].get(d[83]),d[65]?d[66]=!1:d[66]=!0,d[66]?0:d[50].set(d[83],d[65]),d[84]="is_customized_message",d[67]=d[39].get(d[84]),d[67]!==void 0?d[50].set(d[84],d[67]):0,d[85]="referral_code",d[68]=d[39].get(d[85]),d[68]!==void 0?d[50].set(d[85],d[68]):0,d[49]=d[50]):(d[47]==="XMSGClickToMessengerAdExtras"?(d[51]=new c.Map(),d[62]="encrypted_ads_token",d[52]=d[39].get(d[62]),d[52]!==void 0?d[51].set(d[62],d[52]):0,d[63]="product_type",d[53]=d[39].get(d[63]),d[53]!==void 0?d[51].set(d[63],d[53]):0,d[64]="post_id",d[54]=d[39].get(d[64]),d[54]!==void 0?d[51].set(d[64],d[54]):0,d[65]="ad_id",d[55]=d[39].get(d[65]),d[55]!==void 0?d[51].set(d[65],d[55]):0,d[66]="page_id",d[56]=d[39].get(d[66]),d[56]!==void 0?d[51].set(d[66],d[56]):0,d[67]="photo_id",d[57]=d[39].get(d[67]),d[57]!==void 0?d[51].set(d[67],d[57]):0,d[68]="photo_index",d[58]=d[39].get(d[68]),c.i64.neq(d[58],void 0)?d[51].set(d[68],d[58]):0,d[69]="fallback_url",d[59]=d[39].get(d[69]),d[59]!==void 0?d[51].set(d[69],d[59]):0,d[70]="product_id",d[60]=d[39].get(d[70]),d[60]!==void 0?d[51].set(d[70],d[60]):0,d[71]="user_id",d[61]=d[39].get(d[71]),d[61]!==void 0?d[51].set(d[71],d[61]):0,d[50]=d[51]):(d[47]==="XMSGZorroMessageExtras"?(d[52]=new c.Map(),d[54]="is_enabled",d[53]=d[39].get(d[54]),d[53]!==void 0?d[52].set(d[54],d[53]):0,d[51]=d[52]):(d[47]==="XMSGGenAISuggestedPromptExtras"?(d[53]=new c.Map(),d[56]="prompt_type",d[54]=d[39].get(d[56]),d[54]!==void 0?d[53].set(d[56],d[54]):0,d[57]="qpl_join_id",d[55]=d[39].get(d[57]),d[55]!==void 0?d[53].set(d[57],d[55]):0,d[52]=d[53]):(d[47]==="XMSGGenAIMultiModalExtras"?(d[54]=new c.Map(),d[58]="should_skip_genai_eval",d[55]=d[39].get(d[58]),d[55]!==void 0?d[54].set(d[58],d[55]):0,d[59]="associated_multimodal_message_id",d[56]=d[39].get(d[59]),d[56]!==void 0?d[54].set(d[59],d[56]):0,d[60]="qpl_join_id",d[57]=d[39].get(d[60]),d[57]!==void 0?d[54].set(d[60],d[57]):0,d[53]=d[54]):(d[47]==="XMSGGenAIFlashImagineExtras"?(d[55]=new c.Map(),d[58]="seed",d[56]=d[39].get(d[58]),c.i64.neq(d[56],void 0)?d[55].set(d[58],d[56]):0,d[59]="qpl_join_id",d[57]=d[39].get(d[59]),d[57]!==void 0?d[55].set(d[59],d[57]):0,d[54]=d[55]):(d[47]==="XMSGShareSheetExtras"?(d[56]=new c.Map(),d[58]="recipient_selection_session_id",d[57]=d[39].get(d[58]),d[57]!==void 0?d[56].set(d[58],d[57]):0,d[55]=d[56]):(d[47]==="XMSGGenAIAssistantAPIExtras"?(d[57]=new c.Map(),d[91]="referrer_session_id",d[58]=d[39].get(d[91]),d[58]!==void 0?d[57].set(d[91],d[58]):0,d[92]="thread_session_id",d[59]=d[39].get(d[92]),d[59]!==void 0?d[57].set(d[92],d[59]):0,d[93]="prompt_id",d[60]=d[39].get(d[93]),d[60]!==void 0?d[57].set(d[93],d[60]):0,d[94]="prompt_type",d[61]=d[39].get(d[94]),d[61]!==void 0?d[57].set(d[94],d[61]):0,d[95]="prompt_fit_topic",d[62]=d[39].get(d[95]),d[62]!==void 0?d[57].set(d[95],d[62]):0,d[96]="location_extras",d[63]=d[39].get(d[96]),d[63]?d[64]=!1:d[64]=!0,d[64]?0:(d[63]?d[116]=!1:d[116]=!0,d[116]?d[117]=void 0:(d[120]=new c.Map(),d[124]="has_previous_perm_prompt",d[121]=d[63].get(d[124]),d[121]!==void 0?d[120].set(d[124],d[121]):0,d[125]="latitude",d[122]=d[63].get(d[125]),d[122]!==void 0?d[120].set(d[125],d[122]):0,d[126]="longitude",d[123]=d[63].get(d[126]),d[123]!==void 0?d[120].set(d[126],d[123]):0,d[117]=d[120]),d[118]=d[117].keys(),d[119]=c.i64.of_int32(d[118].length),c.i64.neq(d[119],c.i64.cast([0,0]))?d[57].set(d[96],d[117]):0),d[97]="qpl_join_id",d[65]=d[39].get(d[97]),d[65]!==void 0?d[57].set(d[97],d[65]):0,d[98]="meta_ai_prompt_type",d[66]=d[39].get(d[98]),d[66]!==void 0?d[57].set(d[98],d[66]):0,d[99]="is_subsequent_send",d[67]=d[39].get(d[99]),d[67]!==void 0?d[57].set(d[99],d[67]):0,d[100]="context_injection_type",d[68]=d[39].get(d[100]),d[68]!==void 0?d[57].set(d[100],d[68]):0,d[101]="context_injection_timestamp_ms",d[69]=d[39].get(d[101]),d[69]!==void 0?d[57].set(d[101],d[69]):0,d[102]="meta_ai_response_to_persist",d[70]=d[39].get(d[102]),d[70]?d[71]=!1:d[71]=!0,d[71]?0:(d[70]?d[116]=!1:d[116]=!0,d[116]?d[117]=void 0:(d[120]=new c.Map(),d[127]="text",d[121]=d[70].get(d[127]),d[121]!==void 0?d[120].set(d[127],d[121]):0,d[128]="bot_response_id",d[122]=d[70].get(d[128]),d[122]!==void 0?d[120].set(d[128],d[122]):0,d[129]="bot_request_id",d[123]=d[70].get(d[129]),d[123]!==void 0?d[120].set(d[129],d[123]):0,d[130]="external_search_params",d[124]=d[70].get(d[130]),d[124]?d[125]=!1:d[125]=!0,d[125]?0:(d[124]?d[132]=!1:d[132]=!0,d[132]?d[133]=void 0:(d[136]=new c.Map(),d[144]="search_result_uri",d[137]=d[124].get(d[144]),d[137]?d[138]=!1:d[138]=!0,d[138]?0:(d[149]=c.i64.of_int32(d[137].length),c.i64.neq(d[149],c.i64.cast([0,0]))?d[136].set(d[144],d[137]):0),d[145]="search_query",d[139]=d[124].get(d[145]),d[139]!==void 0?d[136].set(d[145],d[139]):0,d[146]="attribution_link",d[140]=d[124].get(d[146]),d[140]!==void 0?d[136].set(d[146],d[140]):0,d[147]="search_engine",d[141]=d[124].get(d[147]),d[141]!==void 0?d[136].set(d[147],d[141]):0,d[148]="references_title",d[142]=d[124].get(d[148]),d[142]?d[143]=!1:d[143]=!0,d[143]?0:(d[149]=c.i64.of_int32(d[142].length),c.i64.neq(d[149],c.i64.cast([0,0]))?d[136].set(d[148],d[142]):0),d[133]=d[136]),d[134]=d[133].keys(),d[135]=c.i64.of_int32(d[134].length),c.i64.neq(d[135],c.i64.cast([0,0]))?d[120].set(d[130],d[133]):0),d[131]="followup_prompt_text",d[126]=d[70].get(d[131]),d[126]!==void 0?d[120].set(d[131],d[126]):0,d[117]=d[120]),d[118]=d[117].keys(),d[119]=c.i64.of_int32(d[118].length),c.i64.neq(d[119],c.i64.cast([0,0]))?d[57].set(d[102],d[117]):0),d[103]="gql_dark_test_qpl_join_id",d[72]=d[39].get(d[103]),d[72]!==void 0?d[57].set(d[103],d[72]):0,d[104]="gql_dark_test_client_start_time",d[73]=d[39].get(d[104]),d[73]!==void 0?d[57].set(d[104],d[73]):0,d[105]="prompt_context",d[74]=d[39].get(d[105]),d[74]?d[75]=!1:d[75]=!0,d[75]?0:(d[74]?d[116]=!1:d[116]=!0,d[116]?d[117]=void 0:(d[120]=new c.Map(),d[123]="context_token",d[121]=d[74].get(d[123]),d[121]!==void 0?d[120].set(d[123],d[121]):0,d[124]="context_token_type",d[122]=d[74].get(d[124]),c.i64.neq(d[122],void 0)?d[120].set(d[124],d[122]):0,d[117]=d[120]),d[118]=d[117].keys(),d[119]=c.i64.of_int32(d[118].length),c.i64.neq(d[119],c.i64.cast([0,0]))?d[57].set(d[105],d[117]):0),d[106]="imagine_flash_extras",d[76]=d[39].get(d[106]),d[76]?d[77]=!1:d[77]=!0,d[77]?0:(d[76]?d[116]=!1:d[116]=!0,d[116]?d[117]=void 0:(d[120]=new c.Map(),d[123]="seed",d[121]=d[76].get(d[123]),c.i64.neq(d[121],void 0)?d[120].set(d[123],d[121]):0,d[124]="qpl_join_id",d[122]=d[76].get(d[124]),d[122]!==void 0?d[120].set(d[124],d[122]):0,d[117]=d[120]),d[118]=d[117].keys(),d[119]=c.i64.of_int32(d[118].length),c.i64.neq(d[119],c.i64.cast([0,0]))?d[57].set(d[106],d[117]):0),d[107]="conversation_marker_id",d[78]=d[39].get(d[107]),d[78]!==void 0?d[57].set(d[107],d[78]):0,d[108]="multi_modal_extras",d[79]=d[39].get(d[108]),d[79]?d[80]=!1:d[80]=!0,d[80]?0:(d[79]?d[116]=!1:d[116]=!0,d[116]?d[117]=void 0:(d[120]=new c.Map(),d[124]="should_skip_genai_eval",d[121]=d[79].get(d[124]),d[121]!==void 0?d[120].set(d[124],d[121]):0,d[125]="associated_multimodal_message_id",d[122]=d[79].get(d[125]),d[122]!==void 0?d[120].set(d[125],d[122]):0,d[126]="qpl_join_id",d[123]=d[79].get(d[126]),d[123]!==void 0?d[120].set(d[126],d[123]):0,d[117]=d[120]),d[118]=d[117].keys(),d[119]=c.i64.of_int32(d[118].length),c.i64.neq(d[119],c.i64.cast([0,0]))?d[57].set(d[108],d[117]):0),d[109]="ads_extras",d[81]=d[39].get(d[109]),d[81]?d[82]=!1:d[82]=!0,d[82]?0:(d[81]?d[116]=!1:d[116]=!0,d[116]?d[117]=void 0:(d[120]=new c.Map(),d[124]="context",d[121]=d[81].get(d[124]),d[121]!==void 0?d[120].set(d[124],d[121]):0,d[125]="is_reply_to_ads_ai",d[122]=d[81].get(d[125]),d[122]!==void 0?d[120].set(d[125],d[122]):0,d[126]="is_message_processed_by_lightspeed",d[123]=d[81].get(d[126]),d[123]!==void 0?d[120].set(d[126],d[123]):0,d[117]=d[120]),d[118]=d[117].keys(),d[119]=c.i64.of_int32(d[118].length),c.i64.neq(d[119],c.i64.cast([0,0]))?d[57].set(d[109],d[117]):0),d[110]="suggested_prompt_extras",d[83]=d[39].get(d[110]),d[83]?d[84]=!1:d[84]=!0,d[84]?0:(d[83]?d[116]=!1:d[116]=!0,d[116]?d[117]=void 0:(d[120]=new c.Map(),d[123]="prompt_type",d[121]=d[83].get(d[123]),d[121]!==void 0?d[120].set(d[123],d[121]):0,d[124]="qpl_join_id",d[122]=d[83].get(d[124]),d[122]!==void 0?d[120].set(d[124],d[122]):0,d[117]=d[120]),d[118]=d[117].keys(),d[119]=c.i64.of_int32(d[118].length),c.i64.neq(d[119],c.i64.cast([0,0]))?d[57].set(d[110],d[117]):0),d[111]="disable_server_mqtt_typing_indicator",d[85]=d[39].get(d[111]),d[85]!==void 0?d[57].set(d[111],d[85]):0,d[112]="enable_web_scraping",d[86]=d[39].get(d[112]),d[86]!==void 0?d[57].set(d[112],d[86]):0,d[113]="client_prompt_timestamp",d[87]=d[39].get(d[113]),c.i64.neq(d[87],void 0)?(c.i64.neq(d[87],void 0)?d[116]=c.i64.to_string(d[87]):d[116]=void 0,d[57].set(d[113],d[116])):0,d[114]="is_client_ready_for_psi",d[88]=d[39].get(d[114]),d[88]!==void 0?d[57].set(d[114],d[88]):0,d[115]="intent_detection_extras",d[89]=d[39].get(d[115]),d[89]?d[90]=!1:d[90]=!0,d[90]?0:(d[89]?d[116]=!1:d[116]=!0,d[116]?d[117]=void 0:(d[120]=new c.Map(),d[127]="intent_messages",d[121]=d[89].get(d[127]),d[121]?d[122]=!1:d[122]=!0,d[122]?0:(d[130]=c.i64.of_int32(d[121].length),c.i64.neq(d[130],c.i64.cast([0,0]))?d[120].set(d[127],d[121]):0),d[128]="intent_message_ids",d[123]=d[89].get(d[128]),d[123]?d[124]=!1:d[124]=!0,d[124]?0:(d[130]=c.i64.of_int32(d[123].length),c.i64.neq(d[130],c.i64.cast([0,0]))?d[120].set(d[128],d[123]):0),d[129]="intent_types",d[125]=d[89].get(d[129]),d[125]?d[126]=!1:d[126]=!0,d[126]?0:(d[130]=c.i64.of_int32(d[125].length),c.i64.neq(d[130],c.i64.cast([0,0]))?d[120].set(d[129],d[125]):0),d[117]=d[120]),d[118]=d[117].keys(),d[119]=c.i64.of_int32(d[118].length),c.i64.neq(d[119],c.i64.cast([0,0]))?d[57].set(d[115],d[117]):0),d[56]=d[57]):(d[47]==="XMSGProductHighlightExtras"?(d[58]=new c.Map(),d[61]="product_highlight_type",d[59]=d[39].get(d[61]),d[59]!==void 0?d[58].set(d[61],d[59]):0,d[62]="conversation_marker",d[60]=d[39].get(d[62]),d[60]!==void 0?d[58].set(d[62],d[60]):0,d[57]=d[58]):(d[47]==="XMSGMagicMessengerExtras"?(d[59]=new c.Map(),d[61]="is_magic_thread",d[60]=d[39].get(d[61]),d[60]!==void 0?d[59].set(d[61],d[60]):0,d[58]=d[59]):(d[47]==="XMSGAdsAIExtras"?(d[60]=new c.Map(),d[64]="context",d[61]=d[39].get(d[64]),d[61]!==void 0?d[60].set(d[64],d[61]):0,d[65]="is_reply_to_ads_ai",d[62]=d[39].get(d[65]),d[62]!==void 0?d[60].set(d[65],d[62]):0,d[66]="is_message_processed_by_lightspeed",d[63]=d[39].get(d[66]),d[63]!==void 0?d[60].set(d[66],d[63]):0,d[59]=d[60]):(d[47]==="XMSGBizappExtras"?(d[61]=new c.Map(),d[64]="message_source",d[62]=d[39].get(d[64]),d[62]!==void 0?d[61].set(d[64],d[62]):0,d[65]="message_trigger",d[63]=d[39].get(d[65]),d[63]!==void 0?d[61].set(d[65],d[63]):0,d[60]=d[61]):d[60]=d[39],d[59]=d[60]),d[58]=d[59]),d[57]=d[58]),d[56]=d[57]),d[55]=d[56]),d[54]=d[55]),d[53]=d[54]),d[52]=d[53]),d[51]=d[52]),d[50]=d[51]),d[49]=d[50]),d[48]=d[49]),d[48].set("__typename",d[47]),d[44]=d[48]),d[45]=d[44].keys(),d[46]=c.i64.of_int32(d[45].length),c.i64.neq(d[46],c.i64.cast([0,0]))?d[37].set(d[42],d[44]):0),d[34]=d[37]),d[35]=d[34].keys(),d[36]=c.i64.of_int32(d[35].length),c.i64.neq(d[36],c.i64.cast([0,0]))?d[22].set(d[30],d[34]):0),d[31]="logging_metadata",d[25]=d[21].get(d[31]),d[25]?d[26]=!1:d[26]=!0,d[26]?c.resolve():c.sequence([function(a){return d[25]?d[33]=!1:d[33]=!0,d[33]?c.resolve(d[34]=void 0):c.sequence([function(a){return d[37]=new c.Map(),d[42]="feature_tags",d[38]=d[25].get(d[42]),d[38]?d[39]=!1:d[39]=!0,d[39]?0:(d[44]=c.i64.of_int32(d[38].length),c.i64.neq(d[44],c.i64.cast([0,0]))?d[37].set(d[42],d[38]):0),d[43]="content_model",d[40]=d[25].get(d[43]),d[40]?d[41]=!1:d[41]=!0,d[41]?c.resolve():c.sequence([function(a){return d[40]?d[44]=!1:d[44]=!0,d[44]?c.resolve(d[45]=void 0):c.sequence([function(a){return d[48]=new c.Map(),d[59]="hashed_content",d[49]=d[40].get(d[59]),d[49]!==void 0?d[48].set(d[59],d[49]):0,d[60]="hashed_product_extras",d[50]=d[40].get(d[60]),d[50]!==void 0?d[48].set(d[60],d[50]):0,d[61]="client_metadata",d[51]=d[40].get(d[61]),d[51]?d[52]=!1:d[52]=!0,d[52]?0:(d[51]?d[65]=!1:d[65]=!0,d[65]?d[66]=void 0:(d[69]=d[51].get("__typename"),d[69]==="XMSGStoriesClientMetadata"?(d[71]=new c.Map(),d[73]="story_reply_type",d[72]=d[51].get(d[73]),d[72]!==void 0?d[71].set(d[73],d[72]):0,d[70]=d[71]):d[70]=d[51],d[70].set("__typename",d[69]),d[66]=d[70]),d[67]=d[66].keys(),d[68]=c.i64.of_int32(d[67].length),c.i64.neq(d[68],c.i64.cast([0,0]))?d[48].set(d[61],d[66]):0),d[62]="client_extras",d[53]=d[40].get(d[62]),d[53]?d[54]=!1:d[54]=!0,d[54]?0:(d[53]?d[65]=!1:d[65]=!0,d[65]?d[66]=void 0:(d[69]=d[53].get("__typename"),d[69]==="XMSGMarketplaceClientExtras"?(d[71]=new c.Map(),d[79]="initial_clicked_component",d[72]=d[53].get(d[79]),d[72]!==void 0?d[71].set(d[79],d[72]):0,d[80]="initial_tracking",d[73]=d[53].get(d[80]),d[73]!==void 0?d[71].set(d[80],d[73]):0,d[81]="referral_surface",d[74]=d[53].get(d[81]),d[74]!==void 0?d[71].set(d[81],d[74]):0,d[82]="referral_story_type",d[75]=d[53].get(d[82]),d[75]!==void 0?d[71].set(d[82],d[75]):0,d[83]="referral_ui_component",d[76]=d[53].get(d[83]),d[76]!==void 0?d[71].set(d[83],d[76]):0,d[84]="surface",d[77]=d[53].get(d[84]),d[77]!==void 0?d[71].set(d[84],d[77]):0,d[85]="ui_component",d[78]=d[53].get(d[85]),d[78]!==void 0?d[71].set(d[85],d[78]):0,d[70]=d[71]):d[70]=d[53],d[70].set("__typename",d[69]),d[66]=d[70]),d[67]=d[66].keys(),d[68]=c.i64.of_int32(d[67].length),c.i64.neq(d[68],c.i64.cast([0,0]))?d[48].set(d[62],d[66]):0),d[63]="containing_post",d[55]=d[40].get(d[63]),d[55]?d[56]=!1:d[56]=!0,d[56]?c.resolve():c.sequence([function(a){return d[55]?d[65]=!1:d[65]=!0,d[65]?c.resolve(d[66]=void 0):c.sequence([function(a){return d[69]=new c.Map(),d[77]="key_type",d[70]=d[55].get(d[77]),d[70]!==void 0?d[69].set(d[77],d[70]):0,d[78]="fb_post_type",d[71]=d[55].get(d[78]),d[71]?d[72]=!1:d[72]=!0,d[72]?0:(d[81]=c.i64.of_int32(d[71].length),c.i64.neq(d[81],c.i64.cast([0,0]))?d[69].set(d[78],d[71]):0),d[79]="photos",d[73]=d[55].get(d[79]),d[73]?d[74]=!1:d[74]=!0,d[74]?c.resolve():c.sequence([function(a){return d[73]?d[81]=!1:d[81]=!0,d[81]?c.resolve(d[82]=void 0):c.sequence([function(a){return d[84]=c.createArray(),d[85]=c.i64.of_int32(d[73].length),c.i64.gt(d[85],c.i64.cast([0,0]))?c.loopAsync(d[85],function(a){return d[86]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[73],d[86]).then(function(a){return a=a,d[87]=a[0],d[88]=a[1],a})},function(a){return d[89]=new c.Map(),d[91]="key_type",d[90]=d[87].get(d[91]),d[90]!==void 0?d[89].set(d[91],d[90]):0,d[92]=(d[84].push(d[89]),d[84])}])}):c.resolve()},function(a){return d[82]=d[84]}])},function(a){return d[83]=c.i64.of_int32(d[82].length),c.i64.neq(d[83],c.i64.cast([0,0]))?d[69].set(d[79],d[82]):0}])},function(a){return d[80]="videos",d[75]=d[55].get(d[80]),d[75]?d[76]=!1:d[76]=!0,d[76]?c.resolve():c.sequence([function(a){return d[75]?d[81]=!1:d[81]=!0,d[81]?c.resolve(d[82]=void 0):c.sequence([function(a){return d[84]=c.createArray(),d[85]=c.i64.of_int32(d[75].length),c.i64.gt(d[85],c.i64.cast([0,0]))?c.loopAsync(d[85],function(a){return d[86]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[75],d[86]).then(function(a){return a=a,d[87]=a[0],d[88]=a[1],a})},function(a){return d[89]=new c.Map(),d[91]="key_type",d[90]=d[87].get(d[91]),d[90]!==void 0?d[89].set(d[91],d[90]):0,d[92]=(d[84].push(d[89]),d[84])}])}):c.resolve()},function(a){return d[82]=d[84]}])},function(a){return d[83]=c.i64.of_int32(d[82].length),c.i64.neq(d[83],c.i64.cast([0,0]))?d[69].set(d[80],d[82]):0}])},function(a){return d[66]=d[69]}])},function(a){return d[67]=d[66].keys(),d[68]=c.i64.of_int32(d[67].length),c.i64.neq(d[68],c.i64.cast([0,0]))?d[48].set(d[63],d[66]):0}])},function(a){return d[64]="metadata",d[57]=d[40].get(d[64]),d[57]?d[58]=!1:d[58]=!0,d[58]?0:(d[57]?d[65]=!1:d[65]=!0,d[65]?d[66]=void 0:(d[69]=d[57].get("__typename"),d[69]==="XMSGGroupsContentLoggingMetadata"?(d[71]=new c.Map(),d[73]="num_members",d[72]=d[57].get(d[73]),c.i64.neq(d[72],void 0)?d[71].set(d[73],d[72]):0,d[70]=d[71]):(d[69]==="XMSGStoriesContentLoggingMetadata"?(d[72]=new c.Map(),d[77]="author",d[73]=d[57].get(d[77]),d[73]?d[74]=!1:d[74]=!0,d[74]?0:(d[73]?d[80]=!1:d[80]=!0,d[80]?d[81]=void 0:(d[84]=new c.Map(),d[87]="profile",d[85]=d[73].get(d[87]),d[85]?d[86]=!1:d[86]=!0,d[86]?0:(d[85]?d[88]=!1:d[88]=!0,d[88]?d[89]=void 0:(d[92]=new c.Map(),d[94]="id",d[93]=d[85].get(d[94]),d[93]!==void 0?d[92].set(d[94],d[93]):0,d[89]=d[92]),d[90]=d[89].keys(),d[91]=c.i64.of_int32(d[90].length),c.i64.neq(d[91],c.i64.cast([0,0]))?d[84].set(d[87],d[89]):0),d[81]=d[84]),d[82]=d[81].keys(),d[83]=c.i64.of_int32(d[82].length),c.i64.neq(d[83],c.i64.cast([0,0]))?d[72].set(d[77],d[81]):0),d[78]="post_source",d[75]=d[57].get(d[78]),d[75]!==void 0?d[72].set(d[78],d[75]):0,d[79]="story_type",d[76]=d[57].get(d[79]),d[76]!==void 0?d[72].set(d[79],d[76]):0,d[71]=d[72]):d[71]=d[57],d[70]=d[71]),d[70].set("__typename",d[69]),d[66]=d[70]),d[67]=d[66].keys(),d[68]=c.i64.of_int32(d[67].length),c.i64.neq(d[68],c.i64.cast([0,0]))?d[48].set(d[64],d[66]):0),d[45]=d[48]}])},function(a){return d[46]=d[45].keys(),d[47]=c.i64.of_int32(d[46].length),c.i64.neq(d[47],c.i64.cast([0,0]))?d[37].set(d[43],d[45]):0}])},function(a){return d[34]=d[37]}])},function(a){return d[35]=d[34].keys(),d[36]=c.i64.of_int32(d[35].length),c.i64.neq(d[36],c.i64.cast([0,0]))?d[22].set(d[31],d[34]):0}])},function(a){return d[32]="send_instance_metadata",d[27]=d[21].get(d[32]),d[27]?d[28]=!1:d[28]=!0,d[28]?0:(d[27]?d[33]=!1:d[33]=!0,d[33]?d[34]=void 0:(d[37]=new c.Map(),d[40]="send_instance_id",d[38]=d[27].get(d[40]),d[38]!==void 0?d[37].set(d[40],d[38]):0,d[41]="send_instance_group_size",d[39]=d[27].get(d[41]),c.i64.neq(d[39],void 0)?d[37].set(d[41],d[39]):0,d[34]=d[37]),d[35]=d[34].keys(),d[36]=c.i64.of_int32(d[35].length),c.i64.neq(d[36],c.i64.cast([0,0]))?d[22].set(d[32],d[34]):0),d[29]=c.toJSON(d[22]),d[10]=d[29]}])},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[11]=c.i64.cast([0,1]):(b=a.item,d[21]=b.syncGroup,c.i64.neq(d[21],void 0)?d[20]=d[21]:d[20]=c.i64.cast([0,1]),d[11]=d[20])})},function(e){return d[13]=new c.Map(),d[13].set("thread_key",a[0]),d[13].set("timestamp_ms",a[1]),d[13].set("message_id",a[2]),d[13].set("actor_id",a[3]),d[13].set("reaction",a[4]),d[13].set("reaction_style",void 0),d[13].set("sync_group",d[11]),d[13].set("send_attribution",a[5]),d[13].set("dataclass_params",d[10]),d[13].set("attachment_fbid",void 0),d[14]=c.createArray(),d[15]=(d[14].push("reaction"),d[14]),d[16]=d[13].get("message_id"),d[17]=(d[14].push(d[16]),d[14]),d[18]=c.toJSON(d[14]),d[19]=c.toJSON(d[13]),c.storedProcedure(b("LSIssueNewTask"),d[18],c.i64.cast([0,29]),d[19],void 0,void 0,a[6]==null?c.i64.cast([0,0]):a[6],c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticUpsertReactionStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSOptimisticUpsertReactionStoredProcedure",["LSOptimisticUpsertReaction","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSOptimisticUpsertReaction"),e.threadKey,e.timestampMs,e.messageId,e.actorId,e.reaction,e.sendAttribution,e.pluginType);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSOptimisticUpsertReactionV2",["LSCancelTaskByQueueName","LSDeleteReaction","LSIssueNewTaskWithExtraOperations","LSUpdateOrInsertReactionV2","LSUpsertReaction"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return c.i64.eq(a[8],c.i64.cast([0,2]))?c.sequence([function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[16]=c.i64.cast([0,1]):(b=a.item,d[25]=b.syncGroup,c.i64.neq(d[25],void 0)?d[24]=d[25]:d[24]=c.i64.cast([0,1]),d[16]=d[24])})},function(e){return d[18]=new c.Map(),d[18].set("thread_id",a[1]),d[18].set("message_id",a[2]),d[18].set("message_timestamp",a[3]),d[18].set("actor_id",a[0]),d[18].set("reaction_fbid",a[4]),d[18].set("reaction_style",a[7]),d[18].set("operation",a[8]),d[18].set("viewer_is_reactor",a[6]),d[18].set("current_count",a[5]),d[18].set("reaction_literal",a[9]),d[18].set("sync_group",d[16]),d[19]=c.createArray(),d[20]=(d[19].push("reaction_v2"),d[19]),d[21]=d[18].get("message_id"),d[22]=(d[19].push(d[21]),d[19]),d[23]=c.toJSON(d[19]),c.storedProcedure(b("LSCancelTaskByQueueName"),d[23],c.i64.cast([0,604]))}]):c.resolve()},function(e){return[c.i64.cast([0,2]),c.i64.cast([0,3])].some(function(b){return c.i64.eq(a[8],b)})?d[0]=c.i64.add(a[5],c.i64.cast([-1,4294967295])):d[0]=c.i64.add(a[5],c.i64.cast([0,1])),[c.i64.cast([0,2]),c.i64.cast([0,3])].some(function(b){return c.i64.eq(a[8],b)})?d[1]=!1:d[1]=!0,d[2]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSUpdateOrInsertReactionV2"),a[1],a[2],a[4],a[9],d[0],c.i64.cast([0,20]),d[1],c.i64.cast([0,0]),d[2])},function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[3]=void 0:(b=a.item,d[3]=b.threadType)})},function(e){return c.i64.neq(d[3],c.i64.cast([0,23]))?[c.i64.cast([0,2]),c.i64.cast([0,3])].some(function(b){return c.i64.eq(a[8],b)})?c.i64.eq(a[8],c.i64.cast([0,2]))?c.storedProcedure(b("LSDeleteReaction"),a[1],a[2],a[0]):c.sequence([function(b){return c.filter(c.db.table(8).fetch([[[a[1],a[2],a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===a[2]&&c.i64.eq(b.actorId,a[0])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))}).next().then(function(a,b){var c=a.done;a=a.value;return c?d[16]=void 0:(b=a.item,d[16]=b.reaction)})},function(e){return a[9]!==void 0?(a[9]==="\u2764\ufe0f"||a[9]==="\u2764\ufe0f"?d[18]="\u2764":d[18]=a[9],d[18]===d[16]?c.storedProcedure(b("LSDeleteReaction"),a[1],a[2],a[0]):c.resolve()):c.resolve()}]):a[9]!==void 0?(a[9]==="\u2764\ufe0f"||a[9]==="\u2764\ufe0f"?d[16]="\u2764":d[16]=a[9],d[17]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSUpsertReaction"),a[1],a[3],a[2],a[0],d[16],c.i64.cast([0,20]),d[17])):c.resolve():c.resolve()},function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[5]=c.i64.cast([0,1]):(b=a.item,d[17]=b.syncGroup,c.i64.neq(d[17],void 0)?d[16]=d[17]:d[16]=c.i64.cast([0,1]),d[5]=d[16])})},function(b){return d[7]=new c.Map(),d[7].set("thread_id",a[1]),d[7].set("message_id",a[2]),d[7].set("message_timestamp",a[3]),d[7].set("actor_id",a[0]),d[7].set("reaction_fbid",a[4]),d[7].set("reaction_style",a[7]),d[7].set("current_count",a[5]),d[7].set("viewer_is_reactor",a[6]),d[7].set("operation",a[8]),d[7].set("reaction_literal",a[9]),d[7].set("entry_point",void 0),d[7].set("sync_group",d[5]),c.db.table(9).fetch([[[a[1]]]]).next().then(function(b,e){var f=b.done;b=b.value;return f?d[8]=!1:(e=b.item,c.sequence([function(b){return c.filter(c.db.table(14).fetch([[[e.threadKey,a[0]]]]),function(b){return c.i64.eq(b.threadKey,e.threadKey)&&c.i64.eq(c.i64.cast([0,0]),e.mailboxType)&&c.i64.eq(b.contactId,a[0])}).next().then(function(b,f){var a=b.done;b=b.value;return a?d[16]=!1:(f=b.item,c.i64.eq(e.threadType,c.i64.cast([0,152]))?(d[19]=f.threadRoles,c.i64.lt(c.i64.cast([0,7]),c.i64.cast([0,0]))||c.i64.gt(c.i64.cast([0,7]),c.i64.cast([0,7]))?d[20]=!1:d[20]=!c.i64.eq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,7]))),d[19]),c.i64.cast([0,0])),d[21]=e.capabilities,d[22]=e.capabilities2,d[23]=e.capabilities3,d[24]=e.capabilities4,d[25]=e.capabilities5,d[27]=c.i64.div(c.i64.cast([0,223]),c.i64.cast([0,64])),d[28]=c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.sub(c.i64.cast([0,223]),c.i64.mul(d[27],c.i64.cast([0,64]))))),c.i64.lt(c.i64.cast([0,223]),c.i64.cast([0,0]))||c.i64.gt(c.i64.cast([0,223]),c.i64.cast([0,281]))?d[26]=!1:(c.i64.eq(d[27],c.i64.cast([0,0]))?d[29]=!c.i64.eq(c.i64.and_(d[28],d[21]),c.i64.cast([0,0])):(c.i64.eq(d[27],c.i64.cast([0,1]))?d[30]=!c.i64.eq(c.i64.and_(d[28],d[22]),c.i64.cast([0,0])):(c.i64.eq(d[27],c.i64.cast([0,2]))?d[31]=!c.i64.eq(c.i64.and_(d[28],d[23]),c.i64.cast([0,0])):(c.i64.eq(d[27],c.i64.cast([0,3]))?d[32]=!c.i64.eq(c.i64.and_(d[28],d[24]),c.i64.cast([0,0])):(c.i64.eq(d[27],c.i64.cast([0,4]))?d[33]=!c.i64.eq(c.i64.and_(d[28],d[25]),c.i64.cast([0,0])):d[33]=!1,d[32]=d[33]),d[31]=d[32]),d[30]=d[31]),d[29]=d[30]),d[26]=d[29]),d[20]===d[26]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting"),c["throw"]("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting")),d[18]=d[20]):d[18]=!1,d[16]=d[18])})},function(a){return d[8]=d[16]}]))})},function(a){return d[8]?d[7].set("perform_action_as_page",!0):0,d[10]=c.createArray(),d[11]=(d[10].push("reaction_v2"),d[10]),d[12]=d[7].get("message_id"),d[13]=(d[10].push(d[12]),d[10]),d[14]=c.toJSON(d[10]),d[15]=c.toJSON(d[7]),c.storedProcedure(b("LSIssueNewTaskWithExtraOperations"),d[14],c.i64.cast([0,604]),d[15],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticUpsertReactionV2StoredProcedure";a.__tables__=["threads","reactions","participants"];e.exports=a}),null);
__d("LSOptimisticUpsertReactionV2StoredProcedure",["LSOptimisticUpsertReactionV2","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSOptimisticUpsertReactionV2"),e.actorId,e.threadId,e.messageId,e.messageTimestamp,e.reactionFbid,e.currentCount,e.viewerIsReactor,e.reactionStyle,e.operation,e.reactionLiteral);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSSubmitGenAIBotFeedback",["LSIssueNewTaskWithExtraOperations"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("bot_feedback_kind",a[0]),d[0].set("bot_response_id",a[2]),d[0].set("feedback_kind_type",a[0]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTaskWithExtraOperations"),"submit_gen_ai_bot_feedback",c.i64.cast([0,756]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0]))},function(b){return c.db.table(315).fetch([[[a[2]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[2]=c.i64.cast([0,0]):(b=a.item,d[2]=b.feedbackSubmissionStatus)})},function(b){return c.i64.eq(d[2],c.i64.cast([0,0]))?c.db.table(315).add({botResponseId:a[2],feedbackSubmissionStatus:c.i64.cast([0,1]),feedbackKindType:a[0]}):c.forEach(c.db.table(315).fetch([[[a[2]]]]),function(b){var d=b.update;b.item;return d({feedbackSubmissionStatus:c.i64.cast([0,1]),feedbackKindType:a[0]})})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxSubmitGenAIBotFeedbackStoredProcedure";a.__tables__=["ai_bot_feedback_submission_status"];e.exports=a}),null);
__d("LSSubmitGenAIBotFeedbackStoredProcedure",["LSSubmitGenAIBotFeedback","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSSubmitGenAIBotFeedback"),e.botFeedbackKind,e.feedbackKindType,e.botResponseId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSThreadAttributionTypeUtil",["I64","LSIntEnum","LSMessagingThreadAttributionType","LSThreadAttributionStore","MWGenAIGatingUtils"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){b=d("LSThreadAttributionStore").getSourceWithoutReset({type:"MWLSEntrypoint",value:b},(h||(h=d("I64"))).to_string(a));return j(b)}function b(a,b){b=d("LSThreadAttributionStore").getSourceAndResetAttribution({type:"MWLSEntrypoint",value:b},(h||(h=d("I64"))).to_string(a));return j(b)}function j(a){if(a.type==="LSThreadAttribution")return a.value;a=a.value;if(a==="inboxPendingRequests")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_PENDING_REQUESTS);else if(a==="fullscreenChat")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_COMMUNITY_MESSAGING_FULLSCREEN_CHAT);else if(a==="sidebarGroupsList")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").SIDEBAR_CONTACTS_GROUPS);else if(a==="jewel")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").JEWEL_THREAD_LIST);else if(a==="shop")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MINI_SHOP_VIEW_MENU_BUTTON);else if(a==="chatheadsOverflow")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").CHATHEADS_OVERFLOW);else if(a==="hovercard"||a==="feedDynamicHoverCard")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_FEED_DYNAMIC_HOVER_CARD);else if(a==="search"||a==="messengerUniversalSearch")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_UNIVERSAL_SEARCH);else if(a==="story"||a==="storyAggregatedUsers"||a==="storySeenByList")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_STORY);else if(a==="timeline"||a==="feedOrganicPost")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_FEED_ORGANIC_POST);else if(a==="pageAboutCard")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_PAGE_ABOUT_CARD);else if(a==="inboxInThread")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_IN_THREAD);else if(a==="notificationInThreadReply")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_NOTIFICATION_IN_THREAD_REPLY);else if(a==="archieve")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_ARCHIVED_THREADS);else if(a==="storyViewerSheetRow")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_STORY_VIEWER_SHEET_ROW);else if(a==="chatheadsNewMessage")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").CHATHEADS_NEW_MESSAGE);else if(a==="event")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_EVENT);else if(a==="jewelSearch")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").JEWEL_SEARCH);else if(a==="inboxSpam"||a==="inboxThreadList"||a==="inboxRestricted")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX);else if(a==="jewelNewMessage")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").JEWEL_NEW_MESSAGE);else if(a==="pendingRequests")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_PENDING_REQUESTS_INBOX_THREAD_LIST);else if(a==="sidebarSearch")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").SIDEBAR_CONTACTS_SEARCH);else if(a==="inboxRemainingThreads")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_REMAINING_THREADS);else if(a==="pagesHeader")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_PAGE_PROFILE_HEADER_MESSAGE_BUTTON);else if(a==="inboxRecentThreads")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_RECENT_THREADS);else if(a==="chatheads")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").CHATHEADS);else if(a==="pageResponsivenessCard")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_PAGE_RESPONSIVENESS_CONTEXT_CARD);else if(a==="inboxSearch")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_MESSAGE_SEARCH);else if(a==="jewelNestedFolder")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").JEWEL_NESTED_FOLDER);else if(a==="marketplace")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MARKETPLACE_SEND_MESSAGE);else if(a==="feedOrganicPostViewAndMessage")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_FEED_ORGANIC_POST_VIEW_AND_MESSAGE);else if(a==="adsCta")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").CLICK_TO_MESSENGER_AD_SEND_MESSAGE_CTA);else if(a==="chatInThread")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_CHAT_IN_THREAD);else if(a==="payments")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").PAYMENTS);else if(a==="inboxFolder")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_NESTED_FOLDER);else if(a==="inboxArchived")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_ARCHIVED_THREADS);else if(a==="inboxActiveContacts")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_ACTIVE_CONTACTS);else if(a==="sidebarContactsList")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").SIDEBAR_CONTACTS_LIST);else if(a==="sidebarCommunityChatsList")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").SIDEBAR_CONTACTS_COMMUNITY_CHATS);else if(a==="igdChatTabsThreadView")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").IGD_WEB_CHAT_TAB_IN_THREAD);else if(a==="inboxTrayActiveNow")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MONTAGE_AND_ACTIVE_NOW_ACTIVE_NOW);else if(a==="communityFriendsDialog")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_COMMUNITY_MESSAGING_COMMUNITY_FRIENDS_DIALOG);else if(a==="pagesHomeFriendsDialog")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_PAGE_PAGES_HOME_FRIENDS_DIALOG);else if(a==="mutualFriendsDialog")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_PROFILE_MUTUAL_FRIENDS_DIALOG);else if(a==="birthday")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_BIRTHDAY_CENTER);else if(a==="groupMembers")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_GROUPS_MEMBER_LIST);else if(a==="fundraiserSupportersList")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FUNDRAISER_SUPPORTERS_LIST);else if(a==="memories")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MEMORIES);else if(a==="feedPoll")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_FEED_FEED_POLL);else if(a==="reactorList")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_FEED_REACTORS_LIST_MESSAGE_BUTTON);else if(a==="friendsList")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FRIENDS_HOME);else if(a==="pagesPrivateReply")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_PAGE_PAGES_PRIVATE_REPLY);else if(a==="inboxNewMessage"&&d("MWGenAIGatingUtils").getIsNewEntryPointAttributionEnabled())return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_OMNIPICKER);else return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").UNKNOWN)}g.getSourceWithoutReset=a;g.getSourceAndResetAttribution=b}),98);
__d("MAWEditMessageContext.react",["emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;e=b.createContext;var j=b.useMemo,k=b.useState;function a(a){a=a.children;var b=k(null),c=b[0],d=b[1];b=j(function(){return{editMessageData:c,setEditMessageData:d}},[c,d]);return i.jsx(l.Provider,{value:b,children:a})}a.displayName=a.name+" [from "+f.id+"]";var l=e({editMessageData:null,setEditMessageData:c("emptyFunction")});g.MAWEditMessageContext=a;g.Context=l}),98);
__d("MWChatFilePreProcessingErrorToast.react",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a={body:h._(/*BTDS*/"El archivo que has seleccionado no tiene un formato v\u00e1lido."),title:h._(/*BTDS*/"_j[\"Formato de archivo no v\\u00e1lido\",\"f90fb65f92ad8ac33f140b8be3c9eed1\",1]")};g.invalidFileFormat=a}),226);
__d("MWChatFileUploadErrorDialog.react",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(a){return{body:h._(/*BTDS*/"El archivo que has seleccionado es demasiado grande. El tama\u00f1o m\u00e1ximo es {size}\u00a0MB.",[h._param("size",a)]),title:h._(/*BTDS*/"Error al subir los archivos")}};b=function(a){return{body:h._(/*BTDS*/"Solo puedes adjuntar {limit} archivos como m\u00e1ximo en un mensaje.",[h._param("limit",a)]),title:h._(/*BTDS*/"No se pueden adjuntar archivos")}};c=function(a){return{body:h._(/*BTDS*/"Solo puedes adjuntar {limit} archivos multimedia como m\u00e1ximo en un mensaje.",[h._param("limit",a)]),title:h._(/*BTDS*/"No se puede adjuntar el archivo multimedia")}};d=function(){return{body:h._(/*BTDS*/"No se admiten uno o m\u00e1s archivos seleccionados."),title:h._(/*BTDS*/"Archivo no admitido")}};g.maxFileSizeExceeded=a;g.maxFilesNumberExceeded=b;g.maxMediaNumberExceeded=c;g.unsupportedFile=d}),226);
__d("MWMediaComposerRenderQpl",["LSGetAttachmentType","MAWLoggerUtils","MWMediaRenderQplUtils","QPLUserFlow","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=i.useEffect,k=i.useMemo,l=i.useRef;function a(a,b,e){var f;a=d("MAWLoggerUtils").getInstanceKeyFromId(a);b=d("LSGetAttachmentType").LSGetAttachmentTypeSyncButLessAccurate(b);c("QPLUserFlow").start((f=d("MWMediaRenderQplUtils")).MSGR_WEB_MEDIA_RENDER_EVENT,{annotations:{string:{attachment_type:f.getAttachmentTypeStringFromEnum(b),content_type:f.deriveMessageContentTypeStringFromAttachmentTypeLessAccurate(b),entry_point:"composer_view",thread_type:f.getThreadTypeString(e)}},cancelOnUnload:!0,instanceKey:a,timeoutInMs:f.QPL_TIMEOUT})}function b(a,b){a=d("MAWLoggerUtils").getInstanceKeyFromId(a);c("QPLUserFlow").endCancel(d("MWMediaRenderQplUtils").MSGR_WEB_MEDIA_RENDER_EVENT,{annotations:{string:{cancel_reason:b}},instanceKey:a})}function e(a,b){a=d("MAWLoggerUtils").getInstanceKeyFromId(a);c("QPLUserFlow").addPoint(d("MWMediaRenderQplUtils").MSGR_WEB_MEDIA_RENDER_EVENT,b,{instanceKey:a})}function f(a){var b=d("MAWLoggerUtils").getInstanceKeyFromId(a.offlineAttachmentId),e=l(!1);c("QPLUserFlow").addAnnotations(d("MWMediaRenderQplUtils").MSGR_WEB_MEDIA_RENDER_EVENT,{string:{attachment_type:d("MWMediaRenderQplUtils").getAttachmentTypeStringFromEnum(a.attachmentType),content_type:d("MWMediaRenderQplUtils").deriveMessageContentTypeStringFromAttachmentTypeLessAccurate(a.attachmentType)}},{instanceKey:b});var f=k(function(){return babelHelpers["extends"]({},d("MWMediaRenderQplUtils").createQplFlowCommon(d("MWMediaRenderQplUtils").MSGR_WEB_MEDIA_RENDER_EVENT,b,e))},[]);j(function(){return function(){e.current===!1&&(f==null?void 0:f.getInstanceKey())!=null&&(f==null?void 0:f.endCancel(706))}},[f]);return f}g.startMediaComposerRenderQpl=a;g.endCancelMediaComposerRenderQpl=b;g.addPointMediaComposerRenderQpl=e;g.useMediaComposerRenderQpl=f}),98);
__d("MWSharedMediaManagerUtils",["I64","LSGetAttachmentType","LSIntEnum","LSMailboxType","MWPreloadableQueries","Promise","ReQLSuspense","asyncToGeneratorRuntime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function l(a){return new(k||(k=b("Promise")))(function(b){var c=new Image();c.onload=function(){return b({previewHeight:c.height,previewWidth:c.width})};c.onerror=function(){return b()};c.src=a})}function m(a){return new(k||(k=b("Promise")))(function(b){var c=document.createElement("video");c.onloadedmetadata=function(){return b({previewHeight:c.videoHeight,previewWidth:c.videoWidth})};c.onerror=function(){return b()};c.src=a})}function n(a,b){if(b==null||a==null)return;var c=Math.floor(a.previewHeight*b.previewWidth/a.previewWidth);return c>=b.previewHeight?{previewHeight:(i||(i=d("I64"))).of_float(c),previewWidth:i.of_float(b.previewWidth)}:{previewHeight:(i||(i=d("I64"))).of_float(b.previewHeight),previewWidth:i.of_float(a.previewWidth*b.previewHeight/a.previewHeight)}}function a(a,b,c){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,d){var e=(yield q(c,d));yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=(yield s(a,e));yield (k||(k=b("Promise"))).all(c.map(function(b){return a.media_staging.add(b)}))});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":102")});return o.apply(this,arguments)}function e(a,b,c){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,d){var e=(yield q(c,d));yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=(yield s(a,e));yield (k||(k=b("Promise"))).all(c.map(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){(yield a.media_staging.get(c.offlineAttachmentId))!=null&&(yield a.media_staging.upsert([c.offlineAttachmentId],c));return(k||(k=b("Promise"))).resolve()});return function(a){return c.apply(this,arguments)}}()))});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":126")});return p.apply(this,arguments)}function q(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){a=(yield (k||(k=b("Promise"))).all(a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.file,f=a.offlineAttachmentId,g=a.attachmentType!=null?(j||(j=d("LSIntEnum"))).ofNumber(a.attachmentType):yield d("LSGetAttachmentType").LSGetAttachmentType(b),h=URL.createObjectURL(b),k;a.previewHeight!=null&&a.previewWidth!=null?k={previewHeight:a.previewHeight,previewWidth:a.previewWidth}:b.type.includes("video/")?k=(yield m(h)):k=(yield l(h));g={attachmentType:g,durationMs:void 0,fbid:void 0,filename:b.name,fileSize:(i||(i=d("I64"))).of_int32(b.size),hasError:!1,isHd:a.isHd,isSent:!1,mailboxType:(j||(j=d("LSIntEnum"))).ofNumber(c("LSMailboxType").MESSENGER),mimeType:b.type,offlineAttachmentId:f,offlineThreadingId:void 0,previewUrl:h,progress:0,threadKey:e};return{dimensions:k,mediaStaging:g}});return function(b){return a.apply(this,arguments)}}())));return a});return r.apply(this,arguments)}function s(a,b){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield a.sync_groups.get((i||(i=d("I64"))).of_float(1)));var c;if((a==null?void 0:a.syncParams)!=null){a=JSON.parse(a.syncParams);var e=a.preview_height;a=a.preview_width;c={previewHeight:e,previewWidth:a}}return b.map(function(a){var b=a.dimensions;a=a.mediaStaging;return babelHelpers["extends"]({},a,{},n(b,c))})});return t.apply(this,arguments)}function u(a,b){return a.runInTransaction(function(a){return a.media_staging["delete"](b)},"readwrite",void 0,void 0,f.id+":236")}function v(a){var b=(h||(h=c("useReStore")))();return d("ReQLSuspense").useArray(function(){return d("MWPreloadableQueries").getMediaStagingQuery(b,a.threadKey)},[b,a.threadKey],f.id+":246")}function w(a){if(a.mimeType==="image/gif")return!0;else return a.mimeType==="image/webp"}function x(a){return a.mimeType==="image/gif"}g.insertMediaStaging=a;g.updateMediaStaging=e;g.deleteMediaStaging=u;g.useMediaStaging=v;g.isVideoLikeImage=w;g.isGIFImage=x}),98);
__d("WorkFailedSendMessageFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("6352");b=d("FalcoLoggerInternal").create("work_failed_send_message",a);e=b;g["default"]=e}),98);
__d("useCometAlertDialog",["FDSDialogLoadingState.react","react","requireDeferred","useCometDeferredDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useCallback,k=c("requireDeferred")("FDSAlertDialogImpl.react").__setRef("useCometAlertDialog");function l(){return i.jsx(c("FDSDialogLoadingState.react"),{})}l.displayName=l.name+" [from "+f.id+"]";function a(){var a=c("useCometDeferredDialog")(k,l);return j(function(b,c,d){c===void 0&&(c=function(){}),a(b,c,d)},[a])}g["default"]=a}),98);
__d("useMWXAlertDialog",["react","useCometAlertDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(){var a=c("useCometAlertDialog")();return i(function(b,c,d){a(babelHelpers["extends"]({body:b.body},b),c,d)},[a])}g["default"]=a}),98);
__d("MWMediaManager",["FBLogger","I64","Int64Hooks","LSIntEnum","LSMessagingThreadTypeUtil","MWChatFilePreProcessingErrorToast.react","MWChatFileUploadErrorDialog.react","MWMediaComposerRenderQpl","MWPActor.react","MWPBumpEntityKey","MWSharedMediaManagerUtils","MessagingAttachmentType","OfflineThreadingId","Promise","WorkFailedSendMessageFalcoEvent","cr:8525","emptyFunction","gkx","promiseDone","requireDeferred","useMWXAlertDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=c("requireDeferred")("MWOpenMediaManagerUtils").__setRef("MWMediaManager"),m=function(){if(b("cr:8525")==null){c("FBLogger")("messenger_web_media").warn("Unsupported thread type for media upload");return(k||(k=b("Promise"))).resolve(null)}return b("cr:8525").load()},n=c("gkx")("24138")?75:25;function o(a,c,d){if(c)return m().then(function(c){return(k||(k=b("Promise"))).resolve((c=c==null?void 0:c.preprocessV2(a,d))!=null?c:[])});else return l.load().then(function(b){return b.preprocess(a)})}function p(a,b,c){for(var e=0;e<a.length;e++){var f=a[e],g=c(f,b);if(f.size>g*1024*1024){f=q(f.size);d("MWPBumpEntityKey").bumpEntityKeyWithAppId("media_sends","file_size_exceeded."+(b?"secure":"open"));d("MWPBumpEntityKey").bumpEntityKeyWithAppId("media_sends","file_size_exceeded."+(b?"secure":"open")+"."+f);return g}}return null}function q(a){return a<=30*1024*1024?"30MB":a<=50*1024*1024?"50MB":a<=75*1024*1024?"75MB":a<=100*1024*1024?"100MB":a<=150*1024*1024?"150MB":a<=200*1024*1024?"200MB":a<=250*1024*1024?"250MB":a<=500*1024*1024?"500MB":a<=1024*1024*1024?"1GB":"1GB+"}function a(a){var e=a.chatSupportUserId,f=a.chatSupportUserNonce,g=a.getMaxAttachmentSizeInMB,q=g===void 0?function(){return n}:g,r=a.isChatSupportUser,s=a.maxNumberOfAttachments,t=a.onUploadFailure,u=a.onUploadStart,v=a.onUploadSuccess,w=a.showUploadFailureToast,x=a.thread,y=a.validateFileName,z=(j||(j=c("useReStore")))(),A=c("useMWXAlertDialog")(),B=d("LSMessagingThreadTypeUtil").isArmadilloSecure(x.threadType),C=d("MWSharedMediaManagerUtils").useMediaStaging(x),D=C.length,E=d("MWPActor.react").useActor();g=d("Int64Hooks").useCallbackInt64(function(a,g){var i=p(a,B,q);if(i!=null){A(d("MWChatFileUploadErrorDialog.react").maxFileSizeExceeded(i),c("emptyFunction"));return}if(s!=null&&D+a.length>s){c("gkx")("23249")?(A(d("MWChatFileUploadErrorDialog.react").maxFilesNumberExceeded(s),c("emptyFunction")),c("WorkFailedSendMessageFalcoEvent").log(function(){return{breaking_rule:"",event:"NUMBER_OF_ATTACHMENTS_LIMIT_REACHED"}})):A(d("MWChatFileUploadErrorDialog.react").maxMediaNumberExceeded(s),c("emptyFunction"));return}if(y!=null)for(i=0;i<a.length;i++){var j=a[i];if(!y(j)){A(d("MWChatFileUploadErrorDialog.react").unsupportedFile(),c("emptyFunction"));return}}var n=d("OfflineThreadingId").createForItemsInOrder(a);n.forEach(function(a){var b=a[0];a=a[1];d("MWMediaComposerRenderQpl").startMediaComposerRenderQpl(a,b,x);d("MWMediaComposerRenderQpl").addPointMediaComposerRenderQpl(a,"preprocess_start")});c("promiseDone")(o(n,B,g)["catch"](function(){w(d("MWChatFilePreProcessingErrorToast.react").invalidFileFormat.title,d("MWChatFilePreProcessingErrorToast.react").invalidFileFormat.body);n.forEach(function(a){a[0];a=a[1];d("MWMediaComposerRenderQpl").endCancelMediaComposerRenderQpl(a,"invalid-file-format")});return(k||(k=b("Promise"))).resolve([])}).then(function(a){a.forEach(function(a){d("MWMediaComposerRenderQpl").addPointMediaComposerRenderQpl(a.offlineAttachmentId,"preprocess_success")});c("promiseDone")(d("MWSharedMediaManagerUtils").insertMediaStaging(z,a,x.threadKey));a.forEach(function(a){d("MWMediaComposerRenderQpl").addPointMediaComposerRenderQpl(a.offlineAttachmentId,"media_staging_insert_success")});var b=x.threadKey;return B?m().then(function(c){return c==null?void 0:c.upload(z,b,a)}):l.load().then(function(c){return c.upload(z,b,a,w,u,v,t,r,e,f,(h||(h=d("I64"))).to_string(E))})}))},[E,e,f,z,q,r,B,s,D,t,u,v,A,w,x,y]);a=function(a){c("promiseDone")(d("MWSharedMediaManagerUtils").deleteMediaStaging(z,a).then(function(){if(B&&b("cr:8525")!=null)return b("cr:8525").load().then(function(b){b.MAWMediaManagerAttachmentsV2["delete"](a)})}))};var F=function(){var a=C.map(function(a){return a.offlineAttachmentId});a.forEach(function(a){d("MWSharedMediaManagerUtils").deleteMediaStaging(z,a)["catch"](function(a){c("FBLogger")("messenger_web_media").catching(a).mustfix("Error deletting media staging.")})})},G=d("Int64Hooks").useCallbackInt64(function(a){if(!B)return;c("promiseDone")(m().then(function(e){if(e==null)return;var f=C.map(function(a){var b;if(!(h||(h=d("I64"))).equal(a.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE)))return null;b=(b=e.MAWMediaManagerAttachmentsV2.get(a.offlineAttachmentId))==null?void 0:b.originalFile;if(b==null)return null;b=[b,a.offlineAttachmentId];return b}).filter(Boolean);if(f.length===0)return;c("promiseDone")(o(f,B,a)["catch"](function(){w(d("MWChatFilePreProcessingErrorToast.react").invalidFileFormat.title,d("MWChatFilePreProcessingErrorToast.react").invalidFileFormat.body);f.forEach(function(a){a[0];a=a[1];d("MWMediaComposerRenderQpl").endCancelMediaComposerRenderQpl(a,"invalid-file-format")});return(k||(k=b("Promise"))).resolve([])}).then(function(a){a.forEach(function(a){d("MWMediaComposerRenderQpl").addPointMediaComposerRenderQpl(a.offlineAttachmentId,"preprocess_success")});c("promiseDone")(d("MWSharedMediaManagerUtils").updateMediaStaging(z,a,x.threadKey));a.forEach(function(a){d("MWMediaComposerRenderQpl").addPointMediaComposerRenderQpl(a.offlineAttachmentId,"media_staging_insert_success")});var b=x.threadKey;return e==null?void 0:e.upload(z,b,a)}))}))});return{handleFileRemove:a,handleFileSelect:g,mediaStaging:C,onHdMediaToggled:G,resetAttachments:F}}g.convertIntegerSizeToStringBucket=q;g.useMediaManager=a}),98);
__d("getMessengerPreciseTimestamp",["$InternalEnum","formatDate"],(function(a,b,c,d,e,f,g){"use strict";var h=b("$InternalEnum").Mirrored(["TODAY","WEEK_AGO","CURRENT_YEAR","OTHER_YEAR"]);d=864e5;var i=6*d;function j(a){a=new Date(a);var b=new Date();b=new Date(b.getFullYear(),b.getMonth(),b.getDate());if(b<a)return h.TODAY;if(b.getTime()-i<a.getTime())return h.WEEK_AGO;return b.getFullYear()===a.getFullYear()?h.CURRENT_YEAR:h.OTHER_YEAR}function k(a){a=j(a);switch(a){case h.TODAY:return"g:ia";case h.WEEK_AGO:return"l g:ia";case h.CURRENT_YEAR:return"F jS, g:ia";case h.OTHER_YEAR:return"F j, Y g:i a"}}function a(a,b){return c("formatDate")(new Date(a),k(a),void 0,b)}g["default"]=a}),98);
__d("MWMessageDeliveryStatus",["fbt","I64","LSIntEnum","getFBTSafeGenderFromGenderConst","getMessengerPreciseTimestamp","intlList","intlSummarizeNumber"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;function a(a){if(a.length!==1)return{heads:a,type:"MultipleSeenHeads"};a=a[0];return{head:a,type:"SingleSeenHead"}}function b(a,b){return{delivered:b,heads:a,type:"DeliveredAndRead"}}function e(a){return{count:a,type:"SeenCount"}}function k(a){return a.timestamp>0?h._(/*BTDS*/"_j{\"*\":\"Visto por {full name} a las {seen time}\"}",[h._name("full name",a.name,c("getFBTSafeGenderFromGenderConst")(a.gender)),h._param("seen time",c("getMessengerPreciseTimestamp")(a.timestamp))]):h._(/*BTDS*/"_j{\"*\":\"Visto por {full name}\"}",[h._name("full name",a.name,c("getFBTSafeGenderFromGenderConst")(a.gender))])}function l(a,b){if(a.length===0)return"";if(b)return h._(/*BTDS*/"Visto por todos").toString();b=a.map(function(a){return h._(/*BTDS*/"_j{\"*\":\"{full name}\"}",[h._name("full name",a.name,c("getFBTSafeGenderFromGenderConst")(a.gender))])});a=c("intlList")(b,c("intlList").CONJUNCTIONS.AND,c("intlList").DELIMITERS.COMMA);return h._(/*BTDS*/"Visto por {full name}",[h._param("full name",a)]).toString()}function m(a){a=c("intlSummarizeNumber")(a);return h._(/*BTDS*/"Visto por {seen count}",[h._param("seen count",a)]).toString()}var n={delivered:h._(/*BTDS*/"Entregado"),error:h._(/*BTDS*/"No se ha podido enviar"),loading:h._(/*BTDS*/"Cargando\u2026"),retriableError:h._(/*BTDS*/"Haz clic para volver a intentarlo."),sending:h._(/*BTDS*/"Enviando"),sent:h._(/*BTDS*/"Enviado")};function f(a){switch(a.type){case"Sending":return n.sending;case"Sent":case"Delivered":return n.sent;case"Error":return n.error;case"SingleSeenHead":return k(a.head);case"NoneStatus":case"MultipleSeenHeads":return"";case"DeliveredAndRead":return l(a.heads,a.delivered);case"SeenCount":return m(a.count);case"Loading":return n.loading;case"RetriableError":return n.retriableError;case"ValidationError":return""}}function o(a){switch(a.type){case"Sending":return n.sending;case"Sent":return n.sent;case"Delivered":return n.delivered;case"Error":case"RetriableError":return n.error;case"SingleSeenHead":return k(a.head);case"DeliveredAndRead":return l(a.heads,a.delivered);default:return""}}function p(a){if((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(1)))return{type:"Sending"};else if((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(2))||(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(6)))return{type:"Sent"};else if((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(4))||(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(5)))return{type:"Error"};else return{type:"NoneStatus"}}function q(a,b,c){var e=p(a.sendStatusV2);if((i||(i=d("I64"))).equal(a.sendStatusV2,(j||(j=d("LSIntEnum"))).ofNumber(4))||(i||(i=d("I64"))).equal(a.sendStatusV2,(j||(j=d("LSIntEnum"))).ofNumber(5))||(i||(i=d("I64"))).equal(a.sendStatusV2,(j||(j=d("LSIntEnum"))).ofNumber(1)))return e;else if(!c&&(i||(i=d("I64"))).equal(a.sendStatusV2,(j||(j=d("LSIntEnum"))).ofNumber(2)))return{type:"NoneStatus"};else if((i||(i=d("I64"))).ge(b,a.timestampMs))return{type:"Delivered"};else return e}function r(a){return["SingleSeenHead","Sending","MultipleSeenHeads","Error","RetriableError"].includes(a.type)}g.seenHead=a;g.deliveredAndRead=b;g.seenCount=e;g.getSingleSeenHead=k;g.getSeenCount=m;g.Titles=n;g.getBroadcastStatusTitle=f;g.getStatusTitle=o;g.getFromSendStatus=p;g.getDeliveryStatusForMessageSentByYou=q;g.isAlwaysShownStatus=r}),226);
__d("MWPBaseMessageListRowActions.react",["react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext,k={hidden:{visibility:"xlshs6z",$$css:!0},incoming:{flexDirection:"x1q0g3np",$$css:!0},outgoing:{flexDirection:"x15zctf7",$$css:!0},root:{alignItems:"x6s0dn4",columnGap:"xl5lk40",display:"x78zum5",width:"x1mqs8db",$$css:!0}},l=i.createContext("full");function a(){return i.jsx(d("react-strict-dom").html.div,{role:"none",style:k.root})}a.displayName=a.name+" [from "+f.id+"]";function m(a){var b=a.children;a=a.outgoing;return i.jsx(d("react-strict-dom").html.div,{role:"none",style:[k.root,a?k.outgoing:k.incoming],children:b})}m.displayName=m.name+" [from "+f.id+"]";function b(a){var b=a.children;a=a.showWith;a=a===void 0?"full":a;var c=j(l);c=c==="partial"&&a!=="partial";return i.jsx(d("react-strict-dom").html.div,{"aria-hidden":c,style:c&&k.hidden,children:b})}b.displayName=b.name+" [from "+f.id+"]";function c(a){var b=a.ariaHidden,c=a.children,e=a.onMouseEnter,f=a.onMouseLeave,g=a.outgoing,h=a.visibility;h=h===void 0?"full":h;a=a.xstyle;return i.jsx(l.Provider,{value:h,children:i.jsx(d("react-strict-dom").html.div,{"aria-hidden":b!=null?b:!1,onMouseEnter:e,onMouseLeave:f,style:[n.root,g?n.outgoing:n.incoming,a],children:i.jsx(m,{outgoing:g,children:c})})})}c.displayName=c.name+" [from "+f.id+"]";var n={incoming:{paddingInlineStart:"xaso8d8",$$css:!0},outgoing:{paddingInlineEnd:"x1gabggj",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"x2lah0s",justifyContent:"xl56j7k",position:"x1n2onr6",width:"x1mqs8db",zIndex:"x1n327nk",$$css:!0}};g.MWPBaseMessageListRowActionsEmptyList=a;g.MWPBaseMessageListRowActionsList=m;g.MWPBaseMessageListRowActionsListItem=b;g.MWPBaseMessageListRowActionsContainer=c}),98);
__d("MWPThreadCapabilitiesContext",["I64","Int64Hooks","LSIntEnum","LSMessageThreadUnsendabilityStatus","LSThreadBitOffset","ThreadStatus","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||(h=d("react"));e=h;var l=e.createContext,m=e.useContext,n=l({blurMediaEnabled:!1,canUnsendMessage:!1,communityMessagingChannelDescriptionCustomization:!1,communityMessagingChannelInvite:!1,disableLinks:!1,editMessageEnabled:!1,feedbackAndReportEnabled:!1,hasLSThreadBitOffset:function(a){return!1},isPaused:!1,localDeleteMessageEnabled:!1,messageForwardEnabled:!1,messageUnsendEnabled:!1,modifyPinnedMessageV2Enabled:!1,reactEnabled:!1,reactionsV2WriteEnabled:!1,replyEnabled:!1,reportMessageToAdminEnabled:!1,rtcVideoCallEnabled:!1,rtcVoiceCallEnabled:!1,seenCountV2Enabled:!1,subThreadCreationEnabled:!1});function a(a){var b=a.children,e=a.customCapabilityCheck,f=a.thread,g=f.capabilities,h=f.capabilities2,l=f.capabilities3,m=f.capabilities4,o=f.capabilities5,p=f.threadType,q=d("Int64Hooks").useCallbackInt64(function(a){var b={capabilities:g,capabilities2:h,capabilities3:l,capabilities4:m,capabilities5:o,threadType:p};return d("LSThreadBitOffset").has(a,b)},[g,h,l,m,o,p]);a=d("Int64Hooks").useMemoInt64(function(){return{blurMediaEnabled:q(46),canUnsendMessage:f.cannotUnsendReason!=null?(i||(i=d("I64"))).equal(f.cannotUnsendReason,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageThreadUnsendabilityStatus").CAN_UNSEND)):!0,communityMessagingChannelDescriptionCustomization:q(135),communityMessagingChannelInvite:q(120),disableLinks:q(45),editMessageEnabled:q(194),feedbackAndReportEnabled:q(17),hasLSThreadBitOffset:q!=null?q:e,isPaused:f.threadStatus!=null&&((i||(i=d("I64"))).equal(f.threadStatus,(i||(i=d("I64"))).of_int32(c("ThreadStatus").PAUSED))||(i||(i=d("I64"))).equal(f.threadStatus,(i||(i=d("I64"))).of_int32(c("ThreadStatus").PAUSED_AND_UPGRADED_TO_COMMUNITY))),localDeleteMessageEnabled:q(102),messageForwardEnabled:q(103),messageUnsendEnabled:q(122)&&f.cannotUnsendReason!=null?(i||(i=d("I64"))).equal(f.cannotUnsendReason,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageThreadUnsendabilityStatus").CAN_UNSEND)):!1,modifyPinnedMessageV2Enabled:q(172),reactEnabled:q(18),reactionsV2WriteEnabled:q(169),replyEnabled:q(42),reportMessageToAdminEnabled:q(93),rtcVideoCallEnabled:q(24),rtcVoiceCallEnabled:q(25),seenCountV2Enabled:q(140),subThreadCreationEnabled:q(167)}},[e,q,f.threadStatus,f.cannotUnsendReason]);return k.jsx(n.Provider,{value:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";function b(){return m(n)}g.Provider=a;g.useMWPThreadCapabilitiesContext=b}),98);
__d("MWV2MessageReactionHooks",["EmojiRenderer","I64","MWPActor.react","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){return a.map(function(a,b){b=d("EmojiRenderer").parse(a).map(function(a){return a.emoji});return b.length!==1?"":b[0].join("")}).filter(function(a){return a!==""})}function a(a,b){var e=(i||(i=c("useReStore")))(),g=d("MWPActor.react").useActor(),h=d("ReQLSuspense").useFirst(function(){return b!=null&&a!=null?d("ReQL").fromTableAscending(e.tables.reactions).getKeyRange(b,a,g):d("ReQL").empty()},[g,e,a,b],f.id+":38");if(h!=null)return h}function b(a,b){var e=(i||(i=c("useReStore")))(),g=d("ReQLSuspense").useArray(function(){return b!=null&&a!=null?d("ReQL").fromTableAscending(e.tables.reactions_v2).getKeyRange(b,a).filter(function(a){return a.viewerIsReactor&&(h||(h=d("I64"))).gt(a.count,(h||(h=d("I64"))).zero)}).map(function(a){a=d("ReQLSuspense").first(d("ReQL").fromTableAscending(e.tables.reaction_v2_types).getKeyRange(a.reactionFbid),f.id+":70");return[a==null?void 0:a.reactionLiteral,a==null?void 0:a.reactionLiteralVariant16].filter(Boolean)}):d("ReQL").empty()},[e,b,a],f.id+":60").flat();g=j(g);return g}function e(a,b){var e=(i||(i=c("useReStore")))(),g=d("ReQLSuspense").useFirst(function(){return b!=null&&a!=null?d("ReQL").fromTableAscending(e.tables.reactions_v2).getKeyRange(b,a).filter(function(a){return a.viewerIsReactor}):d("ReQL").empty()},[e,a,b],f.id+":94");return d("ReQLSuspense").useFirst(function(){return g?d("ReQL").fromTableAscending(e.tables.reaction_v2_types).getKeyRange(g.reactionFbid).map(function(a){return a.reactionLiteral}):d("ReQL").empty()},[e,g],f.id+":104")}a={useSelectedReaction:a,useSelectedReactionsV2:b,useSelectedReactionV2:e};g.MWV2MessageReactionHooks=a}),98);
__d("MessageReactionOperation",[],(function(a,b,c,d,e,f){a=Object.freeze({ADD:1,REMOVE:2,REMOVE_MULTI_REACT:3});f["default"]=a}),66);
__d("MessageReactionStyle",[],(function(a,b,c,d,e,f){a=Object.freeze({BASIC_SUPER_REACT_ANIMATION:1});f["default"]=a}),66);
__d("MessagingCommunityType",[],(function(a,b,c,d,e,f){a=Object.freeze({FB_COMMUNITY:0,STANDALONE_COMMUNITY:1});f["default"]=a}),66);
__d("isDeliveryStatusErrorState",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a.type==="Error"||a.type==="RetriableError"}f["default"]=a}),66);
__d("mwCMisStandAloneCommunity",["I64","LSIntEnum","MessagingCommunityType"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){return a==null?!1:(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingCommunityType").STANDALONE_COMMUNITY))}g["default"]=a}),98);
__d("mwpMessageHasAttachment",["I64","LSIntEnum","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){if(!(h||(h=d("I64"))).equal(a.displayedContentTypes,(i||(i=d("LSIntEnum"))).ofNumber(1))&&c("justknobx")._("4768")&&!(h||(h=d("I64"))).equal(a.displayedContentTypes,(i||(i=d("LSIntEnum"))).ofNumber(8192))&&!(h||(h=d("I64"))).equal(a.displayedContentTypes,(h||(h=d("I64"))).add((i||(i=d("LSIntEnum"))).ofNumber(1),(i||(i=d("LSIntEnum"))).ofNumber(8192)))&&!(h||(h=d("I64"))).equal(a.displayedContentTypes,(i||(i=d("LSIntEnum"))).ofNumber(128))&&!(h||(h=d("I64"))).equal(a.displayedContentTypes,(h||(h=d("I64"))).add((i||(i=d("LSIntEnum"))).ofNumber(128),(i||(i=d("LSIntEnum"))).ofNumber(8192))))return!(h||(h=d("I64"))).equal(a.displayedContentTypes,h.add((i||(i=d("LSIntEnum"))).ofNumber(1),i.ofNumber(512)));else return!1}g["default"]=a}),98);
__d("useGenAIFeedbackSubmissionStatus",["I64","LSIntEnum","LSMailboxAIBotFeedbackSubmissionStatus","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a){var b=(j||(j=c("useReStore")))(),e=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableDescending(b.tables.ai_bot_feedback_submission_status).getKeyRange(a!=null?a:"").filter(function(a){return(h||(h=d("I64"))).equal(a.feedbackSubmissionStatus,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMailboxAIBotFeedbackSubmissionStatus").SUBMITTED))}).map(function(a){return a.feedbackSubmissionStatus})},[b,a],f.id+":25");return e}g["default"]=a}),98);
__d("useIGDOptimisticReactMessage",["I64","LSAuthorityLevel","MAWTimeUtils","WATimeUtils","asyncToGeneratorRuntime","err","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).useCallback;function a(){return j(function(a,e,g,h,j){return a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{if(j==null){var b=(yield a.reactions.get(e,g,h));yield a.reactions["delete"](e,g,h);return{removedReaction:b}}else{b={actorId:h,authorityLevel:(i||(i=d("I64"))).of_int32(c("LSAuthorityLevel").OPTIMISTIC),messageId:g,reaction:j!=null?j:"",threadKey:e,timestampMs:d("MAWTimeUtils").toTimestamp(d("WATimeUtils").unixTime()),transportKey:"Instamadillo"};yield a.reactions.upsert([e,g,h],b);return{addedReaction:b}}}catch(a){throw c("err")("Instamadillo: Failed to send or unsend optimistic reaction: "+a+" ")}});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":39")},[])}g["default"]=a}),98);
__d("useIsChatPreviewsEnabled",["MWLSThread","ReQL","ReQLSuspense","isUnjoinedCMThread","mwCMisStandAloneCommunity","qex","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=(h||(h=c("useReStore")))(),e=d("MWLSThread").useThread(a,function(a){return a.parentThreadKey}),g=d("ReQLSuspense").useFirst(function(){return e!=null?d("ReQL").fromTableAscending(b.tables.community_folders).getKeyRange(e):d("ReQL").empty()},[b,e],f.id+":28");return(a=d("MWLSThread").useThread(a,function(a){return i(a,g==null?void 0:g.communityType)}))!=null?a:!1}function i(a,b){if(a.needsAdminApprovalForNewParticipant===!0)return!1;return!d("isUnjoinedCMThread").isUnjoinedCMThread(a.threadType)?!1:c("mwCMisStandAloneCommunity")(b)&&!c("qex")._("1827")}g.useIsChatPreviewsEnabled=a;g.isChatPreviewsEnabled=i}),98);
__d("useIsMultiReactionEnabled",["LSMessagingThreadTypeUtil","LSThreadBitOffset","MWLSThread","ReQL","ReQLSuspense","isUnjoinedCMThread","mwCMIsAnyCMThread","useIsChatPreviewsEnabled","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=(h||(h=c("useReStore")))(),e=d("MWLSThread").useThread(a,function(a){return a.parentThreadKey}),g=d("ReQLSuspense").useFirst(function(){return e!=null?d("ReQL").fromTableAscending(b.tables.community_folders).getKeyRange(e):d("ReQL").empty()},[b,e],f.id+":28");return(a=d("MWLSThread").useThread(a,function(a){if(d("isUnjoinedCMThread").isUnjoinedCMThread(a.threadType))return d("useIsChatPreviewsEnabled").isChatPreviewsEnabled(a,g==null?void 0:g.communityType);if(!d("LSThreadBitOffset").has(156,a))return!1;if(c("mwCMIsAnyCMThread")(a.threadType))return!0;if(d("LSMessagingThreadTypeUtil").isDiscoverableChannel(a.threadType))return!0}))!=null?a:!1}g.useIsMultiReactEnabled=a}),98);
__d("useIsReactionsV2Enabled",["LSMessagingThreadTypeUtil","LSThreadBitOffset","MWCMThreadTypes.react","MWLSThread","ReQL","ReQLSuspense","useIsChatPreviewsEnabled","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=(h||(h=c("useReStore")))(),e=d("MWLSThread").useThread(a,function(a){return a.parentThreadKey}),g=d("ReQLSuspense").useFirst(function(){return e!=null?d("ReQL").fromTableAscending(b.tables.community_folders).getKeyRange(e):d("ReQL").empty()},[b,e],f.id+":34");return(a=d("MWLSThread").useThread(a,function(a){return i(a,g==null?void 0:g.communityType)}))!=null?a:!1}function i(a,b){if(d("LSMessagingThreadTypeUtil").isOpenFnFThread(a)&&!d("MWCMThreadTypes.react").isIGBroadcastChannelThread(a.threadSubtype))return!1;if(d("LSThreadBitOffset").has(139,a))return!0;a=d("useIsChatPreviewsEnabled").isChatPreviewsEnabled(a,b);return a?!0:!1}function b(a,b){var c=d("LSMessagingThreadTypeUtil").isUnjoinedDiscoverablePublicBroadcastChannel(a.threadType)||d("LSMessagingThreadTypeUtil").isSocialChannelUnjoined(a.threadType);a=d("useIsChatPreviewsEnabled").isChatPreviewsEnabled(a,b);return c||a}g.useIsReactionsV2Enabled=a;g.isReactionsV2Enabled=i;g.isReactionsV2ReadOnly=b}),98);
__d("useLSMessagingSource",["IGDWebUtils","MWLSThreadDisplayContext"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),b=d("IGDWebUtils").isOnInstagramWeb();switch(a){case"Inbox":return"inboxInThread";case"FullscreenChat":return"fullscreenChat";case"ChatTab":return b?"igdChatTabsThreadView":"chatInThread";default:return"unknown"}}g["default"]=a}),98);
__d("useMWLSDefaultThreadSourceAndResetAttribution",["LSThreadAttributionTypeUtil","react","useLSMessagingSource"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(){var a=c("useLSMessagingSource")();return i(function(b){return d("LSThreadAttributionTypeUtil").getSourceAndResetAttribution(b,a)},[a])}g["default"]=a}),98);
__d("useMWPSendOrUnsendReaction",["FBLogger","I64","Int64Hooks","LSFactory","LSIntEnum","LSOptimisticUpsertReactionStoredProcedure","LSOptimisticUpsertReactionV2StoredProcedure","MWPActor.react","MessageReactionOperation","MessageReactionStyle","ReQL","asyncToGeneratorRuntime","promiseDone","useIsMultiReactionEnabled","useIsReactionsV2Enabled","useMWLSDefaultThreadSourceAndResetAttribution","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,b,e,g,h,j){c("promiseDone")(a.runInTransaction(function(a){return c("LSOptimisticUpsertReactionV2StoredProcedure")(c("LSFactory")(a),{actorId:b,currentCount:h,messageId:e.messageId,messageTimestamp:e.timestampMs,operation:(i||(i=d("LSIntEnum"))).ofNumber(c("MessageReactionOperation").ADD),reactionFbid:g,reactionLiteral:j,reactionStyle:i.ofNumber(c("MessageReactionStyle").BASIC_SUPER_REACT_ANIMATION),threadId:e.threadKey,viewerIsReactor:!0})},"readwrite",void 0,void 0,f.id+":42"))}function l(a,b,c,d,e,f,g){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,g,h,j,k){yield a.runInTransaction(function(a){return c("LSOptimisticUpsertReactionV2StoredProcedure")(c("LSFactory")(a),{actorId:b,currentCount:g,messageId:e.messageId,messageTimestamp:e.timestampMs,operation:(i||(i=d("LSIntEnum"))).ofNumber(k?c("MessageReactionOperation").REMOVE_MULTI_REACT:c("MessageReactionOperation").REMOVE),reactionFbid:h,reactionLiteral:j,reactionStyle:i.ofNumber(c("MessageReactionStyle").BASIC_SUPER_REACT_ANIMATION),threadId:e.threadKey,viewerIsReactor:!1})},"readwrite",void 0,void 0,f.id+":72")});return m.apply(this,arguments)}function n(a,b,e,f,g){c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.reactions_v2).getKeyRange(e.threadKey,e.messageId,f)).then(function(c){c!=null?k(a,b,e,f,c.count,g):k(a,b,e,f,(j||(j=d("I64"))).zero,g)}))}function a(a){var e=(h||(h=c("useReStore")))(),g=d("MWPActor.react").useActor(),i=c("useMWLSDefaultThreadSourceAndResetAttribution")(),k=d("useIsMultiReactionEnabled").useIsMultiReactEnabled(a.threadKey);return d("Int64Hooks").useCallbackInt64(function(h){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.tables.threads).getKeyRange(a.threadKey)));b=b?d("useIsReactionsV2Enabled").isReactionsV2Enabled(b):!1;if(b){var m=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.tables.reaction_v2_types).filter(function(a){return a.reactionLiteral===h||a.reactionLiteralVariant16===h})));if(m!=null){b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.tables.reactions_v2).getKeyRange(a.threadKey,a.messageId).filter(function(a){return(!k||(j||(j=d("I64"))).equal(a.reactionFbid,m.reactionFbid))&&a.viewerIsReactor})));if(b==null)return n(e,g,a,m.reactionFbid,h);var o=(j||(j=d("I64"))).equal(b.reactionFbid,m.reactionFbid);(!k||o)&&(yield l(e,g,a,b.count,b.reactionFbid,h,k));o||(yield n(e,g,a,m.reactionFbid,h))}else c("FBLogger")("messenger_web").warn("Reactions v2: trying to send reaction that is not in reaction_v2_types table");return}return e.runInTransaction(function(b){return c("LSOptimisticUpsertReactionStoredProcedure")(c("LSFactory")(b),{actorId:g,messageId:a.messageId,reaction:h,sendAttribution:i(a.threadKey),threadKey:a.threadKey,timestampMs:(j||(j=d("I64"))).of_float(Date.now())})},"readwrite",void 0,void 0,f.id+":227")})())},[e,a,k,g,i])}g["default"]=a}),98);
__d("useIGDGlobalReactMessage",["FBLogger","I64","IGDBridgedAPI","Int64Hooks","LSAuthorityLevel","MWPActor.react","ReQL","ReQLSuspense","asyncToGeneratorRuntime","promiseDone","react-compiler-runtime","requireDeferred","useIGDOptimisticReactMessage","useMWPSendOrUnsendReaction","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("MWLogMessageAction").__setRef("useIGDGlobalReactMessage");function a(a,e){var g=d("react-compiler-runtime").c(18),h=(i||(i=c("useReStore")))(),l=d("MWPActor.react").useActor(),m=a.transportKey==="Instamadillo",n=c("useIGDOptimisticReactMessage")(),o;g[0]!==h.tables.e2ee_igMessageAuxiliaryInfo||g[1]!==a.messageId?(o=function(){return d("ReQL").fromTableAscending(h.tables.e2ee_igMessageAuxiliaryInfo).getKeyRange(a.messageId)},g[0]=h.tables.e2ee_igMessageAuxiliaryInfo,g[1]=a.messageId,g[2]=o):o=g[2];var p;g[3]!==h||g[4]!==a.messageId?(p=[h,a.messageId],g[3]=h,g[4]=a.messageId,g[5]=p):p=g[5];o=d("ReQLSuspense").useFirst(o,p,f.id+":50");var q=Boolean(o==null?void 0:o.openEb),r=c("useMWPSendOrUnsendReaction")(a);g[6]!==l||g[7]!==n||g[8]!==h||g[9]!==m||g[10]!==q||g[11]!==a.messageId||g[12]!==a.senderId||g[13]!==a.threadKey||g[14]!==r||g[15]!==e?(p=function(){return function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(d,f){if(m||q){var g=(yield n(h,a.threadKey,a.messageId,l,d)),i=g.removedReaction;g={messageId:a.messageId,reaction:i!=null?i.reaction:d,reactionStatus:i!=null?"deleted":"created",threadKey:a.threadKey};c("promiseDone")(c("IGDBridgedAPI").sendOrRemoveReaction(g)["catch"](function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){yield k(h,a.threadKey,a.messageId,l,i);throw c("FBLogger")("igd_web").catching(b).warn("Instamadillo: Failed to send or unsend reaction: %s.",b)});return function(a){return d.apply(this,arguments)}}()))}else r(d!=null?d:"");j.onReady(function(b){return c("promiseDone")(b.log(h,a.messageId,a.threadKey,e,f,void 0,void 0,void 0,a.senderId,void 0,l))})});return function(a,b){return d.apply(this,arguments)}}()},o=[m,q,n,a.threadKey,a.messageId,a.senderId,h,l,r,e],g[6]=l,g[7]=n,g[8]=h,g[9]=m,g[10]=q,g[11]=a.messageId,g[12]=a.senderId,g[13]=a.threadKey,g[14]=r,g[15]=e,g[16]=p,g[17]=o):(p=g[16],o=g[17]);return d("Int64Hooks").useMemoInt64(p,o)}function k(a,e,g,i,j){return a.runInTransaction(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){if(j!=null)return b.reactions.upsert([j.threadKey,j.messageId,j.actorId],babelHelpers["extends"]({},j));else{var f=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.reactions).getKeyRange(e,g,i).filter(function(a){return(h||(h=d("I64"))).equal(a.authorityLevel,h.of_int32(c("LSAuthorityLevel").OPTIMISTIC))})));if(f!=null)return b.reactions["delete"](f.threadKey,f.messageId,f.actorId)}});return function(a){return f.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":146")}g["default"]=a}),98);
__d("useIGDIsGenAiReelsPlugin",["I64","LSIntEnum","MNLSXMALayoutType","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a){var b=d("react-compiler-runtime").c(10),e=(j||(j=c("useReStore")))(),g;b[0]!==e.tables.attachments||b[1]!==a.messageId||b[2]!==a.threadKey?(g=function(){return d("ReQL").fromTableDescending(e.tables.attachments).getKeyRange(a.threadKey,a.messageId)},b[0]=e.tables.attachments,b[1]=a.messageId,b[2]=a.threadKey,b[3]=g):g=b[3];var k;b[4]!==e||b[5]!==a?(k=[e,a],b[4]=e,b[5]=a,b[6]=k):k=b[6];g=d("ReQLSuspense").useFirst(g,k,f.id+":24");if(a.botResponseId==null||g==null)return!1;b[7]!==g.hasXma||b[8]!==g.xmaLayoutType?(k=g.hasXma&&g.xmaLayoutType!=null&&(h||(h=d("I64"))).equal(g.xmaLayoutType,(i||(i=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").PORTRAIT)),b[7]=g.hasXma,b[8]=g.xmaLayoutType,b[9]=k):k=b[9];return k}g["default"]=a}),98);
__d("useIGDMediaMangerUploadFailedToast",["fbt","IGDSErrorOutlineIcon.react","react","react-compiler-runtime","useIGDSToaster"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));i.useCallback;function a(){var a=d("react-compiler-runtime").c(2),b=c("useIGDSToaster")(),e;a[0]!==b?(e=function(a,d){b.add({icon:j.jsx(c("IGDSErrorOutlineIcon.react"),{alt:h._(/*BTDS*/"Icono de error")}),message:a,messageSecondary:d,target:"bottom-left"},{duration:2750})},a[0]=b,a[1]=e):e=a[1];return e}g["default"]=a}),226);
__d("useIGDMessageAttachment",["ReQL","ReQLSuspense","mwpMessageHasAttachment","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e){var g=d("react-compiler-runtime").c(11),h;g[0]!==b?(h=c("mwpMessageHasAttachment")(b),g[0]=b,g[1]=h):h=g[1];var i=h,j;g[2]!==a.tables.attachments||g[3]!==i||g[4]!==b.messageId||g[5]!==e?(h=function(){return i?d("ReQL").fromTableAscending(a.tables.attachments,["attachmentType","isSharable","stickerType"]).getKeyRange(e,b.messageId):d("ReQL").empty()},j=[i,a.tables.attachments,e,b.messageId],g[2]=a.tables.attachments,g[3]=i,g[4]=b.messageId,g[5]=e,g[6]=h,g[7]=j):(h=g[6],j=g[7]);h=d("ReQLSuspense").useArray(h,j,f.id+":37");j=h[0];h=h.length>1;var k;g[8]!==j||g[9]!==h?(k={attachment:j,hasMultipleAttachments:h},g[8]=j,g[9]=h,g[10]=k):k=g[10];return k}g["default"]=a}),98);
__d("useIGDMessageReply.react",["fbt","IGDThreadListNewMessageLoggingDataContext","MWMediaManager","MWPReplyContext.react","MessengerWebUXLogger","getInstamadilloLoggingExtraData","react","react-compiler-runtime","useIGDMediaMangerUploadFailedToast"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||d("react")).useContext;function a(a,b,e){var f=d("react-compiler-runtime").c(14),g=j(d("MWPReplyContext.react").MWPReplyContext),i=g.setReply;g=c("useIGDMediaMangerUploadFailedToast")();var k;f[0]!==g||f[1]!==b?(k={showUploadFailureToast:g,thread:b},f[0]=g,f[1]=b,f[2]=k):k=f[2];g=d("MWMediaManager").useMediaManager(k);var l=g.resetAttachments,m=c("MessengerWebUXLogger").useInteractionLogger(),n=d("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext();f[3]!==n||f[4]!==m||f[5]!==a||f[6]!==e||f[7]!==l||f[8]!==i||f[9]!==b?(k=function(d){m==null?void 0:m({eventName:"message_reply",extraData:c("getInstamadilloLoggingExtraData")(b),flowInstanceId:n}),i({messageId:a.messageId,offlineThreadingId:a.offlineThreadingId,sendStatusV2:a.sendStatusV2,threadKey:a.threadKey,timestampMs:a.timestampMs},a.threadKey),l(),e==null?void 0:e()},f[3]=n,f[4]=m,f[5]=a,f[6]=e,f[7]=l,f[8]=i,f[9]=b,f[10]=k):k=f[10];g=k;f[11]===Symbol["for"]("react.memo_cache_sentinel")?(k=h._(/*BTDS*/"Responder"),f[11]=k):k=f[11];k=k;f[12]!==g?(k=[g,k],f[12]=g,f[13]=k):k=f[13];return k}g["default"]=a}),226);
__d("useIsGenAiFeedbackEnabled",["I64","LSContactTypeExact","LSIntEnum","MWPContactContext.react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){var e=d("MWPContactContext.react").useMWPContactStableContext();e=e.contact;if(a==null)return!1;return!b?!1:e!=null&&(h||(h=d("I64"))).equal(e.contactTypeExact,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactTypeExact").GENERATIVE_AI_BOT))}g["default"]=a}),98);
__d("useMWV2SubmitFeedbackAction",["LSFactory","LSIntEnum","LSSubmitGenAIBotFeedbackStoredProcedure","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).useCallback;function a(a,b){var e=(h||(h=c("useReStore")))();return k(function(g){c("promiseDone")(e.runInTransaction(function(b){return c("LSSubmitGenAIBotFeedbackStoredProcedure")(c("LSFactory")(b),{botFeedbackKind:(i||(i=d("LSIntEnum"))).ofNumber(g),botResponseId:a||"",feedbackKindType:i.ofNumber(g)})},"readwrite",void 0,void 0,f.id+":30"),b)},[e,a,b])}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("$",["fb-error-lite"],(function(a,b,c,d,e,f,g){function a(a){return h(a,typeof a==="string"?document.getElementById(a):a)}function b(a){return h(a,typeof a==="string"?document.getElementById(a):a)}function h(a,b){if(!b){a=c("fb-error-lite").err('Tried to get element with id of "%s" but it is not present on the page',String(a));a.taalOpcodes=a.taalOpcodes||[];a.taalOpcodes=[c("fb-error-lite").TAALOpcode.PREVIOUS_FILE];throw a}return b}a.fromIDOrElement=b;g["default"]=a}),98);
__d("XAdsCMAccountSettingsPageControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/ads/manager/account/settings/",Object.freeze({tab:"information",highlight_tax_id:!1}),new Set(["highlight_tax_id"]));b=a;g["default"]=b}),98);
__d("XAdsCMControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/ads/manager/{?page}/{?tab}/",Object.freeze({help_tray:!1,no_redirect:!1,pixel_conversion_dialog:!1,show_edit_modal:!1,is_split_test:!1,m2w:!1,ads_manager_read_regions:!1}),void 0);b=a;g["default"]=b}),98);
__d("XAdsPEControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/adsmanager/",Object.freeze({_fb_noscript:!1,breakdown_regrouping:!1,is_reload_from_account_change:!1,is_split_test:!1,launch_quick_creation:!1,show_view_history:!1,show_inbox_re_tos:!1,from_ads_ai:!1,ads_manager_read_regions:!1,ads_manager_write_regions:!1,show_review:!1,duplicate_campaign:!1,duplicate_ad:!1,show_shops_messaging_opt_out_modal:!1,is_mfr_model_shown_by_default:!1,show_inline_verification:!1}),void 0);b=a;g["default"]=b}),98);
__d("AdsManagerConstURIUtils",["AdsManagerReadRegions","XAdsCMAccountSettingsPageControllerRouteBuilder","XAdsCMControllerRouteBuilder","XAdsPEControllerRouteBuilder","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d){d=c("XAdsPEControllerRouteBuilder").buildUri(babelHelpers["extends"]({},d,{nav_entry_point:b!=null?b:void 0,nav_source:a}));return j(d)}function b(a,b,d){d=c("XAdsCMControllerRouteBuilder").buildUri(babelHelpers["extends"]({},d,{nav_entry_point:b!=null?b:void 0,nav_source:a}));return j(d)}function d(a,b,d){d=c("XAdsCMAccountSettingsPageControllerRouteBuilder").buildUri(babelHelpers["extends"]({},d,{nav_entry_point:b!=null?b:void 0,nav_source:a}));return j(d)}function h(a){return window.location.host.includes("adsmanager")&&!c("AdsManagerReadRegions").excluded_endpoints.some(function(b){return a.includes(b)})&&c("gkx")("1221")?!0:!1}function i(a,b){b===void 0&&(b=!0);return window.location.host.includes("adsmanager")&&c("gkx")("13382")&&(c("AdsManagerReadRegions").excluded_endpoints.some(function(b){return a.includes(b)})||!b)?!0:!1}function j(a){h(a.toString())?a.addQueryParam("ads_manager_read_regions","true"):i(a.toString())?a.addQueryParam("ads_manager_write_regions","true"):(a.getQueryParam("ads_manager_read_regions")!==null||a.getQueryParam("ads_manager_write_regions")!==null)&&(a.removeQueryParam("ads_manager_read_regions"),a.removeQueryParam("ads_manager_write_regions"));return a}g.getAdsManagerURI=a;g.getXAdsCMControllerURI=b;g.getXAdsCMAccountSettingsPageURI=d;g.shouldRouteToAMReadRegions=h;g.shouldRouteToAMWriteRegions=i;g.getAMReadOrWriteRegionsURI=j}),98);
__d("ArbiterMixin",["Arbiter","guid"],(function(a,b,c,d,e,f,g){var h="arbiter$"+c("guid")(),i=Object.prototype.hasOwnProperty;a={_getArbiterInstance:function(){return i.call(this,h)?this[h]:this[h]=new(c("Arbiter"))()},inform:function(a,b,c){return this._getArbiterInstance().inform(a,b,c)},subscribe:function(a,b,c){return this._getArbiterInstance().subscribe(a,b,c)},subscribeOnce:function(a,b,c){return this._getArbiterInstance().subscribeOnce(a,b,c)},unsubscribe:function(a){this._getArbiterInstance().unsubscribe(a)},unsubscribeCurrentSubscription:function(){this._getArbiterInstance().unsubscribeCurrentSubscription()},releaseCurrentPersistentEvent:function(){this._getArbiterInstance().releaseCurrentPersistentEvent()},registerCallback:function(a,b){return this._getArbiterInstance().registerCallback(a,b)},query:function(a){return this._getArbiterInstance().query(a)}};b=a;g["default"]=b}),98);
__d("CSS",["$","CSSCore"],(function(a,b,c,d,e,f,g){var h=typeof window!="undefined"?window.CSS:null,i="hidden_elem";h=h&&h.supports.bind(h);function a(a,b){c("$").fromIDOrElement(a).className=b||"";return a}function j(a,b){return a instanceof Document||a instanceof Text?!1:d("CSSCore").hasClass(c("$").fromIDOrElement(a),b)}function b(a,b){return a instanceof Document||a instanceof Text?!1:d("CSSCore").matchesSelector(c("$").fromIDOrElement(a),b)}function k(a,b){return d("CSSCore").addClass(c("$").fromIDOrElement(a),b)}function l(a,b){return d("CSSCore").removeClass(c("$").fromIDOrElement(a),b)}function m(a,b,e){return d("CSSCore").conditionClass(c("$").fromIDOrElement(a),b,!!e)}function n(a,b){return m(a,b,!j(a,b))}function e(a){return!j(a,i)}function f(a){return k(a,i)}function o(a){return l(a,i)}function p(a){return n(a,i)}function q(a,b){return m(a,i,!b)}g.supports=h;g.setClass=a;g.hasClass=j;g.matchesSelector=b;g.addClass=k;g.removeClass=l;g.conditionClass=m;g.toggleClass=n;g.shown=e;g.hide=f;g.show=o;g.toggle=p;g.conditionShow=q}),98);
__d("createObjectFrom",[],(function(a,b,c,d,e,f){function g(a,b){if(b===void 0)return g(a,!0);var c={};if(Array.isArray(b))for(var d=a.length-1;d>=0;d--)c[a[d]]=b[d];else for(d=a.length-1;d>=0;d--)c[a[d]]=b;return c}f["default"]=g}),66);
__d("isElementNode",["isNode"],(function(a,b,c,d,e,f){function a(a){return b("isNode")(a)&&a.nodeType==1}e.exports=a}),null);
__d("DOMQuery",["CSS","FBLogger","containsNode","createArrayFromMixed","createObjectFrom","ge","ifRequired","isElementNode","isNode"],(function(a,b,c,d,e,f,g){var h=/^\.-?[_a-zA-Z]+[\w-]*$/;function i(a,b){return a.hasAttribute?a.hasAttribute(b):a.getAttribute(b)!==null}function a(a,b){a=j(a,b);return a[0]}function b(a,b,c){b=j(a,b);a=j(a,c);b.length===1&&a.length===1&&b[0]===a[0]?c=b:c=b.concat(a);return c[0]}function j(a,b){if(!a||!a.getElementsByTagName)return[];b=b.split(" ");var e=[a];for(var f=0;f<b.length;f++){if(e.length===0)break;if(b[f]==="")continue;var g=b[f],j=b[f],k=[],l=!1;if(g.charAt(0)=="^")if(f===0)l=!0,g=g.slice(1);else return[];g=g.replace(/\[(?:[^=\]]*=(?:\"[^\"]*\"|\'[^\']*\'))?|[.#]/g," $&");g=g.split(" ");var m=g[0]||"*",n=m=="*",o=g[1]&&g[1].charAt(0)=="#";if(o){o=c("ge")(g[1].slice(1),a,m);if(o&&(n||o.tagName.toLowerCase()==m))for(var p=0;p<e.length;p++)if(l&&c("containsNode")(o,e[p])){k=[o];break}else if(document==e[p]||c("containsNode")(e[p],o)&&e[p]!==o){k=[o];break}}else{o=[];p=e.length;var q,r=!l&&j.indexOf("[")<0&&document.querySelectorAll;for(var s=0;s<p;s++){if(l){q=[];var t=e[s].parentNode;while(c("isElementNode")(t))(n||t.tagName.toLowerCase()==m)&&q.push(t),t=t.parentNode}else r?h.test(j)?q=e[s].getElementsByClassName(j.substring(1)):q=e[s].querySelectorAll(j):q=e[s].getElementsByTagName(m);t=q.length;for(var u=0;u<t;u++)o.push(q[u])}if(!r)for(q=1;q<g.length;q++){t=g[q];u=t.charAt(0)==".";n=t.substring(1);for(s=0;s<o.length;s++){p=o[s];if(!p||p.nodeType!==1)continue;if(u){d("CSS").hasClass(p,n)||delete o[s];continue}else{j=t.slice(1,t.length-1);m=j.indexOf("=");if(m<0){if(!i(p,j)){delete o[s];continue}}else{r=j.substr(0,m);j=j.substr(m+1);j=j.slice(1,j.length-1);if(p.getAttribute(r)!=j){delete o[s];continue}}}}}for(s=0;s<o.length;s++)if(o[s]){k.push(o[s]);if(l)break}}e=k}return e}function e(){var a=window.getSelection;if(a)return a()+"";else{a=document.selection;if(a)return a.createRange().text}return null}function f(a,b){(typeof a==="string"||typeof b==="string")&&c("FBLogger")("dom_query").info("Support for node IDs is deprecated. Use containsNode(ge(<id1>), ge(<id2>)) instead");return c("containsNode")(c("ge")(a),c("ge")(b))}function k(){var a=c("ifRequired")("Quickling",function(a){return a.isActive()?c("ge")("content"):null});return a||document.body}function l(a,b){b=c("createArrayFromMixed")(b).join("|").toUpperCase().split("|");b=c("createObjectFrom")(b);return c("isNode")(a)&&a.nodeName in b}function m(a){return l(a,["input","textarea"])||a.contentEditable==="true"}g.find=a;g.findPushSafe=b;g.scry=j;g.getSelection=e;g.contains=f;g.getRootElement=k;g.isNodeOfType=l;g.isInputNode=m}),98);
__d("DOMEvent",["invariant"],(function(a,b,c,d,e,f,g,h){a=function(){function a(a){this.event=a||window.event,typeof this.event.srcElement!=="unknown"||h(0,5798),this.target=this.event.target||this.event.srcElement}var b=a.prototype;b.preventDefault=function(){var a=this.event;a.preventDefault?(a.preventDefault(),"defaultPrevented"in a||(a.defaultPrevented=!0)):a.returnValue=!1;return this};b.isDefaultPrevented=function(){var a=this.event;return"defaultPrevented"in a?a.defaultPrevented:a.returnValue===!1};b.stopPropagation=function(){var a=this.event;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0;return this};b.kill=function(){this.stopPropagation().preventDefault();return this};a.killThenCall=function(b){return function(c){new a(c).kill();return b()}};return a}();g["default"]=a}),98);
__d("dedupString",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b;return Object.keys((b={},b[a]=0,b))[0]}f["default"]=a}),66);
__d("wrapFunction",[],(function(a,b,c,d,e,f){var g={};function a(a,b,c){var d=b in g?g[b](a,c):a;return function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return d.apply(this,b)}}a.setWrapper=function(a,b){g[b]=a};f["default"]=a}),66);
__d("DOMEventListener",["invariant","dedupString","emptyFunction","passiveEventListenerUtil","wrapFunction"],(function(a,b,c,d,e,f,g){var h=b("passiveEventListenerUtil").isPassiveEventListenerSupported,i,j;window.addEventListener?(i=function(a,c,d,e){e===void 0&&(e=!1),d.wrapper=b("wrapFunction")(d,"entry",b("dedupString")("DOMEventListener.add "+c)),a.addEventListener(c,d.wrapper,h?e:!1)},j=function(a,b,c,d){d===void 0&&(d=!1),a.removeEventListener(b,c.wrapper,h?d:!1)}):window.attachEvent?(i=function(a,c,d,e){e===void 0,d.wrapper=b("wrapFunction")(d,"entry","DOMEventListener.add "+c),a.attachEvent||g(0,2798),a.attachEvent("on"+c,d.wrapper)},j=function(a,b,c,d){d===void 0,a.detachEvent||g(0,2799),a.detachEvent("on"+b,c.wrapper)}):j=i=b("emptyFunction");a={add:function(a,b,c,d){d===void 0&&(d=!1);i(a,b,c,d);return{remove:function(){j(a,b,c,d)}}},remove:j};e.exports=a}),null);
__d("EventProfiler",["cr:708886"],(function(a,b,c,d,e,f,g){g["default"]=b("cr:708886")}),98);
__d("Scroll",[],(function(a,b,c,d,e,f){function g(a,b){return!!b&&(a===b.documentElement||a===b.body)}function a(a){var b;if(a==null)return 0;var c=a.ownerDocument;return g(a,c)?(c==null?void 0:(b=c.body)==null?void 0:b.scrollTop)||(c==null?void 0:(b=c.documentElement)==null?void 0:b.scrollTop)||0:a.scrollTop||0}function b(a,b){if(a==null)return;var c=a.ownerDocument;g(a,c)?((c==null?void 0:c.body)&&(c.body.scrollTop=b||0),(c==null?void 0:c.documentElement)&&(c.documentElement.scrollTop=b||0)):a.scrollTop=b||0}function c(a){var b,c=a.ownerDocument;return g(a,c)?(c==null?void 0:(b=c.body)==null?void 0:b.scrollLeft)||(c==null?void 0:(b=c.documentElement)==null?void 0:b.scrollLeft)||0:a.scrollLeft||0}function d(a,b){var c=a.ownerDocument;g(a,c)?((c==null?void 0:c.body)&&(c.body.scrollLeft=b||0),(c==null?void 0:c.documentElement)&&(c.documentElement.scrollLeft=b||0)):a.scrollLeft=b||0}f.getTop=a;f.setTop=b;f.getLeft=c;f.setLeft=d}),66);
__d("FlowMigrationUtilsForLegacyFiles",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";var h="flow_typing_for_legacy_code";function a(a){c("FBLogger")(h).blameToPreviousFile().event(h+".bad_call").mustfix(a);return new Error("["+h+"] "+a)}g.invariantViolation=a}),98);
__d("getDocumentScrollElement",["FlowMigrationUtilsForLegacyFiles"],(function(a,b,c,d,e,f,g){"use strict";var h=typeof navigator!=="undefined"&&navigator.userAgent.indexOf("AppleWebKit")>-1;function a(a){a=a||document;if(a.scrollingElement)return a.scrollingElement;a=!h&&a.compatMode==="CSS1Compat"?a.documentElement:a.body;a||d("FlowMigrationUtilsForLegacyFiles").invariantViolation("null result in getDocumentScrollElement");return a}g["default"]=a}),98);
__d("getObjectValues",[],(function(a,b,c,d,e,f){function a(a){var b=[];for(var c in a)b.push(a[c]);return b}f["default"]=a}),66);
__d("Event",["$","Arbiter","DOMEvent","DOMEventListener","DOMQuery","DataStore","ErrorGuard","EventProfiler","ExecutionEnvironment","FBLogger","Parent","Scroll","TimeSlice","UserAgent","dedupString","fb-error","getDocumentScrollElement","getObjectValues"],(function(a,b,c,d,e,f){var g,h,i=b("fb-error").TAAL,j="Event.listeners";Event.prototype||(Event.prototype={});function k(a){(a.type==="click"||a.type==="mouseover"||a.type==="keydown")&&b("Arbiter").inform("Event/stop",{event:a})}var l=function(){"use strict";function a(a,b,c){this.cancelBubble=!1,this.target=a,this.type=b,this.data=c}var c=a.prototype;c.getData=function(){this.data=this.data||{};return this.data};c.stop=function(){return Event.stop(this)};c.prevent=function(){return Event.prevent(this)};c.isDefaultPrevented=function(){return Event.isDefaultPrevented(this)};c.kill=function(){return Event.kill(this)};c.getTarget=function(){return new(b("DOMEvent"))(this).target||null};return a}();function m(a){if(a instanceof l)return a;a||(!window.addEventListener&&document.createEventObject?a=window.event?document.createEventObject(window.event):{}:a={});if(!a._inherits_from_prototype)for(var b in Event.prototype)try{a[b]=Event.prototype[b]}catch(a){}return a}Object.assign(Event.prototype,{_inherits_from_prototype:!0,getRelatedTarget:function(){var a=this.relatedTarget||(this.fromElement===this.srcElement?this.toElement:this.fromElement);return a&&a.nodeType?a:null},getModifiers:function(){var a={control:!!this.ctrlKey,shift:!!this.shiftKey,alt:!!this.altKey,meta:!!this.metaKey};a.access=b("UserAgent").isPlatform("Mac OS X")?a.control:a.alt;a.any=a.control||a.shift||a.alt||a.meta;return a},isRightClick:function(){return this.which?this.which===3:this.button&&this.button===2},isMiddleClick:function(){return this.which?this.which===2:this.button&&this.button===4},isDefaultRequested:function(){return this.getModifiers().any||this.isMiddleClick()||this.isRightClick()}},l.prototype);c={listen:function(a,c,d,e,f){typeof d==="function"&&(d=b("TimeSlice").guard(d,b("dedupString")("Event.js "+c+" handler")));!f||typeof f==="boolean"?f={passive:!1}:f={passive:f.passive||!1};if(!(g||(g=b("ExecutionEnvironment"))).canUseDOM)return new u(a,d,null,c,e,null,f);typeof a==="string"&&(a=b("$")(a));typeof e==="undefined"&&(e=Event.Priority.NORMAL);if(typeof c==="object"){var h={};for(var k in c)h[k]=Event.listen(a,k,c[k],e,f);return h}if(c.match(/^on/i))throw new TypeError("Bad event name `"+c+"': use `click', not `onclick'.");if(!a){k=i.blameToPreviousFrame(new Error("Cannot listen to an undefined element."));b("FBLogger")("event").catching(k).mustfix("Tried to listen to element of type %s",c);throw k}if(a.nodeName=="LABEL"&&c=="click"){h=a.getElementsByTagName("input");a=h.length==1?h[0]:a}else if(a===window&&c==="scroll"){k=b("getDocumentScrollElement")();k!==document.documentElement&&k!==document.body&&(a=k)}h=b("DataStore").get(a,j,{});k=o[c];k&&(c=k.base,k.wrap&&(d=k.wrap(d)));q(a,h,c,f);k=h[c];e in k||(k[e]=[]);var l=k[e].length;d=new u(a,d,h,c,e,l,f);k[e][l]=d;k.numHandlers++;f.passive||(k.numNonPassiveHandlers++,p(a,h[c],c));return d},stop:function(a){var c=new(b("DOMEvent"))(a).stopPropagation();k(c.event);return a},prevent:function(a){new(b("DOMEvent"))(a).preventDefault();return a},isDefaultPrevented:function(a){return new(b("DOMEvent"))(a).isDefaultPrevented(a)},kill:function(a){a=new(b("DOMEvent"))(a).kill();k(a.event);return!1},getKeyCode:function(a){a=new(b("DOMEvent"))(a).event;if(!a)return!1;switch(a.keyCode){case 63232:return 38;case 63233:return 40;case 63234:return 37;case 63235:return 39;case 63272:case 63273:case 63275:return null;case 63276:return 33;case 63277:return 34}if(a.shiftKey)switch(a.keyCode){case 33:case 34:case 37:case 38:case 39:case 40:return null}return a.keyCode},getPriorities:function(){if(!n){var a=b("getObjectValues")(Event.Priority);a.sort(function(a,b){return a-b});n=a}return n},fire:function(a,b,c){c=new l(a,b,c);var d;do{var e=Event.__getHandler(a,b);e&&(d=e(c));a=a.parentNode}while(a&&d!==!1&&!c.cancelBubble);return d!==!1},__fire:function(a,b,c){a=Event.__getHandler(a,b);if(a)return a(m(c))},__getHandler:function(a,c){var d=b("DataStore").get(a,j);return d&&d[c]?d[c].domHandler:a["on"+c]},getPosition:function(a){a=new(b("DOMEvent"))(a).event;var c=b("getDocumentScrollElement")(),d=a.clientX+b("Scroll").getLeft(c);a=a.clientY+b("Scroll").getTop(c);return{x:d,y:a}}};Object.assign(Event,c);var n=null;d=function(a){return function(c){if(!b("DOMQuery").contains(this,c.getRelatedTarget()))return a.call(this,c)}};var o;!window.navigator.msPointerEnabled?o={mouseenter:{base:"mouseover",wrap:d},mouseleave:{base:"mouseout",wrap:d}}:o={mousedown:{base:"MSPointerDown"},mousemove:{base:"MSPointerMove"},mouseup:{base:"MSPointerUp"},mouseover:{base:"MSPointerOver"},mouseout:{base:"MSPointerOut"},mouseenter:{base:"MSPointerOver",wrap:d},mouseleave:{base:"MSPointerOut",wrap:d}};if(b("UserAgent").isBrowser("Firefox < 52")){f=function(a,b){b=m(b);var c=b.getTarget();while(c)Event.__fire(c,a,b),c=c.parentNode};document.documentElement.addEventListener("focus",f.bind(null,"focusin"),!0);document.documentElement.addEventListener("blur",f.bind(null,"focusout"),!0)}var p=function(a,c,d){var e=c.numNonPassiveHandlers==0;e!=c.options.passive&&(c.domHandlerRemover.remove(),c.options.passive=e,c.domHandlerRemover=b("DOMEventListener").add(a,d,c.domHandler,{passive:e}))},q=function(a,c,d,e){if(d in c)return;var f=b("TimeSlice").guard(t.bind(a,d),b("dedupString")("Event listenHandler "+d));c[d]={numHandlers:0,numNonPassiveHandlers:0,domHandlerRemover:b("DOMEventListener").add(a,d,f,e),domHandler:f,options:e};c="on"+d;if(a[c]){f=a===document.documentElement?Event.Priority._BUBBLE:Event.Priority.TRADITIONAL;var g=a[c];a[c]=null;Event.listen(a,d,g,f,e)}};function r(a){return!a.href.endsWith("#")?!1:a.href===document.location.href||a.href===document.location.href+"#"}function s(a,b){return a.nodeName==="INPUT"&&a.type===b}var t=b("EventProfiler").__wrapEventListenHandler(function(a,c){c=m(c);if(!b("DataStore").get(this,j))throw new Error("Bad listenHandler context.");var d=b("DataStore").get(this,j)[a];if(!d)throw new Error("No registered handlers for `"+a+"'.");if(a=="click"||a=="contextmenu"||a=="mousedown"&&c.which==2){a=c.getTarget();var e=b("Parent").byTag(a,"a");e instanceof HTMLAnchorElement&&e.href&&r(e)&&!s(a,"file")&&!s(a,"submit")&&c.prevent()}e=Event.getPriorities();for(a=0;a<e.length;a++){var f=e[a];if(f in d){f=d[f];for(var g=0;g<f.length;g++){if(!f[g])continue;var h=f[g].fire(this,c);if(h===!1)return c.kill();else c.cancelBubble&&c.stop()}}}return c.returnValue});Event.Priority={URGENT:-20,TRADITIONAL:-10,NORMAL:0,_BUBBLE:1e3};var u=function(){"use strict";function a(a,b,c,d,e,f,g){this.$1=a,this.$2=b,this.$3=c,this.$7=d,this.$6=e,this.$4=f,this.$5=g}var c=a.prototype;c.isRemoved=function(){return!this.$3};c.remove=function(){if((g||(g=b("ExecutionEnvironment"))).canUseDOM){if(this.isRemoved()){b("FBLogger")("Event").warn("Event handler has already been removed");return}var a=this.$3[this.$7];a.numHandlers<=1?(a.domHandlerRemover.remove(),delete this.$3[this.$7]):(delete a[this.$6][this.$4],a.numHandlers--,this.$5.passive||(a.numNonPassiveHandlers--,p(this.$1,this.$3[this.$7],this.$7)));this.$3=null}};c.fire=function(a,c){return(g||(g=b("ExecutionEnvironment"))).canUseDOM?(h||(h=b("ErrorGuard"))).applyWithGuard(this.$2,a,[c],{name:"eventhandler:"+c.type+":"+(typeof a.name=="string"?a.name:a.id)}):!0};return a}();a.$E=Event.$E=m;e.exports=Event}),null);
__d("TrustedTypesLinkTagHTMLPolicy",["TrustedTypes","err"],(function(a,b,c,d,e,f,g){"use strict";a={createHTML:function(a){if(a==="<link />")return a;throw c("err")("Violating Trusted Type policies. Only works for '<link />' strings.")}};b=c("TrustedTypes").createPolicy("link-tag-html",a);d=b;g["default"]=d}),98);
__d("getMarkupWrap",["invariant","ExecutionEnvironment","TrustedTypesLinkTagHTMLPolicy"],(function(a,b,c,d,e,f,g,h){var i,j=(i||c("ExecutionEnvironment")).canUseDOM?document.createElement("div"):null,k={};b=[1,'<select multiple="true">',"</select>"];d=[1,"<table>","</table>"];e=[3,"<table><tbody><tr>","</tr></tbody></table>"];var l=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],m={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:b,option:b,caption:d,colgroup:d,tbody:d,tfoot:d,thead:d,td:e,th:e};f=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];f.forEach(function(a){m[a]=l,k[a]=!0});function a(a){a=a;!j&&h(0,144);Object.prototype.hasOwnProperty.call(m,a)||(a="*");Object.prototype.hasOwnProperty.call(k,a)||(a==="*"?j.innerHTML=c("TrustedTypesLinkTagHTMLPolicy").createHTML("<link />"):j.innerHTML="<"+a+"></"+a+">",k[a]=!j.firstChild);return k[a]?m[a]:null}g["default"]=a}),98);
__d("createNodesFromMarkup",["invariant","ExecutionEnvironment","TrustedTypesNoOpPolicy_DO_NOT_USE","getMarkupWrap"],(function(a,b,c,d,e,f,g,h){var i,j=(i||c("ExecutionEnvironment")).canUseDOM?document.createElement("div"):null,k=/^\s*<(\w+)/;function l(a){a=a.match(k);return a&&a[1].toLowerCase()}function a(a,b){var d=j;!j&&h(0,5001);var e=l(a);e=e&&c("getMarkupWrap")(e);if(e){d.innerHTML=e[1]+a+e[2];e=e[0];while(e--)d=d.lastChild}else d.innerHTML=c("TrustedTypesNoOpPolicy_DO_NOT_USE").createHTML(a);e=d.getElementsByTagName("script");e.length&&(b||h(0,5002),Array.from(e).forEach(b));a=Array.from(d.childNodes);while(d.lastChild)d.removeChild(d.lastChild);return a}g["default"]=a}),98);
__d("evalGlobal",[],(function(a,b,c,d,e,f){function a(a){if(typeof a!=="string")throw new TypeError("JS sent to evalGlobal is not a string. Only strings are permitted.");if(!a)return;var b=document.createElement("script");try{b.appendChild(document.createTextNode(a))}catch(c){b.text=a}a=document.getElementsByTagName("head")[0]||document.documentElement;a.appendChild(b);a.removeChild(b)}f["default"]=a}),66);
__d("HTML",["invariant","Bootloader","FBLogger","createNodesFromMarkup","emptyFunction","evalGlobal"],(function(a,b,c,d,e,f,g){var h=/(<(\w+)[^>]*?)\/>/g,i={abbr:!0,area:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0};a=function(){"use strict";function a(c){c&&typeof c.__html==="string"&&(c=c.__html);if(!(this instanceof a))return c instanceof a?c:new a(c);if(c){var d=typeof c;d==="string"||g(0,277,d)}this._markup=c||"";this._defer=!1;this._nodes=null;this._inlineJS=b("emptyFunction");this._rootNode=null;this._hasInlineJs=!1}var c=a.prototype;c.toString=function(){return this._markup};c.getContent=function(){return this._markup};c.getNodes=function(){this._fillCache();return this._nodes};c.getRootNode=function(){this._rootNode&&g(0,278);var a=this.getNodes();if(a.length===1)this._rootNode=a[0];else{var b=document.createDocumentFragment();for(var c=0;c<a.length;c++)b.appendChild(a[c]);this._rootNode=b}return this._rootNode};c.getAction=function(){var a=this;this._fillCache();var b=function(){a._inlineJS()};return this._defer?function(){setTimeout(b,0)}:b};c._fillCache=function(){if(this._nodes!==null)return;if(!this._markup){this._nodes=[];return}var a=this._markup.replace(h,function(a,b,c){return i[c.toLowerCase()]?a:b+"></"+c+">"}),c=null;a=b("createNodesFromMarkup")(a,function(a){b("FBLogger")("staticresources").warn("HTML: encountered script node while parsing, hasSrc=%s, type=%s",Boolean(a.src),a.type==null||a.type===""?"<unknown>":a.type),a.type!=="application/ld+json"&&a.type!=="application/json"&&(c=c||[],c.push(a.src?b("Bootloader").requestJSResource_UNSAFE_NEEDS_REVIEW_BY_SECURITY_AND_XFN.bind(b("Bootloader"),a.src):b("evalGlobal").bind(null,a.innerHTML)),a.parentNode.removeChild(a))});c&&(this._hasInlineJs=!0,this._inlineJS=function(){for(var a=0;a<c.length;a++)c[a]()});this._nodes=a};c.setDeferred=function(a){this._defer=!!a;return this};c.hasInlineJs=function(){return this._hasInlineJs};a.isHTML=function(b){return!!b&&(b instanceof a||b.__html!==void 0)};a.replaceJSONWrapper=function(b){return b&&b.__html!==void 0?new a(b.__html):b};return a}();e.exports=a}),null);
__d("TrustedTypesIEFixDOMPolicy",["TrustedTypes"],(function(a,b,c,d,e,f,g){"use strict";a={createHTML:function(a){return a}};b=c("TrustedTypes").createPolicy("dom-ie-fix",a);d=b;g["default"]=d}),98);
__d("isScalar",[],(function(a,b,c,d,e,f){function a(a){return/string|number|boolean/.test(typeof a)}f["default"]=a}),66);
__d("DOM",["$","DOMQuery","Event","FBLogger","FbtResultBase","HTML","TrustedTypesIEFixDOMPolicy","UserAgent_DEPRECATED","createArrayFromMixed","fb-error","isNode","isScalar","isTextNode"],(function(a,b,c,d,e,f,g){a=function(a,b,c){a=document.createElement(a);b&&h.setAttributes(a,b);c!=null&&h.setContent(a,c);return a};var h={find:(b=d("DOMQuery")).find,findPushSafe:b.findPushSafe,scry:b.scry,getSelection:b.getSelection,contains:b.contains,getRootElement:b.getRootElement,isNodeOfType:b.isNodeOfType,isInputNode:b.isInputNode,create:a,setAttributes:function(a,b){b.type&&(a.type=b.type);for(var d in b){var e=b[d],f=/^on/i.test(d);f&&typeof e!=="function"&&c("FBLogger")("dom").warn("Handlers passed to DOM.setAttributes must be functions. Handler passed for %s was %s",d,typeof e);if(d=="type")continue;else d=="style"?typeof e==="string"?a.style.cssText=e:Object.assign(a.style,e):f?c("Event").listen(a,d.substr(2),e):d in a?a[d]=e:a.setAttribute&&a.setAttribute(d,e)}},prependContent:function(a,b){if(!a)throw c("fb-error").TAAL.blameToPreviousFile(new Error("reference element is not a node"));return j(b,a,function(b){a.firstChild?a.insertBefore(b,a.firstChild):a.appendChild(b)})},insertAfter:function(a,b){if(!a||!a.parentNode)throw c("fb-error").TAAL.blameToPreviousFile(new Error("reference element does not have a parent"));var d=a.parentNode;return j(b,d,function(b){a.nextSibling?d.insertBefore(b,a.nextSibling):d.appendChild(b)})},insertBefore:function(a,b){if(!a||!a.parentNode)throw c("fb-error").TAAL.blameToPreviousFile(new Error("reference element does not have a parent"));var d=a.parentNode;return j(b,d,function(b){d.insertBefore(b,a)})},setContent:function(a,b){if(!a)throw c("fb-error").TAAL.blameToPreviousFile(new Error("reference element is not a node"));while(a.firstChild)i(a.firstChild);return h.appendContent(a,b)},appendContent:function(a,b){if(!a)throw c("fb-error").TAAL.blameToPreviousFile(new Error("reference element is not a node"));return j(b,a,function(b){a.appendChild(b)})},replace:function(a,b){if(!a||!a.parentNode)throw c("fb-error").TAAL.blameToPreviousFile(new Error("reference element does not have a parent"));var d=a.parentNode;return j(b,d,function(b){d.replaceChild(b,a)})},remove:function(a){i(typeof a==="string"?c("$")(a):a)},empty:function(a){a=typeof a==="string"?c("$")(a):a;while(a.firstChild)i(a.firstChild)}};function i(a){a.parentNode&&a.parentNode.removeChild(a)}function j(a,b,e){a=c("HTML").replaceJSONWrapper(a);if(a instanceof c("HTML")&&b.firstChild===null&&-1===a.toString().indexOf("<script")){var f=d("UserAgent_DEPRECATED").ie();if(!f||f>7&&!d("DOMQuery").isNodeOfType(b,["table","tbody","thead","tfoot","tr","select","fieldset"])){var g=f?'<em style="display:none;">&nbsp;</em>':"";b.innerHTML=c("TrustedTypesIEFixDOMPolicy").createHTML(g+a);f&&b.removeChild(b.firstChild);return Array.from(b.childNodes)}}else if(c("isTextNode")(b)){b.data=a;return[a]}g=document.createDocumentFragment();var h;f=[];b=[];var i=!1;a=c("createArrayFromMixed")(a);a.length===1&&a[0]instanceof c("FbtResultBase")&&(a=a[0].getContents());for(var j=0;j<a.length;j++){h=c("HTML").replaceJSONWrapper(a[j]);if(h instanceof c("HTML")){b.push(h.getAction());var k=h.getNodes();!i&&h.hasInlineJs()&&(c("FBLogger")("staticresources").warn("DOM: adding HTML which contains inline JS"),i=!0);for(var l=0;l<k.length;l++)f.push(k[l]),g.appendChild(k[l])}else if(c("isScalar")(h)||h instanceof c("FbtResultBase")){l=document.createTextNode(h);f.push(l);g.appendChild(l)}else c("isNode")(h)?(f.push(h),g.appendChild(h)):(Array.isArray(h)&&c("FBLogger")("dom").warn("Nest arrays not supported"),h!==null&&c("FBLogger")("dom").warn("No way to set content %s",h))}e(g);b.forEach(function(a){a()});return f}e=h;g["default"]=e}),98);
__d("AsyncDOM",["CSS","DOM","FBLogger"],(function(a,b,c,d,e,f){a={invoke:function(a,c){for(var d=0;d<a.length;++d){var e=a[d],f=e[0],g=e[1],h=e[2];e=e[3];h=h&&c||null;g&&(h=b("DOM").scry(h||document.documentElement,g)[0]);h||b("FBLogger")("async_dom").warn("Could not find relativeTo element for %s AsyncDOM operation based on selector: %s",f,g);switch(f){case"hide":b("CSS").hide(h);break;case"show":b("CSS").show(h);break;case"setContent":b("DOM").setContent(h,e);break;case"appendContent":b("DOM").appendContent(h,e);break;case"prependContent":b("DOM").prependContent(h,e);break;case"insertAfter":b("DOM").insertAfter(h,e);break;case"insertBefore":b("DOM").insertBefore(h,e);break;case"remove":b("DOM").remove(h);break;case"replace":b("DOM").replace(h,e);break;default:b("FBLogger")("async_dom").warn("Received invalid command %s for AsyncDOM operation",f)}}}};e.exports=a}),null);
__d("AsyncResponse",["invariant","Bootloader","FBLogger","HTML","WebDriverConfig"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(){function a(a,b){this.error=0,this.errorSummary=null,this.errorDescription=null,this.errorMid=null,this.onload=null,this.replay=!1,this.payload=b,this.request=a,this.silentError=!1,this.transientError=!1,this.blockedAction=!1,this.is_last=!0,this.responseHeaders=null}var b=a.prototype;b.getRequest=function(){return this.request};b.getPayload=function(){return this.payload};b.toError=function(){this.error!==0||h(0,5599);var a=this.errorSummary||"",b=this.getErrorDescriptionString()||"",c=new Error(a.toString()+": "+b);Object.assign(c,{code:this.error,description:this.errorDescription||"",descriptionString:b,response:this,summary:a,isSilent:this.silentError,isTransient:this.transientError,mid:this.errorMid});return c};b.getError=function(){return this.error};b.getErrorSummary=function(){return this.errorSummary};b.setErrorSummary=function(a){a=a===void 0?null:a;this.errorSummary=a;return this};b.getErrorDescription=function(){return this.errorDescription};b.getErrorDescriptionString=function(){var a=this.getErrorDescription();if(a==null)return null;if(c("HTML").isHTML(a)){var b=new(c("HTML"))(a);return b.getRootNode().textContent}return a.toString()};b.getErrorIsWarning=function(){return!!this.errorIsWarning};b.isSilent=function(){return!!this.silentError};b.isTransient=function(){return!!this.transientError};b.isBlockedAction=function(){return!!this.blockedAction};b.getResponseHeader=function(a){var b=this.responseHeaders;if(!b)return null;b=b.replace(/^\n/,"");a=a.toLowerCase();b=b.split("\r\n");for(var c=0;c<b.length;++c){var d=b[c],e=d.indexOf(": ");if(e<=0)continue;var f=d.substring(0,e).toLowerCase();if(f===a)return d.substring(e+2)}return null};a.defaultErrorHandler=function(b){try{!b.silentError?a.verboseErrorHandler(b):c("FBLogger")("async_response").catching(b.toError()).warn("default error handler called")}catch(a){alert(b)}};a.verboseErrorHandler=function(a,b){c("Bootloader").loadModules(["ExceptionDialog"],function(c){return c.showAsyncError(a,b)},"AsyncResponse")};return a}();g["default"]=a}),98);
__d("FetchStreamConfig",[],(function(a,b,c,d,e,f){a=Object.freeze({delim:"/*<!-- fetch-stream -->*/"});f["default"]=a}),66);
__d("StreamBlockReader",["Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f){var g;a=function(){function a(a){var c=this;if(!a.getReader)throw new Error("No getReader method found on given object");this.$3=a.getReader();this.$1="";this.$2=null;this.$4=!1;this.$5="utf-8";this.$6="";this.$9=!1;this.$8=function(){return(g||(g=b("Promise"))).reject("Sorry, you are somehow using this too early.")};this.$7=new(g||(g=b("Promise")))(function(a,b){c.$8=a})}var c=a.prototype;c.changeEncoding=function(a){if(this.$2)throw new Error("Decoder already in use, encoding cannot be changed");this.$5=a};c.$10=function(){if(!self.TextDecoder)throw new Error("TextDecoder is not supported here");this.$2||(this.$2=new self.TextDecoder(this.$5));return this.$2};c.$11=function(){if(this.$9)throw new Error("Something else is already reading from this reader");this.$9=!0};c.$12=function(){this.$9=!1};c.isDone=function(){return this.$4};c.$13=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(this.$6!==""){var a=this.$6;this.$6="";return a}if(this.isDone())throw new Error("You cannot read from a stream that is done");a=(yield this.$3.read());var b=a.done;a=a.value;this.$4=b;b&&this.$8();return a?this.$10().decode(a,{stream:!b}):""});function c(){return a.apply(this,arguments)}return c}();c.readNextBlock=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){this.$11();var a=this.$13();this.$12();return a});function c(){return a.apply(this,arguments)}return c}();c.readUntilStringOrEnd=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return yield this.readUntilOneOfStringOrEnd_DO_NOT_USE([a])});function c(b){return a.apply(this,arguments)}return c}();c.readUntilStringOrThrow=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!a)throw new Error("cannot read empty string");this.$11();var b="",c=0;while(!this.isDone()){b+=(yield this.$13());if(b.length<a.length)continue;var d=b.substring(c).indexOf(a);if(d!==-1){d+=c;this.$6=b.substring(d+a.length);this.$12();return b.substring(0,d)}else c=b.length-a.length+1}this.$6=b;this.$12();throw new Error("Breakpoint not found")});function c(b){return a.apply(this,arguments)}return c}();c.readUntilOneOfStringOrEnd_DO_NOT_USE=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){this.$11();var b="";while(!this.isDone()){b+=(yield this.$13());for(var c=0;c<a.length;c++){var d=a[c],e=b.indexOf(d);if(e!==-1){this.$6=b.substring(e+d.length);this.$12();return b.substring(0,e)}}}this.$12();return b});function c(b){return a.apply(this,arguments)}return c}();c.waitUntilDone=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return this.$7});function c(){return a.apply(this,arguments)}return c}();return a}();f["default"]=a}),66);
__d("mixin",[],(function(a,b,c,d,e,f){function a(){var a=function(){},b=0,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];while(e[b]){c=e[b];for(var g in c)Object.prototype.hasOwnProperty.call(c,g)&&(a.prototype[g]=c[g]);b+=1}return a}f["default"]=a}),66);
__d("FetchStreamTransport",["ArbiterMixin","FetchStreamConfig","StreamBlockReader","TimeSlice","URI","asyncToGeneratorRuntime","mixin","nullthrows"],(function(a,b,c,d,e,f,g){var h,i=0;a=function(a){babelHelpers.inheritsLoose(d,a);function d(b){var c;if(!self.ReadableStream||!self.fetch||!Request||!TextDecoder)throw new Error("fetch stream transport is not supported here");c=a.call(this)||this;c.$FetchStreamTransport$p_6=null;c.$FetchStreamTransport$p_1=b;c.$FetchStreamTransport$p_3=!1;c.$FetchStreamTransport$p_4=!1;c.$FetchStreamTransport$p_5=!1;c.$FetchStreamTransport$p_2=++i;return babelHelpers.assertThisInitialized(c)||babelHelpers.assertThisInitialized(c)}var e=d.prototype;e.hasFinished=function(){return this.$FetchStreamTransport$p_5};e.getRequestURI=function(){return new(h||(h=c("URI")))(this.$FetchStreamTransport$p_1).addQueryData({__a:1,__adt:this.$FetchStreamTransport$p_2,__req:"fetchstream_"+this.$FetchStreamTransport$p_2,ajaxpipe_fetch_stream:1})};e.send=function(){if(this.$FetchStreamTransport$p_3)throw new Error("FetchStreamTransport instances cannot be re-used.");this.$FetchStreamTransport$p_3=!0;var a=new Request(this.getRequestURI().toString(),{mode:"same-origin",credentials:"include"});this.$FetchStreamTransport$p_6=c("TimeSlice").getGuardedContinuation("FetchStreamTransport: waiting on first response");a=self.fetch(a,{redirect:"follow"});this.$FetchStreamTransport$p_7(a)};e.$FetchStreamTransport$p_7=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this,d;try{d=(yield a)}catch(a){this.abort()}if(!d||!d.body||!d.ok){this.abort();return}var e=new(c("StreamBlockReader"))(d.body);a=function*(){var a=(yield e.readUntilStringOrEnd(c("FetchStreamConfig").delim));if(b.$FetchStreamTransport$p_4)return"break";c("nullthrows")(b.$FetchStreamTransport$p_6)(function(){var d=JSON.parse(a);e.isDone()||d.finished?b.$FetchStreamTransport$p_5=!0:b.$FetchStreamTransport$p_6=c("TimeSlice").getGuardedContinuation("FetchStreamTransport: waiting on next response");b.inform("response",d.content)})};while(!this.$FetchStreamTransport$p_5&&!this.$FetchStreamTransport$p_4){var f=(yield* a());if(f==="break")break}});function d(b){return a.apply(this,arguments)}return d}();e.abort=function(){var a=this;if(this.$FetchStreamTransport$p_4||this.$FetchStreamTransport$p_5)return;this.$FetchStreamTransport$p_4=!0;this.$FetchStreamTransport$p_5=!0;if(this.$FetchStreamTransport$p_6){var b=this.$FetchStreamTransport$p_6;b(function(){a.inform("abort")})}else this.inform("abort")};return d}(c("mixin")(c("ArbiterMixin")));g["default"]=a}),98);
__d("HTTPErrors",["emptyFunction"],(function(a,b,c,d,e,f,g){function a(a){return{summary:"HTTP Error",description:"Unknown HTTP error #"+a}}b={get:a,getAll:c("emptyFunction").thatReturns(new Map())};d=b;g["default"]=d}),98);
__d("SessionName",["SessionNameConfig"],(function(a,b,c,d,e,f){e.exports={getName:function(){return b("SessionNameConfig").seed}}}),null);
__d("bind",[],(function(a,b,c,d,e,f){function a(a,b){var c=Array.prototype.slice.call(arguments,2);if(typeof b!=="string")return Function.prototype.bind.apply(b,[a].concat(c));function d(){var d=c.concat(Array.prototype.slice.call(arguments));if(a[b])return a[b].apply(a,d)}d.toString=function(){return"bound lazily: "+a[b]};return d}e.exports=a}),null);
__d("executeAfter",[],(function(a,b,c,d,e,f){function a(a,b,c){return function(){a.apply(c||this,arguments),b.apply(c||this,arguments)}}e.exports=a}),null);
__d("goURI",["cr:8906"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:8906")}),98);
__d("isSparkDotMetaDotComURI",[],(function(a,b,c,d,e,f){var g=new RegExp("(^|\\.)spark\\.meta\\.com$","i"),h=["https"];function a(a){if(a.isEmpty()&&a.toString()!=="#")return!1;return!a.getDomain()&&!a.getProtocol()?!1:h.indexOf(a.getProtocol())!==-1&&g.test(a.getDomain())}f["default"]=a}),66);
__d("AsyncRequest",["errorCode","fbt","invariant","AdsManagerConstURIUtils","Arbiter","AsyncDOM","AsyncRequestConfig","AsyncResponse","Bootloader","CSS","DTSG","DTSG_ASYNC","Deferred","Env","ErrorGuard","Event","FBLogger","FetchStreamTransport","HTTPErrors","HasteResponse","PHPQuerySerializer","Parent","Promise","ResourceTimingsStore","ResourceTypes","Run","ScriptPath","ServerJS","SessionName","TimeSlice","URI","UserAgent_DEPRECATED","ZeroRewrites","bind","clearTimeout","emptyFunction","executeAfter","fb-error","ge","getAsyncHeaders","getAsyncParams","gkx","goURI","isArDotMetaDotComURI","isEmpty","isFacebookURI","isHorizonDotMetaDotComURI","isInternalFBURI","isMessengerDotComURI","isSparkDotMetaDotComURI","isWorkDotMetaDotComURI","isWorkplaceDotComURI","isWorkroomsDotComURI","performanceAbsoluteNow","promiseDone","replaceTransportMarkers","setTimeout","setTimeoutAcrossTransitions","unrecoverableViolation","uriIsRelativePath"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";var k,l,m,n,o,p,q;e=19e3;f=500;var r=1006,s=1004,t=1010,u=new Set([f,t,s,r]),v=!1;d("Run").onAfterUnload(function(){v=!0});function w(){return v}function x(a){return"onprogress"in a}function y(a){return"upload"in a&&"onprogress"in a.upload}function z(a){return"withCredentials"in a}function A(a){return a.status in{0:1,12029:1,12030:1,12031:1,12152:1}}function B(a){a=!a||typeof a==="function";a||c("FBLogger")("asyncresponse").mustfix("AsyncRequest response handlers must be functions. Pass a function, or use bind() to build one.");return a}var C=2,D=C,E=!1;c("Arbiter").subscribe("page_transition",function(a,b){!E?D=b.id:E=!1});var F="for (;;);",G=F.length,H=function(){function a(b){var e=this,f;this._allowIrrelevantRequests=!1;this._delayPreDisplayJS=!1;this._shouldReplaceTransportMarkers=!1;this._dispatchErrorResponse=function(a,b){var d=a.getError();e.clearStatusIndicator();if(!e._isRelevant()||d===t){e.abort();return}if(e._isServerDialogErrorCode(d)){var f=d==1357008||d==1357007;e.interceptHandler(a);d==1357007?e._displayServerDialog(a,f,!0):e._displayServerDialog(a,f)}else if(e.initialHandler(a)!==!1){c("clearTimeout")(e.timer);try{b(a)}catch(b){e.finallyHandler(a);throw b}e.finallyHandler(a)}};this._onStateChange=function(){var b=e.transport;if(!b)return;try{a._inflightCount--;d("ResourceTimingsStore").measureResponseReceived(c("ResourceTypes").XHR,e.resourceTimingStoreUID);try{b.getResponseHeader("X-FB-Debug")&&(e._xFbServer=b.getResponseHeader("X-FB-Debug"),c("fb-error").ErrorXFBDebug.add(e._xFbServer))}catch(a){}if(b.status>=200&&b.status<300)a.lastSuccessTime=Date.now(),e._handleXHRResponse(b);else if(d("UserAgent_DEPRECATED").webkit()&&typeof b.status==="undefined")e._invokeErrorHandler(1002);else if(c("AsyncRequestConfig").retryOnNetworkError&&A(b)&&e.remainingRetries>0&&!e._requestTimeout){e.remainingRetries--;delete e.transport;e.send(!0);return}else e._invokeErrorHandler();e.getOption("asynchronous_DEPRECATED")!==!1&&delete e.transport}catch(a){if(w())return;delete e.transport;e.remainingRetries>0?(e.remainingRetries--,e.send(!0)):(e.getOption("suppressErrorAlerts")||c("FBLogger")("AsyncRequest").catching(a).mustfix("AsyncRequest exception when attempting to handle a state change"),e._invokeErrorHandler(1007))}};this._handleTimeout=function(){e.continuation.last(function(){e._requestTimeout=!0;var a=e.timeoutHandler;e.abandon();a&&a(e);c("setTimeout")(function(){c("Arbiter").inform("AsyncRequest/timeout",{request:e})},0)})};this.continuation=c("TimeSlice").getPlaceholderReusableContinuation();this.transport=null;this.method="POST";this.uri="";this.timeout=null;this.timer=null;this.initialHandler=f=c("emptyFunction");this.handler=null;this.uploadProgressHandler=null;this.errorHandler=c("AsyncResponse").defaultErrorHandler;this.transportErrorHandler=null;this.timeoutHandler=null;this.interceptHandler=f;this.finallyHandler=f;this.abortHandler=f;this.serverDialogCancelHandler=null;this.relativeTo=null;this.statusElement=null;this.statusClass="";this.data={};this.headers={};this.file=null;this.context={};this.readOnly=!1;this.writeRequiredParams=[];this.remainingRetries=0;this.userActionID="-";this.resourceTimingStoreUID=d("ResourceTimingsStore").getUID(c("ResourceTypes").XHR,b!=null?b.toString():"");this.flushedResponseTextParseIndex=0;this.option={asynchronous_DEPRECATED:!0,suppressErrorHandlerWarning:!1,suppressEvaluation:!1,suppressErrorAlerts:!1,retries:0,bundle:!1,handleErrorAfterUnload:!1,useFetchTransport:!1};this.transportErrorHandler=c("bind")(this,"errorHandler");b!==void 0&&this.setURI(b);this.setAllowCrossPageTransition(c("AsyncRequestConfig").asyncRequestsSurviveTransitionsDefault||!1)}var e=a.prototype;e._dispatchResponse=function(a){this.clearStatusIndicator();if(!this._isRelevant()){this._invokeErrorHandler(t);return}if(this.initialHandler(a)===!1)return;c("clearTimeout")(this.timer);var b,d=this.getHandler();if(d)try{b=this._shouldSuppressJS(d(a))}catch(b){a.is_last&&this.finallyHandler(a);throw b}b||this._handleJSResponse(a);a.is_last&&this.finallyHandler(a)};e._shouldSuppressJS=function(b){return b===a.suppressOnloadToken};e._handlePreDisplayServerJS=function(a,b){var d=!1,e=[],f=function(){if(d){c("FBLogger")("AsyncResponse").warn("registerToBlockDisplayUntilDone_DONOTUSE called after AsyncResponse display started. This is a no-op.");return function(){}}var a,b=new(c("Deferred"))();e.push(b.getPromise());return c("TimeSlice").guard(function(){a&&c("clearTimeout")(a),b.resolve()},"AsyncRequestDisplayBlockingEvent",{propagationType:c("TimeSlice").PropagationType.EXECUTION})};a.handle(b,{bigPipeContext:{registerToBlockDisplayUntilDone_DONOTUSE:f}});d=!0;return e};e._hasEvalDomOp=function(a){return a&&a.length?a.some(function(a){return a[0]==="eval"}):!1};e._handleJSResponse=function(a){var b=this.getRelativeTo(),e=a.domops,f=a.dtsgToken,g=a.dtsgAsyncGetToken,h=a.jsmods,i=a.savedServerJSInstance;i&&i instanceof c("ServerJS")?i=i:i=new(c("ServerJS"))();i.setRelativeTo(b);if(h){var j={define:h.define,instances:h.instances,markup:h.markup};delete h.define;delete h.instances;delete h.markup;this._hasEvalDomOp(e)&&(j.elements=h.elements,delete h.elements);i.handle(j)}j=new(m||(m=c("URI")))(this.uri);(!j.getDomain()&&!j.getProtocol()||document.location.origin===j.getOrigin())&&(f&&d("DTSG").setToken(f),g&&d("DTSG_ASYNC").setToken(g));e&&(q||(q=c("ErrorGuard"))).applyWithGuard(function(){return d("AsyncDOM").invoke(e,b)},null,[],{errorType:"warn"});h&&i.handle(h);this._handleJSRegisters(a,"onload");this._handleJSRegisters(a,"onafterload")};e._handleJSRegisters=function(a,b){a=a[b];if(a)for(b=0;b<a.length;b++){var d=null,e=a[b],f=e.match(/^\"caller:([^\"]+?)\";(.*)/);f!=null&&(d=f[1],e=f[2]);(q||(q=c("ErrorGuard"))).applyWithGuard(new Function(e),this,[]);c("FBLogger")("comet_infra").info("Detected dynamic new Function(...) call in AsyncRequest._handleJSRegisters(...).",new(m||(m=c("URI")))(this.uri).getPath(),d)}};e.invokeResponseHandler=function(a){var e=this;if(typeof a.redirect!=="undefined"){c("setTimeout")(function(){e.setURI(a.redirect,!0).send()},0);return}if(a.bootloadOnly!==void 0){var f=typeof a.bootloadOnly==="string"?JSON.parse(a.bootloadOnly):a.bootloadOnly,g=function(a){c("TimeSlice").guard(function(){c("Bootloader").loadPredictedResourceMap(a)},"Bootloader.loadPredictedResourceMap",{root:!0})()};for(f of f)g(f);return}if(!this.handler&&!this.errorHandler&&!this.transportErrorHandler&&!this.preBootloadHandler&&this.initialHandler===c("emptyFunction")&&this.finallyHandler===c("emptyFunction"))return;var h=a.asyncResponse;if(typeof h!=="undefined"){if(!this._isRelevant()){this._invokeErrorHandler(t);return}h.updateScriptPath&&c("ScriptPath").set(h.updateScriptPath.path,h.updateScriptPath.token,h.updateScriptPath.extra_info);h.lid&&(this._responseTime=Date.now(),this.lid=h.lid);d("HasteResponse").handleSRPayload((g=h.hsrp)!=null?g:{});var i,j;if(h.getError()&&!h.getErrorIsWarning()){f=this.getErrorHandler().bind(this);i=(q||(q=c("ErrorGuard"))).guard(this._dispatchErrorResponse,{name:"AsyncRequest#_dispatchErrorResponse for "+this.getURI()});i=i.bind(this,h,f);j="error"}else{i=(q||(q=c("ErrorGuard"))).guard(this._dispatchResponse.bind(this),{name:"AsyncRequest#_dispatchResponse for "+this.getURI()});i=i.bind(this,h);j="response";g=h.domops;if(!this._delayPreDisplayJS&&h.jsmods&&h.jsmods.pre_display_requires&&!this._hasEvalDomOp(g)){f=h.jsmods;g={define:f.define,instances:f.instances,markup:f.markup};delete f.define;delete f.instances;delete f.markup;g.pre_display_requires=f.pre_display_requires;delete f.pre_display_requires;f=new(c("ServerJS"))();f.setRelativeTo(this.getRelativeTo());h.savedServerJSInstance=f;var k=this._handlePreDisplayServerJS(f,g);if(k&&k.length){var m=i;i=function(){c("promiseDone")((l||(l=b("Promise"))).all(k).then(m))}}}}var o=(n||(n=c("performanceAbsoluteNow")))();i=c("executeAfter")(i,function(){c("Arbiter").inform("AsyncRequest/"+j,{request:e,response:h,ts:o})});this.preBootloadHandler&&this.preBootloadHandler(h);c("Bootloader").loadResources((f=h.allResources)!=null?f:[],{onAll:c("AsyncRequestConfig").immediateDispatch?i:function(){c("setTimeout")(i,0)}})}else typeof a.transportError!=="undefined"?this._xFbServer?this._invokeErrorHandler(1008):this._invokeErrorHandler(1012):this._invokeErrorHandler(1007)};e._invokeErrorHandler=function(a){var b=this,d=this.transport;if(!d)return;var e;if(this.responseText==="")e=1002;else if(this._requestAborted)e=1011;else{try{e=a||d.status||s}catch(a){e=1005}!1===navigator.onLine&&(e=r)}var f,g;a=!0;if(e===r)g=i._(/*BTDS*/"No hay conexi\u00f3n de red"),f=i._(/*BTDS*/"Parece que tu navegador est\u00e1 desconectado. Comprueba la conexi\u00f3n a internet y vuelve a intentarlo.");else if(e>=300&&e<=399){g=i._(/*BTDS*/"Redirecci\u00f3n");f=i._(/*BTDS*/"Esta ocasi\u00f3n tu acceso a Facebook fue redirigido o bloqueado por terceros, por favor contacta con tu ISP o vuelve a cargar la p\u00e1gina.");var h=d.getResponseHeader("Location");h&&c("goURI")(h,!0);a=!0}else g=i._(/*BTDS*/"\u00a1Uy!"),f=i._(/*BTDS*/"Se ha producido un error y estamos trabajando para solucionarlo lo antes posible. Pronto podr\u00e1s volver a intentarlo.");var j=new(c("AsyncResponse"))(this,d);Object.assign(j,{error:e,errorSummary:g,errorDescription:f,silentError:a,errorMid:d.getResponseHeader("Error-Mid")});c("setTimeout")(function(){c("Arbiter").inform("AsyncRequest/error",{request:b,response:j})},0);if(w()&&!this.getOption("handleErrorAfterUnload"))return;if(!this.transportErrorHandler){c("FBLogger")("asyncresponse").mustfix("Async request to %s failed with a %d error, but there was no error handler available to deal with it.",this.getURI(),e);return}h=this.getTransportErrorHandler().bind(this);!(this.getOption("suppressErrorAlerts")||u.has(e))?c("FBLogger")("asyncresponse").addToCategoryKey(String(e)).mustfix("Async request failed with error %s: %s when requesting %s",e,f.toString(),this.getURI()):u.has(e)&&c("FBLogger")("asyncresponse").addToCategoryKey(String(e)).warn("Async request failed with error %s: %s when requesting %s",e,f.toString(),this.getURI());(q||(q=c("ErrorGuard"))).applyWithGuard(this._dispatchErrorResponse,this,[j,h])};e._isServerDialogErrorCode=function(a){return a==1357008||a==1357007||a==1357041||a==1442002||a==1357001};e._displayServerDialog=function(a,b,d){var e=this;d===void 0&&(d=!1);var f=a.getPayload();if(f.__dialog!==void 0){this._displayServerLegacyDialog(a,b);return}b=f.__dialogx;new(c("ServerJS"))().handle(b);if(f.__should_use_mwa_reauth===!0){c("Bootloader").loadModules(["MWADeveloperReauthBarrier"],function(b){b.registerRequest(f.__dialogID,e,a)},"AsyncRequest");return}c("Bootloader").loadModules(["ConfirmationDialog"],function(b){b.setupConfirmation(a,e,d)},"AsyncRequest")};e._displayServerLegacyDialog=function(a,b){var d=this,e=a.getPayload().__dialog;if(c("gkx")("20935")){var f;c("FBLogger")("comet_infra").addMetadata("COMET_INFRA","ERROR_CODE",a.getError().toString()).addMetadata("COMET_INFRA","ERROR_URL",(f=(f=a.request)==null?void 0:f.getURI())!=null?f:"unknown").mustfix("AsyncRequest._displayServerLegacyDialog called in Comet")}c("Bootloader").loadModules(["Dialog"],function(c){c=new c(e);b&&c.setHandler(d._displayConfirmationHandler.bind(d,c));c.setCancelHandler(function(){var b=d.getServerDialogCancelHandler();try{b&&b(a)}catch(a){throw a}finally{d.finallyHandler(a)}}).setCausalElement(d.relativeTo).show()},"AsyncRequest")};e._displayConfirmationHandler=function(a){this.data.confirmed=1,Object.assign(this.data,a.getFormData()),this.send()};e.$1=function(a){a.subscribe("response",this._handleJSONPResponse.bind(this)),a.subscribe("abort",this._handleJSONPAbort.bind(this)),this.transport=a};e._handleJSONPResponse=function(a,b){a=this.transport;if(!a)return;b.bootloadOnly||(this.is_first=this.is_first===void 0);b=this._interpretResponse(b);b.asyncResponse&&(b.asyncResponse.is_first=this.is_first,b.asyncResponse.is_last=a.hasFinished());this.invokeResponseHandler(b);a.hasFinished()&&delete this.transport};e._handleJSONPAbort=function(){this._invokeErrorHandler(),delete this.transport};e._handleXHRResponse=function(a){var b;if(this.getOption("suppressEvaluation"))b={asyncResponse:new(c("AsyncResponse"))(this,a)};else try{this._handleFlushedResponse();a=a.responseText;a=this._filterOutFlushedText(a);a=this._unshieldResponseText(a);a=JSON.parse(a);b=this._interpretResponse(a)}catch(a){b=a.message,c("FBLogger")("async_request").catching(a).warn("Failed to handle response")}this.invokeResponseHandler(b)};e._handleFlushedResponse=function(){var a=this.flushedResponseHandler,b=this.transport;if(a&&b){var c=b.responseText.indexOf(F);c=c===-1?b.responseText.length:c;a(b.responseText.substring(this.flushedResponseTextParseIndex,c));this.flushedResponseTextParseIndex=c}};e._unshieldResponseText=function(a){if(a.length<=G)throw new Error("Response too short on async");var b=0;while(a.charAt(b)==" "||a.charAt(b)=="\n")b++;b&&a.substring(b,b+G)==F;return a.substring(b+G)};e._filterOutFlushedText=function(a){if(!this.flushedResponseHandler)return a;var b=a.indexOf(F);return b<0?a:a.substr(b)};e._interpretResponse=function(a){if(a.redirect)return{redirect:a.redirect};if(a.bootloadOnly)return{bootloadOnly:a.bootloadOnly};var b=a.error&&this._isServerDialogErrorCode(a.error);this._shouldReplaceTransportMarkers&&a.payload&&!b&&c("replaceTransportMarkers")({relativeTo:this.getRelativeTo(),bigPipeContext:null},a.payload);b=new(c("AsyncResponse"))(this);if(a.__ar!=1)c("FBLogger")("AsyncRequest").warn("AsyncRequest to endpoint %s returned a JSON response, but it is not properly formatted. The endpoint needs to provide a response using the AsyncResponse class in PHP.",this.getURI()),b.payload=a;else{Object.assign(b,a);a=this.transport;a&&a.getAllResponseHeaders!==void 0&&(b.responseHeaders=a.getAllResponseHeaders())}return{asyncResponse:b}};e._isMultiplexable=function(){if(this.getOption("useFetchTransport")){c("FBLogger")("AsyncRequest").mustfix("You cannot bundle AsyncRequest that uses iframe transport.");return!1}if(!c("isFacebookURI")(new(m||(m=c("URI")))(this.uri))){c("FBLogger")("AsyncRequest").mustfix("You can not bundle AsyncRequest sent to non-facebook URIs.  Uri: %s",this.getURI());return!1}if(!this.getOption("asynchronous_DEPRECATED")){c("FBLogger")("AsyncRequest").mustfix("We cannot bundle synchronous AsyncRequests");return!1}return!0};e.handleResponse=function(a){a=this._interpretResponse(a);this.invokeResponseHandler(a)};e.setMethod=function(a){this.method=a.toString().toUpperCase();return this};e.getMethod=function(){return this.method};e.setData=function(a){this.data=a;return this};e.setRequestHeader=function(a,b){this.headers[a]=b;return this};e.setRawData=function(a){this.rawData=a;return this};e.getData=function(){return this.data};e.setContextData=function(a,b,c){c=c===void 0?!0:c;c&&(this.context["_log_"+a]=b);return this};e._setUserActionID=function(){this.userActionID=(d("SessionName").getName()||"-")+"/-"};e.setURI=function(a,b){b===void 0&&(b=!1);typeof a==="string"&&a.match(/^\/?u_\d+_\d+/)&&c("FBLogger")("asyncrequest").warn("Invalid URI %s",a);var e=new(m||(m=c("URI")))(a);if(this.getOption("useFetchTransport")&&!c("isFacebookURI")(e)){b&&j(0,45284);return this}if(!this._allowCrossOrigin&&!this.getOption("useFetchTransport")&&!e.isSameOrigin()&&!c("uriIsRelativePath")(e)){b&&j(0,45285);return this}this._setUserActionID();if(!a||e.isEmpty()){c("FBLogger")("async_request").mustfix("URI cannot be empty");return this}this.uri=d("ZeroRewrites").rewriteURI(e);return this};e.getURI=function(){return this.uri.toString()};e.delayPreDisplayJS=function(a){a===void 0&&(a=!0);this._delayPreDisplayJS=a;return this};e.setInitialHandler=function(a){this.initialHandler=a;return this};e.setPayloadHandler=function(a){this.setHandler(function(b){a(b.payload)});return this};e.setHandler=function(a){B(a)&&(this.handler=a);return this};e.setFlushedResponseHandler=function(a){B(a)&&(this.flushedResponseHandler=a);return this};e.getHandler=function(){return this.handler||c("emptyFunction")};e.setProgressHandler=function(a){B(a)&&(this.progressHandler=a);return this};e.setUploadProgressHandler=function(a){B(a)&&(this.uploadProgressHandler=a);return this};e.setErrorHandler=function(a){B(a)&&(this.errorHandler=a);return this};e.setTransportErrorHandler=function(a){this.transportErrorHandler=a;return this};e.getErrorHandler=function(){return this.errorHandler||c("emptyFunction")};e.getTransportErrorHandler=function(){return this.transportErrorHandler||c("emptyFunction")};e.setTimeoutHandler=function(a,b){B(b)&&(this.timeout=a,this.timeoutHandler=b);return this};e.resetTimeout=function(a){if(!(this.timeoutHandler===null))if(a===null)this.timeout=null,c("clearTimeout")(this.timer),this.timer=null;else{var b=!this._allowCrossPageTransition;this.timeout=a;c("clearTimeout")(this.timer);b?this.timer=c("setTimeout")(this._handleTimeout.bind(this),this.timeout):this.timer=c("setTimeoutAcrossTransitions")(this._handleTimeout.bind(this),this.timeout)}return this};e.setNewSerial=function(){this.id=++C;return this};e.setInterceptHandler=function(a){this.interceptHandler=a;return this};e.setFinallyHandler=function(a){this.finallyHandler=a;return this};e.setAbortHandler=function(a){this.abortHandler=a;return this};e.getServerDialogCancelHandler=function(){return this.serverDialogCancelHandler};e.setServerDialogCancelHandler=function(a){this.serverDialogCancelHandler=a;return this};e.setPreBootloadHandler=function(a){this.preBootloadHandler=a;return this};e.setReadOnly=function(a){typeof a!=="boolean"||(this.readOnly=a);return this};e.getReadOnly=function(){return this.readOnly};e.setRelativeTo=function(a){this.relativeTo=a;return this};e.getRelativeTo=function(){return this.relativeTo};e.setStatusClass=function(a){this.statusClass=a;return this};e.setStatusElement=function(a){this.statusElement=a;return this};e.getStatusElement=function(){return c("ge")(this.statusElement)};e._isRelevant=function(){if(this._allowCrossPageTransition)return!0;return!this.id?!0:this.id>D};e.clearStatusIndicator=function(){var a=this.getStatusElement();a&&(d("CSS").removeClass(a,"async_saving"),d("CSS").removeClass(a,this.statusClass))};e._addStatusIndicator=function(){var a=this.getStatusElement();a&&(d("CSS").addClass(a,"async_saving"),d("CSS").addClass(a,this.statusClass))};e.specifiesWriteRequiredParams=function(){var a=this;return this.writeRequiredParams.every(function(b){a.data[b]=a.data[b]||(o||(o=c("Env")))[b]||(c("ge")(b)||{}).value;return a.data[b]!==void 0?!0:!1})};e.setOption=function(a,b){typeof this.option[a]!=="undefined"&&(this.option[a]=b);return this};e.getOption=function(a){typeof this.option[a]==="undefined";return this.option[a]};e.abort=function(){var a=this;this.continuation.last(function(){var b=a.transport;if(b){var d=a.getTransportErrorHandler();a.setOption("suppressErrorAlerts",!0);a.setTransportErrorHandler(c("emptyFunction"));a._requestAborted=!0;b.abort();a.setTransportErrorHandler(d)}a.abortHandler();K.unschedule(a)})};e.abandon=function(){var a=this;this.continuation.last(function(){var b;c("clearTimeout")(a.timer);a.setOption("suppressErrorAlerts",!0).setHandler(b=c("emptyFunction")).setErrorHandler(b).setTransportErrorHandler(b).setProgressHandler(b).setUploadProgressHandler(b);b=a.transport;b&&(a._requestAborted=!0,x(b)&&delete b.onprogress,y(b)&&delete b.upload.onprogress,b.abort());a.abortHandler();K.unschedule(a)})};e.setNectarModuleDataSafe=function(a){var b=this.setNectarModuleData;b&&b.call(this,a);return this};e.setAllowCrossPageTransition=function(a){this._allowCrossPageTransition=!!a;this.timer&&this.resetTimeout(this.timeout);return this};e.getAllowIrrelevantRequests=function(){return this._allowIrrelevantRequests};e.setAllowIrrelevantRequests=function(a){this._allowIrrelevantRequests=a;return this};e.setAllowCrossOrigin=function(a){this._allowCrossOrigin=a;return this};e.setAllowCredentials=function(a){this._allowCredentials=a;return this};e.setIsBackgroundRequest=function(a){this._isBackgroundRequest=a;return this};e.setReplaceTransportMarkers=function(a){a===void 0&&(a=!0);this._shouldReplaceTransportMarkers=a;return this};e.sendAndReturnAbortHandler=function(){var a=this;this.send();return function(){return a.abort()}};e.send=function(b){var e=this;b=b||!1;if(!this.uri)return!1;this.errorHandler||!this.getOption("suppressErrorHandlerWarning");this.getOption("useFetchTransport")&&this.method!="GET"&&this.setMethod("GET");this.timeoutHandler!==null&&this.getOption("useFetchTransport");if(!this.getReadOnly()){this.specifiesWriteRequiredParams();if(this.method!="POST")return!1}if(document.location.search.toString().includes(this.uri.toString()))return!1;if(this.uri.toString().includes("/../")||this.uri.toString().includes("\\../")||this.uri.toString().includes("/..\\")||this.uri.toString().includes("\\..\\"))return!1;Object.assign(this.data,c("getAsyncParams")(this.method));(p||(p=c("isEmpty")))(this.context)||(Object.assign(this.data,this.context),this.data.ajax_log=1);(o||(o=c("Env"))).force_param&&Object.assign(this.data,(o||(o=c("Env"))).force_param);this._setUserActionID();if(this.getOption("bundle")&&this._isMultiplexable()){K.schedule(this);return!0}this.setNewSerial();this.getOption("asynchronous_DEPRECATED")||this.uri.addQueryData({__sjax:1});c("Arbiter").inform("AsyncRequest/send",{request:this,ts:(n||(n=c("performanceAbsoluteNow")))()});var f,g;this.method=="GET"&&this.uri.addQueryData({fb_dtsg_ag:d("DTSG_ASYNC").getToken()});d("AdsManagerConstURIUtils").shouldRouteToAMReadRegions(this.uri.toString())&&this.getReadOnly()&&this.method.toLowerCase()==="get"?this.uri.addQueryData({ads_manager_read_regions:!0}):d("AdsManagerConstURIUtils").shouldRouteToAMWriteRegions(this.uri.toString(),this.getReadOnly())&&this.uri.addQueryData({ads_manager_write_regions:!0});this.method=="GET"||this.rawData?(f=this.uri.addQueryData(this.data).toString(),g=this.rawData||""):(this._allowCrossOrigin&&this.uri.addQueryData({__a:1}),f=this.uri.toString(),g=(k||(k=d("PHPQuerySerializer"))).serialize(this.data));if(this.transport)return!1;if(this.getOption("useFetchTransport"))try{var h=new(c("FetchStreamTransport"))(this.uri);this.$1(h);this._markRequestSent();h.send();return!0}catch(a){this.setOption("useFetchTransport",!1)}this.flushedResponseHandler&&(this.flushedResponseTextParseIndex=0);var i;try{i=d("ZeroRewrites").getTransportBuilderForURI(this.uri)()}catch(a){throw c("unrecoverableViolation")(a.message,"comet_infra",{},{blameToPreviousFrame:1})}if(!i)return!1;this.schedule("AsyncRequest.send");i.onreadystatechange=function(){var a=e.transport;a&&a.readyState>=2&&a.readyState<=3&&e._handleFlushedResponse();i.readyState===4&&e.continuation.last(e._onStateChange)};this.progressHandler&&x(i)&&(i.onprogress=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];e.continuation(function(){e.progressHandler&&e.progressHandler.apply(e,b)})});this.uploadProgressHandler&&y(i)&&(i.upload.onprogress=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];e.continuation(function(){e.uploadProgressHandler&&e.uploadProgressHandler.apply(e,b)})});b||(this.remainingRetries=this.getOption("retries"));this.transport=i;try{i.open(this.method,f,c("gkx")("25571")?!0:this.getOption("asynchronous_DEPRECATED"))}catch(a){return!1}if(!this.uri.isSameOrigin()&&!c("uriIsRelativePath")(this.uri)&&!this.getOption("useFetchTransport")){if(!z(i))return!1;this._canSendCredentials()&&(i.withCredentials=!0)}this.method=="POST"&&!this.rawData&&i.setRequestHeader("Content-Type","application/x-www-form-urlencoded");this._isBackgroundRequest&&i.setRequestHeader("X-FB-BACKGROUND-STATE","1");var j=c("getAsyncHeaders")(this.uri);Object.keys(j).forEach(function(a){i&&i.setRequestHeader(a,j[a])});c("Arbiter").inform("AsyncRequest/will_send",{request:this});if(i)for(h in this.headers)Object.prototype.hasOwnProperty.call(this.headers,h)&&i.setRequestHeader(h,this.headers[h]);this._addStatusIndicator();this._markRequestSent();i.send(g);this.timeout!==null&&this.resetTimeout(this.timeout);a._inflightCount++;return!0};e.schedule=function(a){this.continuation=c("TimeSlice").getReusableContinuation(a)};e._canSendCredentials=function(){if(this._allowCredentials===!1)return!1;var a=new(m||(m=c("URI")))(this.uri);return c("isFacebookURI")(a)||c("isInternalFBURI")(a)||c("isMessengerDotComURI")(a)||c("isWorkplaceDotComURI")(a)||c("isWorkroomsDotComURI")(a)||c("isWorkDotMetaDotComURI")(a)||c("isHorizonDotMetaDotComURI")(a)||c("isSparkDotMetaDotComURI")(a)||c("isArDotMetaDotComURI")(a)};e._markRequestSent=function(){var a=new(m||(m=c("URI")))(this.getURI()).getQualifiedURI().toString();d("ResourceTimingsStore").updateURI(c("ResourceTypes").XHR,this.resourceTimingStoreUID,a);d("ResourceTimingsStore").annotate(c("ResourceTypes").XHR,this.resourceTimingStoreUID).addStringAnnotation("uri",a);d("ResourceTimingsStore").measureRequestSent(c("ResourceTypes").XHR,this.resourceTimingStoreUID)};e.promisePayload=function(a){return this.exec().then(function(a){return a.payload},function(a){throw a.toError()})};e.exec=function(a){var d=this;if(this.getHandler()!==c("emptyFunction")||this.getErrorHandler()!==c("AsyncResponse").defaultErrorHandler)throw new Error("exec is an async function and does not allow previously set handlers");return new(l||(l=b("Promise")))(function(b,c){d.setHandler(b).setErrorHandler(c).send(a)})};a.bootstrap=function(b,e,f){var g="GET",h=!0,i={};(f||e&&e.rel=="async-post")&&(g="POST",h=!1,b&&(b=new(m||(m=c("URI")))(b),i=b.getQueryData(),b.setQueryData({})));f=d("Parent").byClass(e,"stat_elem")||e;if(f&&d("CSS").hasClass(f,"async_saving"))return!1;b=new a(b).setReadOnly(h).setMethod(g).setData(i).setNectarModuleDataSafe(e).setRelativeTo(e);e&&(b.setHandler(function(a){c("Event").fire(e,"success",{response:a})}),b.setErrorHandler(function(a){c("Event").fire(e,"error",{response:a})!==!1&&c("AsyncResponse").defaultErrorHandler(a)}));if(f instanceof HTMLElement){b.setStatusElement(f);h=f.getAttribute("data-status-class");h&&b.setStatusClass(h)}b.send();return!1};a.bootstrap_UNSAFE_LET_ANYONE_IMPERSONATE_THE_USER_FOR_THESE_WRITES=function(b,c,d){a.bootstrap(b,c,d)};a.post=function(b,c){new a(b).setReadOnly(!1).setMethod("POST").setData(c).send();return!1};a.post_UNSAFE_LET_ANYONE_IMPERSONATE_THE_USER_FOR_THESE_WRITES=function(b,c){a.post(b,c)};a.getLastID=function(){return C};a.ignoreUpdate=function(){E=!0};a.getInflightCount=function(){return this._inflightCount};return a}();H._inflightCount=0;var I,J=[],K=function(){function a(){this._requests=[]}var b=a.prototype;b.add=function(a){this._requests.push(a)};b.remove=function(a){var b=this._requests,c=this._requestsSent;for(var d=0,e=b.length;d<e;d++)b[d]===a&&(c?b[d]=null:b.splice(d,1))};b.send=function(){this._requestsSent&&j(0,4390);this._requestsSent=!0;this._wrapperRequest=null;var a=this._requests;if(!a.length)return;var b;if(a.length===1)b=a[0];else{a=a.filter(Boolean).map(function(a){return[a.uri.getPath(),(k||(k=d("PHPQuerySerializer"))).serialize(a.data)]});b=this._wrapperRequest=new H("/ajax/proxy.php").setAllowCrossPageTransition(!0).setData({data:a}).setHandler(this._handler.bind(this)).setTransportErrorHandler(this._transportErrorHandler.bind(this))}b&&b.setOption("bundle",!1).send()};b._handler=function(a){var b=this,c=a.getPayload().responses;if(c.length!==this._requests.length)return;a=function(a){var d=b._requests[a];if(!d)return"continue";var e=d.uri.getPath();b._wrapperRequest&&(d.id=b._wrapperRequest.id);if(c[a][0]!==e){d.continuation.last(function(){d.invokeResponseHandler({transportError:"Wrong response order in bundled request to "+e})});return"continue"}d.continuation.last(function(){d.handleResponse(c[a][1])})};for(var d=0;d<this._requests.length;d++){var e=a(d);if(e==="continue")continue}J.splice(J.indexOf(this,1))};b._transportErrorHandler=function(a){var b=this,c={transportError:a.errorDescription};a=this._requests.filter(Boolean).map(function(a){b._wrapperRequest&&(a.id=b._wrapperRequest.id);a.invokeResponseHandler(c);return a.uri.getPath()})};a.schedule=function(b){b.schedule("AsyncMultiplex.schedule");I||(I=new a(),J.push(I),c("TimeSlice").guard(function(){c("setTimeoutAcrossTransitions")(function(){I&&(I.send(),I=null)},0)},"AsyncMultiplex.schedule",{propagationType:c("TimeSlice").PropagationType.ORPHAN})());I.add(b);return I};a.unschedule=function(a){J.forEach(function(b){b.remove(a)})};return a}();H.suppressOnloadToken={};a.AsyncRequest=H;g["default"]=H}),226);
__d("EventProfilerSham",[],(function(a,b,c,d,e,f){a={__wrapEventListenHandler:function(a){return a},tagCurrentActiveInteractionsAs:function(a){},setCurrentAdAccountId:function(a){},setAdsConfig:function(a){}};b=a;f["default"]=b}),66);
__d("goURIWWW",["URI"],(function(a,b,c,d,e,f,g){"use strict";var h;g["default"]=(h||c("URI")).go}),98);/*FB_PKG_DELIM*/
__d("IGDUncaughtErrorState.react",["FBLogger","PolarisHttp500UnexpectedErrorPage.react","cr:8915","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useEffect;function k(a){if(b("cr:8915")!=null&&a!=null&&a instanceof b("cr:8915").ReStoreDbVersionChange){c("FBLogger")("igd_web").info(a);return}c("FBLogger")("igd_web").catching(a).mustfix("Uncaught Error while loading chat: %s",a.toString())}function a(a){var b=d("react-compiler-runtime").c(7),e=a.description,f=a.error,g=a.header;a=a.onPress;var h,l;b[0]!==f?(h=function(){k(f)},l=[f],b[0]=f,b[1]=h,b[2]=l):(h=b[1],l=b[2]);j(h,l);h=e!=null?e:void 0;l=g!=null?g:void 0;b[3]!==a||b[4]!==h||b[5]!==l?(e=i.jsx(c("PolarisHttp500UnexpectedErrorPage.react"),{description:h,header:l,onClick:a}),b[3]=a,b[4]=h,b[5]=l,b[6]=e):e=b[6];return e}g["default"]=a}),98);
__d("IGDInboxErrorState.react",["IGDUncaughtErrorState.react","cr:9977","react","react-compiler-runtime","useCurrentDisplayMode"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useMemo;function a(a){var e=d("react-compiler-runtime").c(10);a=a.error;var f;f=a;f=f;var g=c("useCurrentDisplayMode")(),h;e[0]!==a||e[1]!==g?(h=b("cr:9977")==null?void 0:b("cr:9977")(a,g),e[0]=a,e[1]=g,e[2]=h):h=e[2];g=h;h=g;if(h!=null){g=(g=h.action)==null?void 0:g.onPress;var j;e[3]!==h.body||e[4]!==h.headline||e[5]!==f||e[6]!==g?(j=i.jsx(c("IGDUncaughtErrorState.react"),{description:h.body,error:f,header:h.headline,onPress:g}),e[3]=h.body,e[4]=h.headline,e[5]=f,e[6]=g,e[7]=j):j=e[7];return j}else{e[8]!==a?(h=i.jsx(c("IGDUncaughtErrorState.react"),{error:a}),e[8]=a,e[9]=h):h=e[9];return h}}g["default"]=a}),98);
__d("LSPlatformArmadilloUtils",["MAWMIC","MAWMICSchema","Promise","cr:6998","cr:7349","promiseDone","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("MAWThreadConsistencyLogger").__setRef("LSPlatformArmadilloUtils"),k=(h=b("cr:6998"))!=null?h:b("cr:7349"),l=[];function a(a){l.push(a)}function e(){k==null?void 0:k.completeSync();void j.load().then(function(a){return a.startMAWThreadConsistencyLogger()});if(l.length===0){k==null?void 0:k.maybeEndOccamadilloThreadMapping();return}c("promiseDone")((i||(i=b("Promise"))).allSettled(l.map(function(a){return a()})),function(){return k==null?void 0:k.maybeEndOccamadilloThreadMapping()})}function f(){d("MAWMIC").addPoint("ls_init_end")}function m(){d("MAWMIC").addPoint("ls_init_start")}function n(){d("MAWMIC").addPoint("ls_sync_start")}function o(){d("MAWMIC").addPoint(d("MAWMICSchema").POINTS.ls_sync_end)}function p(a){d("MAWMIC").fail("init_sync_failure",a)}g.executeOnThreadMappingEnd=a;g.occamadilloInitEnd=e;g.reportInitEnd=f;g.reportInitStart=m;g.reportSyncStart=n;g.reportSyncEnd=o;g.reportInitSyncFailure=p}),98);
__d("LSPlatformClientSingleton",[],(function(a,b,c,d,e,f){"use strict";var g={contents:void 0};function a(a){g.contents=a}f.saveInstance=a}),66);
__d("isRegisterArmadilloOnIgEnabled",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("26380")===!0}g["default"]=a}),98);
__d("maybeSetupMAWMainThreadLogger",["MessengerLogHistory","cr:6999","cr:7350","isArmadillo","isRegisterArmadilloOnIgEnabled"],(function(a,b,c,d,e,f,g){"use strict";var h=d("MessengerLogHistory").getInstance("client_init"),i=(a=b("cr:6999"))!=null?a:b("cr:7350");e=function(){i!=null&&(c("isArmadillo")()||c("isRegisterArmadilloOnIgEnabled")())&&(h.debug("Starting MAW main thread logger setup..."),i.setupMainWaLogger(),h.debug("Starting MAW main thread logger setup success"))};g.maybeSetupMAWMainThreadLogger=e}),98);
__d("LSPlatformClientInstances",["ExecutionEnvironment","FBLogger","LSLocalize","LSPlatformArmadilloUtils","LSPlatformClientSingleton","LSPlatformLsInitLog","LSSuspense","MAWLoggerUtils","MAWMIC","MessengerLogHistory","PromiseAnnotate","asyncToGeneratorRuntime","cr:19622","getErrorSafe","maybeSetupMAWMainThreadLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b("LSLocalize");d("MAWLoggerUtils").initMessengerWebLogging();var k=d("MessengerLogHistory").getInstance("client_init"),l=(j||(j=c("LSSuspense"))).makeCollection(),m=!1;function a(a,e,f){d("MAWMIC").startMAWMICFlow();m||(k.debug("[Occamadillo] Beginning hardcoded init sync"),m=!0,d("maybeSetupMAWMainThreadLogger").maybeSetupMAWMainThreadLogger());d("LSPlatformArmadilloUtils").reportInitStart();var g=function(a){a=c("getErrorSafe")(a);k.debug("Initializing LSPlatformClient failed");d("LSPlatformLsInitLog").fail("client_setup_failure",a);d("MAWMIC").fail("client_setup_failure",a);c("FBLogger")("messenger_web").catching(a).warn("[LS] LSPlatformClient initialization failure");throw a};return(j||(j=c("LSSuspense"))).getFromCollection(l,a,function(){return(h||(h=d("PromiseAnnotate"))).setDisplayName(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("LSPlatformLsInitLog").addAnnotations({bool:{canUseDOM:(i||(i=c("ExecutionEnvironment"))).canUseDOM,fromReact:f==null?void 0:f.fromReact},string:{configAppId:a.appId,configPlatformName:a.platformName}});k.debug("Messenger loading UI suspending");try{var h=b("cr:19622")!=null?yield b("cr:19622").maybeEvaluateInitSyncEagerly(a):!1;if(!(i||(i=c("ExecutionEnvironment"))).isInBrowser)return yield a.getDb();h=e(a,{didEvaluateInitSyncEagerly:h}).then(function(a){d("LSPlatformLsInitLog").addPoint("start_client");return a.start().then(function(){k.debug("Initializing LSPlatformClient success");d("LSPlatformClientSingleton").saveInstance(a);d("LSPlatformArmadilloUtils").reportInitEnd();return a.db})});return yield h}catch(a){g(a)}finally{k.debug("Messenger loading UI unsuspending")}})(),"InitLSPlatformClient")})}e={getOrInit:a};g["default"]=e}),98);
__d("LSPlatformClientProviderAddons.react",["CometPlaceholder.react","cr:6495","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(){return i.jsx(c("CometPlaceholder.react"),{fallback:null,name:"LSPlatformClientProviderAddons",children:b("cr:6495")!=null&&i.jsx(b("cr:6495"),{})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSPlatformErrorsCatcher.react",["MetaConfig","cr:7070","react"],(function(a,b,c,d,e,f,g){"use strict";var h;h||(h=d("react"));e=h;var i=e.useEffect,j=e.useState;function a(a){var d=a.children;a=a.fallback;var e=j(null),f=e[0],g=e[1];i(function(){var a=b("cr:7070")&&b("cr:7070").subscribe(function(a){g(a)});return function(){a&&a()}},[]);e=(e=b("cr:7070")==null?void 0:b("cr:7070").lastError())!=null?e:f;if(c("MetaConfig")._("66")&&e!=null&&a!=null)return a(e);else return d}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWCondSetup.react",["cr:3921","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");f=c("gkx")("20836")?a.Fragment:(e=b("cr:3921"))!=null?e:a.Fragment;d=f;g["default"]=d}),98);
__d("MAWSetupWrapperOnce.react",["CometPlaceholder.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext,k=i.createContext(!1);function a(a){var b=a.children;a=a.setupComponent;var d=j(k);return d?b:i.jsxs(k.Provider,{value:!0,children:[b,i.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MAWSetupWrapperOnce",children:a})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWCondWrapper.react",["MAWCondSetup.react","MAWSetupWrapperOnce.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){a=a.children;return i.jsx(c("MAWSetupWrapperOnce.react"),{setupComponent:i.jsx(c("MAWCondSetup.react"),{}),children:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSPlatformClientProvider.react",["CometDOMOnlyBoundary.react","CometPlaceholder.react","LSPlatformClientInstances","LSPlatformClientProviderAddons.react","LSPlatformErrorsCatcher.react","LSSuspense","MAWCondWrapper.react","ReStoreProvider.react","gkx","qex","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||d("react");function l(a,b){a=(h||(h=c("LSSuspense"))).getOrSuspend(a);return c("LSPlatformClientInstances").getOrInit(a,b,{fromReact:!0})}function m(a){var b=a.children,c=a.config;a=a.loadLSPlatformClient;c=l(c,a);return c!=null?k.jsx((i||(i=d("ReStoreProvider.react"))).ReStoreProvider,{db:c,children:b}):b}m.displayName=m.name+" [from "+f.id+"]";function a(a){var b=a.children,d=a.config,e=a.errorFallback,f=a.loadLSPlatformClient;a=a.placeholder;e=k.jsx(c("LSPlatformErrorsCatcher.react"),{fallback:e,children:k.jsx(c("MAWCondWrapper.react"),{children:k.jsx(c("CometPlaceholder.react"),{fallback:a,name:"LSPlatformClientProvider.ClientProvider",children:k.jsxs(m,{config:d,loadLSPlatformClient:f,children:[k.jsx(c("LSPlatformClientProviderAddons.react"),{}),k.jsx(c("CometPlaceholder.react"),{fallback:a,name:"LSPlatformClientProvider.UISuspense",children:b})]})})})});return c("gkx")("12254")&&!c("qex")._("3809")?k.jsx(c("CometDOMOnlyBoundary.react"),{children:e}):e}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSPlatformClientProviderWithDeferredLoadingStrategy.react",["LSPlatformClientProvider.react","LSPlatformLsInitLog","asyncToGeneratorRuntime","cr:2542","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function j(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){d("LSPlatformLsInitLog").addPoint("load_ls_platform_client");var e=(yield b("cr:2542").load());d("LSPlatformLsInitLog").addPoint("load_ls_platform_client_loaded");return e.make(a,c)});return k.apply(this,arguments)}function a(a){var b=a.children,d=a.config,e=a.errorFallback;a=a.placeholder;return i.jsx(c("LSPlatformClientProvider.react"),{config:d,errorFallback:e,loadLSPlatformClient:j,placeholder:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSCometSSRDatabase",["LSJSInMemoryStorage","LSMetadata"],(function(a,b,c,d,e,f,g){"use strict";a=c("LSJSInMemoryStorage")(d("LSMetadata").schema);g["default"]=a}),98);
__d("LSClearEpochBeforeResumeSync",["Promise","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return a.runInTransaction(function(a){var c;return(c=d("ReQL")).toArrayAsync(c.mergeJoin(c.fromTableAscending(a.sync_groups),c.fromTableAscending(a.network_requests).getKeyRange(""))).then(function(c){return(h||(h=b("Promise"))).all(c.map(function(b){b=b[1];return a.network_requests.put({epochId:void 0,failureCount:b.failureCount,lastDelayedRequestTimestampMs:b.lastDelayedRequestTimestampMs,lastSentTimestampMs:b.lastSentTimestampMs,lastSyncRequestTimestampMs:b.lastSyncRequestTimestampMs,networkTaskIdentifier:b.networkTaskIdentifier,syncDatabaseId:b.syncDatabaseId,taskQueueName:b.taskQueueName})}))}).then(function(){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.network_requests).filter(function(a){return a.taskQueueName!==""})).then(function(c){return(h||(h=b("Promise"))).all(c.map(function(b){return a.network_requests.put({epochId:void 0,failureCount:b.failureCount,lastDelayedRequestTimestampMs:b.lastDelayedRequestTimestampMs,lastSentTimestampMs:b.lastSentTimestampMs,lastSyncRequestTimestampMs:b.lastSyncRequestTimestampMs,networkTaskIdentifier:b.networkTaskIdentifier,syncDatabaseId:b.syncDatabaseId,taskQueueName:b.taskQueueName})}))})})},"readwrite","ui",void 0,f.id+":17").then(function(){return(h||(h=b("Promise"))).resolve()})}g.call=a}),98);
__d("LSDatabaseAfterInitSyncSingleton",["Deferred","PromiseAnnotate"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new(c("Deferred"))();a=function(a){void a.then(function(a){return i.resolve(a)})};b=(h||(h=d("PromiseAnnotate"))).setDisplayName(i.getPromise(),"LSDatabaseSingletonAfterInitSync");e=function(){return i.isSettled()};g.resolveInitSync=a;g.LSDatabaseAfterInitSyncSingleton=b;g.isInitSyncResolved=e}),98);
__d("LSPlatformGraphQLTransport",["FBLogger","I64","LSDynamicDependencies","LSProgramTarget","MessengerLogHistory","Promise","asyncToGeneratorRuntime","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j="LSPlatformGraphQLTransport.ServerError";function a(a,b,c,d,e){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,k){var l=d("MessengerLogHistory").getInstance("client_sync"),m=null;try{m=(yield k(a,e,g,(i||(i=d("I64"))).to_int32(f)))}catch(a){k=c("FBLogger")("messenger_web");a instanceof Error&&(l.error("Error sending Graphql Request. Type: "+(i||(i=d("I64"))).to_string(f)+" Message: "+(a.message!=null?a.message:"None")),k=k.catching(a),k.debug("Relay or Graphql Server error in LSPlatformGraphqlTransport"));throw k.mustfixThrow(j)}a=c("nullthrows")(m);e=a.dependencies;g=a.experiments;l=a.payload;var n=a.target;f=c("nullthrows")(l);k=e==null?(h||(h=b("Promise"))).resolve():d("LSDynamicDependencies").downloadRelayDependencies(e);m=Array.from(c("LSProgramTarget").members()).find(function(a){return c("LSProgramTarget").getName(a)===n});return[k,f,g,m]});return k.apply(this,arguments)}g.ServerError=j;g.publish=a}),98);
__d("LSPlatformHardcodedInitSync",["CurrentMessengerUser","FBLogger","I64","IGDWebUtils","LSDatabaseAfterInitSyncSingleton","LSDatabaseProviderType","LSDict","LSIntEnum","LSJson","LSPlatformArmadilloUtils","LSPlatformGraphQLTransport","LSPlatformLsInitLog","MWPBumpEntityKey","MetaConfig","Promise","QuickPerformanceLogger","ReQL","asyncToGeneratorRuntime","getErrorSafe","gkx","isArmadillo","isInstamadillo","isRegisterArmadilloOnIgEnabled","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=c("isArmadillo")()||c("isRegisterArmadilloOnIgEnabled")()&&!c("isInstamadillo")(),m=!d("CurrentMessengerUser").isWorkUser()&&!d("IGDWebUtils").isOnInstagramWeb(),n=[1,l?95:null,m?104:null].filter(Boolean);function o(a){return a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return(k||(k=b("Promise"))).all(n.map(function(b){return a.network_requests.put({epochId:void 0,failureCount:(i||(i=d("I64"))).zero,lastDelayedRequestTimestampMs:void 0,lastSentTimestampMs:i.zero,lastSyncRequestTimestampMs:i.zero,networkTaskIdentifier:void 0,syncDatabaseId:(j||(j=d("LSIntEnum"))).ofNumber(b),taskQueueName:""})}))});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":62").then(function(){return(k||(k=b("Promise"))).resolve()})}function p(a,b){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.network_requests).getKeyRange("",(j||(j=d("LSIntEnum"))).ofNumber(b)))}function q(a){return a.runInTransaction(function(a){return(k||(k=b("Promise"))).all(n.map(function(c){return p(a,c).then(function(c){return c!=null?a.network_requests.put({epochId:(i||(i=d("I64"))).zero,failureCount:c.failureCount,lastDelayedRequestTimestampMs:c.lastDelayedRequestTimestampMs,lastSentTimestampMs:c.lastSentTimestampMs,lastSyncRequestTimestampMs:c.lastSyncRequestTimestampMs,networkTaskIdentifier:c.networkTaskIdentifier,syncDatabaseId:c.syncDatabaseId,taskQueueName:c.taskQueueName}):(k||(k=b("Promise"))).resolve()})})).then(function(){})},"readwrite","ui",void 0,f.id+":97")}function r(a){if(d("LSDatabaseProviderType").isProviderPersisted(a)&&c("MetaConfig")._("76"))return a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield p(a,1));b!=null&&(yield a.network_requests.put({epochId:void 0,failureCount:b.failureCount,lastDelayedRequestTimestampMs:b.lastDelayedRequestTimestampMs,lastSentTimestampMs:b.lastSentTimestampMs,lastSyncRequestTimestampMs:b.lastSyncRequestTimestampMs,networkTaskIdentifier:b.networkTaskIdentifier,syncDatabaseId:b.syncDatabaseId,taskQueueName:b.taskQueueName}))});return function(b){return a.apply(this,arguments)}}(),"readwrite","ui",void 0,f.id+":130");else return(k||(k=b("Promise"))).resolve()}function s(a){d("CurrentMessengerUser").isWorkUser()&&(h||(h=c("QuickPerformanceLogger"))).markerPoint(c("qpl")._(1036588047,"310"),a)}function t(a,b){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.sync_groups).getKeyRange((j||(j=d("LSIntEnum"))).ofNumber(b)))}function u(a,b,e,f){return new(c("LSDict"))().set("database",(j||(j=d("LSIntEnum"))).ofNumber(a)).set("epoch_id",(i||(i=d("I64"))).zero).set("last_applied_cursor",e).set("sync_params",f!=null?f:"{}").set("version",i.of_string(b))}function v(a){var b=0,c=0,e=function(e){c++;c===a&&d("LSPlatformLsInitLog").addPoint("gql_fetch_end");b===0&&d("LSPlatformLsInitLog").addPoint("gql_deps_start");return e.then(function(){b===0&&(d("LSPlatformLsInitLog").addPoint("ls_sync_execute_start"),d("LSPlatformLsInitLog").LsSync.markStart()),b++,b===a&&d("LSPlatformLsInitLog").addPoint("gql_deps_end")})};return e}var w=function(){return[(k||(k=b("Promise"))).resolve(),"",void 0,void 0]};function a(a,b,c,d){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){try{var i=d("CurrentMessengerUser").isWorkUser();yield q(f);var n=[1,l?95:void 0,m?104:void 0];n=(yield (k||(k=b("Promise"))).all(n.map(function(a){return a!=null?t(f,a):void 0})));var p=n[0],x=n[1];n=n[2];p=p==null?void 0:p.currentCursor;x=x==null?void 0:x.currentCursor;n=n==null?void 0:n.currentCursor;var y=u(1,a.schemaVersion,p,a.syncParams.mailbox),z=u(95,a.schemaVersion,x,a.syncParams.e2ee),A=u(104,a.schemaVersion,n,a.syncParams.communityExclusive),B={string:{mailboxSync:p!=null?"resume":"init"}};i&&(h||(h=c("QuickPerformanceLogger"))).markerAnnotate(c("qpl")._(1036588047,"310"),B);d("LSPlatformLsInitLog").addPoint("ls_sync_start",B);d("LSPlatformArmadilloUtils").reportSyncStart();d("LSPlatformLsInitLog").addPoint("gql_fetch_start");s("start_contact");s("start_mailbox");var C=v(1+(l?1:0)+(m?1:0));i=d("LSPlatformGraphQLTransport").publish(g,0,p!=null?(j||(j=d("LSIntEnum"))).ofNumber(2):(j||(j=d("LSIntEnum"))).ofNumber(1),d("LSJson").stringify(y),a.executeGraphQLLightSpeedRequest).then(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){s("mailbox_synced");d("LSPlatformLsInitLog").addPoint("gql_mailbox_fetch_end");yield C(a[0]);return a});return function(b){return a.apply(this,arguments)}}())["catch"](function(a){var b;d("LSPlatformArmadilloUtils").reportInitSyncFailure(a);d("LSPlatformLsInitLog").addPoint("gql_mailbox_fetch_failed",{string:{gql_mailbox_fetch_fail_reason:(b=a.message)!=null?b:"unknown"}});c("FBLogger")("messenger_web").catching(a).mustfix("Failed to sync mailbox");return w()});B=l?d("LSPlatformGraphQLTransport").publish(g,2,x!=null?(j||(j=d("LSIntEnum"))).ofNumber(2):(j||(j=d("LSIntEnum"))).ofNumber(1),d("LSJson").stringify(z),a.executeGraphQLLightSpeedRequest).then(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("LSPlatformLsInitLog").addPoint("gql_e2ee_fetch_end");yield C(a[0]);return a});return function(b){return a.apply(this,arguments)}}())["catch"](function(a){var b;d("LSPlatformArmadilloUtils").reportInitSyncFailure(a);d("LSPlatformLsInitLog").addPoint("gql_e2ee_fetch_failed",{string:{gql_e2ee_fetch_fail_reason:(b=a.message)!=null?b:"unknown"}});c("FBLogger")("messenger_web").catching(a).mustfix("Failed to sync e2ee mailbox");return w()}):(k||(k=b("Promise"))).resolve(w());y=m?d("LSPlatformGraphQLTransport").publish(g,3,n!=null?(j||(j=d("LSIntEnum"))).ofNumber(2):(j||(j=d("LSIntEnum"))).ofNumber(1),d("LSJson").stringify(A),a.executeGraphQLLightSpeedRequest).then(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("LSPlatformLsInitLog").addPoint("gql_cm_fetch_end");yield C(a[0]);return a});return function(b){return a.apply(this,arguments)}}())["catch"](function(a){var b;d("LSPlatformArmadilloUtils").reportInitSyncFailure(a);d("LSPlatformLsInitLog").addPoint("gql_cm_fetch_failed",{string:{gql_cm_fetch_fail_reason:(b=a.message)!=null?b:"unknown"}});c("FBLogger")("messenger_web").catching(a).mustfix("Failed to sync Community Exclusive mailbox");return w()}):(k||(k=b("Promise"))).resolve(w());if(c("gkx")("10695"))yield (k||(k=b("Promise"))).all([B,i,y].map(function(a){return a.then(function(a){a[0];var b=a[1],c=a[2];a=a[3];if(b==="")return;return e({experiments:c,priority:"ui",syncScript:b,target:a})})}));else{x=(yield (k||(k=b("Promise"))).all([i,B,y]));for(z of x){z[0];g=z[1];n=z[2];A=z[3];if(g==="")continue;yield e({experiments:n,priority:"ui",syncScript:g,target:A})}}p!=null&&(yield r(f));d("LSPlatformLsInitLog").LsSync.markEnd();s("sync_completed");d("LSPlatformLsInitLog").addPoint("ls_sync_execute_end");d("LSPlatformArmadilloUtils").reportSyncEnd();d("LSPlatformLsInitLog").addPoint("ls_sync_end");l&&d("LSPlatformArmadilloUtils").occamadilloInitEnd();d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw_graphql","init_sync.success");d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw_ls","init_sync.success");d("LSDatabaseAfterInitSyncSingleton").resolveInitSync(k.resolve(f))}catch(b){a=c("getErrorSafe")(b);d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw_ls","init_sync.fail");s("sync_failed");d("LSPlatformLsInitLog").fail("init_sync_failure");try{d("LSPlatformArmadilloUtils").reportInitSyncFailure(a)}catch(a){}c("FBLogger")("messenger_web").catching(a).mustfix("Encountered an error while performining preloaded init sync request via graphql");return o(f)}});return x.apply(this,arguments)}g.sendHardcodedInitSync=a}),98);
__d("LSPlatformSyncSystemMaybeDeferred",["cr:2049","cr:6963"],(function(a,b,c,d,e,f,g){"use strict";c=(a=b("cr:2049"))!=null?a:b("cr:6963");d=c;g["default"]=d}),98);
__d("LSPlatformClientInit",["LSClearEpochBeforeResumeSync","LSDataTraceFlushDeferred","LSDatabaseAfterInitSyncSingleton","LSDeleteAllAndInsertConnectivityStatusStoredProcedure","LSFactory","LSIntEnum","LSInternetConnectionState","LSPlatformHardcodedInitSync","LSPlatformLsInitLog","LSPlatformRealtimeTransport","LSPlatformSyncSystemMaybeDeferred","LSPlatformTaskSystemTransport","MWPlatformTaskSystem","MessengerLogHistory","Promise","asyncToGeneratorRuntime","cr:3411","cr:7705","emptyFunction","gkx","promiseDone","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=d("MessengerLogHistory").getInstance("client_init");function k(a){var d=c("emptyFunction");b("cr:7705")!=null&&c("gkx")("23914")&&(d=b("cr:7705").listenForChangesToBackupState(a));return function(){d&&d()}}function l(a,b){var e=b==="Connected"?(i||(i=d("LSIntEnum"))).ofNumber(c("LSInternetConnectionState").CONNECTED):(i||(i=d("LSIntEnum"))).ofNumber(c("LSInternetConnectionState").NOT_CONNECTED);j.debug("Platform client sync connection status: ",b);c("promiseDone")(a.runInTransaction(function(a){return c("LSDeleteAllAndInsertConnectivityStatusStoredProcedure")(c("LSFactory")(a),{internetConnectionState:e})},"readwrite",void 0,void 0,f.id+":76"),function(){j.debug("Platform client sync connection status set successfully")},function(a){j.error("Platform client sync connection status set failed: "+(a==null?void 0:a.message));throw a})}function a(a,b,c,d,e,f){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,i,m){var n;j.debug("Platform client sync starting...");(n=d("LSPlatformLsInitLog")).addPoint("onstart_callback");g();n.addPoint("onstart_callback_end");j.debug("Getting datascript evaluator...");n.addPoint("ds_eval_registration");g=(yield e.getEval());j.debug("Getting datascript evaluator success");var o;try{o=b("cr:3411")!=null?b("cr:3411").registerEval(g)()(a):g()(a)}catch(b){c("recoverableViolation")("fail to register datascriptEvaluator","ls_web_init",{error:b}),o=g()(a)}d("LSPlatformLsInitLog").addPoint("ds_eval_registration_end");j.debug("Clearing epoch before resume sync...");m.didEvaluateInitSyncEagerly||(yield d("LSClearEpochBeforeResumeSync").call(a),j.debug("Clearing epoch before resume sync success"),d("LSPlatformLsInitLog").addPoint("create_client_end"),e.sendHardcodedInitSync&&(j.debug("Starting hard-coded init sync..."),yield d("LSPlatformHardcodedInitSync").sendHardcodedInitSync(e,o,a,f),j.debug("Starting hard-coded init sync success")));d("LSDatabaseAfterInitSyncSingleton").resolveInitSync((h||(h=b("Promise"))).resolve(a));j.debug("Starting realtime transport");n=(yield e.realtimeUnderylingTransport());var p=d("LSPlatformRealtimeTransport").LSPlatformRealtimeTransport(n,e.appId,f);j.debug("Starting task system");var q=new(c("MWPlatformTaskSystem"))(a,new(c("LSPlatformTaskSystemTransport"))(a,p,o,e.schemaVersion));j.debug("Starting sync system");var r=null;c("promiseDone")(c("LSPlatformSyncSystemMaybeDeferred")(),function(b){r=b(a,p,o,e.schemaVersion,f,e.executeGraphQLLightSpeedRequest)});j.debug("Starting backup state listeners");var s=k(a),t;j.debug("Watching for expired traces");c("promiseDone")(d("LSDataTraceFlushDeferred").watchForExpiredTraces(a).then(function(a){t=a}));j.debug("Subscribing to mqtt sync status change events");p.onConnectionStatusChange(function(b){l(a,b)});j.debug("Platform client sync starting sucess");d("LSPlatformLsInitLog").endSuccess();return{cleanup:function(){var b;j.debug("Platform client sync cleaning up");i(a);q==null?void 0:q.cleanup();(b=r)==null?void 0:b.cleanup();p.cleanup();s();t==null?void 0:t()},db:a}});return m.apply(this,arguments)}g.init=a}),98);
__d("LSPlatformClient",["ExecutionEnvironment","FBLogger","LSCometSSRDatabase","LSDatabaseProviderType","LSPlatformClientInit","LSPlatformDeviceId","LSPlatformLsInitLog","MAWMIC","MAWMICSchema","Promise","asyncToGeneratorRuntime","cr:10018","emptyFunction","getErrorSafe","qex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("emptyFunction").thatReturns((i||(i=b("Promise"))).resolve());function k(a,e,f){var g,h=function(){var h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=d("LSPlatformDeviceId").getDeviceIdForProviderType("ephemeral");g=(yield d("LSPlatformClientInit").init(a,e,b,c("emptyFunction"),c("emptyFunction"),f))});return function(){return h.apply(this,arguments)}}();return{cleanup:function(){var a;(a=g)==null?void 0:a.cleanup()},db:a,start:h}}function l(a,b,c){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){if(b("cr:10018")==null)throw c("FBLogger")("messenger_web").mustfixThrow("LSPlatformClientWithLock is null for PDB enabled");e=(yield b("cr:10018").make(a,e,f));e.isTabWithoutClient()===!0&&(d("MAWMIC").addPoint("ls_init_end"),d("MAWMIC").addPoint(d("MAWMICSchema").POINTS.thread_mapping_end),d("MAWMIC").addBoolAnnotation("LsInitSkipped",!0),d("LSPlatformLsInitLog").addPoint("no_ls_sync"),d("LSPlatformLsInitLog").endSuccess());return{cleanup:c("emptyFunction"),db:a,start:j}});return m.apply(this,arguments)}function a(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){d("LSPlatformLsInitLog").addPoint("make_client");if((h||(h=c("ExecutionEnvironment"))).canUseDOM||c("qex")._("3809")){d("LSPlatformLsInitLog").addPoint("create_client_get_db");var f=(yield a.getDb());d("LSPlatformLsInitLog").addPoint("create_client_start");if(d("LSDatabaseProviderType").isProviderPersisted(f)&&b("cr:10018")!==null)try{return l(f,a,e)}catch(a){d("LSPlatformLsInitLog").addAnnotations({string:{client_for_pdb_error:c("getErrorSafe")(a).message}});d("LSPlatformLsInitLog").fail("client_for_pdb_error");throw a}return k(f,a,e)}return{cleanup:c("emptyFunction"),db:c("LSCometSSRDatabase"),start:j}});return n.apply(this,arguments)}g.make=a}),98);
__d("LSPlatformClientProviderWithImmediateLoadingStrategy.react",["LSPlatformClient","LSPlatformClientProvider.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.children,e=a.config,f=a.errorFallback;a=a.placeholder;return i.jsx(c("LSPlatformClientProvider.react"),{config:e,errorFallback:f,loadLSPlatformClient:d("LSPlatformClient").make,placeholder:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSPlatformGraphQLLightspeedRequestForIGDQuery.graphql",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"deviceId"},{defaultValue:null,kind:"LocalArgument",name:"requestId"},{defaultValue:null,kind:"LocalArgument",name:"requestPayload"},{defaultValue:null,kind:"LocalArgument",name:"requestType"}],b=[{alias:null,args:[{kind:"Variable",name:"device_id",variableName:"deviceId"},{kind:"Variable",name:"request_id",variableName:"requestId"},{kind:"Variable",name:"request_payload",variableName:"requestPayload"},{kind:"Variable",name:"request_type",variableName:"requestType"}],concreteType:"LightspeedWebResponse",kind:"LinkedField",name:"lightspeed_web_request_for_igd",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"payload",storageKey:null},{alias:null,args:null,concreteType:"LightspeedWebRequestDependency",kind:"LinkedField",name:"dependencies",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"experiments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"target",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"LSPlatformGraphQLLightspeedRequestForIGDQuery",selections:b,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"LSPlatformGraphQLLightspeedRequestForIGDQuery",selections:b},params:{id:"29212911238354531",metadata:{},name:"LSPlatformGraphQLLightspeedRequestForIGDQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("LSPlatformGraphQLLightspeedRequestForIGD",["CometRelay","LSPlatformGraphQLLightspeedRequestForIGDQuery.graphql","XPlatRelayEnvironment"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,c,e,f){return d("CometRelay").fetchQuery(d("XPlatRelayEnvironment").getRelayEnvironment(),h!==void 0?h:h=b("LSPlatformGraphQLLightspeedRequestForIGDQuery.graphql"),{deviceId:a,requestId:c,requestPayload:e,requestType:f}).toPromise().then(function(a){return a==null?void 0:a.lightspeed_web_request_for_igd})}g["default"]=a}),98);
__d("LSPlatformInstagramConfig",["CurrentAppID","IGDOverLSMqttChannel","LSDatabaseSingleton","LSDatascriptEvaluatorMaybeDeferred","LSPlatformGraphQLLightspeedRequestForIGD","LSPlatformMessengerSyncParams","LSPlatformMqttRealtimeTransport","LSSuspense","LSVersion","Promise","getMWLSRegion"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;f=d("CurrentAppID").getAppID();var k=c("getMWLSRegion")();f=f==null?"1217981644879628":f;function a(){return(j||(j=d("LSDatabaseSingleton"))).LSDatabaseSingleton}function l(a,b){return c("LSPlatformMqttRealtimeTransport")(c("LSVersion"),b,{getInstance:d("IGDOverLSMqttChannel").getInstance,shutdownAndClear:d("IGDOverLSMqttChannel").shutdownAndClear})}function e(){return c("LSDatascriptEvaluatorMaybeDeferred")()}f={appId:f,executeGraphQLLightSpeedRequest:c("LSPlatformGraphQLLightspeedRequestForIGD"),getDb:a,getEval:e,platformName:"Instagram",realtimeUnderylingTransport:function(){return(i||(i=b("Promise"))).resolve(l)},region:k,schemaVersion:c("LSVersion"),sendHardcodedInitSync:!0,syncParams:c("LSPlatformMessengerSyncParams")};a=(h||(h=c("LSSuspense"))).makeWithValue(f);g.configEagerlyLoaded=a}),98);
__d("IGDPageSetup.react",["CometErrorBoundary.react","CometPlaceholder.react","CurrentUser","I64","IGDRouteProvider.react","LSPlatformClientProviderWithDeferredLoadingStrategy.react","LSPlatformClientProviderWithImmediateLoadingStrategy.react","LSPlatformInstagramConfig","MWLSThreadDisplayContext","MWPActor.react","cr:497","cr:7347","deferredLoadComponent","react","react-compiler-runtime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react")),k=h.Fragment,l=(e=b("cr:497"))!=null?e:b("cr:7347"),m=c("deferredLoadComponent")(c("requireDeferred")("IGDInboxErrorState.react").__setRef("IGDPageSetup.react")),n=function(a){return a?void 0:function(a){return j.jsx(m,{error:a})}},o=(i||(i=d("I64"))).of_string(c("CurrentUser").getEIMU());function a(a){var b=d("react-compiler-runtime").c(15),e=a.children,f=a.disableRouteProvider,g=a.placeholder,h=a.shouldUseDeferredLoadingStrategy;a=a.threadDisplayType;f=f===void 0?!1:f;g=g===void 0?null:g;h=h===void 0?!1:h;var i=h?c("LSPlatformClientProviderWithDeferredLoadingStrategy.react"):c("LSPlatformClientProviderWithImmediateLoadingStrategy.react");f=f?k:d("IGDRouteProvider.react").IGDRouteContextProvider;var m;b[0]!==h?(m=n(h),b[0]=h,b[1]=m):m=b[1];b[2]!==e?(h=l==null?e:j.jsx(l,{children:e}),b[2]=e,b[3]=h):h=b[3];b[4]!==h||b[5]!==a?(e=j.jsx(d("MWLSThreadDisplayContext").MWLSThreadDisplayContextProvider,{value:a,children:h}),b[4]=h,b[5]=a,b[6]=e):e=b[6];b[7]!==f||b[8]!==e?(h=j.jsx(d("MWPActor.react").MWPActorProvider,{actorId:o,children:j.jsx(f,{children:e})}),b[7]=f,b[8]=e,b[9]=h):h=b[9];b[10]!==i||b[11]!==g||b[12]!==m||b[13]!==h?(a=j.jsx(c("CometErrorBoundary.react"),{fallback:void 0,children:j.jsx(c("CometPlaceholder.react"),{fallback:null,children:j.jsx(i,{config:d("LSPlatformInstagramConfig").configEagerlyLoaded,errorFallback:m,placeholder:g,children:h})})}),b[10]=i,b[11]=g,b[12]=m,b[13]=h,b[14]=a):a=b[14];return a}g["default"]=a}),98);
__d("IGDSVideoChatFilled24Icon.react",["IGDSSVGIconBase.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(3),e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsx("path",{d:"M21.259 5.935q-.401.404-.877.88a2.998 2.998 0 0 0-.88 2.121v6.18a3 3 0 0 0 .878 2.121l.879.881A1.653 1.653 0 0 0 24 16.953V7.101a1.653 1.653 0 0 0-2.742-1.166Zm-7.075-3.408H3.818A3.823 3.823 0 0 0-.001 6.345v11.364a3.823 3.823 0 0 0 3.819 3.818h10.366a3.823 3.823 0 0 0 3.818-3.818V6.345a3.823 3.823 0 0 0-3.818-3.818Z",fillRule:"evenodd"}),b[0]=e):e=b[0];b[1]!==a?(e=i.jsx(c("IGDSSVGIconBase.react"),babelHelpers["extends"]({},a,{viewBox:"0 0 24 24",children:e})),b[1]=a,b[2]=e):e=b[2];return e}b=i.memo(a);g["default"]=b}),98);
__d("MessengerCreateVideoMeetupLinkMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9685249484907022"}),null);
__d("MessengerCreateVideoMeetupLinkMutation.graphql",["MessengerCreateVideoMeetupLinkMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"CreateVideoMeetupLinkResponsePayload",kind:"LinkedField",name:"create_video_meetup_link",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerCallInviteLink",kind:"LinkedField",name:"meetup_link",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link_hash",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_audio_only",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MessengerCreateVideoMeetupLinkMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MessengerCreateVideoMeetupLinkMutation",selections:c},params:{id:b("MessengerCreateVideoMeetupLinkMutation_facebookRelayOperation"),metadata:{},name:"MessengerCreateVideoMeetupLinkMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("MessengerCreateVideoMeetupLinkMutation",["MessengerCreateVideoMeetupLinkMutation.graphql","Promise","cr:1012418","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,d,e){return new(i||(i=b("Promise")))(function(f,g){var i;b("cr:1012418").commitMutation(a,{mutation:h!==void 0?h:h=b("MessengerCreateVideoMeetupLinkMutation.graphql"),onCompleted:function(a){var b,c,d;b=a==null?void 0:(b=a.create_video_meetup_link)==null?void 0:(b=b.meetup_link)==null?void 0:b.is_audio_only;c=a==null?void 0:(c=a.create_video_meetup_link)==null?void 0:(c=c.meetup_link)==null?void 0:c.link_url;d=a==null?void 0:(d=a.create_video_meetup_link)==null?void 0:(d=d.meetup_link)==null?void 0:d.link_hash;a=a==null?void 0:(a=a.create_video_meetup_link)==null?void 0:(a=a.meetup_link)==null?void 0:a.id;return c!=null&&d!=null&&b!=null?f({isAudioOnly:b,linkHash:d,linkId:a,linkUrl:c}):g({error:"Failed to create linkurl."})},onError:function(a){g(a)},optimisticUpdater:null,variables:{input:{client_mutation_id:"",funnel_session_id:e,link_options:{availability_settings_options:(d==null?void 0:d.linkSurface)==="MESSENGER_V2"?{join_permission:d==null?void 0:d.joinPermission,visibility_mode:(i=d==null?void 0:d.visibilityMode)!=null?i:"NONE"}:void 0,chat_mode:(i=d==null?void 0:d.chatMode)!=null?i:null,is_audio_only:(i=d==null?void 0:d.isAudioOnly)!=null?i:null,is_live_enabled:(i=d==null?void 0:d.isLiveEnabled)!=null?i:null,is_room_join_requestable:(i=d==null?void 0:d.joinRequestable)!=null?i:null,link_surface:(i=d==null?void 0:d.linkSurface)!=null?i:c("gkx")("20836")?"WORKPLACE":void 0,revocation_behavior:(i=d==null?void 0:d.revocationBehavior)!=null?i:null,should_allow_anonymous_guests:(i=d==null?void 0:d.allowAnonymousGuests)!=null?i:!0,supports_pages:(i=d==null?void 0:d.supportsPages)!=null?i:!1,supports_profile_plus:(i=d==null?void 0:d.supportsProfilePlus)!=null?i:!1,visibility_mode:(d==null?void 0:d.linkSurface)==="MESSENGER_V2"?void 0:(i=d==null?void 0:d.visibilityMode)!=null?i:"NONE"}}}})})}g["default"]=a}),98);
__d("RoomsLinkUtils",["ConstUriUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=d("ConstUriUtils").getUri(a);var b=a==null?void 0:a.getDomain();a=a==null?void 0:(a=a.stripTrailingSlash())==null?void 0:a.getPath();if(a==null)return null;if(b==="msngr.com")return a.substring(1);var c=/^\/v(id)?\//;if(b==="m.me"&&c.test(a))return a.replace(c,"");b=/^\/groupcall\/LINK:/;return b.test(a)?a.replace(b,""):null}g.getRoomsLinkHash=a}),98);
__d("VideoChatLinksUserActionsMultiplexLogger",["cr:1443591"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:1443591")}),98);
__d("XGroupCallControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/groupcall/{?call_context}/",Object.freeze({users_to_ring:[],has_video:!0,initialize_video:!0,auto_join:!1,use_joining_context:!1,has_seen_interstitial:!1,use_dapp:!1,is_e2ee_mandated:!1,use_www:!1}),void 0);b=a;g["default"]=b}),98);
__d("ZenonCallIdentifiersUtil",["Random"],(function(a,b,c,d,e,f,g){"use strict";function a(){return String(d("Random").uint32()+1)}g.generateZenonClientSessionID=a}),98);
__d("randomZenonNonce",["Random"],(function(a,b,c,d,e,f,g){"use strict";var h=2,i=6,j=36,k=2176782336;function a(){var a="";for(var b=0;b<h;b++){var c=Math.floor(d("Random").random()*k).toString(j);while(c.length<i)c="0"+c;a+=c}return a}g["default"]=a}),98);
__d("ZenonPreCallHookBuilderHelper",["ConstUriUtils","FBLogger","MessengerCreateVideoMeetupLinkMutation","Promise","RoomsLinkUtils","VideoChatLinksUserActionsMultiplexLogger","XGroupCallControllerRouteBuilder","ZenonActorHooks","ZenonCallIdentifiersUtil","ZenonCallWindowErrors","ZenonPeerID","ZenonSignalingProtocol","asyncToGeneratorRuntime","gkx","nullthrows","randomZenonNonce"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(a===null)throw new(d("ZenonCallWindowErrors").UninitializedError)();var e=a.callInviteModel;a=a.callWindowController;var f=e.getCurrentInvite();if(f===null)throw new(d("ZenonCallWindowErrors").InviteNotFoundError)();if(f.type!=="ringing"||f.context.type!=="thread")throw new(d("ZenonCallWindowErrors").CannotAcceptInviteError)();var g=c("randomZenonNonce")(),h=f.context.thread;a=a.initCall({context:{controllerParams:f.controllerParams,intent:"accept invite"},hideE2eeAttributions:b,isE2eeMandated:f.isE2eeMandated,joinContext:{thread:h!=null?h:{id:"0",type:2},type:"thread"},mediaType:f.requestingVideo?"video":"audio",nonce:g,representedID:f.receiverUserId});b=a[0];h=a[1];e.accept(g,{isPopupBlocked:b===null});yield h});return i.apply(this,arguments)}function e(a,b,c,d,e,f){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,h){h===void 0&&(h={allowAnonymousGuests:!c("gkx")("20836")});if(a===null)throw new(d("ZenonCallWindowErrors").UninitializedError)();p(g,e,f).setEvent("meetup_attempt_create_meetup").log();try{a=(yield c("MessengerCreateVideoMeetupLinkMutation")(b,h,g));b=a.linkUrl;if(b!=null){p(g,e,f).setEvent("meetup_create_success").setVideoCallLinkURLRaw(b).log();return b}else p(g,e,f).setEvent("meetup_create_failed").log();return b}catch(a){p(g,e,f).setEvent("meetup_create_failed").log();p(g,e,f).setEvent("error").setErrorType("LinkCreationError "+a.name).setErrorDetails(a.description).log();throw a}});return j.apply(this,arguments)}function f(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.actorID,f=a.callback_users,g=a.context,i=a.forceSkipChildLobby;i=i===void 0?!1:i;var j=a.funnelSessionID;j=j===void 0?null:j;var k=a.hasVideo;k=k===void 0?!0:k;var l=a.linkUrl,m=a.referrerContext;m=m===void 0?null:m;var p=a.skipLinkUrlRewrite;p=p===void 0?!1:p;var q=a.startCallImmediately;q=q===void 0?!1:q;a=a.trigger;if(g===null)throw new(d("ZenonCallWindowErrors").UninitializedError)();var r=g.callWindowController;g=g.incomingRingSDK;var s=c("randomZenonNonce")(),t=d("ZenonCallIdentifiersUtil").generateZenonClientSessionID(),u=l;if(!p){p=(p=d("ConstUriUtils").getUri(l))==null?void 0:p.getQueryParam("funnel_session_id");l=n(l);u=o(l,q?s:null,f,p!=null?String(p):j,i,m,e,a,k)}if(u==null)return(h||(h=b("Promise"))).reject("An invalid URI was provided");l=r.initCall({context:{existingCall:null,intent:"start or join",invitees:[],signalingID:t},joinContext:{linkUrl:u,type:"link"},mediaType:"video",nonce:s,representedID:d("ZenonActorHooks").ZenonActor.getID()});q=l[0];f=l[1];g.startCallIntent(s,{callTrigger:a!=null?a:"meetup_join",isE2eeMandated:!1,isPopupBlocked:q===null,isVideo:k,peerID:d("ZenonPeerID").ZenonMWPeerID,protocol:c("ZenonSignalingProtocol").MW,signalingID:t});yield f});return k.apply(this,arguments)}function l(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=b.existingCall,f=b.extra,g=b.hideE2eeAttributions,h=b.invitees,i=b.isE2eeMandated,j=b.mediaType,k=b.representedID,l=b.thread;b=b.trigger;if(a===null)throw new(d("ZenonCallWindowErrors").UninitializedError)();var m=a.callWindowController;a=a.incomingRingSDK;var n=d("ZenonCallIdentifiersUtil").generateZenonClientSessionID(),o=c("randomZenonNonce")();m=m.initCall({context:{existingCall:e,intent:"start or join",invitees:h,signalingID:n},extra:f,hideE2eeAttributions:g,isE2eeMandated:i,joinContext:{thread:l,type:"thread"},mediaType:j,nonce:o,representedID:k!=null?k:d("ZenonActorHooks").ZenonActor.getID()});e=m[0];h=m[1];a.startCallIntent(o,{callTrigger:b,isE2eeMandated:i!=null?i:!1,isPopupBlocked:e===null,isVideo:j==="video",peerID:l.type===1?l.id:d("ZenonPeerID").ZenonMWPeerID,protocol:c("ZenonSignalingProtocol").MW,signalingID:n});yield h});return m.apply(this,arguments)}function n(a){var b=d("RoomsLinkUtils").getRoomsLinkHash(a);b==null&&c("FBLogger")("rtc_www").mustfix('Could not extract LinkHash from Video Chat Link. Link = "%s"',a);return b}function o(a,b,d,e,f,g,h,i,j){if(a==null)return"";a={call_context:"LINK:"+a,call_trigger:i!=null?i:"",has_video:j,users_to_ring:d!=null?d:[]};b!=null&&(a.nonce=b);e!=null&&(a.funnel_session_id=e);f===!0&&(a.auto_join=!0);g!=null&&(a.referrer_context=g);h!=null&&(a.av=h);return c("nullthrows")(c("XGroupCallControllerRouteBuilder").buildUri(a).getQualifiedUri()).toString()}function p(a,b,d){return new(c("VideoChatLinksUserActionsMultiplexLogger"))().setFunnelSessionIDRaw(a).setSurface(b).setComponent(d)}g.acceptCall=a;g.createMeetup=e;g.joinMeetup=f;g.startCall=l}),98);
__d("useZenonCallInvite",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useState;function a(a){var b=j(function(){return a?a.getCurrentInvite():null}),c=b[0],d=b[1];i(function(){if(a){var b=a.addListener("callInvite",d);return function(){b.remove()}}else d(null)},[a]);return c}g["default"]=a}),98);
__d("ZenonPreCallHookBuilder",["CometRelay","FBLogger","Promise","ZenonPreCallHookBuilderHelper","err","gkx","promiseDone","react","useZenonCallInvite"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k=j.useCallback,l=j.useContext,m=j.useDebugValue,n=j.useEffect,o=6e4;function a(a){function b(b){var c=l(a);return k(function(){return d("ZenonPreCallHookBuilderHelper").acceptCall(c,b)},[c,b])}return b}function e(a){function b(){var b=l(a);b=c("useZenonCallInvite")(b?b.callInviteModel:null);m(b);return b}return b}function f(a,b){return function(d,e,f){function g(){var g=l(a),h=d(),i=e(),j=f(),m=b();return k(function(a){if(!c("gkx")("24231"))return;var b=a.existingCall,d=a.thread;if(!g||!g.incomingRingSDK.isCallSupported({threadType:d.type,type:"thread"}))j(a);else switch(d.type){case 1:c("promiseDone")(m(babelHelpers["extends"]({},a,{invitees:[d.id]})));break;case 15:if(d.secureOneToOneThreadPeerId==null)throw c("err")("secureOneToOneThreadPeerId should be defined when starting a call from a secure 1:1 thread");c("promiseDone")(m(babelHelpers["extends"]({},a,{invitees:[d.secureOneToOneThreadPeerId]})));break;case 2:case 16:b===null||b.call_state==="NO_ONGOING_CALL"?h(a,function(b){c("promiseDone")(m(babelHelpers["extends"]({},a,{invitees:b})))}):c("gkx")("13856")?i(a,function(){c("promiseDone")(m(babelHelpers["extends"]({},a,{invitees:[]})))}):c("promiseDone")(m(babelHelpers["extends"]({},a,{invitees:[]})));break;default:c("FBLogger")("rtc_www").blameToPreviousFrame().mustfix("Attempted to start RTC call for unsupported thread type %d",d.type)}},[g,h,j,m,i])}return g}}function p(a,b){function c(){var c=l(a),d=b();n(function(){if(c&&d&&d.type==="ringing"){var a=window.setTimeout(function(){c.callInviteModel.decline("NoAnswerTimeout")},o);return function(){window.clearTimeout(a)}}},[c,d])}return c}function q(a){function e(){var e=l(a);return k(function(a){var f=a.existingCall,g=a.extra,i=a.hideE2eeAttributions,j=a.invitees,k=a.isE2eeMandated,l=a.mediaType,m=a.representedID,n=a.thread;a=a.trigger;return!c("gkx")("24231")?(h||(h=b("Promise"))).resolve():d("ZenonPreCallHookBuilderHelper").startCall(e,{existingCall:f,extra:g,hideE2eeAttributions:i,invitees:j,isE2eeMandated:k,mediaType:l,representedID:m,thread:n,trigger:a})},[e])}return e}function r(a){function e(){var e=l(a),f=d("CometRelay").useRelayEnvironment();return k(function(a,g,i,j){return!c("gkx")("24231")?(h||(h=b("Promise"))).resolve(null):d("ZenonPreCallHookBuilderHelper").createMeetup(e,f,a,g,i,j)},[e,f])}return e}function s(a){function e(){var e=l(a);return k(function(a,f){f===void 0&&(f={});if(!c("gkx")("24231"))return(h||(h=b("Promise"))).resolve();f=(f=f)!=null?f:{};var g=f.actorID,i=f.callbackUsers,j=f.mediaType,k=f.referrerContext,l=f.startCallImmediately;f=f.trigger;return d("ZenonPreCallHookBuilderHelper").joinMeetup({actorID:g,callback_users:i,context:e,forceSkipChildLobby:!1,hasVideo:j!=null?j==="video":!0,linkUrl:a,referrerContext:k,startCallImmediately:l,trigger:f})},[e])}return e}g.createAcceptCallCallbackHook=a;g.createCallInviteHook=e;g.createInviteAndStartCallCallbackHookFactory=f;g.createNoAnswerTimeoutHook=p;g.createStartCallCallbackHook=q;g.createCreateMeetupCallbackHook=r;g.createJoinMeetupCallbackHook=s}),98);
__d("IGWebPreCallHooks",["IGWebPreCallContext","ZenonPreCallHookBuilder"],(function(a,b,c,d,e,f,g){"use strict";a=d("ZenonPreCallHookBuilder").createAcceptCallCallbackHook(c("IGWebPreCallContext"));b=d("ZenonPreCallHookBuilder").createCallInviteHook(c("IGWebPreCallContext"));e=d("ZenonPreCallHookBuilder").createStartCallCallbackHook(c("IGWebPreCallContext"));g.useAcceptCallCallback=a;g.useCallInvite=b;g.useStartCallCallback=e}),98);
__d("LSBeginHandlingSyncForSyncGroup",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return b.db.table(1).fetch([[[a[0]]]]).next().then(function(a,d){var e=a.done;a=a.value;return e?c[0]=void 0:(d=a.item,c[9]=new b.Map(),c[9].set("group_id",d.groupId),c[9].set("current_cursor",d.currentCursor),c[9].set("sync_status",d.syncStatus),c[9].set("sync_params",d.syncParams),c[9].set("send_sync_params",d.sendSyncParams),c[9].set("min_time_to_sync_timestamp_ms",d.minTimeToSyncTimestampMs),c[9].set("can_ignore_timestamp",d.canIgnoreTimestamp),c[9].set("sync_channel",d.syncChannel),c[9].set("last_sync_request_timestamp_ms",d.lastSyncRequestTimestampMs),c[0]=c[9])})},function(d){return c[0]?c[2]=!1:c[2]=!0,c[2]?b.resolve((d=[a[0],void 0,b.i64.cast([0,4]),void 0,!1],c[3]=d[0],c[4]=d[1],c[5]=d[2],c[6]=d[3],c[7]=d[4],d)):b.sequence([function(a){return c[9]=c[0].get("group_id"),b.filter(b.db.table(3).fetch(),function(a){return b.i64.neq(a.epochId,void 0)&&b.i64.eq(a.syncDatabaseId,c[9])}).next().then(function(a,b){b=a.done;a=a.value;return b?c[10]=!1:(a.item,c[10]=!0)})},function(d){return c[10]?b.resolve((c[17]=c[0].get("group_id"),d=[c[17],void 0,b.i64.cast([0,4]),void 0,!1],c[12]=d[0],c[13]=d[1],c[14]=d[2],c[15]=d[3],c[16]=d[4],d)):b.sequence([function(d){return c[17]=b.i64.of_float(Date.now()),c[18]=c[0].get("min_time_to_sync_timestamp_ms"),c[19]=c[0].get("last_sync_request_timestamp_ms"),c[20]=c[0].get("can_ignore_timestamp"),c[20]&&a[1]||b.i64.ge(c[17],c[18])?b.sequence([function(d){return a[1]?b.resolve(c[28]=b.i64.cast([0,0])):b.sequence([function(a){return c[29]=c[0].get("group_id"),b.db.table(3).fetch([[["",c[29]]]]).next().then(function(a,d){var e=a.done;a=a.value;return e?c[30]=b.i64.cast([0,0]):(d=a.item,c[30]=d.failureCount)})},function(a){return c[32]=b.i64.mul(b.i64.sub(b.i64.lsl_(b.i64.cast([0,1]),b.i64.to_int32(b.i64.lt(b.i64.cast([0,15]),c[30])?b.i64.cast([0,15]):c[30])),b.i64.cast([0,1])),b.i64.cast([0,500])),c[33]=b.i64.sub(b.i64.add(c[19]==null?b.i64.cast([0,0]):c[19],b.i64.lt(c[32],b.i64.cast([0,3e4]))?c[32]:b.i64.cast([0,3e4])),c[17]),c[28]=b.i64.gt(c[33],b.i64.cast([0,0]))?c[33]:b.i64.cast([0,0])}])},function(a){return c[21]=c[28]}]):b.resolve(c[21]=b.i64.sub(c[18],c[17]))},function(a){return c[22]=c[0].get("group_id"),b.i64.gt(c[21],b.i64.cast([0,0]))?b.sequence([function(a){return c[28]=b.i64.of_float(Date.now()),b.forEach(b.filter(b.db.table(3).fetch(),function(a){return b.i64.eq(a.syncDatabaseId,c[22])}),function(a){var b=a.update;a.item;return b({lastDelayedRequestTimestampMs:c[28]})})},function(a){return a=[c[22],c[21],b.i64.cast([0,3]),void 0,!1],c[23]=a[0],c[24]=a[1],c[25]=a[2],c[26]=a[3],c[27]=a[4],a}]):b.sequence([function(a){return c[28]=b.i64.of_float(Date.now()),b.forEach(b.db.table(1).fetch([[[c[22]]]]),function(a){var b=a.update;a.item;return b({lastSyncRequestTimestampMs:c[28]})})},function(a){return c[29]=b.i64.of_float(Date.now()),b.forEach(b.filter(b.db.table(3).fetch(),function(a){return b.i64.eq(a.syncDatabaseId,c[22])}),function(a){var b=a.update;a.item;return b({lastSyncRequestTimestampMs:c[29]})})},function(a){return c[30]=c[0].get("group_id"),c[31]=b.i64.of_float(Date.now()),c[32]=b.i64.random(),c[45]=b.i64.and_(b.i64.or_(b.i64.lsl_(c[31],b.i64.to_int32(b.i64.cast([0,22]))),b.i64.and_(c[32],b.i64.cast([0,4194303]))),b.i64.cast([2147483647,4294967295])),b.db.table(3).fetch([[["",c[30]]]]).next().then(function(a,d){d=a.done;a=a.value;return d?b.db.table(3).add({syncDatabaseId:c[30],taskQueueName:"",failureCount:b.i64.cast([0,0]),lastSentTimestampMs:b.i64.cast([0,0]),lastSyncRequestTimestampMs:b.i64.cast([0,0]),epochId:c[45]}):(a.item,b.forEach(b.db.table(3).fetch([[["",c[30]]]]),function(a){var b=a.update;a.item;return b({epochId:c[45]})}))})},function(a){return c[34]=c[0].get("group_id"),b.db.table(3).fetch([[["",c[34]]]]).next().then(function(a,d){var e=a.done;a=a.value;return e?c[35]=b.i64.cast([0,0]):(d=a.item,c[35]=d.failureCount)})},function(a){return c[37]=c[0].get("send_sync_params"),c[38]=c[0].get("sync_params"),c[39]=c[0].get("current_cursor"),c[40]=new b.Map(),c[40].set("database",c[34]),c[40].set("version",b.i64.cast([-1,4294967295])),c[40].set("epoch_id",c[45]),c[40].set("last_applied_cursor",c[39]),c[40].set("sync_params",c[37]?c[38]:void 0),c[40].set("failure_count",b.i64.gt(c[35],b.i64.cast([0,0]))?c[35]:void 0),c[41]=c[0].get("current_cursor"),void 0===c[41]?c[42]=b.i64.cast([0,1]):c[42]=b.i64.cast([0,2]),c[43]=new b.Map(),c[43].set("type",c[42]),c[43].set("request_payload",c[40]),c[44]=c[0].get("sync_channel"),a=[c[30],void 0,b.i64.cast([0,1]),c[43],b.i64.eq(c[44],b.i64.cast([0,2]))],c[23]=a[0],c[24]=a[1],c[25]=a[2],c[26]=a[3],c[27]=a[4],a}])},function(a){return a=[c[23],c[24],c[25],c[26],c[27]],c[12]=a[0],c[13]=a[1],c[14]=a[2],c[15]=a[3],c[16]=a[4],a}])},function(a){return a=[c[12],c[13],c[14],c[15],c[16]],c[3]=a[0],c[4]=a[1],c[5]=a[2],c[6]=a[3],c[7]=a[4],a}])},function(a){return c[8]=new b.Map(),c[8].set("sync_group_id",c[3]),c[8].set("next_sync_ms",c[4]),c[8].set("work_item_type",c[5]),c[8].set("network_payload",c[6]),c[8].set("skip_realtime_gateway",c[7]),d[0]=c[8]}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSCoreBeginHandlingSyncForSyncGroupStoredProcedure";a.__tables__=["sync_groups","network_requests"];e.exports=a}),null);
__d("LSBeginHandlingSync",["LSBeginHandlingSyncForSyncGroup"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.createArray(),c.forEach(c.db.table(1).fetch(),function(e){var f=e.item;return c.sequence([function(e){return c.storedProcedure(b("LSBeginHandlingSyncForSyncGroup"),f.groupId,a[0]).then(function(a){return a=a,d[1]=a[0],a})},function(a){return d[2]=(d[0].push(d[1]),d[0])}])})},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSCoreBeginHandlingSyncStoredProcedure";a.__tables__=["sync_groups"];e.exports=a}),null);
__d("LSBeginHandlingSyncForSyncGroupStoredProcedure",["LSBeginHandlingSyncForSyncGroup","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSBeginHandlingSyncForSyncGroup"),e.syncGroupId,e.ignoreSoftDelay);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSBeginHandlingSyncStoredProcedure",["LSBeginHandlingSync","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSBeginHandlingSync"),e.ignoreSoftDelay);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSCheckThreadConsistency",["LSIssueNewFireAndForgetTask","LSIssueNewTask","gkx"],(function(a,b,c,d,e,f,g){function a(){var a=arguments,d=a[a.length-1],e=[],f=[];return d.sequence([function(f){return c("gkx")("15730")?(e[0]=new d.Map(),e[0].set("threads",a[0]),e[0].set("metadata",a[1]),e[1]=d.toJSON(e[0]),d.storedProcedure(b("LSIssueNewFireAndForgetTask"),"fire_forget",d.i64.cast([0,18]),e[1])):(e[0]=new d.Map(),e[0].set("threads",a[0]),e[0].set("metadata",a[1]),e[1]=d.toJSON(e[0]),d.storedProcedure(b("LSIssueNewTask"),"check-thread-consistency",d.i64.cast([0,160019]),e[1],void 0,void 0,d.i64.cast([0,0]),d.i64.cast([0,0]),void 0,void 0,d.i64.cast([0,0]),d.i64.cast([0,0])))},function(a){return d.resolve(f)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxCheckThreadConsistencyStoredProcedure";a.__tables__=[];d=a;g["default"]=d}),98);
__d("LSCheckThreadConsistencyStoredProcedure",["LSCheckThreadConsistency","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSCheckThreadConsistency"),e.threads,e.metadata);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSPlatformClientDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";a=c("requireDeferred")("LSPlatformClient").__setRef("LSPlatformClientDeferred");b=a;g["default"]=b}),98);
__d("LSPlatformEvaluateInitSyncEagerly",["ExecutionEnvironment","LSClearEpochBeforeResumeSync","LSDatabaseProviderType","LSPlatformDeviceId","LSPlatformHardcodedInitSync","LSPlatformLsInitLog","asyncToGeneratorRuntime","cr:3411","qex","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){d("LSPlatformLsInitLog").addPoint("ds_eval_registration");e=(yield e());var f;try{f=b("cr:3411")!=null?b("cr:3411").registerEval(e)()(a):e()(a)}catch(b){c("recoverableViolation")("fail to register datascriptEvaluator","ls_web_init",{error:b}),f=e()(a)}d("LSPlatformLsInitLog").addPoint("ds_eval_registration_end");return f});return function(b,c){return a.apply(this,arguments)}}();function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!(h||(h=c("ExecutionEnvironment"))).canUseDOM&&!c("qex")._("3809"))return!1;if(!a.sendHardcodedInitSync)return!1;var b=a.eagerEvaluatorForInitSync;if(b==null)return!1;var e=(yield a.getDb());if(d("LSDatabaseProviderType").isProviderPersisted(e))return!1;d("LSPlatformLsInitLog").addPoint("evaluate_init_sync_start");var f=d("LSPlatformDeviceId").getDeviceIdForProviderType("ephemeral");b=(yield i(e,b));yield d("LSClearEpochBeforeResumeSync").call(e);yield d("LSPlatformHardcodedInitSync").sendHardcodedInitSync(a,b,e,f);d("LSPlatformLsInitLog").addPoint("evaluate_init_sync_end");return!0});return j.apply(this,arguments)}g.getDatascriptEvaluator=i;g.maybeEvaluateInitSyncEagerly=a}),98);
__d("LSPlatformLogTooManyPendingTasksForS337085.react",["FBLogger","MWPBumpEntityKey","ReQL","clearTimeout","gkx","justknobx","promiseDone","react","setTimeout","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=i||d("react");var j=b.useEffect,k=b.useRef,l=c("justknobx")._("1134"),m=c("justknobx")._("1135"),n=c("gkx")("24156");function a(){var a=(h||(h=c("useReStore")))(),b=k(null),e=k(!1);j(function(){var f=a.tables.pending_tasks.subscribe(function(){c("promiseDone")(d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.pending_tasks).take(l)),function(a){var f=a.length;if(f===l){if(b.current!=null)return;b.current=c("setTimeout")(function(){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","tasks_table_above_threshold"),e.current=!0,n&&c("FBLogger")("lsplatform_tasks","tasks_table_above_threshold").warn("pending tasks table is above threshold. It has %s tasks after %s ms",f,m)},m)}else c("clearTimeout")(b.current),e.current&&n&&c("FBLogger")("lsplatform_tasks","tasks_table_cleared").warn("pending tasks table is now cleared"),e.current=!1})});return function(){f()}},[a]);return null}g["default"]=a}),98);
__d("LSPlatformSyncSystem",["FBLogger","I64","LSBeginHandlingSyncForSyncGroupStoredProcedure","LSBeginHandlingSyncStoredProcedure","LSDatabaseProviderType","LSFactory","LSIntEnum","LSJson","LSMailboxInitialSyncCursor","LSPlatformGraphQLTransport","LSPlatformRealtimeTransport","LSPlatformRequestId","LSPlatformRequestScheduler","LSPlatformServerResponseHandler","LSShape","LSVec","MWPBumpEntityKey","MessengerLogHistory","Promise","ReQL","asyncToGeneratorRuntime","gkx","promiseDone","qex","recoverableViolation","throttle"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,e,g,k,l,m){var n=d("MessengerLogHistory").getInstance("client_sync"),o=new(c("LSPlatformServerResponseHandler"))(g),p=d("LSDatabaseProviderType").isProviderPersisted(a),q=function(c){return a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.network_requests).getKeyRange("",c)));b!=null&&(yield a.network_requests.put({epochId:void 0,failureCount:(i||(i=d("I64"))).add(b.failureCount,i.one),lastDelayedRequestTimestampMs:b.lastDelayedRequestTimestampMs,lastSentTimestampMs:b.lastSentTimestampMs,lastSyncRequestTimestampMs:b.lastSyncRequestTimestampMs,networkTaskIdentifier:b.networkTaskIdentifier,syncDatabaseId:b.syncDatabaseId,taskQueueName:b.taskQueueName}))});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":76")},r=new(c("LSPlatformRequestScheduler"))(),s=function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(f,n){n=d("LSShape").toRecord(n);var q=d("LSShape").toRecord(n.request_payload);n=n.type;var r=c("LSPlatformRequestId").generate(),s=d("LSJson").stringify(d("LSShape").ofRecord({database:q.database,epoch_id:q.epoch_id,failure_count:q.failure_count,last_applied_cursor:q.last_applied_cursor,sync_params:q.sync_params,version:(i||(i=d("I64"))).of_string(k)})),t=(i||(i=d("I64"))).equal(f.sync_group_id,(j||(j=d("LSIntEnum"))).ofNumber(1))&&c("gkx")("26386")===!0;if(!t&&f.skip_realtime_gateway){t=(yield d("LSPlatformGraphQLTransport").publish(l,r,n,s,m));var u=t[0],v=t[1],w=t[2];t=t[3];w={experiments:w,syncScript:v,target:t};return p?o.maybeEvalInOrderReceived(u,w):g(w)}else{v=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.sync_groups).getKeyRange(f.sync_group_id)));t=v!=null?v.syncChannel:d("LSMailboxInitialSyncCursor").syncChannel;v!=null&&(j||(j=d("LSIntEnum"))).toNumber(v.syncChannel)!==(i||(i=d("I64"))).to_int32(d("LSMailboxInitialSyncCursor").syncChannel)&&e.logEvent("Sync channel mismatch between "+(j||(j=d("LSIntEnum"))).toNumber(v.syncChannel)+" and "+(i||(i=d("I64"))).to_int32(d("LSMailboxInitialSyncCursor").syncChannel));u=c("qex")._("789");if(v!=null&&u!=null&&u!=="default"){w=(j||(j=d("LSIntEnum"))).unwrapIntEnum(n);if(1===w||2===w||5===w){f=u+"."+(j||(j=d("LSIntEnum"))).toNumber(t)+"."+j.toNumber(n)+"."+j.toNumber(v.groupId);d("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed",f)}}w=(i||(i=d("I64"))).to_int32(q.database);return e.publish({databaseType:w,payload:s,queueName:void 0,requestId:r,syncChannel:t,type_:n}).then(function(){return(h||(h=b("Promise"))).resolve()})}});return function(a,b){return f.apply(this,arguments)}}(),t=function e(g){var k=function(b){return a.runInTransaction(function(a){return c("LSBeginHandlingSyncForSyncGroupStoredProcedure")(c("LSFactory")(a),{ignoreSoftDelay:!1,syncGroupId:b})},"readwrite",void 0,void 0,f.id+":216").then(function(a){return e(a[0])})},l=function(a,b){r.schedule(function(){c("promiseDone")(k(a))},(i||(i=d("I64"))).to_string(a),i.to_float(b))},m=d("LSShape").toRecord(g);g=m.work_item_type;if((i||(i=d("I64"))).equal(g,(j||(j=d("LSIntEnum"))).ofNumber(1))||(i||(i=d("I64"))).equal(g,(j||(j=d("LSIntEnum"))).ofNumber(5))){var o=c("qex")._("789");if(o!=null&&o!=="default"){var p=o+"."+(j||(j=d("LSIntEnum"))).toNumber(d("LSMailboxInitialSyncCursor").syncChannel);d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync",p)}var t=m.network_payload;if(t!=null)return s(m,t)["catch"](function(a){if(o!=null&&o!=="default"){var b=o+"."+(j||(j=d("LSIntEnum"))).toNumber(d("LSMailboxInitialSyncCursor").syncChannel);d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync",b+".exception");a.RE_EXN_ID===d("LSPlatformRealtimeTransport").Timeout?d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync",b+".exception.timeout"):a.RE_EXN_ID===d("LSPlatformRealtimeTransport").NotConnected&&d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync",b+".exception.notconnected")}if(a.message===d("LSPlatformGraphQLTransport").ServerError)d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","send_sync_request_graphql_error");else if(a.RE_EXN_ID===d("LSPlatformRealtimeTransport").Timeout||a.RE_EXN_ID===d("LSPlatformRealtimeTransport").NotConnected)d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","send_sync_request_timeout_or_disc"),n.debug("Publish timed out");else{d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","send_sync_request_other_error");if(a instanceof Error)c("FBLogger")("messenger_web").catching(a).mustfix("Encountered an JS error while publishing a LS sync request");else{b="";try{b=JSON.stringify(a)}catch(a){}c("FBLogger")("messenger_web").mustfix("Encountered an JS error while publishing a LS sync request %s",b)}}d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","handleSyncFailure."+(j||(j=d("LSIntEnum"))).toNumber(d("LSShape").toRecord(t).type)+"."+j.toNumber(m.sync_group_id));return q(m.sync_group_id).then(function(){return k(m.sync_group_id)})});else{c("recoverableViolation")("Expected networkpayload for sync request but didn't get any","ls_web_init");return(h||(h=b("Promise"))).resolve()}}if(!(i||(i=d("I64"))).equal(g,(j||(j=d("LSIntEnum"))).ofNumber(3)))if((i||(i=d("I64"))).equal(g,(j||(j=d("LSIntEnum"))).ofNumber(4))||!(i||(i=d("I64"))).equal(g,(j||(j=d("LSIntEnum"))).ofNumber(2)))return(h||(h=b("Promise"))).resolve();else{c("recoverableViolation")("Native handling for sync group not implemented yet","ls_web_init");return(h||(h=b("Promise"))).resolve()}p=m.next_sync_ms;if(p!=null){l(m.sync_group_id,p);return(h||(h=b("Promise"))).resolve()}else{c("recoverableViolation")("Expected delay for delayed sync request but didn't get any","ls_web_init");return(h||(h=b("Promise"))).resolve()}},u=function(a){return(h||(h=b("Promise"))).all(c("LSVec").toArray(a[0]).map(function(a){return t(a)}))},v=function(){c("promiseDone")(a.runInTransaction(function(a){return c("LSBeginHandlingSyncStoredProcedure")(c("LSFactory")(a),{ignoreSoftDelay:!1})},"readwrite",void 0,void 0,f.id+":397").then(u))},w=c("throttle")(v,500);v=function(){return d("ReQL").fromTableAscending(a.tables.sync_groups).subscribe(function(){return w()})};var x=function(){return e.subscribeToNonTaskResponses(function(a,b){var e=b.ex,f=b.payload;e={experiments:e,sp:b.sp,syncScript:f,target:b.target};c("promiseDone")(p?o.maybeEvalInOrderReceived(a,e):c("gkx")("10470")?o.maybeEvalInOrderReceived(a,e):g(e),function(){return w()},function(a){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","handle_sync_response_failure");if(a instanceof Error)c("FBLogger")("messenger_web").catching(a).mustfix("JS error encountered handling response from MQTT (pdb=%s): %s",p,a.message);else{var b="";try{b=JSON.stringify(a)}catch(a){}c("FBLogger")("messenger_web").mustfix("JS error encountered handling response from MQTT (pdb=%s): %s",p,b)}})})},y=function(){return e.onReconnect(function(){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","resume_sync_reconnect"),n.debug("Sync System reconnecting"),c("promiseDone")(a.runInTransaction(function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var f;f=(yield (f=d("ReQL")).toArrayAsync(f.mergeJoin(f.fromTableAscending(a.tables.sync_groups),f.fromTableAscending(a.tables.network_requests).getKeyRange(""))));yield (h||(h=b("Promise"))).all(f.map(function(a){a=a[1];return e.network_requests.put({epochId:void 0,failureCount:a.failureCount,lastDelayedRequestTimestampMs:a.lastDelayedRequestTimestampMs,lastSentTimestampMs:a.lastSentTimestampMs,lastSyncRequestTimestampMs:a.lastSyncRequestTimestampMs,networkTaskIdentifier:a.networkTaskIdentifier,syncDatabaseId:a.syncDatabaseId,taskQueueName:a.taskQueueName})}));return c("LSBeginHandlingSyncStoredProcedure")(c("LSFactory")(e),{ignoreSoftDelay:!1})});return function(a){return e.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":492").then(u))})},z=v(),A=x(),B=y();w();return{cleanup:function(){z(),B(),A()}}}g["default"]=a}),98);
__d("MAWBridgeInitOfflineQueueSyncCompleteHandler",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("MessengerLogHistory").__setRef("MAWBridgeInitOfflineQueueSyncCompleteHandler");function a(){h.onReady(function(a){a=a.getInstance("maw_setup");a.debug("Init Offline Queue Sync Complete")})}g.call=a}),98);
__d("MAWThreadConsistencyLogger",["FBLogger","I64","LSAuthorityLevel","LSCheckThreadConsistencyStoredProcedure","LSDatabaseSingleton","LSFactory","LSMessagingThreadTypeUtil","LSShape","LSVec","ODS","Promise","ReQL","WAArrayZip","asyncToGeneratorRuntime","clearInterval","gkx","justknobx","promiseDone","qex","setInterval"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=20,m=c("justknobx")._("3207"),n=!c("gkx")("5457"),o=!1,p=null;function a(){if(o||n)return;o=!0;c("clearInterval")(p);p=c("setInterval")(function(){if(document.visibilityState!=="visible")return;c("promiseDone")(q())},m*1e3)}function q(){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield (i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton);c("promiseDone")(a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){(k||(k=d("ODS"))).bumpEntityKey(3185,"maw_tc_metric","initiate_snapshot");var e=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableDescending(a.threads.index("lastActivityTimestampMs")).filter(s).take(l)));if(e.length===0){(k||(k=d("ODS"))).bumpEntityKey(3185,"maw_tc_metric","no_e2ee_threads_fetched_on_client");return}var f;c("qex")._("18")?f=(yield (h||(h=b("Promise"))).all(e.map(function(b){return d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.messages.index("messageDisplayOrderOfflineThreadingId")).getKeyRange(b.threadKey))}))):f=(yield (h||(h=b("Promise"))).all(e.map(function(b){return d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.messages.index("messageDisplayOrder")).getKeyRange(b.threadKey))})));e=d("WAArrayZip").zip(e,f).map(function(a){var b=a[0];a=a[1];return d("LSShape").ofRecord({is_last_activity_optimistic:t(a),last_activity_timestamp_ms:b.lastActivityTimestampMs,last_read_timestamp_ms:b.lastReadWatermarkTimestampMs,thread_key:b.threadKey})});return c("LSCheckThreadConsistencyStoredProcedure")(c("LSFactory")(a),{metadata:d("LSShape").ofRecord({client_snapshot_timestamp_ms:(j||(j=d("I64"))).of_float(Date.now()),session_timestamp_ms:j.of_int32(Math.round(window.performance.now()))}),threads:c("LSVec").ofArray(e)})});return function(b){return a.apply(this,arguments)}}(),"readonly",void 0,void 0,f.id+":59"),function(){return(k||(k=d("ODS"))).bumpEntityKey(3185,"maw_tc_metric","send_snapshot")},function(a){c("FBLogger")("maw_tc_metric").catching(a).warn("failed to send tc metric snapshot")})});return r.apply(this,arguments)}function s(a){return d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType)&&a.folderName==="inbox"&&(j||(j=d("I64"))).to_int32(a.authorityLevel)>=c("LSAuthorityLevel").AUTHORITATIVE}function t(a){return a==null?!1:(j||(j=d("I64"))).to_int32(a.authorityLevel)<c("LSAuthorityLevel").AUTHORITATIVE}g.startMAWThreadConsistencyLogger=a;g.MAWThreadConsistencyLoggerTakeSnapshot=q}),98);
__d("XPolarisCallControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/call/",Object.freeze({has_video:!0,is_e2ee_mandated:!1,hide_e2ee_attributions:!1,users_to_ring:[]}),void 0);b=a;g["default"]=b}),98);
__d("PolarisCallNavigator",["PolarisAPIHelpers","PolarisCallGatingHelpers","PolarisNavigationUtils","XPolarisCallControllerRouteBuilder"],(function(a,b,c,d,e,f,g){"use strict";var h="https://call.instagram.com";function a(a,b,e){e===void 0&&(e=null);e=e===""?null:e;var f;d("PolarisCallGatingHelpers").isCallsPathMigrationEnabled()?e!=null?f=c("XPolarisCallControllerRouteBuilder").buildURL({has_video:b,ig_thread_id:a,server_info_data:e}):f=c("XPolarisCallControllerRouteBuilder").buildURL({has_video:b,ig_thread_id:a}):f=d("PolarisAPIHelpers").appendQueryParameters(h,{has_video:b,ig_thread_id:a,server_info_data:e});d("PolarisNavigationUtils").openURLWithFullPageReload(f,{openInNewTab:!0})}g.launchCall=a}),98);
__d("RealtimeNexusSessionDataTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";c=(a=b("$InternalEnum"))({MESSENGER_CP:0,NON_MESSENGER_CP:1,MESSENGER_MQTT:2,NON_MESSENGER_MQTT:3});d=a({ACTIVE:1,IDLE:2,OFFLINE:3});f=a({MQTT:1,SESSION_MESSAGE_HANDLER:2,PRESENCE_HANDLER:3,RTC_SESSION_MESSAGE_HANDLER:4,WWW:5,PRESENCE_STREAM_CONTROLLER:6,RPSIGNALING:7,DGW:8});b=a({FbId:"fbId",IgId:"igId"});e.exports={BuddyListSessionType:c,PresenceAvailability:d,SessionOwnerId$Types:b,SessionType:f}}),null);
__d("VideoChatLinksUserActionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:VideoChatLinksUserActionsLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:VideoChatLinksUserActionsLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:VideoChatLinksUserActionsLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,{},a);return this};c.setCallEndReason=function(a){this.$1.call_end_reason=a;return this};c.setCallID=function(a){this.$1.call_id=a;return this};c.setCameraEnabled=function(a){this.$1.camera_enabled=a;return this};c.setClientAppVersion=function(a){this.$1.client_app_version=a;return this};c.setClientLockStatus=function(a){this.$1.client_lock_status=a;return this};c.setClientMonoTimeMs=function(a){this.$1.client_mono_time_ms=a;return this};c.setClienttime=function(a){this.$1.clienttime=a;return this};c.setComponent=function(a){this.$1.component=a;return this};c.setConferenceNameRaw=function(a){this.$1.conference_name_raw=a;return this};c.setCreationAction=function(a){this.$1.creation_action=a;return this};c.setErrorDetails=function(a){this.$1.error_details=a;return this};c.setErrorType=function(a){this.$1.error_type=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setEventDetails=function(a){this.$1.event_details=b("GeneratedLoggerUtils").serializeMap(a);return this};c.setEventFireTimestamp=function(a){this.$1.event_fire_timestamp=a;return this};c.setEventFireTimestampOnClient=function(a){this.$1.event_fire_timestamp_on_client=a;return this};c.setExceptionObject=function(a){this.$1.exception_object=a;return this};c.setExperimentsEnabled=function(a){this.$1.experiments_enabled=b("GeneratedLoggerUtils").serializeMap(a);return this};c.setFalcoBatchSequence=function(a){this.$1.falco_batch_sequence=a;return this};c.setFunnelSessionIDRaw=function(a){this.$1.funnel_session_id_raw=a;return this};c.setGroupID=function(a){this.$1.group_id=a;return this};c.setGroupSize=function(a){this.$1.group_size=a;return this};c.setGuestUserID=function(a){this.$1.guest_user_id=a;return this};c.setKickedUserID=function(a){this.$1.kicked_user_id=a;return this};c.setLinkShareTo=function(a){this.$1.link_share_to=a;return this};c.setLocalCallID=function(a){this.$1.local_call_id=a;return this};c.setMediaDevices=function(a){this.$1.media_devices=a;return this};c.setMicrophoneEnabled=function(a){this.$1.microphone_enabled=a;return this};c.setOpenLinkFrom=function(a){this.$1.open_link_from=a;return this};c.setOpenLinkFromAppVersion=function(a){this.$1.open_link_from_app_version=a;return this};c.setReason=function(a){this.$1.reason=a;return this};c.setReferralSurface=function(a){this.$1.referral_surface=a;return this};c.setRoomIDRaw=function(a){this.$1.room_id_raw=a;return this};c.setServerInfoData=function(a){this.$1.server_info_data=a;return this};c.setSource=function(a){this.$1.source=a;return this};c.setStatus=function(a){this.$1.status=a;return this};c.setSurface=function(a){this.$1.surface=a;return this};c.setTargetedUserIds=function(a){this.$1.targeted_user_ids=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setThreadSyncRoomData=function(a){this.$1.thread_sync_room_data=b("GeneratedLoggerUtils").serializeMap(a);return this};c.setThreadType=function(a){this.$1.thread_type=a;return this};c.setUserIdsToBeRemoved=function(a){this.$1.user_ids_to_be_removed=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setVideoCallLinkHashRaw=function(a){this.$1.video_call_link_hash_raw=a;return this};c.setVideoCallLinkIDRaw=function(a){this.$1.video_call_link_id_raw=a;return this};c.setVideoCallLinkIdentifierRaw=function(a){this.$1.video_call_link_identifier_raw=a;return this};c.setVideoCallLinkURLRaw=function(a){this.$1.video_call_link_url_raw=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,{},a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={call_end_reason:!0,call_id:!0,camera_enabled:!0,client_app_version:!0,client_lock_status:!0,client_mono_time_ms:!0,clienttime:!0,component:!0,conference_name_raw:!0,creation_action:!0,error_details:!0,error_type:!0,event:!0,event_details:!0,event_fire_timestamp:!0,event_fire_timestamp_on_client:!0,exception_object:!0,experiments_enabled:!0,falco_batch_sequence:!0,funnel_session_id_raw:!0,group_id:!0,group_size:!0,guest_user_id:!0,kicked_user_id:!0,link_share_to:!0,local_call_id:!0,media_devices:!0,microphone_enabled:!0,open_link_from:!0,open_link_from_app_version:!0,reason:!0,referral_surface:!0,room_id_raw:!0,server_info_data:!0,source:!0,status:!0,surface:!0,targeted_user_ids:!0,thread_sync_room_data:!0,thread_type:!0,user_ids_to_be_removed:!0,video_call_link_hash_raw:!0,video_call_link_id_raw:!0,video_call_link_identifier_raw:!0,video_call_link_url_raw:!0};f["default"]=a}),66);
__d("getRequestConstUri",["ConstUriUtils","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("ConstUriUtils").getUri(window.location.href);if(a==null)throw c("unrecoverableViolation")("Cannot create ConstUriImpl of current request","comet_infra");return a}g["default"]=a}),98);
__d("useIsIGDDisappearingMessagesEnabledForThread",["DisappearingMessagesMode","I64","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b=d("react-compiler-runtime").c(6),e=(i||(i=c("useReStore")))(),g;b[0]!==e.tables.ig_thread_info||b[1]!==a?(g=function(){return d("ReQL").fromTableAscending(e.tables.ig_thread_info,["igDmSettingsMode","igThreadId"]).getKeyRange(a).take(1)},b[0]=e.tables.ig_thread_info,b[1]=a,b[2]=g):g=b[2];var j;b[3]!==e||b[4]!==a?(j=[e,a],b[3]=e,b[4]=a,b[5]=j):j=b[5];b=d("ReQLSuspense").useFirst(g,j,f.id+":25");j=(h||(h=d("I64"))).to_int32((g=b==null?void 0:b.igDmSettingsMode)!=null?g:(h||(h=d("I64"))).zero);return j===c("DisappearingMessagesMode").ON}g["default"]=a}),98);
__d("useIGDIsE2EECallingEnabled",["IGDInstamadilloUtils","MWLSThread","react-compiler-runtime","useIsIGDDisappearingMessagesEnabledForThread"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=d("react-compiler-runtime").c(2),e=c("useIsIGDDisappearingMessagesEnabledForThread")(a);a=d("MWLSThread").useThread(a);var f;b[0]!==a?(f=d("IGDInstamadilloUtils").isInstamadilloCutover(a),b[0]=a,b[1]=f):f=b[1];a=f;return e||a}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("EBSMProperties",[],(function(a,b,c,d,e,f){"use strict";a=["encrypted_backups_virtual_devices","secure_encrypted_backups_recovery_code_status","device_metadata","secure_encrypted_backups_epochs","secure_encrypted_backups_client_state","encrypted_backups","experiences_shared_state","auto_restore_opt_out"];b=new Set(["secure_encrypted_backups_client_state","secure_encrypted_backups_epochs"]);c={dbVersion:5,mandatoryTables:b,persistedTables:new Set(a),persistedTablesArray:a};d=c;f["default"]=d}),66);
__d("IndexedDbPolyfills",[],(function(a,b,c,d,e,f){"use strict";var g=function(){function a(){this.$1=new Map()}var b=a.prototype;b.emit=function(a){var b=this.$1.get(a);for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];if(b!==void 0)for(var f of b)f.apply(void 0,d);var g=this["on"+a];g!=null&&g.apply(void 0,d)};b.addEventListener=function(a,b,c){var d=this;c===void 0&&(c={});c=c;c=c.signal;var e=this.$1.get(a);e===void 0&&(e=new Set(),this.$1.set(a,e));e.add(b);c!=null&&(c.onabort=function(){d.removeEventListener(a,b)})};b.removeEventListener=function(a,b){a=this.$1.get(a);if(a===void 0)return;a["delete"](b)};return a}();a=function(){return function(a,b){a=this.openCursor(a!=null?a:null);var c=[],d=new g();a.onsuccess=function(a){a=a.target.result;if(a!=null&&(b===void 0||c.length<b))c.push(a.value),a["continue"]();else{d.result=c;d.onsuccess==null?void 0:d.onsuccess({target:{readyState:"done",result:c}});return}};a.onerror=function(a){d.onerror==null?void 0:d.onerror(a)};return d}};b=typeof window!=="undefined"?window:self;typeof b.IDBObjectStore!=="undefined"&&b.IDBObjectStore.prototype.getAll===void 0&&(b.IDBObjectStore.prototype.getAll=a());f.IDBRequest=g;f.getAll=a}),66);
__d("LSAppendDataTraceAddonStoredProcedure",["LSAppendDataTraceAddon","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSAppendDataTraceAddon"),e.dataTraceId,e.checkPointId,e.syncChannel,e.errorMessage,e.tags);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSBitOffset",["I64","LSBitFlag"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return d("LSBitFlag").set((h||(h=d("I64"))).lsl_(h.one,h.to_int32(a)),b)}function b(a,b){return d("LSBitFlag").clear((h||(h=d("I64"))).lsl_(h.one,h.to_int32(a)),b)}g.set=a;g.clear=b;g.empty=(h||(h=d("I64"))).zero}),98);
__d("LSContactBitOffset",["I64","LSBitFlag","LSBitOffset"],(function(a,b,c,d,e,f,g){"use strict";var h;c=["capabilities","capabilities2"];function a(a,b){return i(a,b,!1)}function i(a,b,c){var e=b.capabilities,f=b.capabilities2;if(a>=64){return f==null?c:d("LSBitFlag").has((h||(h=d("I64"))).lsl_(h.one,a-64),(f=b.capabilities2)!=null?f:d("LSBitOffset").empty)}return e==null?c:d("LSBitFlag").has((h||(h=d("I64"))).lsl_(h.one,a),(f=b.capabilities)!=null?f:d("LSBitOffset").empty)}function b(a,b){return d("LSBitFlag").has((h||(h=d("I64"))).lsl_(h.one,a-64),b!=null?b:d("LSBitOffset").empty)}g.contactCapabilityFields=c;g.has=a;g.hasWithDefault=i;g.contactCapabilitiesHas=b}),98);
__d("LSContactBlockedByViewerStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({UNBLOCKED:0,MESSAGE_BLOCKED:1,FULLY_BLOCKED:2});f["default"]=a}),66);
__d("LSContactTypeExact",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,FB_USER:1,MESSENGER_ONLY:2,DEACTIVATED_ALLOWED_ON_MESSENGER:3,MESSENGER_KID:4,FB_PAGE:5,FB_PAGE_PERSONA:6,IG_USER:7,MESSENGER_CALL_GUEST:8,WHATSAPP:9,GUEST_USER:10,IG_BUSINESS_USER:11,IG_CREATOR_USER:12,FB_SINGLE_OWNER_ADDITIONAL_PROFILE:13,PROXY_OCULUS_USER:14,WORK_VC_ENDPOINT:15,GENERATIVE_AI_BOT:16,COMMUNITY_CHAT:17,INTEROP_3P_USER:18,FB_ONLY_NOT_ALLOWED_ON_MESSENGER:19,MESSENGER_ONLY_NOT_ALLOWED_ON_FB:20,ADDITIONAL_PROFILE_PLUS:21,MESSENGER_SPECTRA:22,GROUP_ANONYMOUS_PROFILE:50,USER_FOR_SUPPORT:51});f["default"]=a}),66);
__d("LSMailboxTaskCompletionApiOnTaskInsertion",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.islc(b.db.table(232).fetch(),0,b.i64.to_float(b.i64.cast([0,1]))),function(c){c=c.item;return b.db.table(233).add({taskId:a[0],notificationScopeKey:c.notificationScopeKey,notificationName:c.notificationName})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSCoreMailboxTaskCompletionApiOnTaskInsertionStoredProcedure";a.__tables__=["mailbox_task_completion_notification_context","mailbox_task_completion_api_tasks"];e.exports=a}),null);
__d("LSMailboxType",[],(function(a,b,c,d,e,f){a=Object.freeze({MESSENGER:0,COMMUNITIES:1,TINCAN:1024,TAM:4096});f["default"]=a}),66);
__d("LSMessagingThreadAttributionType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,UNKNOWN_TEST:1,UNKNOWN_FAILURE_RETRY:2,MESSENGER_INBOX:65536,MESSENGER_INBOX_IN_THREAD:65537,MESSENGER_INBOX_THREAD_LIST:65538,MESSENGER_INBOX_NESTED_FOLDER:65539,MESSENGER_INBOX_RECENT_THREADS:65540,MESSENGER_INBOX_REMAINING_THREADS:65541,MESSENGER_INBOX_MESSAGE_SEARCH:65542,MESSENGER_INBOX_IMAGE_SENDING:65543,MESSENGER_INBOX_FORWARD:65544,MESSENGER_INBOX_ARCHIVED_THREADS:65545,MESSENGER_INBOX_PENDING_REQUESTS:65546,MESSENGER_INBOX_ACTIVE_CONTACTS:65547,MESSENGER_INBOX_THREAD_BANNER_BOTTOM_SHEET:65548,MESSENGER_INBOX_PEOPLE_YOU_MAY_KNOW:65549,MESSENGER_INBOX_HOLIDAY_CARD_SHARE_SHEET:65550,MESSENGER_INBOX_HOLIDAY_CARD_SHARE_SHEET_QP:65551,MESSENGER_INBOX_META_AI_FAB:65552,MESSENGER_INBOX_META_AI_LONG_PRESS_MENU:65553,MESSENGER_INBOX_PINNED_THREAD:65554,MESSENGER_INBOX_PEOPLE_YOU_MAY_MESSAGE:65555,MESSENGER_UNIVERSAL_SEARCH:131072,MESSENGER_UNIVERSAL_SEARCH_NULL_STATE:131073,MESSENGER_UNIVERSAL_SEARCH_KEY_PRESSED:131074,MESSENGER_UNIVERSAL_SEARCH_MESSAGE_SEARCH:131075,MESSENGER_UNIVERSAL_SEARCH_ADVANCED_CONTENT_SEARCH:131076,MESSENGER_UNIVERSAL_SEARCH_AI_PROMPT:131077,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD:131078,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_AIRPLANE_SEND:131079,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_KEYBOARD_SEND:131080,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_DONUT:131081,MESSENGER_UNIVERSAL_SEARCH_AI_NULLSTATE_DONUT:131082,MESSENGER_UNIVERSAL_SEARCH_AI_NULLSTATE_AIRPLANE_SEND:131083,MESSENGER_UNIVERSAL_SEARCH_META_AI_SEARCH_RESULT:131084,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_SNIPPET:131085,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_KEYBOARD_SEND_SNIPPET:131086,MESSENGER_UNIVERSAL_SEARCH_SERP_SNIPPET:131087,MESSENGER_UNIVERSAL_SEARCH_SERP_SNIPPET_PILL:131088,MESSENGER_UNIVERSAL_SEARCH_AI_DISCOVERY_MODULE:131089,MESSENGER_UNIVERSAL_SEARCH_KEY_PRESSED_WITH_SNIPPET:131090,MONTAGE_AND_ACTIVE_NOW:196608,MONTAGE_AND_ACTIVE_NOW_MONTAGE_INBOX_UNIT:196609,MONTAGE_AND_ACTIVE_NOW_ACTIVE_NOW:196610,MONTAGE_AND_ACTIVE_NOW_INBOX_COMPOSER:196611,MONTAGE_AND_ACTIVE_NOW_ACTIVE_AND_HAS_STORY:196612,MONTAGE_AND_ACTIVE_NOW_CUSTOM_STATUS:196613,MONTAGE_AND_ACTIVE_NOW_NOTES:196614,MONTAGE_AND_ACTIVE_NOW_SEE_ALL_ACTIVE:196615,MONTAGE_AND_ACTIVE_NOW_AN_TRAY_STORY_REPLY:196616,MESSENGER_ACTIVE_NOW_FRIENDS_TAB:262144,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_FRIENDS_TAB:262145,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_PLACE_HOLDER:262146,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_RECENT_ACTIVE:262147,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_RECENT_ACTIVE_AND_STORY:262148,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_CONTENT_DISCOVERY:262149,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_META_AI_FAB:262150,MESSENGER_PENDING_REQUESTS:327680,MESSENGER_PENDING_REQUESTS_INBOX_THREAD_LIST:327681,MESSENGER_PENDING_REQUESTS_PENDING_REQUESTS_PAGE:327682,MESSENGER_BROADCAST_FLOW:393216,MESSENGER_BROADCAST_FLOW_FROM_MESSENGER:393217,MESSENGER_BROADCAST_FLOW_FROM_FB:393218,MESSENGER_BROADCAST_FLOW_FROM_EXTERNAL:393219,MESSENGER_BROADCAST_FLOW_FROM_FB__NEWSFEED_SHARESHEET:393220,MESSENGER_BROADCAST_FLOW_FROM_FB__NEWSFEED_GOODWILL_COMPOSER:393221,MESSENGER_BROADCAST_FLOW_FROM_FB__SHORTS_VIEWER:393222,MESSENGER_BROADCAST_FLOW_FORWARD_GUTTER:393223,MESSENGER_BROADCAST_FLOW_FORWARD_LONGCLICK:393224,MESSENGER_BROADCAST_FLOW_MESSENGER_PHOTO_VIEW:393225,MESSENGER_OMNIPICKER:458752,MESSENGER_OMNIPICKER_NULL_STATE:458753,MESSENGER_OMNIPICKER_KEY_PRESSED:458754,MESSENGER_NOTIFICATION:524288,MESSENGER_NOTIFICATION_IN_THREAD_REPLY:524289,MESSENGER_NOTIFICATION_LONGPRESS_REPLY:524290,MESSENGER_NOTIFICATION_LONGPRESS_REACTION:524291,CLICK_TO_MESSENGER_AD:589824,CLICK_TO_MESSENGER_AD_FROM_NEWSFEED:589825,CLICK_TO_MESSENGER_AD_SEND_MESSAGE_CTA:589826,CLICK_TO_MESSENGER_AD_VIEW_AND_MESSAGE:589827,CLICK_TO_MESSENGER_AD_SEND_MESSAGE_CTA__NEWSFEED_CTM_ADS_CTA:589828,CLICK_TO_MESSENGER_AD_FROM_NEWSFEED_OPTIMISTIC_LTV:589829,CLICK_TO_MESSENGER_AD_FROM_NEWSFEED_LEAD_GEN:589830,PAYMENTS:655360,PAYMENTS_BUBBLE_CLICK:655361,RTC:720896,RTC_VOIP_INCALL:720897,RTC_DRAWER_PROMOTION:720898,FB_PAGE:786432,FB_PAGE_ABOUT_CARD:786433,FB_PAGE_PROFILE_HEADER_MESSAGE_BUTTON:786434,FB_PAGE_PROFILE_FOOTER_MESSAGE_BUTTON:786435,FB_PAGE_PROFILE_MORE_DRAWER:786436,FB_PAGE_RESPONSIVENESS_CONTEXT_CARD:786437,FB_PAGE_PYMM_RHC:786439,FB_PAGE_PAGES_HOME_FRIENDS_DIALOG:786440,FB_PAGE_PAGES_PRIVATE_REPLY:786441,FB_PROFILE:851968,FB_PROFILE_TIMELINE_MESSAGE_BUTTON:851969,FB_PROFILE_FACEBOOK_PROFILE:851970,FB_PROFILE_MESSAGE_BUTTON:851971,FB_PROFILE_MESSAGE_BUTTON_BLOKS_URL:851972,FB_PROFILE_PROFILE_HEADER_COMPOSER:851973,FB_PROFILE_MUTUAL_FRIENDS_DIALOG:851974,FB_PROFILE_DIRECTORY_MESSENGER_MESSAGE_BLOKS_URL:851975,FB_SEARCH:917504,FB_SEARCH_CONTEXTUAL_PROFILE_ACTION_BAR_FROM_SEARCH:917505,FB_SEARCH_SEARCH_MESSAGE_BUTTON:917506,FB_SEARCH_FB_MESSAGE_SEARCH_RESULTS:917507,FB_SEARCH_HIGH_CONFIDENCE_CARD:917508,FB_SEARCH_MENTIONS:917509,FB_SEARCH_NULLSTATE_CTA:917510,FB_SEARCH_NULL_STATE:917511,FB_SEARCH_TYPEAHEAD:917512,FB_SEARCH_TYPEAHEAD_AIRPLANE_SEND:917513,FB_SEARCH_TYPEAHEAD_KEYBOARD_SEND:917514,FB_SEARCH_TYPEAHEAD_DONUT:917515,FB_SEARCH_NULL_STATE_DONUT:917516,FB_SEARCH_NULL_STATE_AIRPLANE_SEND:917517,FB_SEARCH_NULL_STATE_KEYBOARD_SEND:917518,FB_SEARCH_SERP_PROMPT_SUGGESTIONS:917519,FB_SEARCH_AI_DISCOVERY_MODULE:917520,FB_SEARCH_TYPEAHEAD_AI_SHORTCUT:917521,CRYPTO:983040,MESSENGER_MONTAGE_COMPOSER:1048576,MESSENGER_MONTAGE_COMPOSER_FRIENDS_TAB:1048577,MESSENGER_MONTAGE_COMPOSER_FRIENDS_TAB_STORY_AND_ACTIVE_NOW:1048578,MESSENGER_MONTAGE_REPLY:1114112,MESSENGER_MONTAGE_REPLY_INBOX_THREAD_LIST_PROFILE:1114113,MESSENGER_MONTAGE_REPLY_REPLY_CONTEXT:1114114,MESSENGER_MONTAGE_REPLY_THREAD_NAV_BAR:1114115,MESSENGER_MONTAGE_REPLY_INBOX_THREAD_LIST_PROFILE_AUTHOR_PROFILE:1114116,MESSENGER_MONTAGE_REPLY_REPLY_CONTEXT_AUTHOR_PROFILE:1114117,MESSENGER_MONTAGE_REPLY_THREAD_NAV_BAR_AUTHOR_PROFILE:1114118,MESSENGER_MONTAGE_REPLY_ONE_TO_ONE_CHAT_THREAD_STORY_BUBBLE:1114119,MESSENGER_THREAD_MEMBERS_LIST:1179648,MARKETPLACE:1245184,MARKETPLACE_ACTIVITY_BANNER:1245185,MARKETPLACE_SEND_MESSAGE:1245186,MARKETPLACE_GEN_AI_ACCORDION_META_AI_PILL:1245187,MARKETPLACE_GEN_AI_ACCORDION_FOLLOW_UP_QUESTION:1245188,MARKETPLACE_GEN_AI_PRICE_CHECK_META_AI_PILL:1245189,MARKETPLACE_GEN_AI_PRICE_CHECK_FOLLOW_UP_QUESTION:1245190,MARKETPLACE_META_AI_PILLS_MODULE_META_AI_PILL_GENERIC:1245191,MARKETPLACE_META_AI_PILLS_MODULE_META_AI_PILL_WITH_PROMPT:1245192,MARKETPLACE_GEN_AI_ENRICHED_DESCRIPTION_META_AI_PILL_GENERIC:1245193,MARKETPLACE_GEN_AI_ENRICHED_DESCRIPTION_META_AI_PILL_WITH_PROMPT:1245194,FB_STORY:1310720,FB_STORY_VIEWER_SHEET_MENU:1310721,FB_STORY_VIEWER_SHEET_ROW:1310722,FB_STORY_STORIES_JEWEL_NOTIFICATION:1310723,FB_STORY_STORIES_PUSH_NOTIFICATION:1310724,FB_STORY_STORIES_VIEWER_CONSUMER_REPLY:1310725,FB_STORY_STORIES_VIEWER_CONSUMER_ARTIFACT:1310726,FB_STORY_STORIES_PAGE_STORY_CONVERSATIONS:1310727,FB_STORY_SOCIAL_CONTEXT_CONVERSATIONS:1310728,FB_STORY_MENTIONS:1310729,FB_STORY_SELF_STORY_SEND:1310730,FB_STORY_SHARESHEET:1310731,FB_STORY_NOTES:1310732,FB_STORY_TRY_META_AI_STICKER:1310733,FB_STORY_CHALLENGES_NOMINATION:1310734,WORKSPEED:1376256,WORKSPEED_COMPOSER_LIKE_BUTTON:1376257,WORKSPEED_COMPOSER_GIF_PICKER:1376258,MDOTME:1441792,MDOTME_ORGANIC_POST:1441793,MDOTME_MARKETING_EMAIL:1441794,MDOTME_MBS_OFFSITE_EMAIL:1441795,CUSTOMER_CHAT_PLUGIN:1507328,CUSTOMER_CHAT_PLUGIN_MOBILE_REDIRECT:1507329,CUSTOMER_CHAT_PLUGIN_UPGRADE_FLOW:1507330,CUSTOMER_CHAT_PLUGIN_RE_ENGAGEMENT:1507331,FB_FEED:1572864,FB_FEED_ORGANIC_POST:1572865,FB_FEED_ORGANIC_POST_VIEW_AND_MESSAGE:1572866,FB_FEED_QUESTION_TRIGGERED_CONVO:1572867,FB_FEED_DYNAMIC_HOVER_CARD:1572868,FB_FEED_ORGANIC_POST__NEWSFEED_PAGE_POST_CTA:1572869,FB_FEED_ORGANIC_POST__NEWSFEED_BUMPER_SMCTA:1572870,FB_FEED_BCF_OPEN_CHAT_BUTTON:1572871,FB_FEED_REACTORS_LIST_MESSAGE_BUTTON:1572872,FB_FEED_REPLY_TO_AUTHOR:1572873,FB_FEED_UFI_SEND_SUGGESTIONS:1572874,FB_FEED_BCF:1572875,FB_FEED_COMMUNITY_CHATS_FEED_POST:1572876,FB_FEED_SOCIAL_CONNECTIONS_QP:1572877,FB_FEED_META_AI_DEEP_DIVES:1572878,FB_FEED_META_AI_SHARE_SHEET:1572879,FB_FEED_META_AI_TRENDING_DISCOVER_UNIT:1572880,FB_FEED_META_AI_POST_DEEPDIVE_PILL:1572881,FB_FEED_META_AI_EDUCATIONAL_QP:1572882,FB_FEED_META_AI_ENTITY_SUMMARIZATION_DISCOVER_UNIT:1572883,FB_FEED_META_AI_COMMENTS_SUMMARY:1572884,FB_FEED_META_AI_FAB:1572885,FB_FEED_META_AI_ADS_CAMPAIGN:1572886,FB_FEED_META_AI_ANSWERSHEET:1572887,FB_FEED_META_AI_BOOKMARK:1572888,FB_FEED_META_AI_FAB_COMMENTS_SUMMARY:1572889,FB_FEED_META_AI_FAB_CONTEXTUAL:1572890,FB_FEED_FEED_POLL:1572891,FB_FEED_BIZ_VOICE_AGENT:1572892,FB_NOTIFICATION:1638400,FB_NOTIFICATION_JEWEL_NOTIF:1638401,FB_NOTIFICATION_PUSH_NOTIF:1638402,FB_EVENT:1703936,FB_EVENT_MESSAGE_HOST:1703937,FB_EVENT_SHARE_CLASS_MATERIALS:1703938,SUPPORT_RESOURCES:1769472,SUPPORT_RESOURCES_FRX_ACTION:1769473,LEAD_GEN_MESSAGING:1835008,LEAD_GEN_MESSAGING_PRE_SUBMISSION:1835009,LEAD_GEN_MESSAGING_POST_SUBMISSION:1835010,LEAD_GEN_MESSAGING_CROSS_CHANNEL_VERTICAL_PRESENT_ANDROID:1835011,LEAD_GEN_MESSAGING_CROSS_CHANNEL_HSCROLL_ANDROID:1835012,MESSENGER_GRAPH:1900544,MESSENGER_GRAPH_SELECT_CONTACT:1900545,MESSENGER_CHAT:1966080,MESSENGER_CHAT_FROM_JEWEL__THREAD_LIST:1966081,MESSENGER_CHAT_IN_THREAD:1966082,MESSENGER_CHAT_FORWARD:1966083,MESSENGER_CHAT_NOTE_POPOVER:1966084,MESSENGER_ARCHIVED_THREADS:2031616,MESSENGER_ARCHIVED_THREADS_ARCHIVED_THREADS_FOLDER:2031617,JEWEL:2097152,JEWEL_THREAD_LIST:2097153,JEWEL_SEARCH:2097154,JEWEL_NEW_MESSAGE:2097155,JEWEL_NESTED_FOLDER:2097156,CHATHEADS:2162688,CHATHEADS_RECENT_THREADS:2162689,CHATHEADS_OVERFLOW:2162690,CHATHEADS_NEW_MESSAGE:2162691,SIDEBAR:2228224,SIDEBAR_CONTACTS_LIST:2228225,SIDEBAR_CONTACTS_SEARCH:2228226,SIDEBAR_CONTACTS_GROUPS:2228227,SIDEBAR_CONTACTS_COMMUNITY_CHATS:2228228,MESSENGER_COMMUNITY_MESSAGING:2293760,MESSENGER_COMMUNITY_MESSAGING_COMMUNITY_CHANNEL:2293761,MESSENGER_COMMUNITY_MESSAGING_FULLSCREEN_CHAT:2293762,MESSENGER_COMMUNITY_MESSAGING_CHANNEL_CREATION_NOTIFICATION:2293763,MESSENGER_COMMUNITY_MESSAGING_FRIEND_JOINED_COMMUNITY_CHAT_NOTIFICATION:2293764,MESSENGER_COMMUNITY_MESSAGING_COMMUNITY_FRIENDS_DIALOG:2293765,FB_PLATFORM_LOGIN:2359296,FB_PLATFORM_LOGIN_LOGIN_CONNECT_WITH_MESSENGER:2359297,CONTACT_MANAGER:2424832,CONTACT_MANAGER_CONTACT_SHARE:2424833,CONTACT_MANAGER_PEOPLE_TAB_CONTACT_LIST:2424834,CONTACT_MANAGER_PEOPLE_TAB_CONTACT_SEARCH:2424835,CONTACT_MANAGER_ICON_CONTACT_LIST:2424836,CONTACT_MANAGER_ICON_CONTACT_SEARCH:2424837,MESSAGING_INBOX_IN_BLUE:2490368,MESSAGING_INBOX_IN_BLUE_THREAD_LIST:2490369,MESSAGING_INBOX_IN_BLUE_PEOPLE_PICKER:2490370,MESSAGING_INBOX_IN_BLUE_INBOX_ICON:2490371,MESSAGING_INBOX_IN_BLUE_SWIPE_FROM_RIGHT:2490372,MESSAGING_INBOX_IN_BLUE_MIB_NOTIFICATION:2490373,MESSAGING_INBOX_IN_BLUE_ACTIVE_NOW:2490374,MESSAGING_INBOX_IN_BLUE_SUGGESTED_CHATS:2490375,MESSAGING_INBOX_IN_BLUE_CHAT_PREVIEW_BANNER:2490376,MESSAGING_INBOX_IN_BLUE_THREAD_VIEW_CORE_NULL_STATE:2490377,MESSAGING_INBOX_IN_BLUE_MESSAGE_REQUESTS:2490378,MESSAGING_INBOX_IN_BLUE_SPAM:2490379,MESSAGING_INBOX_IN_BLUE_FB_GROUPS:2490380,MESSAGING_INBOX_IN_BLUE_MESSENGER_PEEK_STATE_BUTTON:2490381,MESSAGING_INBOX_IN_BLUE_MESSENGER_PEEK_STATE_TOOLTIP:2490382,MESSAGING_INBOX_IN_BLUE_BROADCAST_FLOW:2490383,MESSAGING_INBOX_IN_BLUE_THREAD_VIEW_HEADER:2490384,MESSAGING_INBOX_IN_BLUE_PRIVACY_SETTINGS:2490385,MESSAGING_INBOX_IN_BLUE_ARCHIVED_CHATS:2490386,MESSAGING_INBOX_IN_BLUE_UNIVERSAL_SEARCH:2490387,MESSAGING_INBOX_IN_BLUE_INBOX_SEARCH_BAR:2490388,MIB_NOTIFICATION:2555904,MIB_NOTIFICATION_PUSH_NOTIFICATION:2555905,MIB_NOTIFICATION_JEWEL_NOTIFICATION:2555906,MIB_NOTIFICATION_DIRECT_PUSH_NOTIF:2555907,MIB_NOTIFICATION_DIRECT_JEWEL_NOTIF:2555908,MESSENGER_RESTRICTED_ACCOUNTS:2621440,ARMADILLO_CUTOVER_THREAD_LINKING_MESSAGE:2686976,CALLS_TAB:2752512,MINI_SHOP_VIEW_MENU_BUTTON:2818048,SHARESHEET:2883584,SHARESHEET_GENERALIZED_BROADCAST_FLOW:2883585,SHARESHEET_OFF_PLATFORM_SHARING_H_SCROLL:2883586,SHARESHEET_BROADCAST_CHANNEL:2883587,UFI:2949120,UFI_GENERALIZED_BROADCAST_FLOW:2949121,CHATHEAD_CLICK_COLLAPSED:3014656,TIMELINE_MESSAGE_BUTTON:3080192,DIRECT_REPLY_INTENT:3145728,FB_GROUPS:3211264,FB_GROUPS_INBOX:3211265,FB_GROUPS_PICKER_EXISTING_CHAT:3211266,FB_GROUPS_PICKER_JOIN_CHAT:3211267,FB_GROUPS_MEMBER_LIST:3211268,FB_GROUPS_INLINE_COMPOSER:3211269,FB_GROUPS_SCOPED_SEARCH:3211270,FB_GROUPS_UNJOINED_MALL_HEADER:3211271,FB_GROUPS_DISCOVER_FEED_UNIT:3211272,FB_GROUPS_ANSWER_AGENT_CONTEXTUAL_PROFILE:3211273,FB_GROUPS_ANSWER_AGENT_FOLLOWUP_SECTION:3211274,FB_GROUPS_NOTIFICATION_MESSAGING_IN_BLUE_DIRECT_MESSAGE:3211275,FB_GROUPS_UGC:3211276,FB_GROUPS_UGC_POST:3211277,FB_GROUPS_UGC_MALL_PLINK:3211278,FB_GROUPS_UGC_MALL_NUX:3211279,FB_GROUPS_UGC_ADMIN_TESTING:3211280,FB_GROUPS_UGC_INTRO_POST:3211281,FB_GROUPS_UGC_QP:3211282,FB_GROUPS_UGC_DEEP_DIVE_GET_ANSWER_PILL:3211283,FB_GROUPS_UGC_DEEP_DIVE_PILL:3211284,FB_GROUPS_UGC_FAB:3211285,FB_GROUPS_UGC_REMINDER_NOTIF:3211286,FB_GROUPS_UGC_COMMENT_RESPONSE_UPSELL:3211287,FB_GROUPS_UGC_CONTEXTUAL_PROFILE:3211288,FB_GROUPS_UGC_DEEP_DIVE_ASK_SOMETHING_ELSE:3211289,FB_GROUPS_UGC_CONTEXTUAL_CARD_ASK_SOMETHING_ELSE:3211290,DEVICES:3276800,DEVICES_STELLA:3276801,FB_WELLBEING:3342336,FB_WELLBEING_INCALL_UNBLOCKING_NOTIFICATION:3342337,MESSENGER_DEEP_LINKING:3407872,READ_ONLY_CUTOVER_THREAD:3473408,READ_ONLY_CUTOVER_THREAD_ARMADILLO_THREAD:3473409,READ_ONLY_CUTOVER_THREAD_THREAD_DETAIL:3473410,ARMADILLO_THREAD:3538944,ARMADILLO_THREAD_READ_ONLY_CUTOVER_THREAD:3538945,ARMADILLO_THREAD_EXTERNAL_LINK:3538946,FB_SHORTS:3604480,FB_SHORTS_PROFILE:3604481,FB_SHORTS_REACTORS_LIST_MESSAGE_BUTTON:3604482,SEND_PLUGIN:3670016,SEND_AS_MESSAGE_FROM_NT:3735552,MESSENGER_PUBLIC_CHATS_MESSAGING:3801088,MESSENGER_GROWTH:3866624,MESSENGER_GROWTH_NOTIFICATIONS_ENTRYPOINT:3866625,MESSENGER_GROWTH_MESSAGE_REQUEST_JEWEL:3866626,MESSENGER_GROWTH_FRIENDLY_FEED_ACTIVE_NOW:3866627,FRIENDS_HOME:3932160,FRIENDS_HOME_ACTIVE_NOW:3932161,FRIENDS_HOME_MESSAGE_NEW_FRIENDS:3932162,FRIENDS_HOME_POST_ACCEPT_MESSAGING:3932163,FRIENDS_HOME_SENDER_POST_ACCEPT_WAVE:3932164,EXTERNAL_LINK_XMA:3997696,EXTERNAL_LINK_XMA_FROM_COMPOSER:3997697,EXTERNAL_LINK_XMA_FROM_DEEP_LINKING:3997698,EXTERNAL_LINK_XMA_FROM_SHARE_EXTENSION:3997699,FB_NOTIFICATIONS:4063232,QUICK_PROMOTION:4128768,QUICK_PROMOTION_CTA:4128769,QUICK_PROMOTION_INTERSTITIAL:4128770,QUICK_PROMOTION_TOP_BANNER:4128771,FBM_IN_APP_NOTIFS:4194304,CREATOR_SUPPORT:4259840,CREATOR_SUPPORT_MESSENGER_TOAST:4259841,FB_INSTANT_GAME:4325376,COMMUNITY_CHATS_IN_FEED:4390912,COMMUNITY_CHATS_IN_FEED_PERMALINK:4390913,UNIFIED_BUSINESS_INBOX:4456448,ROLLCALL:4521984,HIGHLIGHTS_TAB:4587520,HIGHLIGHTS_TAB_FEED_INLINE:4587521,HIGHLIGHTS_TAB_MEDIA_VIEWER:4587522,HIGHLIGHTS_TAB_THREAD_VIEW:4587523,HIGHLIGHTS_TAB_FEED_INLINE_CONNECTED_CHAT:4587524,HIGHLIGHTS_TAB_FEED_INLINE_LOCAL_EVENT:4587525,HIGHLIGHTS_TAB_FEED_INLINE_FRIENDS_UPDATE:4587526,HIGHLIGHTS_TAB_FEED_INLINE_BIRTHDAY:4587527,HIGHLIGHTS_TAB_MEDIA_VIEWER_CONNECTED_CHAT:4587528,HIGHLIGHTS_TAB_MEDIA_VIEWER_FRIENDS_UPDATE:4587529,HIGHLIGHTS_TAB_THREAD_VIEW_CONNECTED_CHAT:4587530,HIGHLIGHTS_TAB_THREAD_VIEW_LOCAL_EVENT:4587531,HIGHLIGHTS_TAB_THREAD_VIEW_FRIENDS_UPDATE:4587532,HIGHLIGHTS_TAB_THREAD_VIEW_BIRTHDAY:4587533,HIGHLIGHTS_TAB_THREAD_VIEW_NOTE:4587534,HIGHLIGHTS_TAB_FEED_INLINE_NOTE:4587535,HIGHLIGHTS_TAB_CONNECTED_BROADCAST_CHANNEL_SHARE_SHEET:4587536,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER_BIRTHDAY:4587537,HIGHLIGHTS_TAB_SHARE_SHEET_HOLIDAY_CARD:4587538,HIGHLIGHTS_TAB_META_AI_BIRTHDAY:4587539,HIGHLIGHTS_TAB_QUICK_REACT_CONNECTED_CHAT:4587540,HIGHLIGHTS_TAB_QUICK_REACT_LOCAL_EVENT:4587541,HIGHLIGHTS_TAB_QUICK_REACT_FRIENDS_UPDATE:4587542,HIGHLIGHTS_TAB_QUICK_REACT_BIRTHDAY:4587543,HIGHLIGHTS_TAB_QUICK_REACT_STORIES:4587544,HIGHLIGHTS_TAB_QUICK_REACT_NOTE:4587545,HIGHLIGHTS_TAB_QUICK_REACT_LIFE_EVENT:4587546,HIGHLIGHTS_TAB_META_AI_FAB:4587547,HIGHLIGHTS_TAB_FEED_INLINE_CHAT_WITH_FRIENDS:4587548,HIGHLIGHTS_TAB_THREAD_VIEW_CHAT_WITH_FRIENDS:4587549,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER_LOCAL_EVENT:4587550,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER_FRIENDS_UPDATE:4587551,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER_NOTE:4587552,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER_CHAT_WITH_FRIENDS:4587553,HIGHLIGHTS_TAB_FB_POST_MEMORIES_SHARE_SHEET:4587554,HIGHLIGHTS_TAB_FEED_INLINE_FB_POST_MEMORIES:4587555,HIGHLIGHTS_TAB_THREAD_VIEW_FB_POST_MEMORIES:4587556,HIGHLIGHTS_TAB_QUICK_REACT_FB_POST_MEMORIES:4587557,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER_FB_POST_MEMORIES:4587558,MARKETPLACE_INBOX:4653056,ONE_TAP_MESSAGE_QUICK_SHARE:4718592,HIGHLIGHTS_TAB_STORIES_TRAY:4784128,FB_BIRTHDAY_CENTER:4849664,MESSENGER_SIRIKIT:4915200,MESSENGER_SIRIKIT_CALLKIT_QUICK_REPLY:4915201,MESSENGER_SIRIKIT_VOICE_COMMAND:4915202,CLICK_TO_SUBSCRIBE_AD:4980736,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER:5046272,FB_UNIVERSAL_SEARCH:5111808,FB_UNIVERSAL_SEARCH_NULL_STATE_SUGGESTED:5111809,FB_UNIVERSAL_SEARCH_NULL_STATE_RECENT:5111810,FB_UNIVERSAL_SEARCH_QUERY_RESULTS:5111811,FBLITE_MESSAGING:5177344,FBLITE_MESSAGING_FROM_EXTERNAL:5177345,FBLITE_MESSAGING_FORWARD_FROM_BROADCAST_FLOW:5177346,FBLITE_MESSAGING_IN_THREAD:5177349,FBLITE_MESSAGING_ACTIVE_NOW:5177352,FBLITE_MESSAGING_ARCHIVED_CHATS:5177353,FBLITE_MESSAGING_SPAM:5177354,FBLITE_MESSAGING_MESSAGE_REQUESTS:5177355,FBLITE_MESSAGING_MARKETPLACE:5177356,FBLITE_MESSAGING_THREAD_MEMBERS_LIST:5177357,FBLITE_MESSAGING_READONLY_VERSION_OF_CUTOVER_THREAD:5177358,FBLITE_MESSAGING_QP:5177359,FBLITE_MESSAGING_META_AI_PROFILE_SHARE:5177360,FBLITE_MESSAGING_IMAGE_VIEWER_REPLY_COMPOSER:5177361,FBLITE_MESSAGING_META_AI_BOOKMARK:5177362,FBLITE_MESSAGING_NOTIFICATION:5242880,FBLITE_MESSAGING_NOTIFICATION_IN_THREAD_REPLY:5242881,FBLITE_MESSAGING_NOTIFICATION_DIRECT_REPLY:5242882,FBLITE_INBOX:5308416,FBLITE_INBOX_UNIVERSAL_SEARCH:5308417,FBLITE_INBOX_PEOPLE_PICKER:5308418,FBLITE_INBOX_RECENT_THREADS:5308419,FBLITE_INBOX_REMAINING_THREADS:5308420,FBLITE_INBOX_INBOX_FOLLOWUP:5308421,FBLITE_INBOX_THREAD_WITH_DRAFT_MESSAGE:5308422,FBLITE_INBOX_META_AI_FAB:5308423,SHARED_ALBUM:5373952,QUICK_REPLIES:5439488,QUICK_REPLIES_TRAY:5439489,MESSENGER_CTA_AFTER_CALL_ENDS:5505024,MESSENGER_CONVERSATION_SHORTCUT:5570560,CC_ADMIN_SEND_MESSAGE_HINT_CARD:5636096,CC_MEMBER_SEND_MESSAGE_HINT_CARD:5701632,MSGR_AVATAR_DETAILS:5767168,PRIVATE_SHARING_FORWARD_SUPER_SHARE_SHEET:5832704,MEMORIES:5898240,META_AI_TAB:5963776,MEMORIES_NOTIFICATION:6029312,MEMORIES_QUICK_PROMOTION:6094848,MEMORIES_HIGHLIGHTS_TAB:6160384,MEMORIES_LIST:6225920,MSGR_PYMK_LIST_SCREEN:6291456,INSTAGRAM_WEB_SENDS:6356992,AI_SUGGESTED_PROMPT_TRAY:6422528,AI_SUGGESTED_PROMPT_ICEBREAKER:6488064,COMMUNITY_INVITE:6553600,COMMUNITY_CHAT_INVITE:6619136,AI_DISCOVERY_BOTTOM_SHEET:6684672,IN_THREAD_INVITE_MODEL:6750208,SUPPORT_FOLDER:6815744,MARKETPLACE_PDP:6881280,QR_CODE:6946816,WRITE_WITH_AI:7012352,AI_HOME_CHAT_WITH_AI:7077888,AI_HOME_INBOX_QP:7143424,AI_AGENT_MESSAGE_SHARE:7208960,AI_HOME_FROM_THREAD:7274496,AI_HOME_FROM_THREAD_DETAIL:7274497,AI_HOME_FROM_THREAD_HEADER:7274498,AI_HOME_FROM_THREAD_META_AI_THREAD_DETAIL:7274499,AI_HOME_FROM_THREAD_META_AI_THREAD_HEADER:7274500,AI_HOME_FROM_FOLDER_LIST:7340032,AI_HOME_FROM_FB_BOOKMARK:7405568,FB_FANDOM:7471104,AI_HOME_INBOX_RETENTION_QP:7536640,MEMORIES_INBOX_TRAY:7602176,MESSENGER_VOICEMAIL:7667712,AI_UGC_FB_FEED_QP:7733248,MESSENGER_INBOX_IP_QP:7798784,COMMUNITY_GROUP_CHAT_UPGRADES_INVITE:7864320,MESSENGER_SECRET_CONVERSATIONS:7929856,MESSENGER_SECRET_CONVERSATIONS_SECRET_CONVERSATIONS_FOLDER:7929857,CROSS_CUSTOMER_SUPPORT:7995392,CROSS_CUSTOMER_SUPPORT_FB_HELP_CENTER_META_AI_CARD:7995393,AI_LOOKUP:8060928,PINNED_MESSAGES_THREAD_DETAILS:8126464,CM_MEMBER_REPORTS_BLOKS:8192e3,MEMORIES_TEMPLATE:8257536,FB_TREP_UGC_CREATION:8323072,MESSENGER_STORIES_TAB:8388608,MESSENGER_STORIES_TAB_META_AI_FAB:8388609,META_AI_ENTITY_DETECTION:8454144,AI_HOME_FROM_AI_STUDIO_TAB:8519680,QR_CODE_LINK:8585216,META_AI_PROMPT_SHEET:8650752,UGC_BOT_IMMERSIVE_THREAD:8716288,UGC_BOT_IMMERSIVE_THREAD_AI_STUDIO_TAB:8716289,UGC_BOT_IMMERSIVE_THREAD_INBOX:8716290,UGC_BOT_IMMERSIVE_THREAD_AI_HOME:8716291,IGD_WEB_CHAT_TAB:8781824,IGD_WEB_CHAT_TAB_IN_THREAD:8781825,IGD_WEB_CHAT_TAB_NOTIFICATION:8781826,FB_PYMK_FEED_MESSAGE_BUTTON:8847360,MSGR_UGC_IMMERSIVE_THREAD:8912896,MSGR_UGC_IMMERSIVE_THREAD_AI_STUDIO_TAB:8912897,MSGR_UGC_IMMERSIVE_THREAD_LEFT_NAV_AI_STUDIO_TAB:8912898,MSGR_UGC_IMMERSIVE_THREAD_MORE_MENU_AI_STUDIO_TAB:8912899,MSGR_UGC_IMMERSIVE_THREAD_AI_STUDIO_TAB_AI_HOME:8912900,MSGR_UGC_IMMERSIVE_THREAD_COMPOSER_AI_HOME:8912901,MSGR_UGC_IMMERSIVE_THREAD_INBOX:8912902,MSGR_UGC_IMMERSIVE_THREAD_ACTIVE_NOW:8912903,MSGR_UGC_IMMERSIVE_THREAD_META_AI_HEADER_AI_HOME:8912904,MSGR_UGC_IMMERSIVE_THREAD_UGC_HEADER_AI_HOME:8912905,MSGR_UGC_IMMERSIVE_THREAD_THREAD_DETAIL_AI_HOME:8912906,MSGR_UGC_IMMERSIVE_THREAD_META_AI_THREAD_DETAIL_AI_HOME:8912907,MSGR_UGC_IMMERSIVE_THREAD_DEEPLINK:8912908,MSGR_UGC_IMMERSIVE_THREAD_NOTIFICATION:8912909,MSGR_UGC_IMMERSIVE_THREAD_AI_CREATION:8912910,MSGR_UGC_IMMERSIVE_THREAD_LEFT_NAV_AI_STUDIO_TAB_AI_HOME:8912911,MSGR_UGC_IMMERSIVE_THREAD_MORE_MENU_AI_STUDIO_TAB_AI_HOME:8912912,AI_THREAD_FROM_FF_THREAD:8978432,AI_THREAD_FROM_FF_THREAD_FF_THREAD_VIEW_META_AI_TASK:8978433,PHONE_NUMBER_MESSAGES:9043968,FUNDRAISER_SUPPORTERS_LIST:9109504,META_AI_SUMMARY:9175040,META_AI_SUMMARY_IN_THREAD:9175041,MESSENGER_NOTES:9240576,MESSENGER_NOTES_SELF_CONSUMPTION_DETAILS_LIST:9240577,MESSENGER_NOTES_NOTE_PROMPT_CONSUMPTION:9240578,MESSENGER_NOTES_NOTE_PROMPT_RESPONSE_CONSUMPTION:9240579,POKES_PLUS:9306112,POKES_PLUS_POKE_PLUS_DASHBOARD:9306113,STORIES_ATTRIBUTION:9371648,STORIES_ATTRIBUTION_STACKED_STORIES:9371649,ARMADILLO_CUTOVER_THREAD_BANNER:9437184,DMA_MSPLIT_FALLBACK_THREAD_NAVIGATION:9502720});f["default"]=a}),66);
__d("LocalStorageWrapper",["CurrentMessengerUser","WAResultOrError","isQuotaExceededError","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("PersistedQueue").__setRef("LocalStorageWrapper");function i(a){var b=null;try{b=window.localStorage;if(b!=null&&typeof b.setItem==="function"&&typeof b.removeItem==="function"){var c="__test__"+Date.now();b.setItem(c,"");b.removeItem(c)}else return null}catch(c){if(d("isQuotaExceededError").isStorageQuotaExceededError(b,c)===!1){a("Failed to get localstorage");return null}}return b}function a(a){try{a=i(a);return a!=null}catch(a){return!1}}function j(a){try{var b=0,c={};for(var d in a){if(!Object.prototype.hasOwnProperty.call(a,d))continue;var e=(a[d].length+d.length)*2;b+=e;e/1024>1e3&&(c[d.substr(0,50)]=(e/1024).toFixed(2))}c.total=(b/1024).toFixed(2);return JSON.stringify(c)}catch(a){return"Can't calculate localStorage"}}function b(a,b,c,e,f){if(a==null)return d("WAResultOrError").makeError("null-storage");try{f!==void 0?k(a,b,c,f):a.setItem(b,c)}catch(f){if(d("CurrentMessengerUser").isEmployee()){var g=j(a);h.onReady(function(a){a=a.isQueueActivateExperiment().toString();e(f+" - Storage quota exceeded while setting "+b+":"+c+", queueActivateExp:"+a+" "+g)})}else e(f+" - Storage quota exceeded while setting "+b+":"+c);return d("WAResultOrError").makeError("quota-exceeded")}return d("WAResultOrError").makeResult()}function k(a,b,c,d){try{a.setItem(b,c)}catch(e){d(e),a.setItem(b,c)}}function e(a,b,c){a==null?c("not storage found"):a.removeItem(b)}function f(a,b,c){if(a==null){c("not storage found");return null}else return a.getItem(b)}g.getStorage=i;g.isLocalStorageAvailable=a;g.setItemGuarded=b;g.removeItemGuarded=e;g.getItemGuarded=f}),98);
__d("MAWCryptoConsts",[],(function(a,b,c,d,e,f){"use strict";a=60*60;b=24*a;c=32;d=new Uint8Array(0).buffer;e=128;a=256;var g=12,h=1,i=2,j=2,k=4;b=b*30*6;var l=3,m="AES-GCM",n="HKDF",o="SHA-256";f.HKDF_SEED_LENGTH_IN_BYTES=c;f.HKDF_INFO=d;f.AES_GCM_TAG_LENGTH=e;f.AES_GCM_KEY_LENGTH=a;f.AES_GCM_IV_LENGTH_IN_BYTES=g;f.VERSION=h;f.CIPHER_ID=i;f.ADDITIONAL_DATA_LENGTH_IN_BYTES=j;f.EXTRA_ADDITIONAL_DATA_LENGTH_IN_BYTES=k;f.ENC_KEY_TTL=b;f.MAX_KEYCHAIN_SETUP_RETRIES=l;f.AES_GCM=m;f.HKDF=n;f.SHA256=o}),66);
__d("MAWKeychainUtil",[],(function(a,b,c,d,e,f){"use strict";function a(a){return self.crypto.getRandomValues(new Uint8Array(a))}function b(a){var b=a.reduce(function(a,b){return a+b.byteLength},0),c=new Uint8Array(b);a.reduce(function(a,b){c.set(new Uint8Array(b),a);return a+b.byteLength},0);return c.buffer}function c(a,b){return new Uint8Array([a,b]).buffer}function d(a){var b=a.length;if(b>0&&b%2===0&&/^[\da-f]+$/gi.test(a)){var c=[];for(var d=0,b=b/2;d<b;++d){var e=parseInt(a.substring(d*2,d*2+2),16);c.push(e)}return new Uint8Array(c)}else return null}f.getBufferWithRandomValuesFromLength=a;f.mergeBuffers=b;f.makeAAD=c;f.fromHexString=d}),66);
__d("MAWSubtleCrypto",[],(function(a,b,c,d,e,f){a=self.crypto;b=a&&(a.subtle||a.webkitSubtle||a.subtle);f.MAWSubtleCrypto=b}),66);
__d("MAWWebInitDataHelpers",["FBLogger","MessengerWebInitData"],(function(a,b,c,d,e,f,g){"use strict";function a(){return 2}function b(a){switch(a){case 2:return[c("MessengerWebInitData").accountKeyV2];case 1:return[c("MessengerWebInitData").accountKey].concat((a=c("MessengerWebInitData").additionalAccountKeysV1)!=null?a:[]);default:throw c("FBLogger")("messenger_web").mustfixThrow("Invalid format version, should never happen.")}}g.getLastAccountKeyFormatVersion=a;g.getAccountKeysString=b}),98);
__d("MAWKeychainCrypto",["FBLogger","MAWCryptoConsts","MAWKeychainUtil","MAWSubtleCrypto","MAWWebInitDataHelpers","Promise","WABase64","asyncToGeneratorRuntime","memoizeOneWithArgs"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("MAWKeychainUtil").makeAAD(d("MAWCryptoConsts").VERSION,d("MAWCryptoConsts").CIPHER_ID);function a(a,b,e){var f=d("MAWKeychainUtil").getBufferWithRandomValuesFromLength(d("MAWCryptoConsts").AES_GCM_IV_LENGTH_IN_BYTES),g=e?e:i;return d("MAWSubtleCrypto").MAWSubtleCrypto.encrypt({additionalData:g,iv:new Uint8Array(f),name:d("MAWCryptoConsts").AES_GCM,tagLength:d("MAWCryptoConsts").AES_GCM_TAG_LENGTH},a,b).then(function(a){a=d("MAWKeychainUtil").mergeBuffers([g,f,a]);return d("WABase64").encodeB64(a)})["catch"](function(b){throw c("FBLogger")("messenger_web").catching(b).mustfixThrow("Failed to encryptDataToStringBuffer",typeof a,a.constructor.name)})}function e(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c;b=new Uint8Array(d("WABase64").decodeB64(b));var e=b.subarray(0,(c=d("MAWCryptoConsts")).ADDITIONAL_DATA_LENGTH_IN_BYTES),f=b.subarray(c.ADDITIONAL_DATA_LENGTH_IN_BYTES,c.AES_GCM_IV_LENGTH_IN_BYTES+c.ADDITIONAL_DATA_LENGTH_IN_BYTES);b=b.subarray(c.AES_GCM_IV_LENGTH_IN_BYTES+c.ADDITIONAL_DATA_LENGTH_IN_BYTES);e=(yield d("MAWSubtleCrypto").MAWSubtleCrypto.decrypt({additionalData:e,iv:f,name:c.AES_GCM,tagLength:c.AES_GCM_TAG_LENGTH},a,b));return e});return j.apply(this,arguments)}function k(a){a=d("MAWWebInitDataHelpers").getAccountKeysString(a);return a.map(function(a){var b=d("MAWKeychainUtil").fromHexString(a);if(b==null)throw c("FBLogger")("messenger_web").mustfixThrow("Invalid value for account key. Is empty="+String(a.length===0)+";");return b.buffer})}function l(a){return(h||(h=b("Promise"))).all(k(a).map(function(a){return d("MAWSubtleCrypto").MAWSubtleCrypto.importKey("raw",a,{name:d("MAWCryptoConsts").AES_GCM},!1,["encrypt","decrypt"])}))}function f(){return d("WABase64").encodeB64(d("MAWKeychainUtil").getBufferWithRandomValuesFromLength(d("MAWCryptoConsts").HKDF_SEED_LENGTH_IN_BYTES))}function m(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=d("WABase64").decodeB64(a);try{a=(yield d("MAWSubtleCrypto").MAWSubtleCrypto.importKey("raw",a,{name:d("MAWCryptoConsts").HKDF},!1,["deriveKey"]));return a}catch(a){c("FBLogger")("messenger_web").catching(a).mustfix("Failed to importBrowserEncryptionKey");throw a}});return n.apply(this,arguments)}function o(){return d("MAWKeychainUtil").getBufferWithRandomValuesFromLength(d("MAWCryptoConsts").HKDF_SEED_LENGTH_IN_BYTES)}function p(a,b){var c;return d("MAWSubtleCrypto").MAWSubtleCrypto.deriveKey({hash:{name:(c=d("MAWCryptoConsts")).SHA256},info:c.HKDF_INFO,name:c.HKDF,salt:b},a,{length:c.AES_GCM_KEY_LENGTH,name:c.AES_GCM},!0,["encrypt","decrypt"]).then(function(a){return d("MAWSubtleCrypto").MAWSubtleCrypto.exportKey("raw",a)})}function q(a){var b=a.slice(0,d("MAWCryptoConsts").ADDITIONAL_DATA_LENGTH_IN_BYTES);b=new DataView(b).getUint8(0);if(b===0){var c,e=a.slice((c=d("MAWCryptoConsts")).ADDITIONAL_DATA_LENGTH_IN_BYTES,c.ADDITIONAL_DATA_LENGTH_IN_BYTES*2);return{aadLengthInBytes:c.ADDITIONAL_DATA_LENGTH_IN_BYTES*2+c.EXTRA_ADDITIONAL_DATA_LENGTH_IN_BYTES,keyVersion:new DataView(e).getUint8(0),originRandomisedVersion:new DataView(a).getUint32(c.ADDITIONAL_DATA_LENGTH_IN_BYTES*2,!0)}}return{aadLengthInBytes:d("MAWCryptoConsts").ADDITIONAL_DATA_LENGTH_IN_BYTES,keyVersion:b}}function r(a){return q(a)}var s=c("memoizeOneWithArgs")(function(a){return l(a)});function t(a){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=d("WABase64").decodeB64(a);a=(yield d("MAWSubtleCrypto").MAWSubtleCrypto.digest(d("MAWCryptoConsts").SHA256,a));return d("WABase64").encodeB64(a)});return u.apply(this,arguments)}g.ADDITIONAL_DATA=i;g.encryptDataToStringBuffer=a;g.decryptDataToArrayBuffer=e;g.getAccountKeysBuffers=k;g.genAccountKeys=l;g.genBrowserEncryptionKeyString=f;g.importBrowserEncryptionKey=m;g.genDatabaseEncryptionSeed=o;g.genDatabaseEncryptionKey=p;g.getKeyVersionFromCipherData=q;g.getKeyVersionFromCipherDataString=r;g.getAccountKeys=s;g.generateHashString=t}),98);
__d("MAWEARGenNewKeychainCryptoKey",["FBLogger","MAWCryptoConsts","MAWKeychainCrypto","MAWWebInitDataHelpers","MessengerWebInitData","WATimeUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var a,b=d("MAWWebInitDataHelpers").getLastAccountKeyFormatVersion(),e=(yield (a=d("MAWKeychainCrypto")).getAccountKeys(b))[0],f=a.genBrowserEncryptionKeyString(),g=a.genDatabaseEncryptionSeed();e=(yield a.encryptDataToStringBuffer(e,g));g=d("WATimeUtils").castToUnixTime(d("WATimeUtils").unixTime()+d("MAWCryptoConsts").ENC_KEY_TTL);return{accountKeyString:yield a.generateHashString(d("MAWWebInitDataHelpers").getAccountKeysString(b)[0]),appIdOrigin:c("MessengerWebInitData").appId,expiration:g,formatVersion:b,key:f,seed:e,userKeyBaseString:yield a.generateHashString(c("MessengerWebInitData").userKeyBase)}}catch(a){throw c("FBLogger")("messenger_web").catching(a).mustfixThrow("Failed to generateNewKey")}});return h.apply(this,arguments)}g["default"]=a}),98);
__d("MAWEARKeychainDecryptionError",[],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this,b)||this;c.name="MAWEARKeychainDecryptionError";c.message=b;return c}return b}(babelHelpers.wrapNativeSuper(Error));f["default"]=a}),66);
__d("MAWWorkerSetupArgs",[],(function(a,b,c,d,e,f){"use strict";var g=null;function a(a){g=a}function b(){return g}function c(){g=null}f.setWorkerSetupArgs=a;f.getWorkerSetupArgs=b;f.resetWorkerSetupArgs=c}),66);
__d("MAWGenKeychainCryptoKeyWithVersion",["ExecutionEnvironment","FBLogger","MAWCurrentUser","MAWEARKeychainDecryptionError","MAWKeychainCrypto","MAWWebInitDataHelpers","MAWWorkerSetupArgs","MessengerWebInitData","Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b,c,d,e,f,g){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,j,k,l){g===void 0&&(g=1);try{var m=(yield d("MAWKeychainCrypto").getAccountKeys(g));a=(yield (i||(i=b("Promise"))).all([d("MAWKeychainCrypto").importBrowserEncryptionKey(a),i.all(m.map(function(a){return d("MAWKeychainCrypto").decryptDataToArrayBuffer(a,e)["catch"](function(){return null})}))]));var n=a[0];m=a[1];a=(yield i.all(m.filter(Boolean).map(function(a){return d("MAWKeychainCrypto").genDatabaseEncryptionKey(n,a)["catch"](function(){return null})})));m=a.filter(Boolean);if(m.length===0)throw new(c("MAWEARKeychainDecryptionError"))("Failed to generate keys from seed");return{keys:m,version:f}}catch(b){a=null;m=null;f=d("MAWWorkerSetupArgs").getWorkerSetupArgs();(h||(h=c("ExecutionEnvironment"))).isInWorker&&f!=null&&(a=f.userKeyBase===c("MessengerWebInitData").userKeyBase,m=f.fbId===d("MAWCurrentUser").getID());f=d("MAWWebInitDataHelpers").getAccountKeysString(g);var o=f&&f[0]!=null?yield d("MAWKeychainCrypto").generateHashString(f[0]):null;c("FBLogger")("messenger_web").catching(b).mustfix("Failed to genKeyWithVersion: accountKeyBackfilled = %s; accountKeyExists = %s; acccountKeyMatches = %s; userKeyBaseBackilled = %s; userKeyBaseExists = %s; userKeyBaseMatches = %s; appIdOrigin = %s; appIdInitData = %s; userIdMatches = %s; isInWorker = %s; userKeyBase_match_between_threads = %s; userId_match_between_threads = %s; formatVersion = %s;",j!=null,f!=null,j===o,k!=null,c("MessengerWebInitData").userKeyBase!=null,k===(yield d("MAWKeychainCrypto").generateHashString(c("MessengerWebInitData").userKeyBase)),l,c("MessengerWebInitData").appId,d("MAWCurrentUser").getID()===String(c("MessengerWebInitData").userId),(h||(h=c("ExecutionEnvironment"))).isInWorker,a,m,g);throw b}});return j.apply(this,arguments)}g["default"]=a}),98);
__d("MAWKeychainNaClCrypto",["MAWKeychainCrypto","WABase64","tweetnacl"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(a){var c;c=b.call(this,a)||this;c.name="EARError";c.message=a;return c}return a}(babelHelpers.wrapNativeSuper(Error));function i(a,b,c){c=new Uint8Array(c);var e=d("tweetnacl").randomBytes(d("tweetnacl").secretbox.nonceLength);b=d("tweetnacl").secretbox(b,e,new Uint8Array(a));a=new Uint8Array(c.length+e.length+b.length);a.set(c);a.set(e,c.length);a.set(b,c.length+e.length);return a.buffer}function j(a,b,c){return d("WABase64").encodeB64(i(a,b,c!=null?c:d("MAWKeychainCrypto").ADDITIONAL_DATA))}function k(a,b,c,e,f){b.slice(0,f);var g=b.slice(f,f+d("tweetnacl").secretbox.nonceLength);b=b.slice(f+d("tweetnacl").secretbox.nonceLength);f=d("tweetnacl").secretbox.open(new Uint8Array(b),new Uint8Array(g),new Uint8Array(a));if(f==null)throw new h("decryptTweetNaCl was unable to decrypt an entity. Attempting to use key version : "+(c!=null?c:"non-provided")+". Format version "+(e!=null?e:"unknown")+".");return f}function l(a,b,c,e){return k(a,d("WABase64").decodeB64(b),c,void 0,e)}function a(a,b,c){return j(a,b,c)}function b(a,b,c,d){return l(a,b,c,d)}function c(a,b,c,d,e){return k(a,b,c,d,e)}g.EARDecryptionError=h;g.encryptTweetNaClArrayBuffer=i;g.encryptTweetNaCl=j;g.decryptTweetNaClArrayBuffer=k;g.decryptTweetNaCl=l;g.encrypt=a;g.decrypt=b;g.decryptArrayBuffer=c}),98);
__d("WebStorageLockManager",["FBLogger","LocalStorageWrapper","LockManager","Promise","Run","asyncToGeneratorRuntime","clearInterval","err","promiseDone","setInterval","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){c("FBLogger")("messenger_web").mustfix(a)}function a(a,e){var f="Failed to execute 'request' on 'LockManager'",g="Lock broken by another request with the 'steal' option.",j=function(a,b,c){var d=a.get(b);if(d!=null)return d;d=c();a.set(b,d);return d};try{var k=d("LocalStorageWrapper").getStorage(i),l=function(a,b){d("LocalStorageWrapper").setItemGuarded(k,a,b,i,e==null?void 0:e.onQuotaExceeded)},m=function(a){d("LocalStorageWrapper").removeItemGuarded(k,a,i)},n=function(a){return d("LocalStorageWrapper").getItemGuarded(k,a,i)},o=function(){function a(a,b){this.lockName=a,this.tabId=b,this.lockA=this.lockName+"-a",this.lockB=this.lockName+"-b"}var d=a.prototype;d.run=function(a){return this.$1(a,0)};d.$1=function(a,d){var e=this,f=function(b){return window.requestAnimationFrame(function(){return e.$1(a,d+1).then(b)})},g=function(a){return n(a)==null};l(this.lockA,this.tabId);return new(h||(h=b("Promise")))(function(b){var h=function(){try{a(),b()}finally{m(e.lockB),m(e.lockA)}};g(e.lockB)||d>10?(d>10&&c("FBLogger")("messenger_web").warn("web-lock polyfill: Had to steal lock"),l(e.lockB,e.tabId),n(e.lockA)===e.tabId?h():window.requestAnimationFrame(function(){n(e.lockB)===e.tabId?h():f(b)})):f(b)})};return a}(),p=function(){function a(b){this.tabId=b,this.lock=new o(a.tabsKey,b),c("promiseDone")(this.$1()),this.$2(),this.keepOnlyTabs(function(b){return a.isAlive(b)})}a.isAlive=function(b){b=n(a.$3(b));return b==null?!1:Date.now()-parseFloat(b)<1e3};var e=a.prototype;e.keepOnlyTabs=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){yield this.lock.run(function(){var c;c=JSON.parse((c=n(a.tabsKey))!=null?c:"[]").filter(b);c.length>0?l(a.tabsKey,JSON.stringify(c)):m(a.tabsKey)})});function d(a){return c.apply(this,arguments)}return d}();e.$2=function(){var b=a.$3(this.tabId);l(b,Date.now().toString());var e=c("setInterval")(function(){l(b,Date.now().toString())},500);d("Run").onUnload(function(){c("clearInterval")(e),m(b)})};e.$1=function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=this;yield this.lock.run(function(){var c;c=JSON.parse((c=n(a.tabsKey))!=null?c:"[]");l(a.tabsKey,JSON.stringify([].concat(c,[b.tabId])))});d("Run").onUnload(function(){return c("promiseDone")(b.keepOnlyTabs(function(a){return a!==b.tabId}))})});function f(){return e.apply(this,arguments)}return f}();a.$3=function(a){return"$navigator.heartbeat-"+a};return a}();p.tabsKey="$navigator.heartbeat-tabs";var q=function(){function a(b,e){var f=this;this.requests=new Map();this.name=b;this.tabId=e;this.queueKey=a.storagePrefix+"-"+b+"-q";this.currentOwnerKey=a.storagePrefix+"-"+b+"-o";this.lock=new o(a.storagePrefix+"-"+b,this.tabId);d("Run").onUnload(function(){c("promiseDone")(f.keepOnlyRequests(function(a){return(a==null?void 0:a.t)!==f.tabId}))})}var e=a.prototype;e.enqueue=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,d,a){var e=this,f=c("uuidv4")().toString(),g={t:this.tabId,u:f},h=function(){b(null),e.markRequestReleased(f)},i=function(){b(f),e.markRequestReleased(f)};this.requests.set(f,[function(){return b(f)},function(){d(),e.markRequestReleased(f)}]);if((a==null?void 0:a.signal)!=null){a.signal.onabort=function(){c("promiseDone")(e.keepOnlyRequests(function(a){return(a==null?void 0:a.u)!==f})),i()};if(a.signal.aborted)return i()}yield this.lock.run(function(){var b=e.getOwner();(a==null?void 0:a.steal)===!0&&e.$1(b==null?void 0:b.u);if(b==null||(a==null?void 0:a.steal)===!0||!p.isAlive(b.t))e.$2(e.currentOwnerKey,babelHelpers["extends"]({},g,{},(a==null?void 0:a.steal)===!0?{s:!0}:{})),e.$3(f);else if((a==null?void 0:a.ifAvailable)!==!0){b=e.getQueue();b.push(g);e.$2(e.queueKey,b)}else h()})});function d(b,c,d){return a.apply(this,arguments)}return d}();e.dequeue=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=this,d,e=null;yield this.lock.run(function(){var d=c.getOwner();if((d==null?void 0:d.t)!==c.tabId||(d==null?void 0:d.u)!==b)return;d=c.getQueue();d=a.getNextOwner(d);var f=d[0];d=d[1];e=f;c.$2(c.currentOwnerKey,f);c.$2(c.queueKey,d)});this.$3((d=e)==null?void 0:d.u)});function d(a){return c.apply(this,arguments)}return d}();e.storageChangedOnOtherTab=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=this;a==="o"&&(yield this.lock.run(function(){var a=c.getOwner();if(a==null)return;c.$3(a==null?void 0:a.u);if(a.s===!0){a=b==null?void 0:b.oldValue;if(a!=null){a=JSON.parse(a);a.t===c.tabId&&c.$1(a.u)}}}))});function c(b,c){return a.apply(this,arguments)}return c}();e.getQueue=function(){var a;return(a=this.$4(this.queueKey))!=null?a:[]};e.getOwner=function(){return this.$4(this.currentOwnerKey)};a.getQueueNameAndStorageType=function(b){if(!b.startsWith(a.storagePrefix))return null;var d=b.slice(a.storagePrefix.length+1,b.length-2),e=b.charAt(b.length-1);switch(e){case"q":case"o":case"a":case"b":break;default:throw c("err")("Queue was stored with a suffix other than q or o. This is either a bug in the web lock api polyfill code, or it means that something overwrote localStorage with a weird key. Key: "+b)}return[d,e]};a.getNextOwner=function(a){for(var b=0;b<a.length;b+=1)if(p.isAlive(a[b].t))return[a[b],a.slice(b+1)];return[null,[]]};e.$4=function(a){a=n(a);return a!=null?JSON.parse(a):null};e.$2=function(a,b){b=b==null||Array.isArray(b)&&b.length===0?null:JSON.stringify(b);b==null?m(a):l(a,b)};e.keepOnlyRequests=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=this;yield this.lock.run(function(){var d=c.getOwner(),e=c.getQueue().filter(b);if(b(d))c.$2(c.queueKey,e);else{d=a.getNextOwner(e);e=d[0];d=d[1];c.$2(c.currentOwnerKey,e);c.$2(c.queueKey,d)}})});function d(a){return c.apply(this,arguments)}return d}();e.markRequestReleased=function(a){a!=null&&this.requests["delete"](a)};e.$3=function(a){if(a!=null){a=this.requests.get(a);if(a!=null){a=a[0];a()}}};e.$1=function(a){if(a!=null){a=this.requests.get(a);if(a!=null){a[0];a=a[1];a()}}};return a}();q.storagePrefix="$navigator.locks";var r=function(){function a(a){this.$1=new Map(),this.storage=d("LocalStorageWrapper").getStorage(i),this.tabId=a,new p(this.tabId),c("promiseDone")(this.$2()),this.$3()}var e=a.prototype;e.request=function(){var a=this;for(var e=arguments.length,i=new Array(e),j=0;j<e;j++)i[j]=arguments[j];return new(h||(h=b("Promise")))(function(e,j){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var k,l=i[0],e=i.length===3?i[1]:null,m=i.length===2?i[1]:i[2];if(l.startsWith("-"))throw new DOMException("Names cannot start with '-'.",f);if((e==null?void 0:e.ifAvailable)===!0&&(e==null?void 0:e.signal)!=null)throw new DOMException("The 'signal' and 'ifAvailable' options cannot be used together.",f);var n=a.$4(l),o=(yield new(h||(h=b("Promise")))(function(a){c("promiseDone")(n.enqueue(a,function(){j(new DOMException(g,f))},e))}));if((e==null?void 0:(k=e.signal)==null?void 0:k.aborted)===!0)throw new DOMException("The request was aborted.",f);try{yield m(o!=null?{mode:(k=e==null?void 0:e.mode)!=null?k:d("LockManager").LockMode.Exclusive,name:l}:null)}finally{o!=null&&(yield n.dequeue(o)),n.markRequestReleased(o)}})(),e,j)})};e.query=function(){var a=[],c=[];for(var e of this.$5())if(e!=null){var f={mode:d("LockManager").LockMode.Exclusive,name:e.name};if(e.getOwner()!=null)a.push(f);else for(var g of e.getQueue())c.push(f)}return(h||(h=b("Promise"))).resolve({held:a,pending:c})};e.$4=function(a){var b=this;return j(this.$1,a,function(){return new q(a,b.tabId)})};e.$3=function(){var a=this;window.addEventListener("storage",function(b){var d=b.key;if(b.storageArea!==a.storage||d==null)return;d=q.getQueueNameAndStorageType(d);if(d==null)return;var e=d[0];d=d[1];c("promiseDone")((e=a.$4(e))==null?void 0:e.storageChangedOnOtherTab(d,b))})};e.$2=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield (h||(h=b("Promise"))).all(this.$5().map(function(a){return a==null?void 0:a.keepOnlyRequests(function(a){return a==null?!1:p.isAlive(a.t)})}))});function c(){return a.apply(this,arguments)}return c}();e.$5=function(){var a=this;return k==null?[]:Object.keys(k).map(function(b){b=q.getQueueNameAndStorageType(b);if(b==null)return;b=b[0];return a.$4(b)})};return a}();return new r(a)}catch(a){return null}}g.make=a}),98);
__d("mergeDeepInto",["invariant","mergeHelpers"],(function(a,b,c,d,e,f,g){"use strict";var h=(c=b("mergeHelpers")).ArrayStrategies,i=c.checkArrayStrategy,j=c.checkMergeArrayArgs,k=c.checkMergeLevel,l=c.checkMergeObjectArgs,m=c.isTerminal,n=c.normalizeMergeArg,o=function(a,b,c,d){l(a,b);k(d);var e=b?Object.keys(b):[];for(var f=0;f<e.length;f++){var g=e[f];q(a,b,g,c,d)}},p=function(a,b,c,d){j(a,b);k(d);if(c===h.Concat)a.push.apply(a,b);else{var e=Math.max(a.length,b.length);for(var f=0;f<e;f++)q(a,b,f,c,d)}},q=function(a,b,c,d,e){var f=b[c];b=Object.prototype.hasOwnProperty.call(b,c);var i=b&&m(f),j=b&&Array.isArray(f),k=b&&!j&&!j,l=a[c],n=Object.prototype.hasOwnProperty.call(a,c),q=n&&m(l),r=n&&Array.isArray(l),s=n&&!r&&!r;q?i?a[c]=f:j?(a[c]=[],p(a[c],f,d,e+1)):k?(a[c]={},o(a[c],f,d,e+1)):b||(a[c]=l):r?i?a[c]=f:j?(d&&h[d]||g(0,5117),d===h.Clobber&&(l.length=0),p(l,f,d,e+1)):k&&(a[c]={},o(a[c],f,d,e+1)):s?i?a[c]=f:j?(a[c]=[],p(a[c],f,d,e+1)):k&&o(l,f,d,e+1):n||(i?a[c]=f:j?(a[c]=[],p(a[c],f,d,e+1)):k&&(a[c]={},o(a[c],f,d,e+1)))};function a(a,b,c){b=n(b);i(c);o(a,b,c,0)}f["default"]=a}),66);
__d("MWPreloadableQueries",["I64","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h;b=function(a,b){return d("ReQL").fromTableAscending(a.tables.thread_nullstate).getKeyRange(b)};c=function(a,b){return d("ReQL").fromTableAscending(a.tables.thread_nullstate_ctas.index("threadKeyCtaId")).getKeyRange(b)};e=function(a,b){return d("ReQL").fromTableAscending(a.tables.cutover_threads).getKeyRange(b)};f=function(a,b){return d("ReQL").fromTableAscending(a.tables.community_folders).getKeyRange(b)};var i=function(a,b){return d("ReQL").fromTableAscending(a.tables.thread_proactive_warning_settings).getKeyRange(b)},j=function(a,b){return d("ReQL").fromTableAscending(a.tables.in_thread_banner).getKeyRange(b)};function a(a,b){return d("ReQL").fromTableAscending(a.tables.media_staging).filter(function(a){return!a.isSent&&(h||(h=d("I64"))).equal(a.threadKey,b)})}g.threadNullStateQuery=b;g.threadNullStateCtaQuery=c;g.getCutoverThreadByThreadKey=e;g.getCommunityFolderQuery=f;g.getProactiveWarningsForThreadQuery=i;g.getThreadBannerQuery=j;g.getMediaStagingQuery=a}),98);
__d("mergeDeep",["mergeDeepInto","mergeHelpers"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d){var e;a=(e=c("mergeHelpers")).normalizeMergeArg(a);b=e.normalizeMergeArg(b);e.checkMergeObjectArgs(a,b);e.checkArrayStrategy(d);e={};c("mergeDeepInto")(e,a,d);c("mergeDeepInto")(e,b,d);return e}g["default"]=a}),98);
__d("MAWThreadMappingQPL",["I64","JSResourceForInteraction","LSIntEnum","MAWLoggerUtils","MAWMiActMappingTableAPI","MAWQplProxy","MAWThreadMappingState","QPLUserFlow","Random","ReQL","WAJids","asyncToGeneratorRuntime","promiseDone","qpl","sendToSentQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=new Map(),k=new Set();function a(a){k.add(a)}function l(a,b){var c=a.actState;a=a.miState;return!k.has(b)?!1:c===d("MAWThreadMappingState").ActState.READY&&a===d("MAWThreadMappingState").MiState.OPTIMISTIC}var m=c("JSResourceForInteraction")("MAWWaitForBackendSetup").__setRef("MAWThreadMappingQPL"),n=c("qpl")._(1056836502,"2778"),o=c("qpl")._(25313175,"1551"),p=null;function e(a){return d("MAWLoggerUtils").getInstanceKeyFromId(a)}function q(a){return d("MAWLoggerUtils").getInstanceKeyFromId((h||(h=d("I64"))).to_string(a)+d("Random").random().toString())}function f(a,b,c){var e=j.get((h||(h=d("I64"))).to_string(a.jid));if(e!=null){t("continue_thread_mapping_after_tpq",e);c!=null&&v({bool:babelHelpers["extends"]({},c)},e);j["delete"]((h||(h=d("I64"))).to_string(a.jid));return e}e=(e=a.instanceKey)!=null?e:q(a.fbid);c=c!=null?c:{};var f=c.hasMappingRowAlready,g=c.hasPlaceholderRowInserted,i=c.isExistingRowPlaceholder;c=c.isExpectedThreadMissingInLsdb;var k=a.jid;r({hasMappingRowAlready:f,hasPlaceholderRowInserted:g,instanceKey:e,isExistingRowPlaceholder:i,isExpectedThreadMissingInLsdb:c,jid:a.isGroupThread?d("WAJids").toGroupJid((h||(h=d("I64"))).to_string(k)):d("WAJids").toMsgrUserJid((h||(h=d("I64"))).to_string(k)),threadKey:a.fbid,trigger:b});return e}function r(a){var b=a.instanceKey,e=a.s2sInstanceKey,f=babelHelpers.objectWithoutPropertiesLoose(a,["instanceKey","s2sInstanceKey"]);p=e;d("sendToSentQPLLogger").markSendToSentPoint(e,"thread_mapping_start",void 0,{string:{thread_state:a.threadState}});c("QPLUserFlow").start(n,{annotations:G(f),instanceKey:b});c("promiseDone")(m.load(),function(a){a=a.runAfterBackendSetup;a(function(){return t("maw_backend_available",b)},"bulkCreateOrUpdateThread")})}function s(a){var b=a.instanceKey;a.s2sInstanceKey;a=babelHelpers.objectWithoutPropertiesLoose(a,["instanceKey","s2sInstanceKey"]);d("MAWQplProxy").startQplUserFlow(n,G(a),{providedInstanceKey:b})}function t(a,b){c("QPLUserFlow").addPoint(n,a,{instanceKey:b}),p!=null&&c("QPLUserFlow").addPoint(o,"thread_mapping_"+a,{instanceKey:p})}function u(a,b){t("handle_existing_thread_fail",a);var c=b==null?"no_thread":"not_authoritative";b=b==null?void 0:(i||(i=d("LSIntEnum"))).toNumber(b.authorityLevel);v({"int":{insufficientAuthorityLevel:b},string:{handleExistingThreadFailReason:c}},a)}function v(a,b){c("QPLUserFlow").addAnnotations(n,a,{instanceKey:b})}var w=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,d){var e=a+"_start";a=a+"_end";c("QPLUserFlow").addPoint(n,e,{instanceKey:b});e=(yield d());c("QPLUserFlow").addPoint(n,a,{instanceKey:b});return e});return function(b,c,d){return a.apply(this,arguments)}}(),x=function(a,b,c){return b==null?c():w(a,b,c)};function y(a,b){v({bool:{isResultVerified:!0},string:{finalActState:b.actState.toString(),finalMiState:b.miState.toString()}},a),d("sendToSentQPLLogger").markSendToSentPoint(p,"thread_mapping_end"),d("MAWThreadMappingState").isReady(b)||l(b,a)?c("QPLUserFlow").endSuccess(n,{instanceKey:a}):B("thread_state_not_ready",a)}function z(a){return A.apply(this,arguments)}function A(){A=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,c=a.instanceKey,e=a.intJid,f=a.tables;a=a.threadKey;if(a==null&&e==null){B("no_thread_key_nor_jid",c);return}e=(yield H(f,{intJid:e,threadKey:a}));b=(b=e==null?void 0:e.serverThreadKey)!=null?b:a;a=b==null?null:yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(f.threads).getKeyRange(b));y(c,yield d("MAWThreadMappingState").getMappingStateForDbRows(a,e))});return A.apply(this,arguments)}function B(a,b){d("sendToSentQPLLogger").markSendToSentPoint(p,"thread_mapping_fail",void 0,{string:{threadMappingFailReason:a}}),c("QPLUserFlow").endFailure(n,a,{instanceKey:b})}function C(a,b){d("sendToSentQPLLogger").markSendToSentPoint(p,"thread_mapping_fail",void 0,{string:{threadMappingFailReason:a.message}}),c("QPLUserFlow").endFailure(n,"error_thrown",{annotations:{string:{errorMessage:a.message}},instanceKey:b})}function D(a,b,c){d("MAWQplProxy").sendQPLFailThroughBridge(n,a,c,b)}function E(a,b){t(a,b),c("QPLUserFlow").endCancel(n,{instanceKey:b})}function F(a,b){d("MAWQplProxy").sendQPLCancelThroughBridge(n,{string:{cancelInWorkerReason:a}},b)}function G(a){var b=a.hasMappingRowAlready,c=a.hasPlaceholderRowInserted,e=a.isExistingRowPlaceholder,f=a.isExpectedThreadMissingInLsdb,g=a.jid,i=a.threadKey,j=a.threadState;a=a.trigger;return{bool:{hasMappingRowAlready:b,hasPlaceholderRowInserted:c,isExistingRowPlaceholder:e,isExpectedThreadMissingInLsdb:f},string:{initJid:g,initThreadKey:i==null?null:(h||(h=d("I64"))).to_string(i),initThreadState:j==null?void 0:j.toString(),trigger:a}}}function H(a,b){return I.apply(this,arguments)}function I(){I=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=b.intJid;b=b.threadKey;b=(yield d("MAWMiActMappingTableAPI").getMappingRowForThreadKey(a,b));return b!=null?b:d("MAWMiActMappingTableAPI").getMappingRowForIntJid(a,c)});return I.apply(this,arguments)}g.pendingThreadCreationOnServer=j;g.allowToSkipUpgradingOptimisticThreadInMI=a;g.getInstanceKeyForJidInWorker=e;g.getInstanceKeyForThreadKey=q;g.startOrContinueForMiActMappingParams=f;g.start=r;g.startInWorker=s;g.addPoint=t;g.handleExistingThreadFail=u;g.addAnnotations=v;g.measurePerformance=w;g.measurePerformanceForNullableInstanceKey=x;g.endForThreadState=y;g.end=z;g.endFailure=B;g.endFailureError=C;g.endFailureInWorker=D;g.endCancel=E;g.endCancelInWorker=F}),98);
__d("MAWThreadMappingState",["I64","LSAuthorityLevel","LSIntEnum","MAWJids","MAWMiActMappingTableAPI","MAWThreadMappingQPL","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k={MISSING:"MISSING",OPTIMISTIC:"OPTIMISTIC",PARTIAL:"PARTIAL",READY:"READY"},l={IN_PROGRESS:"IN_PROGRESS",MISSING:"MISSING",READY:"READY"};function m(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=(yield d("MAWMiActMappingTableAPI").getMappingRowForChatJid(a,b));if(b==null)return{mappingState:{actState:l.MISSING,miState:k.MISSING},threadKey:null};a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(b.serverThreadKey)));return{mappingState:q(a,b),threadKey:b.serverThreadKey}});return n.apply(this,arguments)}function a(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield m(a,b));b=a.mappingState;return b});return o.apply(this,arguments)}function e(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){a=(yield (j||(j=b("Promise"))).all([d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(c)),d("MAWMiActMappingTableAPI").getMappingRowForThreadKey(a,c)]));c=a[0];a=a[1];return q(c,a)});return p.apply(this,arguments)}function q(a,b){return{actState:r(b),miState:s(a)}}function f(a){return a.miState===k.READY&&a.actState===l.READY}function r(a){return a==null?l.MISSING:v(a.clientThreadPk)?l.IN_PROGRESS:l.READY}function s(a){if(a==null)return k.MISSING;a=(h||(h=d("LSIntEnum"))).toNumber(a.authorityLevel);if(a===c("LSAuthorityLevel").AUTHORITATIVE)return k.READY;return a===c("LSAuthorityLevel").OPTIMISTIC?k.OPTIMISTIC:k.PARTIAL}function t(a,b,c){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){yield a.mi_act_mapping_table.put({clientThreadPk:(i||(i=d("I64"))).neg(b),jid:c,serverThreadKey:b})});return u.apply(this,arguments)}function v(a){return(i||(i=d("I64"))).lt(a,i.zero)}function w(a,b,c){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=b.jid;b=b.threadKey;c===void 0&&(c=null);yield y(a,{intJid:d("MAWJids").convertChatJidToIntJid(e),threadKey:b},c)});return x.apply(this,arguments)}function y(a,b,c){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=b.intJid;b=b.threadKey;c===void 0&&(c=null);c!=null&&d("MAWThreadMappingQPL").addPoint("insert_mapping_row",c);yield a.mi_act_mapping_table.put({clientThreadPk:e,jid:e,serverThreadKey:b})});return z.apply(this,arguments)}function A(a,b){return m(a,b).then(function(a){var b=a.mappingState;a=a.threadKey;return b.miState===k.MISSING?null:a})}g.MiState=k;g.ActState=l;g.genMappingStateAndThreadKeyFromJid=m;g.genMappingStateFromJid=a;g.genMappingState=e;g.getMappingStateForDbRows=q;g.isReady=f;g.getActState=r;g.getMiState=s;g.markActThreadMappingAsInProgress=t;g.markActThreadMappingAsCompletedForJid=w;g.markActThreadMappingAsCompleted=y;g.getThreadKeyIfMiThreadNotMissing=A}),98);
__d("MAWTimeUtils",["FBLogger","I64","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){return(h||(h=d("I64"))).of_float(a*1e3)}function j(a){a=Number(a);return a<=d("WATimeUtils").MAX_INT&&a!==-1e3&&a!==0}function a(a){if(j(a)){Number(a)!==-1&&c("FBLogger")("messenger_web").mustfix("Invalid timestamp supplied to millisTimeToTimestamp: %s",Number(a));return i(a)}return(h||(h=d("I64"))).of_float(a)}function b(a,b){var c=Date.now();c=c-b*24*60*60*1e3;b=d("WATimeUtils").castMilliSecondsToUnixTime(c);return a>=b}function e(a){if(a==null)return;if(j(a)){Number(a)!==-1&&c("FBLogger")("messenger_web").mustfix("Invalid timestamp supplied to ensureValidMillisTime: %s",Number(a));return d("WATimeUtils").castToMillisTime(a*1e3)}return a}f=(h||(h=d("I64"))).of_string("9999999999999");var k=Number.MAX_VALUE;g.toTimestamp=i;g.millisTimeToTimestamp=a;g.isTimestampNewerThanXDays=b;g.ensureValidMillisTime=e;g.MAX_TIMESTAMP_MS=f;g.MAX_TIMESTAMP=k;g.MIN_TIMESTAMP_MS=h.zero}),98);
__d("MWBroadcastChannelPolyfill",["FBLogger","LocalStorageWrapper","MessengerLogHistory","Random","recoverableViolation","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h=d("MessengerLogHistory").getInstance("client_init");function a(a){h.debug("[MWBroadcastChannelPolyfill] "+a)}function i(a){c("FBLogger")("messenger_web").mustfix(a)}var j={},k=d("LocalStorageWrapper").getStorage(a);function b(a){var b="$BroadcastChannel$"+a+"$",e=!1,f=function(a){if(a.storageArea!==k)return;var c=a.newValue;if(c==null||c==="")return;if(((a=a.key)==null?void 0:a.substring(0,b.length))!==b)return;var d=JSON.parse(c);(a=j[b])==null?void 0:a.forEach(function(a){a({data:d})})};window.addEventListener("storage",f);return{addEventListener:function(a,c){j[b]=j[b]||new Set(),j[b].add(c)},close:function(){if(e)return;e=!0;j={};window.removeEventListener("storage",f)},postMessage:function(a){if(e){c("recoverableViolation")("Broadcast channel is closed","ls_web_init");return}a=JSON.stringify(a);var f=b+String(Date.now())+"$"+String(c("Random").uint32());d("LocalStorageWrapper").setItemGuarded(k,f,a,i);c("setTimeout")(function(){d("LocalStorageWrapper").removeItemGuarded(k,f,i)},500)},removeEventListener:function(a,c){(a=j[b])==null?void 0:a["delete"](c)}}}g["default"]=b}),98);
__d("MWBroadcastChannel",["MWBroadcastChannelPolyfill"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return self.BroadcastChannel!=null?new self.BroadcastChannel(a):c("MWBroadcastChannelPolyfill")(a)}g.MWBroadcastChannel=a}),98);
__d("MWEARKeychainV3Errors",[],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this,b)||this;c.name="EARKeychainNotFoundError";c.message=b;return c}return b}(babelHelpers.wrapNativeSuper(Error));f.EARKeychainNotFoundError=a}),66);
__d("MWLSContactTypeExactUtils",["I64","LSContactTypeExact","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactTypeExact").IG_USER))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactTypeExact").IG_BUSINESS_USER)))return!0;else return(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactTypeExact").IG_CREATOR_USER))}g.isIgContact=a}),98);
__d("MWLSDatabaseNames",[],(function(a,b,c,d,e,f){"use strict";a="LightSpeed";b=a+"V3";f.name=a;f.lightspeedPrefix=b}),66);
__d("MWLSIndexedDBName",["MAWCurrentUser","MWLSDatabaseNames"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("MAWCurrentUser").getID();return d("MWLSDatabaseNames").lightspeedPrefix+a}g.dbName=a}),98);
__d("MWLocalStorageErrorHandler",["cr:3449"],(function(a,b,c,d,e,f,g){"use strict";function a(){b("cr:3449")&&b("cr:3449").clearLocalStorageBigValues()}g.onQuotaExceeded=a}),98);
__d("ReStoreLocalStorageQuotaExceed",["FBLogger","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h="Failed to execute 'setItem' on 'Storage'",i="ReStoreLocalStorageQuotaExceed";function j(){try{var a=window.localStorage,b=[],d=[];if(a!=null&&a.length!==0)for(var e in a){b.length===0&&d.length===0&&(e.includes("falco_queue_log")&&d.push(e));if(!Object.prototype.hasOwnProperty.call(a,e))continue;var f=((a[e]||"").length+e.length)*2;f/1024>2e3&&b.push(e)}c("FBLogger")("messenger_web").mustfix(h+": QuotaExceeded - trying to clean up %s or %s",b.join(","),d.join(","));return b.length!==0?b:d}catch(a){c("FBLogger")("messenger_web").mustfix("Error getting local storage big values for cleanup.");return[]}}function a(){try{var a=window.localStorage,b=j();b.forEach(function(b){a.removeItem(b)})}catch(a){c("recoverableViolation")("Couldn't remove vals from localStorage","maw_db",a)}}b=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;b=h+": "+b+"; Keys to delete: "+j().join(",");c=a.call(this,b)||this;c.message=b;c.name=i;return c}return b}(babelHelpers.wrapNativeSuper(Error));g.ERROR_NAME=i;g.getLocalStorageValuesToRemoveOnExceed=j;g.clearLocalStorageBigValues=a;g.ReStoreLocalStorageQuotaExceed=b}),98);
__d("ReStoreTabNotifier",["CurrentMessengerUser","FBLogger","MWBroadcastChannel","MWLSIndexedDBName"],(function(a,b,c,d,e,f,g){"use strict";var h=d("CurrentMessengerUser").getIDorEIMU();function a(a){var b=d("MWBroadcastChannel").MWBroadcastChannel(a==="restore-table-"+h+"-"+d("MWLSIndexedDBName").dbName()?"mwChat-"+h:a);function e(a,d){try{b.postMessage([a,d])}catch(a){c("FBLogger")("messenger_web").catching(a).warn("Failed to broadcast changes")}}function f(a,c){b.addEventListener("message",function(b){b=b.data;var d=b[0];d===a&&c(b[1])})}return{onEventReceive:f,postMessage:e}}g["default"]=a}),98);
__d("cometIsMimeTypeForMedia",["FBLogger","UFICommentFileInputAcceptValues"],(function(a,b,c,d,e,f,g){"use strict";var h={file:null,photo:null,video:null},i={"image/gif":"video","image/webp":"video"};function j(a){return a.split(",").map(function(a){return a.trim()}).map(function(a){return a.replace(/\/\*$/,"/")})}function k(a,b,d){h[a]==null&&(h[a]=j(d));d=h[a];if(d==null)throw c("FBLogger")("ufi2").mustfixThrow("CometIsMimeTypeForMedia prefixes can't be null");var e=i[b];return e!=null?e===a:d.some(function(a){return b.startsWith(a)})}function a(a){return k("photo",a,d("UFICommentFileInputAcceptValues").photos)}function b(a){return k("video",a,d("UFICommentFileInputAcceptValues").videos)}function e(a){return k("file",a,d("UFICommentFileInputAcceptValues").files)}g.mimeTypeAcceptStringToArray=j;g.isMimeTypeForPhoto=a;g.isMimeTypeForVideo=b;g.isMimeTypeForFile=e}),98);
__d("promiseFromRequest",[],(function(a,b,c,d,e,f){"use strict";function a(a){return new self.Promise(function(b,c){a.onsuccess=function(a){b(a.target.result)},a.onerror=function(a){c(a)}})}f["default"]=a}),66);/*FB_PKG_DELIM*/
__d("IGDSActionDialog.react",["IGDSDialogLegacy.react","IGDSTextVariants.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(26),e=a.ariaLabel,f=a.body,g=a.children,h=a.closeButtonPosition,j=a["data-testid"],k=a.disableMediaMargin,l=a.enablePopInAnimation,m=a.forceTop,n=a.forwardRef,o=a.isVisible,p=a.media,q=a.onModalClose,r=a.size;a=a.title;h=h===void 0?"hidden":h;m=m===void 0?!1:m;r=r===void 0?"default":r;var s=!!p,t=a!=null||f!=null,u;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(u={className:"x78zum5 xdt5ytf xl56j7k"},b[0]=u):u=b[0];var v;b[1]!==k||b[2]!==p?(v=p!=null&&i.jsx("div",babelHelpers["extends"]({},{0:{className:"x1qjc9v5 xl56j7k x1crbq5u xmp7c8h x19qqan6 xlep54o x14dv08r"},1:{className:"x1qjc9v5 xl56j7k xdj266r x14z9mp xat24cr x1lziwak x14l7nz5 x8z4y6v x1gut22 x1pwwqoy"}}[!!(k!=null)<<0],{children:p})),b[1]=k,b[2]=p,b[3]=v):v=b[3];b[4]!==f||b[5]!==s||b[6]!==t||b[7]!==a?(k=t&&i.jsxs("div",babelHelpers["extends"]({"aria-level":"1"},{className:"x1crbq5u x5x8j7v x19qqan6 x1dol6g5 x2b8uid x14dv08r"},{role:"heading",children:[a!=null&&(s?i.jsx(d("IGDSTextVariants.react").IGDSTextHeadline2,{elementType:"h2",children:a}):i.jsx(d("IGDSTextVariants.react").IGDSTextTitle,{elementType:"h1",children:a})),f!=null&&i.jsx("div",babelHelpers["extends"]({className:"xyamay9"},{children:i.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",children:f})}))]})),b[4]=f,b[5]=s,b[6]=t,b[7]=a,b[8]=k):k=b[8];b[9]!==g?(p=g!=null&&i.jsx("div",babelHelpers["extends"]({className:"x78zum5 xdt5ytf x1crbq5u xvrdyt3 x179zr98"},{children:g})),b[9]=g,b[10]=p):p=b[10];b[11]!==j||b[12]!==v||b[13]!==k||b[14]!==p?(f=i.jsxs("div",babelHelpers["extends"]({},u,{"data-testid":void 0,children:[v,k,p]})),b[11]=j,b[12]=v,b[13]=k,b[14]=p,b[15]=f):f=b[15];b[16]!==e||b[17]!==h||b[18]!==l||b[19]!==m||b[20]!==n||b[21]!==o||b[22]!==q||b[23]!==r||b[24]!==f?(s=i.jsx(c("IGDSDialogLegacy.react"),{closeButtonPosition:h,enablePopInAnimation:l,forceTop:m,isVisible:o,label:e,onClose:q,ref:n,size:r,children:f}),b[16]=e,b[17]=h,b[18]=l,b[19]=m,b[20]=n,b[21]=o,b[22]=q,b[23]=r,b[24]=f,b[25]=s):s=b[25];return s}g["default"]=a}),98);
__d("IGDSDialogItem.react",["IGDSBox.react","IGDSSpinner.react","react","react-compiler-runtime","shouldUseIGDSPrismButton","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={item:{backgroundColor:"xjbqb8w",borderBottomWidth:"x1qhh985",borderInlineEndWidth:"x10w94by",borderInlineStartWidth:"x14e42zd",borderTopColor:"x1yvgwvq",borderTopStyle:"x13fuv20",borderTopWidth:"x178xt8z",cursor:"x1ypdohk",fontSize:"xvs91rp",lineHeight:"x1evy7pa",marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",minHeight:"x1wxaq2x",paddingTop:"x1iorvi4",paddingInlineEnd:"xf159sx",paddingBottom:"xjkvuk6",paddingInlineStart:"xmzvs34",textAlign:"x2b8uid",userSelect:"x87ps6o",verticalAlign:"xxymvpz",width:"xh8yej3",":active_backgroundColor":"x52vrxo",":active_opacity":"x4gyw5p",$$css:!0},itemDanger:{color:"xkmlbd1",fontWeight:"x1xlr1w8",$$css:!0},itemDisabled:{color:"x1roi4f4",cursor:"xt0e3qv",$$css:!0},itemPrimary:{color:"x173jzuc",fontWeight:"x1xlr1w8",$$css:!0},itemPrimaryPrism:{color:"x1t4m9lo",fontWeight:"x1xlr1w8",$$css:!0},itemSecondary:{color:"x5n08af",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(15),e=a.children,f=a.color,g=a.disabled,i=a.forwardRef,l=a.loading,m=a.onClick,n=a.onMouseEnter;a=a.testid;f=f===void 0?"secondaryButton":f;g=g===void 0?!1:g;l=l===void 0?!1:l;var o;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(o=c("shouldUseIGDSPrismButton")(),b[0]=o):o=b[0];o=o;b[1]!==f||b[2]!==g?(o=(h||(h=c("stylex"))).props([k.item,f==="errorOrDestructive"&&k.itemDanger,f==="primaryButton"?o?k.itemPrimaryPrism:k.itemPrimary:void 0,f==="secondaryButton"&&k.itemSecondary,g&&k.itemDisabled]),b[1]=f,b[2]=g,b[3]=o):o=b[3];f=l||g;b[4]!==e||b[5]!==l?(g=l===!0?j.jsx(c("IGDSBox.react"),{alignItems:"center",children:j.jsx(c("IGDSSpinner.react"),{size:"small"})}):e,b[4]=e,b[5]=l,b[6]=g):g=b[6];b[7]!==i||b[8]!==m||b[9]!==n||b[10]!==o||b[11]!==f||b[12]!==g||b[13]!==a?(e=j.jsx("button",babelHelpers["extends"]({},o,{"data-testid":void 0,disabled:f,onClick:m,onMouseEnter:n,ref:i,tabIndex:"0",children:g})),b[7]=i,b[8]=m,b[9]=n,b[10]=o,b[11]=f,b[12]=g,b[13]=a,b[14]=e):e=b[14];return e}function b(a){var b=d("react-compiler-runtime").c(3);a=a.children;var c;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(c={className:"xjbqb8w xt0e3qv xvs91rp xdj266r x14z9mp xat24cr x1lziwak x1wxaq2x x1iorvi4 xf159sx xjkvuk6 xmzvs34 x2b8uid x87ps6o"},b[0]=c):c=b[0];b[1]!==a?(c=j.jsx("div",babelHelpers["extends"]({},c,{children:a})),b[1]=a,b[2]=c):c=b[2];return c}g.IGDSDialogItem=a;g.IGDSDialogSection=b}),98);
__d("IGDSConfirmDialog.react",["fbt","IGDSActionDialog.react","IGDSDialogItem.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(19),e=a.body,f=a.cancelLabel,g=a.confirmLabel,i=a.confirmLoading,k=a.destructiveConfirm,l=a.onClose,m=a.onConfirm,n=a.testid;a=a.title;var o;b[0]!==f?(o=f===void 0?h._(/*BTDS*/"Cancelar"):f,b[0]=f,b[1]=o):o=b[1];f=o;b[2]!==g?(o=g===void 0?h._(/*BTDS*/"Aceptar"):g,b[2]=g,b[3]=o):o=b[3];g=o;o=k===void 0?!1:k;b[4]!==g||b[5]!==i||b[6]!==o||b[7]!==m?(k=m!=null&&g!=null&&j.jsx(d("IGDSDialogItem.react").IGDSDialogItem,{color:o?"errorOrDestructive":"primaryButton",loading:i,onClick:m,testid:void 0,children:g}),b[4]=g,b[5]=i,b[6]=o,b[7]=m,b[8]=k):k=b[8];b[9]!==f||b[10]!==l?(g=l!=null&&f!=null&&j.jsx(d("IGDSDialogItem.react").IGDSDialogItem,{onClick:l,testid:void 0,children:f}),b[9]=f,b[10]=l,b[11]=g):g=b[11];b[12]!==e||b[13]!==l||b[14]!==k||b[15]!==g||b[16]!==n||b[17]!==a?(i=j.jsxs(c("IGDSActionDialog.react"),{body:e,"data-testid":void 0,isVisible:!0,onModalClose:l,size:"default",title:a,children:[k,g]}),b[12]=e,b[13]=l,b[14]=k,b[15]=g,b[16]=n,b[17]=a,b[18]=i):i=b[18];return i}g["default"]=a}),226);
__d("PolarisPostBlockConfirmDialog.react",["fbt","IGDSConfirmDialog.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(10),e=a.isBlockedByViewer,f=a.onClose;a=a.username;var g;b[0]!==e||b[1]!==a?(g=e?h._(/*BTDS*/"Has bloqueado a {Username of current profile}.",[h._param("Username of current profile",a)]):h._(/*BTDS*/"Has desbloqueado a {Username of current profile}.",[h._param("Username of current profile",a)]),b[0]=e,b[1]=a,b[2]=g):g=b[2];a=g;b[3]!==e?(g=e?h._(/*BTDS*/"Puedes desbloquear esta cuenta cuando quieras desde su perfil."):h._(/*BTDS*/"Puedes bloquear esta cuenta cuando quieras desde su perfil."),b[3]=e,b[4]=g):g=b[4];e=g;b[5]===Symbol["for"]("react.memo_cache_sentinel")?(g=h._(/*BTDS*/"Ignorar"),b[5]=g):g=b[5];b[6]!==e||b[7]!==a||b[8]!==f?(g=j.jsx(c("IGDSConfirmDialog.react"),{body:e,cancelLabel:g,onClose:f,testid:void 0,title:a}),b[6]=e,b[7]=a,b[8]=f,b[9]=g):g=b[9];return g}g["default"]=a}),226);
__d("PolarisPreBlockConfirmDialog.react",["fbt","IGDSConfirmDialog.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(14),e=a.isBlockedByViewer,f=a.onClose,g=a.onConfirm;a=a.username;var i;b[0]!==e||b[1]!==a?(i=e?h._(/*BTDS*/"\u00bfDesbloquear a {Username of current profile}?",[h._param("Username of current profile",a)]):h._(/*BTDS*/"\u00bfBloquear a {Username of current profile}?",[h._param("Username of current profile",a)]),b[0]=e,b[1]=a,b[2]=i):i=b[2];a=i;b[3]!==e?(i=e?h._(/*BTDS*/"Ahora podr\u00e1 ver tus publicaciones y seguirte en Instagram. La plataforma no le enviar\u00e1 ninguna notificaci\u00f3n a este usuario para informarle de que le has desbloqueado."):h._(/*BTDS*/"No podr\u00e1 encontrar tu perfil, tus publicaciones ni tu historia en Instagram. Instagram no informar\u00e1 a esta cuenta de que la has bloqueado."),b[3]=e,b[4]=i):i=b[4];i=i;var k;b[5]!==e?(k=e?h._(/*BTDS*/"Desbloquear"):h._(/*BTDS*/"Bloquear"),b[5]=e,b[6]=k):k=b[6];e=k;b[7]===Symbol["for"]("react.memo_cache_sentinel")?(k=h._(/*BTDS*/"Cancelar"),b[7]=k):k=b[7];b[8]!==i||b[9]!==e||b[10]!==a||b[11]!==f||b[12]!==g?(k=j.jsx(c("IGDSConfirmDialog.react"),{body:i,cancelLabel:k,confirmLabel:e,destructiveConfirm:!0,onClose:f,onConfirm:g,testid:void 0,title:a}),b[8]=i,b[9]=e,b[10]=a,b[11]=f,b[12]=g,b[13]=k):k=b[13];return k}g["default"]=a}),226);
__d("PolarisSupervisionStrings",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";e=h._(/*BTDS*/"Centro para familias");f=h._(/*BTDS*/"Centro de aprendizaje");function a(a){return h._(/*BTDS*/"No puede bloquear a {Username of current profile} porque supervisas su cuenta.",[h._param("Username of current profile",a)])}function b(a){return h._(/*BTDS*/"Para bloquear a {Username of current profile}, deber\u00e1s suprimir a esta persona de la supervisi\u00f3n.",[h._param("Username of current profile",a)])}function c(a){return h._(/*BTDS*/"No puedes bloquear a {Username of current profile} porque supervisa tu cuenta.",[h._param("Username of current profile",a)])}function d(a){return h._(/*BTDS*/"Para bloquear a {Username of current profile}, deber\u00e1s suprimir a esta persona de la funci\u00f3n de supervisi\u00f3n mediante la aplicaci\u00f3n de Instagram.",[h._param("Username of current profile",a)])}var i=h._(/*BTDS*/"Ir al Centro para familias"),j=h._(/*BTDS*/"Ir a supervisi\u00f3n"),k=h._(/*BTDS*/"Primero debes suprimir la supervisi\u00f3n"),l=h._(/*BTDS*/"No puedes bloquear esta cuenta");g.FAMILY_CENTER_LABEL=e;g.EDUCATION_HUB_LABEL=f;g.getCantBlockDialogBodyForGuardianUpdated=a;g.getCantBlockDialogBodyForGuardian=b;g.getCantBlockDialogBodyForSupervisedUserUpdated=c;g.getCantBlockDialogBodyForSupervisedUser=d;g.NAVIGATE_TO_FC_BUTTON_TEXT=i;g.NAVIGATE_TO_SUPERVISION_BUTTON_TEXT=j;g.CANT_BLOCK_DIALOG_TITLE=k;g.CANT_BLOCK_DIALOG_TITLE_UPDATED=l}),226);
__d("PolarisRemoveSupervisionDialog.react",["fbt","IGDSActionDialog.react","IGDSDialogItem.react","PolarisNavigationUtils","PolarisSupervisionStrings","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){return"https://familycenter.instagram.com/accounts/"+a+"/remove"}function k(a){return"https://familycenter.instagram.com/accounts/"+a+"/?account_type=INSTAGRAM"}function b(a){var b=d("react-compiler-runtime").c(15),e=a.onClose,f=a.supervisedByViewer,g=a.userFbId;a=a.username;var i;b[0]!==f||b[1]!==a?(i=f?d("PolarisSupervisionStrings").getCantBlockDialogBodyForGuardianUpdated(a):d("PolarisSupervisionStrings").getCantBlockDialogBodyForSupervisedUserUpdated(a),b[0]=f,b[1]=a,b[2]=i):i=b[2];f=i;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(a=h._(/*BTDS*/"Aceptar"),b[3]=a):a=b[3];i=a;a=e;var l;b[4]!==g?(l=k(g),b[4]=g,b[5]=l):l=b[5];var m=l;b[6]!==a?(g=a!=null&&i!=null&&j.jsx(d("IGDSDialogItem.react").IGDSDialogItem,{color:"primaryButton",onClick:a,testid:void 0,children:i}),b[6]=a,b[7]=g):g=b[7];b[8]!==m?(l=j.jsx(d("IGDSDialogItem.react").IGDSDialogItem,{onClick:function(){return d("PolarisNavigationUtils").openURLWithFullPageReload(m,{openInNewTab:!0})},testid:void 0,children:d("PolarisSupervisionStrings").NAVIGATE_TO_FC_BUTTON_TEXT}),b[8]=m,b[9]=l):l=b[9];b[10]!==f||b[11]!==e||b[12]!==g||b[13]!==l?(i=j.jsxs(c("IGDSActionDialog.react"),{body:f,isVisible:!0,onModalClose:e,size:"default",title:d("PolarisSupervisionStrings").CANT_BLOCK_DIALOG_TITLE_UPDATED,children:[g,l]}),b[10]=f,b[11]=e,b[12]=g,b[13]=l,b[14]=i):i=b[14];return i}g.getRemoveSupervisionUrl=a;g.getGoToFamilyCenterURL=k;g.RemoveSupervisionDialog=b}),226);
__d("PolarisBlockDialog.react",["PolarisPostBlockConfirmDialog.react","PolarisPreBlockConfirmDialog.react","PolarisRemoveSupervisionDialog.react","Promise","QPLUserFlow","qpl","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));e=i;e.useCallback;var k=e.useState;function a(a){var e=d("react-compiler-runtime").c(21),f=a.guardianOfViewer,g=a.isBlockedByViewer,i=a.onBlockUser,m=a.onClose,n=a.onUnblockUser,o=a.supervisedByViewer,p=a.userFbId,q=a.userId;a=a.username;var r=k(!1),s=r[0],t=r[1];e[0]!==m?(r=function(){t(!1),m()},e[0]=m,e[1]=r):r=e[1];var u=r;e[2]!==g||e[3]!==i||e[4]!==u||e[5]!==n||e[6]!==q?(r=function(){var a=g?c("qpl")._(379204232,"1261"):c("qpl")._(379192731,"1257");c("QPLUserFlow").addPoint(a,"block_dialog_action_confirmed");a=g?n(q,"reportModal"):i(q,"reportModal");(h||(h=b("Promise"))).resolve(a).then(function(){t(!0)})["catch"](function(){u()})},e[2]=g,e[3]=i,e[4]=u,e[5]=n,e[6]=q,e[7]=r):r=e[7];r=r;var v=l;if(f||o){e[8]!==m||e[9]!==o||e[10]!==p||e[11]!==a?(f=j.jsx(d("PolarisRemoveSupervisionDialog.react").RemoveSupervisionDialog,{onClose:m,supervisedByViewer:o,userFbId:p,username:a}),e[8]=m,e[9]=o,e[10]=p,e[11]=a,e[12]=f):f=e[12];return f}if(s){e[13]!==g||e[14]!==a?(o=j.jsx(c("PolarisPostBlockConfirmDialog.react"),{isBlockedByViewer:g,onClose:v,username:a}),e[13]=g,e[14]=a,e[15]=o):o=e[15];return o}e[16]!==g||e[17]!==u||e[18]!==r||e[19]!==a?(p=j.jsx(c("PolarisPreBlockConfirmDialog.react"),{isBlockedByViewer:g,onClose:u,onConfirm:r,username:a}),e[16]=g,e[17]=u,e[18]=r,e[19]=a,e[20]=p):p=e[20];return p}function l(){window.location.reload()}g["default"]=a}),98);
__d("PolarisDirectActionBlockDirectUser",[],(function(a,b,c,d,e,f){"use strict";function a(a){return function(b){return b({type:"DIRECT_BLOCK_USER",userId:a})}}f.blockDirectUser=a}),66);
__d("PolarisRelationshipActionBlockUser",["fbt","PolarisDirectActionBlockDirectUser","PolarisGenericStrings","PolarisInteractionsStrings","PolarisRelationshipTypes","PolarisSharedAPI","PolarisToastActions","QPLUserFlow","polarisLogAction","polarisRelationshipSelectors.react","qpl"],(function(a,b,c,d,e,f,g,h){"use strict";var i=h._(/*BTDS*/"No se puede bloquear al usuario: eres el tutor de la persona a la que intentas bloquear."),j=h._(/*BTDS*/"No se puede bloquear al usuario: la persona a la que intentas bloquear te est\u00e1 supervisando."),k=h._(/*BTDS*/"Para bloquear a esta persona, primero deber\u00e1s suprimir la supervisi\u00f3n.");function a(a,b){return function(e,f){c("polarisLogAction")("blockUserAttempt",{source:b});f=d("polarisRelationshipSelectors.react").getRelationship(f().relationships,a);f=f.followedByViewer;var g=f.state===d("PolarisRelationshipTypes").FOLLOW_STATUS_FOLLOWING;e({subjectUserId:a,type:"BLOCK_USER",wasFollowedByViewer:g});return d("PolarisSharedAPI").blockUser(a).then(function(){c("polarisLogAction")("blockUserSuccess",{source:b}),e({subjectUserId:a,type:"BLOCK_USER_SUCCEEDED",wasFollowedByViewer:g}),e(d("PolarisDirectActionBlockDirectUser").blockDirectUser(a)),e(d("PolarisToastActions").showToast({text:d("PolarisInteractionsStrings").BLOCK_TEXT})),c("QPLUserFlow").endSuccess(c("qpl")._(379192731,"1257"))},function(f){var g;c("polarisLogAction")("blockUserFailure",{source:b});c("QPLUserFlow").endFailure(c("qpl")._(379192731,"1257"),"api_errored");g=(g=f.responseObject)==null?void 0:g.message;g=g===i||g===j?k:d("PolarisGenericStrings").GENERIC_ERROR_MESSAGE;e(d("PolarisToastActions").showToast({text:g}));e({subjectUserId:a,type:"BLOCK_USER_FAILED"});throw f})}}g.blockUser=a}),226);
__d("PolarisDirectActionUnblockDirectUser",[],(function(a,b,c,d,e,f){"use strict";function a(a){return function(b){return b({type:"DIRECT_UNBLOCK_USER",userId:a})}}f.unblockDirectUser=a}),66);
__d("PolarisRelationshipActionUnblockUser",["PolarisDirectActionUnblockDirectUser","PolarisInteractionsStrings","PolarisSharedAPI","PolarisToastActions","QPLUserFlow","polarisLogAction","qpl"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return function(e){c("polarisLogAction")("unblockUserAttempt",{source:b});e({subjectUserId:a,type:"UNBLOCK_USER"});return d("PolarisSharedAPI").unblockUser(a).then(function(){c("polarisLogAction")("unblockUserSuccess",{source:b}),e({subjectUserId:a,type:"UNBLOCK_USER_SUCCEEDED"}),e(d("PolarisDirectActionUnblockDirectUser").unblockDirectUser(a)),e(d("PolarisToastActions").showToast({text:d("PolarisInteractionsStrings").UNBLOCK_TEXT})),c("QPLUserFlow").endSuccess(c("qpl")._(379204232,"1261"))},function(){c("polarisLogAction")("unblockUserFailure",{source:b}),c("QPLUserFlow").endFailure(c("qpl")._(379204232,"1261"),"api_errored"),e({subjectUserId:a,type:"UNBLOCK_USER_SUCCEEDED"}),e(d("PolarisDirectActionUnblockDirectUser").unblockDirectUser(a))})}}g.unblockUser=a}),98);
__d("PolarisBlockDialogContainer.react",["PolarisBlockDialog.react","PolarisReactRedux.react","PolarisRelationshipActionBlockUser","PolarisRelationshipActionUnblockUser","polarisRelationshipSelectors.react","polarisUserSelectors","react"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");function a(a,b){var c=b.fbidV2,e=b.relationship,f=b.userId;c=c!=null?c:d("polarisUserSelectors").getUserByIdOrThrows(a,f).fbid;return{guardianOfViewer:d("polarisRelationshipSelectors.react").guardianOfViewer(e),isBlockedByViewer:d("polarisRelationshipSelectors.react").isBlockedByViewer(e),supervisedByViewer:d("polarisRelationshipSelectors.react").supervisedByViewer(e),userFbId:c,username:b.username}}function b(a){return{onBlockUser:function(b,c){return a(d("PolarisRelationshipActionBlockUser").blockUser(b,c))},onUnblockUser:function(b,c){return a(d("PolarisRelationshipActionUnblockUser").unblockUser(b,c))}}}e=d("PolarisReactRedux.react").connect(a,b)(c("PolarisBlockDialog.react"));g["default"]=e}),98);
__d("PolarisFacebookLoginLink.react",["IGDSBox.react","PolarisAssetManagerGlyphMapping","PolarisAuthStrings","PolarisIGCoreButton.react","PolarisIGCoreIcon.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(3);a=a.onClick;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",display:"flex",justifyContent:"center",position:"relative",children:[i.jsx(c("IGDSBox.react"),{marginEnd:1,paddingX:1,position:"relative",children:i.jsx(c("PolarisIGCoreIcon.react"),{alt:d("PolarisAuthStrings").FB_CONTINUE_BUTTON_TEXT,icon:d("PolarisAssetManagerGlyphMapping").ICONS.FACEBOOK_CIRCLE_FILLED_24})}),i.jsx(c("IGDSBox.react"),{position:"relative",children:d("PolarisAuthStrings").FB_CONTINUE_BUTTON_TEXT})]}),b[0]=e):e=b[0];b[1]!==a?(e=i.jsx(c("IGDSBox.react"),{"data-testid":void 0,marginBottom:1,position:"relative",children:i.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:a,children:e})}),b[1]=a,b[2]=e):e=b[2];return e}g["default"]=a}),98);
__d("PolarisFollowChainingListItem.react",["IGDSBox.react","InstagramODS","PolarisGenericStrings","PolarisIGCorePressable.react","polarisLogAction","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(34),e=a.analyticsContext,f=a.clickPoint,g=a.icon,h=a.isSmallScreen,j=a.onClick,k=a.onDismissed,l=a.primaryCta,m=a.primaryText;a=a.secondaryText;var n;b[0]!==e||b[1]!==f?(n=function(a){e&&(c("polarisLogAction")("chainingClick",{source:e,source_of_action:f,target:a}),c("InstagramODS").incr("web.chaining.click"))},b[0]=e,b[1]=f,b[2]=n):n=b[2];var o=n;b[3]!==o||b[4]!==k?(n=function(a){o("dismiss"),k&&k(),a.stopPropagation()},b[3]=o,b[4]=k,b[5]=n):n=b[5];n=n;var p;b[6]!==o||b[7]!==j?(p=function(){o("other"),j&&j()},b[6]=o,b[7]=j,b[8]=p):p=b[8];p=p;var q;b[9]===Symbol["for"]("react.memo_cache_sentinel")?(q="xvbhtw8 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xjwep3j x1t39747 x1wcsgtt x1pczhz8 x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x178xt8z x1lun4ml xso031l xpilrb4 x9f619 x78zum5 xdt5ytf",b[9]=q):q=b[9];var r=h?4:5,s;b[10]!==n||b[11]!==h||b[12]!==k?(s=k&&i.jsx("button",babelHelpers["extends"]({alt:d("PolarisGenericStrings").DISMISS_TEXT,"aria-label":d("PolarisGenericStrings").DISMISS_TEXT},{className:"xjbqb8w x1ejq31n x18oe1m7 x1sy0etr xstzfhl x1ypdohk xtijo5x xz9dl7a xpdmqnj xsag5q8 x1g0dm76 x10l6tqk x13vifvy x1vjfegm"},{"data-testid":void 0,onClick:n,children:i.jsx("div",babelHelpers["extends"]({},{0:{className:"xo3uz88 xlon915 xiy17q3 x170jfvy x1fsd2vl"},1:{className:"xo3uz88 xx7dfb8 xiy17q3 xdk7pt x1xc55vz"}}[!!h<<0]))})),b[10]=n,b[11]=h,b[12]=k,b[13]=s):s=b[13];n=h?2:5;var t;b[14]!==g||b[15]!==n?(t=i.jsx(c("IGDSBox.react"),{marginBottom:n,position:"relative",children:g}),b[14]=g,b[15]=n,b[16]=t):t=b[16];b[17]!==m?(g=i.jsx(c("IGDSBox.react"),{alignItems:"center",direction:"row",justifyContent:"center",marginBottom:1,maxWidth:"100%",position:"relative",children:m}),b[17]=m,b[18]=g):g=b[18];n=h?2:3;b[19]!==a||b[20]!==n?(m=i.jsx(c("IGDSBox.react"),{alignItems:"center",direction:"row",justifyContent:"center",marginBottom:n,maxWidth:"100%",position:"relative",children:a}),b[19]=a,b[20]=n,b[21]=m):m=b[21];b[22]!==m||b[23]!==g?(h=i.jsxs(c("IGDSBox.react"),{height:50,maxWidth:"100%",children:[g,m]}),b[22]=m,b[23]=g,b[24]=h):h=b[24];b[25]!==l||b[26]!==h||b[27]!==r||b[28]!==s||b[29]!==t?(a=i.jsxs(c("IGDSBox.react"),{alignItems:"center","data-testid":void 0,padding:r,position:"relative",width:"100%",children:[s,t,h,l]}),b[25]=l,b[26]=h,b[27]=r,b[28]=s,b[29]=t,b[30]=a):a=b[30];b[31]!==p||b[32]!==a?(n=i.jsx(c("PolarisIGCorePressable.react"),{className:q,onPress:p,children:a}),b[31]=p,b[32]=a,b[33]=n):n=b[33];return n}g["default"]=a}),98);
__d("PolarisFollowCard.react",["cx","invariant","IGDSBox.react","IGDSVerifiedBadge.react","InstagramODS","PolarisConnectionsLogger","PolarisFollowButtonContainer.react","PolarisFollowChainingListItem.react","PolarisIGCoreText","PolarisLinkBuilder","PolarisUserAvatar.react","PolarisUserLink.react","isStringNullOrEmpty","polarisLogAction","react","react-compiler-runtime","useCometRouterDispatcher"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l=77,m=54,n=33;function o(a){return a.length<n?a:a.substr(0,n-3)+"\u2026"}function p(a,b,d){c("polarisLogAction")("chainingClick",{source:b,source_of_action:d,target:a}),c("InstagramODS").incr("web.chaining.click")}function q(a){var b=d("react-compiler-runtime").c(8),e=a.analyticsContext,f=a.clickPoint,g=a.isSmallScreen,h=a.profilePictureUrl;a=a.username;c("isStringNullOrEmpty")(h)&&i(0,51397);var j;b[0]!==e||b[1]!==f?(j=function(a){p("avatar",e,f),a.stopPropagation()},b[0]=e,b[1]=f,b[2]=j):j=b[2];j=j;g=g?l:m;var n;b[3]!==j||b[4]!==h||b[5]!==g||b[6]!==a?(n=k.jsx(c("PolarisUserAvatar.react"),{canTabFocus:!1,isLink:!0,onClick:j,profilePictureUrl:h,size:g,username:a}),b[3]=j,b[4]=h,b[5]=g,b[6]=a,b[7]=n):n=b[7];return n}function r(a){var b=d("react-compiler-runtime").c(7),e=a.analyticsContext,f=a.clickPoint,g=a.handleFollowButtonClick,h=a.userId;a=a.username;var i=s,j;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(j={chn:"1"},b[0]=j):j=b[0];a=a!=null?a:"";b[1]!==e||b[2]!==f||b[3]!==g||b[4]!==a||b[5]!==h?(i=k.jsx("div",{onClick:i,role:"button",tabIndex:-1,children:k.jsx(c("PolarisFollowButtonContainer.react"),{analyticsContext:e,analyticsExtra:j,clickPoint:f,fullWidth:!0,onClick:g,userId:h,username:a})}),b[1]=e,b[2]=f,b[3]=g,b[4]=a,b[5]=h,b[6]=i):i=b[6];return i}function s(a){a.stopPropagation()}function t(a){var b=d("react-compiler-runtime").c(13),e=a.fullName,f=a.handleUsernameClick,g=a.isVerified,h=a.showDescription,j=a.suggestionDescription;a=a.username;c("isStringNullOrEmpty")(a)&&i(0,51399);g!=null||i(0,51398);h=h&&j!=null;b[0]!==e||b[1]!==h||b[2]!==a?(j=h&&e!=null&&e!==""&&e.length>0?k.jsx(c("PolarisIGCoreText"),{display:"truncated",children:e}):k.jsx(c("PolarisIGCoreText").BodyEmphasized,{display:"truncated",children:a}),b[0]=e,b[1]=h,b[2]=a,b[3]=j):j=b[3];b[4]!==f||b[5]!==j||b[6]!==a?(e=k.jsx(c("PolarisUserLink.react"),{className:"_aci-","data-testid":void 0,onClick:f,username:a,children:j}),b[4]=f,b[5]=j,b[6]=a,b[7]=e):e=b[7];b[8]!==g?(h=g&&k.jsx(c("IGDSBox.react"),{"data-testid":void 0,marginStart:1,position:"relative",children:k.jsx(c("IGDSVerifiedBadge.react"),{size:"small"})}),b[8]=g,b[9]=h):h=b[9];b[10]!==e||b[11]!==h?(f=k.jsxs(k.Fragment,{children:[e,h]}),b[10]=e,b[11]=h,b[12]=f):f=b[12];return f}function u(a){var b=d("react-compiler-runtime").c(4),e=a.fullName,f=a.showDescription;a=a.suggestionDescription;var g;b[0]!==e||b[1]!==f||b[2]!==a?(g=f&&a!=null?k.jsx("span",{className:"_acj0",title:a,children:k.jsx(c("PolarisIGCoreText"),{color:"ig-secondary-text",display:"truncated",children:o(a)})}):k.jsx("span",{className:"_aci_",title:e,children:k.jsx(c("PolarisIGCoreText"),{color:"ig-secondary-text",display:"truncated",children:e})}),b[0]=e,b[1]=f,b[2]=a,b[3]=g):g=b[3];return g}function a(a){var b=d("react-compiler-runtime").c(56),e=a.analyticsContext,f=a.clickPoint,g=a.impressionModule,h=a.isSmallScreen,j=a.onDismissed,l=a.position,m=a.showDescription;a=a.user;var n=a.fullName,o=a.id,s=a.isVerified,v=a.profilePictureUrl,w=a.suggestionDescription,x=a.username;b[0]!==e||b[1]!==g||b[2]!==l||b[3]!==o?(a=function(a){d("PolarisConnectionsLogger").logConnectionAction({containerModule:e,eventName:a,position:l,targetId:o,viewModule:g})},b[0]=e,b[1]=g,b[2]=l,b[3]=o,b[4]=a):a=b[4];var y=a,z=g===d("PolarisConnectionsLogger").VIEW_MODULES.web_profile_chaining,A=c("useCometRouterDispatcher")();b[5]!==e||b[6]!==f||b[7]!==z||b[8]!==y?(a=function(a){p("username",e,f),y(z?"similar_username_tapped":"recommended_username_tapped"),a.stopPropagation()},b[5]=e,b[6]=f,b[7]=z,b[8]=y,b[9]=a):a=b[9];a=a;var B;b[10]!==e||b[11]!==f||b[12]!==z||b[13]!==y?(B=function(){p("follow",e,f),y(z?"similar_user_follow_button_tapped":"recommended_follow_button_tapped")},b[10]=e,b[11]=f,b[12]=z,b[13]=y,b[14]=B):B=b[14];B=B;var C;b[15]!==z||b[16]!==y||b[17]!==j||b[18]!==o?(C=function(){y(z?"similar_user_dismiss_tapped":"recommended_user_dismissed"),j&&j(o)},b[15]=z,b[16]=y,b[17]=j,b[18]=o,b[19]=C):C=b[19];C=C;var D;b[20]!==A||b[21]!==x?(D=function(){c("isStringNullOrEmpty")(x)&&i(0,51399);var a=d("PolarisLinkBuilder").buildUserLink(x);A==null?void 0:A.go(a,{})},b[20]=A,b[21]=x,b[22]=D):D=b[22];D=D;var E;b[23]!==e||b[24]!==f||b[25]!==h||b[26]!==v||b[27]!==x?(E=k.jsx(q,{analyticsContext:e,clickPoint:f,isSmallScreen:h,profilePictureUrl:v,username:x}),b[23]=e,b[24]=f,b[25]=h,b[26]=v,b[27]=x,b[28]=E):E=b[28];v=j?C:null;b[29]!==e||b[30]!==f||b[31]!==B||b[32]!==o||b[33]!==x?(C=k.jsx(r,{analyticsContext:e,clickPoint:f,handleFollowButtonClick:B,userId:o,username:x}),b[29]=e,b[30]=f,b[31]=B,b[32]=o,b[33]=x,b[34]=C):C=b[34];b[35]!==n||b[36]!==a||b[37]!==s||b[38]!==m||b[39]!==w||b[40]!==x?(B=k.jsx(t,{fullName:n,handleUsernameClick:a,isVerified:s,showDescription:m,suggestionDescription:w,username:x}),b[35]=n,b[36]=a,b[37]=s,b[38]=m,b[39]=w,b[40]=x,b[41]=B):B=b[41];b[42]!==n||b[43]!==m||b[44]!==w?(a=k.jsx(u,{fullName:n,showDescription:m,suggestionDescription:w}),b[42]=n,b[43]=m,b[44]=w,b[45]=a):a=b[45];b[46]!==e||b[47]!==f||b[48]!==D||b[49]!==h||b[50]!==a||b[51]!==E||b[52]!==v||b[53]!==C||b[54]!==B?(s=k.jsx(c("PolarisFollowChainingListItem.react"),{analyticsContext:e,clickPoint:f,icon:E,isSmallScreen:h,onClick:D,onDismissed:v,primaryCta:C,primaryText:B,secondaryText:a}),b[46]=e,b[47]=f,b[48]=D,b[49]=h,b[50]=a,b[51]=E,b[52]=v,b[53]=C,b[54]=B,b[55]=s):s=b[55];return s}g["default"]=a}),98);
__d("PolarisFollowChainingList.react",["cx","fbt","DangerouslyAccessReactElementInternals_DO_NOT_USE_IN_NEW_CODE","IGDSBox.react","PolarisConnectionsLogger","PolarisErrorRetrySection.react","PolarisFollowCard.react","PolarisIGCoreText","PolarisScrollWatchedComponent.react","PolarisSeeAllLink.react","PolarisUA","PolarisVirtualHSnapScrollCollapsibleList.react","isStringNullOrEmpty","joinClasses","nullthrows","polarisLogAction","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l=i._(/*BTDS*/"Cargando sugerencias..."),m={cardWidth:156,gapWidth:5,gutterWidth:20},n={cardWidth:160,gapWidth:10,gutterWidth:0},o={cardWidth:176,gapWidth:24,gutterWidth:24},p=208,q=216,r=10;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this,b)||this;c.$5=function(){c.$1=!0,c.$6(),c.props.onScrollEnter&&c.props.onScrollEnter()};c.$7=function(){c.$1=!1,c.props.onScrollLeave&&c.props.onScrollLeave()};c.$8=function(a){var b=a.endPct;a=a.startPct;c.$2=Math.max(0,Math.floor(a));c.$3=Math.max(0,Math.floor(b));c.$6()};c.$1=!1;c.$4={};return c}var e=b.prototype;e.$6=function(){if(!this.$1||this.$2==null||this.$3==null||this.props.chainingSuggestions==null)return;for(var a=this.$2;a<=this.$3;++a){var b=this.props.chainingSuggestions[a];if(b==null)continue;if(!this.$4[b.id]){var e=this.props.impressionModule,f={containerModule:this.props.analyticsContext,position:a,targetId:b.id,viewModule:e};e===d("PolarisConnectionsLogger").VIEW_MODULES.web_profile_chaining?d("PolarisConnectionsLogger").logConnectionAction(babelHelpers["extends"]({eventName:"similar_user_impression"},f)):e===d("PolarisConnectionsLogger").VIEW_MODULES.hscroll_feed||e===d("PolarisConnectionsLogger").VIEW_MODULES.end_of_feed?d("PolarisConnectionsLogger").logConnectionAction(babelHelpers["extends"]({eventName:"recommended_user_impression"},f)):e===d("PolarisConnectionsLogger").VIEW_MODULES.trending_accounts_private_profile&&c("polarisLogAction")("trendingAccountModuleScroll",{position:a,source:this.props.analyticsContext,targetId:b.id,viewModule:e});this.$4[b.id]=!0}}};e.render=function(){var a=this.props,b=a.analyticsContext,e=a.chainingFailed,f=a.chainingSuggestions,g=a.className,h=a.clickPoint,j=a.impressionModule,s=a.isSmallScreen,t=a.isTrendingAccountModule;t=t===void 0?!1:t;var u=a.onRetryClicked,v=a.onSuggestionDismissed,w=a.overscan,x=a.seeAllHref,y=a.showDescription;a=a.title;var z=b===d("PolarisConnectionsLogger").CONNECTIONS_CONTAINER_MODULES.profile&&d("PolarisUA").isDesktop(),A=b===d("PolarisConnectionsLogger").CONNECTIONS_CONTAINER_MODULES.feed_timeline&&d("PolarisUA").isDesktop(),B=s?m:z?n:o,C=y?q:p,D=f&&f.map(function(a,d){return k.jsx(c("PolarisFollowCard.react"),{analyticsContext:b,clickPoint:h,impressionModule:j,isSmallScreen:s,onDismissed:v,position:d,showDescription:y,user:a},a.id)});D!=null&&(D=D.map(function(a){return k.jsx(c("IGDSBox.react"),{alignItems:"center",height:C,position:"relative",width:B.cardWidth+(z&&!s?0:B.gapWidth),children:k.jsx(c("IGDSBox.react"),{position:"relative",width:B.cardWidth,children:a})},c("DangerouslyAccessReactElementInternals_DO_NOT_USE_IN_NEW_CODE")(a).key)}));return k.jsxs(c("PolarisScrollWatchedComponent.react"),{className:c("joinClasses")(g,(s||z?"_ackg":"")+(!s&&!z?" _ackh":"")),onScrollEnter:this.$5,onScrollLeave:this.$7,children:[e!==!0&&!f&&k.jsx("div",{className:"_acki",children:k.jsx("p",{children:l})}),e===!0&&k.jsx("div",{className:"_ackj",children:k.jsx(c("PolarisErrorRetrySection.react"),{errorText:i._(/*BTDS*/"No se pueden cargar las sugerencias."),onRetry:c("nullthrows")(u)})}),e!==!0&&f&&k.jsxs("div",{className:"_ackk"+(!A&&(!z||s)?" _ajrd":"")+(A||z&&!s?" _ajre":""),children:[k.jsx("span",{className:"_ackl",children:k.jsx(c("PolarisIGCoreText").BodyEmphasized,{color:t?"ig-primary-text":"ig-secondary-text",zeroMargin:!0,children:a})}),!c("isStringNullOrEmpty")(x)&&k.jsx(c("PolarisSeeAllLink.react"),{href:x,onClick:this.props.onSeeAllClicked})]}),e!==!0&&f&&D!=null&&k.jsx(c("IGDSBox.react"),{height:C,position:"relative",children:k.jsx(c("PolarisVirtualHSnapScrollCollapsibleList.react"),{gutterWidth:A||z&&!s?0:Math.max(0,B.gutterWidth-B.gapWidth/2),initialVisibleItemsGuess:r,itemWidth:B.cardWidth+B.gapWidth,onVisibilityChange:this.$8,overscan:w,children:D})})]})};return b}(k.Component);a.defaultProps={showDescription:!1};g["default"]=a}),226);
__d("PolarisLoggedOutLoginOrSignupRow.react",["IGDSBox.react","IGDSTextVariants.react","PolarisAuthStrings","PolarisFastLink.react","PolarisLinkBuilder","PolarisLoggedOutCtaClickLogger","PolarisLoggedOutLoginButton.react","react","react-compiler-runtime","usePolarisPageID"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(25),e=a.color,f=a.ctaTypeV2,g=a.loginReturnPath,h=a.loginSource,j=a.marginBottom,k=a.marginEnd,l=a.marginStart;a=a.marginTop;e=e===void 0?"primaryButton":e;var m=c("usePolarisPageID")();j=j!=null?j:3;a=a!=null?a:3;var n;b[0]!==e||b[1]!==f||b[2]!==g||b[3]!==h?(n=i.jsx(c("PolarisLoggedOutLoginButton.react"),{color:e,ctaTypeV2:f,loginReturnPath:g,loginSource:h,variant:"primary_link"}),b[0]=e,b[1]=f,b[2]=g,b[3]=h,b[4]=n):n=b[4];b[5]===Symbol["for"]("react.memo_cache_sentinel")?(g=i.jsx(c("IGDSBox.react"),{display:"inlineBlock",marginEnd:1,marginStart:1,children:i.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",children:d("PolarisAuthStrings").OR})}),b[5]=g):g=b[5];var o;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(o=d("PolarisLinkBuilder").buildSignupLink(),b[6]=o):o=b[6];var p;b[7]!==f||b[8]!==h||b[9]!==m?(p=function(){d("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("signup",f,m,{},h)},b[7]=f,b[8]=h,b[9]=m,b[10]=p):p=b[10];var q;b[11]!==e?(q=i.jsx(d("IGDSTextVariants.react").IGDSTextBodyEmphasized,{color:e,textAlign:"center",children:d("PolarisAuthStrings").SIGN_UP_BUTTON_TEXT_SENTENCE_CASE}),b[11]=e,b[12]=q):q=b[12];b[13]!==p||b[14]!==q?(e=i.jsx(c("PolarisFastLink.react"),{"data-testid":void 0,display:"inline",href:o,onClick:p,children:q}),b[13]=p,b[14]=q,b[15]=e):e=b[15];b[16]!==n||b[17]!==e?(o=i.jsxs(d("IGDSTextVariants.react").IGDSTextBody,{textAlign:"center",children:[n,g,e]}),b[16]=n,b[17]=e,b[18]=o):o=b[18];b[19]!==k||b[20]!==l||b[21]!==o||b[22]!==j||b[23]!==a?(p=i.jsx(c("IGDSBox.react"),{alignItems:"center",direction:"row",justifyContent:"center",marginBottom:j,marginEnd:k,marginStart:l,marginTop:a,minHeight:18,width:"100%",children:o}),b[19]=k,b[20]=l,b[21]=o,b[22]=j,b[23]=a,b[24]=p):p=b[24];return p}g["default"]=a}),98);
__d("PolarisLoggedOutAppUpsellInnerContent.react",["fbt","ix","IGCoreImage.react","IGDSBox.react","IGDSDivider.react","IGDSIconButton.react","IGDSTextVariants.react","PolarisAppInstallGuideStrings","PolarisAppInstallStrings","PolarisConfig","PolarisFBConnectHelpers","PolarisFacebookLoginLink.react","PolarisLoggedOutCtaClickLogger","PolarisLoggedOutLoginOrSignupRow.react","PolarisLoggedOutNetzDGReportLink.react","PolarisLoggedOutUpsellStrings","PolarisReactRedux.react","PolarisUseAppPill.react","PolarisUserAvatar.react","browserHistory_DO_NOT_USE","react","react-compiler-runtime","usePolarisOpenApp","usePolarisPageID"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react"));b=j;b.useCallback;b.useMemo;var l=45,m=64,n={button:{height:"xrtz9ly",$$css:!0},icon:{height:"x5yr21d",width:"xh8yej3",$$css:!0}};function o(a,b,c,e,f){var g=c==null?void 0:c.username;c=c==null?void 0:c.displayName;f=f==null?void 0:f.username;if(a==="ig_shop_serp")return{body:d("PolarisAppInstallGuideStrings").GUIDE_BODY_APP_UPSELL_TEXT_FROM_IG_SHOP,header:d("PolarisAppInstallGuideStrings").GUIDE_HEADER_IG_SHOP};if(a==="highlight")return{body:d("PolarisAppInstallGuideStrings").GUIDE_BODY_APP_UPSELL_TEXT_FROM_HIGHLIGHT,header:d("PolarisAppInstallGuideStrings").GUIDE_HEADER_APP_UPSELL_TEXT_FROM_HIGHLIGHT};if(b==="sidecar_item_upsell"&&c!=null)return{body:d("PolarisLoggedOutUpsellStrings").SIDECAR_UPSELL_BODY,header:d("PolarisLoggedOutUpsellStrings").getSeeMoreFrom(c)};if(a==="story")return e==="expired_story"?{body:g!=null?d("PolarisAppInstallStrings").storiesExpiredAppUpsellTextBody(g):d("PolarisAppInstallGuideStrings").GUIDE_BODY_APP_UPSELL_TEXT_FROM_STORIES_V1,header:d("PolarisAppInstallStrings").STORIES_EXPIRED_APP_UPSELL_TEXT_HEADER}:{body:g!=null?d("PolarisAppInstallStrings").storiesActiveAppUpsellTextBody(g):d("PolarisAppInstallGuideStrings").GUIDE_BODY_APP_UPSELL_TEXT_FROM_STORIES_V1,header:d("PolarisAppInstallStrings").STORIES_ACTIVE_APP_UPSELL_TEXT_HEADER};if(a==="reels_tab"&&g==null)return{body:d("PolarisAppInstallStrings").REELS_UPSELL_BODY,header:d("PolarisAppInstallStrings").REELS_UPSELL_HEADER};if(a==="explore_landing_page"||a==="explore_topic_page")return{body:d("PolarisAppInstallGuideStrings").EXPLORE_PAGE_UPSELL_BODY,header:d("PolarisAppInstallStrings").DISCOVER_GUIDE_HEADER_V2};return a==="post"&&f!=null?{body:d("PolarisAppInstallGuideStrings").SEE_WHAT_FRIENDS_ARE_UPTO_UPSELL_BODY,header:d("PolarisAppInstallGuideStrings").SEE_WHAT_FRIENDS_ARE_UPTO_UPSELL_HEADER}:g!=null&&g.length>0?{body:d("PolarisAppInstallStrings").discoverGuideTextV2(g),header:d("PolarisAppInstallStrings").DISCOVER_GUIDE_HEADER_V2}:{body:d("PolarisAppInstallGuideStrings").GUIDE_BODY_TEXT,header:d("PolarisAppInstallGuideStrings").GUIDE_HEADER_COPY}}function p(a){var b=d("react-compiler-runtime").c(2);a=a.triggeringPageType;a=a==="story"?window.location.href:void 0;var e;b[0]!==a?(e=d("PolarisConfig").isLoggedOutFRXEligible()&&k.jsxs(c("IGDSBox.react"),{alignItems:"center","data-testid":void 0,justifyContent:"center",paddingY:2,position:"relative",children:[k.jsx(c("IGDSDivider.react"),{style:"elevated"}),k.jsx(c("IGDSBox.react"),{marginTop:4,position:"relative",children:k.jsx(c("PolarisLoggedOutNetzDGReportLink.react"),{reportedUrlOrContentId:a,textSize:"miniscule"})})]}),b[0]=a,b[1]=e):e=b[1];return e}function q(a){var b=d("react-compiler-runtime").c(3),e=a.ctaTypeV2;a=a.isDismissible;var f;b[0]!==e||b[1]!==a?(f=k.jsx(c("PolarisUseAppPill.react"),{ctaTypeV2:e,isDismissible:a,xstyle:n.button}),b[0]=e,b[1]=a,b[2]=f):f=b[2];return f}function r(a){var b=d("react-compiler-runtime").c(11),e=a.ctaTypeV2,f=a.handleFacebookLoginClick,g=a.intentSource,h=a.isSidecarPostLandscape;a=a.isSidecarUpsell;var i;b[0]!==f||b[1]!==a?(i=!a&&k.jsxs(k.Fragment,{children:[k.jsx(c("PolarisFacebookLoginLink.react"),{onClick:f}),k.jsx(c("IGDSBox.react"),{marginBottom:3,marginTop:3,position:"relative",children:k.jsx(c("IGDSDivider.react"),{style:"elevated"})})]}),b[0]=f,b[1]=a,b[2]=i):i=b[2];b[3]!==e||b[4]!==g||b[5]!==h||b[6]!==a?(f=h!==!0&&k.jsx(c("PolarisLoggedOutLoginOrSignupRow.react"),{ctaTypeV2:e,loginSource:g,marginBottom:0,marginTop:a?2:0}),b[3]=e,b[4]=g,b[5]=h,b[6]=a,b[7]=f):f=b[7];b[8]!==i||b[9]!==f?(e=k.jsxs(k.Fragment,{children:[i,f]}),b[8]=i,b[9]=f,b[10]=e):e=b[10];return e}function a(a){var b=d("react-compiler-runtime").c(52),e=a.ctaType,f=a.ctaTypeV2,g=a.ctaVersion,j=a.intentSource,t=a.isDismissible,u=a.isSidecarPostLandscape,v=a.triggeringPageType;a=a.triggeringUser;t=t===void 0?!1:t;var w=g==="instagramlitecarbon";g=e==="sidecar_item_upsell";var x=c("usePolarisPageID")(),y=d("PolarisReactRedux.react").useSelector(s),z=c("usePolarisOpenApp")(),A;b[0]!==e||b[1]!==j||b[2]!==y||b[3]!==v||b[4]!==a?(A=o(v,e,a,j,y),b[0]=e,b[1]=j,b[2]=y,b[3]=v,b[4]=a,b[5]=A):A=b[5];A=A;A=A;var B;b[6]!==f||b[7]!==w||b[8]!==z||b[9]!==x?(B=function(a){a.preventDefault(),d("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("app_open",f,x,{target_app:w?"instagram_lite":void 0}),z()},b[6]=f,b[7]=w,b[8]=z,b[9]=x,b[10]=B):B=b[10];var C=B;b[11]!==f||b[12]!==x?(B=function(a){a.preventDefault(),d("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("fb_connect",f,x),d("PolarisFBConnectHelpers").redirectToFBOAuth(d("browserHistory_DO_NOT_USE").browserHistory.location.pathname,x)},b[11]=f,b[12]=x,b[13]=B):B=b[13];B=B;e=e==="story_interstitial"||g?l:m;var D=a==null?void 0:a.profilePicUrl,E;b[14]!==C||b[15]!==e||b[16]!==u||b[17]!==g||b[18]!==(y==null?void 0:y.username)||b[19]!==(a==null?void 0:a.username)||b[20]!==D?(E=u!==!0&&k.jsx(c("IGDSBox.react"),{alignItems:"center","data-testid":void 0,justifyContent:"center",marginBottom:1,paddingY:g?2:3,position:"relative",children:D!=null&&D!==""&&(y==null?void 0:y.username)==null?k.jsx(c("PolarisUserAvatar.react"),{"data-testid":void 0,isLink:!1,onClick:function(a){return C(a)},profilePictureUrl:D,size:e,username:a==null?void 0:a.username}):k.jsx(c("IGDSBox.react"),{height:e,width:e,children:k.jsx(c("IGDSIconButton.react"),{onClick:function(a){return C(a)},padding:0,xstyle:n.icon,children:k.jsx(c("IGCoreImage.react"),{alt:h._(/*BTDS*/"Instagram"),objectFit:"cover",src:{light:e===l?i("879116"):i("879118")}})})})}),b[14]=C,b[15]=e,b[16]=u,b[17]=g,b[18]=y==null?void 0:y.username,b[19]=a==null?void 0:a.username,b[20]=D,b[21]=E):E=b[21];b[22]!==E?(e=k.jsx(c("IGDSBox.react"),{maxHeight:800,overflow:"auto",position:"relative",children:E}),b[22]=E,b[23]=e):e=b[23];b[24]!==A.header?(y=k.jsx(c("IGDSBox.react"),{marginBottom:3,marginTop:2,position:"relative",children:k.jsx(d("IGDSTextVariants.react").IGDSTextLabelEmphasized,{textAlign:"center",children:A.header})}),b[24]=A.header,b[25]=y):y=b[25];a=g?3:5;b[26]!==A.body?(D=k.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"center",children:A.body}),b[26]=A.body,b[27]=D):D=b[27];b[28]!==D||b[29]!==a?(E=k.jsx(c("IGDSBox.react"),{marginBottom:a,position:"relative",children:D}),b[28]=D,b[29]=a,b[30]=E):E=b[30];A=g?1:3;b[31]!==f||b[32]!==t?(D=k.jsx(q,{ctaTypeV2:f,isDismissible:t}),b[31]=f,b[32]=t,b[33]=D):D=b[33];b[34]!==A||b[35]!==D?(a=k.jsx(c("IGDSBox.react"),{marginBottom:A,position:"relative",children:D}),b[34]=A,b[35]=D,b[36]=a):a=b[36];t=j!=null?j:"logged_out_app_upsell";b[37]!==f||b[38]!==B||b[39]!==u||b[40]!==g||b[41]!==t?(A=k.jsx(r,{ctaTypeV2:f,handleFacebookLoginClick:B,intentSource:t,isSidecarPostLandscape:u,isSidecarUpsell:g}),b[37]=f,b[38]=B,b[39]=u,b[40]=g,b[41]=t,b[42]=A):A=b[42];b[43]!==v?(D=k.jsx(p,{triggeringPageType:v}),b[43]=v,b[44]=D):D=b[44];b[45]!==E||b[46]!==a||b[47]!==A||b[48]!==D||b[49]!==e||b[50]!==y?(j=k.jsxs(c("IGDSBox.react"),{"data-testid":void 0,padding:4,position:"relative",children:[e,y,E,a,A,D]}),b[45]=E,b[46]=a,b[47]=A,b[48]=D,b[49]=e,b[50]=y,b[51]=j):j=b[51];return j}function s(a){return a.upsell.sharerInformation}g["default"]=a}),226);
__d("PolarisLoggedOutSidecarUpsell.react",["IGDSBox.react","PolarisIgLiteCarbonUpsellsUtils","PolarisLoggedOutAppUpsellInnerContent.react","PolarisLoggedOutCtaImpressionLogger","PolarisPreviewPhoto.react","emptyFunction","react","react-compiler-runtime","usePolarisPageID","useVPVDImpression"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useCallback;function a(a){var b,e,f=d("react-compiler-runtime").c(18);a=a.upsellSidecarChild;var g=c("usePolarisPageID")(),h=d("PolarisIgLiteCarbonUpsellsUtils").isIgLiteCarbonUpsellsEligible();h=h?"instagramlitecarbon":"app_upsell";var j;f[0]!==g?(j=function(){d("PolarisLoggedOutCtaImpressionLogger").logLoggedOutCtaImpressionEvent("embedded_dialog",g)},f[0]=g,f[1]=j):j=f[1];j=j;var k;f[2]!==j?(k={onVPVDEnd:c("emptyFunction"),onVPVDStart:j},f[2]=j,f[3]=k):k=f[3];j=c("useVPVDImpression")(k);k=j[0];if(a.dimensions==null||a.owner==null||a.mediaPreview==null)throw new Error("Invalid SidecarChildItem for upsell");f[4]!==a.dimensions||f[5]!==a.mediaPreview?(j=i.jsx(d("PolarisPreviewPhoto.react").PreviewPhoto,{dimensions:a.dimensions,previewData:a.mediaPreview}),f[4]=a.dimensions,f[5]=a.mediaPreview,f[6]=j):j=f[6];var l=a.dimensions.height<a.dimensions.width;b=(b=a.owner)==null?void 0:b.fullName;e=(e=a.owner)==null?void 0:e.profilePictureUrl;a=(a=a.owner)==null?void 0:a.username;var m;f[7]!==b||f[8]!==e||f[9]!==a?(m={displayName:b,profilePicUrl:e,username:a},f[7]=b,f[8]=e,f[9]=a,f[10]=m):m=f[10];f[11]!==l||f[12]!==m?(b=i.jsx(c("IGDSBox.react"),{alignContent:"center",alignItems:"center",alignSelf:"center",color:"primaryBackground",direction:"column",flex:"shrink",justifyContent:"center",marginEnd:13,marginStart:13,maxWidth:"300px",overflow:"hidden",position:"absolute",shape:"extraRounded",children:i.jsx(c("PolarisLoggedOutAppUpsellInnerContent.react"),{ctaType:"sidecar_item_upsell",ctaTypeV2:"embedded_dialog",ctaVersion:h,intentSource:"post_sidecar_upsell",isSidecarPostLandscape:l,triggeringPageType:"post",triggeringUser:m})}),f[11]=l,f[12]=m,f[13]=b):b=f[13];f[14]!==k||f[15]!==j||f[16]!==b?(e=i.jsxs(c("IGDSBox.react"),{containerRef:k,direction:"column",justifyContent:"center",position:"relative",children:[j,b]}),f[14]=k,f[15]=j,f[16]=b,f[17]=e):e=f[17];return e}g["default"]=a}),98);
__d("PolarisPostsGridItemStatsOverlayContainer.react",["PolarisBoostAcquisitionUtils","PolarisConfig","PolarisPostsGridItemStatsOverlay.react","PolarisReactRedux.react","polarisPostSelectors","react","react-compiler-runtime","usePolarisViewer"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b,e=d("react-compiler-runtime").c(17),f=a.id;e[0]!==f?(a=function(a){return f?d("polarisPostSelectors").getPostById(a,f):null},e[0]=f,e[1]=a):a=e[1];a=d("PolarisReactRedux.react").useSelector(a);b=(b=(b=c("usePolarisViewer")())==null?void 0:b.isProfessionalAccount)!=null?b:!1;var g=(a==null?void 0:a.ownerId)!=null&&(a==null?void 0:a.ownerId)===d("PolarisConfig").getViewerId();if(!a)return null;var h;e[2]!==b||e[3]!==g?(h=d("PolarisBoostAcquisitionUtils").isEligibleForBoostButtonOverlay(b,g),e[2]=b,e[3]=g,e[4]=h):h=e[4];b=h;e[5]!==b||e[6]!==a.boostUnavailableIdentifier||e[7]!==a.boostUnavailableReason||e[8]!==a.boostedStatus||e[9]!==a.commentsDisabled||e[10]!==a.id||e[11]!==a.isVideo||e[12]!==a.numComments||e[13]!==a.numPreviewLikes||e[14]!==a.productType||e[15]!==a.videoViews?(g=i.jsx(c("PolarisPostsGridItemStatsOverlay.react"),{boostedStatus:a.boostedStatus,boostUnavailableIdentifier:a.boostUnavailableIdentifier,boostUnavailableReason:a.boostUnavailableReason,commentsDisabled:a.commentsDisabled,isVideo:a.isVideo,mediaId:a.id,numComments:a.numComments,numPreviewLikes:a.numPreviewLikes,productType:a.productType,showBoostButton:b,videoViews:a.videoViews}),e[5]=b,e[6]=a.boostUnavailableIdentifier,e[7]=a.boostUnavailableReason,e[8]=a.boostedStatus,e[9]=a.commentsDisabled,e[10]=a.id,e[11]=a.isVideo,e[12]=a.numComments,e[13]=a.numPreviewLikes,e[14]=a.productType,e[15]=a.videoViews,e[16]=g):g=e[16];return g}g["default"]=a}),98);
__d("PolarisPostsGridItemOptionalOverlay.react",["PolarisConfig","PolarisPostsGridItemOverlay.react","PolarisPostsGridItemStatsOverlayContainer.react","PolarisShouldHideLikeCountsWithControls","react","react-compiler-runtime","usePolarisViewer"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(3),e=a.isFocused,f=a.post;a=a.shouldShowStats;var g=f.numPreviewLikes,h=f.owner;h=h!==void 0&&h.id===d("PolarisConfig").getViewerId();var j=c("usePolarisViewer")();if(!e)return null;if(g==null)return null;e=g===-1||d("PolarisShouldHideLikeCountsWithControls").shouldHideLikeCountsWithControls(j==null?void 0:j.hideLikeAndViewCounts,f.likeAndViewCountsDisabled,h);if(e)return null;b[0]!==f.id||b[1]!==a?(g=a?i.jsx(c("PolarisPostsGridItemStatsOverlayContainer.react"),{id:f.id}):i.jsx(c("PolarisPostsGridItemOverlay.react"),{}),b[0]=f.id,b[1]=a,b[2]=g):g=b[2];return g}g["default"]=a}),98);
__d("PolarisPostsGridItem.react",["fbt","PolarisDynamicExploreMediaHelpers","PolarisExploreLogger","PolarisFastLink.react","PolarisIGCorePressable.react","PolarisInstagramMediaOverlayFalcoEvent","PolarisLinkBuilder","PolarisOrganicThumbnailImpression","PolarisPhoto.react","PolarisPostCaptionInHeadlineTag","PolarisPostsGridItemMediaIndicator.react","PolarisPostsGridItemOptionalOverlay.react","PolarisPreviewPhoto.react","PolarisReactRedux.react","PolarisSensitivityOverlay.react","PolarisUA","PolarisViewpointReact.react","isStringNullOrEmpty","nullthrows","polarisGetPostFromGraphMediaInterface","polarisMediaOverlayInfoUtils","polarisPostSelectors","react","react-compiler-runtime","stylex","useCheckPreconditionsForPolarisProfilePageInteractionQE","usePolarisLOXTallGrid","usePolarisLoggedOutIntentAction"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));b=j;var l=b.useEffect,m=b.useState,n={root:{display:"x1lliihq",position:"x1n2onr6",width:"xh8yej3",":active_opacity":"x4gyw5p",$$css:!0}};function o(a,b){var c=b||{},e=c.mediaOverlayInfo;d("PolarisInstagramMediaOverlayFalcoEvent").PolarisInstagramMediaOverlayFalcoEvent.log(function(){return d("PolarisInstagramMediaOverlayFalcoEvent").PolarisInstagramMediaOverlayFalcoEvent.buildPayloadForLog({containerModule:d("PolarisInstagramMediaOverlayFalcoEvent").PolarisInstagramMediaOverlayFalcoEvent.getLoggableContainerModuleFromAnalyticsContext(a),customAction:"go_to_post",customSourceOfAction:"media_grid",entityID:b.id,event:d("PolarisInstagramMediaOverlayFalcoEvent").IG_MEDIA_OVERLAY_FALCO_CLIENT_EVENTS.ACTION,overlayLayout:d("polarisMediaOverlayInfoUtils").getMediaOverlayLayout(e),overlayType:d("polarisMediaOverlayInfoUtils").getMediaOverlayType(e)})})}var p=h._(/*BTDS*/"Indicador de contenido sensible");function q(a){var b=d("react-compiler-runtime").c(23),e=a.analyticsContext,f=a.heightRatio;a=a.post;f=f===void 0?1:f;var g,h,i,j,l,m,n,o,p;if(b[0]!==e||b[1]!==f||b[2]!==a){p=Symbol["for"]("react.early_return_sentinel");bb0:{var q=d("polarisGetPostFromGraphMediaInterface").getPostOrSidecarItemForSensitivityOverlay(a);if(q==null){p=null;break bb0}var r=d("polarisGetPostFromGraphMediaInterface").getMediaOverlayMediaCoverInfoFromPostOrSidecarItem(q),s=q.id,t=q.isVideo,u=q.mediaPreview,v=q.owner;h=u;u=q===a&&(a==null?void 0:a.isSidecar)===!0;g=c("PolarisSensitivityOverlay.react");i=e;q=d("PolarisPreviewPhoto.react").PREVIEW_PHOTO_DIMENSION*f;b[12]!==q?(j={height:q,width:d("PolarisPreviewPhoto.react").PREVIEW_PHOTO_DIMENSION},b[12]=q,b[13]=j):j=b[13];l=t!==!0&&!u;m=s;n=r;o=c("nullthrows")(v)}b[0]=e;b[1]=f;b[2]=a;b[3]=g;b[4]=h;b[5]=i;b[6]=j;b[7]=l;b[8]=m;b[9]=n;b[10]=o;b[11]=p}else g=b[3],h=b[4],i=b[5],j=b[6],l=b[7],m=b[8],n=b[9],o=b[10],p=b[11];if(p!==Symbol["for"]("react.early_return_sentinel"))return p;b[14]!==g||b[15]!==h||b[16]!==i||b[17]!==j||b[18]!==l||b[19]!==m||b[20]!==n||b[21]!==o.id?(q=k.jsx(g,{analyticsContext:i,dimensions:j,isPhoto:l,mediaId:m,mediaOverlayCoverInfo:n,ownerId:o.id,previewData:h,variant:"grid"}),b[14]=g,b[15]=h,b[16]=i,b[17]=j,b[18]=l,b[19]=m,b[20]=n,b[21]=o.id,b[22]=q):q=b[22];return q}function a(a){var b=d("react-compiler-runtime").c(96),e=a.analyticsContext,f=a.id,g=a.isVisible,h=a.mediaLinkBuilder,j=a.onClick,s=a.onImpression,t=a.onMediaRendered,u=a.onMouseEnter,v=a.profileUser,w=a.shouldSpawnModals,x=a.xstyle,y=a.loggingData;a=h===void 0?d("PolarisLinkBuilder").buildMediaLink:h;b[0]!==f?(h=function(a){return d("polarisPostSelectors").getPostById(a,f)},b[0]=f,b[1]=h):h=b[1];var z=d("PolarisReactRedux.react").useSelector(h);h=z.accessibilityCaption;var A=z.caption,B=z.code,C=z.felixProfileGridCrop,D=z.hasUpcomingEvent,E=z.isSidecar,F=z.isVideo,G=z.pinnedForUsers,H=z.profileGridThumbnailFittingStyle,I=z.src,J=z.tallProfileGridCrop,K=z.thumbnailResources,L=z.thumbnailSrc,M=z.thumbnailTallSrc,N=m(!1),O=N[0],aa=N[1];N=m(!1);var P=N[0],Q=N[1],R;b[2]!==g||b[3]!==s||b[4]!==z?(N=function(){s&&g&&s(z)},R=[s,g,z],b[2]=g,b[3]=s,b[4]=z,b[5]=N,b[6]=R):(N=b[5],R=b[6]);l(N,R);b[7]!==f||b[8]!==t?(N=function(a,b){t&&t(f,b)},b[7]=f,b[8]=t,b[9]=N):N=b[9];R=N;b[10]!==e||b[11]!==y||b[12]!==j||b[13]!==z?(N=function(a,b){b!=null&&o(e,b),j&&j(a,z,y),Q(!0)},b[10]=e,b[11]=y,b[12]=j,b[13]=z,b[14]=N):N=b[14];var S=N;b[15]!==B||b[16]!==F||b[17]!==a?(N=a(c("nullthrows")(B),F),b[15]=B,b[16]=F,b[17]=a,b[18]=N):N=b[18];var T=N;b[19]!==F||b[20]!==z?(B=F===!0&&d("polarisGetPostFromGraphMediaInterface").isClipsPost(z),b[19]=F,b[20]=z,b[21]=B):B=b[21];a=B;b[22]!==z?(N=d("polarisGetPostFromGraphMediaInterface").getPostOrSidecarItemForSensitivityOverlay(z),b[22]=z,b[23]=N):N=b[23];var U=N;B=(y==null?void 0:y.displayVariant)||"BASIC";b[24]!==e||b[25]!==y||b[26]!==z||b[27]!==B?(N=d("PolarisOrganicThumbnailImpression").makeThumbnailImpressionAction(babelHelpers["extends"]({analyticsContext:e,gridItemSize:d("PolarisDynamicExploreMediaHelpers").GRID_ITEM_SIZE.ONE_BY_ONE,itemType:d("PolarisExploreLogger").getDiscoverGridItemType(B),mediaType:d("polarisGetPostFromGraphMediaInterface").getPostMediaType(z),postId:z.id},y)),b[24]=e,b[25]=y,b[26]=z,b[27]=B,b[28]=N):N=b[28];b[29]!==N?(B=[N],b[29]=N,b[30]=B):B=b[30];N=B;var ba=d("useCheckPreconditionsForPolarisProfilePageInteractionQE").useCheckPreconditionsForPolarisProfilePageInteractionQE(),ca=c("usePolarisLoggedOutIntentAction")();b[31]!==ca?(B=function(){ca({source:"profile_post"})},b[31]=ca,b[32]=B):B=b[32];var da=B,V=c("usePolarisLOXTallGrid")();b[33]!==H||b[34]!==V?(B=function(){return V?H:null},b[33]=H,b[34]=V,b[35]=B):B=b[35];B=B;var W;b[36]!==C||b[37]!==J||b[38]!==V?(W=function(){return V&&J!=null?J:C},b[36]=C,b[37]=J,b[38]=V,b[39]=W):W=b[39];W=W;var X;b[40]!==V?(X=function(){return V?"133.33333333333331%":null},b[40]=V,b[41]=X):X=b[41];X=X;var Y;b[42]!==I||b[43]!==L||b[44]!==M||b[45]!==V?(Y=function(){var a=V?M:L;return c("isStringNullOrEmpty")(a)?I:a},b[42]=I,b[43]=L,b[44]=M,b[45]=V,b[46]=Y):Y=b[46];Y=Y;var Z;b[47]!==h||b[48]!==e||b[49]!==A||b[50]!==X||b[51]!==W||b[52]!==B||b[53]!==U||b[54]!==R||b[55]!==Y||b[56]!==z||b[57]!==K||b[58]!==V?(Z=U!=null?k.jsx(q,{analyticsContext:e,heightRatio:V?1.3333333333333333:1,post:z}):k.jsx(c("PolarisPhoto.react"),{accessibilityCaption:h,caption:A,customHeightPercent:X(),ignoreSrcSet:!0,onPhotoRendered:R,profileGridCrop:W(),profileGridFittingStyle:B(),rich:!0,src:c("nullthrows")(Y()),srcSet:K}),b[47]=h,b[48]=e,b[49]=A,b[50]=X,b[51]=W,b[52]=B,b[53]=U,b[54]=R,b[55]=Y,b[56]=z,b[57]=K,b[58]=V,b[59]=Z):Z=b[59];b[60]!==D||b[61]!==a||b[62]!==E||b[63]!==F||b[64]!==U||b[65]!==G||b[66]!==z.audience||b[67]!==(v==null?void 0:v.id)?(h=U==null&&k.jsx(c("PolarisPostsGridItemMediaIndicator.react"),{hasUpcomingEvent:D===!0,isClipsVideo:a,isPinnedForThisUser:(G||[]).map(r).includes(v==null?void 0:v.id),isSharedToCloseFriends:z.audience==="MediaAudience.BESTIES",isSidecar:E===!0,isVideo:F===!0}),b[60]=D,b[61]=a,b[62]=E,b[63]=F,b[64]=U,b[65]=G,b[66]=z.audience,b[67]=v==null?void 0:v.id,b[68]=h):h=b[68];b[69]!==O||b[70]!==P?(X=!d("PolarisUA").isMobile()&&(P||O),b[69]=O,b[70]=P,b[71]=X):X=b[71];W=U==null;b[72]!==z||b[73]!==X||b[74]!==W?(B=k.jsx(c("PolarisPostsGridItemOptionalOverlay.react"),{isFocused:X,post:z,shouldShowStats:W}),b[72]=z,b[73]=X,b[74]=W,b[75]=B):B=b[75];b[76]!==Z||b[77]!==h||b[78]!==B?(R=k.jsxs(k.Fragment,{children:[Z,h,B]}),b[76]=Z,b[77]=h,b[78]=B,b[79]=R):R=b[79];var $=R;b[80]!==e||b[81]!==A||b[82]!==T||b[83]!==$||b[84]!==S||b[85]!==ba||b[86]!==U||b[87]!==da||b[88]!==u||b[89]!==w||b[90]!==x?(Y=function(a){return k.jsxs("div",babelHelpers["extends"]({},(i||(i=c("stylex"))).props(n.root,x),{"data-testid":void 0,ref:a,children:[ba?k.jsx(c("PolarisIGCorePressable.react"),{onPress:da,children:$}):k.jsx(c("PolarisFastLink.react"),{"aria-label":U!=null?p:void 0,href:T,onBlur:function(){return Q(!1)},onClick:function(a){return S(a,U)},onFocus:function(){return Q(!0)},onMouseEnter:function(){u==null?void 0:u(),aa(!0)},onMouseLeave:function(){return aa(!1)},shouldOpenModal:w===!0,children:$}),e==="profilePage"&&k.jsx(c("PolarisPostCaptionInHeadlineTag"),{caption:A})]}))},b[80]=e,b[81]=A,b[82]=T,b[83]=$,b[84]=S,b[85]=ba,b[86]=U,b[87]=da,b[88]=u,b[89]=w,b[90]=x,b[91]=Y):Y=b[91];b[92]!==z.id||b[93]!==Y||b[94]!==N?(K=k.jsx(d("PolarisViewpointReact.react").Viewpoint,{action:N,id:z.id,children:Y}),b[92]=z.id,b[93]=Y,b[94]=N,b[95]=K):K=b[95];return K}function r(a){return a.id}g["default"]=a}),226);
__d("PolarisPPRLoggedPostsGridItem",["PolarisPostsGridItem.react","polarisWithPPRLogging"],(function(a,b,c,d,e,f,g){"use strict";a=c("polarisWithPPRLogging")(c("PolarisPostsGridItem.react"));g["default"]=a}),98);
__d("PolarisSavedPostsLogger",["InstagramODS","vulture"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){switch(b){case"saved":case"SavedCollectionPage":case"postPage":case"feed":case"profile":case"selfProfilePageModal":case"exploreLandingPageModal":c("vulture")("_n5F2HDLIhiKNS4FmvWdfmvhhxE=");c("InstagramODS").incr_CAREFUL_WHEN_USE_DYNAMIC_KEY("web.createCollection."+a+"."+b);break;default:c("vulture")("tT8NammrZoLd071U0fidX4a_8fk="),c("InstagramODS").incr_CAREFUL_WHEN_USE_DYNAMIC_KEY("web.createCollection."+a+".undefined")}}function b(a,b){switch(b){case"saved":case"SavedCollectionPage":case"postPage":case"feed":case"profile":case"selfProfilePageModal":case"exploreLandingPageModal":c("vulture")("8wvEjNcO3Lry_2zXK0RLpUYaDVs=");c("InstagramODS").incr_CAREFUL_WHEN_USE_DYNAMIC_KEY("web.editCollection."+a+"."+b);break;default:c("vulture")("TH_dFNah_zkmLu3k26rTuWxbau8="),c("InstagramODS").incr_CAREFUL_WHEN_USE_DYNAMIC_KEY("web.editCollection."+a+".undefined")}}function d(a,b){switch(b){case"SavedCollectionPage":c("vulture")("WWdv3zsseQBpboyiyQ3pF4htx8U=");c("InstagramODS").incr_CAREFUL_WHEN_USE_DYNAMIC_KEY("web.deleteCollection."+a+".SavedCollectionPage");break;default:c("vulture")("7semu-nIxGVMR4bKWuWggWXVMIA="),c("InstagramODS").incr_CAREFUL_WHEN_USE_DYNAMIC_KEY("web.deleteCollection."+a+".undefined")}}g.logCreateCollection=a;g.logEditCollection=b;g.logDeleteCollection=d}),98);
__d("PolarisUserActionDismissRelatedProfileSuggestion",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return function(c){c({dismissedId:b,targetId:a,type:"RELATED_PROFILE_DISMISSED_SUGGESTION"})}}f.dismissRelatedProfileSuggestion=a}),66);
__d("PolarisVirtualPostsGrid.react",["IGDSSpinner.react","PolarisPPRLoggedPostsGridItem","PolarisPostsGridQEHelpers","PolarisVirtualPostsGridConstants","PolarisVirtualizedWithScrollLogging.react","polarisLogAction","react","shallowEqual","usePrevious","vc-tracker"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useCallback,k=b.useEffect,l=b.useRef,m=b.useState,n={item:{marginInlineEnd:"x1j53mea xzj7kzq x7sr72d x1a9yca x880fnx",$$css:!0},item1px:{marginInlineEnd:"x1mpyi22 x1j53mea",$$css:!0},item4px:{marginInlineEnd:"x1j53mea xzj7kzq x7sr72d xbipx2v x880fnx",$$css:!0}},o=4,p=8,q=[],r=[],s=0;function a(a){var b=a.PostGridItem,e=a.allowSampledScrollLogging;e=e===void 0?!1:e;var f=a.hasNextPage,g=a.initialRowsRenderCount;g=g===void 0?o:g;var h=a.isFetching,t=a.onNextPage,u=a.overscanRowsCount;u=u===void 0?p:u;var v=a.postIds,w=v===void 0?q:v;v=a.posts;var x=v===void 0?r:v;v=a.postsPerRow;v=v===void 0?3:v;var y=a.shouldSpawnModals,z=a.sizeCache,A=a.visibleCount,B=a.analyticsContext,C=a.loggingData,D=a.mediaLinkBuilder,E=a.onClick,F=a.onImpression,G=a.onMouseEnter,H=a.profileUser,I=l(null);a=m(0);var J=a[0],K=a[1],L=c("usePrevious")({hasNextPage:f,postIds:w}),M=j(function(){return s++},[]);k(function(){K(M())},[M]);var N=function(a){a=a.numScreensFromEnd;f&&!h&&t&&(a<d("PolarisVirtualPostsGridConstants").NEXT_PAGE_THRESHOLD&&(c("polarisLogAction")("loadMoreScroll"),t()))},O=d("PolarisPostsGridQEHelpers").getMarginForPostsGridItems();a=function(a){var d=a.index,e=a.isVisible;a.visibleIndex;a=babelHelpers.objectWithoutPropertiesLoose(a,["index","isVisible","visibleIndex"]);var f=x[d];f=f?f.id:w[d];return b?i.jsx(b,{analyticsContext:B,className:{0:"",4:"x1mpyi22 x1j53mea",2:"x1j53mea xzj7kzq x7sr72d x1a9yca x880fnx",6:"x1j53mea xzj7kzq x7sr72d x1a9yca x880fnx",1:"x1j53mea xzj7kzq x7sr72d xbipx2v x880fnx",5:"x1j53mea xzj7kzq x7sr72d xbipx2v x880fnx",3:"x1j53mea xzj7kzq x7sr72d xbipx2v x880fnx",7:"x1j53mea xzj7kzq x7sr72d xbipx2v x880fnx"}[!!(O===1)<<2|!!(O===28)<<1|!!(O===4)<<0],id:f,isVisible:e,loggingData:babelHelpers["extends"]({},a,{},C),mediaLinkBuilder:D,onClick:E,onImpression:F,onMouseEnter:G,profileUser:H,shouldSpawnModals:y},f):i.jsx(c("PolarisPPRLoggedPostsGridItem"),{analyticsContext:B,id:f,isGridView:!0,isVisible:e,loggingData:babelHelpers["extends"]({},a,{},C),mediaLinkBuilder:D,onClick:E,onImpression:F,onMouseEnter:G,profileUser:H,shouldSpawnModals:y,xstyle:O===28?n.item:O===4?n.item4px:O===1?n.item1px:null},f)};k(function(){if(L==null)return;var a=L!=null?L:{},b=a.hasNextPage;a=a.postIds;var d=I.current;d&&!c("shallowEqual")(a,w)&&d.forceUpdate();f!==b&&t&&t()},[f,t,w,L]);k(function(){return function(){c("vc-tracker").getCurrentVCTraces().forEach(function(a){a.unlock("VirtualPostsGrid_isFetching_"+J)})}},[J]);h?c("vc-tracker").getCurrentVCTraces().forEach(function(a){a.lock("VirtualPostsGrid_isFetching_"+J)}):c("vc-tracker").getCurrentVCTraces().forEach(function(a){a.unlock("VirtualPostsGrid_isFetching_"+J)});return i.jsxs(i.Fragment,{children:[i.jsx(d("PolarisVirtualizedWithScrollLogging.react").IGVirtualGridWithLogging,{allowSampledScrollLogging:e,analyticsContext:B,estimatedItemSize:d("PolarisVirtualPostsGridConstants").POSTS_ROW_ESTIMATED_HEIGHT,initialRenderCount:g,itemCount:A,itemsPerRow:v,onInitialize:function(a){a=a.numScreensFromEnd;a<0&&N({numScreensFromEnd:a})},onScroll:N,overscanCount:u,ref:I,renderer:a,rendererPlaceholder:function(a){return i.createElement("div",babelHelpers["extends"]({},{0:{},4:{className:"x1mpyi22 x1j53mea"},2:{className:"x1j53mea xzj7kzq x7sr72d x1a9yca x880fnx"},6:{className:"x1j53mea xzj7kzq x7sr72d x1a9yca x880fnx"},1:{className:"x1j53mea xzj7kzq x7sr72d xbipx2v x880fnx"},5:{className:"x1j53mea xzj7kzq x7sr72d xbipx2v x880fnx"},3:{className:"x1j53mea xzj7kzq x7sr72d xbipx2v x880fnx"},7:{className:"x1j53mea xzj7kzq x7sr72d xbipx2v x880fnx"}}[!!(O===1)<<2|!!(O===28)<<1|!!(O===4)<<0],{key:a}))},rowClassName:{0:"",4:"x1ty9z65 xzboxd6",2:"xzboxd6 x1f01sob x11ulueq x1rqjbyr xwq5r7b",6:"xzboxd6 x1f01sob x11ulueq x1rqjbyr xwq5r7b",1:"xzboxd6 x1f01sob x11ulueq xcghwft xwq5r7b",5:"xzboxd6 x1f01sob x11ulueq xcghwft xwq5r7b",3:"xzboxd6 x1f01sob x11ulueq xcghwft xwq5r7b",7:"xzboxd6 x1f01sob x11ulueq xcghwft xwq5r7b"}[!!(O===1)<<2|!!(O===28)<<1|!!(O===4)<<0],sizeCache:z}),f&&i.jsx("div",babelHelpers["extends"]({className:"x1qjc9v5 x9f619 x78zum5 xdt5ytf x2lah0s xsdox4t x14z9mp xat24cr x1lziwak x1tfhste x1n2onr6 x11njtxf"},{children:i.jsx(c("IGDSSpinner.react"),{position:"absolute",size:"medium"})}))]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("polarisRelatedProfileSelectors.react",["PolarisReactRedux.react","polarisUserSelectors","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){return a.relatedProfiles.relatedProfileSuggestions[b]}function a(a){var b=d("react-compiler-runtime").c(2),c;b[0]!==a?(c=function(b){return d("polarisUserSelectors").getUsersByIds(b,h(b,a))},b[0]=a,b[1]=c):c=b[1];return d("PolarisReactRedux.react").useSelector(c)}g.getRelatedProfileSuggestions=h;g.useRelatedProfileSuggestions=a}),98);